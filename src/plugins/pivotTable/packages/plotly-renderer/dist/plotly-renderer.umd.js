(function($c,Of){typeof exports=="object"&&typeof module<"u"?module.exports=Of():typeof define=="function"&&define.amd?define(Of):($c=typeof globalThis<"u"?globalThis:$c||self,$c.PlotlyRenderer=Of())})(this,function(){"use strict";const $c=function(it,Ke,ut){const Ce=String(it).split(".");let qe=Ce[0];const Xe=Ce.length>1?ut+Ce[1]:"",o=/(\d+)(\d{3})/;for(;o.test(qe);)qe=qe.replace(o,`$1${Ke}$2`);return qe+Xe},Of=function(it){const Ke=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},it);return function(ut){if(isNaN(ut)||!isFinite(ut))return"";const Ce=$c((Ke.scaler*ut).toFixed(Ke.digitsAfterDecimal),Ke.thousandsSep,Ke.decimalSep);return`${Ke.prefix}${Ce}${Ke.suffix}`}},Pp=/(\d+)|(\D+)/g,zh=/\d/,Dp=/^0/,ac=(it,Ke)=>{if(Ke!==null&&it===null)return-1;if(it!==null&&Ke===null)return 1;if(typeof it=="number"&&isNaN(it))return-1;if(typeof Ke=="number"&&isNaN(Ke))return 1;const ut=Number(it),Ce=Number(Ke);if(ut<Ce)return-1;if(ut>Ce)return 1;if(typeof it=="number"&&typeof Ke!="number")return-1;if(typeof Ke=="number"&&typeof it!="number")return 1;if(typeof it=="number"&&typeof Ke=="number")return 0;if(isNaN(Ce)&&!isNaN(ut))return-1;if(isNaN(ut)&&!isNaN(Ce))return 1;let qe=String(it),Xe=String(Ke);if(qe===Xe)return 0;if(!zh.test(qe)||!zh.test(Xe))return qe>Xe?1:-1;for(qe=qe.match(Pp),Xe=Xe.match(Pp);qe.length&&Xe.length;){const o=qe.shift(),U=Xe.shift();if(o!==U)return zh.test(o)&&zh.test(U)?o.replace(Dp,".0")-U.replace(Dp,".0"):o>U?1:-1}return qe.length-Xe.length},p0=function(it){const Ke={},ut={};for(const Ce in it){const qe=it[Ce];Ke[qe]=Ce,typeof qe=="string"&&(ut[qe.toLowerCase()]=Ce)}return function(Ce,qe){return Ce in Ke&&qe in Ke?Ke[Ce]-Ke[qe]:Ce in Ke?-1:qe in Ke?1:Ce in ut&&qe in ut?ut[Ce]-ut[qe]:Ce in ut?-1:qe in ut?1:ac(Ce,qe)}},Pv=function(it,Ke){if(it){if(typeof it=="function"){const ut=it(Ke);if(typeof ut=="function")return ut}else if(Ke in it)return it[Ke]}return ac},Oo=Of(),Nf=Of({digitsAfterDecimal:0}),tu=Of({digitsAfterDecimal:1,scaler:100,suffix:"%"}),Xo={count(it=Nf){return()=>function(){return{count:0,push(){this.count++},value(){return this.count},format:it}}},uniques(it,Ke=Nf){return function([ut]){return function(){return{uniq:[],push(Ce){Array.from(this.uniq).includes(Ce[ut])||this.uniq.push(Ce[ut])},value(){return it(this.uniq)},format:Ke,numInputs:typeof ut<"u"?0:1}}}},sum(it=Oo){return function([Ke]){return function(){return{sum:0,push(ut){isNaN(parseFloat(ut[Ke]))||(this.sum+=parseFloat(ut[Ke]))},value(){return this.sum},format:it,numInputs:typeof Ke<"u"?0:1}}}},extremes(it,Ke=Oo){return function([ut]){return function(Ce){return{val:null,sorter:Pv(typeof Ce<"u"?Ce.sorters:null,ut),push(qe){let Xe=qe[ut];["min","max"].includes(it)&&(Xe=parseFloat(Xe),isNaN(Xe)||(this.val=Math[it](Xe,this.val!==null?this.val:Xe))),it==="first"&&this.sorter(Xe,this.val!==null?this.val:Xe)<=0&&(this.val=Xe),it==="last"&&this.sorter(Xe,this.val!==null?this.val:Xe)>=0&&(this.val=Xe)},value(){return this.val},format(qe){return isNaN(qe)?qe:Ke(qe)},numInputs:typeof ut<"u"?0:1}}}},quantile(it,Ke=Oo){return function([ut]){return function(){return{vals:[],push(Ce){const qe=parseFloat(Ce[ut]);isNaN(qe)||this.vals.push(qe)},value(){if(this.vals.length===0)return null;this.vals.sort((qe,Xe)=>qe-Xe);const Ce=(this.vals.length-1)*it;return(this.vals[Math.floor(Ce)]+this.vals[Math.ceil(Ce)])/2},format:Ke,numInputs:typeof ut<"u"?0:1}}}},runningStat(it="mean",Ke=1,ut=Oo){return function([Ce]){return function(){return{n:0,m:0,s:0,push(qe){const Xe=parseFloat(qe[Ce]);if(isNaN(Xe))return;this.n+=1,this.n===1&&(this.m=Xe);const o=this.m+(Xe-this.m)/this.n;this.s=this.s+(Xe-this.m)*(Xe-o),this.m=o},value(){if(it==="mean")return this.n===0?0/0:this.m;if(this.n<=Ke)return 0;switch(it){case"var":return this.s/(this.n-Ke);case"stdev":return Math.sqrt(this.s/(this.n-Ke));default:throw new Error("unknown mode for runningStat")}},format:ut,numInputs:typeof Ce<"u"?0:1}}}},sumOverSum(it=Oo){return function([Ke,ut]){return function(){return{sumNum:0,sumDenom:0,push(Ce){isNaN(parseFloat(Ce[Ke]))||(this.sumNum+=parseFloat(Ce[Ke])),isNaN(parseFloat(Ce[ut]))||(this.sumDenom+=parseFloat(Ce[ut]))},value(){return this.sumNum/this.sumDenom},format:it,numInputs:typeof Ke<"u"&&typeof ut<"u"?0:2}}}},fractionOf(it,Ke="total",ut=tu){return(...Ce)=>function(qe,Xe,o){return{selector:{total:[[],[]],row:[Xe,[]],col:[[],o]}[Ke],inner:it(...Array.from(Ce||[]))(qe,Xe,o),push(U){this.inner.push(U)},format:ut,value(){return this.inner.value()/qe.getAggregator(...Array.from(this.selector||[])).inner.value()},numInputs:it(...Array.from(Ce||[]))().numInputs}}}};Xo.countUnique=it=>Xo.uniques(Ke=>Ke.length,it),Xo.listUnique=it=>Xo.uniques(Ke=>Ke.join(it),Ke=>Ke),Xo.max=it=>Xo.extremes("max",it),Xo.min=it=>Xo.extremes("min",it),Xo.first=it=>Xo.extremes("first",it),Xo.last=it=>Xo.extremes("last",it),Xo.median=it=>Xo.quantile(.5,it),Xo.average=it=>Xo.runningStat("mean",1,it),Xo.var=(it,Ke)=>Xo.runningStat("var",it,Ke),Xo.stdev=(it,Ke)=>Xo.runningStat("stdev",it,Ke);const Oh=(it=>({Count:it.count(Nf),"Count Unique Values":it.countUnique(Nf),"List Unique Values":it.listUnique(", "),Sum:it.sum(Oo),"Integer Sum":it.sum(Nf),Average:it.average(Oo),Median:it.median(Oo),"Sample Variance":it.var(1,Oo),"Sample Standard Deviation":it.stdev(1,Oo),Minimum:it.min(Oo),Maximum:it.max(Oo),First:it.first(Oo),Last:it.last(Oo),"Sum over Sum":it.sumOverSum(Oo),"Sum as Fraction of Total":it.fractionOf(it.sum(),"total",tu),"Sum as Fraction of Rows":it.fractionOf(it.sum(),"row",tu),"Sum as Fraction of Columns":it.fractionOf(it.sum(),"col",tu),"Count as Fraction of Total":it.fractionOf(it.count(),"total",tu),"Count as Fraction of Rows":it.fractionOf(it.count(),"row",tu),"Count as Fraction of Columns":it.fractionOf(it.count(),"col",tu)}))(Xo),d0=(it=>({Compte:it.count(Nf),"Compter les valeurs uniques":it.countUnique(Nf),"Liste des valeurs uniques":it.listUnique(", "),Somme:it.sum(Oo),"Somme de nombres entiers":it.sum(Nf),Moyenne:it.average(Oo),M\u00E9diane:it.median(Oo),"Variance de l'\xE9chantillon":it.var(1,Oo),"\xC9cart-type de l'\xE9chantillon":it.stdev(1,Oo),Minimum:it.min(Oo),Maximum:it.max(Oo),Premier:it.first(Oo),Dernier:it.last(Oo),"Somme Total":it.sumOverSum(Oo),"Somme en fraction du total":it.fractionOf(it.sum(),"total",tu),"Somme en tant que fraction de lignes":it.fractionOf(it.sum(),"row",tu),"Somme en tant que fraction de colonnes":it.fractionOf(it.sum(),"col",tu),"Comptage en tant que fraction du total":it.fractionOf(it.count(),"total",tu),"Comptage en tant que fraction de lignes":it.fractionOf(it.count(),"row",tu),"Comptage en tant que fraction de colonnes":it.fractionOf(it.count(),"col",tu)}))(Xo),Rp={en:{aggregators:Oh,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",totals:"Totals",vs:"vs",by:"by",cancel:"Cancel",only:"only"}},fr:{frAggregators:d0,localeStrings:{renderError:"Une erreur est survenue en dessinant le tableau crois\xE9.",computeError:"Une erreur est survenue en calculant le tableau crois\xE9.",uiRenderError:"Une erreur est survenue en dessinant l'interface du tableau crois\xE9 dynamique.",selectAll:"S\xE9lectionner tout",selectNone:"Ne rien s\xE9lectionner",tooMany:"(trop de valeurs \xE0 afficher)",filterResults:"Filtrer les valeurs",totals:"Totaux",vs:"sur",by:"par",apply:"Appliquer",cancel:"Annuler",only:"seul"}}},g0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y0=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],qc=it=>`0${it}`.substr(-2,2),m0={bin(it,Ke){return ut=>ut[it]-ut[it]%Ke},dateFormat(it,Ke,ut=!1,Ce=g0,qe=y0){const Xe=ut?"UTC":"";return function(o){const U=new Date(Date.parse(o[it]));return isNaN(U)?"":Ke.replace(/%(.)/g,function(H,w){switch(w){case"y":return U[`get${Xe}FullYear`]();case"m":return qc(U[`get${Xe}Month`]()+1);case"n":return Ce[U[`get${Xe}Month`]()];case"d":return qc(U[`get${Xe}Date`]());case"w":return qe[U[`get${Xe}Day`]()];case"x":return U[`get${Xe}Day`]();case"H":return qc(U[`get${Xe}Hours`]());case"M":return qc(U[`get${Xe}Minutes`]());case"S":return qc(U[`get${Xe}Seconds`]());default:return`%${w}`}})}}};class Sf{constructor(Ke={}){this.props=Object.assign({},Sf.defaultProps,Ke),this.aggregator=this.props.aggregators[this.props.aggregatorName](this.props.vals),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.sorted=!1,this.filteredData=[],Sf.forEachRecord(this.props.data,this.props.derivedAttributes,ut=>{this.filter(ut)&&(this.filteredData.push(ut),this.processRecord(ut))})}filter(Ke){for(const ut in this.props.valueFilter)if(Ke[ut]in this.props.valueFilter[ut])return!1;return!0}forEachMatchingRecord(Ke,ut){return Sf.forEachRecord(this.props.data,this.props.derivedAttributes,Ce=>{if(this.filter(Ce)){for(const qe in Ke)if(Ke[qe]!==(qe in Ce?Ce[qe]:"null"))return;ut(Ce)}})}arrSort(Ke){let ut;const Ce=(()=>{const qe=[];for(ut of Array.from(Ke))qe.push(Pv(this.props.sorters,ut));return qe})();return function(qe,Xe){for(const o of Object.keys(Ce||{})){const U=Ce[o],H=U(qe[o],Xe[o]);if(H!==0)return H}return 0}}sortKeys(){if(!this.sorted){this.sorted=!0;const Ke=(ut,Ce)=>this.getAggregator(ut,Ce).value();switch(this.props.rowOrder){case"value_a_to_z":this.rowKeys.sort((ut,Ce)=>ac(Ke(ut,[]),Ke(Ce,[])));break;case"value_z_to_a":this.rowKeys.sort((ut,Ce)=>-ac(Ke(ut,[]),Ke(Ce,[])));break;default:this.rowKeys.sort(this.arrSort(this.props.rows))}switch(this.props.colOrder){case"value_a_to_z":this.colKeys.sort((ut,Ce)=>ac(Ke([],ut),Ke([],Ce)));break;case"value_z_to_a":this.colKeys.sort((ut,Ce)=>-ac(Ke([],ut),Ke([],Ce)));break;default:this.colKeys.sort(this.arrSort(this.props.cols))}}}getFilteredData(){return this.filteredData}getColKeys(){return this.sortKeys(),this.colKeys}getRowKeys(){return this.sortKeys(),this.rowKeys}processRecord(Ke){const ut=[],Ce=[];for(const o of Array.from(this.props.cols))ut.push(o in Ke?Ke[o]:"null");for(const o of Array.from(this.props.rows))Ce.push(o in Ke?Ke[o]:"null");const qe=Ce.join(String.fromCharCode(0)),Xe=ut.join(String.fromCharCode(0));this.allTotal.push(Ke),Ce.length!==0&&(this.rowTotals[qe]||(this.rowKeys.push(Ce),this.rowTotals[qe]=this.aggregator(this,Ce,[])),this.rowTotals[qe].push(Ke)),ut.length!==0&&(this.colTotals[Xe]||(this.colKeys.push(ut),this.colTotals[Xe]=this.aggregator(this,[],ut)),this.colTotals[Xe].push(Ke)),ut.length!==0&&Ce.length!==0&&(this.tree[qe]||(this.tree[qe]={}),this.tree[qe][Xe]||(this.tree[qe][Xe]=this.aggregator(this,Ce,ut)),this.tree[qe][Xe].push(Ke))}getAggregator(Ke,ut){let Ce;const qe=Ke.join(String.fromCharCode(0)),Xe=ut.join(String.fromCharCode(0));return Ke.length===0&&ut.length===0?Ce=this.allTotal:Ke.length===0?Ce=this.colTotals[Xe]:ut.length===0?Ce=this.rowTotals[qe]:Ce=this.tree[qe][Xe],Ce||{value(){return null},format(){return""}}}}Sf.forEachRecord=function(it,Ke,ut){let Ce,qe;if(Object.getOwnPropertyNames(Ke).length===0?Ce=ut:Ce=function(Xe){for(const o in Ke){const U=Ke[o](Xe);U!==null&&(Xe[o]=U)}return ut(Xe)},typeof it=="function")return it(Ce);if(Array.isArray(it))return Array.isArray(it[0])?(()=>{const Xe=[];for(const o of Object.keys(it||{})){const U=it[o];if(o>0){qe={};for(const H of Object.keys(it[0]||{})){const w=it[0][H];qe[w]=U[H]}Xe.push(Ce(qe))}}return Xe})():(()=>{const Xe=[];for(qe of Array.from(it))Xe.push(Ce(qe));return Xe})();throw new Error("unknown input format")},Sf.defaultProps={aggregators:Oh,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},valueFilter:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z",derivedAttributes:{}};const Dv={props:{data:{type:[Array,Object,Function],required:!0},aggregators:{type:Object,default:function(){return Oh}},aggregatorName:{type:String,default:"Count"},heatmapMode:String,tableColorScaleGenerator:{type:Function},tableOptions:{type:Object,default:function(){return{}}},renderers:Object,rendererName:{type:String,default:"Table"},locale:{type:String,default:"en"},locales:{type:Object,default:function(){return Rp}},rowTotal:{type:Boolean,default:!0},colTotal:{type:Boolean,default:!0},cols:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},vals:{type:Array,default:function(){return[]}},attributes:{type:Array,default:function(){return[]}},valueFilter:{type:Object,default:function(){return{}}},sorters:{type:[Function,Object],default:function(){return{}}},derivedAttributes:{type:[Function,Object],default:function(){return{}}},rowOrder:{type:String,default:"key_a_to_z",validator:function(it){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(it)!==-1}},colOrder:{type:String,default:"key_a_to_z",validator:function(it){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(it)!==-1}},tableMaxWidth:{type:Number,default:0,validator:function(it){return it>=0}}},methods:{renderError(it){return it("span",this.locales[this.locale].localeStrings.renderError||"An error occurred rendering the PivotTable results.")},computeError(it){return it("span",this.locales[this.locale].localeStrings.computeError||"An error occurred computing the PivotTable results.")},uiRenderError(it){return it("span",this.locales[this.locale].localeStrings.uiRenderError||"An error occurred rendering the PivotTable UI.")}}};function x0(it){const Ke=Math.min.apply(Math,it),ut=Math.max.apply(Math,it);return Ce=>{const qe=255-Math.round(255*(Ce-Ke)/(ut-Ke));return{backgroundColor:`rgb(255,${qe},${qe})`}}}function Nh(it={}){return{name:it.name,mixins:[Dv],props:{heatmapMode:String,tableColorScaleGenerator:{type:Function,default:x0},tableOptions:{type:Object,default:function(){return{clickCallback:null}}},localeStrings:{type:Object,default:function(){return{totals:"Totals"}}}},methods:{spanSize(Ke,ut,Ce){let qe;if(ut!==0){let o,U,H=!0;for(qe=0,U=Ce,o=U>=0;o?qe<=U:qe>=U;o?qe++:qe--)Ke[ut-1][qe]!==Ke[ut][qe]&&(H=!1);if(H)return-1}let Xe=0;for(;ut+Xe<Ke.length;){let o,U,H=!1;for(qe=0,U=Ce,o=U>=0;o?qe<=U:qe>=U;o?qe++:qe--)Ke[ut][qe]!==Ke[ut+Xe][qe]&&(H=!0);if(H)break;Xe++}return Xe}},render(Ke){let ut=null;try{const T=Object.assign({},this.$props,this.$attrs.props);ut=new Sf(T)}catch(T){if(console&&console.error(T.stack))return this.computeError(Ke)}const Ce=ut.props.cols,qe=ut.props.rows,Xe=ut.getRowKeys(),o=ut.getColKeys(),U=ut.getAggregator([],[]);let H=()=>{},w=()=>{},f=()=>{};if(it.heatmapMode){const T=this.tableColorScaleGenerator,e=o.map(n=>ut.getAggregator([],n).value());w=T(e);const a=Xe.map(n=>ut.getAggregator(n,[]).value());if(f=T(a),it.heatmapMode==="full"){const n=[];Xe.map(t=>o.map(h=>n.push(ut.getAggregator(t,h).value())));const r=T(n);H=(t,h,i)=>r(i)}else if(it.heatmapMode==="row"){const n={};Xe.map(r=>{const t=o.map(h=>ut.getAggregator(r,h).value());n[r]=T(t)}),H=(r,t,h)=>n[r](h)}else if(it.heatmapMode==="col"){const n={};o.map(r=>{const t=Xe.map(h=>ut.getAggregator(h,r).value());n[r]=T(t)}),H=(r,t,h)=>n[t](h)}}const M=(T,e,a)=>{const n=this.tableOptions;if(n&&n.clickCallback){const r={};let t={};for(let h in Ce)!a.hasOwnProperty(h)||(t=Ce[h],a[h]!==null&&(r[t]=a[h]));for(let h in qe)!e.hasOwnProperty(h)||(t=qe[h],e[h]!==null&&(r[t]=e[h]));return h=>n.clickCallback(h,T,r,ut)}};return Ke("table",{staticClass:["pvtTable"]},[Ke("thead",[Ce.map((T,e)=>Ke("tr",{attrs:{key:`colAttrs${e}`}},[e===0&&qe.length!==0?Ke("th",{attrs:{colSpan:qe.length,rowSpan:Ce.length}}):void 0,Ke("th",{staticClass:["pvtAxisLabel"]},T),o.map((a,n)=>{const r=this.spanSize(o,n,e);return r===-1?null:Ke("th",{staticClass:["pvtColLabel"],attrs:{key:`colKey${n}`,colSpan:r,rowSpan:e===Ce.length-1&&qe.length!==0?2:1}},a[e])}),e===0&&this.rowTotal?Ke("th",{staticClass:["pvtTotalLabel"],attrs:{rowSpan:Ce.length+(qe.length===0?0:1)}},this.localeStrings.totals):void 0])),qe.length!==0?Ke("tr",[qe.map((T,e)=>Ke("th",{staticClass:["pvtAxisLabel"],attrs:{key:`rowAttr${e}`}},T)),this.rowTotal?Ke("th",{staticClass:["pvtTotalLabel"]},Ce.length===0?this.localeStrings.totals:null):Ce.length===0?void 0:Ke("th",{staticClass:["pvtTotalLabel"]},null)]):void 0]),Ke("tbody",[Xe.map((T,e)=>{const a=ut.getAggregator(T,[]);return Ke("tr",{attrs:{key:`rowKeyRow${e}`}},[T.map((n,r)=>{const t=this.spanSize(Xe,e,r);return t===-1?null:Ke("th",{staticClass:["pvtRowLabel"],attrs:{key:`rowKeyLabel${e}-${r}`,rowSpan:t,colSpan:r===qe.length-1&&Ce.length!==0?2:1}},n)}),o.map((n,r)=>{const t=ut.getAggregator(T,n);return Ke("td",{staticClass:["pvVal"],style:H(T,n,t.value()),attrs:{key:`pvtVal${e}-${r}`},on:this.tableOptions.clickCallback?{click:M(t.value(),T,n)}:{}},t.format(t.value()))}),this.rowTotal?Ke("td",{staticClass:["pvtTotal"],style:f(a.value()),on:this.tableOptions.clickCallback?{click:M(a.value(),T,[])}:{}},a.format(a.value())):void 0])}),Ke("tr",[this.colTotal?Ke("th",{staticClass:["pvtTotalLabel"],attrs:{colSpan:qe.length+(Ce.length===0?0:1)}},this.localeStrings.totals):void 0,this.colTotal?o.map((T,e)=>{const a=ut.getAggregator([],T);return Ke("td",{staticClass:["pvtTotal"],style:w(a.value()),attrs:{key:`total${e}`},on:this.tableOptions.clickCallback?{click:M(a.value(),[],T)}:{}},a.format(a.value()))}):void 0,this.colTotal&&this.rowTotal?Ke("td",{staticClass:["pvtGrandTotal"],on:this.tableOptions.clickCallback?{click:M(U.value(),[],[])}:{}},U.format(U.value())):void 0])])])},renderError(Ke,ut){return this.renderError(Ke)}}}const b0={name:"tsv-export-renderers",mixins:[Dv],render(it){const Ke=new Sf(this.$props),ut=Ke.getRowKeys(),Ce=Ke.getColKeys();ut.length===0&&ut.push([]),Ce.length===0&&Ce.push([]);const qe=Ke.props.rows.map(o=>o);Ce.length===1&&Ce[0].length===0?qe.push(this.aggregatorName):Ce.map(o=>qe.push(o.join("-")));const Xe=ut.map(o=>{const U=o.map(H=>H);return Ce.map(H=>{const w=Ke.getAggregator(o,H).value();U.push(w||"")}),U});return Xe.unshift(qe),it("textarea",{style:{width:"100%",height:`${window.innerHeight/2}px`},attrs:{readOnly:!0},domProps:{value:Xe.map(o=>o.join("	")).join(`
`)}})},renderError(it,Ke){return this.renderError(it)}},_0={Table:Nh({name:"vue-table"}),"Table Heatmap":Nh({heatmapMode:"full",name:"vue-table-heatmap"}),"Table Col Heatmap":Nh({heatmapMode:"col",name:"vue-table-col-heatmap"}),"Table Row Heatmap":Nh({heatmapMode:"row",name:"vue-table-col-heatmap"}),"Export Table TSV":b0},w0={name:"vue-pivottable",mixins:[Dv],computed:{rendererItems(){return this.renderers||Object.assign({},_0)}},methods:{createPivottable(it){const Ke=this.$props;return it(this.rendererItems[this.rendererName],{props:Object.assign(Ke,{localeStrings:Ke.locales[Ke.locale].localeStrings})})},createWrapperContainer(it){return it("div",{style:{display:"block",width:"100%","overflow-x":"auto","max-width":this.tableMaxWidth?`${this.tableMaxWidth}px`:void 0}},[this.createPivottable(it)])}},render(it){return this.createWrapperContainer(it)},renderError(it,Ke){return this.renderError(it)}};var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A0(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}function M0(it){var Ke=it.default;if(typeof Ke=="function"){var ut=function(){return Ke.apply(this,arguments)};ut.prototype=Ke.prototype}else ut={};return Object.defineProperty(ut,"__esModule",{value:!0}),Object.keys(it).forEach(function(Ce){var qe=Object.getOwnPropertyDescriptor(it,Ce);Object.defineProperty(ut,Ce,qe.get?qe:{enumerable:!0,get:function(){return it[Ce]}})}),ut}var Ip={exports:{}};/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Bh(it){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bh=function(Ke){return typeof Ke}:Bh=function(Ke){return Ke&&typeof Symbol=="function"&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke},Bh(it)}function S0(it,Ke,ut){return Ke in it?Object.defineProperty(it,Ke,{value:ut,enumerable:!0,configurable:!0,writable:!0}):it[Ke]=ut,it}function xu(){return xu=Object.assign||function(it){for(var Ke=1;Ke<arguments.length;Ke++){var ut=arguments[Ke];for(var Ce in ut)Object.prototype.hasOwnProperty.call(ut,Ce)&&(it[Ce]=ut[Ce])}return it},xu.apply(this,arguments)}function Bf(it){for(var Ke=1;Ke<arguments.length;Ke++){var ut=arguments[Ke]!=null?arguments[Ke]:{},Ce=Object.keys(ut);typeof Object.getOwnPropertySymbols=="function"&&(Ce=Ce.concat(Object.getOwnPropertySymbols(ut).filter(function(qe){return Object.getOwnPropertyDescriptor(ut,qe).enumerable}))),Ce.forEach(function(qe){S0(it,qe,ut[qe])})}return it}function E0(it,Ke){if(it==null)return{};var ut={},Ce=Object.keys(it),qe,Xe;for(Xe=0;Xe<Ce.length;Xe++)qe=Ce[Xe],!(Ke.indexOf(qe)>=0)&&(ut[qe]=it[qe]);return ut}function k0(it,Ke){if(it==null)return{};var ut=E0(it,Ke),Ce,qe;if(Object.getOwnPropertySymbols){var Xe=Object.getOwnPropertySymbols(it);for(qe=0;qe<Xe.length;qe++)Ce=Xe[qe],!(Ke.indexOf(Ce)>=0)&&(!Object.prototype.propertyIsEnumerable.call(it,Ce)||(ut[Ce]=it[Ce]))}return ut}function C0(it){return L0(it)||P0(it)||D0()}function L0(it){if(Array.isArray(it)){for(var Ke=0,ut=new Array(it.length);Ke<it.length;Ke++)ut[Ke]=it[Ke];return ut}}function P0(it){if(Symbol.iterator in Object(it)||Object.prototype.toString.call(it)==="[object Arguments]")return Array.from(it)}function D0(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var R0="1.10.2";function Ef(it){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(it)}var kf=Ef(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),eh=Ef(/Edge/i),Fp=Ef(/firefox/i),Rv=Ef(/safari/i)&&!Ef(/chrome/i)&&!Ef(/android/i),zp=Ef(/iP(ad|od|hone)/i),I0=Ef(/chrome/i)&&Ef(/android/i),Op={capture:!1,passive:!1};function Ji(it,Ke,ut){it.addEventListener(Ke,ut,!kf&&Op)}function Wi(it,Ke,ut){it.removeEventListener(Ke,ut,!kf&&Op)}function Uh(it,Ke){if(Ke){if(Ke[0]===">"&&(Ke=Ke.substring(1)),it)try{if(it.matches)return it.matches(Ke);if(it.msMatchesSelector)return it.msMatchesSelector(Ke);if(it.webkitMatchesSelector)return it.webkitMatchesSelector(Ke)}catch{return!1}return!1}}function F0(it){return it.host&&it!==document&&it.host.nodeType?it.host:it.parentNode}function Fu(it,Ke,ut,Ce){if(it){ut=ut||document;do{if(Ke!=null&&(Ke[0]===">"?it.parentNode===ut&&Uh(it,Ke):Uh(it,Ke))||Ce&&it===ut)return it;if(it===ut)break}while(it=F0(it))}return null}var Np=/\s+/g;function Zo(it,Ke,ut){if(it&&Ke)if(it.classList)it.classList[ut?"add":"remove"](Ke);else{var Ce=(" "+it.className+" ").replace(Np," ").replace(" "+Ke+" "," ");it.className=(Ce+(ut?" "+Ke:"")).replace(Np," ")}}function ui(it,Ke,ut){var Ce=it&&it.style;if(Ce){if(ut===void 0)return document.defaultView&&document.defaultView.getComputedStyle?ut=document.defaultView.getComputedStyle(it,""):it.currentStyle&&(ut=it.currentStyle),Ke===void 0?ut:ut[Ke];!(Ke in Ce)&&Ke.indexOf("webkit")===-1&&(Ke="-webkit-"+Ke),Ce[Ke]=ut+(typeof ut=="string"?"":"px")}}function ic(it,Ke){var ut="";if(typeof it=="string")ut=it;else do{var Ce=ui(it,"transform");Ce&&Ce!=="none"&&(ut=Ce+" "+ut)}while(!Ke&&(it=it.parentNode));var qe=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return qe&&new qe(ut)}function Bp(it,Ke,ut){if(it){var Ce=it.getElementsByTagName(Ke),qe=0,Xe=Ce.length;if(ut)for(;qe<Xe;qe++)ut(Ce[qe],qe);return Ce}return[]}function of(){var it=document.scrollingElement;return it||document.documentElement}function is(it,Ke,ut,Ce,qe){if(!(!it.getBoundingClientRect&&it!==window)){var Xe,o,U,H,w,f,M;if(it!==window&&it!==of()?(Xe=it.getBoundingClientRect(),o=Xe.top,U=Xe.left,H=Xe.bottom,w=Xe.right,f=Xe.height,M=Xe.width):(o=0,U=0,H=window.innerHeight,w=window.innerWidth,f=window.innerHeight,M=window.innerWidth),(Ke||ut)&&it!==window&&(qe=qe||it.parentNode,!kf))do if(qe&&qe.getBoundingClientRect&&(ui(qe,"transform")!=="none"||ut&&ui(qe,"position")!=="static")){var T=qe.getBoundingClientRect();o-=T.top+parseInt(ui(qe,"border-top-width")),U-=T.left+parseInt(ui(qe,"border-left-width")),H=o+Xe.height,w=U+Xe.width;break}while(qe=qe.parentNode);if(Ce&&it!==window){var e=ic(qe||it),a=e&&e.a,n=e&&e.d;e&&(o/=n,U/=a,M/=a,f/=n,H=o+f,w=U+M)}return{top:o,left:U,bottom:H,right:w,width:M,height:f}}}function Up(it,Ke,ut){for(var Ce=Uf(it,!0),qe=is(it)[Ke];Ce;){var Xe=is(Ce)[ut],o=void 0;if(ut==="top"||ut==="left"?o=qe>=Xe:o=qe<=Xe,!o)return Ce;if(Ce===of())break;Ce=Uf(Ce,!1)}return!1}function Hh(it,Ke,ut){for(var Ce=0,qe=0,Xe=it.children;qe<Xe.length;){if(Xe[qe].style.display!=="none"&&Xe[qe]!==bi.ghost&&Xe[qe]!==bi.dragged&&Fu(Xe[qe],ut.draggable,it,!1)){if(Ce===Ke)return Xe[qe];Ce++}qe++}return null}function Iv(it,Ke){for(var ut=it.lastElementChild;ut&&(ut===bi.ghost||ui(ut,"display")==="none"||Ke&&!Uh(ut,Ke));)ut=ut.previousElementSibling;return ut||null}function os(it,Ke){var ut=0;if(!it||!it.parentNode)return-1;for(;it=it.previousElementSibling;)it.nodeName.toUpperCase()!=="TEMPLATE"&&it!==bi.clone&&(!Ke||Uh(it,Ke))&&ut++;return ut}function Hp(it){var Ke=0,ut=0,Ce=of();if(it)do{var qe=ic(it),Xe=qe.a,o=qe.d;Ke+=it.scrollLeft*Xe,ut+=it.scrollTop*o}while(it!==Ce&&(it=it.parentNode));return[Ke,ut]}function z0(it,Ke){for(var ut in it)if(it.hasOwnProperty(ut)){for(var Ce in Ke)if(Ke.hasOwnProperty(Ce)&&Ke[Ce]===it[ut][Ce])return Number(ut)}return-1}function Uf(it,Ke){if(!it||!it.getBoundingClientRect)return of();var ut=it,Ce=!1;do if(ut.clientWidth<ut.scrollWidth||ut.clientHeight<ut.scrollHeight){var qe=ui(ut);if(ut.clientWidth<ut.scrollWidth&&(qe.overflowX=="auto"||qe.overflowX=="scroll")||ut.clientHeight<ut.scrollHeight&&(qe.overflowY=="auto"||qe.overflowY=="scroll")){if(!ut.getBoundingClientRect||ut===document.body)return of();if(Ce||Ke)return ut;Ce=!0}}while(ut=ut.parentNode);return of()}function O0(it,Ke){if(it&&Ke)for(var ut in Ke)Ke.hasOwnProperty(ut)&&(it[ut]=Ke[ut]);return it}function Fv(it,Ke){return Math.round(it.top)===Math.round(Ke.top)&&Math.round(it.left)===Math.round(Ke.left)&&Math.round(it.height)===Math.round(Ke.height)&&Math.round(it.width)===Math.round(Ke.width)}var th;function Vp(it,Ke){return function(){if(!th){var ut=arguments,Ce=this;ut.length===1?it.call(Ce,ut[0]):it.apply(Ce,ut),th=setTimeout(function(){th=void 0},Ke)}}}function N0(){clearTimeout(th),th=void 0}function Gp(it,Ke,ut){it.scrollLeft+=Ke,it.scrollTop+=ut}function zv(it){var Ke=window.Polymer,ut=window.jQuery||window.Zepto;return Ke&&Ke.dom?Ke.dom(it).cloneNode(!0):ut?ut(it).clone(!0)[0]:it.cloneNode(!0)}function Yp(it,Ke){ui(it,"position","absolute"),ui(it,"top",Ke.top),ui(it,"left",Ke.left),ui(it,"width",Ke.width),ui(it,"height",Ke.height)}function Ov(it){ui(it,"position",""),ui(it,"top",""),ui(it,"left",""),ui(it,"width",""),ui(it,"height","")}var fl="Sortable"+new Date().getTime();function B0(){var it=[],Ke;return{captureAnimationState:function(){if(it=[],!!this.options.animation){var ut=[].slice.call(this.el.children);ut.forEach(function(Ce){if(!(ui(Ce,"display")==="none"||Ce===bi.ghost)){it.push({target:Ce,rect:is(Ce)});var qe=Bf({},it[it.length-1].rect);if(Ce.thisAnimationDuration){var Xe=ic(Ce,!0);Xe&&(qe.top-=Xe.f,qe.left-=Xe.e)}Ce.fromRect=qe}})}},addAnimationState:function(ut){it.push(ut)},removeAnimationState:function(ut){it.splice(z0(it,{target:ut}),1)},animateAll:function(ut){var Ce=this;if(!this.options.animation){clearTimeout(Ke),typeof ut=="function"&&ut();return}var qe=!1,Xe=0;it.forEach(function(o){var U=0,H=o.target,w=H.fromRect,f=is(H),M=H.prevFromRect,T=H.prevToRect,e=o.rect,a=ic(H,!0);a&&(f.top-=a.f,f.left-=a.e),H.toRect=f,H.thisAnimationDuration&&Fv(M,f)&&!Fv(w,f)&&(e.top-f.top)/(e.left-f.left)===(w.top-f.top)/(w.left-f.left)&&(U=H0(e,M,T,Ce.options)),Fv(f,w)||(H.prevFromRect=w,H.prevToRect=f,U||(U=Ce.options.animation),Ce.animate(H,e,f,U)),U&&(qe=!0,Xe=Math.max(Xe,U),clearTimeout(H.animationResetTimer),H.animationResetTimer=setTimeout(function(){H.animationTime=0,H.prevFromRect=null,H.fromRect=null,H.prevToRect=null,H.thisAnimationDuration=null},U),H.thisAnimationDuration=U)}),clearTimeout(Ke),qe?Ke=setTimeout(function(){typeof ut=="function"&&ut()},Xe):typeof ut=="function"&&ut(),it=[]},animate:function(ut,Ce,qe,Xe){if(Xe){ui(ut,"transition",""),ui(ut,"transform","");var o=ic(this.el),U=o&&o.a,H=o&&o.d,w=(Ce.left-qe.left)/(U||1),f=(Ce.top-qe.top)/(H||1);ut.animatingX=!!w,ut.animatingY=!!f,ui(ut,"transform","translate3d("+w+"px,"+f+"px,0)"),U0(ut),ui(ut,"transition","transform "+Xe+"ms"+(this.options.easing?" "+this.options.easing:"")),ui(ut,"transform","translate3d(0,0,0)"),typeof ut.animated=="number"&&clearTimeout(ut.animated),ut.animated=setTimeout(function(){ui(ut,"transition",""),ui(ut,"transform",""),ut.animated=!1,ut.animatingX=!1,ut.animatingY=!1},Xe)}}}}function U0(it){return it.offsetWidth}function H0(it,Ke,ut,Ce){return Math.sqrt(Math.pow(Ke.top-it.top,2)+Math.pow(Ke.left-it.left,2))/Math.sqrt(Math.pow(Ke.top-ut.top,2)+Math.pow(Ke.left-ut.left,2))*Ce.animation}var rh=[],Nv={initializeByDefault:!0},nh={mount:function(it){for(var Ke in Nv)Nv.hasOwnProperty(Ke)&&!(Ke in it)&&(it[Ke]=Nv[Ke]);rh.push(it)},pluginEvent:function(it,Ke,ut){var Ce=this;this.eventCanceled=!1,ut.cancel=function(){Ce.eventCanceled=!0};var qe=it+"Global";rh.forEach(function(Xe){!Ke[Xe.pluginName]||(Ke[Xe.pluginName][qe]&&Ke[Xe.pluginName][qe](Bf({sortable:Ke},ut)),Ke.options[Xe.pluginName]&&Ke[Xe.pluginName][it]&&Ke[Xe.pluginName][it](Bf({sortable:Ke},ut)))})},initializePlugins:function(it,Ke,ut,Ce){rh.forEach(function(o){var U=o.pluginName;if(!(!it.options[U]&&!o.initializeByDefault)){var H=new o(it,Ke,it.options);H.sortable=it,H.options=it.options,it[U]=H,xu(ut,H.defaults)}});for(var qe in it.options)if(it.options.hasOwnProperty(qe)){var Xe=this.modifyOption(it,qe,it.options[qe]);typeof Xe<"u"&&(it.options[qe]=Xe)}},getEventProperties:function(it,Ke){var ut={};return rh.forEach(function(Ce){typeof Ce.eventProperties=="function"&&xu(ut,Ce.eventProperties.call(Ke[Ce.pluginName],it))}),ut},modifyOption:function(it,Ke,ut){var Ce;return rh.forEach(function(qe){!it[qe.pluginName]||qe.optionListeners&&typeof qe.optionListeners[Ke]=="function"&&(Ce=qe.optionListeners[Ke].call(it[qe.pluginName],ut))}),Ce}};function ah(it){var Ke=it.sortable,ut=it.rootEl,Ce=it.name,qe=it.targetEl,Xe=it.cloneEl,o=it.toEl,U=it.fromEl,H=it.oldIndex,w=it.newIndex,f=it.oldDraggableIndex,M=it.newDraggableIndex,T=it.originalEvent,e=it.putSortable,a=it.extraEventProperties;if(Ke=Ke||ut&&ut[fl],!!Ke){var n,r=Ke.options,t="on"+Ce.charAt(0).toUpperCase()+Ce.substr(1);window.CustomEvent&&!kf&&!eh?n=new CustomEvent(Ce,{bubbles:!0,cancelable:!0}):(n=document.createEvent("Event"),n.initEvent(Ce,!0,!0)),n.to=o||ut,n.from=U||ut,n.item=qe||ut,n.clone=Xe,n.oldIndex=H,n.newIndex=w,n.oldDraggableIndex=f,n.newDraggableIndex=M,n.originalEvent=T,n.pullMode=e?e.lastPutMode:void 0;var h=Bf({},a,nh.getEventProperties(Ce,Ke));for(var i in h)n[i]=h[i];ut&&ut.dispatchEvent(n),r[t]&&r[t].call(Ke,n)}}var Bl=function(it,Ke){var ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=ut.evt,qe=k0(ut,["evt"]);nh.pluginEvent.bind(bi)(it,Ke,Bf({dragEl:Ha,parentEl:bs,ghostEl:Di,rootEl:Ko,nextEl:oc,lastDownEl:Vh,cloneEl:ss,cloneHidden:Hf,dragStarted:oh,putSortable:qs,activeSortable:bi.active,originalEvent:Ce,oldIndex:_c,oldDraggableIndex:ih,newIndex:ru,newDraggableIndex:Vf,hideGhostForTarget:Qp,unhideGhostForTarget:$p,cloneNowHidden:function(){Hf=!0},cloneNowShown:function(){Hf=!1},dispatchSortableEvent:function(Xe){El({sortable:Ke,name:Xe,originalEvent:Ce})}},qe))};function El(it){ah(Bf({putSortable:qs,cloneEl:ss,targetEl:Ha,rootEl:Ko,oldIndex:_c,oldDraggableIndex:ih,newIndex:ru,newDraggableIndex:Vf},it))}var Ha,bs,Di,Ko,oc,Vh,ss,Hf,_c,ru,ih,Vf,Gh,qs,wc=!1,Yh=!1,Wh=[],sc,zu,Bv,Uv,Wp,jp,oh,Tc,sh,lh=!1,jh=!1,Xh,cl,Hv=[],Vv=!1,Zh=[],Kh=typeof document<"u",Jh=zp,Xp=eh||kf?"cssFloat":"float",V0=Kh&&!I0&&!zp&&"draggable"in document.createElement("div"),Zp=function(){if(Kh){if(kf)return!1;var it=document.createElement("x");return it.style.cssText="pointer-events:auto",it.style.pointerEvents==="auto"}}(),Kp=function(it,Ke){var ut=ui(it),Ce=parseInt(ut.width)-parseInt(ut.paddingLeft)-parseInt(ut.paddingRight)-parseInt(ut.borderLeftWidth)-parseInt(ut.borderRightWidth),qe=Hh(it,0,Ke),Xe=Hh(it,1,Ke),o=qe&&ui(qe),U=Xe&&ui(Xe),H=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+is(qe).width,w=U&&parseInt(U.marginLeft)+parseInt(U.marginRight)+is(Xe).width;if(ut.display==="flex")return ut.flexDirection==="column"||ut.flexDirection==="column-reverse"?"vertical":"horizontal";if(ut.display==="grid")return ut.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(qe&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return Xe&&(U.clear==="both"||U.clear===f)?"vertical":"horizontal"}return qe&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||H>=Ce&&ut[Xp]==="none"||Xe&&ut[Xp]==="none"&&H+w>Ce)?"vertical":"horizontal"},G0=function(it,Ke,ut){var Ce=ut?it.left:it.top,qe=ut?it.right:it.bottom,Xe=ut?it.width:it.height,o=ut?Ke.left:Ke.top,U=ut?Ke.right:Ke.bottom,H=ut?Ke.width:Ke.height;return Ce===o||qe===U||Ce+Xe/2===o+H/2},Y0=function(it,Ke){var ut;return Wh.some(function(Ce){if(!Iv(Ce)){var qe=is(Ce),Xe=Ce[fl].options.emptyInsertThreshold,o=it>=qe.left-Xe&&it<=qe.right+Xe,U=Ke>=qe.top-Xe&&Ke<=qe.bottom+Xe;if(Xe&&o&&U)return ut=Ce}}),ut},Jp=function(it){function Ke(qe,Xe){return function(o,U,H,w){var f=o.options.group.name&&U.options.group.name&&o.options.group.name===U.options.group.name;if(qe==null&&(Xe||f))return!0;if(qe==null||qe===!1)return!1;if(Xe&&qe==="clone")return qe;if(typeof qe=="function")return Ke(qe(o,U,H,w),Xe)(o,U,H,w);var M=(Xe?o:U).options.group.name;return qe===!0||typeof qe=="string"&&qe===M||qe.join&&qe.indexOf(M)>-1}}var ut={},Ce=it.group;(!Ce||Bh(Ce)!="object")&&(Ce={name:Ce}),ut.name=Ce.name,ut.checkPull=Ke(Ce.pull,!0),ut.checkPut=Ke(Ce.put),ut.revertClone=Ce.revertClone,it.group=ut},Qp=function(){!Zp&&Di&&ui(Di,"display","none")},$p=function(){!Zp&&Di&&ui(Di,"display","")};Kh&&document.addEventListener("click",function(it){if(Yh)return it.preventDefault(),it.stopPropagation&&it.stopPropagation(),it.stopImmediatePropagation&&it.stopImmediatePropagation(),Yh=!1,!1},!0);var lc=function(it){if(Ha){it=it.touches?it.touches[0]:it;var Ke=Y0(it.clientX,it.clientY);if(Ke){var ut={};for(var Ce in it)it.hasOwnProperty(Ce)&&(ut[Ce]=it[Ce]);ut.target=ut.rootEl=Ke,ut.preventDefault=void 0,ut.stopPropagation=void 0,Ke[fl]._onDragOver(ut)}}},W0=function(it){Ha&&Ha.parentNode[fl]._isOutsideThisEl(it.target)};function bi(it,Ke){if(!(it&&it.nodeType&&it.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(it));this.el=it,this.options=Ke=xu({},Ke),it[fl]=this;var ut={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(it.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Kp(it,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Xe,o){Xe.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:bi.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};nh.initializePlugins(this,it,ut);for(var Ce in ut)!(Ce in Ke)&&(Ke[Ce]=ut[Ce]);Jp(Ke);for(var qe in this)qe.charAt(0)==="_"&&typeof this[qe]=="function"&&(this[qe]=this[qe].bind(this));this.nativeDraggable=Ke.forceFallback?!1:V0,this.nativeDraggable&&(this.options.touchStartThreshold=1),Ke.supportPointer?Ji(it,"pointerdown",this._onTapStart):(Ji(it,"mousedown",this._onTapStart),Ji(it,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ji(it,"dragover",this),Ji(it,"dragenter",this)),Wh.push(this.el),Ke.store&&Ke.store.get&&this.sort(Ke.store.get(this)||[]),xu(this,B0())}bi.prototype={constructor:bi,_isOutsideThisEl:function(it){!this.el.contains(it)&&it!==this.el&&(Tc=null)},_getDirection:function(it,Ke){return typeof this.options.direction=="function"?this.options.direction.call(this,it,Ke,Ha):this.options.direction},_onTapStart:function(it){if(it.cancelable){var Ke=this,ut=this.el,Ce=this.options,qe=Ce.preventOnFilter,Xe=it.type,o=it.touches&&it.touches[0]||it.pointerType&&it.pointerType==="touch"&&it,U=(o||it).target,H=it.target.shadowRoot&&(it.path&&it.path[0]||it.composedPath&&it.composedPath()[0])||U,w=Ce.filter;if($0(ut),!Ha&&!(/mousedown|pointerdown/.test(Xe)&&it.button!==0||Ce.disabled)&&!H.isContentEditable&&(U=Fu(U,Ce.draggable,ut,!1),!(U&&U.animated)&&Vh!==U)){if(_c=os(U),ih=os(U,Ce.draggable),typeof w=="function"){if(w.call(this,it,U,this)){El({sortable:Ke,rootEl:H,name:"filter",targetEl:U,toEl:ut,fromEl:ut}),Bl("filter",Ke,{evt:it}),qe&&it.cancelable&&it.preventDefault();return}}else if(w&&(w=w.split(",").some(function(f){if(f=Fu(H,f.trim(),ut,!1),f)return El({sortable:Ke,rootEl:f,name:"filter",targetEl:U,fromEl:ut,toEl:ut}),Bl("filter",Ke,{evt:it}),!0}),w)){qe&&it.cancelable&&it.preventDefault();return}Ce.handle&&!Fu(H,Ce.handle,ut,!1)||this._prepareDragStart(it,o,U)}}},_prepareDragStart:function(it,Ke,ut){var Ce=this,qe=Ce.el,Xe=Ce.options,o=qe.ownerDocument,U;if(ut&&!Ha&&ut.parentNode===qe){var H=is(ut);if(Ko=qe,Ha=ut,bs=Ha.parentNode,oc=Ha.nextSibling,Vh=ut,Gh=Xe.group,bi.dragged=Ha,sc={target:Ha,clientX:(Ke||it).clientX,clientY:(Ke||it).clientY},Wp=sc.clientX-H.left,jp=sc.clientY-H.top,this._lastX=(Ke||it).clientX,this._lastY=(Ke||it).clientY,Ha.style["will-change"]="all",U=function(){if(Bl("delayEnded",Ce,{evt:it}),bi.eventCanceled){Ce._onDrop();return}Ce._disableDelayedDragEvents(),!Fp&&Ce.nativeDraggable&&(Ha.draggable=!0),Ce._triggerDragStart(it,Ke),El({sortable:Ce,name:"choose",originalEvent:it}),Zo(Ha,Xe.chosenClass,!0)},Xe.ignore.split(",").forEach(function(w){Bp(Ha,w.trim(),Yv)}),Ji(o,"dragover",lc),Ji(o,"mousemove",lc),Ji(o,"touchmove",lc),Ji(o,"mouseup",Ce._onDrop),Ji(o,"touchend",Ce._onDrop),Ji(o,"touchcancel",Ce._onDrop),Fp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ha.draggable=!0),Bl("delayStart",this,{evt:it}),Xe.delay&&(!Xe.delayOnTouchOnly||Ke)&&(!this.nativeDraggable||!(eh||kf))){if(bi.eventCanceled){this._onDrop();return}Ji(o,"mouseup",Ce._disableDelayedDrag),Ji(o,"touchend",Ce._disableDelayedDrag),Ji(o,"touchcancel",Ce._disableDelayedDrag),Ji(o,"mousemove",Ce._delayedDragTouchMoveHandler),Ji(o,"touchmove",Ce._delayedDragTouchMoveHandler),Xe.supportPointer&&Ji(o,"pointermove",Ce._delayedDragTouchMoveHandler),Ce._dragStartTimer=setTimeout(U,Xe.delay)}else U()}},_delayedDragTouchMoveHandler:function(it){var Ke=it.touches?it.touches[0]:it;Math.max(Math.abs(Ke.clientX-this._lastX),Math.abs(Ke.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ha&&Yv(Ha),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var it=this.el.ownerDocument;Wi(it,"mouseup",this._disableDelayedDrag),Wi(it,"touchend",this._disableDelayedDrag),Wi(it,"touchcancel",this._disableDelayedDrag),Wi(it,"mousemove",this._delayedDragTouchMoveHandler),Wi(it,"touchmove",this._delayedDragTouchMoveHandler),Wi(it,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(it,Ke){Ke=Ke||it.pointerType=="touch"&&it,!this.nativeDraggable||Ke?this.options.supportPointer?Ji(document,"pointermove",this._onTouchMove):Ke?Ji(document,"touchmove",this._onTouchMove):Ji(document,"mousemove",this._onTouchMove):(Ji(Ha,"dragend",this),Ji(Ko,"dragstart",this._onDragStart));try{document.selection?Qh(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(it,Ke){if(wc=!1,Ko&&Ha){Bl("dragStarted",this,{evt:Ke}),this.nativeDraggable&&Ji(document,"dragover",W0);var ut=this.options;!it&&Zo(Ha,ut.dragClass,!1),Zo(Ha,ut.ghostClass,!0),bi.active=this,it&&this._appendGhost(),El({sortable:this,name:"start",originalEvent:Ke})}else this._nulling()},_emulateDragOver:function(){if(zu){this._lastX=zu.clientX,this._lastY=zu.clientY,Qp();for(var it=document.elementFromPoint(zu.clientX,zu.clientY),Ke=it;it&&it.shadowRoot&&(it=it.shadowRoot.elementFromPoint(zu.clientX,zu.clientY),it!==Ke);)Ke=it;if(Ha.parentNode[fl]._isOutsideThisEl(it),Ke)do{if(Ke[fl]){var ut=void 0;if(ut=Ke[fl]._onDragOver({clientX:zu.clientX,clientY:zu.clientY,target:it,rootEl:Ke}),ut&&!this.options.dragoverBubble)break}it=Ke}while(Ke=Ke.parentNode);$p()}},_onTouchMove:function(it){if(sc){var Ke=this.options,ut=Ke.fallbackTolerance,Ce=Ke.fallbackOffset,qe=it.touches?it.touches[0]:it,Xe=Di&&ic(Di,!0),o=Di&&Xe&&Xe.a,U=Di&&Xe&&Xe.d,H=Jh&&cl&&Hp(cl),w=(qe.clientX-sc.clientX+Ce.x)/(o||1)+(H?H[0]-Hv[0]:0)/(o||1),f=(qe.clientY-sc.clientY+Ce.y)/(U||1)+(H?H[1]-Hv[1]:0)/(U||1);if(!bi.active&&!wc){if(ut&&Math.max(Math.abs(qe.clientX-this._lastX),Math.abs(qe.clientY-this._lastY))<ut)return;this._onDragStart(it,!0)}if(Di){Xe?(Xe.e+=w-(Bv||0),Xe.f+=f-(Uv||0)):Xe={a:1,b:0,c:0,d:1,e:w,f};var M="matrix(".concat(Xe.a,",").concat(Xe.b,",").concat(Xe.c,",").concat(Xe.d,",").concat(Xe.e,",").concat(Xe.f,")");ui(Di,"webkitTransform",M),ui(Di,"mozTransform",M),ui(Di,"msTransform",M),ui(Di,"transform",M),Bv=w,Uv=f,zu=qe}it.cancelable&&it.preventDefault()}},_appendGhost:function(){if(!Di){var it=this.options.fallbackOnBody?document.body:Ko,Ke=is(Ha,!0,Jh,!0,it),ut=this.options;if(Jh){for(cl=it;ui(cl,"position")==="static"&&ui(cl,"transform")==="none"&&cl!==document;)cl=cl.parentNode;cl!==document.body&&cl!==document.documentElement?(cl===document&&(cl=of()),Ke.top+=cl.scrollTop,Ke.left+=cl.scrollLeft):cl=of(),Hv=Hp(cl)}Di=Ha.cloneNode(!0),Zo(Di,ut.ghostClass,!1),Zo(Di,ut.fallbackClass,!0),Zo(Di,ut.dragClass,!0),ui(Di,"transition",""),ui(Di,"transform",""),ui(Di,"box-sizing","border-box"),ui(Di,"margin",0),ui(Di,"top",Ke.top),ui(Di,"left",Ke.left),ui(Di,"width",Ke.width),ui(Di,"height",Ke.height),ui(Di,"opacity","0.8"),ui(Di,"position",Jh?"absolute":"fixed"),ui(Di,"zIndex","100000"),ui(Di,"pointerEvents","none"),bi.ghost=Di,it.appendChild(Di),ui(Di,"transform-origin",Wp/parseInt(Di.style.width)*100+"% "+jp/parseInt(Di.style.height)*100+"%")}},_onDragStart:function(it,Ke){var ut=this,Ce=it.dataTransfer,qe=ut.options;if(Bl("dragStart",this,{evt:it}),bi.eventCanceled){this._onDrop();return}Bl("setupClone",this),bi.eventCanceled||(ss=zv(Ha),ss.draggable=!1,ss.style["will-change"]="",this._hideClone(),Zo(ss,this.options.chosenClass,!1),bi.clone=ss),ut.cloneId=Qh(function(){Bl("clone",ut),!bi.eventCanceled&&(ut.options.removeCloneOnHide||Ko.insertBefore(ss,Ha),ut._hideClone(),El({sortable:ut,name:"clone"}))}),!Ke&&Zo(Ha,qe.dragClass,!0),Ke?(Yh=!0,ut._loopId=setInterval(ut._emulateDragOver,50)):(Wi(document,"mouseup",ut._onDrop),Wi(document,"touchend",ut._onDrop),Wi(document,"touchcancel",ut._onDrop),Ce&&(Ce.effectAllowed="move",qe.setData&&qe.setData.call(ut,Ce,Ha)),Ji(document,"drop",ut),ui(Ha,"transform","translateZ(0)")),wc=!0,ut._dragStartId=Qh(ut._dragStarted.bind(ut,Ke,it)),Ji(document,"selectstart",ut),oh=!0,Rv&&ui(document.body,"user-select","none")},_onDragOver:function(it){var Ke=this.el,ut=it.target,Ce,qe,Xe,o=this.options,U=o.group,H=bi.active,w=Gh===U,f=o.sort,M=qs||H,T,e=this,a=!1;if(Vv)return;function n(b,v){Bl(b,e,Bf({evt:it,isOwner:w,axis:T?"vertical":"horizontal",revert:Xe,dragRect:Ce,targetRect:qe,canSort:f,fromSortable:M,target:ut,completed:t,onMove:function(C,S){return Gv(Ko,Ke,Ha,Ce,C,is(C),it,S)},changed:h},v))}function r(){n("dragOverAnimationCapture"),e.captureAnimationState(),e!==M&&M.captureAnimationState()}function t(b){return n("dragOverCompleted",{insertion:b}),b&&(w?H._hideClone():H._showClone(e),e!==M&&(Zo(Ha,qs?qs.options.ghostClass:H.options.ghostClass,!1),Zo(Ha,o.ghostClass,!0)),qs!==e&&e!==bi.active?qs=e:e===bi.active&&qs&&(qs=null),M===e&&(e._ignoreWhileAnimating=ut),e.animateAll(function(){n("dragOverAnimationComplete"),e._ignoreWhileAnimating=null}),e!==M&&(M.animateAll(),M._ignoreWhileAnimating=null)),(ut===Ha&&!Ha.animated||ut===Ke&&!ut.animated)&&(Tc=null),!o.dragoverBubble&&!it.rootEl&&ut!==document&&(Ha.parentNode[fl]._isOutsideThisEl(it.target),!b&&lc(it)),!o.dragoverBubble&&it.stopPropagation&&it.stopPropagation(),a=!0}function h(){ru=os(Ha),Vf=os(Ha,o.draggable),El({sortable:e,name:"change",toEl:Ke,newIndex:ru,newDraggableIndex:Vf,originalEvent:it})}if(it.preventDefault!==void 0&&it.cancelable&&it.preventDefault(),ut=Fu(ut,o.draggable,Ke,!0),n("dragOver"),bi.eventCanceled)return a;if(Ha.contains(it.target)||ut.animated&&ut.animatingX&&ut.animatingY||e._ignoreWhileAnimating===ut)return t(!1);if(Yh=!1,H&&!o.disabled&&(w?f||(Xe=!Ko.contains(Ha)):qs===this||(this.lastPutMode=Gh.checkPull(this,H,Ha,it))&&U.checkPut(this,H,Ha,it))){if(T=this._getDirection(it,ut)==="vertical",Ce=is(Ha),n("dragOverValid"),bi.eventCanceled)return a;if(Xe)return bs=Ko,r(),this._hideClone(),n("revert"),bi.eventCanceled||(oc?Ko.insertBefore(Ha,oc):Ko.appendChild(Ha)),t(!0);var i=Iv(Ke,o.draggable);if(!i||Z0(it,T,this)&&!i.animated){if(i===Ha)return t(!1);if(i&&Ke===it.target&&(ut=i),ut&&(qe=is(ut)),Gv(Ko,Ke,Ha,Ce,ut,qe,it,!!ut)!==!1)return r(),Ke.appendChild(Ha),bs=Ke,h(),t(!0)}else if(ut.parentNode===Ke){qe=is(ut);var s=0,y,d=Ha.parentNode!==Ke,p=!G0(Ha.animated&&Ha.toRect||Ce,ut.animated&&ut.toRect||qe,T),c=T?"top":"left",m=Up(ut,"top","top")||Up(Ha,"top","top"),l=m?m.scrollTop:void 0;Tc!==ut&&(y=qe[c],lh=!1,jh=!p&&o.invertSwap||d),s=K0(it,ut,qe,T,p?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,jh,Tc===ut);var x;if(s!==0){var u=os(Ha);do u-=s,x=bs.children[u];while(x&&(ui(x,"display")==="none"||x===Di))}if(s===0||x===ut)return t(!1);Tc=ut,sh=s;var A=ut.nextElementSibling,_=!1;_=s===1;var g=Gv(Ko,Ke,Ha,Ce,ut,qe,it,_);if(g!==!1)return(g===1||g===-1)&&(_=g===1),Vv=!0,setTimeout(X0,30),r(),_&&!A?Ke.appendChild(Ha):ut.parentNode.insertBefore(Ha,_?A:ut),m&&Gp(m,0,l-m.scrollTop),bs=Ha.parentNode,y!==void 0&&!jh&&(Xh=Math.abs(y-is(ut)[c])),h(),t(!0)}if(Ke.contains(Ha))return t(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Wi(document,"mousemove",this._onTouchMove),Wi(document,"touchmove",this._onTouchMove),Wi(document,"pointermove",this._onTouchMove),Wi(document,"dragover",lc),Wi(document,"mousemove",lc),Wi(document,"touchmove",lc)},_offUpEvents:function(){var it=this.el.ownerDocument;Wi(it,"mouseup",this._onDrop),Wi(it,"touchend",this._onDrop),Wi(it,"pointerup",this._onDrop),Wi(it,"touchcancel",this._onDrop),Wi(document,"selectstart",this)},_onDrop:function(it){var Ke=this.el,ut=this.options;if(ru=os(Ha),Vf=os(Ha,ut.draggable),Bl("drop",this,{evt:it}),bs=Ha&&Ha.parentNode,ru=os(Ha),Vf=os(Ha,ut.draggable),bi.eventCanceled){this._nulling();return}wc=!1,jh=!1,lh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Wv(this.cloneId),Wv(this._dragStartId),this.nativeDraggable&&(Wi(document,"drop",this),Wi(Ke,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rv&&ui(document.body,"user-select",""),ui(Ha,"transform",""),it&&(oh&&(it.cancelable&&it.preventDefault(),!ut.dropBubble&&it.stopPropagation()),Di&&Di.parentNode&&Di.parentNode.removeChild(Di),(Ko===bs||qs&&qs.lastPutMode!=="clone")&&ss&&ss.parentNode&&ss.parentNode.removeChild(ss),Ha&&(this.nativeDraggable&&Wi(Ha,"dragend",this),Yv(Ha),Ha.style["will-change"]="",oh&&!wc&&Zo(Ha,qs?qs.options.ghostClass:this.options.ghostClass,!1),Zo(Ha,this.options.chosenClass,!1),El({sortable:this,name:"unchoose",toEl:bs,newIndex:null,newDraggableIndex:null,originalEvent:it}),Ko!==bs?(ru>=0&&(El({rootEl:bs,name:"add",toEl:bs,fromEl:Ko,originalEvent:it}),El({sortable:this,name:"remove",toEl:bs,originalEvent:it}),El({rootEl:bs,name:"sort",toEl:bs,fromEl:Ko,originalEvent:it}),El({sortable:this,name:"sort",toEl:bs,originalEvent:it})),qs&&qs.save()):ru!==_c&&ru>=0&&(El({sortable:this,name:"update",toEl:bs,originalEvent:it}),El({sortable:this,name:"sort",toEl:bs,originalEvent:it})),bi.active&&((ru==null||ru===-1)&&(ru=_c,Vf=ih),El({sortable:this,name:"end",toEl:bs,originalEvent:it}),this.save()))),this._nulling()},_nulling:function(){Bl("nulling",this),Ko=Ha=bs=Di=oc=ss=Vh=Hf=sc=zu=oh=ru=Vf=_c=ih=Tc=sh=qs=Gh=bi.dragged=bi.ghost=bi.clone=bi.active=null,Zh.forEach(function(it){it.checked=!0}),Zh.length=Bv=Uv=0},handleEvent:function(it){switch(it.type){case"drop":case"dragend":this._onDrop(it);break;case"dragenter":case"dragover":Ha&&(this._onDragOver(it),j0(it));break;case"selectstart":it.preventDefault();break}},toArray:function(){for(var it=[],Ke,ut=this.el.children,Ce=0,qe=ut.length,Xe=this.options;Ce<qe;Ce++)Ke=ut[Ce],Fu(Ke,Xe.draggable,this.el,!1)&&it.push(Ke.getAttribute(Xe.dataIdAttr)||Q0(Ke));return it},sort:function(it){var Ke={},ut=this.el;this.toArray().forEach(function(Ce,qe){var Xe=ut.children[qe];Fu(Xe,this.options.draggable,ut,!1)&&(Ke[Ce]=Xe)},this),it.forEach(function(Ce){Ke[Ce]&&(ut.removeChild(Ke[Ce]),ut.appendChild(Ke[Ce]))})},save:function(){var it=this.options.store;it&&it.set&&it.set(this)},closest:function(it,Ke){return Fu(it,Ke||this.options.draggable,this.el,!1)},option:function(it,Ke){var ut=this.options;if(Ke===void 0)return ut[it];var Ce=nh.modifyOption(this,it,Ke);typeof Ce<"u"?ut[it]=Ce:ut[it]=Ke,it==="group"&&Jp(ut)},destroy:function(){Bl("destroy",this);var it=this.el;it[fl]=null,Wi(it,"mousedown",this._onTapStart),Wi(it,"touchstart",this._onTapStart),Wi(it,"pointerdown",this._onTapStart),this.nativeDraggable&&(Wi(it,"dragover",this),Wi(it,"dragenter",this)),Array.prototype.forEach.call(it.querySelectorAll("[draggable]"),function(Ke){Ke.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Wh.splice(Wh.indexOf(this.el),1),this.el=it=null},_hideClone:function(){if(!Hf){if(Bl("hideClone",this),bi.eventCanceled)return;ui(ss,"display","none"),this.options.removeCloneOnHide&&ss.parentNode&&ss.parentNode.removeChild(ss),Hf=!0}},_showClone:function(it){if(it.lastPutMode!=="clone"){this._hideClone();return}if(Hf){if(Bl("showClone",this),bi.eventCanceled)return;Ko.contains(Ha)&&!this.options.group.revertClone?Ko.insertBefore(ss,Ha):oc?Ko.insertBefore(ss,oc):Ko.appendChild(ss),this.options.group.revertClone&&this.animate(Ha,ss),ui(ss,"display",""),Hf=!1}}};function j0(it){it.dataTransfer&&(it.dataTransfer.dropEffect="move"),it.cancelable&&it.preventDefault()}function Gv(it,Ke,ut,Ce,qe,Xe,o,U){var H,w=it[fl],f=w.options.onMove,M;return window.CustomEvent&&!kf&&!eh?H=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(H=document.createEvent("Event"),H.initEvent("move",!0,!0)),H.to=Ke,H.from=it,H.dragged=ut,H.draggedRect=Ce,H.related=qe||Ke,H.relatedRect=Xe||is(Ke),H.willInsertAfter=U,H.originalEvent=o,it.dispatchEvent(H),f&&(M=f.call(w,H,o)),M}function Yv(it){it.draggable=!1}function X0(){Vv=!1}function Z0(it,Ke,ut){var Ce=is(Iv(ut.el,ut.options.draggable)),qe=10;return Ke?it.clientX>Ce.right+qe||it.clientX<=Ce.right&&it.clientY>Ce.bottom&&it.clientX>=Ce.left:it.clientX>Ce.right&&it.clientY>Ce.top||it.clientX<=Ce.right&&it.clientY>Ce.bottom+qe}function K0(it,Ke,ut,Ce,qe,Xe,o,U){var H=Ce?it.clientY:it.clientX,w=Ce?ut.height:ut.width,f=Ce?ut.top:ut.left,M=Ce?ut.bottom:ut.right,T=!1;if(!o){if(U&&Xh<w*qe){if(!lh&&(sh===1?H>f+w*Xe/2:H<M-w*Xe/2)&&(lh=!0),lh)T=!0;else if(sh===1?H<f+Xh:H>M-Xh)return-sh}else if(H>f+w*(1-qe)/2&&H<M-w*(1-qe)/2)return J0(Ke)}return T=T||o,T&&(H<f+w*Xe/2||H>M-w*Xe/2)?H>f+w/2?1:-1:0}function J0(it){return os(Ha)<os(it)?1:-1}function Q0(it){for(var Ke=it.tagName+it.className+it.src+it.href+it.textContent,ut=Ke.length,Ce=0;ut--;)Ce+=Ke.charCodeAt(ut);return Ce.toString(36)}function $0(it){Zh.length=0;for(var Ke=it.getElementsByTagName("input"),ut=Ke.length;ut--;){var Ce=Ke[ut];Ce.checked&&Zh.push(Ce)}}function Qh(it){return setTimeout(it,0)}function Wv(it){return clearTimeout(it)}Kh&&Ji(document,"touchmove",function(it){(bi.active||wc)&&it.cancelable&&it.preventDefault()}),bi.utils={on:Ji,off:Wi,css:ui,find:Bp,is:function(it,Ke){return!!Fu(it,Ke,it,!1)},extend:O0,throttle:Vp,closest:Fu,toggleClass:Zo,clone:zv,index:os,nextTick:Qh,cancelNextTick:Wv,detectDirection:Kp,getChild:Hh},bi.get=function(it){return it[fl]},bi.mount=function(){for(var it=arguments.length,Ke=new Array(it),ut=0;ut<it;ut++)Ke[ut]=arguments[ut];Ke[0].constructor===Array&&(Ke=Ke[0]),Ke.forEach(function(Ce){if(!Ce.prototype||!Ce.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Ce));Ce.utils&&(bi.utils=Bf({},bi.utils,Ce.utils)),nh.mount(Ce)})},bi.create=function(it,Ke){return new bi(it,Ke)},bi.version=R0;var _s=[],uh,jv,Xv=!1,Zv,Kv,$h,fh;function q0(){function it(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var Ke in this)Ke.charAt(0)==="_"&&typeof this[Ke]=="function"&&(this[Ke]=this[Ke].bind(this))}return it.prototype={dragStarted:function(Ke){var ut=Ke.originalEvent;this.sortable.nativeDraggable?Ji(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ji(document,"pointermove",this._handleFallbackAutoScroll):ut.touches?Ji(document,"touchmove",this._handleFallbackAutoScroll):Ji(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(Ke){var ut=Ke.originalEvent;!this.options.dragOverBubble&&!ut.rootEl&&this._handleAutoScroll(ut)},drop:function(){this.sortable.nativeDraggable?Wi(document,"dragover",this._handleAutoScroll):(Wi(document,"pointermove",this._handleFallbackAutoScroll),Wi(document,"touchmove",this._handleFallbackAutoScroll),Wi(document,"mousemove",this._handleFallbackAutoScroll)),qp(),qh(),N0()},nulling:function(){$h=jv=uh=Xv=fh=Zv=Kv=null,_s.length=0},_handleFallbackAutoScroll:function(Ke){this._handleAutoScroll(Ke,!0)},_handleAutoScroll:function(Ke,ut){var Ce=this,qe=(Ke.touches?Ke.touches[0]:Ke).clientX,Xe=(Ke.touches?Ke.touches[0]:Ke).clientY,o=document.elementFromPoint(qe,Xe);if($h=Ke,ut||eh||kf||Rv){Jv(Ke,this.options,o,ut);var U=Uf(o,!0);Xv&&(!fh||qe!==Zv||Xe!==Kv)&&(fh&&qp(),fh=setInterval(function(){var H=Uf(document.elementFromPoint(qe,Xe),!0);H!==U&&(U=H,qh()),Jv(Ke,Ce.options,H,ut)},10),Zv=qe,Kv=Xe)}else{if(!this.options.bubbleScroll||Uf(o,!0)===of()){qh();return}Jv(Ke,this.options,Uf(o,!1),!1)}}},xu(it,{pluginName:"scroll",initializeByDefault:!0})}function qh(){_s.forEach(function(it){clearInterval(it.pid)}),_s=[]}function qp(){clearInterval(fh)}var Jv=Vp(function(it,Ke,ut,Ce){if(Ke.scroll){var qe=(it.touches?it.touches[0]:it).clientX,Xe=(it.touches?it.touches[0]:it).clientY,o=Ke.scrollSensitivity,U=Ke.scrollSpeed,H=of(),w=!1,f;jv!==ut&&(jv=ut,qh(),uh=Ke.scroll,f=Ke.scrollFn,uh===!0&&(uh=Uf(ut,!0)));var M=0,T=uh;do{var e=T,a=is(e),n=a.top,r=a.bottom,t=a.left,h=a.right,i=a.width,s=a.height,y=void 0,d=void 0,p=e.scrollWidth,c=e.scrollHeight,m=ui(e),l=e.scrollLeft,x=e.scrollTop;e===H?(y=i<p&&(m.overflowX==="auto"||m.overflowX==="scroll"||m.overflowX==="visible"),d=s<c&&(m.overflowY==="auto"||m.overflowY==="scroll"||m.overflowY==="visible")):(y=i<p&&(m.overflowX==="auto"||m.overflowX==="scroll"),d=s<c&&(m.overflowY==="auto"||m.overflowY==="scroll"));var u=y&&(Math.abs(h-qe)<=o&&l+i<p)-(Math.abs(t-qe)<=o&&!!l),A=d&&(Math.abs(r-Xe)<=o&&x+s<c)-(Math.abs(n-Xe)<=o&&!!x);if(!_s[M])for(var _=0;_<=M;_++)_s[_]||(_s[_]={});(_s[M].vx!=u||_s[M].vy!=A||_s[M].el!==e)&&(_s[M].el=e,_s[M].vx=u,_s[M].vy=A,clearInterval(_s[M].pid),(u!=0||A!=0)&&(w=!0,_s[M].pid=setInterval(function(){Ce&&this.layer===0&&bi.active._onTouchMove($h);var g=_s[this.layer].vy?_s[this.layer].vy*U:0,b=_s[this.layer].vx?_s[this.layer].vx*U:0;typeof f=="function"&&f.call(bi.dragged.parentNode[fl],b,g,it,$h,_s[this.layer].el)!=="continue"||Gp(_s[this.layer].el,b,g)}.bind({layer:M}),24))),M++}while(Ke.bubbleScroll&&T!==H&&(T=Uf(T,!1)));Xv=w}},30),ed=function(it){var Ke=it.originalEvent,ut=it.putSortable,Ce=it.dragEl,qe=it.activeSortable,Xe=it.dispatchSortableEvent,o=it.hideGhostForTarget,U=it.unhideGhostForTarget;if(Ke){var H=ut||qe;o();var w=Ke.changedTouches&&Ke.changedTouches.length?Ke.changedTouches[0]:Ke,f=document.elementFromPoint(w.clientX,w.clientY);U(),H&&!H.el.contains(f)&&(Xe("spill"),this.onSpill({dragEl:Ce,putSortable:ut}))}};function Qv(){}Qv.prototype={startIndex:null,dragStart:function(it){var Ke=it.oldDraggableIndex;this.startIndex=Ke},onSpill:function(it){var Ke=it.dragEl,ut=it.putSortable;this.sortable.captureAnimationState(),ut&&ut.captureAnimationState();var Ce=Hh(this.sortable.el,this.startIndex,this.options);Ce?this.sortable.el.insertBefore(Ke,Ce):this.sortable.el.appendChild(Ke),this.sortable.animateAll(),ut&&ut.animateAll()},drop:ed},xu(Qv,{pluginName:"revertOnSpill"});function $v(){}$v.prototype={onSpill:function(it){var Ke=it.dragEl,ut=it.putSortable,Ce=ut||this.sortable;Ce.captureAnimationState(),Ke.parentNode&&Ke.parentNode.removeChild(Ke),Ce.animateAll()},drop:ed},xu($v,{pluginName:"removeOnSpill"});var bu;function eg(){function it(){this.defaults={swapClass:"sortable-swap-highlight"}}return it.prototype={dragStart:function(Ke){var ut=Ke.dragEl;bu=ut},dragOverValid:function(Ke){var ut=Ke.completed,Ce=Ke.target,qe=Ke.onMove,Xe=Ke.activeSortable,o=Ke.changed,U=Ke.cancel;if(Xe.options.swap){var H=this.sortable.el,w=this.options;if(Ce&&Ce!==H){var f=bu;qe(Ce)!==!1?(Zo(Ce,w.swapClass,!0),bu=Ce):bu=null,f&&f!==bu&&Zo(f,w.swapClass,!1)}o(),ut(!0),U()}},drop:function(Ke){var ut=Ke.activeSortable,Ce=Ke.putSortable,qe=Ke.dragEl,Xe=Ce||this.sortable,o=this.options;bu&&Zo(bu,o.swapClass,!1),bu&&(o.swap||Ce&&Ce.options.swap)&&qe!==bu&&(Xe.captureAnimationState(),Xe!==ut&&ut.captureAnimationState(),tg(qe,bu),Xe.animateAll(),Xe!==ut&&ut.animateAll())},nulling:function(){bu=null}},xu(it,{pluginName:"swap",eventProperties:function(){return{swapItem:bu}}})}function tg(it,Ke){var ut=it.parentNode,Ce=Ke.parentNode,qe,Xe;!ut||!Ce||ut.isEqualNode(Ke)||Ce.isEqualNode(it)||(qe=os(it),Xe=os(Ke),ut.isEqualNode(Ce)&&qe<Xe&&Xe++,ut.insertBefore(Ke,ut.children[qe]),Ce.insertBefore(it,Ce.children[Xe]))}var Ai=[],nu=[],ch,Ou,hh=!1,au=!1,Ac=!1,Ro,vh,ev;function rg(){function it(Ke){for(var ut in this)ut.charAt(0)==="_"&&typeof this[ut]=="function"&&(this[ut]=this[ut].bind(this));Ke.options.supportPointer?Ji(document,"pointerup",this._deselectMultiDrag):(Ji(document,"mouseup",this._deselectMultiDrag),Ji(document,"touchend",this._deselectMultiDrag)),Ji(document,"keydown",this._checkKeyDown),Ji(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(Ce,qe){var Xe="";Ai.length&&Ou===Ke?Ai.forEach(function(o,U){Xe+=(U?", ":"")+o.textContent}):Xe=qe.textContent,Ce.setData("Text",Xe)}}}return it.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(Ke){var ut=Ke.dragEl;Ro=ut},delayEnded:function(){this.isMultiDrag=~Ai.indexOf(Ro)},setupClone:function(Ke){var ut=Ke.sortable,Ce=Ke.cancel;if(this.isMultiDrag){for(var qe=0;qe<Ai.length;qe++)nu.push(zv(Ai[qe])),nu[qe].sortableIndex=Ai[qe].sortableIndex,nu[qe].draggable=!1,nu[qe].style["will-change"]="",Zo(nu[qe],this.options.selectedClass,!1),Ai[qe]===Ro&&Zo(nu[qe],this.options.chosenClass,!1);ut._hideClone(),Ce()}},clone:function(Ke){var ut=Ke.sortable,Ce=Ke.rootEl,qe=Ke.dispatchSortableEvent,Xe=Ke.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||Ai.length&&Ou===ut&&(td(!0,Ce),qe("clone"),Xe())},showClone:function(Ke){var ut=Ke.cloneNowShown,Ce=Ke.rootEl,qe=Ke.cancel;!this.isMultiDrag||(td(!1,Ce),nu.forEach(function(Xe){ui(Xe,"display","")}),ut(),ev=!1,qe())},hideClone:function(Ke){var ut=this;Ke.sortable;var Ce=Ke.cloneNowHidden,qe=Ke.cancel;!this.isMultiDrag||(nu.forEach(function(Xe){ui(Xe,"display","none"),ut.options.removeCloneOnHide&&Xe.parentNode&&Xe.parentNode.removeChild(Xe)}),Ce(),ev=!0,qe())},dragStartGlobal:function(Ke){Ke.sortable,!this.isMultiDrag&&Ou&&Ou.multiDrag._deselectMultiDrag(),Ai.forEach(function(ut){ut.sortableIndex=os(ut)}),Ai=Ai.sort(function(ut,Ce){return ut.sortableIndex-Ce.sortableIndex}),Ac=!0},dragStarted:function(Ke){var ut=this,Ce=Ke.sortable;if(this.isMultiDrag){if(this.options.sort&&(Ce.captureAnimationState(),this.options.animation)){Ai.forEach(function(Xe){Xe!==Ro&&ui(Xe,"position","absolute")});var qe=is(Ro,!1,!0,!0);Ai.forEach(function(Xe){Xe!==Ro&&Yp(Xe,qe)}),au=!0,hh=!0}Ce.animateAll(function(){au=!1,hh=!1,ut.options.animation&&Ai.forEach(function(Xe){Ov(Xe)}),ut.options.sort&&tv()})}},dragOver:function(Ke){var ut=Ke.target,Ce=Ke.completed,qe=Ke.cancel;au&&~Ai.indexOf(ut)&&(Ce(!1),qe())},revert:function(Ke){var ut=Ke.fromSortable,Ce=Ke.rootEl,qe=Ke.sortable,Xe=Ke.dragRect;Ai.length>1&&(Ai.forEach(function(o){qe.addAnimationState({target:o,rect:au?is(o):Xe}),Ov(o),o.fromRect=Xe,ut.removeAnimationState(o)}),au=!1,ng(!this.options.removeCloneOnHide,Ce))},dragOverCompleted:function(Ke){var ut=Ke.sortable,Ce=Ke.isOwner,qe=Ke.insertion,Xe=Ke.activeSortable,o=Ke.parentEl,U=Ke.putSortable,H=this.options;if(qe){if(Ce&&Xe._hideClone(),hh=!1,H.animation&&Ai.length>1&&(au||!Ce&&!Xe.options.sort&&!U)){var w=is(Ro,!1,!0,!0);Ai.forEach(function(M){M!==Ro&&(Yp(M,w),o.appendChild(M))}),au=!0}if(!Ce)if(au||tv(),Ai.length>1){var f=ev;Xe._showClone(ut),Xe.options.animation&&!ev&&f&&nu.forEach(function(M){Xe.addAnimationState({target:M,rect:vh}),M.fromRect=vh,M.thisAnimationDuration=null})}else Xe._showClone(ut)}},dragOverAnimationCapture:function(Ke){var ut=Ke.dragRect,Ce=Ke.isOwner,qe=Ke.activeSortable;if(Ai.forEach(function(o){o.thisAnimationDuration=null}),qe.options.animation&&!Ce&&qe.multiDrag.isMultiDrag){vh=xu({},ut);var Xe=ic(Ro,!0);vh.top-=Xe.f,vh.left-=Xe.e}},dragOverAnimationComplete:function(){au&&(au=!1,tv())},drop:function(Ke){var ut=Ke.originalEvent,Ce=Ke.rootEl,qe=Ke.parentEl,Xe=Ke.sortable,o=Ke.dispatchSortableEvent,U=Ke.oldIndex,H=Ke.putSortable,w=H||this.sortable;if(ut){var f=this.options,M=qe.children;if(!Ac)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Zo(Ro,f.selectedClass,!~Ai.indexOf(Ro)),~Ai.indexOf(Ro))Ai.splice(Ai.indexOf(Ro),1),ch=null,ah({sortable:Xe,rootEl:Ce,name:"deselect",targetEl:Ro,originalEvt:ut});else{if(Ai.push(Ro),ah({sortable:Xe,rootEl:Ce,name:"select",targetEl:Ro,originalEvt:ut}),ut.shiftKey&&ch&&Xe.el.contains(ch)){var T=os(ch),e=os(Ro);if(~T&&~e&&T!==e){var a,n;for(e>T?(n=T,a=e):(n=e,a=T+1);n<a;n++)~Ai.indexOf(M[n])||(Zo(M[n],f.selectedClass,!0),Ai.push(M[n]),ah({sortable:Xe,rootEl:Ce,name:"select",targetEl:M[n],originalEvt:ut}))}}else ch=Ro;Ou=w}if(Ac&&this.isMultiDrag){if((qe[fl].options.sort||qe!==Ce)&&Ai.length>1){var r=is(Ro),t=os(Ro,":not(."+this.options.selectedClass+")");if(!hh&&f.animation&&(Ro.thisAnimationDuration=null),w.captureAnimationState(),!hh&&(f.animation&&(Ro.fromRect=r,Ai.forEach(function(i){if(i.thisAnimationDuration=null,i!==Ro){var s=au?is(i):r;i.fromRect=s,w.addAnimationState({target:i,rect:s})}})),tv(),Ai.forEach(function(i){M[t]?qe.insertBefore(i,M[t]):qe.appendChild(i),t++}),U===os(Ro))){var h=!1;Ai.forEach(function(i){if(i.sortableIndex!==os(i)){h=!0;return}}),h&&o("update")}Ai.forEach(function(i){Ov(i)}),w.animateAll()}Ou=w}(Ce===qe||H&&H.lastPutMode!=="clone")&&nu.forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})}},nullingGlobal:function(){this.isMultiDrag=Ac=!1,nu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Wi(document,"pointerup",this._deselectMultiDrag),Wi(document,"mouseup",this._deselectMultiDrag),Wi(document,"touchend",this._deselectMultiDrag),Wi(document,"keydown",this._checkKeyDown),Wi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(Ke){if(!(typeof Ac<"u"&&Ac)&&Ou===this.sortable&&!(Ke&&Fu(Ke.target,this.options.draggable,this.sortable.el,!1))&&!(Ke&&Ke.button!==0))for(;Ai.length;){var ut=Ai[0];Zo(ut,this.options.selectedClass,!1),Ai.shift(),ah({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:ut,originalEvt:Ke})}},_checkKeyDown:function(Ke){Ke.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(Ke){Ke.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},xu(it,{pluginName:"multiDrag",utils:{select:function(Ke){var ut=Ke.parentNode[fl];!ut||!ut.options.multiDrag||~Ai.indexOf(Ke)||(Ou&&Ou!==ut&&(Ou.multiDrag._deselectMultiDrag(),Ou=ut),Zo(Ke,ut.options.selectedClass,!0),Ai.push(Ke))},deselect:function(Ke){var ut=Ke.parentNode[fl],Ce=Ai.indexOf(Ke);!ut||!ut.options.multiDrag||!~Ce||(Zo(Ke,ut.options.selectedClass,!1),Ai.splice(Ce,1))}},eventProperties:function(){var Ke=this,ut=[],Ce=[];return Ai.forEach(function(qe){ut.push({multiDragElement:qe,index:qe.sortableIndex});var Xe;au&&qe!==Ro?Xe=-1:au?Xe=os(qe,":not(."+Ke.options.selectedClass+")"):Xe=os(qe),Ce.push({multiDragElement:qe,index:Xe})}),{items:C0(Ai),clones:[].concat(nu),oldIndicies:ut,newIndicies:Ce}},optionListeners:{multiDragKey:function(Ke){return Ke=Ke.toLowerCase(),Ke==="ctrl"?Ke="Control":Ke.length>1&&(Ke=Ke.charAt(0).toUpperCase()+Ke.substr(1)),Ke}}})}function ng(it,Ke){Ai.forEach(function(ut,Ce){var qe=Ke.children[ut.sortableIndex+(it?Number(Ce):0)];qe?Ke.insertBefore(ut,qe):Ke.appendChild(ut)})}function td(it,Ke){nu.forEach(function(ut,Ce){var qe=Ke.children[ut.sortableIndex+(it?Number(Ce):0)];qe?Ke.insertBefore(ut,qe):Ke.appendChild(ut)})}function tv(){Ai.forEach(function(it){it!==Ro&&it.parentNode&&it.parentNode.removeChild(it)})}bi.mount(new q0),bi.mount($v,Qv);const ag=Object.freeze(Object.defineProperty({__proto__:null,default:bi,MultiDrag:rg,Sortable:bi,Swap:eg},Symbol.toStringTag,{value:"Module"})),ig=M0(ag);(function(it,Ke){(function(ut,Ce){it.exports=Ce(ig)})(typeof self<"u"?self:T0,function(ut){return function(Ce){var qe={};function Xe(o){if(qe[o])return qe[o].exports;var U=qe[o]={i:o,l:!1,exports:{}};return Ce[o].call(U.exports,U,U.exports,Xe),U.l=!0,U.exports}return Xe.m=Ce,Xe.c=qe,Xe.d=function(o,U,H){Xe.o(o,U)||Object.defineProperty(o,U,{enumerable:!0,get:H})},Xe.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},Xe.t=function(o,U){if(U&1&&(o=Xe(o)),U&8||U&4&&typeof o=="object"&&o&&o.__esModule)return o;var H=Object.create(null);if(Xe.r(H),Object.defineProperty(H,"default",{enumerable:!0,value:o}),U&2&&typeof o!="string")for(var w in o)Xe.d(H,w,function(f){return o[f]}.bind(null,w));return H},Xe.n=function(o){var U=o&&o.__esModule?function(){return o.default}:function(){return o};return Xe.d(U,"a",U),U},Xe.o=function(o,U){return Object.prototype.hasOwnProperty.call(o,U)},Xe.p="",Xe(Xe.s="fb15")}({"01f9":function(Ce,qe,Xe){var o=Xe("2d00"),U=Xe("5ca1"),H=Xe("2aba"),w=Xe("32e9"),f=Xe("84f2"),M=Xe("41a0"),T=Xe("7f20"),e=Xe("38fd"),a=Xe("2b4c")("iterator"),n=!([].keys&&"next"in[].keys()),r="@@iterator",t="keys",h="values",i=function(){return this};Ce.exports=function(s,y,d,p,c,m,l){M(d,y,p);var x=function(I){if(!n&&I in g)return g[I];switch(I){case t:return function(){return new d(this,I)};case h:return function(){return new d(this,I)}}return function(){return new d(this,I)}},u=y+" Iterator",A=c==h,_=!1,g=s.prototype,b=g[a]||g[r]||c&&g[c],v=b||x(c),C=c?A?x("entries"):v:void 0,S=y=="Array"&&g.entries||b,k,E,F;if(S&&(F=e(S.call(new s)),F!==Object.prototype&&F.next&&(T(F,u,!0),!o&&typeof F[a]!="function"&&w(F,a,i))),A&&b&&b.name!==h&&(_=!0,v=function(){return b.call(this)}),(!o||l)&&(n||_||!g[a])&&w(g,a,v),f[y]=v,f[u]=i,c)if(k={values:A?v:x(h),keys:m?v:x(t),entries:C},l)for(E in k)E in g||H(g,E,k[E]);else U(U.P+U.F*(n||_),y,k);return k}},"02f4":function(Ce,qe,Xe){var o=Xe("4588"),U=Xe("be13");Ce.exports=function(H){return function(w,f){var M=String(U(w)),T=o(f),e=M.length,a,n;return T<0||T>=e?H?"":void 0:(a=M.charCodeAt(T),a<55296||a>56319||T+1===e||(n=M.charCodeAt(T+1))<56320||n>57343?H?M.charAt(T):a:H?M.slice(T,T+2):(a-55296<<10)+(n-56320)+65536)}}},"0390":function(Ce,qe,Xe){var o=Xe("02f4")(!0);Ce.exports=function(U,H,w){return H+(w?o(U,H).length:1)}},"0bfb":function(Ce,qe,Xe){var o=Xe("cb7c");Ce.exports=function(){var U=o(this),H="";return U.global&&(H+="g"),U.ignoreCase&&(H+="i"),U.multiline&&(H+="m"),U.unicode&&(H+="u"),U.sticky&&(H+="y"),H}},"0d58":function(Ce,qe,Xe){var o=Xe("ce10"),U=Xe("e11e");Ce.exports=Object.keys||function(H){return o(H,U)}},1495:function(Ce,qe,Xe){var o=Xe("86cc"),U=Xe("cb7c"),H=Xe("0d58");Ce.exports=Xe("9e1e")?Object.defineProperties:function(w,f){U(w);for(var M=H(f),T=M.length,e=0,a;T>e;)o.f(w,a=M[e++],f[a]);return w}},"214f":function(Ce,qe,Xe){Xe("b0c5");var o=Xe("2aba"),U=Xe("32e9"),H=Xe("79e5"),w=Xe("be13"),f=Xe("2b4c"),M=Xe("520a"),T=f("species"),e=!H(function(){var n=/./;return n.exec=function(){var r=[];return r.groups={a:"7"},r},"".replace(n,"$<a>")!=="7"}),a=function(){var n=/(?:)/,r=n.exec;n.exec=function(){return r.apply(this,arguments)};var t="ab".split(n);return t.length===2&&t[0]==="a"&&t[1]==="b"}();Ce.exports=function(n,r,t){var h=f(n),i=!H(function(){var m={};return m[h]=function(){return 7},""[n](m)!=7}),s=i?!H(function(){var m=!1,l=/a/;return l.exec=function(){return m=!0,null},n==="split"&&(l.constructor={},l.constructor[T]=function(){return l}),l[h](""),!m}):void 0;if(!i||!s||n==="replace"&&!e||n==="split"&&!a){var y=/./[h],d=t(w,h,""[n],function(m,l,x,u,A){return l.exec===M?i&&!A?{done:!0,value:y.call(l,x,u)}:{done:!0,value:m.call(x,l,u)}:{done:!1}}),p=d[0],c=d[1];o(String.prototype,n,p),U(RegExp.prototype,h,r==2?function(m,l){return c.call(m,this,l)}:function(m){return c.call(m,this)})}}},"230e":function(Ce,qe,Xe){var o=Xe("d3f4"),U=Xe("7726").document,H=o(U)&&o(U.createElement);Ce.exports=function(w){return H?U.createElement(w):{}}},"23c6":function(Ce,qe,Xe){var o=Xe("2d95"),U=Xe("2b4c")("toStringTag"),H=o(function(){return arguments}())=="Arguments",w=function(f,M){try{return f[M]}catch{}};Ce.exports=function(f){var M,T,e;return f===void 0?"Undefined":f===null?"Null":typeof(T=w(M=Object(f),U))=="string"?T:H?o(M):(e=o(M))=="Object"&&typeof M.callee=="function"?"Arguments":e}},2621:function(Ce,qe){qe.f=Object.getOwnPropertySymbols},"2aba":function(Ce,qe,Xe){var o=Xe("7726"),U=Xe("32e9"),H=Xe("69a8"),w=Xe("ca5a")("src"),f=Xe("fa5b"),M="toString",T=(""+f).split(M);Xe("8378").inspectSource=function(e){return f.call(e)},(Ce.exports=function(e,a,n,r){var t=typeof n=="function";t&&(H(n,"name")||U(n,"name",a)),e[a]!==n&&(t&&(H(n,w)||U(n,w,e[a]?""+e[a]:T.join(String(a)))),e===o?e[a]=n:r?e[a]?e[a]=n:U(e,a,n):(delete e[a],U(e,a,n)))})(Function.prototype,M,function(){return typeof this=="function"&&this[w]||f.call(this)})},"2aeb":function(Ce,qe,Xe){var o=Xe("cb7c"),U=Xe("1495"),H=Xe("e11e"),w=Xe("613b")("IE_PROTO"),f=function(){},M="prototype",T=function(){var e=Xe("230e")("iframe"),a=H.length,n="<",r=">",t;for(e.style.display="none",Xe("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+r+"document.F=Object"+n+"/script"+r),t.close(),T=t.F;a--;)delete T[M][H[a]];return T()};Ce.exports=Object.create||function(e,a){var n;return e!==null?(f[M]=o(e),n=new f,f[M]=null,n[w]=e):n=T(),a===void 0?n:U(n,a)}},"2b4c":function(Ce,qe,Xe){var o=Xe("5537")("wks"),U=Xe("ca5a"),H=Xe("7726").Symbol,w=typeof H=="function",f=Ce.exports=function(M){return o[M]||(o[M]=w&&H[M]||(w?H:U)("Symbol."+M))};f.store=o},"2d00":function(Ce,qe){Ce.exports=!1},"2d95":function(Ce,qe){var Xe={}.toString;Ce.exports=function(o){return Xe.call(o).slice(8,-1)}},"2fdb":function(Ce,qe,Xe){var o=Xe("5ca1"),U=Xe("d2c8"),H="includes";o(o.P+o.F*Xe("5147")(H),"String",{includes:function(w){return!!~U(this,w,H).indexOf(w,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(Ce,qe,Xe){var o=Xe("86cc"),U=Xe("4630");Ce.exports=Xe("9e1e")?function(H,w,f){return o.f(H,w,U(1,f))}:function(H,w,f){return H[w]=f,H}},"38fd":function(Ce,qe,Xe){var o=Xe("69a8"),U=Xe("4bf8"),H=Xe("613b")("IE_PROTO"),w=Object.prototype;Ce.exports=Object.getPrototypeOf||function(f){return f=U(f),o(f,H)?f[H]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?w:null}},"41a0":function(Ce,qe,Xe){var o=Xe("2aeb"),U=Xe("4630"),H=Xe("7f20"),w={};Xe("32e9")(w,Xe("2b4c")("iterator"),function(){return this}),Ce.exports=function(f,M,T){f.prototype=o(w,{next:U(1,T)}),H(f,M+" Iterator")}},"456d":function(Ce,qe,Xe){var o=Xe("4bf8"),U=Xe("0d58");Xe("5eda")("keys",function(){return function(H){return U(o(H))}})},4588:function(Ce,qe){var Xe=Math.ceil,o=Math.floor;Ce.exports=function(U){return isNaN(U=+U)?0:(U>0?o:Xe)(U)}},4630:function(Ce,qe){Ce.exports=function(Xe,o){return{enumerable:!(Xe&1),configurable:!(Xe&2),writable:!(Xe&4),value:o}}},"4bf8":function(Ce,qe,Xe){var o=Xe("be13");Ce.exports=function(U){return Object(o(U))}},5147:function(Ce,qe,Xe){var o=Xe("2b4c")("match");Ce.exports=function(U){var H=/./;try{"/./"[U](H)}catch{try{return H[o]=!1,!"/./"[U](H)}catch{}}return!0}},"520a":function(Ce,qe,Xe){var o=Xe("0bfb"),U=RegExp.prototype.exec,H=String.prototype.replace,w=U,f="lastIndex",M=function(){var a=/a/,n=/b*/g;return U.call(a,"a"),U.call(n,"a"),a[f]!==0||n[f]!==0}(),T=/()??/.exec("")[1]!==void 0,e=M||T;e&&(w=function(a){var n=this,r,t,h,i;return T&&(t=new RegExp("^"+n.source+"$(?!\\s)",o.call(n))),M&&(r=n[f]),h=U.call(n,a),M&&h&&(n[f]=n.global?h.index+h[0].length:r),T&&h&&h.length>1&&H.call(h[0],t,function(){for(i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(h[i]=void 0)}),h}),Ce.exports=w},"52a7":function(Ce,qe){qe.f={}.propertyIsEnumerable},5537:function(Ce,qe,Xe){var o=Xe("8378"),U=Xe("7726"),H="__core-js_shared__",w=U[H]||(U[H]={});(Ce.exports=function(f,M){return w[f]||(w[f]=M!==void 0?M:{})})("versions",[]).push({version:o.version,mode:Xe("2d00")?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(Ce,qe,Xe){var o=Xe("7726"),U=Xe("8378"),H=Xe("32e9"),w=Xe("2aba"),f=Xe("9b43"),M="prototype",T=function(e,a,n){var r=e&T.F,t=e&T.G,h=e&T.S,i=e&T.P,s=e&T.B,y=t?o:h?o[a]||(o[a]={}):(o[a]||{})[M],d=t?U:U[a]||(U[a]={}),p=d[M]||(d[M]={}),c,m,l,x;t&&(n=a);for(c in n)m=!r&&y&&y[c]!==void 0,l=(m?y:n)[c],x=s&&m?f(l,o):i&&typeof l=="function"?f(Function.call,l):l,y&&w(y,c,l,e&T.U),d[c]!=l&&H(d,c,x),i&&p[c]!=l&&(p[c]=l)};o.core=U,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128,Ce.exports=T},"5eda":function(Ce,qe,Xe){var o=Xe("5ca1"),U=Xe("8378"),H=Xe("79e5");Ce.exports=function(w,f){var M=(U.Object||{})[w]||Object[w],T={};T[w]=f(M),o(o.S+o.F*H(function(){M(1)}),"Object",T)}},"5f1b":function(Ce,qe,Xe){var o=Xe("23c6"),U=RegExp.prototype.exec;Ce.exports=function(H,w){var f=H.exec;if(typeof f=="function"){var M=f.call(H,w);if(typeof M!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return M}if(o(H)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(H,w)}},"613b":function(Ce,qe,Xe){var o=Xe("5537")("keys"),U=Xe("ca5a");Ce.exports=function(H){return o[H]||(o[H]=U(H))}},"626a":function(Ce,qe,Xe){var o=Xe("2d95");Ce.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return o(U)=="String"?U.split(""):Object(U)}},6762:function(Ce,qe,Xe){var o=Xe("5ca1"),U=Xe("c366")(!0);o(o.P,"Array",{includes:function(H){return U(this,H,arguments.length>1?arguments[1]:void 0)}}),Xe("9c6c")("includes")},6821:function(Ce,qe,Xe){var o=Xe("626a"),U=Xe("be13");Ce.exports=function(H){return o(U(H))}},"69a8":function(Ce,qe){var Xe={}.hasOwnProperty;Ce.exports=function(o,U){return Xe.call(o,U)}},"6a99":function(Ce,qe,Xe){var o=Xe("d3f4");Ce.exports=function(U,H){if(!o(U))return U;var w,f;if(H&&typeof(w=U.toString)=="function"&&!o(f=w.call(U))||typeof(w=U.valueOf)=="function"&&!o(f=w.call(U))||!H&&typeof(w=U.toString)=="function"&&!o(f=w.call(U)))return f;throw TypeError("Can't convert object to primitive value")}},7333:function(Ce,qe,Xe){var o=Xe("0d58"),U=Xe("2621"),H=Xe("52a7"),w=Xe("4bf8"),f=Xe("626a"),M=Object.assign;Ce.exports=!M||Xe("79e5")(function(){var T={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return T[a]=7,n.split("").forEach(function(r){e[r]=r}),M({},T)[a]!=7||Object.keys(M({},e)).join("")!=n})?function(T,e){for(var a=w(T),n=arguments.length,r=1,t=U.f,h=H.f;n>r;)for(var i=f(arguments[r++]),s=t?o(i).concat(t(i)):o(i),y=s.length,d=0,p;y>d;)h.call(i,p=s[d++])&&(a[p]=i[p]);return a}:M},7726:function(Ce,qe){var Xe=Ce.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=Xe)},"77f1":function(Ce,qe,Xe){var o=Xe("4588"),U=Math.max,H=Math.min;Ce.exports=function(w,f){return w=o(w),w<0?U(w+f,0):H(w,f)}},"79e5":function(Ce,qe){Ce.exports=function(Xe){try{return!!Xe()}catch{return!0}}},"7f20":function(Ce,qe,Xe){var o=Xe("86cc").f,U=Xe("69a8"),H=Xe("2b4c")("toStringTag");Ce.exports=function(w,f,M){w&&!U(w=M?w:w.prototype,H)&&o(w,H,{configurable:!0,value:f})}},8378:function(Ce,qe){var Xe=Ce.exports={version:"2.6.5"};typeof __e=="number"&&(__e=Xe)},"84f2":function(Ce,qe){Ce.exports={}},"86cc":function(Ce,qe,Xe){var o=Xe("cb7c"),U=Xe("c69a"),H=Xe("6a99"),w=Object.defineProperty;qe.f=Xe("9e1e")?Object.defineProperty:function(f,M,T){if(o(f),M=H(M,!0),o(T),U)try{return w(f,M,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported!");return"value"in T&&(f[M]=T.value),f}},"9b43":function(Ce,qe,Xe){var o=Xe("d8e8");Ce.exports=function(U,H,w){if(o(U),H===void 0)return U;switch(w){case 1:return function(f){return U.call(H,f)};case 2:return function(f,M){return U.call(H,f,M)};case 3:return function(f,M,T){return U.call(H,f,M,T)}}return function(){return U.apply(H,arguments)}}},"9c6c":function(Ce,qe,Xe){var o=Xe("2b4c")("unscopables"),U=Array.prototype;U[o]==null&&Xe("32e9")(U,o,{}),Ce.exports=function(H){U[o][H]=!0}},"9def":function(Ce,qe,Xe){var o=Xe("4588"),U=Math.min;Ce.exports=function(H){return H>0?U(o(H),9007199254740991):0}},"9e1e":function(Ce,qe,Xe){Ce.exports=!Xe("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a352:function(Ce,qe){Ce.exports=ut},a481:function(Ce,qe,Xe){var o=Xe("cb7c"),U=Xe("4bf8"),H=Xe("9def"),w=Xe("4588"),f=Xe("0390"),M=Xe("5f1b"),T=Math.max,e=Math.min,a=Math.floor,n=/\$([$&`']|\d\d?|<[^>]*>)/g,r=/\$([$&`']|\d\d?)/g,t=function(h){return h===void 0?h:String(h)};Xe("214f")("replace",2,function(h,i,s,y){return[function(p,c){var m=h(this),l=p==null?void 0:p[i];return l!==void 0?l.call(p,m,c):s.call(String(m),p,c)},function(p,c){var m=y(s,p,this,c);if(m.done)return m.value;var l=o(p),x=String(this),u=typeof c=="function";u||(c=String(c));var A=l.global;if(A){var _=l.unicode;l.lastIndex=0}for(var g=[];;){var b=M(l,x);if(b===null||(g.push(b),!A))break;var v=String(b[0]);v===""&&(l.lastIndex=f(x,H(l.lastIndex),_))}for(var C="",S=0,k=0;k<g.length;k++){b=g[k];for(var E=String(b[0]),F=T(e(w(b.index),x.length),0),I=[],D=1;D<b.length;D++)I.push(t(b[D]));var R=b.groups;if(u){var O=[E].concat(I,F,x);R!==void 0&&O.push(R);var z=String(c.apply(void 0,O))}else z=d(E,x,F,I,R,c);F>=S&&(C+=x.slice(S,F)+z,S=F+E.length)}return C+x.slice(S)}];function d(p,c,m,l,x,u){var A=m+p.length,_=l.length,g=r;return x!==void 0&&(x=U(x),g=n),s.call(u,g,function(b,v){var C;switch(v.charAt(0)){case"$":return"$";case"&":return p;case"`":return c.slice(0,m);case"'":return c.slice(A);case"<":C=x[v.slice(1,-1)];break;default:var S=+v;if(S===0)return b;if(S>_){var k=a(S/10);return k===0?b:k<=_?l[k-1]===void 0?v.charAt(1):l[k-1]+v.charAt(1):b}C=l[S-1]}return C===void 0?"":C})}})},aae3:function(Ce,qe,Xe){var o=Xe("d3f4"),U=Xe("2d95"),H=Xe("2b4c")("match");Ce.exports=function(w){var f;return o(w)&&((f=w[H])!==void 0?!!f:U(w)=="RegExp")}},ac6a:function(Ce,qe,Xe){for(var o=Xe("cadf"),U=Xe("0d58"),H=Xe("2aba"),w=Xe("7726"),f=Xe("32e9"),M=Xe("84f2"),T=Xe("2b4c"),e=T("iterator"),a=T("toStringTag"),n=M.Array,r={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},t=U(r),h=0;h<t.length;h++){var i=t[h],s=r[i],y=w[i],d=y&&y.prototype,p;if(d&&(d[e]||f(d,e,n),d[a]||f(d,a,i),M[i]=n,s))for(p in o)d[p]||H(d,p,o[p],!0)}},b0c5:function(Ce,qe,Xe){var o=Xe("520a");Xe("5ca1")({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},be13:function(Ce,qe){Ce.exports=function(Xe){if(Xe==null)throw TypeError("Can't call method on  "+Xe);return Xe}},c366:function(Ce,qe,Xe){var o=Xe("6821"),U=Xe("9def"),H=Xe("77f1");Ce.exports=function(w){return function(f,M,T){var e=o(f),a=U(e.length),n=H(T,a),r;if(w&&M!=M){for(;a>n;)if(r=e[n++],r!=r)return!0}else for(;a>n;n++)if((w||n in e)&&e[n]===M)return w||n||0;return!w&&-1}}},c649:function(Ce,qe,Xe){(function(o){Xe.d(qe,"c",function(){return e}),Xe.d(qe,"a",function(){return M}),Xe.d(qe,"b",function(){return H}),Xe.d(qe,"d",function(){return T}),Xe("a481");function U(){return typeof window<"u"?window.console:o.console}var H=U();function w(a){var n=Object.create(null);return function(r){var t=n[r];return t||(n[r]=a(r))}}var f=/-(\w)/g,M=w(function(a){return a.replace(f,function(n,r){return r?r.toUpperCase():""})});function T(a){a.parentElement!==null&&a.parentElement.removeChild(a)}function e(a,n,r){var t=r===0?a.children[0]:a.children[r-1].nextSibling;a.insertBefore(n,t)}}).call(this,Xe("c8ba"))},c69a:function(Ce,qe,Xe){Ce.exports=!Xe("9e1e")&&!Xe("79e5")(function(){return Object.defineProperty(Xe("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(Ce,qe){var Xe;Xe=function(){return this}();try{Xe=Xe||new Function("return this")()}catch{typeof window=="object"&&(Xe=window)}Ce.exports=Xe},ca5a:function(Ce,qe){var Xe=0,o=Math.random();Ce.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++Xe+o).toString(36))}},cadf:function(Ce,qe,Xe){var o=Xe("9c6c"),U=Xe("d53b"),H=Xe("84f2"),w=Xe("6821");Ce.exports=Xe("01f9")(Array,"Array",function(f,M){this._t=w(f),this._i=0,this._k=M},function(){var f=this._t,M=this._k,T=this._i++;return!f||T>=f.length?(this._t=void 0,U(1)):M=="keys"?U(0,T):M=="values"?U(0,f[T]):U(0,[T,f[T]])},"values"),H.Arguments=H.Array,o("keys"),o("values"),o("entries")},cb7c:function(Ce,qe,Xe){var o=Xe("d3f4");Ce.exports=function(U){if(!o(U))throw TypeError(U+" is not an object!");return U}},ce10:function(Ce,qe,Xe){var o=Xe("69a8"),U=Xe("6821"),H=Xe("c366")(!1),w=Xe("613b")("IE_PROTO");Ce.exports=function(f,M){var T=U(f),e=0,a=[],n;for(n in T)n!=w&&o(T,n)&&a.push(n);for(;M.length>e;)o(T,n=M[e++])&&(~H(a,n)||a.push(n));return a}},d2c8:function(Ce,qe,Xe){var o=Xe("aae3"),U=Xe("be13");Ce.exports=function(H,w,f){if(o(w))throw TypeError("String#"+f+" doesn't accept regex!");return String(U(H))}},d3f4:function(Ce,qe){Ce.exports=function(Xe){return typeof Xe=="object"?Xe!==null:typeof Xe=="function"}},d53b:function(Ce,qe){Ce.exports=function(Xe,o){return{value:o,done:!!Xe}}},d8e8:function(Ce,qe){Ce.exports=function(Xe){if(typeof Xe!="function")throw TypeError(Xe+" is not a function!");return Xe}},e11e:function(Ce,qe){Ce.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(Ce,qe,Xe){var o=Xe("5ca1"),U=Xe("9def"),H=Xe("d2c8"),w="startsWith",f=""[w];o(o.P+o.F*Xe("5147")(w),"String",{startsWith:function(M){var T=H(this,M,w),e=U(Math.min(arguments.length>1?arguments[1]:void 0,T.length)),a=String(M);return f?f.call(T,a,e):T.slice(e,e+a.length)===a}})},f6fd:function(Ce,qe){(function(Xe){var o="currentScript",U=Xe.getElementsByTagName("script");o in Xe||Object.defineProperty(Xe,o,{get:function(){try{throw new Error}catch(f){var H,w=(/.*at [^\(]*\((.*):.+:.+\)$/ig.exec(f.stack)||[!1])[1];for(H in U)if(U[H].src==w||U[H].readyState=="interactive")return U[H];return null}}})})(document)},f751:function(Ce,qe,Xe){var o=Xe("5ca1");o(o.S+o.F,"Object",{assign:Xe("7333")})},fa5b:function(Ce,qe,Xe){Ce.exports=Xe("5537")("native-function-to-string",Function.toString)},fab2:function(Ce,qe,Xe){var o=Xe("7726").document;Ce.exports=o&&o.documentElement},fb15:function(Ce,qe,Xe){if(Xe.r(qe),typeof window<"u"){Xe("f6fd");var o;(o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(Xe.p=o[1])}Xe("f751"),Xe("f559"),Xe("ac6a"),Xe("cadf"),Xe("456d");function U(E){if(Array.isArray(E))return E}function H(E,F){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(E)))){var I=[],D=!0,R=!1,O=void 0;try{for(var z=E[Symbol.iterator](),B;!(D=(B=z.next()).done)&&(I.push(B.value),!(F&&I.length===F));D=!0);}catch(G){R=!0,O=G}finally{try{!D&&z.return!=null&&z.return()}finally{if(R)throw O}}return I}}function w(E,F){(F==null||F>E.length)&&(F=E.length);for(var I=0,D=new Array(F);I<F;I++)D[I]=E[I];return D}function f(E,F){if(E){if(typeof E=="string")return w(E,F);var I=Object.prototype.toString.call(E).slice(8,-1);if(I==="Object"&&E.constructor&&(I=E.constructor.name),I==="Map"||I==="Set")return Array.from(E);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return w(E,F)}}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(E,F){return U(E)||H(E,F)||f(E,F)||M()}Xe("6762"),Xe("2fdb");function e(E){if(Array.isArray(E))return w(E)}function a(E){if(typeof Symbol<"u"&&Symbol.iterator in Object(E))return Array.from(E)}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(E){return e(E)||a(E)||f(E)||n()}var t=Xe("a352"),h=Xe.n(t),i=Xe("c649");function s(E,F,I){return I===void 0||(E=E||{},E[F]=I),E}function y(E,F){return E.map(function(I){return I.elm}).indexOf(F)}function d(E,F,I,D){if(!E)return[];var R=E.map(function(B){return B.elm}),O=F.length-D,z=r(F).map(function(B,G){return G>=O?R.length:R.indexOf(B)});return I?z.filter(function(B){return B!==-1}):z}function p(E,F){var I=this;this.$nextTick(function(){return I.$emit(E.toLowerCase(),F)})}function c(E){var F=this;return function(I){F.realList!==null&&F["onDrag"+E](I),p.call(F,E,I)}}function m(E){return["transition-group","TransitionGroup"].includes(E)}function l(E){if(!E||E.length!==1)return!1;var F=T(E,1),I=F[0].componentOptions;return I?m(I.tag):!1}function x(E,F,I){return E[I]||(F[I]?F[I]():void 0)}function u(E,F,I){var D=0,R=0,O=x(F,I,"header");O&&(D=O.length,E=E?[].concat(r(O),r(E)):r(O));var z=x(F,I,"footer");return z&&(R=z.length,E=E?[].concat(r(E),r(z)):r(z)),{children:E,headerOffset:D,footerOffset:R}}function A(E,F){var I=null,D=function(G,Q){I=s(I,G,Q)},R=Object.keys(E).filter(function(G){return G==="id"||G.startsWith("data-")}).reduce(function(G,Q){return G[Q]=E[Q],G},{});if(D("attrs",R),!F)return I;var O=F.on,z=F.props,B=F.attrs;return D("on",O),D("props",z),Object.assign(I.attrs,B),I}var _=["Start","Add","Remove","Update","End"],g=["Choose","Unchoose","Sort","Filter","Clone"],b=["Move"].concat(_,g).map(function(E){return"on"+E}),v=null,C={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(E){return E}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},S={name:"draggable",inheritAttrs:!1,props:C,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(E){var F=this.$slots.default;this.transitionMode=l(F);var I=u(F,this.$slots,this.$scopedSlots),D=I.children,R=I.headerOffset,O=I.footerOffset;this.headerOffset=R,this.footerOffset=O;var z=A(this.$attrs,this.componentData);return E(this.getTag(),z,D)},created:function(){this.list!==null&&this.value!==null&&i.b.error("Value and list props are mutually exclusive! Please set one or another."),this.element!=="div"&&i.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),this.options!==void 0&&i.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var E=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var F={};_.forEach(function(R){F["on"+R]=c.call(E,R)}),g.forEach(function(R){F["on"+R]=p.bind(E,R)});var I=Object.keys(this.$attrs).reduce(function(R,O){return R[Object(i.a)(O)]=E.$attrs[O],R},{}),D=Object.assign({},this.options,I,F,{onMove:function(R,O){return E.onDragMove(R,O)}});!("draggable"in D)&&(D.draggable=">*"),this._sortable=new h.a(this.rootContainer,D),this.computeIndexes()},beforeDestroy:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(E){this.updateOptions(E)},deep:!0},$attrs:{handler:function(E){this.updateOptions(E)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var E=this._vnode.fnOptions;return E&&E.functional},getTag:function(){return this.tag||this.element},updateOptions:function(E){for(var F in E){var I=Object(i.a)(F);b.indexOf(I)===-1&&this._sortable.option(I,E[F])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var E=this.$slots.default;return this.transitionMode?E[0].child.$slots.default:E},computeIndexes:function(){var E=this;this.$nextTick(function(){E.visibleIndexes=d(E.getChildrenNodes(),E.rootContainer.children,E.transitionMode,E.footerOffset)})},getUnderlyingVm:function(E){var F=y(this.getChildrenNodes()||[],E);if(F===-1)return null;var I=this.realList[F];return{index:F,element:I}},getUnderlyingPotencialDraggableComponent:function(E){var F=E.__vue__;return!F||!F.$options||!m(F.$options._componentTag)?!("realList"in F)&&F.$children.length===1&&"realList"in F.$children[0]?F.$children[0]:F:F.$parent},emitChanges:function(E){var F=this;this.$nextTick(function(){F.$emit("change",E)})},alterList:function(E){if(this.list){E(this.list);return}var F=r(this.value);E(F),this.$emit("input",F)},spliceList:function(){var E=arguments,F=function(I){return I.splice.apply(I,r(E))};this.alterList(F)},updatePosition:function(E,F){var I=function(D){return D.splice(F,0,D.splice(E,1)[0])};this.alterList(I)},getRelatedContextFromMoveEvent:function(E){var F=E.to,I=E.related,D=this.getUnderlyingPotencialDraggableComponent(F);if(!D)return{component:D};var R=D.realList,O={list:R,component:D};if(F!==I&&R&&D.getUnderlyingVm){var z=D.getUnderlyingVm(I);if(z)return Object.assign(z,O)}return O},getVmIndex:function(E){var F=this.visibleIndexes,I=F.length;return E>I-1?I:F[E]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(E){if(!(!this.noTransitionOnDrag||!this.transitionMode)){var F=this.getChildrenNodes();F[E].data=null;var I=this.getComponent();I.children=[],I.kept=void 0}},onDragStart:function(E){this.context=this.getUnderlyingVm(E.item),E.item._underlying_vm_=this.clone(this.context.element),v=E.item},onDragAdd:function(E){var F=E.item._underlying_vm_;if(F!==void 0){Object(i.d)(E.item);var I=this.getVmIndex(E.newIndex);this.spliceList(I,0,F),this.computeIndexes();var D={element:F,newIndex:I};this.emitChanges({added:D})}},onDragRemove:function(E){if(Object(i.c)(this.rootContainer,E.item,E.oldIndex),E.pullMode==="clone"){Object(i.d)(E.clone);return}var F=this.context.index;this.spliceList(F,1);var I={element:this.context.element,oldIndex:F};this.resetTransitionData(F),this.emitChanges({removed:I})},onDragUpdate:function(E){Object(i.d)(E.item),Object(i.c)(E.from,E.item,E.oldIndex);var F=this.context.index,I=this.getVmIndex(E.newIndex);this.updatePosition(F,I);var D={element:this.context.element,oldIndex:F,newIndex:I};this.emitChanges({moved:D})},updateProperty:function(E,F){E.hasOwnProperty(F)&&(E[F]+=this.headerOffset)},computeFutureIndex:function(E,F){if(!E.element)return 0;var I=r(F.to.children).filter(function(z){return z.style.display!=="none"}),D=I.indexOf(F.related),R=E.component.getVmIndex(D),O=I.indexOf(v)!==-1;return O||!F.willInsertAfter?R:R+1},onDragMove:function(E,F){var I=this.move;if(!I||!this.realList)return!0;var D=this.getRelatedContextFromMoveEvent(E),R=this.context,O=this.computeFutureIndex(D,E);Object.assign(R,{futureIndex:O});var z=Object.assign({},E,{relatedContext:D,draggedContext:R});return I(z,F)},onDragEnd:function(){this.computeIndexes(),v=null}}};typeof window<"u"&&"Vue"in window&&window.Vue.component("draggable",S);var k=S;qe.default=k}}).default})})(Ip),Ip.exports;const rv={aggregatorTemplates:Xo,aggregators:Oh,derivers:m0,locales:Rp,naturalSort:ac,numberFormat:Of,getSort:Pv,sortAs:p0,PivotData:Sf};typeof window<"u"&&window.Vue&&window.Vue.use(w0);const rd={props:{data:{type:[Array,Object,Function],required:!0},aggregators:{type:Object,default:function(){return rv.aggregators}},aggregatorName:{type:String,default:"Count"},heatmapMode:String,tableColorScaleGenerator:{type:Function},tableOptions:{type:Object,default:function(){return{}}},renderers:Object,rendererName:{type:String,default:"Table"},locale:{type:String,default:"en"},locales:{type:Object,default:function(){return rv.locales}},rowTotal:{type:Boolean,default:!0},colTotal:{type:Boolean,default:!0},cols:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},vals:{type:Array,default:function(){return[]}},attributes:{type:Array,default:function(){return[]}},valueFilter:{type:Object,default:function(){return{}}},sorters:{type:[Function,Object],default:function(){return{}}},derivedAttributes:{type:[Function,Object],default:function(){return{}}},rowOrder:{type:String,default:"key_a_to_z",validator:function(it){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(it)!==-1}},colOrder:{type:String,default:"key_a_to_z",validator:function(it){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(it)!==-1}},tableMaxWidth:{type:Number,default:0,validator:function(it){return it>=0}}},methods:{renderError(it){return it("span",this.locales[this.locale].localeStrings.renderError||"An error occurred rendering the PivotTable results.")},computeError(it){return it("span",this.locales[this.locale].localeStrings.computeError||"An error occurred computing the PivotTable results.")},uiRenderError(it){return it("span",this.locales[this.locale].localeStrings.uiRenderError||"An error occurred rendering the PivotTable UI.")}}};var qv={exports:{}};(function(it){it.exports=function(Ke){var ut={};function Ce(qe){if(ut[qe])return ut[qe].exports;var Xe=ut[qe]={i:qe,l:!1,exports:{}};return Ke[qe].call(Xe.exports,Xe,Xe.exports,Ce),Xe.l=!0,Xe.exports}return Ce.m=Ke,Ce.c=ut,Ce.d=function(qe,Xe,o){Ce.o(qe,Xe)||Object.defineProperty(qe,Xe,{enumerable:!0,get:o})},Ce.r=function(qe){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(qe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(qe,"__esModule",{value:!0})},Ce.t=function(qe,Xe){if(Xe&1&&(qe=Ce(qe)),Xe&8||Xe&4&&typeof qe=="object"&&qe&&qe.__esModule)return qe;var o=Object.create(null);if(Ce.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:qe}),Xe&2&&typeof qe!="string")for(var U in qe)Ce.d(o,U,function(H){return qe[H]}.bind(null,U));return o},Ce.n=function(qe){var Xe=qe&&qe.__esModule?function(){return qe.default}:function(){return qe};return Ce.d(Xe,"a",Xe),Xe},Ce.o=function(qe,Xe){return Object.prototype.hasOwnProperty.call(qe,Xe)},Ce.p="",Ce(Ce.s="fae3")}({"00ee":function(Ke,ut,Ce){var qe=Ce("b622"),Xe=qe("toStringTag"),o={};o[Xe]="z",Ke.exports=String(o)==="[object z]"},"0366":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("59ed"),o=Ce("40d5"),U=qe(qe.bind);Ke.exports=function(H,w){return Xe(H),w===void 0?H:o?U(H,w):function(){return H.apply(w,arguments)}}},"04f8":function(Ke,ut,Ce){var qe=Ce("2d00"),Xe=Ce("d039");Ke.exports=!!Object.getOwnPropertySymbols&&!Xe(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&qe&&qe<41})},"057f":function(Ke,ut,Ce){var qe=Ce("c6b6"),Xe=Ce("fc6a"),o=Ce("241c").f,U=Ce("4dae"),H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(f){try{return o(f)}catch{return U(H)}};Ke.exports.f=function(M){return H&&qe(M)=="Window"?w(M):o(Xe(M))}},"06cf":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("c65b"),o=Ce("d1e7"),U=Ce("5c6c"),H=Ce("fc6a"),w=Ce("a04b"),f=Ce("1a2d"),M=Ce("0cfb"),T=Object.getOwnPropertyDescriptor;ut.f=qe?T:function(a,n){if(a=H(a),n=w(n),M)try{return T(a,n)}catch{}if(f(a,n))return U(!Xe(o.f,a,n),a[n])}},"07fa":function(Ke,ut,Ce){var qe=Ce("50c4");Ke.exports=function(Xe){return qe(Xe.length)}},"0b42":function(Ke,ut,Ce){var qe=Ce("e8b5"),Xe=Ce("68ee"),o=Ce("861d"),U=Ce("b622"),H=U("species"),w=Array;Ke.exports=function(f){var M;return qe(f)&&(M=f.constructor,Xe(M)&&(M===w||qe(M.prototype))?M=void 0:o(M)&&(M=M[H],M===null&&(M=void 0))),M===void 0?w:M}},"0b43":function(Ke,ut,Ce){var qe=Ce("04f8");Ke.exports=qe&&!!Symbol.for&&!!Symbol.keyFor},"0cb2":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("7b0b"),o=Math.floor,U=qe("".charAt),H=qe("".replace),w=qe("".slice),f=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,M=/\$([$&'`]|\d{1,2})/g;Ke.exports=function(T,e,a,n,r,t){var h=a+T.length,i=n.length,s=M;return r!==void 0&&(r=Xe(r),s=f),H(t,s,function(y,d){var p;switch(U(d,0)){case"$":return"$";case"&":return T;case"`":return w(e,0,a);case"'":return w(e,h);case"<":p=r[w(d,1,-1)];break;default:var c=+d;if(c===0)return y;if(c>i){var m=o(c/10);return m===0?y:m<=i?n[m-1]===void 0?U(d,1):n[m-1]+U(d,1):y}p=n[c-1]}return p===void 0?"":p})}},"0cfb":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("d039"),o=Ce("cc12");Ke.exports=!qe&&!Xe(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},"0d51":function(Ke,ut){var Ce=String;Ke.exports=function(qe){try{return Ce(qe)}catch{return"Object"}}},"107c":function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("da84"),o=Xe.RegExp;Ke.exports=qe(function(){var U=o("(?<a>b)","g");return U.exec("b").groups.a!=="b"||"b".replace(U,"$<a>c")!=="bc"})},"13d2":function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("1626"),o=Ce("1a2d"),U=Ce("83ab"),H=Ce("5e77").CONFIGURABLE,w=Ce("8925"),f=Ce("69f3"),M=f.enforce,T=f.get,e=Object.defineProperty,a=U&&!qe(function(){return e(function(){},"length",{value:8}).length!==8}),n=String(String).split("String"),r=Ke.exports=function(t,h,i){String(h).slice(0,7)==="Symbol("&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(h="get "+h),i&&i.setter&&(h="set "+h),(!o(t,"name")||H&&t.name!==h)&&(U?e(t,"name",{value:h,configurable:!0}):t.name=h),a&&i&&o(i,"arity")&&t.length!==i.arity&&e(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?U&&e(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var s=M(t);return o(s,"source")||(s.source=n.join(typeof h=="string"?h:"")),t};Function.prototype.toString=r(function(){return Xe(this)&&T(this).source||w(this)},"toString")},"13d5":function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("d58f").left,o=Ce("a640"),U=Ce("2d00"),H=Ce("605d"),w=o("reduce"),f=!H&&U>79&&U<83;qe({target:"Array",proto:!0,forced:!w||f},{reduce:function(T){var e=arguments.length;return Xe(this,T,e,e>1?arguments[1]:void 0)}})},"14c3":function(Ke,ut,Ce){var qe=Ce("c65b"),Xe=Ce("825a"),o=Ce("1626"),U=Ce("c6b6"),H=Ce("9263"),w=TypeError;Ke.exports=function(f,M){var T=f.exec;if(o(T)){var e=qe(T,f,M);return e!==null&&Xe(e),e}if(U(f)==="RegExp")return qe(H,f,M);throw w("RegExp#exec called on incompatible receiver")}},"14d9":function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("7b0b"),o=Ce("07fa"),U=Ce("3a34"),H=Ce("3511"),w=Ce("d039"),f=w(function(){return[].push.call({length:4294967296},1)!==4294967297}),M=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(T){return T instanceof TypeError}}();qe({target:"Array",proto:!0,arity:1,forced:f||M},{push:function(e){var a=Xe(this),n=o(a),r=arguments.length;H(n+r);for(var t=0;t<r;t++)a[n]=arguments[t],n++;return U(a,n),n}})},"159b":function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("fdbc"),o=Ce("785a"),U=Ce("17c2"),H=Ce("9112"),w=function(M){if(M&&M.forEach!==U)try{H(M,"forEach",U)}catch{M.forEach=U}};for(var f in Xe)Xe[f]&&w(qe[f]&&qe[f].prototype);w(o)},1626:function(Ke,ut,Ce){var qe=Ce("8ea1"),Xe=qe.all;Ke.exports=qe.IS_HTMLDDA?function(o){return typeof o=="function"||o===Xe}:function(o){return typeof o=="function"}},"17c2":function(Ke,ut,Ce){var qe=Ce("b727").forEach,Xe=Ce("a640"),o=Xe("forEach");Ke.exports=o?[].forEach:function(H){return qe(this,H,arguments.length>1?arguments[1]:void 0)}},"1a2d":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("7b0b"),o=qe({}.hasOwnProperty);Ke.exports=Object.hasOwn||function(H,w){return o(Xe(H),w)}},"1be4":function(Ke,ut,Ce){var qe=Ce("d066");Ke.exports=qe("document","documentElement")},"1d80":function(Ke,ut,Ce){var qe=Ce("7234"),Xe=TypeError;Ke.exports=function(o){if(qe(o))throw Xe("Can't call method on "+o);return o}},"1dde":function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("b622"),o=Ce("2d00"),U=Xe("species");Ke.exports=function(H){return o>=51||!qe(function(){var w=[],f=w.constructor={};return f[U]=function(){return{foo:1}},w[H](Boolean).foo!==1})}},"23cb":function(Ke,ut,Ce){var qe=Ce("5926"),Xe=Math.max,o=Math.min;Ke.exports=function(U,H){var w=qe(U);return w<0?Xe(w+H,0):o(w,H)}},"23e7":function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("06cf").f,o=Ce("9112"),U=Ce("cb2d"),H=Ce("6374"),w=Ce("e893"),f=Ce("94ca");Ke.exports=function(M,T){var e=M.target,a=M.global,n=M.stat,r,t,h,i,s,y;if(a?t=qe:n?t=qe[e]||H(e,{}):t=(qe[e]||{}).prototype,t)for(h in T){if(s=T[h],M.dontCallGetSet?(y=Xe(t,h),i=y&&y.value):i=t[h],r=f(a?h:e+(n?".":"#")+h,M.forced),!r&&i!==void 0){if(typeof s==typeof i)continue;w(s,i)}(M.sham||i&&i.sham)&&o(s,"sham",!0),U(t,h,s,M)}}},"241c":function(Ke,ut,Ce){var qe=Ce("ca84"),Xe=Ce("7839"),o=Xe.concat("length","prototype");ut.f=Object.getOwnPropertyNames||function(H){return qe(H,o)}},"2ad6":function(Ke,ut,Ce){var qe,Xe;(function(o,U){qe=U,Xe=typeof qe=="function"?qe.call(ut,Ce,ut,Ke):qe,Xe!==void 0&&(Ke.exports=Xe)})(typeof window<"u"?window:this,function(){if(typeof window>"u")return null;var o=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),U=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(a){return o.setTimeout(a,20)},H=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||function(a){o.clearTimeout(a)};function w(a,n){var r=Object.prototype.toString.call(a),t=r==="[object Array]"||r==="[object NodeList]"||r==="[object HTMLCollection]"||r==="[object Object]"||typeof jQuery<"u"&&a instanceof jQuery||typeof Elements<"u"&&a instanceof Elements,h=0,i=a.length;if(t)for(;h<i;h++)n(a[h]);else n(a)}function f(a){if(!a.getBoundingClientRect)return{width:a.offsetWidth,height:a.offsetHeight};var n=a.getBoundingClientRect();return{width:Math.round(n.width),height:Math.round(n.height)}}function M(a,n){Object.keys(n).forEach(function(r){a.style[r]=n[r]})}var T=function(a,n){var r=0;function t(){var i=[];this.add=function(d){i.push(d)};var s,y;this.call=function(d){for(s=0,y=i.length;s<y;s++)i[s].call(this,d)},this.remove=function(d){var p=[];for(s=0,y=i.length;s<y;s++)i[s]!==d&&p.push(i[s]);i=p},this.length=function(){return i.length}}function h(i,s){if(!!i){if(i.resizedAttached){i.resizedAttached.add(s);return}i.resizedAttached=new t,i.resizedAttached.add(s),i.resizeSensor=document.createElement("div"),i.resizeSensor.dir="ltr",i.resizeSensor.className="resize-sensor";var y={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},d={position:"absolute",left:"0px",top:"0px",transition:"0s"};M(i.resizeSensor,y);var p=document.createElement("div");p.className="resize-sensor-expand",M(p,y);var c=document.createElement("div");M(c,d),p.appendChild(c);var m=document.createElement("div");m.className="resize-sensor-shrink",M(m,y);var l=document.createElement("div");M(l,d),M(l,{width:"200%",height:"200%"}),m.appendChild(l),i.resizeSensor.appendChild(p),i.resizeSensor.appendChild(m),i.appendChild(i.resizeSensor);var x=window.getComputedStyle(i),u=x?x.getPropertyValue("position"):null;u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(i.style.position="relative");var A=!1,_=0,g=f(i),b=0,v=0,C=!0;r=0;var S=function(){var D=i.offsetWidth,R=i.offsetHeight;c.style.width=D+10+"px",c.style.height=R+10+"px",p.scrollLeft=D+10,p.scrollTop=R+10,m.scrollLeft=D+10,m.scrollTop=R+10},k=function(){if(C){var D=i.offsetWidth===0&&i.offsetHeight===0;if(D){r||(r=U(function(){r=0,k()}));return}else C=!1}S()};i.resizeSensor.resetSensor=k;var E=function(){_=0,A&&(b=g.width,v=g.height,i.resizedAttached&&i.resizedAttached.call(g))},F=function(){g=f(i),A=g.width!==b||g.height!==v,A&&!_&&(_=U(E)),k()},I=function(D,R,O){D.attachEvent?D.attachEvent("on"+R,O):D.addEventListener(R,O)};I(p,"scroll",F),I(m,"scroll",F),r=U(function(){r=0,k()})}}w(a,function(i){h(i,n)}),this.detach=function(i){r||(H(r),r=0),T.detach(a,i)},this.reset=function(){a.resizeSensor.resetSensor()}};if(T.reset=function(a){w(a,function(n){n.resizeSensor.resetSensor()})},T.detach=function(a,n){w(a,function(r){!r||r.resizedAttached&&typeof n=="function"&&(r.resizedAttached.remove(n),r.resizedAttached.length())||r.resizeSensor&&(r.contains(r.resizeSensor)&&r.removeChild(r.resizeSensor),delete r.resizeSensor,delete r.resizedAttached)})},typeof MutationObserver<"u"){var e=new MutationObserver(function(a){for(var n in a)if(a.hasOwnProperty(n))for(var r=a[n].addedNodes,t=0;t<r.length;t++)r[t].resizeSensor&&T.reset(r[t])});document.addEventListener("DOMContentLoaded",function(a){e.observe(document.body,{childList:!0,subtree:!0})})}return T})},"2ba4":function(Ke,ut,Ce){var qe=Ce("40d5"),Xe=Function.prototype,o=Xe.apply,U=Xe.call;Ke.exports=typeof Reflect=="object"&&Reflect.apply||(qe?U.bind(o):function(){return U.apply(o,arguments)})},"2d00":function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("342f"),o=qe.process,U=qe.Deno,H=o&&o.versions||U&&U.version,w=H&&H.v8,f,M;w&&(f=w.split("."),M=f[0]>0&&f[0]<4?1:+(f[0]+f[1])),!M&&Xe&&(f=Xe.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=Xe.match(/Chrome\/(\d+)/),f&&(M=+f[1]))),Ke.exports=M},"342f":function(Ke,ut,Ce){var qe=Ce("d066");Ke.exports=qe("navigator","userAgent")||""},3511:function(Ke,ut){var Ce=TypeError,qe=9007199254740991;Ke.exports=function(Xe){if(Xe>qe)throw Ce("Maximum allowed index exceeded");return Xe}},"37e8":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("aed9"),o=Ce("9bf2"),U=Ce("825a"),H=Ce("fc6a"),w=Ce("df75");ut.f=qe&&!Xe?Object.defineProperties:function(M,T){U(M);for(var e=H(T),a=w(T),n=a.length,r=0,t;n>r;)o.f(M,t=a[r++],e[t]);return M}},"3a34":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("e8b5"),o=TypeError,U=Object.getOwnPropertyDescriptor,H=qe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(w){return w instanceof TypeError}}();Ke.exports=H?function(w,f){if(Xe(w)&&!U(w,"length").writable)throw o("Cannot set read only .length");return w.length=f}:function(w,f){return w.length=f}},"3a9b":function(Ke,ut,Ce){var qe=Ce("e330");Ke.exports=qe({}.isPrototypeOf)},"40d5":function(Ke,ut,Ce){var qe=Ce("d039");Ke.exports=!qe(function(){var Xe=function(){}.bind();return typeof Xe!="function"||Xe.hasOwnProperty("prototype")})},"428d":function(Ke,ut,Ce){(function(qe,Xe){Ke.exports=Xe(Ce("2ad6"),Ce("f7fe"))})(this,function(qe,Xe){return function(o){function U(w){if(H[w])return H[w].exports;var f=H[w]={exports:{},id:w,loaded:!1};return o[w].call(f.exports,f,f.exports,U),f.loaded=!0,f.exports}var H={};return U.m=o,U.c=H,U.p="/",U(0)}([function(o,U,H){var w,f,M;(function(T,e){f=[o,U,H(10),H(38),H(39),H(9),H(37)],w=e,M=typeof w=="function"?w.apply(U,f):w,M!==void 0&&(o.exports=M)})(this,function(T,e,a,n,r){function t(A){return A&&A.__esModule?A:{default:A}}function h(A){if(!A)return{delay:u,initial:!1};var _=A.initial,g=_!==void 0&&_,b=(0,p.default)(A).map(function(v){return parseInt(v)}).find(function(v){return!isNaN(v)});return b=b||u,{delay:b,initial:g}}function i(A,_){var g={root:document.documentElement},b=new IntersectionObserver(function(v,C){v.forEach(function(S){S.isIntersecting&&(_(),C.disconnect())})},g);return b.observe(A),b}function s(A,_){var g=_.value,b=_.arg,v=_.options,C=function(){return g(A)};switch(b){case"debounce":C=x(function(){return g(A)},v.delay);break;case"throttle":C=x(function(){return g(A)},v.delay,{leading:!0,trailing:!0,maxWait:v.delay})}var S=new c.default(A,C);return v.initial&&g(A),S}function y(A,_,g){var b=_.value,v=_.arg,C=_.modifiers,S=g.context;if(!b||typeof b!="function")return void console.warn("v-resize should received a function as value");var k=h(C);return S&&S.$el===A&&S.$once("hook:deactivated",function(){d(A),S.$once("hook:activated",function(){y(A,{value:b,arg:v,modifiers:C},{context:S})})}),A.offsetParent?void s(A,{value:b,arg:v,options:k}):(k.initial=!0,void(A.__visibility__listener__=i(A,function(){return s(A,{value:b,arg:v,options:k})})))}function d(A){A.__visibility__listener__&&A.__visibility__listener__.disconnect(),A.resizeSensor&&c.default.detach(A)}Object.defineProperty(e,"__esModule",{value:!0});var p=t(a),c=t(n),m=t(r),l=m.default.debounce,x=l===void 0?m.default:l,u=150;e.default={inserted:y,unbind:d},T.exports=e.default})},function(o,U){var H=o.exports={version:"2.4.0"};typeof __e=="number"&&(__e=H)},function(o,U,H){o.exports=!H(3)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(o,U){o.exports=function(H){try{return!!H()}catch{return!0}}},function(o,U){var H=o.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=H)},function(o,U){o.exports=function(H){return typeof H=="object"?H!==null:typeof H=="function"}},function(o,U){o.exports=function(H){if(H==null)throw TypeError("Can't call method on  "+H);return H}},function(o,U){var H=Math.ceil,w=Math.floor;o.exports=function(f){return isNaN(f=+f)?0:(f>0?w:H)(f)}},function(o,U,H){var w=H(23),f=H(6);o.exports=function(M){return w(f(M))}},function(o,U,H){var w,f,M;(function(T,e){f=[],w=e,M=typeof w=="function"?w.apply(U,f):w,M!==void 0&&(o.exports=M)})(this,function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(T){if(this==null)throw new TypeError('"this" is null or not defined');var e=Object(this),a=e.length>>>0;if(typeof T!="function")throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<a;){var t=e[r];if(T.call(n,t,r,e))return t;r++}},configurable:!0,writable:!0})})},function(o,U,H){o.exports={default:H(11),__esModule:!0}},function(o,U,H){H(36),o.exports=H(1).Object.keys},function(o,U){o.exports=function(H){if(typeof H!="function")throw TypeError(H+" is not a function!");return H}},function(o,U,H){var w=H(5);o.exports=function(f){if(!w(f))throw TypeError(f+" is not an object!");return f}},function(o,U,H){var w=H(8),f=H(32),M=H(31);o.exports=function(T){return function(e,a,n){var r,t=w(e),h=f(t.length),i=M(n,h);if(T&&a!=a){for(;h>i;)if(r=t[i++],r!=r)return!0}else for(;h>i;i++)if((T||i in t)&&t[i]===a)return T||i||0;return!T&&-1}}},function(o,U){var H={}.toString;o.exports=function(w){return H.call(w).slice(8,-1)}},function(o,U,H){var w=H(12);o.exports=function(f,M,T){if(w(f),M===void 0)return f;switch(T){case 1:return function(e){return f.call(M,e)};case 2:return function(e,a){return f.call(M,e,a)};case 3:return function(e,a,n){return f.call(M,e,a,n)}}return function(){return f.apply(M,arguments)}}},function(o,U,H){var w=H(5),f=H(4).document,M=w(f)&&w(f.createElement);o.exports=function(T){return M?f.createElement(T):{}}},function(o,U){o.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(o,U,H){var w=H(4),f=H(1),M=H(16),T=H(21),e="prototype",a=function(n,r,t){var h,i,s,y=n&a.F,d=n&a.G,p=n&a.S,c=n&a.P,m=n&a.B,l=n&a.W,x=d?f:f[r]||(f[r]={}),u=x[e],A=d?w:p?w[r]:(w[r]||{})[e];d&&(t=r);for(h in t)i=!y&&A&&A[h]!==void 0,i&&h in x||(s=i?A[h]:t[h],x[h]=d&&typeof A[h]!="function"?t[h]:m&&i?M(s,w):l&&A[h]==s?function(_){var g=function(b,v,C){if(this instanceof _){switch(arguments.length){case 0:return new _;case 1:return new _(b);case 2:return new _(b,v)}return new _(b,v,C)}return _.apply(this,arguments)};return g[e]=_[e],g}(s):c&&typeof s=="function"?M(Function.call,s):s,c&&((x.virtual||(x.virtual={}))[h]=s,n&a.R&&u&&!u[h]&&T(u,h,s)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,o.exports=a},function(o,U){var H={}.hasOwnProperty;o.exports=function(w,f){return H.call(w,f)}},function(o,U,H){var w=H(24),f=H(28);o.exports=H(2)?function(M,T,e){return w.f(M,T,f(1,e))}:function(M,T,e){return M[T]=e,M}},function(o,U,H){o.exports=!H(2)&&!H(3)(function(){return Object.defineProperty(H(17)("div"),"a",{get:function(){return 7}}).a!=7})},function(o,U,H){var w=H(15);o.exports=Object("z").propertyIsEnumerable(0)?Object:function(f){return w(f)=="String"?f.split(""):Object(f)}},function(o,U,H){var w=H(13),f=H(22),M=H(34),T=Object.defineProperty;U.f=H(2)?Object.defineProperty:function(e,a,n){if(w(e),a=M(a,!0),w(n),f)try{return T(e,a,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[a]=n.value),e}},function(o,U,H){var w=H(20),f=H(8),M=H(14)(!1),T=H(29)("IE_PROTO");o.exports=function(e,a){var n,r=f(e),t=0,h=[];for(n in r)n!=T&&w(r,n)&&h.push(n);for(;a.length>t;)w(r,n=a[t++])&&(~M(h,n)||h.push(n));return h}},function(o,U,H){var w=H(25),f=H(18);o.exports=Object.keys||function(M){return w(M,f)}},function(o,U,H){var w=H(19),f=H(1),M=H(3);o.exports=function(T,e){var a=(f.Object||{})[T]||Object[T],n={};n[T]=e(a),w(w.S+w.F*M(function(){a(1)}),"Object",n)}},function(o,U){o.exports=function(H,w){return{enumerable:!(1&H),configurable:!(2&H),writable:!(4&H),value:w}}},function(o,U,H){var w=H(30)("keys"),f=H(35);o.exports=function(M){return w[M]||(w[M]=f(M))}},function(o,U,H){var w=H(4),f="__core-js_shared__",M=w[f]||(w[f]={});o.exports=function(T){return M[T]||(M[T]={})}},function(o,U,H){var w=H(7),f=Math.max,M=Math.min;o.exports=function(T,e){return T=w(T),T<0?f(T+e,0):M(T,e)}},function(o,U,H){var w=H(7),f=Math.min;o.exports=function(M){return M>0?f(w(M),9007199254740991):0}},function(o,U,H){var w=H(6);o.exports=function(f){return Object(w(f))}},function(o,U,H){var w=H(5);o.exports=function(f,M){if(!w(f))return f;var T,e;if(M&&typeof(T=f.toString)=="function"&&!w(e=T.call(f))||typeof(T=f.valueOf)=="function"&&!w(e=T.call(f))||!M&&typeof(T=f.toString)=="function"&&!w(e=T.call(f)))return e;throw TypeError("Can't convert object to primitive value")}},function(o,U){var H=0,w=Math.random();o.exports=function(f){return"Symbol(".concat(f===void 0?"":f,")_",(++H+w).toString(36))}},function(o,U,H){var w=H(33),f=H(26);H(27)("keys",function(){return function(M){return f(w(M))}})},function(o,U){(function(H,w){function f(y){this.time=y.time,this.target=y.target,this.rootBounds=y.rootBounds,this.boundingClientRect=y.boundingClientRect,this.intersectionRect=y.intersectionRect||h(),this.isIntersecting=!!y.intersectionRect;var d=this.boundingClientRect,p=d.width*d.height,c=this.intersectionRect,m=c.width*c.height;p?this.intersectionRatio=m/p:this.intersectionRatio=this.isIntersecting?1:0}function M(y,d){var p=d||{};if(typeof y!="function")throw new Error("callback must be a function");if(p.root&&p.root.nodeType!=1)throw new Error("root must be an Element");this._checkForIntersections=e(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=y,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(p.rootMargin),this.thresholds=this._initThresholds(p.threshold),this.root=p.root||null,this.rootMargin=this._rootMarginValues.map(function(c){return c.value+c.unit}).join(" ")}function T(){return H.performance&&performance.now&&performance.now()}function e(y,d){var p=null;return function(){p||(p=setTimeout(function(){y(),p=null},d))}}function a(y,d,p,c){typeof y.addEventListener=="function"?y.addEventListener(d,p,c||!1):typeof y.attachEvent=="function"&&y.attachEvent("on"+d,p)}function n(y,d,p,c){typeof y.removeEventListener=="function"?y.removeEventListener(d,p,c||!1):typeof y.detatchEvent=="function"&&y.detatchEvent("on"+d,p)}function r(y,d){var p=Math.max(y.top,d.top),c=Math.min(y.bottom,d.bottom),m=Math.max(y.left,d.left),l=Math.min(y.right,d.right),x=l-m,u=c-p;return x>=0&&u>=0&&{top:p,bottom:c,left:m,right:l,width:x,height:u}}function t(y){var d;try{d=y.getBoundingClientRect()}catch{}return d?(d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d):h()}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function i(y,d){for(var p=d;p;){if(p==y)return!0;p=s(p)}return!1}function s(y){var d=y.parentNode;return d&&d.nodeType==11&&d.host?d.host:d}if("IntersectionObserver"in H&&"IntersectionObserverEntry"in H&&"intersectionRatio"in H.IntersectionObserverEntry.prototype)return void("isIntersecting"in H.IntersectionObserverEntry.prototype||Object.defineProperty(H.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));M.prototype.THROTTLE_TIMEOUT=100,M.prototype.POLL_INTERVAL=null,M.prototype.USE_MUTATION_OBSERVER=!0,M.prototype.observe=function(y){var d=this._observationTargets.some(function(p){return p.element==y});if(!d){if(!y||y.nodeType!=1)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:y,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},M.prototype.unobserve=function(y){this._observationTargets=this._observationTargets.filter(function(d){return d.element!=y}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},M.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},M.prototype.takeRecords=function(){var y=this._queuedEntries.slice();return this._queuedEntries=[],y},M.prototype._initThresholds=function(y){var d=y||[0];return Array.isArray(d)||(d=[d]),d.sort().filter(function(p,c,m){if(typeof p!="number"||isNaN(p)||p<0||p>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return p!==m[c-1]})},M.prototype._parseRootMargin=function(y){var d=y||"0px",p=d.split(/\s+/).map(function(c){var m=/^(-?\d*\.?\d+)(px|%)$/.exec(c);if(!m)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(m[1]),unit:m[2]}});return p[1]=p[1]||p[0],p[2]=p[2]||p[0],p[3]=p[3]||p[1],p},M.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(H,"resize",this._checkForIntersections,!0),a(w,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in H&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(w,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},M.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,n(H,"resize",this._checkForIntersections,!0),n(w,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},M.prototype._checkForIntersections=function(){var y=this._rootIsInDom(),d=y?this._getRootRect():h();this._observationTargets.forEach(function(p){var c=p.element,m=t(c),l=this._rootContainsTarget(c),x=p.entry,u=y&&l&&this._computeTargetAndRootIntersection(c,d),A=p.entry=new f({time:T(),target:c,boundingClientRect:m,rootBounds:d,intersectionRect:u});x?y&&l?this._hasCrossedThreshold(x,A)&&this._queuedEntries.push(A):x&&x.isIntersecting&&this._queuedEntries.push(A):this._queuedEntries.push(A)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},M.prototype._computeTargetAndRootIntersection=function(y,d){if(H.getComputedStyle(y).display!="none"){for(var p=t(y),c=p,m=s(y),l=!1;!l;){var x=null,u=m.nodeType==1?H.getComputedStyle(m):{};if(u.display=="none")return;if(m==this.root||m==w?(l=!0,x=d):m!=w.body&&m!=w.documentElement&&u.overflow!="visible"&&(x=t(m)),x&&(c=r(x,c),!c))break;m=s(m)}return c}},M.prototype._getRootRect=function(){var y;if(this.root)y=t(this.root);else{var d=w.documentElement,p=w.body;y={top:0,left:0,right:d.clientWidth||p.clientWidth,width:d.clientWidth||p.clientWidth,bottom:d.clientHeight||p.clientHeight,height:d.clientHeight||p.clientHeight}}return this._expandRectByRootMargin(y)},M.prototype._expandRectByRootMargin=function(y){var d=this._rootMarginValues.map(function(c,m){return c.unit=="px"?c.value:c.value*(m%2?y.width:y.height)/100}),p={top:y.top-d[0],right:y.right+d[1],bottom:y.bottom+d[2],left:y.left-d[3]};return p.width=p.right-p.left,p.height=p.bottom-p.top,p},M.prototype._hasCrossedThreshold=function(y,d){var p=y&&y.isIntersecting?y.intersectionRatio||0:-1,c=d.isIntersecting?d.intersectionRatio||0:-1;if(p!==c)for(var m=0;m<this.thresholds.length;m++){var l=this.thresholds[m];if(l==p||l==c||l<p!=l<c)return!0}},M.prototype._rootIsInDom=function(){return!this.root||i(w,this.root)},M.prototype._rootContainsTarget=function(y){return i(this.root||w,y)},M.prototype._registerInstance=function(){},M.prototype._unregisterInstance=function(){},H.IntersectionObserver=M,H.IntersectionObserverEntry=f})(window,document)},function(o,U){o.exports=qe},function(o,U){o.exports=Xe}])})},"428f":function(Ke,ut,Ce){var qe=Ce("da84");Ke.exports=qe},"44ad":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("d039"),o=Ce("c6b6"),U=Object,H=qe("".split);Ke.exports=Xe(function(){return!U("z").propertyIsEnumerable(0)})?function(w){return o(w)=="String"?H(w,""):U(w)}:U},"485a":function(Ke,ut,Ce){var qe=Ce("c65b"),Xe=Ce("1626"),o=Ce("861d"),U=TypeError;Ke.exports=function(H,w){var f,M;if(w==="string"&&Xe(f=H.toString)&&!o(M=qe(f,H))||Xe(f=H.valueOf)&&!o(M=qe(f,H))||w!=="string"&&Xe(f=H.toString)&&!o(M=qe(f,H)))return M;throw U("Can't convert object to primitive value")}},"4d64":function(Ke,ut,Ce){var qe=Ce("fc6a"),Xe=Ce("23cb"),o=Ce("07fa"),U=function(H){return function(w,f,M){var T=qe(w),e=o(T),a=Xe(M,e),n;if(H&&f!=f){for(;e>a;)if(n=T[a++],n!=n)return!0}else for(;e>a;a++)if((H||a in T)&&T[a]===f)return H||a||0;return!H&&-1}};Ke.exports={includes:U(!0),indexOf:U(!1)}},"4dae":function(Ke,ut,Ce){var qe=Ce("23cb"),Xe=Ce("07fa"),o=Ce("8418"),U=Array,H=Math.max;Ke.exports=function(w,f,M){for(var T=Xe(w),e=qe(f,T),a=qe(M===void 0?T:M,T),n=U(H(a-e,0)),r=0;e<a;e++,r++)o(n,r,w[e]);return n.length=r,n}},"4de4":function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("b727").filter,o=Ce("1dde"),U=o("filter");qe({target:"Array",proto:!0,forced:!U},{filter:function(w){return Xe(this,w,arguments.length>1?arguments[1]:void 0)}})},"50c4":function(Ke,ut,Ce){var qe=Ce("5926"),Xe=Math.min;Ke.exports=function(o){return o>0?Xe(qe(o),9007199254740991):0}},5319:function(Ke,ut,Ce){var qe=Ce("2ba4"),Xe=Ce("c65b"),o=Ce("e330"),U=Ce("d784"),H=Ce("d039"),w=Ce("825a"),f=Ce("1626"),M=Ce("7234"),T=Ce("5926"),e=Ce("50c4"),a=Ce("577e"),n=Ce("1d80"),r=Ce("8aa5"),t=Ce("dc4a"),h=Ce("0cb2"),i=Ce("14c3"),s=Ce("b622"),y=s("replace"),d=Math.max,p=Math.min,c=o([].concat),m=o([].push),l=o("".indexOf),x=o("".slice),u=function(b){return b===void 0?b:String(b)},A=function(){return"a".replace(/./,"$0")==="$0"}(),_=function(){return/./[y]?/./[y]("a","$0")==="":!1}(),g=!H(function(){var b=/./;return b.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(b,"$<a>")!=="7"});U("replace",function(b,v,C){var S=_?"$":"$0";return[function(E,F){var I=n(this),D=M(E)?void 0:t(E,y);return D?Xe(D,E,I,F):Xe(v,a(I),E,F)},function(k,E){var F=w(this),I=a(k);if(typeof E=="string"&&l(E,S)===-1&&l(E,"$<")===-1){var D=C(v,F,I,E);if(D.done)return D.value}var R=f(E);R||(E=a(E));var O=F.global;if(O){var z=F.unicode;F.lastIndex=0}for(var B=[];;){var G=i(F,I);if(G===null||(m(B,G),!O))break;var Q=a(G[0]);Q===""&&(F.lastIndex=r(I,e(F.lastIndex),z))}for(var X="",j=0,re=0;re<B.length;re++){G=B[re];for(var ue=a(G[0]),K=d(p(T(G.index),I.length),0),te=[],Y=1;Y<G.length;Y++)m(te,u(G[Y]));var V=G.groups;if(R){var ee=c([ue],te,K,I);V!==void 0&&m(ee,V);var ne=a(qe(E,void 0,ee))}else ne=h(ue,I,K,te,V,E);K>=j&&(X+=x(I,j,K)+ne,j=K+ue.length)}return X+x(I,j)}]},!g||!A||_)},5692:function(Ke,ut,Ce){var qe=Ce("c430"),Xe=Ce("c6cd");(Ke.exports=function(o,U){return Xe[o]||(Xe[o]=U!==void 0?U:{})})("versions",[]).push({version:"3.26.0",mode:qe?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(Ke,ut,Ce){var qe=Ce("d066"),Xe=Ce("e330"),o=Ce("241c"),U=Ce("7418"),H=Ce("825a"),w=Xe([].concat);Ke.exports=qe("Reflect","ownKeys")||function(M){var T=o.f(H(M)),e=U.f;return e?w(T,e(M)):T}},"577e":function(Ke,ut,Ce){var qe=Ce("f5df"),Xe=String;Ke.exports=function(o){if(qe(o)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Xe(o)}},"57b9":function(Ke,ut,Ce){var qe=Ce("c65b"),Xe=Ce("d066"),o=Ce("b622"),U=Ce("cb2d");Ke.exports=function(){var H=Xe("Symbol"),w=H&&H.prototype,f=w&&w.valueOf,M=o("toPrimitive");w&&!w[M]&&U(w,M,function(T){return qe(f,this)},{arity:1})}},5926:function(Ke,ut,Ce){var qe=Ce("b42e");Ke.exports=function(Xe){var o=+Xe;return o!==o||o===0?0:qe(o)}},"59ed":function(Ke,ut,Ce){var qe=Ce("1626"),Xe=Ce("0d51"),o=TypeError;Ke.exports=function(U){if(qe(U))return U;throw o(Xe(U)+" is not a function")}},"5a47":function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("04f8"),o=Ce("d039"),U=Ce("7418"),H=Ce("7b0b"),w=!Xe||o(function(){U.f(1)});qe({target:"Object",stat:!0,forced:w},{getOwnPropertySymbols:function(M){var T=U.f;return T?T(H(M)):[]}})},"5c6c":function(Ke,ut){Ke.exports=function(Ce,qe){return{enumerable:!(Ce&1),configurable:!(Ce&2),writable:!(Ce&4),value:qe}}},"5e77":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("1a2d"),o=Function.prototype,U=qe&&Object.getOwnPropertyDescriptor,H=Xe(o,"name"),w=H&&function(){}.name==="something",f=H&&(!qe||qe&&U(o,"name").configurable);Ke.exports={EXISTS:H,PROPER:w,CONFIGURABLE:f}},"605d":function(Ke,ut,Ce){var qe=Ce("c6b6"),Xe=Ce("da84");Ke.exports=qe(Xe.process)=="process"},"60da":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("e330"),o=Ce("c65b"),U=Ce("d039"),H=Ce("df75"),w=Ce("7418"),f=Ce("d1e7"),M=Ce("7b0b"),T=Ce("44ad"),e=Object.assign,a=Object.defineProperty,n=Xe([].concat);Ke.exports=!e||U(function(){if(qe&&e({b:1},e(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},t={},h=Symbol(),i="abcdefghijklmnopqrst";return r[h]=7,i.split("").forEach(function(s){t[s]=s}),e({},r)[h]!=7||H(e({},t)).join("")!=i})?function(t,h){for(var i=M(t),s=arguments.length,y=1,d=w.f,p=f.f;s>y;)for(var c=T(arguments[y++]),m=d?n(H(c),d(c)):H(c),l=m.length,x=0,u;l>x;)u=m[x++],(!qe||o(p,c,u))&&(i[u]=c[u]);return i}:e},"61cc":function(Ke,ut,Ce){(function(qe){var Xe,Xe;(function(o){Ke.exports=o()})(function(){return function(){function o(U,H,w){function f(e,a){if(!H[e]){if(!U[e]){var n=typeof Xe=="function"&&Xe;if(!a&&n)return Xe(e,!0);if(M)return M(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var t=H[e]={exports:{}};U[e][0].call(t.exports,function(h){var i=U[e][1][h];return f(i||h)},t,t.exports,o,U,H,w)}return H[e].exports}for(var M=typeof Xe=="function"&&Xe,T=0;T<w.length;T++)f(w[T]);return f}return o}()({1:[function(o,U,H){var w=o("../src/lib"),f={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in f){var T=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");w.addStyleRule(T,f[M])}},{"../src/lib":515}],2:[function(o,U,H){U.exports=o("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(o,U,H){U.exports=o("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(o,U,H){U.exports=o("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(o,U,H){U.exports=o("../src/traces/box")},{"../src/traces/box":688}],6:[function(o,U,H){U.exports=o("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(o,U,H){U.exports=o("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(o,U,H){U.exports=o("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(o,U,H){U.exports=o("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(o,U,H){U.exports=o("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(o,U,H){U.exports=o("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(o,U,H){U.exports=o("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(o,U,H){U.exports=o("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(o,U,H){U.exports=o("../src/core")},{"../src/core":493}],15:[function(o,U,H){U.exports=o("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(o,U,H){U.exports=o("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(o,U,H){U.exports=o("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(o,U,H){U.exports=o("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(o,U,H){U.exports=o("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(o,U,H){U.exports=o("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(o,U,H){U.exports=o("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(o,U,H){U.exports=o("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(o,U,H){U.exports=o("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(o,U,H){U.exports=o("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(o,U,H){U.exports=o("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(o,U,H){U.exports=o("../src/traces/image")},{"../src/traces/image":861}],27:[function(o,U,H){var w=o("./core");w.register([o("./bar"),o("./box"),o("./heatmap"),o("./histogram"),o("./histogram2d"),o("./histogram2dcontour"),o("./contour"),o("./scatterternary"),o("./violin"),o("./funnel"),o("./waterfall"),o("./image"),o("./pie"),o("./sunburst"),o("./treemap"),o("./icicle"),o("./funnelarea"),o("./scatter3d"),o("./surface"),o("./isosurface"),o("./volume"),o("./mesh3d"),o("./cone"),o("./streamtube"),o("./scattergeo"),o("./choropleth"),o("./scattergl"),o("./splom"),o("./pointcloud"),o("./heatmapgl"),o("./parcoords"),o("./parcats"),o("./scattermapbox"),o("./choroplethmapbox"),o("./densitymapbox"),o("./sankey"),o("./indicator"),o("./table"),o("./carpet"),o("./scattercarpet"),o("./contourcarpet"),o("./ohlc"),o("./candlestick"),o("./scatterpolar"),o("./scatterpolargl"),o("./barpolar"),o("./scattersmith"),o("./aggregate"),o("./filter"),o("./groupby"),o("./sort"),o("./calendars")]),U.exports=w},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(o,U,H){U.exports=o("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(o,U,H){U.exports=o("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(o,U,H){U.exports=o("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(o,U,H){U.exports=o("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(o,U,H){U.exports=o("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(o,U,H){U.exports=o("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(o,U,H){U.exports=o("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(o,U,H){U.exports=o("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(o,U,H){U.exports=o("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(o,U,H){U.exports=o("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(o,U,H){U.exports=o("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(o,U,H){U.exports=o("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(o,U,H){U.exports=o("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(o,U,H){U.exports=o("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(o,U,H){U.exports=o("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(o,U,H){U.exports=o("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(o,U,H){U.exports=o("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(o,U,H){U.exports=o("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(o,U,H){U.exports=o("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(o,U,H){U.exports=o("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(o,U,H){U.exports=o("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(o,U,H){U.exports=o("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(o,U,H){U.exports=o("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(o,U,H){U.exports=o("../src/traces/table")},{"../src/traces/table":1082}],52:[function(o,U,H){U.exports=o("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(o,U,H){U.exports=o("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(o,U,H){U.exports=o("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(o,U,H){U.exports=o("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-array"),o("d3-collection"),o("d3-shape"),o("elementary-circuits-directed-graph")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3,null)})(this,function(w,f,M,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(ce){return ce.target.depth}function n(ce){return ce.depth}function r(ce,de){return de-1-ce.height}function t(ce,de){return ce.sourceLinks.length?ce.depth:de-1}function h(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?f.min(ce.sourceLinks,a)-1:0}function i(ce){return function(){return ce}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function y(ce,de){return p(ce.source,de.source)||ce.index-de.index}function d(ce,de){return p(ce.target,de.target)||ce.index-de.index}function p(ce,de){return ce.partOfCycle===de.partOfCycle?ce.y0-de.y0:ce.circularLinkType==="top"||de.circularLinkType==="bottom"?-1:1}function c(ce){return ce.value}function m(ce){return(ce.y0+ce.y1)/2}function l(ce){return m(ce.source)}function x(ce){return m(ce.target)}function u(ce){return ce.index}function A(ce){return ce.nodes}function _(ce){return ce.links}function g(ce,de){var ye=ce.get(de);if(!ye)throw new Error("missing: "+de);return ye}function b(ce,de){return de(ce)}var v=25,C=10,S=.3;function k(){var ce=0,de=0,ye=1,ge=1,me=24,Me,Le=u,Oe=t,_e=A,Ee=_,Ze=32,Ge=2,Fe,Re=null;function We(){var Lt={nodes:_e.apply(null,arguments),links:Ee.apply(null,arguments)};xt(Lt),E(Lt,Le,Re),Nt(Lt),Pt(Lt),F(Lt,Le),$t(Lt,Ze,Le),Ut(Lt);for(var Ye=4,ot=0;ot<Ye;ot++)q(Lt,ge,Le),ie(Lt,ge,Le),ee(Lt,de,ge,Le),q(Lt,ge,Le),ie(Lt,ge,Le);return be(Lt,de,ge),B(Lt,Ge,ge,Le),Lt}We.nodeId=function(Lt){return arguments.length?(Le=typeof Lt=="function"?Lt:i(Lt),We):Le},We.nodeAlign=function(Lt){return arguments.length?(Oe=typeof Lt=="function"?Lt:i(Lt),We):Oe},We.nodeWidth=function(Lt){return arguments.length?(me=+Lt,We):me},We.nodePadding=function(Lt){return arguments.length?(Me=+Lt,We):Me},We.nodes=function(Lt){return arguments.length?(_e=typeof Lt=="function"?Lt:i(Lt),We):_e},We.links=function(Lt){return arguments.length?(Ee=typeof Lt=="function"?Lt:i(Lt),We):Ee},We.size=function(Lt){return arguments.length?(ce=de=0,ye=+Lt[0],ge=+Lt[1],We):[ye-ce,ge-de]},We.extent=function(Lt){return arguments.length?(ce=+Lt[0][0],ye=+Lt[1][0],de=+Lt[0][1],ge=+Lt[1][1],We):[[ce,de],[ye,ge]]},We.iterations=function(Lt){return arguments.length?(Ze=+Lt,We):Ze},We.circularLinkGap=function(Lt){return arguments.length?(Ge=+Lt,We):Ge},We.nodePaddingRatio=function(Lt){return arguments.length?(Fe=+Lt,We):Fe},We.sortNodes=function(Lt){return arguments.length?(Re=Lt,We):Re},We.update=function(Lt){return F(Lt,Le),Ut(Lt),Lt.links.forEach(function(Ye){Ye.circular&&(Ye.circularLinkType=Ye.y0+Ye.y1<ge?"top":"bottom",Ye.source.circularLinkType=Ye.circularLinkType,Ye.target.circularLinkType=Ye.circularLinkType)}),q(Lt,ge,Le,!1),ie(Lt,ge,Le),B(Lt,Ge,ge,Le),Lt};function xt(Lt){Lt.nodes.forEach(function(ot,Ve){ot.index=Ve,ot.sourceLinks=[],ot.targetLinks=[]});var Ye=M.map(Lt.nodes,Le);return Lt.links.forEach(function(ot,Ve){ot.index=Ve;var Ae=ot.source,He=ot.target;(typeof Ae>"u"?"undefined":s(Ae))!=="object"&&(Ae=ot.source=g(Ye,Ae)),(typeof He>"u"?"undefined":s(He))!=="object"&&(He=ot.target=g(Ye,He)),Ae.sourceLinks.push(ot),He.targetLinks.push(ot)}),Lt}function Nt(Lt){Lt.nodes.forEach(function(Ye){Ye.partOfCycle=!1,Ye.value=Math.max(f.sum(Ye.sourceLinks,c),f.sum(Ye.targetLinks,c)),Ye.sourceLinks.forEach(function(ot){ot.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=ot.circularLinkType)}),Ye.targetLinks.forEach(function(ot){ot.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=ot.circularLinkType)})})}function tr(Lt){var Ye=0,ot=0,Ve=0,Ae=0,He=f.max(Lt.nodes,function(Je){return Je.column});return Lt.links.forEach(function(Je){Je.circular&&(Je.circularLinkType=="top"?Ye=Ye+Je.width:ot=ot+Je.width,Je.target.column==0&&(Ae=Ae+Je.width),Je.source.column==He&&(Ve=Ve+Je.width))}),Ye=Ye>0?Ye+v+C:Ye,ot=ot>0?ot+v+C:ot,Ve=Ve>0?Ve+v+C:Ve,Ae=Ae>0?Ae+v+C:Ae,{top:Ye,bottom:ot,left:Ae,right:Ve}}function Vt(Lt,Ye){var ot=f.max(Lt.nodes,function(_t){return _t.column}),Ve=ye-ce,Ae=ge-de,He=Ve+Ye.right+Ye.left,Je=Ae+Ye.top+Ye.bottom,tt=Ve/He,St=Ae/Je;return ce=ce*tt+Ye.left,ye=Ye.right==0?ye:ye*tt,de=de*St+Ye.top,ge=ge*St,Lt.nodes.forEach(function(_t){_t.x0=ce+_t.column*((ye-ce-me)/ot),_t.x1=_t.x0+me}),St}function Pt(Lt){var Ye,ot,Ve;for(Ye=Lt.nodes,ot=[],Ve=0;Ye.length;++Ve,Ye=ot,ot=[])Ye.forEach(function(Ae){Ae.depth=Ve,Ae.sourceLinks.forEach(function(He){ot.indexOf(He.target)<0&&!He.circular&&ot.push(He.target)})});for(Ye=Lt.nodes,ot=[],Ve=0;Ye.length;++Ve,Ye=ot,ot=[])Ye.forEach(function(Ae){Ae.height=Ve,Ae.targetLinks.forEach(function(He){ot.indexOf(He.source)<0&&!He.circular&&ot.push(He.source)})});Lt.nodes.forEach(function(Ae){Ae.column=Math.floor(Oe.call(null,Ae,Ve))})}function $t(Lt,Ye,ot){var Ve=M.nest().key(function(_t){return _t.column}).sortKeys(f.ascending).entries(Lt.nodes).map(function(_t){return _t.values});Je(ot),St();for(var Ae=1,He=Ye;He>0;--He)tt(Ae*=.99,ot),St();function Je(_t){if(Fe){var kt=1/0;Ve.forEach(function(Qt){var Zt=ge*Fe/(Qt.length+1);kt=Zt<kt?Zt:kt}),Me=kt}var jt=f.min(Ve,function(Qt){return(ge-de-(Qt.length-1)*Me)/f.sum(Qt,c)});jt=jt*S,Lt.links.forEach(function(Qt){Qt.width=Qt.value*jt});var Bt=tr(Lt),Wt=Vt(Lt,Bt);jt=jt*Wt,Lt.links.forEach(function(Qt){Qt.width=Qt.value*jt}),Ve.forEach(function(Qt){var Zt=Qt.length;Qt.forEach(function(cr,Xr){cr.depth==Ve.length-1&&Zt==1||cr.depth==0&&Zt==1?(cr.y0=ge/2-cr.value*jt,cr.y1=cr.y0+cr.value*jt):cr.partOfCycle?R(cr,_t)==0?(cr.y0=ge/2+Xr,cr.y1=cr.y0+cr.value*jt):cr.circularLinkType=="top"?(cr.y0=de+Xr,cr.y1=cr.y0+cr.value*jt):(cr.y0=ge-cr.value*jt-Xr,cr.y1=cr.y0+cr.value*jt):Bt.top==0||Bt.bottom==0?(cr.y0=(ge-de)/Zt*Xr,cr.y1=cr.y0+cr.value*jt):(cr.y0=(ge-de)/2-Zt/2+Xr,cr.y1=cr.y0+cr.value*jt)})})}function tt(_t,kt){var jt=Ve.length;Ve.forEach(function(Bt){var Wt=Bt.length,Qt=Bt[0].depth;Bt.forEach(function(Zt){var cr;if((Zt.sourceLinks.length||Zt.targetLinks.length)&&!(Zt.partOfCycle&&R(Zt,kt)>0))if(Qt==0&&Wt==1)cr=Zt.y1-Zt.y0,Zt.y0=ge/2-cr/2,Zt.y1=ge/2+cr/2;else if(Qt==jt-1&&Wt==1)cr=Zt.y1-Zt.y0,Zt.y0=ge/2-cr/2,Zt.y1=ge/2+cr/2;else{var Xr=0,vn=f.mean(Zt.sourceLinks,x),en=f.mean(Zt.targetLinks,l);vn&&en?Xr=(vn+en)/2:Xr=vn||en;var ft=(Xr-m(Zt))*_t;Zt.y0+=ft,Zt.y1+=ft}})})}function St(){Ve.forEach(function(_t){var kt,jt,Bt=de,Wt=_t.length,Qt;for(_t.sort(p),Qt=0;Qt<Wt;++Qt)kt=_t[Qt],jt=Bt-kt.y0,jt>0&&(kt.y0+=jt,kt.y1+=jt),Bt=kt.y1+Me;if(jt=Bt-Me-ge,jt>0)for(Bt=kt.y0-=jt,kt.y1-=jt,Qt=Wt-2;Qt>=0;--Qt)kt=_t[Qt],jt=kt.y1+Me-Bt,jt>0&&(kt.y0-=jt,kt.y1-=jt),Bt=kt.y0})}}function Ut(Lt){Lt.nodes.forEach(function(Ye){Ye.sourceLinks.sort(d),Ye.targetLinks.sort(y)}),Lt.nodes.forEach(function(Ye){var ot=Ye.y0,Ve=ot,Ae=Ye.y1,He=Ae;Ye.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=Ae-Je.width/2,Ae=Ae-Je.width):(Je.y0=ot+Je.width/2,ot+=Je.width)}),Ye.targetLinks.forEach(function(Je){Je.circular?(Je.y1=He-Je.width/2,He=He-Je.width):(Je.y1=Ve+Je.width/2,Ve+=Je.width)})})}return We}function E(ce,de,ye){var ge=0;if(ye===null){for(var me=[],Me=0;Me<ce.links.length;Me++){var Le=ce.links[Me],Oe=Le.source.index,_e=Le.target.index;me[Oe]||(me[Oe]=[]),me[_e]||(me[_e]=[]),me[Oe].indexOf(_e)===-1&&me[Oe].push(_e)}var Ee=e(me);Ee.sort(function(Re,We){return Re.length-We.length});var Ze={};for(Me=0;Me<Ee.length;Me++){var Ge=Ee[Me],Fe=Ge.slice(-2);Ze[Fe[0]]||(Ze[Fe[0]]={}),Ze[Fe[0]][Fe[1]]=!0}ce.links.forEach(function(Re){var We=Re.target.index,xt=Re.source.index;We===xt||Ze[xt]&&Ze[xt][We]?(Re.circular=!0,Re.circularLinkID=ge,ge=ge+1):Re.circular=!1})}else ce.links.forEach(function(Re){Re.source[ye]<Re.target[ye]?Re.circular=!1:(Re.circular=!0,Re.circularLinkID=ge,ge=ge+1)})}function F(ce,de){var ye=0,ge=0;ce.links.forEach(function(me){me.circular&&(me.source.circularLinkType||me.target.circularLinkType?me.circularLinkType=me.source.circularLinkType?me.source.circularLinkType:me.target.circularLinkType:me.circularLinkType=ye<ge?"top":"bottom",me.circularLinkType=="top"?ye=ye+1:ge=ge+1,ce.nodes.forEach(function(Me){(b(Me,de)==b(me.source,de)||b(Me,de)==b(me.target,de))&&(Me.circularLinkType=me.circularLinkType)}))}),ce.links.forEach(function(me){me.circular&&(me.source.circularLinkType==me.target.circularLinkType&&(me.circularLinkType=me.source.circularLinkType),oe(me,de)&&(me.circularLinkType=me.source.circularLinkType))})}function I(ce){var de=Math.abs(ce.y1-ce.y0),ye=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(ye/de)}function D(ce,de){return ce.source.column<de.target.column?!1:!(ce.target.column>de.source.column)}function R(ce,de){var ye=0;ce.sourceLinks.forEach(function(me){ye=me.circular&&!oe(me,de)?ye+1:ye});var ge=0;return ce.targetLinks.forEach(function(me){ge=me.circular&&!oe(me,de)?ge+1:ge}),ye+ge}function O(ce){var de=ce.source.sourceLinks,ye=0;de.forEach(function(Me){ye=Me.circular?ye+1:ye});var ge=ce.target.targetLinks,me=0;return ge.forEach(function(Me){me=Me.circular?me+1:me}),!(ye>1||me>1)}function z(ce,de,ye){return ce.sort(Q),ce.forEach(function(ge,me){var Me=0;if(oe(ge,ye)&&O(ge))ge.circularPathData.verticalBuffer=Me+ge.width/2;else{var Le=0;for(Le;Le<me;Le++)if(D(ce[me],ce[Le])){var Oe=ce[Le].circularPathData.verticalBuffer+ce[Le].width/2+de;Me=Oe>Me?Oe:Me}ge.circularPathData.verticalBuffer=Me+ge.width/2}}),ce}function B(ce,de,ye,ge){var me=5,Me=f.min(ce.links,function(_e){return _e.source.y0});ce.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var Le=ce.links.filter(function(_e){return _e.circularLinkType=="top"});z(Le,de,ge);var Oe=ce.links.filter(function(_e){return _e.circularLinkType=="bottom"});z(Oe,de,ge),ce.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+C,_e.circularPathData.leftNodeBuffer=me,_e.circularPathData.rightNodeBuffer=me,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,oe(_e,ge)&&O(_e))_e.circularPathData.leftSmallArcRadius=C+_e.width/2,_e.circularPathData.leftLargeArcRadius=C+_e.width/2,_e.circularPathData.rightSmallArcRadius=C+_e.width/2,_e.circularPathData.rightLargeArcRadius=C+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var Ee=_e.source.column,Ze=_e.circularLinkType,Ge=ce.links.filter(function(We){return We.source.column==Ee&&We.circularLinkType==Ze});_e.circularLinkType=="bottom"?Ge.sort(j):Ge.sort(X);var Fe=0;Ge.forEach(function(We,xt){We.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=C+_e.width/2+Fe,_e.circularPathData.leftLargeArcRadius=C+_e.width/2+xt*de+Fe),Fe=Fe+We.width}),Ee=_e.target.column,Ge=ce.links.filter(function(We){return We.target.column==Ee&&We.circularLinkType==Ze}),_e.circularLinkType=="bottom"?Ge.sort(ue):Ge.sort(re),Fe=0,Ge.forEach(function(We,xt){We.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=C+_e.width/2+Fe,_e.circularPathData.rightLargeArcRadius=C+_e.width/2+xt*de+Fe),Fe=Fe+We.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(ye,_e.source.y1,_e.target.y1)+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Me-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=G(_e);else{var Re=T.linkHorizontal().source(function(We){var xt=We.source.x0+(We.source.x1-We.source.x0),Nt=We.y0;return[xt,Nt]}).target(function(We){var xt=We.target.x0,Nt=We.y1;return[xt,Nt]});_e.path=Re(_e)}})}function G(ce){var de="";return ce.circularLinkType=="top"?de="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:de="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,de}function Q(ce,de){return K(ce)==K(de)?ce.circularLinkType=="bottom"?j(ce,de):X(ce,de):K(de)-K(ce)}function X(ce,de){return ce.y0-de.y0}function j(ce,de){return de.y0-ce.y0}function re(ce,de){return ce.y1-de.y1}function ue(ce,de){return de.y1-ce.y1}function K(ce){return ce.target.column-ce.source.column}function te(ce){return ce.target.x0-ce.source.x1}function Y(ce,de){var ye=I(ce),ge=te(de)/Math.tan(ye),me=ae(ce)=="up"?ce.y1+ge:ce.y1-ge;return me}function V(ce,de){var ye=I(ce),ge=te(de)/Math.tan(ye),me=ae(ce)=="up"?ce.y1-ge:ce.y1+ge;return me}function ee(ce,de,ye,ge){ce.links.forEach(function(me){if(!me.circular&&me.target.column-me.source.column>1){var Me=me.source.column+1,Le=me.target.column-1,Oe=1,_e=Le-Me+1;for(Oe=1;Me<=Le;Me++,Oe++)ce.nodes.forEach(function(Ee){if(Ee.column==Me){var Ze=Oe/(_e+1),Ge=Math.pow(1-Ze,3),Fe=3*Ze*Math.pow(1-Ze,2),Re=3*Math.pow(Ze,2)*(1-Ze),We=Math.pow(Ze,3),xt=Ge*me.y0+Fe*me.y0+Re*me.y1+We*me.y1,Nt=xt-me.width/2,tr=xt+me.width/2,Vt;Nt>Ee.y0&&Nt<Ee.y1?(Vt=Ee.y1-Nt+10,Vt=Ee.circularLinkType=="bottom"?Vt:-Vt,Ee=Z(Ee,Vt,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ee,ge)||Pt.column!=Ee.column||ne(Ee,Pt)&&Z(Pt,Vt,de,ye)})):tr>Ee.y0&&tr<Ee.y1?(Vt=tr-Ee.y0+10,Ee=Z(Ee,Vt,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ee,ge)||Pt.column!=Ee.column||Pt.y0<Ee.y1&&Pt.y1>Ee.y1&&Z(Pt,Vt,de,ye)})):Nt<Ee.y0&&tr>Ee.y1&&(Vt=tr-Ee.y0+10,Ee=Z(Ee,Vt,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ee,ge)||Pt.column!=Ee.column||Pt.y0<Ee.y1&&Pt.y1>Ee.y1&&Z(Pt,Vt,de,ye)}))}})}})}function ne(ce,de){return ce.y0>de.y0&&ce.y0<de.y1||ce.y1>de.y0&&ce.y1<de.y1?!0:ce.y0<de.y0&&ce.y1>de.y1}function Z(ce,de,ye,ge){return ce.y0+de>=ye&&ce.y1+de<=ge&&(ce.y0=ce.y0+de,ce.y1=ce.y1+de,ce.targetLinks.forEach(function(me){me.y1=me.y1+de}),ce.sourceLinks.forEach(function(me){me.y0=me.y0+de})),ce}function q(ce,de,ye,ge){ce.nodes.forEach(function(me){ge&&me.y+(me.y1-me.y0)>de&&(me.y=me.y-(me.y+(me.y1-me.y0)-de));var Me=ce.links.filter(function(_e){return b(_e.source,ye)==b(me,ye)}),Le=Me.length;Le>1&&Me.sort(function(_e,Ee){if(!_e.circular&&!Ee.circular){if(_e.target.column==Ee.target.column)return _e.y1-Ee.y1;if(se(_e,Ee)){if(_e.target.column>Ee.target.column){var Ze=V(Ee,_e);return _e.y1-Ze}if(Ee.target.column>_e.target.column){var Ge=V(_e,Ee);return Ge-Ee.y1}}else return _e.y1-Ee.y1}if(_e.circular&&!Ee.circular)return _e.circularLinkType=="top"?-1:1;if(Ee.circular&&!_e.circular)return Ee.circularLinkType=="top"?1:-1;if(_e.circular&&Ee.circular)return _e.circularLinkType===Ee.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===Ee.target.column?_e.target.y1-Ee.target.y1:Ee.target.column-_e.target.column:_e.circularLinkType===Ee.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===Ee.target.column?Ee.target.y1-_e.target.y1:_e.target.column-Ee.target.column:_e.circularLinkType=="top"?-1:1});var Oe=me.y0;Me.forEach(function(_e){_e.y0=Oe+_e.width/2,Oe=Oe+_e.width}),Me.forEach(function(_e,Ee){if(_e.circularLinkType=="bottom"){var Ze=Ee+1,Ge=0;for(Ze;Ze<Le;Ze++)Ge=Ge+Me[Ze].width;_e.y0=me.y1-Ge-_e.width/2}})})}function ie(ce,de,ye){ce.nodes.forEach(function(ge){var me=ce.links.filter(function(Oe){return b(Oe.target,ye)==b(ge,ye)}),Me=me.length;Me>1&&me.sort(function(Oe,_e){if(!Oe.circular&&!_e.circular){if(Oe.source.column==_e.source.column)return Oe.y0-_e.y0;if(se(Oe,_e)){if(_e.source.column<Oe.source.column){var Ee=Y(_e,Oe);return Oe.y0-Ee}if(Oe.source.column<_e.source.column){var Ze=Y(Oe,_e);return Ze-_e.y0}}else return Oe.y0-_e.y0}if(Oe.circular&&!_e.circular)return Oe.circularLinkType=="top"?-1:1;if(_e.circular&&!Oe.circular)return _e.circularLinkType=="top"?1:-1;if(Oe.circular&&_e.circular)return Oe.circularLinkType===_e.circularLinkType&&Oe.circularLinkType=="top"?Oe.source.column===_e.source.column?Oe.source.y1-_e.source.y1:Oe.source.column-_e.source.column:Oe.circularLinkType===_e.circularLinkType&&Oe.circularLinkType=="bottom"?Oe.source.column===_e.source.column?Oe.source.y1-_e.source.y1:_e.source.column-Oe.source.column:Oe.circularLinkType=="top"?-1:1});var Le=ge.y0;me.forEach(function(Oe){Oe.y1=Le+Oe.width/2,Le=Le+Oe.width}),me.forEach(function(Oe,_e){if(Oe.circularLinkType=="bottom"){var Ee=_e+1,Ze=0;for(Ee;Ee<Me;Ee++)Ze=Ze+me[Ee].width;Oe.y1=ge.y1-Ze-Oe.width/2}})})}function se(ce,de){return ae(ce)==ae(de)}function ae(ce){return ce.y0-ce.y1>0?"up":"down"}function oe(ce,de){return b(ce.source,de)==b(ce.target,de)}function be(ce,de,ye){var ge=ce.nodes,me=ce.links,Me=!1,Le=!1;if(me.forEach(function(Fe){Fe.circularLinkType=="top"?Me=!0:Fe.circularLinkType=="bottom"&&(Le=!0)}),Me==!1||Le==!1){var Oe=f.min(ge,function(Fe){return Fe.y0}),_e=f.max(ge,function(Fe){return Fe.y1}),Ee=_e-Oe,Ze=ye-de,Ge=Ze/Ee;ge.forEach(function(Fe){var Re=(Fe.y1-Fe.y0)*Ge;Fe.y0=(Fe.y0-Oe)*Ge,Fe.y1=Fe.y0+Re}),me.forEach(function(Fe){Fe.y0=(Fe.y0-Oe)*Ge,Fe.y1=(Fe.y1-Oe)*Ge,Fe.width=Fe.width*Ge})}}w.sankeyCircular=k,w.sankeyCenter=h,w.sankeyLeft=n,w.sankeyRight=r,w.sankeyJustify=t,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-array"),o("d3-collection"),o("d3-shape")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3)})(this,function(w,f,M,T){function e(C){return C.target.depth}function a(C){return C.depth}function n(C,S){return S-1-C.height}function r(C,S){return C.sourceLinks.length?C.depth:S-1}function t(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?f.min(C.sourceLinks,e)-1:0}function h(C){return function(){return C}}function i(C,S){return y(C.source,S.source)||C.index-S.index}function s(C,S){return y(C.target,S.target)||C.index-S.index}function y(C,S){return C.y0-S.y0}function d(C){return C.value}function p(C){return(C.y0+C.y1)/2}function c(C){return p(C.source)*C.value}function m(C){return p(C.target)*C.value}function l(C){return C.index}function x(C){return C.nodes}function u(C){return C.links}function A(C,S){var k=C.get(S);if(!k)throw new Error("missing: "+S);return k}var _=function(){var C=0,S=0,k=1,E=1,F=24,I=8,D=l,R=r,O=x,z=u,B=32,G=2/3;function Q(){var te={nodes:O.apply(null,arguments),links:z.apply(null,arguments)};return X(te),j(te),re(te),ue(te),K(te),te}Q.update=function(te){return K(te),te},Q.nodeId=function(te){return arguments.length?(D=typeof te=="function"?te:h(te),Q):D},Q.nodeAlign=function(te){return arguments.length?(R=typeof te=="function"?te:h(te),Q):R},Q.nodeWidth=function(te){return arguments.length?(F=+te,Q):F},Q.nodePadding=function(te){return arguments.length?(I=+te,Q):I},Q.nodes=function(te){return arguments.length?(O=typeof te=="function"?te:h(te),Q):O},Q.links=function(te){return arguments.length?(z=typeof te=="function"?te:h(te),Q):z},Q.size=function(te){return arguments.length?(C=S=0,k=+te[0],E=+te[1],Q):[k-C,E-S]},Q.extent=function(te){return arguments.length?(C=+te[0][0],k=+te[1][0],S=+te[0][1],E=+te[1][1],Q):[[C,S],[k,E]]},Q.iterations=function(te){return arguments.length?(B=+te,Q):B};function X(te){te.nodes.forEach(function(V,ee){V.index=ee,V.sourceLinks=[],V.targetLinks=[]});var Y=M.map(te.nodes,D);te.links.forEach(function(V,ee){V.index=ee;var ne=V.source,Z=V.target;typeof ne!="object"&&(ne=V.source=A(Y,ne)),typeof Z!="object"&&(Z=V.target=A(Y,Z)),ne.sourceLinks.push(V),Z.targetLinks.push(V)})}function j(te){te.nodes.forEach(function(Y){Y.value=Math.max(f.sum(Y.sourceLinks,d),f.sum(Y.targetLinks,d))})}function re(te){var Y,V,ee;for(Y=te.nodes,V=[],ee=0;Y.length;++ee,Y=V,V=[])Y.forEach(function(Z){Z.depth=ee,Z.sourceLinks.forEach(function(q){V.indexOf(q.target)<0&&V.push(q.target)})});for(Y=te.nodes,V=[],ee=0;Y.length;++ee,Y=V,V=[])Y.forEach(function(Z){Z.height=ee,Z.targetLinks.forEach(function(q){V.indexOf(q.source)<0&&V.push(q.source)})});var ne=(k-C-F)/(ee-1);te.nodes.forEach(function(Z){Z.x1=(Z.x0=C+Math.max(0,Math.min(ee-1,Math.floor(R.call(null,Z,ee))))*ne)+F})}function ue(te){var Y=M.nest().key(function(se){return se.x0}).sortKeys(f.ascending).entries(te.nodes).map(function(se){return se.values});ne(),ie();for(var V=1,ee=B;ee>0;--ee)q(V*=.99),ie(),Z(V),ie();function ne(){var se=f.max(Y,function(be){return be.length}),ae=G*(E-S)/(se-1);I>ae&&(I=ae);var oe=f.min(Y,function(be){return(E-S-(be.length-1)*I)/f.sum(be,d)});Y.forEach(function(be){be.forEach(function(ce,de){ce.y1=(ce.y0=de)+ce.value*oe})}),te.links.forEach(function(be){be.width=be.value*oe})}function Z(se){Y.forEach(function(ae){ae.forEach(function(oe){if(oe.targetLinks.length){var be=(f.sum(oe.targetLinks,c)/f.sum(oe.targetLinks,d)-p(oe))*se;oe.y0+=be,oe.y1+=be}})})}function q(se){Y.slice().reverse().forEach(function(ae){ae.forEach(function(oe){if(oe.sourceLinks.length){var be=(f.sum(oe.sourceLinks,m)/f.sum(oe.sourceLinks,d)-p(oe))*se;oe.y0+=be,oe.y1+=be}})})}function ie(){Y.forEach(function(se){var ae,oe,be=S,ce=se.length,de;for(se.sort(y),de=0;de<ce;++de)ae=se[de],oe=be-ae.y0,oe>0&&(ae.y0+=oe,ae.y1+=oe),be=ae.y1+I;if(oe=be-I-E,oe>0)for(be=ae.y0-=oe,ae.y1-=oe,de=ce-2;de>=0;--de)ae=se[de],oe=ae.y1+I-be,oe>0&&(ae.y0-=oe,ae.y1-=oe),be=ae.y0})}}function K(te){te.nodes.forEach(function(Y){Y.sourceLinks.sort(s),Y.targetLinks.sort(i)}),te.nodes.forEach(function(Y){var V=Y.y0,ee=V;Y.sourceLinks.forEach(function(ne){ne.y0=V+ne.width/2,V+=ne.width}),Y.targetLinks.forEach(function(ne){ne.y1=ee+ne.width/2,ee+=ne.width})})}return Q};function g(C){return[C.source.x1,C.y0]}function b(C){return[C.target.x0,C.y1]}var v=function(){return T.linkHorizontal().source(g).target(b)};w.sankey=_,w.sankeyCenter=t,w.sankeyLeft=a,w.sankeyRight=n,w.sankeyJustify=r,w.sankeyLinkHorizontal=v,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(o,U,H){(function(){var w={version:"3.8.0"},f=[].slice,M=function(le){return f.call(le)},T=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function a(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(T)try{M(T.documentElement.childNodes)[0].nodeType}catch{M=function(we){for(var De=we.length,Ue=new Array(De);De--;)Ue[De]=we[De];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,r=n.setAttribute,t=n.setAttributeNS,h=this.CSSStyleDeclaration.prototype,i=h.setProperty;n.setAttribute=function(we,De){r.call(this,we,De+"")},n.setAttributeNS=function(we,De,Ue){t.call(this,we,De,Ue+"")},h.setProperty=function(we,De,Ue){i.call(this,we,De+"",Ue)}}w.ascending=s;function s(le,we){return le<we?-1:le>we?1:le>=we?0:NaN}w.descending=function(le,we){return we<le?-1:we>le?1:we>=le?0:NaN},w.min=function(le,we){var De=-1,Ue=le.length,Be,$e;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=le[De])!=null&&Be>$e&&(Be=$e)}else{for(;++De<Ue;)if(($e=we.call(le,le[De],De))!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=we.call(le,le[De],De))!=null&&Be>$e&&(Be=$e)}return Be},w.max=function(le,we){var De=-1,Ue=le.length,Be,$e;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=le[De])!=null&&$e>Be&&(Be=$e)}else{for(;++De<Ue;)if(($e=we.call(le,le[De],De))!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=we.call(le,le[De],De))!=null&&$e>Be&&(Be=$e)}return Be},w.extent=function(le,we){var De=-1,Ue=le.length,Be,$e,Mt;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=Mt=$e;break}for(;++De<Ue;)($e=le[De])!=null&&(Be>$e&&(Be=$e),Mt<$e&&(Mt=$e))}else{for(;++De<Ue;)if(($e=we.call(le,le[De],De))!=null&&$e>=$e){Be=Mt=$e;break}for(;++De<Ue;)($e=we.call(le,le[De],De))!=null&&(Be>$e&&(Be=$e),Mt<$e&&(Mt=$e))}return[Be,Mt]};function y(le){return le===null?NaN:+le}function d(le){return!isNaN(le)}w.sum=function(le,we){var De=0,Ue=le.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)d(Be=+le[$e])&&(De+=Be);else for(;++$e<Ue;)d(Be=+we.call(le,le[$e],$e))&&(De+=Be);return De},w.mean=function(le,we){var De=0,Ue=le.length,Be,$e=-1,Mt=Ue;if(arguments.length===1)for(;++$e<Ue;)d(Be=y(le[$e]))?De+=Be:--Mt;else for(;++$e<Ue;)d(Be=y(we.call(le,le[$e],$e)))?De+=Be:--Mt;if(Mt)return De/Mt},w.quantile=function(le,we){var De=(le.length-1)*we+1,Ue=Math.floor(De),Be=+le[Ue-1],$e=De-Ue;return $e?Be+$e*(le[Ue]-Be):Be},w.median=function(le,we){var De=[],Ue=le.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)d(Be=y(le[$e]))&&De.push(Be);else for(;++$e<Ue;)d(Be=y(we.call(le,le[$e],$e)))&&De.push(Be);if(De.length)return w.quantile(De.sort(s),.5)},w.variance=function(le,we){var De=le.length,Ue=0,Be,$e,Mt=0,mt=-1,Ot=0;if(arguments.length===1)for(;++mt<De;)d(Be=y(le[mt]))&&($e=Be-Ue,Ue+=$e/++Ot,Mt+=$e*(Be-Ue));else for(;++mt<De;)d(Be=y(we.call(le,le[mt],mt)))&&($e=Be-Ue,Ue+=$e/++Ot,Mt+=$e*(Be-Ue));if(Ot>1)return Mt/(Ot-1)},w.deviation=function(){var le=w.variance.apply(this,arguments);return le&&Math.sqrt(le)};function p(le){return{left:function(we,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=we.length);Ue<Be;){var $e=Ue+Be>>>1;le(we[$e],De)<0?Ue=$e+1:Be=$e}return Ue},right:function(we,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=we.length);Ue<Be;){var $e=Ue+Be>>>1;le(we[$e],De)>0?Be=$e:Ue=$e+1}return Ue}}}var c=p(s);w.bisectLeft=c.left,w.bisect=w.bisectRight=c.right,w.bisector=function(le){return p(le.length===1?function(we,De){return s(le(we),De)}:le)},w.shuffle=function(le,we,De){(Ue=arguments.length)<3&&(De=le.length,Ue<2&&(we=0));for(var Ue=De-we,Be,$e;Ue;)$e=Math.random()*Ue--|0,Be=le[Ue+we],le[Ue+we]=le[$e+we],le[$e+we]=Be;return le},w.permute=function(le,we){for(var De=we.length,Ue=new Array(De);De--;)Ue[De]=le[we[De]];return Ue},w.pairs=function(le){for(var we=0,De=le.length-1,Ue=le[0],Be=new Array(De<0?0:De);we<De;)Be[we]=[Ue,Ue=le[++we]];return Be},w.transpose=function(le){if(!($e=le.length))return[];for(var we=-1,De=w.min(le,m),Ue=new Array(De);++we<De;)for(var Be=-1,$e,Mt=Ue[we]=new Array($e);++Be<$e;)Mt[Be]=le[Be][we];return Ue};function m(le){return le.length}w.zip=function(){return w.transpose(arguments)},w.keys=function(le){var we=[];for(var De in le)we.push(De);return we},w.values=function(le){var we=[];for(var De in le)we.push(le[De]);return we},w.entries=function(le){var we=[];for(var De in le)we.push({key:De,value:le[De]});return we},w.merge=function(le){for(var we=le.length,De,Ue=-1,Be=0,$e,Mt;++Ue<we;)Be+=le[Ue].length;for($e=new Array(Be);--we>=0;)for(Mt=le[we],De=Mt.length;--De>=0;)$e[--Be]=Mt[De];return $e};var l=Math.abs;w.range=function(le,we,De){if(arguments.length<3&&(De=1,arguments.length<2&&(we=le,le=0)),(we-le)/De===1/0)throw new Error("infinite range");var Ue=[],Be=x(l(De)),$e=-1,Mt;if(le*=Be,we*=Be,De*=Be,De<0)for(;(Mt=le+De*++$e)>we;)Ue.push(Mt/Be);else for(;(Mt=le+De*++$e)<we;)Ue.push(Mt/Be);return Ue};function x(le){for(var we=1;le*we%1;)we*=10;return we}function u(le,we){for(var De in we)Object.defineProperty(le.prototype,De,{value:we[De],enumerable:!1})}w.map=function(le,we){var De=new A;if(le instanceof A)le.forEach(function(mt,Ot){De.set(mt,Ot)});else if(Array.isArray(le)){var Ue=-1,Be=le.length,$e;if(arguments.length===1)for(;++Ue<Be;)De.set(Ue,le[Ue]);else for(;++Ue<Be;)De.set(we.call(le,$e=le[Ue],Ue),$e)}else for(var Mt in le)De.set(Mt,le[Mt]);return De};function A(){this._=Object.create(null)}var _="__proto__",g="\0";u(A,{has:C,get:function(le){return this._[b(le)]},set:function(le,we){return this._[b(le)]=we},remove:S,keys:k,values:function(){var le=[];for(var we in this._)le.push(this._[we]);return le},entries:function(){var le=[];for(var we in this._)le.push({key:v(we),value:this._[we]});return le},size:E,empty:F,forEach:function(le){for(var we in this._)le.call(this,v(we),this._[we])}});function b(le){return(le+="")===_||le[0]===g?g+le:le}function v(le){return(le+="")[0]===g?le.slice(1):le}function C(le){return b(le)in this._}function S(le){return(le=b(le))in this._&&delete this._[le]}function k(){var le=[];for(var we in this._)le.push(v(we));return le}function E(){var le=0;for(var we in this._)++le;return le}function F(){for(var le in this._)return!1;return!0}w.nest=function(){var le={},we=[],De=[],Ue,Be;function $e(mt,Ot,er){if(er>=we.length)return Be?Be.call(le,Ot):Ue?Ot.sort(Ue):Ot;for(var or=-1,sr=Ot.length,Lr=we[er++],nn,pn,zr,Wr=new A,qr;++or<sr;)(qr=Wr.get(nn=Lr(pn=Ot[or])))?qr.push(pn):Wr.set(nn,[pn]);return mt?(pn=mt(),zr=function(fn,hn){pn.set(fn,$e(mt,hn,er))}):(pn={},zr=function(fn,hn){pn[fn]=$e(mt,hn,er)}),Wr.forEach(zr),pn}function Mt(mt,Ot){if(Ot>=we.length)return mt;var er=[],or=De[Ot++];return mt.forEach(function(sr,Lr){er.push({key:sr,values:Mt(Lr,Ot)})}),or?er.sort(function(sr,Lr){return or(sr.key,Lr.key)}):er}return le.map=function(mt,Ot){return $e(Ot,mt,0)},le.entries=function(mt){return Mt($e(w.map,mt,0),0)},le.key=function(mt){return we.push(mt),le},le.sortKeys=function(mt){return De[we.length-1]=mt,le},le.sortValues=function(mt){return Ue=mt,le},le.rollup=function(mt){return Be=mt,le},le},w.set=function(le){var we=new I;if(le)for(var De=0,Ue=le.length;De<Ue;++De)we.add(le[De]);return we};function I(){this._=Object.create(null)}u(I,{has:C,add:function(le){return this._[b(le+="")]=!0,le},remove:S,values:k,size:E,empty:F,forEach:function(le){for(var we in this._)le.call(this,v(we))}}),w.behavior={};function D(le){return le}w.rebind=function(le,we){for(var De=1,Ue=arguments.length,Be;++De<Ue;)le[Be=arguments[De]]=R(le,we,we[Be]);return le};function R(le,we,De){return function(){var Ue=De.apply(we,arguments);return Ue===we?le:Ue}}function O(le,we){if(we in le)return we;we=we.charAt(0).toUpperCase()+we.slice(1);for(var De=0,Ue=z.length;De<Ue;++De){var Be=z[De]+we;if(Be in le)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function B(){}w.dispatch=function(){for(var le=new G,we=-1,De=arguments.length;++we<De;)le[arguments[we]]=Q(le);return le};function G(){}G.prototype.on=function(le,we){var De=le.indexOf("."),Ue="";if(De>=0&&(Ue=le.slice(De+1),le=le.slice(0,De)),le)return arguments.length<2?this[le].on(Ue):this[le].on(Ue,we);if(arguments.length===2){if(we==null)for(le in this)this.hasOwnProperty(le)&&this[le].on(Ue,null);return this}};function Q(le){var we=[],De=new A;function Ue(){for(var Be=we,$e=-1,Mt=Be.length,mt;++$e<Mt;)(mt=Be[$e].on)&&mt.apply(this,arguments);return le}return Ue.on=function(Be,$e){var Mt=De.get(Be),mt;return arguments.length<2?Mt&&Mt.on:(Mt&&(Mt.on=null,we=we.slice(0,mt=we.indexOf(Mt)).concat(we.slice(mt+1)),De.remove(Be)),$e&&we.push(De.set(Be,{on:$e})),le)},Ue}w.event=null;function X(){w.event.preventDefault()}function j(){for(var le=w.event,we;we=le.sourceEvent;)le=we;return le}function re(le){for(var we=new G,De=0,Ue=arguments.length;++De<Ue;)we[arguments[De]]=Q(we);return we.of=function(Be,$e){return function(Mt){try{var mt=Mt.sourceEvent=w.event;Mt.target=le,w.event=Mt,we[Mt.type].apply(Be,$e)}finally{w.event=mt}}},we}w.requote=function(le){return le.replace(ue,"\\$&")};var ue=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(le,we){le.__proto__=we}:function(le,we){for(var De in we)le[De]=we[De]};function te(le){return K(le,ne),le}var Y=function(le,we){return we.querySelector(le)},V=function(le,we){return we.querySelectorAll(le)},ee=function(le,we){var De=le.matches||le[O(le,"matchesSelector")];return ee=function(Ue,Be){return De.call(Ue,Be)},ee(le,we)};typeof Sizzle=="function"&&(Y=function(le,we){return Sizzle(le,we)[0]||null},V=Sizzle,ee=Sizzle.matchesSelector),w.selection=function(){return w.select(T.documentElement)};var ne=w.selection.prototype=[];ne.select=function(le){var we=[],De,Ue,Be,$e;le=Z(le);for(var Mt=-1,mt=this.length;++Mt<mt;){we.push(De=[]),De.parentNode=(Be=this[Mt]).parentNode;for(var Ot=-1,er=Be.length;++Ot<er;)($e=Be[Ot])?(De.push(Ue=le.call($e,$e.__data__,Ot,Mt)),Ue&&"__data__"in $e&&(Ue.__data__=$e.__data__)):De.push(null)}return te(we)};function Z(le){return typeof le=="function"?le:function(){return Y(le,this)}}ne.selectAll=function(le){var we=[],De,Ue;le=q(le);for(var Be=-1,$e=this.length;++Be<$e;)for(var Mt=this[Be],mt=-1,Ot=Mt.length;++mt<Ot;)(Ue=Mt[mt])&&(we.push(De=M(le.call(Ue,Ue.__data__,mt,Be))),De.parentNode=Ue);return te(we)};function q(le){return typeof le=="function"?le:function(){return V(le,this)}}var ie="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:se,qualify:function(le){var we=le.indexOf(":"),De=le;return we>=0&&(De=le.slice(0,we))!=="xmlns"&&(le=le.slice(we+1)),se.hasOwnProperty(De)?{space:se[De],local:le}:le}},ne.attr=function(le,we){if(arguments.length<2){if(typeof le=="string"){var De=this.node();return le=w.ns.qualify(le),le.local?De.getAttributeNS(le.space,le.local):De.getAttribute(le)}for(we in le)this.each(ae(we,le[we]));return this}return this.each(ae(le,we))};function ae(le,we){le=w.ns.qualify(le);function De(){this.removeAttribute(le)}function Ue(){this.removeAttributeNS(le.space,le.local)}function Be(){this.setAttribute(le,we)}function $e(){this.setAttributeNS(le.space,le.local,we)}function Mt(){var Ot=we.apply(this,arguments);Ot==null?this.removeAttribute(le):this.setAttribute(le,Ot)}function mt(){var Ot=we.apply(this,arguments);Ot==null?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,Ot)}return we==null?le.local?Ue:De:typeof we=="function"?le.local?mt:Mt:le.local?$e:Be}function oe(le){return le.trim().replace(/\s+/g," ")}ne.classed=function(le,we){if(arguments.length<2){if(typeof le=="string"){var De=this.node(),Ue=(le=ce(le)).length,Be=-1;if(we=De.classList){for(;++Be<Ue;)if(!we.contains(le[Be]))return!1}else for(we=De.getAttribute("class");++Be<Ue;)if(!be(le[Be]).test(we))return!1;return!0}for(we in le)this.each(de(we,le[we]));return this}return this.each(de(le,we))};function be(le){return new RegExp("(?:^|\\s+)"+w.requote(le)+"(?:\\s+|$)","g")}function ce(le){return(le+"").trim().split(/^|\s+/)}function de(le,we){le=ce(le).map(ye);var De=le.length;function Ue(){for(var $e=-1;++$e<De;)le[$e](this,we)}function Be(){for(var $e=-1,Mt=we.apply(this,arguments);++$e<De;)le[$e](this,Mt)}return typeof we=="function"?Be:Ue}function ye(le){var we=be(le);return function(De,Ue){if(Be=De.classList)return Ue?Be.add(le):Be.remove(le);var Be=De.getAttribute("class")||"";Ue?(we.lastIndex=0,we.test(Be)||De.setAttribute("class",oe(Be+" "+le))):De.setAttribute("class",oe(Be.replace(we," ")))}}ne.style=function(le,we,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(we="");for(De in le)this.each(ge(De,le[De],we));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(le)}De=""}return this.each(ge(le,we,De))};function ge(le,we,De){function Ue(){this.style.removeProperty(le)}function Be(){this.style.setProperty(le,we,De)}function $e(){var Mt=we.apply(this,arguments);Mt==null?this.style.removeProperty(le):this.style.setProperty(le,Mt,De)}return we==null?Ue:typeof we=="function"?$e:Be}ne.property=function(le,we){if(arguments.length<2){if(typeof le=="string")return this.node()[le];for(we in le)this.each(me(we,le[we]));return this}return this.each(me(le,we))};function me(le,we){function De(){delete this[le]}function Ue(){this[le]=we}function Be(){var $e=we.apply(this,arguments);$e==null?delete this[le]:this[le]=$e}return we==null?De:typeof we=="function"?Be:Ue}ne.text=function(le){return arguments.length?this.each(typeof le=="function"?function(){var we=le.apply(this,arguments);this.textContent=we==null?"":we}:le==null?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},ne.html=function(le){return arguments.length?this.each(typeof le=="function"?function(){var we=le.apply(this,arguments);this.innerHTML=we==null?"":we}:le==null?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},ne.append=function(le){return le=Me(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})};function Me(le){function we(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ie&&Ue.documentElement.namespaceURI===ie?Ue.createElement(le):Ue.createElementNS(Be,le)}function De(){return this.ownerDocument.createElementNS(le.space,le.local)}return typeof le=="function"?le:(le=w.ns.qualify(le)).local?De:we}ne.insert=function(le,we){return le=Me(le),we=Z(we),this.select(function(){return this.insertBefore(le.apply(this,arguments),we.apply(this,arguments)||null)})},ne.remove=function(){return this.each(Le)};function Le(){var le=this.parentNode;le&&le.removeChild(this)}ne.data=function(le,we){var De=-1,Ue=this.length,Be,$e;if(!arguments.length){for(le=new Array(Ue=(Be=this[0]).length);++De<Ue;)($e=Be[De])&&(le[De]=$e.__data__);return le}function Mt(or,sr){var Lr,nn=or.length,pn=sr.length,zr=Math.min(nn,pn),Wr=new Array(pn),qr=new Array(pn),fn=new Array(nn),hn,tn;if(we){var jn=new A,la=new Array(nn),Ea;for(Lr=-1;++Lr<nn;)(hn=or[Lr])&&(jn.has(Ea=we.call(hn,hn.__data__,Lr))?fn[Lr]=hn:jn.set(Ea,hn),la[Lr]=Ea);for(Lr=-1;++Lr<pn;)(hn=jn.get(Ea=we.call(sr,tn=sr[Lr],Lr)))?hn!==!0&&(Wr[Lr]=hn,hn.__data__=tn):qr[Lr]=Oe(tn),jn.set(Ea,!0);for(Lr=-1;++Lr<nn;)Lr in la&&jn.get(la[Lr])!==!0&&(fn[Lr]=or[Lr])}else{for(Lr=-1;++Lr<zr;)hn=or[Lr],tn=sr[Lr],hn?(hn.__data__=tn,Wr[Lr]=hn):qr[Lr]=Oe(tn);for(;Lr<pn;++Lr)qr[Lr]=Oe(sr[Lr]);for(;Lr<nn;++Lr)fn[Lr]=or[Lr]}qr.update=Wr,qr.parentNode=Wr.parentNode=fn.parentNode=or.parentNode,mt.push(qr),Ot.push(Wr),er.push(fn)}var mt=Ge([]),Ot=te([]),er=te([]);if(typeof le=="function")for(;++De<Ue;)Mt(Be=this[De],le.call(Be,Be.parentNode.__data__,De));else for(;++De<Ue;)Mt(Be=this[De],le);return Ot.enter=function(){return mt},Ot.exit=function(){return er},Ot};function Oe(le){return{__data__:le}}ne.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},ne.filter=function(le){var we=[],De,Ue,Be;typeof le!="function"&&(le=_e(le));for(var $e=0,Mt=this.length;$e<Mt;$e++){we.push(De=[]),De.parentNode=(Ue=this[$e]).parentNode;for(var mt=0,Ot=Ue.length;mt<Ot;mt++)(Be=Ue[mt])&&le.call(Be,Be.__data__,mt,$e)&&De.push(Be)}return te(we)};function _e(le){return function(){return ee(this,le)}}ne.order=function(){for(var le=-1,we=this.length;++le<we;)for(var De=this[le],Ue=De.length-1,Be=De[Ue],$e;--Ue>=0;)($e=De[Ue])&&(Be&&Be!==$e.nextSibling&&Be.parentNode.insertBefore($e,Be),Be=$e);return this},ne.sort=function(le){le=Ee.apply(this,arguments);for(var we=-1,De=this.length;++we<De;)this[we].sort(le);return this.order()};function Ee(le){return arguments.length||(le=s),function(we,De){return we&&De?le(we.__data__,De.__data__):!we-!De}}ne.each=function(le){return Ze(this,function(we,De,Ue){le.call(we,we.__data__,De,Ue)})};function Ze(le,we){for(var De=0,Ue=le.length;De<Ue;De++)for(var Be=le[De],$e=0,Mt=Be.length,mt;$e<Mt;$e++)(mt=Be[$e])&&we(mt,$e,De);return le}ne.call=function(le){var we=M(arguments);return le.apply(we[0]=this,we),this},ne.empty=function(){return!this.node()},ne.node=function(){for(var le=0,we=this.length;le<we;le++)for(var De=this[le],Ue=0,Be=De.length;Ue<Be;Ue++){var $e=De[Ue];if($e)return $e}return null},ne.size=function(){var le=0;return Ze(this,function(){++le}),le};function Ge(le){return K(le,Fe),le}var Fe=[];w.selection.enter=Ge,w.selection.enter.prototype=Fe,Fe.append=ne.append,Fe.empty=ne.empty,Fe.node=ne.node,Fe.call=ne.call,Fe.size=ne.size,Fe.select=function(le){for(var we=[],De,Ue,Be,$e,Mt,mt=-1,Ot=this.length;++mt<Ot;){Be=($e=this[mt]).update,we.push(De=[]),De.parentNode=$e.parentNode;for(var er=-1,or=$e.length;++er<or;)(Mt=$e[er])?(De.push(Be[er]=Ue=le.call($e.parentNode,Mt.__data__,er,mt)),Ue.__data__=Mt.__data__):De.push(null)}return te(we)},Fe.insert=function(le,we){return arguments.length<2&&(we=Re(this)),ne.insert.call(this,le,we)};function Re(le){var we,De;return function(Ue,Be,$e){var Mt=le[$e].update,mt=Mt.length,Ot;for($e!=De&&(De=$e,we=0),Be>=we&&(we=Be+1);!(Ot=Mt[we])&&++we<mt;);return Ot}}w.select=function(le){var we;return typeof le=="string"?(we=[Y(le,T)],we.parentNode=T.documentElement):(we=[le],we.parentNode=e(le)),te([we])},w.selectAll=function(le){var we;return typeof le=="string"?(we=M(V(le,T)),we.parentNode=T.documentElement):(we=M(le),we.parentNode=null),te([we])},ne.on=function(le,we,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(we=!1);for(De in le)this.each(We(De,le[De],we));return this}if(Ue<2)return(Ue=this.node()["__on"+le])&&Ue._;De=!1}return this.each(We(le,we,De))};function We(le,we,De){var Ue="__on"+le,Be=le.indexOf("."),$e=Nt;Be>0&&(le=le.slice(0,Be));var Mt=xt.get(le);Mt&&(le=Mt,$e=tr);function mt(){var or=this[Ue];or&&(this.removeEventListener(le,or,or.$),delete this[Ue])}function Ot(){var or=$e(we,M(arguments));mt.call(this),this.addEventListener(le,this[Ue]=or,or.$=De),or._=we}function er(){var or=new RegExp("^__on([^.]+)"+w.requote(le)+"$"),sr;for(var Lr in this)if(sr=Lr.match(or)){var nn=this[Lr];this.removeEventListener(sr[1],nn,nn.$),delete this[Lr]}}return Be?we?Ot:mt:we?B:er}var xt=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&xt.forEach(function(le){"on"+le in T&&xt.remove(le)});function Nt(le,we){return function(De){var Ue=w.event;w.event=De,we[0]=this.__data__;try{le.apply(this,we)}finally{w.event=Ue}}}function tr(le,we){var De=Nt(le,we);return function(Ue){var Be=this,$e=Ue.relatedTarget;(!$e||$e!==Be&&!($e.compareDocumentPosition(Be)&8))&&De.call(Be,Ue)}}var Vt,Pt=0;function $t(le){var we=".dragsuppress-"+ ++Pt,De="click"+we,Ue=w.select(a(le)).on("touchmove"+we,X).on("dragstart"+we,X).on("selectstart"+we,X);if(Vt==null&&(Vt="onselectstart"in le?!1:O(le.style,"userSelect")),Vt){var Be=e(le).style,$e=Be[Vt];Be[Vt]="none"}return function(Mt){if(Ue.on(we,null),Vt&&(Be[Vt]=$e),Mt){var mt=function(){Ue.on(De,null)};Ue.on(De,function(){X(),mt()},!0),setTimeout(mt,0)}}}w.mouse=function(le){return Lt(le,j())};var Ut=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(le,we){we.changedTouches&&(we=we.changedTouches[0]);var De=le.ownerSVGElement||le;if(De.createSVGPoint){var Ue=De.createSVGPoint();if(Ut<0){var Be=a(le);if(Be.scrollX||Be.scrollY){De=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var $e=De[0][0].getScreenCTM();Ut=!($e.f||$e.e),De.remove()}}return Ut?(Ue.x=we.pageX,Ue.y=we.pageY):(Ue.x=we.clientX,Ue.y=we.clientY),Ue=Ue.matrixTransform(le.getScreenCTM().inverse()),[Ue.x,Ue.y]}var Mt=le.getBoundingClientRect();return[we.clientX-Mt.left-le.clientLeft,we.clientY-Mt.top-le.clientTop]}w.touch=function(le,we,De){if(arguments.length<3&&(De=we,we=j().changedTouches),we){for(var Ue=0,Be=we.length,$e;Ue<Be;++Ue)if(($e=we[Ue]).identifier===De)return Lt(le,$e)}},w.behavior.drag=function(){var le=re(Be,"drag","dragstart","dragend"),we=null,De=$e(B,w.mouse,a,"mousemove","mouseup"),Ue=$e(Ye,w.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",De).on("touchstart.drag",Ue)}function $e(Mt,mt,Ot,er,or){return function(){var sr=this,Lr=w.event.target.correspondingElement||w.event.target,nn=sr.parentNode,pn=le.of(sr,arguments),zr=0,Wr=Mt(),qr=".drag"+(Wr==null?"":"-"+Wr),fn,hn=w.select(Ot(Lr)).on(er+qr,la).on(or+qr,Ea),tn=$t(Lr),jn=mt(nn,Wr);we?(fn=we.apply(sr,arguments),fn=[fn.x-jn[0],fn.y-jn[1]]):fn=[0,0],pn({type:"dragstart"});function la(){var ca=mt(nn,Wr),Ra,pa;!ca||(Ra=ca[0]-jn[0],pa=ca[1]-jn[1],zr|=Ra|pa,jn=ca,pn({type:"drag",x:ca[0]+fn[0],y:ca[1]+fn[1],dx:Ra,dy:pa}))}function Ea(){!mt(nn,Wr)||(hn.on(er+qr,null).on(or+qr,null),tn(zr),pn({type:"dragend"}))}}}return Be.origin=function(Mt){return arguments.length?(we=Mt,Be):we},w.rebind(Be,le,"on")};function Ye(){return w.event.changedTouches[0].identifier}w.touches=function(le,we){return arguments.length<2&&(we=j().touches),we?M(we).map(function(De){var Ue=Lt(le,De);return Ue.identifier=De.identifier,Ue}):[]};var ot=1e-6,Ve=ot*ot,Ae=Math.PI,He=2*Ae,Je=He-ot,tt=Ae/2,St=Ae/180,_t=180/Ae;function kt(le,we,De){return(we[0]-le[0])*(De[1]-le[1])-(we[1]-le[1])*(De[0]-le[0])}function jt(le){return le>1?tt:le<-1?-tt:Math.asin(le)}function Bt(le){return((le=Math.exp(le))-1/le)/2}function Wt(le){return((le=Math.exp(le))+1/le)/2}function Qt(le){return((le=Math.exp(2*le))-1)/(le+1)}var Zt=Math.SQRT2,cr=2,Xr=4;w.interpolateZoom=function(le,we){var De=le[0],Ue=le[1],Be=le[2],$e=we[0],Mt=we[1],mt=we[2],Ot=$e-De,er=Mt-Ue,or=Ot*Ot+er*er,sr,Lr;if(or<Ve)Lr=Math.log(mt/Be)/Zt,sr=function(fn){return[De+fn*Ot,Ue+fn*er,Be*Math.exp(Zt*fn*Lr)]};else{var nn=Math.sqrt(or),pn=(mt*mt-Be*Be+Xr*or)/(2*Be*cr*nn),zr=(mt*mt-Be*Be-Xr*or)/(2*mt*cr*nn),Wr=Math.log(Math.sqrt(pn*pn+1)-pn),qr=Math.log(Math.sqrt(zr*zr+1)-zr);Lr=(qr-Wr)/Zt,sr=function(fn){var hn=fn*Lr,tn=Wt(Wr),jn=Be/(cr*nn)*(tn*Qt(Zt*hn+Wr)-Bt(Wr));return[De+jn*Ot,Ue+jn*er,Be*tn/Wt(Zt*hn+Wr)]}}return sr.duration=Lr*1e3,sr},w.behavior.zoom=function(){var le={x:0,y:0,k:1},we,De,Ue,Be=[960,500],$e=vn,Mt=250,mt=0,Ot="mousedown.zoom",er="mousemove.zoom",or="mouseup.zoom",sr,Lr="touchstart.zoom",nn,pn=re(hn,"zoomstart","zoom","zoomend"),zr,Wr,qr,fn;ft||(ft="onwheel"in T?(en=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(en=function(){return w.event.wheelDelta},"mousewheel"):(en=function(){return-w.event.detail},"MozMousePixelScroll"));function hn(ga){ga.on(Ot,ii).on(ft+".zoom",Ao).on("dblclick.zoom",ji).on(Lr,Ei)}hn.event=function(ga){ga.each(function(){var hi=pn.of(this,arguments),qa=le;Qa?w.select(this).transition().each("start.zoom",function(){le=this.__chart__||{x:0,y:0,k:1},pa(hi)}).tween("zoom:zoom",function(){var Oi=Be[0],di=Be[1],xo=De?De[0]:Oi/2,fo=De?De[1]:di/2,Co=w.interpolateZoom([(xo-le.x)/le.k,(fo-le.y)/le.k,Oi/le.k],[(xo-qa.x)/qa.k,(fo-qa.y)/qa.k,Oi/qa.k]);return function(us){var qo=Co(us),fs=Oi/qo[2];this.__chart__=le={x:xo-qo[0]*fs,y:fo-qo[1]*fs,k:fs},ja(hi)}}).each("interrupt.zoom",function(){Oa(hi)}).each("end.zoom",function(){Oa(hi)}):(this.__chart__=le,pa(hi),ja(hi),Oa(hi))})},hn.translate=function(ga){return arguments.length?(le={x:+ga[0],y:+ga[1],k:le.k},Ra(),hn):[le.x,le.y]},hn.scale=function(ga){return arguments.length?(le={x:le.x,y:le.y,k:null},la(+ga),Ra(),hn):le.k},hn.scaleExtent=function(ga){return arguments.length?($e=ga==null?vn:[+ga[0],+ga[1]],hn):$e},hn.center=function(ga){return arguments.length?(Ue=ga&&[+ga[0],+ga[1]],hn):Ue},hn.size=function(ga){return arguments.length?(Be=ga&&[+ga[0],+ga[1]],hn):Be},hn.duration=function(ga){return arguments.length?(Mt=+ga,hn):Mt},hn.x=function(ga){return arguments.length?(Wr=ga,zr=ga.copy(),le={x:0,y:0,k:1},hn):Wr},hn.y=function(ga){return arguments.length?(fn=ga,qr=ga.copy(),le={x:0,y:0,k:1},hn):fn};function tn(ga){return[(ga[0]-le.x)/le.k,(ga[1]-le.y)/le.k]}function jn(ga){return[ga[0]*le.k+le.x,ga[1]*le.k+le.y]}function la(ga){le.k=Math.max($e[0],Math.min($e[1],ga))}function Ea(ga,hi){hi=jn(hi),le.x+=ga[0]-hi[0],le.y+=ga[1]-hi[1]}function ca(ga,hi,qa,Oi){ga.__chart__={x:le.x,y:le.y,k:le.k},la(Math.pow(2,Oi)),Ea(De=hi,qa),ga=w.select(ga),Mt>0&&(ga=ga.transition().duration(Mt)),ga.call(hn.event)}function Ra(){Wr&&Wr.domain(zr.range().map(function(ga){return(ga-le.x)/le.k}).map(zr.invert)),fn&&fn.domain(qr.range().map(function(ga){return(ga-le.y)/le.k}).map(qr.invert))}function pa(ga){mt++||ga({type:"zoomstart"})}function ja(ga){Ra(),ga({type:"zoom",scale:le.k,translate:[le.x,le.y]})}function Oa(ga){--mt||(ga({type:"zoomend"}),De=null)}function ii(){var ga=this,hi=pn.of(ga,arguments),qa=0,Oi=w.select(a(ga)).on(er,fo).on(or,Co),di=tn(w.mouse(ga)),xo=$t(ga);Nn.call(ga),pa(hi);function fo(){qa=1,Ea(w.mouse(ga),di),ja(hi)}function Co(){Oi.on(er,null).on(or,null),xo(qa),Oa(hi)}}function Ei(){var ga=this,hi=pn.of(ga,arguments),qa={},Oi=0,di,xo=".zoom-"+w.event.changedTouches[0].identifier,fo="touchmove"+xo,Co="touchend"+xo,us=[],qo=w.select(ga),fs=$t(ga);Qi(),pa(hi),qo.on(Ot,null).on(Lr,Qi);function ro(){var Do=w.touches(ga);return di=le.k,Do.forEach(function(vo){vo.identifier in qa&&(qa[vo.identifier]=tn(vo))}),Do}function Qi(){var Do=w.event.target;w.select(Do).on(fo,Ua).on(Co,ei),us.push(Do);for(var vo=w.event.changedTouches,Wo=0,io=vo.length;Wo<io;++Wo)qa[vo[Wo].identifier]=null;var cs=ro(),Us=Date.now();if(cs.length===1){if(Us-nn<500){var du=cs[0];ca(ga,du,qa[du.identifier],Math.floor(Math.log(le.k)/Math.LN2)+1),X()}nn=Us}else if(cs.length>1){var du=cs[0],oo=cs[1],Wf=du[0]-oo[0],Jl=du[1]-oo[1];Oi=Wf*Wf+Jl*Jl}}function Ua(){var Do=w.touches(ga),vo,Wo,io,cs;Nn.call(ga);for(var Us=0,du=Do.length;Us<du;++Us,cs=null)if(io=Do[Us],cs=qa[io.identifier]){if(Wo)break;vo=io,Wo=cs}if(cs){var oo=(oo=io[0]-vo[0])*oo+(oo=io[1]-vo[1])*oo,Wf=Oi&&Math.sqrt(oo/Oi);vo=[(vo[0]+io[0])/2,(vo[1]+io[1])/2],Wo=[(Wo[0]+cs[0])/2,(Wo[1]+cs[1])/2],la(Wf*di)}nn=null,Ea(vo,Wo),ja(hi)}function ei(){if(w.event.touches.length){for(var Do=w.event.changedTouches,vo=0,Wo=Do.length;vo<Wo;++vo)delete qa[Do[vo].identifier];for(var io in qa)return void ro()}w.selectAll(us).on(xo,null),qo.on(Ot,ii).on(Lr,Ei),fs(),Oa(hi)}}function Ao(){var ga=pn.of(this,arguments);sr?clearTimeout(sr):(Nn.call(this),we=tn(De=Ue||w.mouse(this)),pa(ga)),sr=setTimeout(function(){sr=null,Oa(ga)},50),X(),la(Math.pow(2,en()*.002)*le.k),Ea(De,we),ja(ga)}function ji(){var ga=w.mouse(this),hi=Math.log(le.k)/Math.LN2;ca(this,ga,tn(ga),w.event.shiftKey?Math.ceil(hi)-1:Math.floor(hi)+1)}return w.rebind(hn,pn,"on")};var vn=[0,1/0],en,ft;w.color=ar;function ar(){}ar.prototype.toString=function(){return this.rgb()+""},w.hsl=rr;function rr(le,we,De){return this instanceof rr?(this.h=+le,this.s=+we,void(this.l=+De)):arguments.length<2?le instanceof rr?new rr(le.h,le.s,le.l):Jr(""+le,ur,rr):new rr(le,we,De)}var Kt=rr.prototype=new ar;Kt.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new rr(this.h,this.s,this.l/le)},Kt.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new rr(this.h,this.s,le*this.l)},Kt.rgb=function(){return Er(this.h,this.s,this.l)};function Er(le,we,De){var Ue,Be;le=isNaN(le)?0:(le%=360)<0?le+360:le,we=isNaN(we)||we<0?0:we>1?1:we,De=De<0?0:De>1?1:De,Be=De<=.5?De*(1+we):De+we-De*we,Ue=2*De-Be;function $e(mt){return mt>360?mt-=360:mt<0&&(mt+=360),mt<60?Ue+(Be-Ue)*mt/60:mt<180?Be:mt<240?Ue+(Be-Ue)*(240-mt)/60:Ue}function Mt(mt){return Math.round($e(mt)*255)}return new Jt(Mt(le+120),Mt(le),Mt(le-120))}w.hcl=st;function st(le,we,De){return this instanceof st?(this.h=+le,this.c=+we,void(this.l=+De)):arguments.length<2?le instanceof st?new st(le.h,le.c,le.l):le instanceof pt?yt(le.l,le.a,le.b):yt((le=wr((le=w.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new st(le,we,De)}var et=st.prototype=new ar;et.brighter=function(le){return new st(this.h,this.c,Math.min(100,this.l+Ct*(arguments.length?le:1)))},et.darker=function(le){return new st(this.h,this.c,Math.max(0,this.l-Ct*(arguments.length?le:1)))},et.rgb=function(){return vt(this.h,this.c,this.l).rgb()};function vt(le,we,De){return isNaN(le)&&(le=0),isNaN(we)&&(we=0),new pt(De,Math.cos(le*=St)*we,Math.sin(le)*we)}w.lab=pt;function pt(le,we,De){return this instanceof pt?(this.l=+le,this.a=+we,void(this.b=+De)):arguments.length<2?le instanceof pt?new pt(le.l,le.a,le.b):le instanceof st?vt(le.h,le.c,le.l):wr((le=Jt(le)).r,le.g,le.b):new pt(le,we,De)}var Ct=18,Ht=.95047,Pe=1,ke=1.08883,lt=pt.prototype=new ar;lt.brighter=function(le){return new pt(Math.min(100,this.l+Ct*(arguments.length?le:1)),this.a,this.b)},lt.darker=function(le){return new pt(Math.max(0,this.l-Ct*(arguments.length?le:1)),this.a,this.b)},lt.rgb=function(){return ct(this.l,this.a,this.b)};function ct(le,we,De){var Ue=(le+16)/116,Be=Ue+we/500,$e=Ue-De/200;return Be=Rt(Be)*Ht,Ue=Rt(Ue)*Pe,$e=Rt($e)*ke,new Jt(Dt(3.2404542*Be-1.5371385*Ue-.4985314*$e),Dt(-.969266*Be+1.8760108*Ue+.041556*$e),Dt(.0556434*Be-.2040259*Ue+1.0572252*$e))}function yt(le,we,De){return le>0?new st(Math.atan2(De,we)*_t,Math.sqrt(we*we+De*De),le):new st(NaN,NaN,le)}function Rt(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function wt(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Dt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}w.rgb=Jt;function Jt(le,we,De){return this instanceof Jt?(this.r=~~le,this.g=~~we,void(this.b=~~De)):arguments.length<2?le instanceof Jt?new Jt(le.r,le.g,le.b):Jr(""+le,Jt,Er):new Jt(le,we,De)}function fr(le){return new Jt(le>>16,le>>8&255,le&255)}function Rr(le){return fr(le)+""}var Sr=Jt.prototype=new ar;Sr.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var we=this.r,De=this.g,Ue=this.b,Be=30;return!we&&!De&&!Ue?new Jt(Be,Be,Be):(we&&we<Be&&(we=Be),De&&De<Be&&(De=Be),Ue&&Ue<Be&&(Ue=Be),new Jt(Math.min(255,we/le),Math.min(255,De/le),Math.min(255,Ue/le)))},Sr.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new Jt(le*this.r,le*this.g,le*this.b)},Sr.hsl=function(){return ur(this.r,this.g,this.b)},Sr.toString=function(){return"#"+Pr(this.r)+Pr(this.g)+Pr(this.b)};function Pr(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function Jr(le,we,De){var Ue=0,Be=0,$e=0,Mt,mt,Ot;if(Mt=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()),Mt)switch(mt=Mt[2].split(","),Mt[1]){case"hsl":return De(parseFloat(mt[0]),parseFloat(mt[1])/100,parseFloat(mt[2])/100);case"rgb":return we(Yr(mt[0]),Yr(mt[1]),Yr(mt[2]))}return(Ot=Dr.get(le))?we(Ot.r,Ot.g,Ot.b):(le!=null&&le.charAt(0)==="#"&&!isNaN(Ot=parseInt(le.slice(1),16))&&(le.length===4?(Ue=(Ot&3840)>>4,Ue=Ue>>4|Ue,Be=Ot&240,Be=Be>>4|Be,$e=Ot&15,$e=$e<<4|$e):le.length===7&&(Ue=(Ot&16711680)>>16,Be=(Ot&65280)>>8,$e=Ot&255)),we(Ue,Be,$e))}function ur(le,we,De){var Ue=Math.min(le/=255,we/=255,De/=255),Be=Math.max(le,we,De),$e=Be-Ue,Mt,mt,Ot=(Be+Ue)/2;return $e?(mt=Ot<.5?$e/(Be+Ue):$e/(2-Be-Ue),le==Be?Mt=(we-De)/$e+(we<De?6:0):we==Be?Mt=(De-le)/$e+2:Mt=(le-we)/$e+4,Mt*=60):(Mt=NaN,mt=Ot>0&&Ot<1?0:Mt),new rr(Mt,mt,Ot)}function wr(le,we,De){le=Br(le),we=Br(we),De=Br(De);var Ue=wt((.4124564*le+.3575761*we+.1804375*De)/Ht),Be=wt((.2126729*le+.7151522*we+.072175*De)/Pe),$e=wt((.0193339*le+.119192*we+.9503041*De)/ke);return pt(116*Be-16,500*(Ue-Be),200*(Be-$e))}function Br(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function Yr(le){var we=parseFloat(le);return le.charAt(le.length-1)==="%"?Math.round(we*2.55):we}var Dr=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Dr.forEach(function(le,we){Dr.set(le,fr(we))});function at(le){return typeof le=="function"?le:function(){return le}}w.functor=at,w.xhr=zt(D);function zt(le){return function(we,De,Ue){return arguments.length===2&&typeof De=="function"&&(Ue=De,De=null),qt(we,De,le,Ue)}}function qt(le,we,De,Ue){var Be={},$e=w.dispatch("beforesend","progress","load","error"),Mt={},mt=new XMLHttpRequest,Ot=null;self.XDomainRequest&&!("withCredentials"in mt)&&/^(http(s)?:)?\/\//.test(le)&&(mt=new XDomainRequest),"onload"in mt?mt.onload=mt.onerror=er:mt.onreadystatechange=function(){mt.readyState>3&&er()};function er(){var or=mt.status,sr;if(!or&&Ur(mt)||or>=200&&or<300||or===304){try{sr=De.call(Be,mt)}catch(Lr){$e.error.call(Be,Lr);return}$e.load.call(Be,sr)}else $e.error.call(Be,mt)}return mt.onprogress=function(or){var sr=w.event;w.event=or;try{$e.progress.call(Be,mt)}finally{w.event=sr}},Be.header=function(or,sr){return or=(or+"").toLowerCase(),arguments.length<2?Mt[or]:(sr==null?delete Mt[or]:Mt[or]=sr+"",Be)},Be.mimeType=function(or){return arguments.length?(we=or==null?null:or+"",Be):we},Be.responseType=function(or){return arguments.length?(Ot=or,Be):Ot},Be.response=function(or){return De=or,Be},["get","post"].forEach(function(or){Be[or]=function(){return Be.send.apply(Be,[or].concat(M(arguments)))}}),Be.send=function(or,sr,Lr){if(arguments.length===2&&typeof sr=="function"&&(Lr=sr,sr=null),mt.open(or,le,!0),we!=null&&!("accept"in Mt)&&(Mt.accept=we+",*/*"),mt.setRequestHeader)for(var nn in Mt)mt.setRequestHeader(nn,Mt[nn]);return we!=null&&mt.overrideMimeType&&mt.overrideMimeType(we),Ot!=null&&(mt.responseType=Ot),Lr!=null&&Be.on("error",Lr).on("load",function(pn){Lr(null,pn)}),$e.beforesend.call(Be,mt),mt.send(sr==null?null:sr),Be},Be.abort=function(){return mt.abort(),Be},w.rebind(Be,$e,"on"),Ue==null?Be:Be.get(hr(Ue))}function hr(le){return le.length===1?function(we,De){le(we==null?De:null)}:le}function Ur(le){var we=le.responseType;return we&&we!=="text"?le.response:le.responseText}w.dsv=function(le,we){var De=new RegExp('["'+le+`
]`),Ue=le.charCodeAt(0);function Be(er,or,sr){arguments.length<3&&(sr=or,or=null);var Lr=qt(er,we,or==null?$e:Mt(or),sr);return Lr.row=function(nn){return arguments.length?Lr.response((or=nn)==null?$e:Mt(nn)):or},Lr}function $e(er){return Be.parse(er.responseText)}function Mt(er){return function(or){return Be.parse(or.responseText,er)}}Be.parse=function(er,or){var sr;return Be.parseRows(er,function(Lr,nn){if(sr)return sr(Lr,nn-1);var pn=function(zr){for(var Wr={},qr=Lr.length,fn=0;fn<qr;++fn)Wr[Lr[fn]]=zr[fn];return Wr};sr=or?function(zr,Wr){return or(pn(zr),Wr)}:pn})},Be.parseRows=function(er,or){var sr={},Lr={},nn=[],pn=er.length,zr=0,Wr=0,qr,fn;function hn(){if(zr>=pn)return Lr;if(fn)return fn=!1,sr;var jn=zr;if(er.charCodeAt(jn)===34){for(var la=jn;la++<pn;)if(er.charCodeAt(la)===34){if(er.charCodeAt(la+1)!==34)break;++la}zr=la+2;var Ea=er.charCodeAt(la+1);return Ea===13?(fn=!0,er.charCodeAt(la+2)===10&&++zr):Ea===10&&(fn=!0),er.slice(jn+1,la).replace(/""/g,'"')}for(;zr<pn;){var Ea=er.charCodeAt(zr++),ca=1;if(Ea===10)fn=!0;else if(Ea===13)fn=!0,er.charCodeAt(zr)===10&&(++zr,++ca);else if(Ea!==Ue)continue;return er.slice(jn,zr-ca)}return er.slice(jn)}for(;(qr=hn())!==Lr;){for(var tn=[];qr!==sr&&qr!==Lr;)tn.push(qr),qr=hn();or&&(tn=or(tn,Wr++))==null||nn.push(tn)}return nn},Be.format=function(er){if(Array.isArray(er[0]))return Be.formatRows(er);var or=new I,sr=[];return er.forEach(function(Lr){for(var nn in Lr)or.has(nn)||sr.push(or.add(nn))}),[sr.map(Ot).join(le)].concat(er.map(function(Lr){return sr.map(function(nn){return Ot(Lr[nn])}).join(le)})).join(`
`)},Be.formatRows=function(er){return er.map(mt).join(`
`)};function mt(er){return er.map(Ot).join(le)}function Ot(er){return De.test(er)?'"'+er.replace(/\"/g,'""')+'"':er}return Be},w.csv=w.dsv(",","text/csv"),w.tsv=w.dsv("	","text/tab-separated-values");var Gr,Ir,kr,Kr,kn=this[O(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};w.timer=function(){yn.apply(this,arguments)};function yn(le,we,De){var Ue=arguments.length;Ue<2&&(we=0),Ue<3&&(De=Date.now());var Be=De+we,$e={c:le,t:Be,n:null};return Ir?Ir.n=$e:Gr=$e,Ir=$e,kr||(Kr=clearTimeout(Kr),kr=1,kn(Yn)),$e}function Yn(){var le=In(),we=Jn()-le;we>24?(isFinite(we)&&(clearTimeout(Kr),Kr=setTimeout(Yn,we)),kr=0):(kr=1,kn(Yn))}w.timer.flush=function(){In(),Jn()};function In(){for(var le=Date.now(),we=Gr;we;)le>=we.t&&we.c(le-we.t)&&(we.c=null),we=we.n;return le}function Jn(){for(var le,we=Gr,De=1/0;we;)we.c?(we.t<De&&(De=we.t),we=(le=we).n):we=le?le.n=we.n:Gr=we.n;return Ir=le,De}w.round=function(le,we){return we?Math.round(le*(we=Math.pow(10,we)))/we:Math.round(le)},w.geom={};function Zn(le){return le[0]}function ba(le){return le[1]}w.geom.hull=function(le){var we=Zn,De=ba;if(arguments.length)return Ue(le);function Ue(Be){if(Be.length<3)return[];var $e=at(we),Mt=at(De),mt,Ot=Be.length,er=[],or=[];for(mt=0;mt<Ot;mt++)er.push([+$e.call(this,Be[mt],mt),+Mt.call(this,Be[mt],mt),mt]);for(er.sort(xi),mt=0;mt<Ot;mt++)or.push([er[mt][0],-er[mt][1]]);var sr=Pa(er),Lr=Pa(or),nn=Lr[0]===sr[0],pn=Lr[Lr.length-1]===sr[sr.length-1],zr=[];for(mt=sr.length-1;mt>=0;--mt)zr.push(Be[er[sr[mt]][2]]);for(mt=+nn;mt<Lr.length-pn;++mt)zr.push(Be[er[Lr[mt]][2]]);return zr}return Ue.x=function(Be){return arguments.length?(we=Be,Ue):we},Ue.y=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function Pa(le){for(var we=le.length,De=[0,1],Ue=2,Be=2;Be<we;Be++){for(;Ue>1&&kt(le[De[Ue-2]],le[De[Ue-1]],le[Be])<=0;)--Ue;De[Ue++]=Be}return De.slice(0,Ue)}function xi(le,we){return le[0]-we[0]||le[1]-we[1]}w.geom.polygon=function(le){return K(le,Ka),le};var Ka=w.geom.polygon.prototype=[];Ka.area=function(){for(var le=-1,we=this.length,De,Ue=this[we-1],Be=0;++le<we;)De=Ue,Ue=this[le],Be+=De[1]*Ue[0]-De[0]*Ue[1];return Be*.5},Ka.centroid=function(le){var we=-1,De=this.length,Ue=0,Be=0,$e,Mt=this[De-1],mt;for(arguments.length||(le=-1/(6*this.area()));++we<De;)$e=Mt,Mt=this[we],mt=$e[0]*Mt[1]-Mt[0]*$e[1],Ue+=($e[0]+Mt[0])*mt,Be+=($e[1]+Mt[1])*mt;return[Ue*le,Be*le]},Ka.clip=function(le){for(var we,De=Cr(le),Ue=-1,Be=this.length-Cr(this),$e,Mt,mt=this[Be-1],Ot,er,or;++Ue<Be;){for(we=le.slice(),le.length=0,Ot=this[Ue],er=we[(Mt=we.length-De)-1],$e=-1;++$e<Mt;)or=we[$e],ti(or,mt,Ot)?(ti(er,mt,Ot)||le.push($a(er,or,mt,Ot)),le.push(or)):ti(er,mt,Ot)&&le.push($a(er,or,mt,Ot)),er=or;De&&le.push(le[0]),mt=Ot}return le};function ti(le,we,De){return(De[0]-we[0])*(le[1]-we[1])<(De[1]-we[1])*(le[0]-we[0])}function $a(le,we,De,Ue){var Be=le[0],$e=De[0],Mt=we[0]-Be,mt=Ue[0]-$e,Ot=le[1],er=De[1],or=we[1]-Ot,sr=Ue[1]-er,Lr=(mt*(Ot-er)-sr*(Be-$e))/(sr*Mt-mt*or);return[Be+Lr*Mt,Ot+Lr*or]}function Cr(le){var we=le[0],De=le[le.length-1];return!(we[0]-De[0]||we[1]-De[1])}var bn,gn,Ln,qn=[],da,oa,Bn=[];function $n(){va(this),this.edge=this.site=this.circle=null}function Xa(le){var we=qn.pop()||new $n;return we.site=le,we}function gi(le){Ar(le),Ln.remove(le),qn.push(le),va(le)}function Xt(le){var we=le.circle,De=we.x,Ue=we.cy,Be={x:De,y:Ue},$e=le.P,Mt=le.N,mt=[le];gi(le);for(var Ot=$e;Ot.circle&&l(De-Ot.circle.x)<ot&&l(Ue-Ot.circle.cy)<ot;)$e=Ot.P,mt.unshift(Ot),gi(Ot),Ot=$e;mt.unshift(Ot),Ar(Ot);for(var er=Mt;er.circle&&l(De-er.circle.x)<ot&&l(Ue-er.circle.cy)<ot;)Mt=er.N,mt.push(er),gi(er),er=Mt;mt.push(er),Ar(er);var or=mt.length,sr;for(sr=1;sr<or;++sr)er=mt[sr],Ot=mt[sr-1],fa(er.edge,Ot.site,er.site,Be);Ot=mt[0],er=mt[or-1],er.edge=En(Ot.site,er.site,null,Be),Tr(Ot),Tr(er)}function mr(le){for(var we=le.x,De=le.y,Ue,Be,$e,Mt,mt=Ln._;mt;)if($e=un(mt,De)-we,$e>ot)mt=mt.L;else if(Mt=we-xn(mt,De),Mt>ot){if(!mt.R){Ue=mt;break}mt=mt.R}else{$e>-ot?(Ue=mt.P,Be=mt):Mt>-ot?(Ue=mt,Be=mt.N):Ue=Be=mt;break}var Ot=Xa(le);if(Ln.insert(Ue,Ot),!(!Ue&&!Be)){if(Ue===Be){Ar(Ue),Be=Xa(Ue.site),Ln.insert(Ot,Be),Ot.edge=Be.edge=En(Ue.site,Ot.site),Tr(Ue),Tr(Be);return}if(!Be){Ot.edge=En(Ue.site,Ot.site);return}Ar(Ue),Ar(Be);var er=Ue.site,or=er.x,sr=er.y,Lr=le.x-or,nn=le.y-sr,pn=Be.site,zr=pn.x-or,Wr=pn.y-sr,qr=2*(Lr*Wr-nn*zr),fn=Lr*Lr+nn*nn,hn=zr*zr+Wr*Wr,tn={x:(Wr*fn-nn*hn)/qr+or,y:(Lr*hn-zr*fn)/qr+sr};fa(Be.edge,er,pn,tn),Ot.edge=En(er,le,null,tn),Be.edge=En(le,pn,null,tn),Tr(Ue),Tr(Be)}}function un(le,we){var De=le.site,Ue=De.x,Be=De.y,$e=Be-we;if(!$e)return Ue;var Mt=le.P;if(!Mt)return-1/0;De=Mt.site;var mt=De.x,Ot=De.y,er=Ot-we;if(!er)return mt;var or=mt-Ue,sr=1/$e-1/er,Lr=or/er;return sr?(-Lr+Math.sqrt(Lr*Lr-2*sr*(or*or/(-2*er)-Ot+er/2+Be-$e/2)))/sr+Ue:(Ue+mt)/2}function xn(le,we){var De=le.N;if(De)return un(De,we);var Ue=le.site;return Ue.y===we?Ue.x:1/0}function sn(le){this.site=le,this.edges=[]}sn.prototype.prepare=function(){for(var le=this.edges,we=le.length,De;we--;)De=le[we].edge,(!De.b||!De.a)&&le.splice(we,1);return le.sort(Mn),le.length};function Cn(le){for(var we=le[0][0],De=le[1][0],Ue=le[0][1],Be=le[1][1],$e,Mt,mt,Ot,er=gn,or=er.length,sr,Lr,nn,pn,zr,Wr;or--;)if(sr=er[or],!(!sr||!sr.prepare()))for(nn=sr.edges,pn=nn.length,Lr=0;Lr<pn;)Wr=nn[Lr].end(),mt=Wr.x,Ot=Wr.y,zr=nn[++Lr%pn].start(),$e=zr.x,Mt=zr.y,(l(mt-$e)>ot||l(Ot-Mt)>ot)&&(nn.splice(Lr,0,new _a(ea(sr.site,Wr,l(mt-we)<ot&&Be-Ot>ot?{x:we,y:l($e-we)<ot?Mt:Be}:l(Ot-Be)<ot&&De-mt>ot?{x:l(Mt-Be)<ot?$e:De,y:Be}:l(mt-De)<ot&&Ot-Ue>ot?{x:De,y:l($e-De)<ot?Mt:Ue}:l(Ot-Ue)<ot&&mt-we>ot?{x:l(Mt-Ue)<ot?$e:we,y:Ue}:null),sr.site,null)),++pn)}function Mn(le,we){return we.angle-le.angle}function dn(){va(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tr(le){var we=le.P,De=le.N;if(!(!we||!De)){var Ue=we.site,Be=le.site,$e=De.site;if(Ue!==$e){var Mt=Be.x,mt=Be.y,Ot=Ue.x-Mt,er=Ue.y-mt,or=$e.x-Mt,Wr=$e.y-mt,sr=2*(Ot*Wr-er*or);if(!(sr>=-Ve)){var Lr=Ot*Ot+er*er,nn=or*or+Wr*Wr,pn=(Wr*Lr-er*nn)/sr,zr=(Ot*nn-or*Lr)/sr,Wr=zr+mt,qr=Bn.pop()||new dn;qr.arc=le,qr.site=Be,qr.x=pn+Mt,qr.y=Wr+Math.sqrt(pn*pn+zr*zr),qr.cy=Wr,le.circle=qr;for(var fn=null,hn=oa._;hn;)if(qr.y<hn.y||qr.y===hn.y&&qr.x<=hn.x)if(hn.L)hn=hn.L;else{fn=hn.P;break}else if(hn.R)hn=hn.R;else{fn=hn;break}oa.insert(fn,qr),fn||(da=qr)}}}}function Ar(le){var we=le.circle;we&&(we.P||(da=we.N),oa.remove(we),Bn.push(we),va(we),le.circle=null)}function Hr(le,we,De,Ue){return function(Be){var $e=Be.a,Mt=Be.b,mt=$e.x,Ot=$e.y,er=Mt.x,or=Mt.y,sr=0,Lr=1,nn=er-mt,pn=or-Ot,zr;if(zr=le-mt,!(!nn&&zr>0)){if(zr/=nn,nn<0){if(zr<sr)return;zr<Lr&&(Lr=zr)}else if(nn>0){if(zr>Lr)return;zr>sr&&(sr=zr)}if(zr=De-mt,!(!nn&&zr<0)){if(zr/=nn,nn<0){if(zr>Lr)return;zr>sr&&(sr=zr)}else if(nn>0){if(zr<sr)return;zr<Lr&&(Lr=zr)}if(zr=we-Ot,!(!pn&&zr>0)){if(zr/=pn,pn<0){if(zr<sr)return;zr<Lr&&(Lr=zr)}else if(pn>0){if(zr>Lr)return;zr>sr&&(sr=zr)}if(zr=Ue-Ot,!(!pn&&zr<0)){if(zr/=pn,pn<0){if(zr>Lr)return;zr>sr&&(sr=zr)}else if(pn>0){if(zr<sr)return;zr<Lr&&(Lr=zr)}return sr>0&&(Be.a={x:mt+sr*nn,y:Ot+sr*pn}),Lr<1&&(Be.b={x:mt+Lr*nn,y:Ot+Lr*pn}),Be}}}}}}function wn(le){for(var we=bn,De=Hr(le[0][0],le[0][1],le[1][0],le[1][1]),Ue=we.length,Be;Ue--;)Be=we[Ue],(!Gn(Be,le)||!De(Be)||l(Be.a.x-Be.b.x)<ot&&l(Be.a.y-Be.b.y)<ot)&&(Be.a=Be.b=null,we.splice(Ue,1))}function Gn(le,we){var De=le.b;if(De)return!0;var Ue=le.a,Be=we[0][0],$e=we[1][0],Mt=we[0][1],mt=we[1][1],Ot=le.l,er=le.r,or=Ot.x,sr=Ot.y,Lr=er.x,nn=er.y,pn=(or+Lr)/2,zr=(sr+nn)/2,Wr,qr;if(nn===sr){if(pn<Be||pn>=$e)return;if(or>Lr){if(!Ue)Ue={x:pn,y:Mt};else if(Ue.y>=mt)return;De={x:pn,y:mt}}else{if(!Ue)Ue={x:pn,y:mt};else if(Ue.y<Mt)return;De={x:pn,y:Mt}}}else if(Wr=(or-Lr)/(nn-sr),qr=zr-Wr*pn,Wr<-1||Wr>1)if(or>Lr){if(!Ue)Ue={x:(Mt-qr)/Wr,y:Mt};else if(Ue.y>=mt)return;De={x:(mt-qr)/Wr,y:mt}}else{if(!Ue)Ue={x:(mt-qr)/Wr,y:mt};else if(Ue.y<Mt)return;De={x:(Mt-qr)/Wr,y:Mt}}else if(sr<nn){if(!Ue)Ue={x:Be,y:Wr*Be+qr};else if(Ue.x>=$e)return;De={x:$e,y:Wr*$e+qr}}else{if(!Ue)Ue={x:$e,y:Wr*$e+qr};else if(Ue.x<Be)return;De={x:Be,y:Wr*Be+qr}}return le.a=Ue,le.b=De,!0}function sa(le,we){this.l=le,this.r=we,this.a=this.b=null}function En(le,we,De,Ue){var Be=new sa(le,we);return bn.push(Be),De&&fa(Be,le,we,De),Ue&&fa(Be,we,le,Ue),gn[le.i].edges.push(new _a(Be,le,we)),gn[we.i].edges.push(new _a(Be,we,le)),Be}function ea(le,we,De){var Ue=new sa(le,null);return Ue.a=we,Ue.b=De,bn.push(Ue),Ue}function fa(le,we,De,Ue){!le.a&&!le.b?(le.a=Ue,le.l=we,le.r=De):le.l===De?le.b=Ue:le.a=Ue}function _a(le,we,De){var Ue=le.a,Be=le.b;this.edge=le,this.site=we,this.angle=De?Math.atan2(De.y-we.y,De.x-we.x):le.l===we?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}_a.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Aa(){this._=null}function va(le){le.U=le.C=le.L=le.R=le.P=le.N=null}Aa.prototype={insert:function(le,we){var De,Ue,Be;if(le){if(we.P=le,we.N=le.N,le.N&&(le.N.P=we),le.N=we,le.R){for(le=le.R;le.L;)le=le.L;le.L=we}else le.R=we;De=le}else this._?(le=Jo(this._),we.P=null,we.N=le,le.P=le.L=we,De=le):(we.P=we.N=null,this._=we,De=null);for(we.L=we.R=null,we.U=De,we.C=!0,le=we;De&&De.C;)Ue=De.U,De===Ue.L?(Be=Ue.R,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.R&&(La(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,So(this,Ue))):(Be=Ue.L,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.L&&(So(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,La(this,Ue))),De=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var we=le.U,De,Ue=le.L,Be=le.R,$e,Mt;if(Ue?Be?$e=Jo(Be):$e=Ue:$e=Be,we?we.L===le?we.L=$e:we.R=$e:this._=$e,Ue&&Be?(Mt=$e.C,$e.C=le.C,$e.L=Ue,Ue.U=$e,$e!==Be?(we=$e.U,$e.U=le.U,le=$e.R,we.L=le,$e.R=Be,Be.U=$e):($e.U=we,we=$e,le=$e.R)):(Mt=le.C,le=$e),le&&(le.U=we),!Mt){if(le&&le.C){le.C=!1;return}do{if(le===this._)break;if(le===we.L){if(De=we.R,De.C&&(De.C=!1,we.C=!0,La(this,we),De=we.R),De.L&&De.L.C||De.R&&De.R.C){(!De.R||!De.R.C)&&(De.L.C=!1,De.C=!0,So(this,De),De=we.R),De.C=we.C,we.C=De.R.C=!1,La(this,we),le=this._;break}}else if(De=we.L,De.C&&(De.C=!1,we.C=!0,So(this,we),De=we.L),De.L&&De.L.C||De.R&&De.R.C){(!De.L||!De.L.C)&&(De.R.C=!1,De.C=!0,La(this,De),De=we.L),De.C=we.C,we.C=De.L.C=!1,So(this,we),le=this._;break}De.C=!0,le=we,we=we.U}while(!le.C);le&&(le.C=!1)}}};function La(le,we){var De=we,Ue=we.R,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.R=Ue.L,De.R&&(De.R.U=De),Ue.L=De}function So(le,we){var De=we,Ue=we.L,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.L=Ue.R,De.L&&(De.L.U=De),Ue.R=De}function Jo(le){for(;le.L;)le=le.L;return le}function vs(le,we){var De=le.sort(kl).pop(),Ue,Be,$e;for(bn=[],gn=new Array(le.length),Ln=new Aa,oa=new Aa;;)if($e=da,De&&(!$e||De.y<$e.y||De.y===$e.y&&De.x<$e.x))(De.x!==Ue||De.y!==Be)&&(gn[De.i]=new sn(De),mr(De),Ue=De.x,Be=De.y),De=le.pop();else if($e)Xt($e.arc);else break;we&&(wn(we),Cn(we));var Mt={cells:gn,edges:bn};return Ln=oa=bn=gn=null,Mt}function kl(le,we){return we.y-le.y||we.x-le.x}w.geom.voronoi=function(le){var we=Zn,De=ba,Ue=we,Be=De,$e=Ul;if(le)return Mt(le);function Mt(Ot){var er=new Array(Ot.length),or=$e[0][0],sr=$e[0][1],Lr=$e[1][0],nn=$e[1][1];return vs(mt(Ot),$e).cells.forEach(function(pn,zr){var Wr=pn.edges,qr=pn.site,fn=er[zr]=Wr.length?Wr.map(function(hn){var tn=hn.start();return[tn.x,tn.y]}):qr.x>=or&&qr.x<=Lr&&qr.y>=sr&&qr.y<=nn?[[or,nn],[Lr,nn],[Lr,sr],[or,sr]]:[];fn.point=Ot[zr]}),er}function mt(Ot){return Ot.map(function(er,or){return{x:Math.round(Ue(er,or)/ot)*ot,y:Math.round(Be(er,or)/ot)*ot,i:or}})}return Mt.links=function(Ot){return vs(mt(Ot)).edges.filter(function(er){return er.l&&er.r}).map(function(er){return{source:Ot[er.l.i],target:Ot[er.r.i]}})},Mt.triangles=function(Ot){var er=[];return vs(mt(Ot)).cells.forEach(function(or,sr){for(var Lr=or.site,nn=or.edges.sort(Mn),pn=-1,zr=nn.length,Wr,qr=nn[zr-1].edge,fn=qr.l===Lr?qr.r:qr.l;++pn<zr;)Wr=fn,qr=nn[pn].edge,fn=qr.l===Lr?qr.r:qr.l,sr<Wr.i&&sr<fn.i&&_u(Lr,Wr,fn)<0&&er.push([Ot[sr],Ot[Wr.i],Ot[fn.i]])}),er},Mt.x=function(Ot){return arguments.length?(Ue=at(we=Ot),Mt):we},Mt.y=function(Ot){return arguments.length?(Be=at(De=Ot),Mt):De},Mt.clipExtent=function(Ot){return arguments.length?($e=Ot==null?Ul:Ot,Mt):$e===Ul?null:$e},Mt.size=function(Ot){return arguments.length?Mt.clipExtent(Ot&&[[0,0],Ot]):$e===Ul?null:$e&&$e[1]},Mt};var Ul=[[-1e6,-1e6],[1e6,1e6]];function _u(le,we,De){return(le.x-De.x)*(we.y-le.y)-(le.x-we.x)*(De.y-le.y)}w.geom.delaunay=function(le){return w.geom.voronoi().triangles(le)},w.geom.quadtree=function(le,we,De,Ue,Be){var $e=Zn,Mt=ba,mt;if(mt=arguments.length)return $e=wi,Mt=hl,mt===3&&(Be=De,Ue=we,De=we=0),Ot(le);function Ot(er){var or,sr=at($e),Lr=at(Mt),nn,pn,zr,Wr,qr,fn,hn,tn;if(we!=null)qr=we,fn=De,hn=Ue,tn=Be;else if(hn=tn=-(qr=fn=1/0),nn=[],pn=[],Wr=er.length,mt)for(zr=0;zr<Wr;++zr)or=er[zr],or.x<qr&&(qr=or.x),or.y<fn&&(fn=or.y),or.x>hn&&(hn=or.x),or.y>tn&&(tn=or.y),nn.push(or.x),pn.push(or.y);else for(zr=0;zr<Wr;++zr){var jn=+sr(or=er[zr],zr),la=+Lr(or,zr);jn<qr&&(qr=jn),la<fn&&(fn=la),jn>hn&&(hn=jn),la>tn&&(tn=la),nn.push(jn),pn.push(la)}var Ea=hn-qr,ca=tn-fn;Ea>ca?tn=fn+Ea:hn=qr+ca;function Ra(Oa,ii,Ei,Ao,ji,ga,hi,qa){if(!(isNaN(Ei)||isNaN(Ao)))if(Oa.leaf){var Oi=Oa.x,di=Oa.y;if(Oi!=null)if(l(Oi-Ei)+l(di-Ao)<.01)pa(Oa,ii,Ei,Ao,ji,ga,hi,qa);else{var xo=Oa.point;Oa.x=Oa.y=Oa.point=null,pa(Oa,xo,Oi,di,ji,ga,hi,qa),pa(Oa,ii,Ei,Ao,ji,ga,hi,qa)}else Oa.x=Ei,Oa.y=Ao,Oa.point=ii}else pa(Oa,ii,Ei,Ao,ji,ga,hi,qa)}function pa(Oa,ii,Ei,Ao,ji,ga,hi,qa){var Oi=(ji+hi)*.5,di=(ga+qa)*.5,xo=Ei>=Oi,fo=Ao>=di,Co=fo<<1|xo;Oa.leaf=!1,Oa=Oa.nodes[Co]||(Oa.nodes[Co]=el()),xo?ji=Oi:hi=Oi,fo?ga=di:qa=di,Ra(Oa,ii,Ei,Ao,ji,ga,hi,qa)}var ja=el();if(ja.add=function(Oa){Ra(ja,Oa,+sr(Oa,++zr),+Lr(Oa,zr),qr,fn,hn,tn)},ja.visit=function(Oa){qi(Oa,ja,qr,fn,hn,tn)},ja.find=function(Oa){return No(ja,Oa[0],Oa[1],qr,fn,hn,tn)},zr=-1,we==null){for(;++zr<Wr;)Ra(ja,er[zr],nn[zr],pn[zr],qr,fn,hn,tn);--zr}else er.forEach(ja.add);return nn=pn=er=or=null,ja}return Ot.x=function(er){return arguments.length?($e=er,Ot):$e},Ot.y=function(er){return arguments.length?(Mt=er,Ot):Mt},Ot.extent=function(er){return arguments.length?(er==null?we=De=Ue=Be=null:(we=+er[0][0],De=+er[0][1],Ue=+er[1][0],Be=+er[1][1]),Ot):we==null?null:[[we,De],[Ue,Be]]},Ot.size=function(er){return arguments.length?(er==null?we=De=Ue=Be=null:(we=De=0,Ue=+er[0],Be=+er[1]),Ot):we==null?null:[Ue-we,Be-De]},Ot};function wi(le){return le.x}function hl(le){return le.y}function el(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function qi(le,we,De,Ue,Be,$e){if(!le(we,De,Ue,Be,$e)){var Mt=(De+Be)*.5,mt=(Ue+$e)*.5,Ot=we.nodes;Ot[0]&&qi(le,Ot[0],De,Ue,Mt,mt),Ot[1]&&qi(le,Ot[1],Mt,Ue,Be,mt),Ot[2]&&qi(le,Ot[2],De,mt,Mt,$e),Ot[3]&&qi(le,Ot[3],Mt,mt,Be,$e)}}function No(le,we,De,Ue,Be,$e,Mt){var mt=1/0,Ot;return function er(or,sr,Lr,nn,pn){if(!(sr>$e||Lr>Mt||nn<Ue||pn<Be)){if(zr=or.point){var zr,Wr=we-or.x,qr=De-or.y,fn=Wr*Wr+qr*qr;if(fn<mt){var hn=Math.sqrt(mt=fn);Ue=we-hn,Be=De-hn,$e=we+hn,Mt=De+hn,Ot=zr}}for(var tn=or.nodes,jn=(sr+nn)*.5,la=(Lr+pn)*.5,Ea=we>=jn,ca=De>=la,Ra=ca<<1|Ea,pa=Ra+4;Ra<pa;++Ra)if(or=tn[Ra&3])switch(Ra&3){case 0:er(or,sr,Lr,jn,la);break;case 1:er(or,jn,Lr,nn,la);break;case 2:er(or,sr,la,jn,pn);break;case 3:er(or,jn,la,nn,pn);break}}}(le,Ue,Be,$e,Mt),Ot}w.interpolateRgb=Hl;function Hl(le,we){le=w.rgb(le),we=w.rgb(we);var De=le.r,Ue=le.g,Be=le.b,$e=we.r-De,Mt=we.g-Ue,mt=we.b-Be;return function(Ot){return"#"+Pr(Math.round(De+$e*Ot))+Pr(Math.round(Ue+Mt*Ot))+Pr(Math.round(Be+mt*Ot))}}w.interpolateObject=Is;function Is(le,we){var De={},Ue={},Be;for(Be in le)Be in we?De[Be]=yo(le[Be],we[Be]):Ue[Be]=le[Be];for(Be in we)Be in le||(Ue[Be]=we[Be]);return function($e){for(Be in De)Ue[Be]=De[Be]($e);return Ue}}w.interpolateNumber=Gi;function Gi(le,we){return le=+le,we=+we,function(De){return le*(1-De)+we*De}}w.interpolateString=Cl;function Cl(le,we){var De=lo.lastIndex=Zi.lastIndex=0,Ue,Be,$e,Mt=-1,mt=[],Ot=[];for(le=le+"",we=we+"";(Ue=lo.exec(le))&&(Be=Zi.exec(we));)($e=Be.index)>De&&($e=we.slice(De,$e),mt[Mt]?mt[Mt]+=$e:mt[++Mt]=$e),(Ue=Ue[0])===(Be=Be[0])?mt[Mt]?mt[Mt]+=Be:mt[++Mt]=Be:(mt[++Mt]=null,Ot.push({i:Mt,x:Gi(Ue,Be)})),De=Zi.lastIndex;return De<we.length&&($e=we.slice(De),mt[Mt]?mt[Mt]+=$e:mt[++Mt]=$e),mt.length<2?Ot[0]?(we=Ot[0].x,function(er){return we(er)+""}):function(){return we}:(we=Ot.length,function(er){for(var or=0,sr;or<we;++or)mt[(sr=Ot[or]).i]=sr.x(er);return mt.join("")})}var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zi=new RegExp(lo.source,"g");w.interpolate=yo;function yo(le,we){for(var De=w.interpolators.length,Ue;--De>=0&&!(Ue=w.interpolators[De](le,we)););return Ue}w.interpolators=[function(le,we){var De=typeof we;return(De==="string"?Dr.has(we.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(we)?Hl:Cl:we instanceof ar?Hl:Array.isArray(we)?uo:De==="object"&&isNaN(we)?Is:Gi)(le,we)}],w.interpolateArray=uo;function uo(le,we){var De=[],Ue=[],Be=le.length,$e=we.length,Mt=Math.min(le.length,we.length),mt;for(mt=0;mt<Mt;++mt)De.push(yo(le[mt],we[mt]));for(;mt<Be;++mt)Ue[mt]=le[mt];for(;mt<$e;++mt)Ue[mt]=we[mt];return function(Ot){for(mt=0;mt<Mt;++mt)Ue[mt]=De[mt](Ot);return Ue}}var ws=function(){return D},vl=w.map({linear:ws,poly:Vs,quad:function(){return Bo},cubic:function(){return sf},sin:function(){return iu},exp:function(){return lf},circle:function(){return uf},elastic:pl,back:ou,bounce:function(){return Gs}}),Nu=w.map({in:D,out:Bu,"in-out":tl,"out-in":function(le){return tl(Bu(le))}});w.ease=function(le){var we=le.indexOf("-"),De=we>=0?le.slice(0,we):le,Ue=we>=0?le.slice(we+1):"in";return De=vl.get(De)||ws,Ue=Nu.get(Ue)||D,ps(Ue(De.apply(null,f.call(arguments,1))))};function ps(le){return function(we){return we<=0?0:we>=1?1:le(we)}}function Bu(le){return function(we){return 1-le(1-we)}}function tl(le){return function(we){return .5*(we<.5?le(2*we):2-le(2-2*we))}}function Bo(le){return le*le}function sf(le){return le*le*le}function rl(le){if(le<=0)return 0;if(le>=1)return 1;var we=le*le,De=we*le;return 4*(le<.5?De:3*(le-we)+De-.75)}function Vs(le){return function(we){return Math.pow(we,le)}}function iu(le){return 1-Math.cos(le*tt)}function lf(le){return Math.pow(2,10*(le-1))}function uf(le){return 1-Math.sqrt(1-le*le)}function pl(le,we){var De;return arguments.length<2&&(we=.45),arguments.length?De=we/He*Math.asin(1/le):(le=1,De=we/4),function(Ue){return 1+le*Math.pow(2,-10*Ue)*Math.sin((Ue-De)*He/we)}}function ou(le){return le||(le=1.70158),function(we){return we*we*((le+1)*we-le)}}function Gs(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}w.interpolateHcl=wu;function wu(le,we){le=w.hcl(le),we=w.hcl(we);var De=le.h,Ue=le.c,Be=le.l,$e=we.h-De,Mt=we.c-Ue,mt=we.l-Be;return isNaN(Mt)&&(Mt=0,Ue=isNaN(Ue)?we.c:Ue),isNaN($e)?($e=0,De=isNaN(De)?we.h:De):$e>180?$e-=360:$e<-180&&($e+=360),function(Ot){return vt(De+$e*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateHsl=Ll;function Ll(le,we){le=w.hsl(le),we=w.hsl(we);var De=le.h,Ue=le.s,Be=le.l,$e=we.h-De,Mt=we.s-Ue,mt=we.l-Be;return isNaN(Mt)&&(Mt=0,Ue=isNaN(Ue)?we.s:Ue),isNaN($e)?($e=0,De=isNaN(De)?we.h:De):$e>180?$e-=360:$e<-180&&($e+=360),function(Ot){return Er(De+$e*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateLab=Tu;function Tu(le,we){le=w.lab(le),we=w.lab(we);var De=le.l,Ue=le.a,Be=le.b,$e=we.l-De,Mt=we.a-Ue,mt=we.b-Be;return function(Ot){return ct(De+$e*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateRound=Uu;function Uu(le,we){return we-=le,function(De){return Math.round(le+we*De)}}w.transform=function(le){var we=T.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(De){if(De!=null){we.setAttribute("transform",De);var Ue=we.transform.baseVal.consolidate()}return new su(Ue?Ue.matrix:lu)})(le)};function su(le){var we=[le.a,le.b],De=[le.c,le.d],Ue=dl(we),Be=ff(we,De),$e=dl(Au(De,we,-Be))||0;we[0]*De[1]<De[0]*we[1]&&(we[0]*=-1,we[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(we[1],we[0]):Math.atan2(-De[0],De[1]))*_t,this.translate=[le.e,le.f],this.scale=[Ue,$e],this.skew=$e?Math.atan2(Be,$e)*_t:0}su.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function ff(le,we){return le[0]*we[0]+le[1]*we[1]}function dl(le){var we=Math.sqrt(ff(le,le));return we&&(le[0]/=we,le[1]/=we),we}function Au(le,we,De){return le[0]+=De*we[0],le[1]+=De*we[1],le}var lu={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=uu;function Fs(le){return le.length?le.pop()+",":""}function Vl(le,we,De,Ue){if(le[0]!==we[0]||le[1]!==we[1]){var Be=De.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Gi(le[0],we[0])},{i:Be-2,x:Gi(le[1],we[1])})}else(we[0]||we[1])&&De.push("translate("+we+")")}function Mu(le,we,De,Ue){le!==we?(le-we>180?we+=360:we-le>180&&(le+=360),Ue.push({i:De.push(Fs(De)+"rotate(",null,")")-2,x:Gi(le,we)})):we&&De.push(Fs(De)+"rotate("+we+")")}function Hu(le,we,De,Ue){le!==we?Ue.push({i:De.push(Fs(De)+"skewX(",null,")")-2,x:Gi(le,we)}):we&&De.push(Fs(De)+"skewX("+we+")")}function Vu(le,we,De,Ue){if(le[0]!==we[0]||le[1]!==we[1]){var Be=De.push(Fs(De)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Gi(le[0],we[0])},{i:Be-2,x:Gi(le[1],we[1])})}else(we[0]!==1||we[1]!==1)&&De.push(Fs(De)+"scale("+we+")")}function uu(le,we){var De=[],Ue=[];return le=w.transform(le),we=w.transform(we),Vl(le.translate,we.translate,De,Ue),Mu(le.rotate,we.rotate,De,Ue),Hu(le.skew,we.skew,De,Ue),Vu(le.scale,we.scale,De,Ue),le=we=null,function(Be){for(var $e=-1,Mt=Ue.length,mt;++$e<Mt;)De[(mt=Ue[$e]).i]=mt.x(Be);return De.join("")}}function cf(le,we){return we=(we-=le=+le)||1/we,function(De){return(De-le)/we}}function Gu(le,we){return we=(we-=le=+le)||1/we,function(De){return Math.max(0,Math.min(1,(De-le)/we))}}w.layout={},w.layout.bundle=function(){return function(le){for(var we=[],De=-1,Ue=le.length;++De<Ue;)we.push(ds(le[De]));return we}};function ds(le){for(var we=le.source,De=le.target,Ue=Dl(we,De),Be=[we];we!==Ue;)we=we.parent,Be.push(we);for(var $e=Be.length;De!==Ue;)Be.splice($e,0,De),De=De.parent;return Be}function Pl(le){for(var we=[],De=le.parent;De!=null;)we.push(le),le=De,De=De.parent;return we.push(le),we}function Dl(le,we){if(le===we)return le;for(var De=Pl(le),Ue=Pl(we),Be=De.pop(),$e=Ue.pop(),Mt=null;Be===$e;)Mt=Be,Be=De.pop(),$e=Ue.pop();return Mt}w.layout.chord=function(){var le={},we,De,Ue,Be,$e=0,Mt,mt,Ot;function er(){var sr={},Lr=[],nn=w.range(Be),pn=[],zr,Wr,qr,fn,hn;for(we=[],De=[],zr=0,fn=-1;++fn<Be;){for(Wr=0,hn=-1;++hn<Be;)Wr+=Ue[fn][hn];Lr.push(Wr),pn.push(w.range(Be)),zr+=Wr}for(Mt&&nn.sort(function(ja,Oa){return Mt(Lr[ja],Lr[Oa])}),mt&&pn.forEach(function(ja,Oa){ja.sort(function(ii,Ei){return mt(Ue[Oa][ii],Ue[Oa][Ei])})}),zr=(He-$e*Be)/zr,Wr=0,fn=-1;++fn<Be;){for(qr=Wr,hn=-1;++hn<Be;){var tn=nn[fn],jn=pn[tn][hn],la=Ue[tn][jn],Ea=Wr,ca=Wr+=la*zr;sr[tn+"-"+jn]={index:tn,subindex:jn,startAngle:Ea,endAngle:ca,value:la}}De[tn]={index:tn,startAngle:qr,endAngle:Wr,value:Lr[tn]},Wr+=$e}for(fn=-1;++fn<Be;)for(hn=fn-1;++hn<Be;){var Ra=sr[fn+"-"+hn],pa=sr[hn+"-"+fn];(Ra.value||pa.value)&&we.push(Ra.value<pa.value?{source:pa,target:Ra}:{source:Ra,target:pa})}Ot&&or()}function or(){we.sort(function(sr,Lr){return Ot((sr.source.value+sr.target.value)/2,(Lr.source.value+Lr.target.value)/2)})}return le.matrix=function(sr){return arguments.length?(Be=(Ue=sr)&&Ue.length,we=De=null,le):Ue},le.padding=function(sr){return arguments.length?($e=sr,we=De=null,le):$e},le.sortGroups=function(sr){return arguments.length?(Mt=sr,we=De=null,le):Mt},le.sortSubgroups=function(sr){return arguments.length?(mt=sr,we=null,le):mt},le.sortChords=function(sr){return arguments.length?(Ot=sr,we&&or(),le):Ot},le.chords=function(){return we||er(),we},le.groups=function(){return De||er(),De},le},w.layout.force=function(){var le={},we=w.dispatch("start","tick","end"),De,Ue=[1,1],Be,$e,Mt=.9,mt=Ws,Ot=bo,er=-30,or=Gl,sr=.1,Lr=.64,nn=[],pn=[],zr,Wr,qr;function fn(tn){return function(jn,la,Ea,ca){if(jn.point!==tn){var Ra=jn.cx-tn.x,pa=jn.cy-tn.y,ja=ca-la,Oa=Ra*Ra+pa*pa;if(ja*ja/Lr<Oa){if(Oa<or){var ii=jn.charge/Oa;tn.px-=Ra*ii,tn.py-=pa*ii}return!0}if(jn.point&&Oa&&Oa<or){var ii=jn.pointCharge/Oa;tn.px-=Ra*ii,tn.py-=pa*ii}}return!jn.charge}}le.tick=function(){if(($e*=.99)<.005)return De=null,we.end({type:"end",alpha:$e=0}),!0;var tn=nn.length,jn=pn.length,la,Ea,ca,Ra,pa,ja,Oa,ii,Ei;for(Ea=0;Ea<jn;++Ea)ca=pn[Ea],Ra=ca.source,pa=ca.target,ii=pa.x-Ra.x,Ei=pa.y-Ra.y,(ja=ii*ii+Ei*Ei)&&(ja=$e*Wr[Ea]*((ja=Math.sqrt(ja))-zr[Ea])/ja,ii*=ja,Ei*=ja,pa.x-=ii*(Oa=Ra.weight+pa.weight?Ra.weight/(Ra.weight+pa.weight):.5),pa.y-=Ei*Oa,Ra.x+=ii*(Oa=1-Oa),Ra.y+=Ei*Oa);if((Oa=$e*sr)&&(ii=Ue[0]/2,Ei=Ue[1]/2,Ea=-1,Oa))for(;++Ea<tn;)ca=nn[Ea],ca.x+=(ii-ca.x)*Oa,ca.y+=(Ei-ca.y)*Oa;if(er)for(Ys(la=w.geom.quadtree(nn),$e,qr),Ea=-1;++Ea<tn;)(ca=nn[Ea]).fixed||la.visit(fn(ca));for(Ea=-1;++Ea<tn;)ca=nn[Ea],ca.fixed?(ca.x=ca.px,ca.y=ca.py):(ca.x-=(ca.px-(ca.px=ca.x))*Mt,ca.y-=(ca.py-(ca.py=ca.y))*Mt);we.tick({type:"tick",alpha:$e})},le.nodes=function(tn){return arguments.length?(nn=tn,le):nn},le.links=function(tn){return arguments.length?(pn=tn,le):pn},le.size=function(tn){return arguments.length?(Ue=tn,le):Ue},le.linkDistance=function(tn){return arguments.length?(mt=typeof tn=="function"?tn:+tn,le):mt},le.distance=le.linkDistance,le.linkStrength=function(tn){return arguments.length?(Ot=typeof tn=="function"?tn:+tn,le):Ot},le.friction=function(tn){return arguments.length?(Mt=+tn,le):Mt},le.charge=function(tn){return arguments.length?(er=typeof tn=="function"?tn:+tn,le):er},le.chargeDistance=function(tn){return arguments.length?(or=tn*tn,le):Math.sqrt(or)},le.gravity=function(tn){return arguments.length?(sr=+tn,le):sr},le.theta=function(tn){return arguments.length?(Lr=tn*tn,le):Math.sqrt(Lr)},le.alpha=function(tn){return arguments.length?(tn=+tn,$e?tn>0?$e=tn:(De.c=null,De.t=NaN,De=null,we.end({type:"end",alpha:$e=0})):tn>0&&(we.start({type:"start",alpha:$e=tn}),De=yn(le.tick)),le):$e},le.start=function(){var tn,jn=nn.length,la=pn.length,Ea=Ue[0],ca=Ue[1],Ra,pa;for(tn=0;tn<jn;++tn)(pa=nn[tn]).index=tn,pa.weight=0;for(tn=0;tn<la;++tn)pa=pn[tn],typeof pa.source=="number"&&(pa.source=nn[pa.source]),typeof pa.target=="number"&&(pa.target=nn[pa.target]),++pa.source.weight,++pa.target.weight;for(tn=0;tn<jn;++tn)pa=nn[tn],isNaN(pa.x)&&(pa.x=ja("x",Ea)),isNaN(pa.y)&&(pa.y=ja("y",ca)),isNaN(pa.px)&&(pa.px=pa.x),isNaN(pa.py)&&(pa.py=pa.y);if(zr=[],typeof mt=="function")for(tn=0;tn<la;++tn)zr[tn]=+mt.call(this,pn[tn],tn);else for(tn=0;tn<la;++tn)zr[tn]=mt;if(Wr=[],typeof Ot=="function")for(tn=0;tn<la;++tn)Wr[tn]=+Ot.call(this,pn[tn],tn);else for(tn=0;tn<la;++tn)Wr[tn]=Ot;if(qr=[],typeof er=="function")for(tn=0;tn<jn;++tn)qr[tn]=+er.call(this,nn[tn],tn);else for(tn=0;tn<jn;++tn)qr[tn]=er;function ja(Oa,ii){if(!Ra){for(Ra=new Array(jn),ji=0;ji<jn;++ji)Ra[ji]=[];for(ji=0;ji<la;++ji){var Ei=pn[ji];Ra[Ei.source.index].push(Ei.target),Ra[Ei.target.index].push(Ei.source)}}for(var Ao=Ra[tn],ji=-1,ga=Ao.length,hi;++ji<ga;)if(!isNaN(hi=Ao[ji][Oa]))return hi;return Math.random()*ii}return le.resume()},le.resume=function(){return le.alpha(.1)},le.stop=function(){return le.alpha(0)},le.drag=function(){if(Be||(Be=w.behavior.drag().origin(D).on("dragstart.force",Su).on("drag.force",hn).on("dragend.force",zs)),!arguments.length)return Be;this.on("mouseover.force",Uo).on("mouseout.force",fu).call(Be)};function hn(tn){tn.px=w.event.x,tn.py=w.event.y,le.resume()}return w.rebind(le,we,"on")};function Su(le){le.fixed|=2}function zs(le){le.fixed&=-7}function Uo(le){le.fixed|=4,le.px=le.x,le.py=le.y}function fu(le){le.fixed&=-5}function Ys(le,we,De){var Ue=0,Be=0;if(le.charge=0,!le.leaf)for(var $e=le.nodes,Mt=$e.length,mt=-1,Ot;++mt<Mt;)Ot=$e[mt],Ot!=null&&(Ys(Ot,we,De),le.charge+=Ot.charge,Ue+=Ot.charge*Ot.cx,Be+=Ot.charge*Ot.cy);if(le.point){le.leaf||(le.point.x+=Math.random()-.5,le.point.y+=Math.random()-.5);var er=we*De[le.point.index];le.charge+=le.pointCharge=er,Ue+=er*le.point.x,Be+=er*le.point.y}le.cx=Ue/le.charge,le.cy=Be/le.charge}var Ws=20,bo=1,Gl=1/0;w.layout.hierarchy=function(){var le=cu,we=Wl,De=Rl;function Ue(Be){var $e=[Be],Mt=[],mt;for(Be.depth=0;(mt=$e.pop())!=null;)if(Mt.push(mt),(er=we.call(Ue,mt,mt.depth))&&(Ot=er.length)){for(var Ot,er,or;--Ot>=0;)$e.push(or=er[Ot]),or.parent=mt,or.depth=mt.depth+1;De&&(mt.value=0),mt.children=er}else De&&(mt.value=+De.call(Ue,mt,mt.depth)||0),delete mt.children;return Os(Be,function(sr){var Lr,nn;le&&(Lr=sr.children)&&Lr.sort(le),De&&(nn=sr.parent)&&(nn.value+=sr.value)}),Mt}return Ue.sort=function(Be){return arguments.length?(le=Be,Ue):le},Ue.children=function(Be){return arguments.length?(we=Be,Ue):we},Ue.value=function(Be){return arguments.length?(De=Be,Ue):De},Ue.revalue=function(Be){return De&&(yl(Be,function($e){$e.children&&($e.value=0)}),Os(Be,function($e){var Mt;$e.children||($e.value=+De.call(Ue,$e,$e.depth)||0),(Mt=$e.parent)&&(Mt.value+=$e.value)})),Be},Ue};function Yl(le,we){return w.rebind(le,we,"sort","children","value"),le.nodes=le,le.links=jl,le}function yl(le,we){for(var De=[le];(le=De.pop())!=null;)if(we(le),(Be=le.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)De.push(Be[Ue])}function Os(le,we){for(var De=[le],Ue=[];(le=De.pop())!=null;)if(Ue.push(le),(Mt=le.children)&&($e=Mt.length))for(var Be=-1,$e,Mt;++Be<$e;)De.push(Mt[Be]);for(;(le=Ue.pop())!=null;)we(le)}function Wl(le){return le.children}function Rl(le){return le.value}function cu(le,we){return we.value-le.value}function jl(le){return w.merge(le.map(function(we){return(we.children||[]).map(function(De){return{source:we,target:De}})}))}w.layout.partition=function(){var le=w.layout.hierarchy(),we=[1,1];function De($e,Mt,mt,Ot){var er=$e.children;if($e.x=Mt,$e.y=$e.depth*Ot,$e.dx=mt,$e.dy=Ot,er&&(sr=er.length)){var or=-1,sr,Lr,nn;for(mt=$e.value?mt/$e.value:0;++or<sr;)De(Lr=er[or],Mt,nn=Lr.value*mt,Ot),Mt+=nn}}function Ue($e){var Mt=$e.children,mt=0;if(Mt&&(er=Mt.length))for(var Ot=-1,er;++Ot<er;)mt=Math.max(mt,Ue(Mt[Ot]));return 1+mt}function Be($e,Mt){var mt=le.call(this,$e,Mt);return De(mt[0],0,we[0],we[1]/Ue(mt[0])),mt}return Be.size=function($e){return arguments.length?(we=$e,Be):we},Yl(Be,le)},w.layout.pie=function(){var le=Number,we=ml,De=0,Ue=He,Be=0;function $e(Mt){var mt=Mt.length,Ot=Mt.map(function(fn,hn){return+le.call($e,fn,hn)}),er=+(typeof De=="function"?De.apply(this,arguments):De),or=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-er,sr=Math.min(Math.abs(or)/mt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Lr=sr*(or<0?-1:1),nn=w.sum(Ot),pn=nn?(or-mt*Lr)/nn:0,zr=w.range(mt),Wr=[],qr;return we!=null&&zr.sort(we===ml?function(fn,hn){return Ot[hn]-Ot[fn]}:function(fn,hn){return we(Mt[fn],Mt[hn])}),zr.forEach(function(fn){Wr[fn]={data:Mt[fn],value:qr=Ot[fn],startAngle:er,endAngle:er+=qr*pn+Lr,padAngle:sr}}),Wr}return $e.value=function(Mt){return arguments.length?(le=Mt,$e):le},$e.sort=function(Mt){return arguments.length?(we=Mt,$e):we},$e.startAngle=function(Mt){return arguments.length?(De=Mt,$e):De},$e.endAngle=function(Mt){return arguments.length?(Ue=Mt,$e):Ue},$e.padAngle=function(Mt){return arguments.length?(Be=Mt,$e):Be},$e};var ml={};w.layout.stack=function(){var le=D,we=Xl,De=xl,Ue=Cf,Be=hf,$e=Ts;function Mt(mt,Ot){if(!(pn=mt.length))return mt;var er=mt.map(function(fn,hn){return le.call(Mt,fn,hn)}),or=er.map(function(fn){return fn.map(function(hn,tn){return[Be.call(Mt,hn,tn),$e.call(Mt,hn,tn)]})}),sr=we.call(Mt,or,Ot);er=w.permute(er,sr),or=w.permute(or,sr);var Lr=De.call(Mt,or,Ot),nn=er[0].length,pn,zr,Wr,qr;for(Wr=0;Wr<nn;++Wr)for(Ue.call(Mt,er[0][Wr],qr=Lr[Wr],or[0][Wr][1]),zr=1;zr<pn;++zr)Ue.call(Mt,er[zr][Wr],qr+=or[zr-1][Wr][1],or[zr][Wr][1]);return mt}return Mt.values=function(mt){return arguments.length?(le=mt,Mt):le},Mt.order=function(mt){return arguments.length?(we=typeof mt=="function"?mt:Eu.get(mt)||Xl,Mt):we},Mt.offset=function(mt){return arguments.length?(De=typeof mt=="function"?mt:Il.get(mt)||xl,Mt):De},Mt.x=function(mt){return arguments.length?(Be=mt,Mt):Be},Mt.y=function(mt){return arguments.length?($e=mt,Mt):$e},Mt.out=function(mt){return arguments.length?(Ue=mt,Mt):Ue},Mt};function hf(le){return le.x}function Ts(le){return le.y}function Cf(le,we,De){le.y0=we,le.y=De}var Eu=w.map({"inside-out":function(le){var we=le.length,De,Ue,Be=le.map(Zl),$e=le.map(Yu),Mt=w.range(we).sort(function(sr,Lr){return Be[sr]-Be[Lr]}),mt=0,Ot=0,er=[],or=[];for(De=0;De<we;++De)Ue=Mt[De],mt<Ot?(mt+=$e[Ue],er.push(Ue)):(Ot+=$e[Ue],or.push(Ue));return or.reverse().concat(er)},reverse:function(le){return w.range(le.length).reverse()},default:Xl}),Il=w.map({silhouette:function(le){var we=le.length,De=le[0].length,Ue=[],Be=0,$e,Mt,mt,Ot=[];for(Mt=0;Mt<De;++Mt){for($e=0,mt=0;$e<we;$e++)mt+=le[$e][Mt][1];mt>Be&&(Be=mt),Ue.push(mt)}for(Mt=0;Mt<De;++Mt)Ot[Mt]=(Be-Ue[Mt])/2;return Ot},wiggle:function(le){var we=le.length,De=le[0],Ue=De.length,Be,$e,Mt,mt,Ot,er,or,sr,Lr,nn=[];for(nn[0]=sr=Lr=0,$e=1;$e<Ue;++$e){for(Be=0,mt=0;Be<we;++Be)mt+=le[Be][$e][1];for(Be=0,Ot=0,or=De[$e][0]-De[$e-1][0];Be<we;++Be){for(Mt=0,er=(le[Be][$e][1]-le[Be][$e-1][1])/(2*or);Mt<Be;++Mt)er+=(le[Mt][$e][1]-le[Mt][$e-1][1])/or;Ot+=er*le[Be][$e][1]}nn[$e]=sr-=mt?Ot/mt*or:0,sr<Lr&&(Lr=sr)}for($e=0;$e<Ue;++$e)nn[$e]-=Lr;return nn},expand:function(le){var we=le.length,De=le[0].length,Ue=1/we,Be,$e,Mt,mt=[];for($e=0;$e<De;++$e){for(Be=0,Mt=0;Be<we;Be++)Mt+=le[Be][$e][1];if(Mt)for(Be=0;Be<we;Be++)le[Be][$e][1]/=Mt;else for(Be=0;Be<we;Be++)le[Be][$e][1]=Ue}for($e=0;$e<De;++$e)mt[$e]=0;return mt},zero:xl});function Xl(le){return w.range(le.length)}function xl(le){for(var we=-1,De=le[0].length,Ue=[];++we<De;)Ue[we]=0;return Ue}function Zl(le){for(var we=1,De=0,Ue=le[0][1],Be,$e=le.length;we<$e;++we)(Be=le[we][1])>Ue&&(De=we,Ue=Be);return De}function Yu(le){return le.reduce(Wu,0)}function Wu(le,we){return le+we[1]}w.layout.histogram=function(){var le=!0,we=Number,De=Fl,Ue=Lf;function Be($e,Lr){for(var mt=[],Ot=$e.map(we,this),er=De.call(this,Ot,Lr),or=Ue.call(this,er,Ot,Lr),sr,Lr=-1,nn=Ot.length,pn=or.length-1,zr=le?1:1/nn,Wr;++Lr<pn;)sr=mt[Lr]=[],sr.dx=or[Lr+1]-(sr.x=or[Lr]),sr.y=0;if(pn>0)for(Lr=-1;++Lr<nn;)Wr=Ot[Lr],Wr>=er[0]&&Wr<=er[1]&&(sr=mt[w.bisect(or,Wr,1,pn)-1],sr.y+=zr,sr.push($e[Lr]));return mt}return Be.value=function($e){return arguments.length?(we=$e,Be):we},Be.range=function($e){return arguments.length?(De=at($e),Be):De},Be.bins=function($e){return arguments.length?(Ue=typeof $e=="number"?function(Mt){return Yi(Mt,$e)}:at($e),Be):Ue},Be.frequency=function($e){return arguments.length?(le=!!$e,Be):le},Be};function Lf(le,we){return Yi(le,Math.ceil(Math.log(we.length)/Math.LN2+1))}function Yi(le,we){for(var De=-1,Ue=+le[0],Be=(le[1]-Ue)/we,$e=[];++De<=we;)$e[De]=Be*De+Ue;return $e}function Fl(le){return[w.min(le),w.max(le)]}w.layout.pack=function(){var le=w.layout.hierarchy().sort(bl),we=0,De=[1,1],Ue;function Be($e,Mt){var mt=le.call(this,$e,Mt),Ot=mt[0],er=De[0],or=De[1],sr=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(Ot.x=Ot.y=0,Os(Ot,function(nn){nn.r=+sr(nn.value)}),Os(Ot,_o),we){var Lr=we*(Ue?1:Math.max(2*Ot.r/er,2*Ot.r/or))/2;Os(Ot,function(nn){nn.r+=Lr}),Os(Ot,_o),Os(Ot,function(nn){nn.r-=Lr})}return nl(Ot,er/2,or/2,Ue?1:1/Math.max(2*Ot.r/er,2*Ot.r/or)),mt}return Be.size=function($e){return arguments.length?(De=$e,Be):De},Be.radius=function($e){return arguments.length?(Ue=$e==null||typeof $e=="function"?$e:+$e,Be):Ue},Be.padding=function($e){return arguments.length?(we=+$e,Be):we},Yl(Be,le)};function bl(le,we){return le.value-we.value}function gs(le,we){var De=le._pack_next;le._pack_next=we,we._pack_prev=le,we._pack_next=De,De._pack_prev=we}function As(le,we){le._pack_next=we,we._pack_prev=le}function Kl(le,we){var De=we.x-le.x,Ue=we.y-le.y,Be=le.r+we.r;return .999*Be*Be>De*De+Ue*Ue}function _o(le){if(!(we=le.children)||!(Lr=we.length))return;var we,De=1/0,Ue=-1/0,Be=1/0,$e=-1/0,Mt,mt,Ot,er,or,sr,Lr;function nn(tn){De=Math.min(tn.x-tn.r,De),Ue=Math.max(tn.x+tn.r,Ue),Be=Math.min(tn.y-tn.r,Be),$e=Math.max(tn.y+tn.r,$e)}if(we.forEach(ju),Mt=we[0],Mt.x=-Mt.r,Mt.y=0,nn(Mt),Lr>1&&(mt=we[1],mt.x=mt.r,mt.y=0,nn(mt),Lr>2))for(Ot=we[2],al(Mt,mt,Ot),nn(Ot),gs(Mt,Ot),Mt._pack_prev=Ot,gs(Ot,mt),mt=Mt._pack_next,er=3;er<Lr;er++){al(Mt,mt,Ot=we[er]);var pn=0,zr=1,Wr=1;for(or=mt._pack_next;or!==mt;or=or._pack_next,zr++)if(Kl(or,Ot)){pn=1;break}if(pn==1)for(sr=Mt._pack_prev;sr!==or._pack_prev&&!Kl(sr,Ot);sr=sr._pack_prev,Wr++);pn?(zr<Wr||zr==Wr&&mt.r<Mt.r?As(Mt,mt=or):As(Mt=sr,mt),er--):(gs(Mt,Ot),mt=Ot,nn(Ot))}var qr=(De+Ue)/2,fn=(Be+$e)/2,hn=0;for(er=0;er<Lr;er++)Ot=we[er],Ot.x-=qr,Ot.y-=fn,hn=Math.max(hn,Ot.r+Math.sqrt(Ot.x*Ot.x+Ot.y*Ot.y));le.r=hn,we.forEach(Ms)}function ju(le){le._pack_next=le._pack_prev=le}function Ms(le){delete le._pack_next,delete le._pack_prev}function nl(le,we,De,Ue){var Be=le.children;if(le.x=we+=Ue*le.x,le.y=De+=Ue*le.y,le.r*=Ue,Be)for(var $e=-1,Mt=Be.length;++$e<Mt;)nl(Be[$e],we,De,Ue)}function al(le,we,De){var Ue=le.r+De.r,Be=we.x-le.x,$e=we.y-le.y;if(Ue&&(Be||$e)){var Mt=we.r+De.r,mt=Be*Be+$e*$e;Mt*=Mt,Ue*=Ue;var Ot=.5+(Ue-Mt)/(2*mt),er=Math.sqrt(Math.max(0,2*Mt*(Ue+mt)-(Ue-=mt)*Ue-Mt*Mt))/(2*mt);De.x=le.x+Ot*Be+er*$e,De.y=le.y+Ot*$e-er*Be}else De.x=le.x+Ue,De.y=le.y}w.layout.tree=function(){var le=w.layout.hierarchy().sort(null).value(null),we=js,De=[1,1],Ue=null;function Be(or,sr){var Lr=le.call(this,or,sr),nn=Lr[0],pn=$e(nn);if(Os(pn,Mt),pn.parent.m=-pn.z,yl(pn,mt),Ue)yl(nn,er);else{var zr=nn,Wr=nn,qr=nn;yl(nn,function(jn){jn.x<zr.x&&(zr=jn),jn.x>Wr.x&&(Wr=jn),jn.depth>qr.depth&&(qr=jn)});var fn=we(zr,Wr)/2-zr.x,hn=De[0]/(Wr.x+we(Wr,zr)/2+fn),tn=De[1]/(qr.depth||1);yl(nn,function(jn){jn.x=(jn.x+fn)*hn,jn.y=jn.depth*tn})}return Lr}function $e(or){for(var sr={A:null,children:[or]},Lr=[sr],nn;(nn=Lr.pop())!=null;)for(var pn=nn.children,zr,Wr=0,qr=pn.length;Wr<qr;++Wr)Lr.push((pn[Wr]=zr={_:pn[Wr],parent:nn,children:(zr=pn[Wr].children)&&zr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wr}).a=zr);return sr.children[0]}function Mt(or){var sr=or.children,Lr=or.parent.children,nn=or.i?Lr[or.i-1]:null;if(sr.length){Es(or);var pn=(sr[0].z+sr[sr.length-1].z)/2;nn?(or.z=nn.z+we(or._,nn._),or.m=or.z-pn):or.z=pn}else nn&&(or.z=nn.z+we(or._,nn._));or.parent.A=Ot(or,nn,or.parent.A||Lr[0])}function mt(or){or._.x=or.z+or.parent.m,or.m+=or.parent.m}function Ot(or,sr,Lr){if(sr){for(var nn=or,pn=or,zr=sr,Wr=nn.parent.children[0],qr=nn.m,fn=pn.m,hn=zr.m,tn=Wr.m,jn;zr=eo(zr),nn=Ss(nn),zr&&nn;)Wr=Ss(Wr),pn=eo(pn),pn.a=or,jn=zr.z+hn-nn.z-qr+we(zr._,nn._),jn>0&&(Ho(Xu(zr,or,Lr),or,jn),qr+=jn,fn+=jn),hn+=zr.m,qr+=nn.m,tn+=Wr.m,fn+=pn.m;zr&&!eo(pn)&&(pn.t=zr,pn.m+=hn-fn),nn&&!Ss(Wr)&&(Wr.t=nn,Wr.m+=qr-tn,Lr=or)}return Lr}function er(or){or.x*=De[0],or.y=or.depth*De[1]}return Be.separation=function(or){return arguments.length?(we=or,Be):we},Be.size=function(or){return arguments.length?(Ue=(De=or)==null?er:null,Be):Ue?null:De},Be.nodeSize=function(or){return arguments.length?(Ue=(De=or)==null?null:er,Be):Ue?De:null},Yl(Be,le)};function js(le,we){return le.parent==we.parent?1:2}function Ss(le){var we=le.children;return we.length?we[0]:le.t}function eo(le){var we=le.children,De;return(De=we.length)?we[De-1]:le.t}function Ho(le,we,De){var Ue=De/(we.i-le.i);we.c-=Ue,we.s+=De,le.c+=Ue,we.z+=De,we.m+=De}function Es(le){for(var we=0,De=0,Ue=le.children,Be=Ue.length,$e;--Be>=0;)$e=Ue[Be],$e.z+=we,$e.m+=we,we+=$e.s+(De+=$e.c)}function Xu(le,we,De){return le.a.parent===we.parent?le.a:De}w.layout.cluster=function(){var le=w.layout.hierarchy().sort(null).value(null),we=js,De=[1,1],Ue=!1;function Be($e,Mt){var mt=le.call(this,$e,Mt),Ot=mt[0],er,or=0;Os(Ot,function(zr){var Wr=zr.children;Wr&&Wr.length?(zr.x=Zu(Wr),zr.y=hu(Wr)):(zr.x=er?or+=we(zr,er):0,zr.y=0,er=zr)});var sr=Tt(Ot),Lr=Yt(Ot),nn=sr.x-we(sr,Lr)/2,pn=Lr.x+we(Lr,sr)/2;return Os(Ot,Ue?function(zr){zr.x=(zr.x-Ot.x)*De[0],zr.y=(Ot.y-zr.y)*De[1]}:function(zr){zr.x=(zr.x-nn)/(pn-nn)*De[0],zr.y=(1-(Ot.y?zr.y/Ot.y:1))*De[1]}),mt}return Be.separation=function($e){return arguments.length?(we=$e,Be):we},Be.size=function($e){return arguments.length?(Ue=(De=$e)==null,Be):Ue?null:De},Be.nodeSize=function($e){return arguments.length?(Ue=(De=$e)!=null,Be):Ue?De:null},Yl(Be,le)};function hu(le){return 1+w.max(le,function(we){return we.y})}function Zu(le){return le.reduce(function(we,De){return we+De.x},0)/le.length}function Tt(le){var we=le.children;return we&&we.length?Tt(we[0]):le}function Yt(le){var we=le.children,De;return we&&(De=we.length)?Yt(we[De-1]):le}w.layout.treemap=function(){var le=w.layout.hierarchy(),we=Math.round,De=[1,1],Ue=null,Be=yr,$e=!1,Mt,mt="squarify",Ot=.5*(1+Math.sqrt(5));function er(zr,Wr){for(var qr=-1,fn=zr.length,hn,tn;++qr<fn;)tn=(hn=zr[qr]).value*(Wr<0?0:Wr),hn.area=isNaN(tn)||tn<=0?0:tn}function or(zr){var Wr=zr.children;if(Wr&&Wr.length){var qr=Be(zr),fn=[],hn=Wr.slice(),tn,jn=1/0,la,Ea=mt==="slice"?qr.dx:mt==="dice"?qr.dy:mt==="slice-dice"?zr.depth&1?qr.dy:qr.dx:Math.min(qr.dx,qr.dy),ca;for(er(hn,qr.dx*qr.dy/zr.value),fn.area=0;(ca=hn.length)>0;)fn.push(tn=hn[ca-1]),fn.area+=tn.area,mt!=="squarify"||(la=Lr(fn,Ea))<=jn?(hn.pop(),jn=la):(fn.area-=fn.pop().area,nn(fn,Ea,qr,!1),Ea=Math.min(qr.dx,qr.dy),fn.length=fn.area=0,jn=1/0);fn.length&&(nn(fn,Ea,qr,!0),fn.length=fn.area=0),Wr.forEach(or)}}function sr(zr){var Wr=zr.children;if(Wr&&Wr.length){var qr=Be(zr),fn=Wr.slice(),hn,tn=[];for(er(fn,qr.dx*qr.dy/zr.value),tn.area=0;hn=fn.pop();)tn.push(hn),tn.area+=hn.area,hn.z!=null&&(nn(tn,hn.z?qr.dx:qr.dy,qr,!fn.length),tn.length=tn.area=0);Wr.forEach(sr)}}function Lr(zr,Wr){for(var qr=zr.area,fn,hn=0,tn=1/0,jn=-1,la=zr.length;++jn<la;)!(fn=zr[jn].area)||(fn<tn&&(tn=fn),fn>hn&&(hn=fn));return qr*=qr,Wr*=Wr,qr?Math.max(Wr*hn*Ot/qr,qr/(Wr*tn*Ot)):1/0}function nn(zr,Wr,qr,fn){var hn=-1,tn=zr.length,jn=qr.x,la=qr.y,Ea=Wr?we(zr.area/Wr):0,ca;if(Wr==qr.dx){for((fn||Ea>qr.dy)&&(Ea=qr.dy);++hn<tn;)ca=zr[hn],ca.x=jn,ca.y=la,ca.dy=Ea,jn+=ca.dx=Math.min(qr.x+qr.dx-jn,Ea?we(ca.area/Ea):0);ca.z=!0,ca.dx+=qr.x+qr.dx-jn,qr.y+=Ea,qr.dy-=Ea}else{for((fn||Ea>qr.dx)&&(Ea=qr.dx);++hn<tn;)ca=zr[hn],ca.x=jn,ca.y=la,ca.dx=Ea,la+=ca.dy=Math.min(qr.y+qr.dy-la,Ea?we(ca.area/Ea):0);ca.z=!1,ca.dy+=qr.y+qr.dy-la,qr.x+=Ea,qr.dx-=Ea}}function pn(zr){var Wr=Mt||le(zr),qr=Wr[0];return qr.x=qr.y=0,qr.value?(qr.dx=De[0],qr.dy=De[1]):qr.dx=qr.dy=0,Mt&&le.revalue(qr),er([qr],qr.dx*qr.dy/qr.value),(Mt?sr:or)(qr),$e&&(Mt=Wr),Wr}return pn.size=function(zr){return arguments.length?(De=zr,pn):De},pn.padding=function(zr){if(!arguments.length)return Ue;function Wr(hn){var tn=zr.call(pn,hn,hn.depth);return tn==null?yr(hn):vr(hn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function qr(hn){return vr(hn,zr)}var fn;return Be=(Ue=zr)==null?yr:(fn=typeof zr)=="function"?Wr:(fn==="number"&&(zr=[zr,zr,zr,zr]),qr),pn},pn.round=function(zr){return arguments.length?(we=zr?Math.round:Number,pn):we!=Number},pn.sticky=function(zr){return arguments.length?($e=zr,Mt=null,pn):$e},pn.ratio=function(zr){return arguments.length?(Ot=zr,pn):Ot},pn.mode=function(zr){return arguments.length?(mt=zr+"",pn):mt},Yl(pn,le)};function yr(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function vr(le,we){var De=le.x+we[3],Ue=le.y+we[0],Be=le.dx-we[1]-we[3],$e=le.dy-we[0]-we[2];return Be<0&&(De+=Be/2,Be=0),$e<0&&(Ue+=$e/2,$e=0),{x:De,y:Ue,dx:Be,dy:$e}}w.random={normal:function(le,we){var De=arguments.length;return De<2&&(we=1),De<1&&(le=0),function(){var Ue,Be,$e;do Ue=Math.random()*2-1,Be=Math.random()*2-1,$e=Ue*Ue+Be*Be;while(!$e||$e>1);return le+we*Ue*Math.sqrt(-2*Math.log($e)/$e)}},logNormal:function(){var le=w.random.normal.apply(w,arguments);return function(){return Math.exp(le())}},bates:function(le){var we=w.random.irwinHall(le);return function(){return we()/le}},irwinHall:function(le){return function(){for(var we=0,De=0;De<le;De++)we+=Math.random();return we}}},w.scale={};function Nr(le){var we=le[0],De=le[le.length-1];return we<De?[we,De]:[De,we]}function ln(le){return le.rangeExtent?le.rangeExtent():Nr(le.range())}function _n(le,we,De,Ue){var Be=De(le[0],le[1]),$e=Ue(we[0],we[1]);return function(Mt){return $e(Be(Mt))}}function Pn(le,we){var De=0,Ue=le.length-1,Be=le[De],$e=le[Ue],Mt;return $e<Be&&(Mt=De,De=Ue,Ue=Mt,Mt=Be,Be=$e,$e=Mt),le[De]=we.floor(Be),le[Ue]=we.ceil($e),le}function zn(le){return le?{floor:function(we){return Math.floor(we/le)*le},ceil:function(we){return Math.ceil(we/le)*le}}:Wn}var Wn={floor:D,ceil:D};function Tn(le,we,De,Ue){var Be=[],$e=[],Mt=0,mt=Math.min(le.length,we.length)-1;for(le[mt]<le[0]&&(le=le.slice().reverse(),we=we.slice().reverse());++Mt<=mt;)Be.push(De(le[Mt-1],le[Mt])),$e.push(Ue(we[Mt-1],we[Mt]));return function(Ot){var er=w.bisect(le,Ot,1,mt)-1;return $e[er](Be[er](Ot))}}w.scale.linear=function(){return Hn([0,1],[0,1],yo,!1)};function Hn(le,we,De,Ue){var Be,$e;function Mt(){var Ot=Math.min(le.length,we.length)>2?Tn:_n,er=Ue?Gu:cf;return Be=Ot(le,we,er,De),$e=Ot(we,le,er,yo),mt}function mt(Ot){return Be(Ot)}return mt.invert=function(Ot){return $e(Ot)},mt.domain=function(Ot){return arguments.length?(le=Ot.map(Number),Mt()):le},mt.range=function(Ot){return arguments.length?(we=Ot,Mt()):we},mt.rangeRound=function(Ot){return mt.range(Ot).interpolate(Uu)},mt.clamp=function(Ot){return arguments.length?(Ue=Ot,Mt()):Ue},mt.interpolate=function(Ot){return arguments.length?(De=Ot,Mt()):De},mt.ticks=function(Ot){return Va(le,Ot)},mt.tickFormat=function(Ot,er){return d3_scale_linearTickFormat(le,Ot,er)},mt.nice=function(Ot){return Xn(le,Ot),Mt()},mt.copy=function(){return Hn(le,we,De,Ue)},Mt()}function On(le,we){return w.rebind(le,we,"range","rangeRound","interpolate","clamp")}function Xn(le,we){return Pn(le,zn(aa(le,we)[2])),Pn(le,zn(aa(le,we)[2])),le}function aa(le,we){we==null&&(we=10);var De=Nr(le),Ue=De[1]-De[0],Be=Math.pow(10,Math.floor(Math.log(Ue/we)/Math.LN10)),$e=we/Ue*Be;return $e<=.15?Be*=10:$e<=.35?Be*=5:$e<=.75&&(Be*=2),De[0]=Math.ceil(De[0]/Be)*Be,De[1]=Math.floor(De[1]/Be)*Be+Be*.5,De[2]=Be,De}function Va(le,we){return w.range.apply(w,aa(le,we))}w.scale.log=function(){return Ia(w.scale.linear().domain([0,1]),10,!0,[1,10])};function Ia(le,we,De,Ue){function Be(mt){return(De?Math.log(mt<0?0:mt):-Math.log(mt>0?0:-mt))/Math.log(we)}function $e(mt){return De?Math.pow(we,mt):-Math.pow(we,-mt)}function Mt(mt){return le(Be(mt))}return Mt.invert=function(mt){return $e(le.invert(mt))},Mt.domain=function(mt){return arguments.length?(De=mt[0]>=0,le.domain((Ue=mt.map(Number)).map(Be)),Mt):Ue},Mt.base=function(mt){return arguments.length?(we=+mt,le.domain(Ue.map(Be)),Mt):we},Mt.nice=function(){var mt=Pn(Ue.map(Be),De?Math:Ga);return le.domain(mt),Ue=mt.map($e),Mt},Mt.ticks=function(){var mt=Nr(Ue),Ot=[],er=mt[0],or=mt[1],sr=Math.floor(Be(er)),Lr=Math.ceil(Be(or)),nn=we%1?2:we;if(isFinite(Lr-sr)){if(De){for(;sr<Lr;sr++)for(var pn=1;pn<nn;pn++)Ot.push($e(sr)*pn);Ot.push($e(sr))}else for(Ot.push($e(sr));sr++<Lr;)for(var pn=nn-1;pn>0;pn--)Ot.push($e(sr)*pn);for(sr=0;Ot[sr]<er;sr++);for(Lr=Ot.length;Ot[Lr-1]>or;Lr--);Ot=Ot.slice(sr,Lr)}return Ot},Mt.copy=function(){return Ia(le.copy(),we,De,Ue)},On(Mt,le)}var Ga={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};w.scale.pow=function(){return Ya(w.scale.linear(),1,[0,1])};function Ya(le,we,De){var Ue=ra(we),Be=ra(1/we);function $e(Mt){return le(Ue(Mt))}return $e.invert=function(Mt){return Be(le.invert(Mt))},$e.domain=function(Mt){return arguments.length?(le.domain((De=Mt.map(Number)).map(Ue)),$e):De},$e.ticks=function(Mt){return Va(De,Mt)},$e.tickFormat=function(Mt,mt){return d3_scale_linearTickFormat(De,Mt,mt)},$e.nice=function(Mt){return $e.domain(Xn(De,Mt))},$e.exponent=function(Mt){return arguments.length?(Ue=ra(we=Mt),Be=ra(1/we),le.domain(De.map(Ue)),$e):we},$e.copy=function(){return Ya(le.copy(),we,De)},On($e,le)}function ra(le){return function(we){return we<0?-Math.pow(-we,le):Math.pow(we,le)}}w.scale.sqrt=function(){return w.scale.pow().exponent(.5)},w.scale.ordinal=function(){return ma([],{t:"range",a:[[]]})};function ma(le,we){var De,Ue,Be;function $e(mt){return Ue[((De.get(mt)||(we.t==="range"?De.set(mt,le.push(mt)):NaN))-1)%Ue.length]}function Mt(mt,Ot){return w.range(le.length).map(function(er){return mt+Ot*er})}return $e.domain=function(mt){if(!arguments.length)return le;le=[],De=new A;for(var Ot=-1,er=mt.length,or;++Ot<er;)De.has(or=mt[Ot])||De.set(or,le.push(or));return $e[we.t].apply($e,we.a)},$e.range=function(mt){return arguments.length?(Ue=mt,Be=0,we={t:"range",a:arguments},$e):Ue},$e.rangePoints=function(mt,Ot){arguments.length<2&&(Ot=0);var er=mt[0],or=mt[1],sr=le.length<2?(er=(er+or)/2,0):(or-er)/(le.length-1+Ot);return Ue=Mt(er+sr*Ot/2,sr),Be=0,we={t:"rangePoints",a:arguments},$e},$e.rangeRoundPoints=function(mt,Ot){arguments.length<2&&(Ot=0);var er=mt[0],or=mt[1],sr=le.length<2?(er=or=Math.round((er+or)/2),0):(or-er)/(le.length-1+Ot)|0;return Ue=Mt(er+Math.round(sr*Ot/2+(or-er-(le.length-1+Ot)*sr)/2),sr),Be=0,we={t:"rangeRoundPoints",a:arguments},$e},$e.rangeBands=function(mt,Ot,er){arguments.length<2&&(Ot=0),arguments.length<3&&(er=Ot);var or=mt[1]<mt[0],sr=mt[or-0],Lr=mt[1-or],nn=(Lr-sr)/(le.length-Ot+2*er);return Ue=Mt(sr+nn*er,nn),or&&Ue.reverse(),Be=nn*(1-Ot),we={t:"rangeBands",a:arguments},$e},$e.rangeRoundBands=function(mt,Ot,er){arguments.length<2&&(Ot=0),arguments.length<3&&(er=Ot);var or=mt[1]<mt[0],sr=mt[or-0],Lr=mt[1-or],nn=Math.floor((Lr-sr)/(le.length-Ot+2*er));return Ue=Mt(sr+Math.round((Lr-sr-(le.length-Ot)*nn)/2),nn),or&&Ue.reverse(),Be=Math.round(nn*(1-Ot)),we={t:"rangeRoundBands",a:arguments},$e},$e.rangeBand=function(){return Be},$e.rangeExtent=function(){return Nr(we.a[0])},$e.copy=function(){return ma(le,we)},$e.domain(le)}w.scale.category10=function(){return w.scale.ordinal().range(Ja)},w.scale.category20=function(){return w.scale.ordinal().range(ai)},w.scale.category20b=function(){return w.scale.ordinal().range(Mi)},w.scale.category20c=function(){return w.scale.ordinal().range(Si)};var Ja=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Rr),ai=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Rr),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Rr),Si=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Rr);w.scale.quantile=function(){return ki([],[])};function ki(le,we){var De;function Ue(){var $e=0,Mt=we.length;for(De=[];++$e<Mt;)De[$e-1]=w.quantile(le,$e/Mt);return Be}function Be($e){if(!isNaN($e=+$e))return we[w.bisect(De,$e)]}return Be.domain=function($e){return arguments.length?(le=$e.map(y).filter(d).sort(s),Ue()):le},Be.range=function($e){return arguments.length?(we=$e,Ue()):we},Be.quantiles=function(){return De},Be.invertExtent=function($e){return $e=we.indexOf($e),$e<0?[NaN,NaN]:[$e>0?De[$e-1]:le[0],$e<De.length?De[$e]:le[le.length-1]]},Be.copy=function(){return ki(le,we)},Ue()}w.scale.quantize=function(){return Fi(0,1,[0,1])};function Fi(le,we,De){var Ue,Be;function $e(mt){return De[Math.max(0,Math.min(Be,Math.floor(Ue*(mt-le))))]}function Mt(){return Ue=De.length/(we-le),Be=De.length-1,$e}return $e.domain=function(mt){return arguments.length?(le=+mt[0],we=+mt[mt.length-1],Mt()):[le,we]},$e.range=function(mt){return arguments.length?(De=mt,Mt()):De},$e.invertExtent=function(mt){return mt=De.indexOf(mt),mt=mt<0?NaN:mt/Ue+le,[mt,mt+1/Ue]},$e.copy=function(){return Fi(le,we,De)},Mt()}w.scale.threshold=function(){return pi([.5],[0,1])};function pi(le,we){function De(Ue){if(Ue<=Ue)return we[w.bisect(le,Ue)]}return De.domain=function(Ue){return arguments.length?(le=Ue,De):le},De.range=function(Ue){return arguments.length?(we=Ue,De):we},De.invertExtent=function(Ue){return Ue=we.indexOf(Ue),[le[Ue-1],le[Ue]]},De.copy=function(){return pi(le,we)},De}w.scale.identity=function(){return Lo([0,1])};function Lo(le){function we(De){return+De}return we.invert=we,we.domain=we.range=function(De){return arguments.length?(le=De.map(we),we):le},we.ticks=function(De){return Va(le,De)},we.tickFormat=function(De,Ue){return d3_scale_linearTickFormat(le,De,Ue)},we.copy=function(){return Lo(le)},we}w.svg={};function ho(){return 0}w.svg.arc=function(){var le=xa,we=Ci,De=ho,Ue=ni,Be=wo,$e=Eo,Mt=ks;function mt(){var er=Math.max(0,+le.apply(this,arguments)),or=Math.max(0,+we.apply(this,arguments)),sr=Be.apply(this,arguments)-tt,Lr=$e.apply(this,arguments)-tt,nn=Math.abs(Lr-sr),pn=sr>Lr?0:1;if(or<er&&(zr=or,or=er,er=zr),nn>=Je)return Ot(or,pn)+(er?Ot(er,1-pn):"")+"Z";var zr,Wr,qr,fn,hn=0,tn=0,jn,la,Ea,ca,Ra,pa,ja,Oa,ii=[];if((fn=(+Mt.apply(this,arguments)||0)/2)&&(qr=Ue===ni?Math.sqrt(er*er+or*or):+Ue.apply(this,arguments),pn||(tn*=-1),or&&(tn=jt(qr/or*Math.sin(fn))),er&&(hn=jt(qr/er*Math.sin(fn)))),or){jn=or*Math.cos(sr+tn),la=or*Math.sin(sr+tn),Ea=or*Math.cos(Lr-tn),ca=or*Math.sin(Lr-tn);var Ei=Math.abs(Lr-sr-2*tn)<=Ae?0:1;if(tn&&Xs(jn,la,Ea,ca)===pn^Ei){var Ao=(sr+Lr)/2;jn=or*Math.cos(Ao),la=or*Math.sin(Ao),Ea=ca=null}}else jn=la=0;if(er){Ra=er*Math.cos(Lr-hn),pa=er*Math.sin(Lr-hn),ja=er*Math.cos(sr+hn),Oa=er*Math.sin(sr+hn);var ji=Math.abs(sr-Lr+2*hn)<=Ae?0:1;if(hn&&Xs(Ra,pa,ja,Oa)===1-pn^ji){var ga=(sr+Lr)/2;Ra=er*Math.cos(ga),pa=er*Math.sin(ga),ja=Oa=null}}else Ra=pa=0;if(nn>ot&&(zr=Math.min(Math.abs(or-er)/2,+De.apply(this,arguments)))>.001){Wr=er<or^pn?0:1;var hi=zr,qa=zr;if(nn<Ae){var Oi=ja==null?[Ra,pa]:Ea==null?[jn,la]:$a([jn,la],[ja,Oa],[Ea,ca],[Ra,pa]),di=jn-Oi[0],xo=la-Oi[1],fo=Ea-Oi[0],Co=ca-Oi[1],us=1/Math.sin(Math.acos((di*fo+xo*Co)/(Math.sqrt(di*di+xo*xo)*Math.sqrt(fo*fo+Co*Co)))/2),qo=Math.sqrt(Oi[0]*Oi[0]+Oi[1]*Oi[1]);qa=Math.min(zr,(er-qo)/(us-1)),hi=Math.min(zr,(or-qo)/(us+1))}if(Ea!=null){var fs=Qo(ja==null?[Ra,pa]:[ja,Oa],[jn,la],or,hi,pn),ro=Qo([Ea,ca],[Ra,pa],or,hi,pn);zr===hi?ii.push("M",fs[0],"A",hi,",",hi," 0 0,",Wr," ",fs[1],"A",or,",",or," 0 ",1-pn^Xs(fs[1][0],fs[1][1],ro[1][0],ro[1][1]),",",pn," ",ro[1],"A",hi,",",hi," 0 0,",Wr," ",ro[0]):ii.push("M",fs[0],"A",hi,",",hi," 0 1,",Wr," ",ro[0])}else ii.push("M",jn,",",la);if(ja!=null){var Qi=Qo([jn,la],[ja,Oa],er,-qa,pn),Ua=Qo([Ra,pa],Ea==null?[jn,la]:[Ea,ca],er,-qa,pn);zr===qa?ii.push("L",Ua[0],"A",qa,",",qa," 0 0,",Wr," ",Ua[1],"A",er,",",er," 0 ",pn^Xs(Ua[1][0],Ua[1][1],Qi[1][0],Qi[1][1]),",",1-pn," ",Qi[1],"A",qa,",",qa," 0 0,",Wr," ",Qi[0]):ii.push("L",Ua[0],"A",qa,",",qa," 0 0,",Wr," ",Qi[0])}else ii.push("L",Ra,",",pa)}else ii.push("M",jn,",",la),Ea!=null&&ii.push("A",or,",",or," 0 ",Ei,",",pn," ",Ea,",",ca),ii.push("L",Ra,",",pa),ja!=null&&ii.push("A",er,",",er," 0 ",ji,",",1-pn," ",ja,",",Oa);return ii.push("Z"),ii.join("")}function Ot(er,or){return"M0,"+er+"A"+er+","+er+" 0 1,"+or+" 0,"+-er+"A"+er+","+er+" 0 1,"+or+" 0,"+er}return mt.innerRadius=function(er){return arguments.length?(le=at(er),mt):le},mt.outerRadius=function(er){return arguments.length?(we=at(er),mt):we},mt.cornerRadius=function(er){return arguments.length?(De=at(er),mt):De},mt.padRadius=function(er){return arguments.length?(Ue=er==ni?ni:at(er),mt):Ue},mt.startAngle=function(er){return arguments.length?(Be=at(er),mt):Be},mt.endAngle=function(er){return arguments.length?($e=at(er),mt):$e},mt.padAngle=function(er){return arguments.length?(Mt=at(er),mt):Mt},mt.centroid=function(){var er=(+le.apply(this,arguments)+ +we.apply(this,arguments))/2,or=(+Be.apply(this,arguments)+ +$e.apply(this,arguments))/2-tt;return[Math.cos(or)*er,Math.sin(or)*er]},mt};var ni="auto";function xa(le){return le.innerRadius}function Ci(le){return le.outerRadius}function wo(le){return le.startAngle}function Eo(le){return le.endAngle}function ks(le){return le&&le.padAngle}function Xs(le,we,De,Ue){return(le-De)*we-(we-Ue)*le>0?0:1}function Qo(le,we,De,Ue,Be){var $e=le[0]-we[0],Mt=le[1]-we[1],mt=(Be?Ue:-Ue)/Math.sqrt($e*$e+Mt*Mt),Ot=mt*Mt,er=-mt*$e,or=le[0]+Ot,sr=le[1]+er,Lr=we[0]+Ot,nn=we[1]+er,pn=(or+Lr)/2,zr=(sr+nn)/2,Wr=Lr-or,qr=nn-sr,fn=Wr*Wr+qr*qr,hn=De-Ue,tn=or*nn-Lr*sr,jn=(qr<0?-1:1)*Math.sqrt(Math.max(0,hn*hn*fn-tn*tn)),la=(tn*qr-Wr*jn)/fn,Ea=(-tn*Wr-qr*jn)/fn,ca=(tn*qr+Wr*jn)/fn,Ra=(-tn*Wr+qr*jn)/fn,pa=la-pn,ja=Ea-zr,Oa=ca-pn,ii=Ra-zr;return pa*pa+ja*ja>Oa*Oa+ii*ii&&(la=ca,Ea=Ra),[[la-Ot,Ea-er],[la*De/hn,Ea*De/hn]]}function _l(){return!0}function Ns(le){var we=Zn,De=ba,Ue=_l,Be=Po,$e=Be.key,Mt=.7;function mt(Ot){var er=[],or=[],sr=-1,Lr=Ot.length,nn,pn=at(we),zr=at(De);function Wr(){er.push("M",Be(le(or),Mt))}for(;++sr<Lr;)Ue.call(this,nn=Ot[sr],sr)?or.push([+pn.call(this,nn,sr),+zr.call(this,nn,sr)]):or.length&&(Wr(),or=[]);return or.length&&Wr(),er.length?er.join(""):null}return mt.x=function(Ot){return arguments.length?(we=Ot,mt):we},mt.y=function(Ot){return arguments.length?(De=Ot,mt):De},mt.defined=function(Ot){return arguments.length?(Ue=Ot,mt):Ue},mt.interpolate=function(Ot){return arguments.length?(typeof Ot=="function"?$e=Be=Ot:$e=(Be=Cs.get(Ot)||Po).key,mt):$e},mt.tension=function(Ot){return arguments.length?(Mt=Ot,mt):Mt},mt}w.svg.line=function(){return Ns(D)};var Cs=w.map({linear:Po,"linear-closed":vu,step:ku,"step-before":Ls,"step-after":Ku,basis:Zs,"basis-open":Pf,"basis-closed":df,bundle:gf,cardinal:vf,"cardinal-open":pu,"cardinal-closed":uc,monotone:je});Cs.forEach(function(le,we){we.key=le,we.closed=/-closed$/.test(le)});function Po(le){return le.length>1?le.join("L"):le+"Z"}function vu(le){return le.join("L")+"Z"}function ku(le){for(var we=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++we<De;)Be.push("H",(Ue[0]+(Ue=le[we])[0])/2,"V",Ue[1]);return De>1&&Be.push("H",Ue[0]),Be.join("")}function Ls(le){for(var we=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++we<De;)Be.push("V",(Ue=le[we])[1],"H",Ue[0]);return Be.join("")}function Ku(le){for(var we=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++we<De;)Be.push("H",(Ue=le[we])[0],"V",Ue[1]);return Be.join("")}function pu(le,we){return le.length<4?Po(le):le[1]+Ju(le.slice(1,-1),pf(le,we))}function uc(le,we){return le.length<3?vu(le):le[0]+Ju((le.push(le[0]),le),pf([le[le.length-2]].concat(le,[le[1]]),we))}function vf(le,we){return le.length<3?Po(le):le[0]+Ju(le,pf(le,we))}function Ju(le,we){if(we.length<1||le.length!=we.length&&le.length!=we.length+2)return Po(le);var De=le.length!=we.length,Ue="",Be=le[0],$e=le[1],Mt=we[0],mt=Mt,Ot=1;if(De&&(Ue+="Q"+($e[0]-Mt[0]*2/3)+","+($e[1]-Mt[1]*2/3)+","+$e[0]+","+$e[1],Be=le[1],Ot=2),we.length>1){mt=we[1],$e=le[Ot],Ot++,Ue+="C"+(Be[0]+Mt[0])+","+(Be[1]+Mt[1])+","+($e[0]-mt[0])+","+($e[1]-mt[1])+","+$e[0]+","+$e[1];for(var er=2;er<we.length;er++,Ot++)$e=le[Ot],mt=we[er],Ue+="S"+($e[0]-mt[0])+","+($e[1]-mt[1])+","+$e[0]+","+$e[1]}if(De){var or=le[Ot];Ue+="Q"+($e[0]+mt[0]*2/3)+","+($e[1]+mt[1]*2/3)+","+or[0]+","+or[1]}return Ue}function pf(le,we){for(var De=[],Ue=(1-we)/2,Be,$e=le[0],Mt=le[1],mt=1,Ot=le.length;++mt<Ot;)Be=$e,$e=Mt,Mt=le[mt],De.push([Ue*(Mt[0]-Be[0]),Ue*(Mt[1]-Be[1])]);return De}function Zs(le){if(le.length<3)return Po(le);var we=1,De=le.length,Ue=le[0],Be=Ue[0],$e=Ue[1],Mt=[Be,Be,Be,(Ue=le[1])[0]],mt=[$e,$e,$e,Ue[1]],Ot=[Be,",",$e,"L",$o(Bs,Mt),",",$o(Bs,mt)];for(le.push(le[De-1]);++we<=De;)Ue=le[we],Mt.shift(),Mt.push(Ue[0]),mt.shift(),mt.push(Ue[1]),Qu(Ot,Mt,mt);return le.pop(),Ot.push("L",Ue),Ot.join("")}function Pf(le){if(le.length<4)return Po(le);for(var we=[],De=-1,Ue=le.length,Be,$e=[0],Mt=[0];++De<3;)Be=le[De],$e.push(Be[0]),Mt.push(Be[1]);for(we.push($o(Bs,$e)+","+$o(Bs,Mt)),--De;++De<Ue;)Be=le[De],$e.shift(),$e.push(Be[0]),Mt.shift(),Mt.push(Be[1]),Qu(we,$e,Mt);return we.join("")}function df(le){for(var we,De=-1,Ue=le.length,Be=Ue+4,$e,Mt=[],mt=[];++De<4;)$e=le[De%Ue],Mt.push($e[0]),mt.push($e[1]);for(we=[$o(Bs,Mt),",",$o(Bs,mt)],--De;++De<Be;)$e=le[De%Ue],Mt.shift(),Mt.push($e[0]),mt.shift(),mt.push($e[1]),Qu(we,Mt,mt);return we.join("")}function gf(le,we){var De=le.length-1;if(De)for(var Ue=le[0][0],Be=le[0][1],$e=le[De][0]-Ue,Mt=le[De][1]-Be,mt=-1,Ot,er;++mt<=De;)Ot=le[mt],er=mt/De,Ot[0]=we*Ot[0]+(1-we)*(Ue+er*$e),Ot[1]=we*Ot[1]+(1-we)*(Be+er*Mt);return Zs(le)}function $o(le,we){return le[0]*we[0]+le[1]*we[1]+le[2]*we[2]+le[3]*we[3]}var yf=[0,2/3,1/3,0],Yf=[0,1/3,2/3,0],Bs=[0,1/6,2/3,1/6];function Qu(le,we,De){le.push("C",$o(yf,we),",",$o(yf,De),",",$o(Yf,we),",",$o(Yf,De),",",$o(Bs,we),",",$o(Bs,De))}function $u(le,we){return(we[1]-le[1])/(we[0]-le[0])}function mf(le){for(var we=0,De=le.length-1,Ue=[],Be=le[0],$e=le[1],Mt=Ue[0]=$u(Be,$e);++we<De;)Ue[we]=(Mt+(Mt=$u(Be=$e,$e=le[we+1])))/2;return Ue[we]=Mt,Ue}function ze(le){for(var we=[],De,Ue,Be,$e,Mt=mf(le),mt=-1,Ot=le.length-1;++mt<Ot;)De=$u(le[mt],le[mt+1]),l(De)<ot?Mt[mt]=Mt[mt+1]=0:(Ue=Mt[mt]/De,Be=Mt[mt+1]/De,$e=Ue*Ue+Be*Be,$e>9&&($e=De*3/Math.sqrt($e),Mt[mt]=$e*Ue,Mt[mt+1]=$e*Be));for(mt=-1;++mt<=Ot;)$e=(le[Math.min(Ot,mt+1)][0]-le[Math.max(0,mt-1)][0])/(6*(1+Mt[mt]*Mt[mt])),we.push([$e||0,Mt[mt]*$e||0]);return we}function je(le){return le.length<3?Po(le):le[0]+Ju(le,ze(le))}w.svg.line.radial=function(){var le=Ns(nt);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le};function nt(le){for(var we,De=-1,Ue=le.length,Be,$e;++De<Ue;)we=le[De],Be=we[0],$e=we[1]-tt,we[0]=Be*Math.cos($e),we[1]=Be*Math.sin($e);return le}function ht(le){var we=Zn,De=Zn,Ue=0,Be=ba,$e=_l,Mt=Po,mt=Mt.key,Ot=Mt,er="L",or=.7;function sr(Lr){var nn=[],pn=[],zr=[],Wr=-1,qr=Lr.length,fn,hn=at(we),tn=at(Ue),jn=we===De?function(){return Ea}:at(De),la=Ue===Be?function(){return ca}:at(Be),Ea,ca;function Ra(){nn.push("M",Mt(le(zr),or),er,Ot(le(pn.reverse()),or),"Z")}for(;++Wr<qr;)$e.call(this,fn=Lr[Wr],Wr)?(pn.push([Ea=+hn.call(this,fn,Wr),ca=+tn.call(this,fn,Wr)]),zr.push([+jn.call(this,fn,Wr),+la.call(this,fn,Wr)])):pn.length&&(Ra(),pn=[],zr=[]);return pn.length&&Ra(),nn.length?nn.join(""):null}return sr.x=function(Lr){return arguments.length?(we=De=Lr,sr):De},sr.x0=function(Lr){return arguments.length?(we=Lr,sr):we},sr.x1=function(Lr){return arguments.length?(De=Lr,sr):De},sr.y=function(Lr){return arguments.length?(Ue=Be=Lr,sr):Be},sr.y0=function(Lr){return arguments.length?(Ue=Lr,sr):Ue},sr.y1=function(Lr){return arguments.length?(Be=Lr,sr):Be},sr.defined=function(Lr){return arguments.length?($e=Lr,sr):$e},sr.interpolate=function(Lr){return arguments.length?(typeof Lr=="function"?mt=Mt=Lr:mt=(Mt=Cs.get(Lr)||Po).key,Ot=Mt.reverse||Mt,er=Mt.closed?"M":"L",sr):mt},sr.tension=function(Lr){return arguments.length?(or=Lr,sr):or},sr}Ls.reverse=Ku,Ku.reverse=Ls,w.svg.area=function(){return ht(D)},w.svg.area.radial=function(){var le=ht(nt);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le};function Et(le){return le.source}function At(le){return le.target}w.svg.chord=function(){var le=Et,we=At,De=It,Ue=wo,Be=Eo;function $e(or,sr){var Lr=Mt(this,le,or,sr),nn=Mt(this,we,or,sr);return"M"+Lr.p0+Ot(Lr.r,Lr.p1,Lr.a1-Lr.a0)+(mt(Lr,nn)?er(Lr.r,Lr.p1,Lr.r,Lr.p0):er(Lr.r,Lr.p1,nn.r,nn.p0)+Ot(nn.r,nn.p1,nn.a1-nn.a0)+er(nn.r,nn.p1,Lr.r,Lr.p0))+"Z"}function Mt(or,sr,Lr,nn){var pn=sr.call(or,Lr,nn),zr=De.call(or,pn,nn),Wr=Ue.call(or,pn,nn)-tt,qr=Be.call(or,pn,nn)-tt;return{r:zr,a0:Wr,a1:qr,p0:[zr*Math.cos(Wr),zr*Math.sin(Wr)],p1:[zr*Math.cos(qr),zr*Math.sin(qr)]}}function mt(or,sr){return or.a0==sr.a0&&or.a1==sr.a1}function Ot(or,sr,Lr){return"A"+or+","+or+" 0 "+ +(Lr>Ae)+",1 "+sr}function er(or,sr,Lr,nn){return"Q 0,0 "+nn}return $e.radius=function(or){return arguments.length?(De=at(or),$e):De},$e.source=function(or){return arguments.length?(le=at(or),$e):le},$e.target=function(or){return arguments.length?(we=at(or),$e):we},$e.startAngle=function(or){return arguments.length?(Ue=at(or),$e):Ue},$e.endAngle=function(or){return arguments.length?(Be=at(or),$e):Be},$e};function It(le){return le.radius}w.svg.diagonal=function(){var le=Et,we=At,De=gr;function Ue(Be,$e){var Mt=le.call(this,Be,$e),mt=we.call(this,Be,$e),Ot=(Mt.y+mt.y)/2,er=[Mt,{x:Mt.x,y:Ot},{x:mt.x,y:Ot},mt];return er=er.map(De),"M"+er[0]+"C"+er[1]+" "+er[2]+" "+er[3]}return Ue.source=function(Be){return arguments.length?(le=at(Be),Ue):le},Ue.target=function(Be){return arguments.length?(we=at(Be),Ue):we},Ue.projection=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function gr(le){return[le.x,le.y]}w.svg.diagonal.radial=function(){var le=w.svg.diagonal(),we=gr,De=le.projection;return le.projection=function(Ue){return arguments.length?De(br(we=Ue)):we},le};function br(le){return function(){var we=le.apply(this,arguments),De=we[0],Ue=we[1]-tt;return[De*Math.cos(Ue),De*Math.sin(Ue)]}}w.svg.symbol=function(){var le=Mr,we=pr;function De(Ue,Be){return($r.get(le.call(this,Ue,Be))||Or)(we.call(this,Ue,Be))}return De.type=function(Ue){return arguments.length?(le=at(Ue),De):le},De.size=function(Ue){return arguments.length?(we=at(Ue),De):we},De};function pr(){return 64}function Mr(){return"circle"}function Or(le){var we=Math.sqrt(le/Ae);return"M0,"+we+"A"+we+","+we+" 0 1,1 0,"+-we+"A"+we+","+we+" 0 1,1 0,"+we+"Z"}var $r=w.map({circle:Or,cross:function(le){var we=Math.sqrt(le/5)/2;return"M"+-3*we+","+-we+"H"+-we+"V"+-3*we+"H"+we+"V"+-we+"H"+3*we+"V"+we+"H"+we+"V"+3*we+"H"+-we+"V"+we+"H"+-3*we+"Z"},diamond:function(le){var we=Math.sqrt(le/(2*Sn)),De=we*Sn;return"M0,"+-we+"L"+De+",0 0,"+we+" "+-De+",0Z"},square:function(le){var we=Math.sqrt(le)/2;return"M"+-we+","+-we+"L"+we+","+-we+" "+we+","+we+" "+-we+","+we+"Z"},"triangle-down":function(le){var we=Math.sqrt(le/on),De=we*on/2;return"M0,"+De+"L"+we+","+-De+" "+-we+","+-De+"Z"},"triangle-up":function(le){var we=Math.sqrt(le/on),De=we*on/2;return"M0,"+-De+"L"+we+","+De+" "+-we+","+De+"Z"}});w.svg.symbolTypes=$r.keys();var on=Math.sqrt(3),Sn=Math.tan(30*St);ne.transition=function(le){for(var we=Qa||++ri,De=fi(le),Ue=[],Be,$e,Mt=si||{time:Date.now(),ease:rl,delay:0,duration:250},mt=-1,Ot=this.length;++mt<Ot;){Ue.push(Be=[]);for(var er=this[mt],or=-1,sr=er.length;++or<sr;)($e=er[or])&&to($e,or,De,we,Mt),Be.push($e)}return wa(Ue,De,we)},ne.interrupt=function(le){return this.each(le==null?Nn:Qn(fi(le)))};var Nn=Qn(fi());function Qn(le){return function(){var we,De,Ue;(we=this[le])&&(Ue=we[De=we.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--we.count?delete we[De]:delete this[le],we.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function wa(le,we,De){return K(le,Ma),le.namespace=we,le.id=De,le}var Ma=[],ri=0,Qa,si;Ma.call=ne.call,Ma.empty=ne.empty,Ma.node=ne.node,Ma.size=ne.size,w.transition=function(le,we){return le&&le.transition?Qa?le.transition(we):le:w.selection().transition(le)},w.transition.prototype=Ma,Ma.select=function(le){var we=this.id,De=this.namespace,Ue=[],Be,$e,Mt;le=Z(le);for(var mt=-1,Ot=this.length;++mt<Ot;){Ue.push(Be=[]);for(var er=this[mt],or=-1,sr=er.length;++or<sr;)(Mt=er[or])&&($e=le.call(Mt,Mt.__data__,or,mt))?("__data__"in Mt&&($e.__data__=Mt.__data__),to($e,or,De,we,Mt[De][we]),Be.push($e)):Be.push(null)}return wa(Ue,De,we)},Ma.selectAll=function(le){var we=this.id,De=this.namespace,Ue=[],Be,$e,Mt,mt,Ot;le=q(le);for(var er=-1,or=this.length;++er<or;)for(var sr=this[er],Lr=-1,nn=sr.length;++Lr<nn;)if(Mt=sr[Lr]){Ot=Mt[De][we],$e=le.call(Mt,Mt.__data__,Lr,er),Ue.push(Be=[]);for(var pn=-1,zr=$e.length;++pn<zr;)(mt=$e[pn])&&to(mt,pn,De,we,Ot),Be.push(mt)}return wa(Ue,De,we)},Ma.filter=function(le){var we=[],De,Ue,Be;typeof le!="function"&&(le=_e(le));for(var $e=0,Mt=this.length;$e<Mt;$e++){we.push(De=[]);for(var Ue=this[$e],mt=0,Ot=Ue.length;mt<Ot;mt++)(Be=Ue[mt])&&le.call(Be,Be.__data__,mt,$e)&&De.push(Be)}return wa(we,this.namespace,this.id)},Ma.tween=function(le,we){var De=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][De].tween.get(le):Ze(this,we==null?function(Be){Be[Ue][De].tween.remove(le)}:function(Be){Be[Ue][De].tween.set(le,we)})};function _i(le,we,De,Ue){var Be=le.id,$e=le.namespace;return Ze(le,typeof De=="function"?function(Mt,mt,Ot){Mt[$e][Be].tween.set(we,Ue(De.call(Mt,Mt.__data__,mt,Ot)))}:(De=Ue(De),function(Mt){Mt[$e][Be].tween.set(we,De)}))}Ma.attr=function(le,we){if(arguments.length<2){for(we in le)this.attr(we,le[we]);return this}var De=le=="transform"?uu:yo,Ue=w.ns.qualify(le);function Be(){this.removeAttribute(Ue)}function $e(){this.removeAttributeNS(Ue.space,Ue.local)}function Mt(Ot){return Ot==null?Be:(Ot+="",function(){var er=this.getAttribute(Ue),or;return er!==Ot&&(or=De(er,Ot),function(sr){this.setAttribute(Ue,or(sr))})})}function mt(Ot){return Ot==null?$e:(Ot+="",function(){var er=this.getAttributeNS(Ue.space,Ue.local),or;return er!==Ot&&(or=De(er,Ot),function(sr){this.setAttributeNS(Ue.space,Ue.local,or(sr))})})}return _i(this,"attr."+le,we,Ue.local?mt:Mt)},Ma.attrTween=function(le,we){var De=w.ns.qualify(le);function Ue($e,Mt){var mt=we.call(this,$e,Mt,this.getAttribute(De));return mt&&function(Ot){this.setAttribute(De,mt(Ot))}}function Be($e,Mt){var mt=we.call(this,$e,Mt,this.getAttributeNS(De.space,De.local));return mt&&function(Ot){this.setAttributeNS(De.space,De.local,mt(Ot))}}return this.tween("attr."+le,De.local?Be:Ue)},Ma.style=function(le,we,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(we="");for(De in le)this.style(De,le[De],we);return this}De=""}function Be(){this.style.removeProperty(le)}function $e(Mt){return Mt==null?Be:(Mt+="",function(){var mt=a(this).getComputedStyle(this,null).getPropertyValue(le),Ot;return mt!==Mt&&(Ot=yo(mt,Mt),function(er){this.style.setProperty(le,Ot(er),De)})})}return _i(this,"style."+le,we,$e)},Ma.styleTween=function(le,we,De){arguments.length<3&&(De="");function Ue(Be,$e){var Mt=we.call(this,Be,$e,a(this).getComputedStyle(this,null).getPropertyValue(le));return Mt&&function(mt){this.style.setProperty(le,Mt(mt),De)}}return this.tween("style."+le,Ue)},Ma.text=function(le){return _i(this,"text",le,mo)};function mo(le){return le==null&&(le=""),function(){this.textContent=le}}Ma.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var we;this[le].count<2&&(we=this.parentNode)&&we.removeChild(this)})},Ma.ease=function(le){var we=this.id,De=this.namespace;return arguments.length<1?this.node()[De][we].ease:(typeof le!="function"&&(le=w.ease.apply(w,arguments)),Ze(this,function(Ue){Ue[De][we].ease=le}))},Ma.delay=function(le){var we=this.id,De=this.namespace;return arguments.length<1?this.node()[De][we].delay:Ze(this,typeof le=="function"?function(Ue,Be,$e){Ue[De][we].delay=+le.call(Ue,Ue.__data__,Be,$e)}:(le=+le,function(Ue){Ue[De][we].delay=le}))},Ma.duration=function(le){var we=this.id,De=this.namespace;return arguments.length<1?this.node()[De][we].duration:Ze(this,typeof le=="function"?function(Ue,Be,$e){Ue[De][we].duration=Math.max(1,le.call(Ue,Ue.__data__,Be,$e))}:(le=Math.max(1,le),function(Ue){Ue[De][we].duration=le}))},Ma.each=function(le,we){var De=this.id,Ue=this.namespace;if(arguments.length<2){var Be=si,$e=Qa;try{Qa=De,Ze(this,function(Mt,mt,Ot){si=Mt[Ue][De],le.call(Mt,Mt.__data__,mt,Ot)})}finally{si=Be,Qa=$e}}else Ze(this,function(Mt){var mt=Mt[Ue][De];(mt.event||(mt.event=w.dispatch("start","end","interrupt"))).on(le,we)});return this},Ma.transition=function(){for(var le=this.id,we=++ri,De=this.namespace,Ue=[],Be,$e,Mt,mt,Ot=0,er=this.length;Ot<er;Ot++){Ue.push(Be=[]);for(var $e=this[Ot],or=0,sr=$e.length;or<sr;or++)(Mt=$e[or])&&(mt=Mt[De][le],to(Mt,or,De,we,{time:mt.time,ease:mt.ease,delay:mt.delay+mt.duration,duration:mt.duration})),Be.push(Mt)}return wa(Ue,De,we)};function fi(le){return le==null?"__transition__":"__transition_"+le+"__"}function to(le,we,De,Ue,Be){var $e=le[De]||(le[De]={active:0,count:0}),Mt=$e[Ue],mt,Ot,er,or,sr;function Lr(zr){var Wr=Mt.delay;if(Ot.t=Wr+mt,Wr<=zr)return nn(zr-Wr);Ot.c=nn}function nn(zr){var Wr=$e.active,qr=$e[Wr];qr&&(qr.timer.c=null,qr.timer.t=NaN,--$e.count,delete $e[Wr],qr.event&&qr.event.interrupt.call(le,le.__data__,qr.index));for(var fn in $e)if(+fn<Ue){var hn=$e[fn];hn.timer.c=null,hn.timer.t=NaN,--$e.count,delete $e[fn]}Ot.c=pn,yn(function(){return Ot.c&&pn(zr||1)&&(Ot.c=null,Ot.t=NaN),1},0,mt),$e.active=Ue,Mt.event&&Mt.event.start.call(le,le.__data__,we),sr=[],Mt.tween.forEach(function(tn,jn){(jn=jn.call(le,le.__data__,we))&&sr.push(jn)}),or=Mt.ease,er=Mt.duration}function pn(zr){for(var Wr=zr/er,qr=or(Wr),fn=sr.length;fn>0;)sr[--fn].call(le,qr);if(Wr>=1)return Mt.event&&Mt.event.end.call(le,le.__data__,we),--$e.count?delete $e[Ue]:delete le[De],1}Mt||(mt=Be.time,Ot=yn(Lr,0,mt),Mt=$e[Ue]={tween:new A,time:mt,timer:Ot,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:we},Be=null,++$e.count)}w.svg.axis=function(){var le=w.scale.linear(),we=To,De=6,Ue=6,Be=3,$e=[10],Mt=null,mt;function Ot(er){er.each(function(){var or=w.select(this),sr=this.__chart__||le,Lr=this.__chart__=le.copy(),nn=Mt==null?Lr.ticks?Lr.ticks.apply(Lr,$e):Lr.domain():Mt,pn=mt==null?Lr.tickFormat?Lr.tickFormat.apply(Lr,$e):D:mt,zr=or.selectAll(".tick").data(nn,Lr),Wr=zr.enter().insert("g",".domain").attr("class","tick").style("opacity",ot),qr=w.transition(zr.exit()).style("opacity",ot).remove(),fn=w.transition(zr.order()).style("opacity",1),hn=Math.max(De,0)+Be,tn,jn=ln(Lr),la=or.selectAll(".domain").data([0]),Ea=(la.enter().append("path").attr("class","domain"),w.transition(la));Wr.append("line"),Wr.append("text");var ca=Wr.select("line"),Ra=fn.select("line"),pa=zr.select("text").text(pn),ja=Wr.select("text"),Oa=fn.select("text"),ii=we==="top"||we==="left"?-1:1,Ei,Ao,ji,ga;if(we==="bottom"||we==="top"?(tn=Li,Ei="x",ji="y",Ao="x2",ga="y2",pa.attr("dy",ii<0?"0em":".71em").style("text-anchor","middle"),Ea.attr("d","M"+jn[0]+","+ii*Ue+"V0H"+jn[1]+"V"+ii*Ue)):(tn=zi,Ei="y",ji="x",Ao="y2",ga="x2",pa.attr("dy",".32em").style("text-anchor",ii<0?"end":"start"),Ea.attr("d","M"+ii*Ue+","+jn[0]+"H0V"+jn[1]+"H"+ii*Ue)),ca.attr(ga,ii*De),ja.attr(ji,ii*hn),Ra.attr(Ao,0).attr(ga,ii*De),Oa.attr(Ei,0).attr(ji,ii*hn),Lr.rangeBand){var hi=Lr,qa=hi.rangeBand()/2;sr=Lr=function(Oi){return hi(Oi)+qa}}else sr.rangeBand?sr=Lr:qr.call(tn,Lr,sr);Wr.call(tn,sr,Lr),fn.call(tn,Lr,Lr)})}return Ot.scale=function(er){return arguments.length?(le=er,Ot):le},Ot.orient=function(er){return arguments.length?(we=er in Io?er+"":To,Ot):we},Ot.ticks=function(){return arguments.length?($e=M(arguments),Ot):$e},Ot.tickValues=function(er){return arguments.length?(Mt=er,Ot):Mt},Ot.tickFormat=function(er){return arguments.length?(mt=er,Ot):mt},Ot.tickSize=function(er){var or=arguments.length;return or?(De=+er,Ue=+arguments[or-1],Ot):De},Ot.innerTickSize=function(er){return arguments.length?(De=+er,Ot):De},Ot.outerTickSize=function(er){return arguments.length?(Ue=+er,Ot):Ue},Ot.tickPadding=function(er){return arguments.length?(Be=+er,Ot):Be},Ot.tickSubdivide=function(){return arguments.length&&Ot},Ot};var To="bottom",Io={top:1,right:1,bottom:1,left:1};function Li(le,we,De){le.attr("transform",function(Ue){var Be=we(Ue);return"translate("+(isFinite(Be)?Be:De(Ue))+",0)"})}function zi(le,we,De){le.attr("transform",function(Ue){var Be=we(Ue);return"translate(0,"+(isFinite(Be)?Be:De(Ue))+")"})}w.svg.brush=function(){var le=re(or,"brushstart","brush","brushend"),we=null,De=null,Ue=[0,0],Be=[0,0],$e,Mt,mt=!0,Ot=!0,er=ko[0];function or(zr){zr.each(function(){var Wr=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),qr=Wr.selectAll(".background").data([0]);qr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Wr.selectAll(".resize").data(er,D);fn.exit().remove(),fn.enter().append("g").attr("class",function(la){return"resize "+la}).style("cursor",function(la){return Ps[la]}).append("rect").attr("x",function(la){return/[ew]$/.test(la)?-3:null}).attr("y",function(la){return/^[ns]/.test(la)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",or.empty()?"none":null);var hn=w.transition(Wr),tn=w.transition(qr),jn;we&&(jn=ln(we),tn.attr("x",jn[0]).attr("width",jn[1]-jn[0]),Lr(hn)),De&&(jn=ln(De),tn.attr("y",jn[0]).attr("height",jn[1]-jn[0]),nn(hn)),sr(hn)})}or.event=function(zr){zr.each(function(){var Wr=le.of(this,arguments),qr={x:Ue,y:Be,i:$e,j:Mt},fn=this.__chart__||qr;this.__chart__=qr,Qa?w.select(this).transition().each("start.brush",function(){$e=fn.i,Mt=fn.j,Ue=fn.x,Be=fn.y,Wr({type:"brushstart"})}).tween("brush:brush",function(){var hn=uo(Ue,qr.x),tn=uo(Be,qr.y);return $e=Mt=null,function(jn){Ue=qr.x=hn(jn),Be=qr.y=tn(jn),Wr({type:"brush",mode:"resize"})}}).each("end.brush",function(){$e=qr.i,Mt=qr.j,Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"})}):(Wr({type:"brushstart"}),Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"}))})};function sr(zr){zr.selectAll(".resize").attr("transform",function(Wr){return"translate("+Ue[+/e$/.test(Wr)]+","+Be[+/^s/.test(Wr)]+")"})}function Lr(zr){zr.select(".extent").attr("x",Ue[0]),zr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function nn(zr){zr.select(".extent").attr("y",Be[0]),zr.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var zr=this,Wr=w.select(w.event.target),qr=le.of(zr,arguments),fn=w.select(zr),hn=Wr.datum(),tn=!/^(n|s)$/.test(hn)&&we,jn=!/^(e|w)$/.test(hn)&&De,la=Wr.classed("extent"),Ea=$t(zr),ca,Ra=w.mouse(zr),pa,ja=w.select(a(zr)).on("keydown.brush",Ei).on("keyup.brush",Ao);if(w.event.changedTouches?ja.on("touchmove.brush",ji).on("touchend.brush",hi):ja.on("mousemove.brush",ji).on("mouseup.brush",hi),fn.interrupt().selectAll("*").interrupt(),la)Ra[0]=Ue[0]-Ra[0],Ra[1]=Be[0]-Ra[1];else if(hn){var Oa=+/w$/.test(hn),ii=+/^n/.test(hn);pa=[Ue[1-Oa]-Ra[0],Be[1-ii]-Ra[1]],Ra[0]=Ue[Oa],Ra[1]=Be[ii]}else w.event.altKey&&(ca=Ra.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),w.select("body").style("cursor",Wr.style("cursor")),qr({type:"brushstart"}),ji();function Ei(){w.event.keyCode==32&&(la||(ca=null,Ra[0]-=Ue[1],Ra[1]-=Be[1],la=2),X())}function Ao(){w.event.keyCode==32&&la==2&&(Ra[0]+=Ue[1],Ra[1]+=Be[1],la=0,X())}function ji(){var qa=w.mouse(zr),Oi=!1;pa&&(qa[0]+=pa[0],qa[1]+=pa[1]),la||(w.event.altKey?(ca||(ca=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Ra[0]=Ue[+(qa[0]<ca[0])],Ra[1]=Be[+(qa[1]<ca[1])]):ca=null),tn&&ga(qa,we,0)&&(Lr(fn),Oi=!0),jn&&ga(qa,De,1)&&(nn(fn),Oi=!0),Oi&&(sr(fn),qr({type:"brush",mode:la?"move":"resize"}))}function ga(qa,Oi,di){var xo=ln(Oi),fo=xo[0],Co=xo[1],us=Ra[di],qo=di?Be:Ue,fs=qo[1]-qo[0],ro,Qi;if(la&&(fo-=us,Co-=fs+us),ro=(di?Ot:mt)?Math.max(fo,Math.min(Co,qa[di])):qa[di],la?Qi=(ro+=us)+fs:(ca&&(us=Math.max(fo,Math.min(Co,2*ca[di]-ro))),us<ro?(Qi=ro,ro=us):Qi=us),qo[0]!=ro||qo[1]!=Qi)return di?Mt=null:$e=null,qo[0]=ro,qo[1]=Qi,!0}function hi(){ji(),fn.style("pointer-events","all").selectAll(".resize").style("display",or.empty()?"none":null),w.select("body").style("cursor",null),ja.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Ea(),qr({type:"brushend"})}}return or.x=function(zr){return arguments.length?(we=zr,er=ko[!we<<1|!De],or):we},or.y=function(zr){return arguments.length?(De=zr,er=ko[!we<<1|!De],or):De},or.clamp=function(zr){return arguments.length?(we&&De?(mt=!!zr[0],Ot=!!zr[1]):we?mt=!!zr:De&&(Ot=!!zr),or):we&&De?[mt,Ot]:we?mt:De?Ot:null},or.extent=function(zr){var Wr,qr,fn,hn,tn;return arguments.length?(we&&(Wr=zr[0],qr=zr[1],De&&(Wr=Wr[0],qr=qr[0]),$e=[Wr,qr],we.invert&&(Wr=we(Wr),qr=we(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn),(Wr!=Ue[0]||qr!=Ue[1])&&(Ue=[Wr,qr])),De&&(fn=zr[0],hn=zr[1],we&&(fn=fn[1],hn=hn[1]),Mt=[fn,hn],De.invert&&(fn=De(fn),hn=De(hn)),hn<fn&&(tn=fn,fn=hn,hn=tn),(fn!=Be[0]||hn!=Be[1])&&(Be=[fn,hn])),or):(we&&($e?(Wr=$e[0],qr=$e[1]):(Wr=Ue[0],qr=Ue[1],we.invert&&(Wr=we.invert(Wr),qr=we.invert(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn))),De&&(Mt?(fn=Mt[0],hn=Mt[1]):(fn=Be[0],hn=Be[1],De.invert&&(fn=De.invert(fn),hn=De.invert(hn)),hn<fn&&(tn=fn,fn=hn,hn=tn))),we&&De?[[Wr,fn],[qr,hn]]:we?[Wr,qr]:De&&[fn,hn])},or.clear=function(){return or.empty()||(Ue=[0,0],Be=[0,0],$e=Mt=null),or},or.empty=function(){return!!we&&Ue[0]==Ue[1]||!!De&&Be[0]==Be[1]},w.rebind(or,le,"on")};var Ps={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ko=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];w.text=zt(function(le){return le.responseText}),w.json=function(le,we){return qt(le,"application/json",Yo,we)};function Yo(le){return JSON.parse(le.responseText)}w.html=function(le,we){return qt(le,"text/html",ls,we)};function ls(le){var we=T.createRange();return we.selectNode(T.body),we.createContextualFragment(le.responseText)}w.xml=zt(function(le){return le.responseXML}),typeof U=="object"&&U.exports?U.exports=w:this.d3=w}).apply(self)},{}],59:[function(o,U,H){U.exports=o("./quad")},{"./quad":60}],60:[function(o,U,H){var w=o("binary-search-bounds"),f=o("clamp"),M=o("parse-rect"),T=o("array-bounds"),e=o("pick-by-alias"),a=o("defined"),n=o("flatten-vertex-data"),r=o("is-obj"),t=o("dtype"),h=o("math-log2"),i=1073741824;U.exports=function(d,p){p||(p={}),d=n(d,"float64"),p=e(p,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=a(p.maxDepth,255),m=a(p.bounds,T(d,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var l=s(d,m),x=d.length>>>1,u;p.dtype||(p.dtype="array"),typeof p.dtype=="string"?u=new(t(p.dtype))(x):p.dtype&&(u=p.dtype,Array.isArray(u)&&(u.length=x));for(var A=0;A<x;++A)u[A]=A;var _=[],g=[],b=[],v=[];D(0,0,1,u,0,1);for(var C=0,S=0;S<_.length;S++){var k=_[S];if(u.set)u.set(k,C);else for(var E=0,F=k.length;E<F;E++)u[E+C]=k[E];var I=C+_[S].length;v[S]=[C,I],C=I}return u.range=R,u;function D(B,G,Q,X,j,re){if(!X.length)return null;var ue=_[j]||(_[j]=[]),K=b[j]||(b[j]=[]),te=g[j]||(g[j]=[]),Y=ue.length;if(j++,j>c||re>i){for(var V=0;V<X.length;V++)ue.push(X[V]),K.push(re),te.push(null,null,null,null);return Y}if(ue.push(X[0]),K.push(re),X.length<=1)return te.push(null,null,null,null),Y;for(var ee=Q*.5,ne=B+ee,Z=G+ee,q=[],ie=[],se=[],ae=[],oe=1,be=X.length;oe<be;oe++){var ce=X[oe],de=l[ce*2],ye=l[ce*2+1];de<ne?ye<Z?q.push(ce):ie.push(ce):ye<Z?se.push(ce):ae.push(ce)}return re<<=2,te.push(D(B,G,ee,q,j,re),D(B,Z,ee,ie,j,re+1),D(ne,G,ee,se,j,re+2),D(ne,Z,ee,ae,j,re+3)),Y}function R(){for(var B=[],G=arguments.length;G--;)B[G]=arguments[G];var Q;if(r(B[B.length-1])){var X=B.pop();!B.length&&(X.x!=null||X.l!=null||X.left!=null)&&(B=[X],Q={}),Q=e(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else Q={};B.length||(B=m);var j=M.apply(void 0,B),re=[Math.min(j.x,j.x+j.width),Math.min(j.y,j.y+j.height),Math.max(j.x,j.x+j.width),Math.max(j.y,j.y+j.height)],ue=re[0],K=re[1],te=re[2],Y=re[3],V=s([ue,K,te,Y],m),ee=V[0],ne=V[1],Z=V[2],q=V[3],ie=a(Q.level,_.length);if(Q.d!=null){var se;typeof Q.d=="number"?se=[Q.d,Q.d]:Q.d.length&&(se=Q.d),ie=Math.min(Math.max(Math.ceil(-h(Math.abs(se[0])/(m[2]-m[0]))),Math.ceil(-h(Math.abs(se[1])/(m[3]-m[1])))),ie)}if(ie=Math.min(ie,_.length),Q.lod)return O(ee,ne,Z,q,ie);var ae=[];oe(0,0,1,0,0,1);function oe(ce,de,ye,ge,me,Me){if(!(me===null||Me===null)){var Le=ce+ye,Oe=de+ye;if(!(ee>Le||ne>Oe||Z<ce||q<de)&&!(ge>=ie)&&me!==Me){var _e=_[ge];Me===void 0&&(Me=_e.length);for(var Ee=me;Ee<Me;Ee++){var Ze=_e[Ee],Ge=d[Ze*2],Fe=d[Ze*2+1];Ge>=ue&&Ge<=te&&Fe>=K&&Fe<=Y&&ae.push(Ze)}var Re=g[ge],We=Re[me*4+0],xt=Re[me*4+1],Nt=Re[me*4+2],tr=Re[me*4+3],Vt=be(Re,me+1),Pt=ye*.5,$t=ge+1;oe(ce,de,Pt,$t,We,xt||Nt||tr||Vt),oe(ce,de+Pt,Pt,$t,xt,Nt||tr||Vt),oe(ce+Pt,de,Pt,$t,Nt,tr||Vt),oe(ce+Pt,de+Pt,Pt,$t,tr,Vt)}}}function be(ce,de){for(var ye=null,ge=0;ye===null;)if(ye=ce[de*4+ge],ge++,ge>ce.length)return null;return ye}return ae}function O(B,G,Q,X,j){for(var re=[],ue=0;ue<j;ue++){var K=b[ue],te=v[ue][0],Y=z(B,G,ue),V=z(Q,X,ue),ee=w.ge(K,Y),ne=w.gt(K,V,ee,K.length-1);re[ue]=[ee+te,ne+te]}return re}function z(B,G,Q){for(var X=1,j=.5,re=.5,ue=.5,K=0;K<Q;K++)X<<=2,X+=B<j?G<re?0:1:G<re?2:3,ue*=.5,j+=B<j?-ue:ue,re+=G<re?-ue:ue;return X}};function s(y,d){for(var p=d[0],c=d[1],m=d[2],l=d[3],x=1/(m-p),u=1/(l-c),A=new Array(y.length),_=0,g=y.length/2;_<g;_++)A[2*_]=f((y[2*_]-p)*x,0,1),A[2*_+1]=f((y[2*_+1]-c)*u,0,1);return A}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=o("@turf/meta"),f=6378137;function M(r){return w.geomReduce(r,function(t,h){return t+T(h)},0)}H.default=M;function T(r){var t=0,h;switch(r.type){case"Polygon":return e(r.coordinates);case"MultiPolygon":for(h=0;h<r.coordinates.length;h++)t+=e(r.coordinates[h]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(r){var t=0;if(r&&r.length>0){t+=Math.abs(a(r[0]));for(var h=1;h<r.length;h++)t-=Math.abs(a(r[h]))}return t}function a(r){var t,h,i,s,y,d,p,c=0,m=r.length;if(m>2){for(p=0;p<m;p++)p===m-2?(s=m-2,y=m-1,d=0):p===m-1?(s=m-1,y=0,d=1):(s=p,y=p+1,d=p+2),t=r[s],h=r[y],i=r[d],c+=(n(i[0])-n(t[0]))*Math.sin(n(h[1]));c=c*f*f/2}return c}function n(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius*1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1.0936133},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(S,k,E){E===void 0&&(E={});var F={type:"Feature"};return(E.id===0||E.id)&&(F.id=E.id),E.bbox&&(F.bbox=E.bbox),F.properties=k||{},F.geometry=S,F}H.feature=w;function f(S,k,E){switch(S){case"Point":return M(k).geometry;case"LineString":return n(k).geometry;case"Polygon":return e(k).geometry;case"MultiPoint":return i(k).geometry;case"MultiLineString":return h(k).geometry;case"MultiPolygon":return s(k).geometry;default:throw new Error(S+" is invalid")}}H.geometry=f;function M(S,k,E){if(E===void 0&&(E={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(S[0])||!g(S[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:S};return w(F,k,E)}H.point=M;function T(S,k,E){return E===void 0&&(E={}),t(S.map(function(F){return M(F,k)}),E)}H.points=T;function e(S,k,E){E===void 0&&(E={});for(var F=0,I=S;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:S};return w(O,k,E)}H.polygon=e;function a(S,k,E){return E===void 0&&(E={}),t(S.map(function(F){return e(F,k)}),E)}H.polygons=a;function n(S,k,E){if(E===void 0&&(E={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:S};return w(F,k,E)}H.lineString=n;function r(S,k,E){return E===void 0&&(E={}),t(S.map(function(F){return n(F,k)}),E)}H.lineStrings=r;function t(S,k){k===void 0&&(k={});var E={type:"FeatureCollection"};return k.id&&(E.id=k.id),k.bbox&&(E.bbox=k.bbox),E.features=S,E}H.featureCollection=t;function h(S,k,E){E===void 0&&(E={});var F={type:"MultiLineString",coordinates:S};return w(F,k,E)}H.multiLineString=h;function i(S,k,E){E===void 0&&(E={});var F={type:"MultiPoint",coordinates:S};return w(F,k,E)}H.multiPoint=i;function s(S,k,E){E===void 0&&(E={});var F={type:"MultiPolygon",coordinates:S};return w(F,k,E)}H.multiPolygon=s;function y(S,k,E){E===void 0&&(E={});var F={type:"GeometryCollection",geometries:S};return w(F,k,E)}H.geometryCollection=y;function d(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var E=Math.pow(10,k||0);return Math.round(S*E)/E}H.round=d;function p(S,k){k===void 0&&(k="kilometers");var E=H.factors[k];if(!E)throw new Error(k+" units is invalid");return S*E}H.radiansToLength=p;function c(S,k){k===void 0&&(k="kilometers");var E=H.factors[k];if(!E)throw new Error(k+" units is invalid");return S/E}H.lengthToRadians=c;function m(S,k){return x(c(S,k))}H.lengthToDegrees=m;function l(S){var k=S%360;return k<0&&(k+=360),k}H.bearingToAzimuth=l;function x(S){var k=S%(2*Math.PI);return k*180/Math.PI}H.radiansToDegrees=x;function u(S){var k=S%360;return k*Math.PI/180}H.degreesToRadians=u;function A(S,k,E){if(k===void 0&&(k="kilometers"),E===void 0&&(E="kilometers"),!(S>=0))throw new Error("length must be a positive number");return p(c(S,k),E)}H.convertLength=A;function _(S,k,E){if(k===void 0&&(k="meters"),E===void 0&&(E="kilometers"),!(S>=0))throw new Error("area must be a positive number");var F=H.areaFactors[k];if(!F)throw new Error("invalid original units");var I=H.areaFactors[E];if(!I)throw new Error("invalid final units");return S/F*I}H.convertArea=_;function g(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}H.isNumber=g;function b(S){return!!S&&S.constructor===Object}H.isObject=b;function v(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!g(k))throw new Error("bbox must only contain numbers")})}H.validateBBox=v;function C(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}H.validateId=C},{}],63:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=o("@turf/helpers");function f(x,u,A){if(x!==null)for(var _,g,b,v,C,S,k,E=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,B=0;B<z;B++){k=R?x.features[B].geometry:O?x.geometry:x,I=k?k.type==="GeometryCollection":!1,C=I?k.geometries.length:1;for(var G=0;G<C;G++){var Q=0,X=0;if(v=I?k.geometries[G]:k,v!==null){S=v.coordinates;var j=v.type;switch(E=A&&(j==="Polygon"||j==="MultiPolygon")?1:0,j){case null:break;case"Point":if(u(S,F,B,Q,X)===!1)return!1;F++,Q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,B,Q,X)===!1)return!1;F++,j==="MultiPoint"&&Q++}j==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(g=0;g<S[_].length-E;g++){if(u(S[_][g],F,B,Q,X)===!1)return!1;F++}j==="MultiLineString"&&Q++,j==="Polygon"&&X++}j==="Polygon"&&Q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(X=0,g=0;g<S[_].length;g++){for(b=0;b<S[_][g].length-E;b++){if(u(S[_][g][b],F,B,Q,X)===!1)return!1;F++}X++}Q++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(f(v.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(x,u,A,_){var g=A;return f(x,function(b,v,C,S,k){v===0&&A===void 0?g=b:g=u(g,b,v,C,S,k)},_),g}function T(x,u){var A;switch(x.type){case"FeatureCollection":for(A=0;A<x.features.length&&u(x.features[A].properties,A)!==!1;A++);break;case"Feature":u(x.properties,0);break}}function e(x,u,A){var _=A;return T(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var A=0;A<x.features.length&&u(x.features[A],A)!==!1;A++);}function n(x,u,A){var _=A;return a(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function r(x){var u=[];return f(x,function(A){u.push(A)}),u}function t(x,u){var A,_,g,b,v,C,S,k,E,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(A=0;A<O;A++){for(C=D?x.features[A].geometry:R?x.geometry:x,k=D?x.features[A].properties:R?x.properties:{},E=D?x.features[A].bbox:R?x.bbox:void 0,F=D?x.features[A].id:R?x.id:void 0,S=C?C.type==="GeometryCollection":!1,v=S?C.geometries.length:1,g=0;g<v;g++){if(b=S?C.geometries[g]:C,b===null){if(u(null,I,k,E,F)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(b,I,k,E,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<b.geometries.length;_++)if(u(b.geometries[_],I,k,E,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function h(x,u,A){var _=A;return t(x,function(g,b,v,C,S){b===0&&A===void 0?_=g:_=u(_,g,b,v,C,S)}),_}function i(x,u){t(x,function(A,_,g,b,v){var C=A===null?null:A.type;switch(C){case null:case"Point":case"LineString":case"Polygon":return u(w.feature(A,g,{bbox:b,id:v}),_,0)===!1?!1:void 0}var S;switch(C){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<A.coordinates.length;k++){var E=A.coordinates[k],F={type:S,coordinates:E};if(u(w.feature(F,g),_,k)===!1)return!1}})}function s(x,u,A){var _=A;return i(x,function(g,b,v){b===0&&v===0&&A===void 0?_=g:_=u(_,g,b,v)}),_}function y(x,u){i(x,function(A,_,g){var b=0;if(!!A.geometry){var v=A.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var C,S=0,k=0,E=0;if(f(A,function(F,I,D,R,O){if(C===void 0||_>S||R>k||O>E){C=F,S=_,k=R,E=O,b=0;return}var z=w.lineString([C,F],A.properties);if(u(z,_,g,O,b)===!1)return!1;b++,C=F})===!1)return!1}}})}function d(x,u,A){var _=A,g=!1;return y(x,function(b,v,C,S,k){g===!1&&A===void 0?_=b:_=u(_,b,v,C,S,k),g=!0}),_}function p(x,u){if(!x)throw new Error("geojson is required");i(x,function(A,_,g){if(A.geometry!==null){var b=A.geometry.type,v=A.geometry.coordinates;switch(b){case"LineString":if(u(A,_,g,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<v.length;C++)if(u(w.lineString(v[C],A.properties),_,g,C)===!1)return!1;break}}})}function c(x,u,A){var _=A;return p(x,function(g,b,v,C){b===0&&A===void 0?_=g:_=u(_,g,b,v,C)}),_}function m(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.segmentIndex||0,v=u.properties,C;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,C=x.features[A].geometry;break;case"Feature":v=v||x.properties,C=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=x;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var S=C.coordinates;switch(C.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=S.length+b-1),w.lineString([S[b],S[b+1]],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b-1),w.lineString([S[g][b],S[g][b+1]],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b-1),w.lineString([S[_][b],S[_][b+1]],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b-1),w.lineString([S[_][g][b],S[_][g][b+1]],v,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.coordIndex||0,v=u.properties,C;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,C=x.features[A].geometry;break;case"Feature":v=v||x.properties,C=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=x;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var S=C.coordinates;switch(C.type){case"Point":return w.point(S,v,u);case"MultiPoint":return _<0&&(_=S.length+_),w.point(S[_],v,u);case"LineString":return b<0&&(b=S.length+b),w.point(S[b],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b),w.point(S[g][b],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b),w.point(S[_][b],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b),w.point(S[_][g][b],v,u)}throw new Error("geojson is invalid")}H.coordEach=f,H.coordReduce=M,H.propEach=T,H.propReduce=e,H.featureEach=a,H.featureReduce=n,H.coordAll=r,H.geomEach=t,H.geomReduce=h,H.flattenEach=i,H.flattenReduce=s,H.segmentEach=y,H.segmentReduce=d,H.lineEach=p,H.lineReduce=c,H.findSegment=m,H.findPoint=l},{"@turf/helpers":62}],64:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=o("@turf/meta");function f(M){var T=[1/0,1/0,-1/0,-1/0];return w.coordEach(M,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}f.default=f,H.default=f},{"@turf/meta":66}],65:[function(o,U,H){arguments[4][62][0].apply(H,arguments)},{dup:62}],66:[function(o,U,H){arguments[4][63][0].apply(H,arguments)},{"@turf/helpers":65,dup:63}],67:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=o("@turf/meta"),f=o("@turf/helpers");function M(T,e){e===void 0&&(e={});var a=0,n=0,r=0;return w.coordEach(T,function(t){a+=t[0],n+=t[1],r++}),f.point([a/r,n/r],e.properties)}H.default=M},{"@turf/helpers":68,"@turf/meta":69}],68:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius/1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1/1.0936},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(O,z,B){B===void 0&&(B={});var G={type:"Feature"};return(B.id===0||B.id)&&(G.id=B.id),B.bbox&&(G.bbox=B.bbox),G.properties=z||{},G.geometry=O,G}H.feature=w;function f(O,z,B){switch(O){case"Point":return M(z).geometry;case"LineString":return n(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return i(z).geometry;case"MultiLineString":return h(z).geometry;case"MultiPolygon":return s(z).geometry;default:throw new Error(O+" is invalid")}}H.geometry=f;function M(O,z,B){B===void 0&&(B={});var G={type:"Point",coordinates:O};return w(G,z,B)}H.point=M;function T(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return M(G,z)}),B)}H.points=T;function e(O,z,B){B===void 0&&(B={});for(var G=0,Q=O;G<Q.length;G++){var X=Q[G];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var j=0;j<X[X.length-1].length;j++)if(X[X.length-1][j]!==X[0][j])throw new Error("First and last Position are not equivalent.")}var re={type:"Polygon",coordinates:O};return w(re,z,B)}H.polygon=e;function a(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return e(G,z)}),B)}H.polygons=a;function n(O,z,B){if(B===void 0&&(B={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var G={type:"LineString",coordinates:O};return w(G,z,B)}H.lineString=n;function r(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return n(G,z)}),B)}H.lineStrings=r;function t(O,z){z===void 0&&(z={});var B={type:"FeatureCollection"};return z.id&&(B.id=z.id),z.bbox&&(B.bbox=z.bbox),B.features=O,B}H.featureCollection=t;function h(O,z,B){B===void 0&&(B={});var G={type:"MultiLineString",coordinates:O};return w(G,z,B)}H.multiLineString=h;function i(O,z,B){B===void 0&&(B={});var G={type:"MultiPoint",coordinates:O};return w(G,z,B)}H.multiPoint=i;function s(O,z,B){B===void 0&&(B={});var G={type:"MultiPolygon",coordinates:O};return w(G,z,B)}H.multiPolygon=s;function y(O,z,B){B===void 0&&(B={});var G={type:"GeometryCollection",geometries:O};return w(G,z,B)}H.geometryCollection=y;function d(O,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,z||0);return Math.round(O*B)/B}H.round=d;function p(O,z){z===void 0&&(z="kilometers");var B=H.factors[z];if(!B)throw new Error(z+" units is invalid");return O*B}H.radiansToLength=p;function c(O,z){z===void 0&&(z="kilometers");var B=H.factors[z];if(!B)throw new Error(z+" units is invalid");return O/B}H.lengthToRadians=c;function m(O,z){return x(c(O,z))}H.lengthToDegrees=m;function l(O){var z=O%360;return z<0&&(z+=360),z}H.bearingToAzimuth=l;function x(O){var z=O%(2*Math.PI);return z*180/Math.PI}H.radiansToDegrees=x;function u(O){var z=O%360;return z*Math.PI/180}H.degreesToRadians=u;function A(O,z,B){if(z===void 0&&(z="kilometers"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("length must be a positive number");return p(c(O,z),B)}H.convertLength=A;function _(O,z,B){if(z===void 0&&(z="meters"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("area must be a positive number");var G=H.areaFactors[z];if(!G)throw new Error("invalid original units");var Q=H.areaFactors[B];if(!Q)throw new Error("invalid final units");return O/G*Q}H.convertArea=_;function g(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}H.isNumber=g;function b(O){return!!O&&O.constructor===Object}H.isObject=b;function v(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(z){if(!g(z))throw new Error("bbox must only contain numbers")})}H.validateBBox=v;function C(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}H.validateId=C;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}H.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}H.degrees2radians=k;function E(){throw new Error("method has been renamed to `lengthToDegrees`")}H.distanceToDegrees=E;function F(){throw new Error("method has been renamed to `lengthToRadians`")}H.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}H.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}H.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}H.convertDistance=R},{}],69:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=o("@turf/helpers");function f(x,u,A){if(x!==null)for(var _,g,b,v,C,S,k,E=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,B=0;B<z;B++){k=R?x.features[B].geometry:O?x.geometry:x,I=k?k.type==="GeometryCollection":!1,C=I?k.geometries.length:1;for(var G=0;G<C;G++){var Q=0,X=0;if(v=I?k.geometries[G]:k,v!==null){S=v.coordinates;var j=v.type;switch(E=A&&(j==="Polygon"||j==="MultiPolygon")?1:0,j){case null:break;case"Point":if(u(S,F,B,Q,X)===!1)return!1;F++,Q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,B,Q,X)===!1)return!1;F++,j==="MultiPoint"&&Q++}j==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(g=0;g<S[_].length-E;g++){if(u(S[_][g],F,B,Q,X)===!1)return!1;F++}j==="MultiLineString"&&Q++,j==="Polygon"&&X++}j==="Polygon"&&Q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(X=0,g=0;g<S[_].length;g++){for(b=0;b<S[_][g].length-E;b++){if(u(S[_][g][b],F,B,Q,X)===!1)return!1;F++}X++}Q++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(f(v.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(x,u,A,_){var g=A;return f(x,function(b,v,C,S,k){v===0&&A===void 0?g=b:g=u(g,b,v,C,S,k)},_),g}function T(x,u){var A;switch(x.type){case"FeatureCollection":for(A=0;A<x.features.length&&u(x.features[A].properties,A)!==!1;A++);break;case"Feature":u(x.properties,0);break}}function e(x,u,A){var _=A;return T(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var A=0;A<x.features.length&&u(x.features[A],A)!==!1;A++);}function n(x,u,A){var _=A;return a(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function r(x){var u=[];return f(x,function(A){u.push(A)}),u}function t(x,u){var A,_,g,b,v,C,S,k,E,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(A=0;A<O;A++){for(C=D?x.features[A].geometry:R?x.geometry:x,k=D?x.features[A].properties:R?x.properties:{},E=D?x.features[A].bbox:R?x.bbox:void 0,F=D?x.features[A].id:R?x.id:void 0,S=C?C.type==="GeometryCollection":!1,v=S?C.geometries.length:1,g=0;g<v;g++){if(b=S?C.geometries[g]:C,b===null){if(u(null,I,k,E,F)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(b,I,k,E,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<b.geometries.length;_++)if(u(b.geometries[_],I,k,E,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function h(x,u,A){var _=A;return t(x,function(g,b,v,C,S){b===0&&A===void 0?_=g:_=u(_,g,b,v,C,S)}),_}function i(x,u){t(x,function(A,_,g,b,v){var C=A===null?null:A.type;switch(C){case null:case"Point":case"LineString":case"Polygon":return u(w.feature(A,g,{bbox:b,id:v}),_,0)===!1?!1:void 0}var S;switch(C){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<A.coordinates.length;k++){var E=A.coordinates[k],F={type:S,coordinates:E};if(u(w.feature(F,g),_,k)===!1)return!1}})}function s(x,u,A){var _=A;return i(x,function(g,b,v){b===0&&v===0&&A===void 0?_=g:_=u(_,g,b,v)}),_}function y(x,u){i(x,function(A,_,g){var b=0;if(!!A.geometry){var v=A.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var C,S=0,k=0,E=0;if(f(A,function(F,I,D,R,O){if(C===void 0||_>S||R>k||O>E){C=F,S=_,k=R,E=O,b=0;return}var z=w.lineString([C,F],A.properties);if(u(z,_,g,O,b)===!1)return!1;b++,C=F})===!1)return!1}}})}function d(x,u,A){var _=A,g=!1;return y(x,function(b,v,C,S,k){g===!1&&A===void 0?_=b:_=u(_,b,v,C,S,k),g=!0}),_}function p(x,u){if(!x)throw new Error("geojson is required");i(x,function(A,_,g){if(A.geometry!==null){var b=A.geometry.type,v=A.geometry.coordinates;switch(b){case"LineString":if(u(A,_,g,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<v.length;C++)if(u(w.lineString(v[C],A.properties),_,g,C)===!1)return!1;break}}})}function c(x,u,A){var _=A;return p(x,function(g,b,v,C){b===0&&A===void 0?_=g:_=u(_,g,b,v,C)}),_}function m(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.segmentIndex||0,v=u.properties,C;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,C=x.features[A].geometry;break;case"Feature":v=v||x.properties,C=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=x;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var S=C.coordinates;switch(C.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=S.length+b-1),w.lineString([S[b],S[b+1]],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b-1),w.lineString([S[g][b],S[g][b+1]],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b-1),w.lineString([S[_][b],S[_][b+1]],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b-1),w.lineString([S[_][g][b],S[_][g][b+1]],v,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.coordIndex||0,v=u.properties,C;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,C=x.features[A].geometry;break;case"Feature":v=v||x.properties,C=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=x;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var S=C.coordinates;switch(C.type){case"Point":return w.point(S,v,u);case"MultiPoint":return _<0&&(_=S.length+_),w.point(S[_],v,u);case"LineString":return b<0&&(b=S.length+b),w.point(S[b],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b),w.point(S[g][b],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b),w.point(S[_][b],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b),w.point(S[_][g][b],v,u)}throw new Error("geojson is invalid")}H.coordEach=f,H.coordReduce=M,H.propEach=T,H.propReduce=e,H.featureEach=a,H.featureReduce=n,H.coordAll=r,H.geomEach=t,H.geomReduce=h,H.flattenEach=i,H.flattenReduce=s,H.segmentEach=y,H.segmentReduce=d,H.lineEach=p,H.lineReduce=c,H.findSegment=m,H.findPoint=l},{"@turf/helpers":68}],70:[function(o,U,H){U.exports=w;function w(f){var M=0,T=0,e=0,a=0;return f.map(function(n){n=n.slice();var r=n[0],t=r.toUpperCase();if(r!=t)switch(n[0]=t,r){case"a":n[6]+=e,n[7]+=a;break;case"v":n[1]+=a;break;case"h":n[1]+=e;break;default:for(var h=1;h<n.length;)n[h++]+=e,n[h++]+=a}switch(t){case"Z":e=M,a=T;break;case"H":e=n[1];break;case"V":a=n[1];break;case"M":e=M=n[1],a=T=n[2];break;default:e=n[n.length-2],a=n[n.length-1]}return n})}},{}],71:[function(o,U,H){U.exports=w;function w(f,M){if(!f||f.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var T=Array(M*2),e=0;e<M;e++){for(var a=-1/0,n=1/0,r=e,t=f.length;r<t;r+=M)f[r]>a&&(a=f[r]),f[r]<n&&(n=f[r]);T[e]=n,T[M+e]=a}return T}},{}],72:[function(o,U,H){U.exports=function(w,f,M){if(typeof Array.prototype.findIndex=="function")return w.findIndex(f,M);if(typeof f!="function")throw new TypeError("predicate must be a function");var T=Object(w),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(f.call(M,T[a],a,T))return a;return-1}},{}],73:[function(o,U,H){var w=o("array-bounds");U.exports=f;function f(M,T,e){if(!M||M.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=w(M,T));for(var a=0;a<T;a++){var n=e[T+a],r=e[a],t=a,h=M.length;if(n===1/0&&r===-1/0)for(t=a;t<h;t+=T)M[t]=M[t]===n?1:M[t]===r?0:.5;else if(n===1/0)for(t=a;t<h;t+=T)M[t]=M[t]===n?1:0;else if(r===-1/0)for(t=a;t<h;t+=T)M[t]=M[t]===r?0:1;else{var i=n-r;for(t=a;t<h;t+=T)isNaN(M[t])||(M[t]=i===0?.5:(M[t]-r)/i)}}return M}},{"array-bounds":71}],74:[function(o,U,H){U.exports=function(f,M){var T=typeof f=="number",e=typeof M=="number";T&&!e?(M=f,f=0):!T&&!e&&(f=0,M=0),f=f|0,M=M|0;var a=M-f;if(a<0)throw new Error("array length must be positive");for(var n=new Array(a),r=0,t=f;r<a;r++,t++)n[r]=t;return n}},{}],75:[function(o,U,H){(function(w){(function(){var f=o("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(k,E){if(k===E)return 0;for(var F=k.length,I=E.length,D=0,R=Math.min(F,I);D<R;++D)if(k[D]!==E[D]){F=k[D],I=E[D];break}return F<I?-1:I<F?1:0}function T(k){return w.Buffer&&typeof w.Buffer.isBuffer=="function"?w.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var e=o("util/"),a=Object.prototype.hasOwnProperty,n=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function t(k){return Object.prototype.toString.call(k)}function h(k){return T(k)||typeof w.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var i=U.exports=l,s=/\s*function\s+([^\(\s]*)\s*/;function y(k){if(!!e.isFunction(k)){if(r)return k.name;var E=k.toString(),F=E.match(s);return F&&F[1]}}i.AssertionError=function(E){this.name="AssertionError",this.actual=E.actual,this.expected=E.expected,this.operator=E.operator,E.message?(this.message=E.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var F=E.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=y(F),O=D.indexOf(`
`+R);if(O>=0){var z=D.indexOf(`
`,O+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(i.AssertionError,Error);function d(k,E){return typeof k=="string"?k.length<E?k:k.slice(0,E):k}function p(k){if(r||!e.isFunction(k))return e.inspect(k);var E=y(k),F=E?": "+E:"";return"[Function"+F+"]"}function c(k){return d(p(k.actual),128)+" "+k.operator+" "+d(p(k.expected),128)}function m(k,E,F,I,D){throw new i.AssertionError({message:F,actual:k,expected:E,operator:I,stackStartFunction:D})}i.fail=m;function l(k,E){k||m(k,!0,E,"==",i.ok)}i.ok=l,i.equal=function(E,F,I){E!=F&&m(E,F,I,"==",i.equal)},i.notEqual=function(E,F,I){E==F&&m(E,F,I,"!=",i.notEqual)},i.deepEqual=function(E,F,I){x(E,F,!1)||m(E,F,I,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(E,F,I){x(E,F,!0)||m(E,F,I,"deepStrictEqual",i.deepStrictEqual)};function x(k,E,F,I){if(k===E)return!0;if(T(k)&&T(E))return M(k,E)===0;if(e.isDate(k)&&e.isDate(E))return k.getTime()===E.getTime();if(e.isRegExp(k)&&e.isRegExp(E))return k.source===E.source&&k.global===E.global&&k.multiline===E.multiline&&k.lastIndex===E.lastIndex&&k.ignoreCase===E.ignoreCase;if((k===null||typeof k!="object")&&(E===null||typeof E!="object"))return F?k===E:k==E;if(h(k)&&h(E)&&t(k)===t(E)&&!(k instanceof Float32Array||k instanceof Float64Array))return M(new Uint8Array(k.buffer),new Uint8Array(E.buffer))===0;if(T(k)!==T(E))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(k);return D!==-1&&D===I.expected.indexOf(E)?!0:(I.actual.push(k),I.expected.push(E),A(k,E,F,I))}function u(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function A(k,E,F,I){if(k==null||E===null||E===void 0)return!1;if(e.isPrimitive(k)||e.isPrimitive(E))return k===E;if(F&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(E))return!1;var D=u(k),R=u(E);if(D&&!R||!D&&R)return!1;if(D)return k=n.call(k),E=n.call(E),x(k,E,F);var O=S(k),z=S(E),B,G;if(O.length!==z.length)return!1;for(O.sort(),z.sort(),G=O.length-1;G>=0;G--)if(O[G]!==z[G])return!1;for(G=O.length-1;G>=0;G--)if(B=O[G],!x(k[B],E[B],F,I))return!1;return!0}i.notDeepEqual=function(E,F,I){x(E,F,!1)&&m(E,F,I,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=_;function _(k,E,F){x(k,E,!0)&&m(k,E,F,"notDeepStrictEqual",_)}i.strictEqual=function(E,F,I){E!==F&&m(E,F,I,"===",i.strictEqual)},i.notStrictEqual=function(E,F,I){E===F&&m(E,F,I,"!==",i.notStrictEqual)};function g(k,E){if(!k||!E)return!1;if(Object.prototype.toString.call(E)=="[object RegExp]")return E.test(k);try{if(k instanceof E)return!0}catch{}return Error.isPrototypeOf(E)?!1:E.call({},k)===!0}function b(k){var E;try{k()}catch(F){E=F}return E}function v(k,E,F,I){var D;if(typeof E!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=b(E),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),k&&!D&&m(D,F,"Missing expected exception"+I);var R=typeof I=="string",O=!k&&e.isError(D),z=!k&&D&&!F;if((O&&R&&g(D,F)||z)&&m(D,F,"Got unwanted exception"+I),k&&D&&F&&!g(D,F)||!k&&D)throw D}i.throws=function(k,E,F){v(!0,k,E,F)},i.doesNotThrow=function(k,E,F){v(!1,k,E,F)},i.ifError=function(k){if(k)throw k};function C(k,E){k||m(k,!0,E,"==",C)}i.strict=f(C,i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var S=Object.keys||function(k){var E=[];for(var F in k)a.call(k,F)&&E.push(F);return E}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(o,U,H){typeof Object.create=="function"?U.exports=function(f,M){f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:U.exports=function(f,M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}},{}],77:[function(o,U,H){U.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},{}],78:[function(o,U,H){(function(w,f){(function(){var M=/%[sdj%]/g;H.format=function(z){if(!A(z)){for(var B=[],G=0;G<arguments.length;G++)B.push(a(arguments[G]));return B.join(" ")}for(var G=1,Q=arguments,X=Q.length,j=String(z).replace(M,function(ue){if(ue==="%%")return"%";if(G>=X)return ue;switch(ue){case"%s":return String(Q[G++]);case"%d":return Number(Q[G++]);case"%j":try{return JSON.stringify(Q[G++])}catch{return"[Circular]"}default:return ue}}),re=Q[G];G<X;re=Q[++G])l(re)||!v(re)?j+=" "+re:j+=" "+a(re);return j},H.deprecate=function(z,B){if(g(f.process))return function(){return H.deprecate(z,B).apply(this,arguments)};if(w.noDeprecation===!0)return z;var G=!1;function Q(){if(!G){if(w.throwDeprecation)throw new Error(B);w.traceDeprecation?console.trace(B):console.error(B),G=!0}return z.apply(this,arguments)}return Q};var T={},e;H.debuglog=function(z){if(g(e)&&(e=w.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var B=w.pid;T[z]=function(){var G=H.format.apply(H,arguments);console.error("%s %d: %s",z,B,G)}}else T[z]=function(){};return T[z]};function a(z,B){var G={seen:[],stylize:r};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),m(B)?G.showHidden=B:B&&H._extend(G,B),g(G.showHidden)&&(G.showHidden=!1),g(G.depth)&&(G.depth=2),g(G.colors)&&(G.colors=!1),g(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=n),h(G,z,G.depth)}H.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(z,B){var G=a.styles[B];return G?"\x1B["+a.colors[G][0]+"m"+z+"\x1B["+a.colors[G][1]+"m":z}function r(z,B){return z}function t(z){var B={};return z.forEach(function(G,Q){B[G]=!0}),B}function h(z,B,G){if(z.customInspect&&B&&k(B.inspect)&&B.inspect!==H.inspect&&!(B.constructor&&B.constructor.prototype===B)){var Q=B.inspect(G,z);return A(Q)||(Q=h(z,Q,G)),Q}var X=i(z,B);if(X)return X;var j=Object.keys(B),re=t(j);if(z.showHidden&&(j=Object.getOwnPropertyNames(B)),S(B)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return s(B);if(j.length===0){if(k(B)){var ue=B.name?": "+B.name:"";return z.stylize("[Function"+ue+"]","special")}if(b(B))return z.stylize(RegExp.prototype.toString.call(B),"regexp");if(C(B))return z.stylize(Date.prototype.toString.call(B),"date");if(S(B))return s(B)}var K="",te=!1,Y=["{","}"];if(c(B)&&(te=!0,Y=["[","]"]),k(B)){var V=B.name?": "+B.name:"";K=" [Function"+V+"]"}if(b(B)&&(K=" "+RegExp.prototype.toString.call(B)),C(B)&&(K=" "+Date.prototype.toUTCString.call(B)),S(B)&&(K=" "+s(B)),j.length===0&&(!te||B.length==0))return Y[0]+K+Y[1];if(G<0)return b(B)?z.stylize(RegExp.prototype.toString.call(B),"regexp"):z.stylize("[Object]","special");z.seen.push(B);var ee;return te?ee=y(z,B,G,re,j):ee=j.map(function(ne){return d(z,B,G,re,ne,te)}),z.seen.pop(),p(ee,K,Y)}function i(z,B){if(g(B))return z.stylize("undefined","undefined");if(A(B)){var G="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(G,"string")}if(u(B))return z.stylize(""+B,"number");if(m(B))return z.stylize(""+B,"boolean");if(l(B))return z.stylize("null","null")}function s(z){return"["+Error.prototype.toString.call(z)+"]"}function y(z,B,G,Q,X){for(var j=[],re=0,ue=B.length;re<ue;++re)O(B,String(re))?j.push(d(z,B,G,Q,String(re),!0)):j.push("");return X.forEach(function(K){K.match(/^\d+$/)||j.push(d(z,B,G,Q,K,!0))}),j}function d(z,B,G,Q,X,j){var re,ue,K;if(K=Object.getOwnPropertyDescriptor(B,X)||{value:B[X]},K.get?K.set?ue=z.stylize("[Getter/Setter]","special"):ue=z.stylize("[Getter]","special"):K.set&&(ue=z.stylize("[Setter]","special")),O(Q,X)||(re="["+X+"]"),ue||(z.seen.indexOf(K.value)<0?(l(G)?ue=h(z,K.value,null):ue=h(z,K.value,G-1),ue.indexOf(`
`)>-1&&(j?ue=ue.split(`
`).map(function(te){return"  "+te}).join(`
`).substr(2):ue=`
`+ue.split(`
`).map(function(te){return"   "+te}).join(`
`))):ue=z.stylize("[Circular]","special")),g(re)){if(j&&X.match(/^\d+$/))return ue;re=JSON.stringify(""+X),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=z.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=z.stylize(re,"string"))}return re+": "+ue}function p(z,B,G){var Q=z.reduce(function(X,j){return j.indexOf(`
`)>=0,X+j.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Q>60?G[0]+(B===""?"":B+`
 `)+" "+z.join(`,
  `)+" "+G[1]:G[0]+B+" "+z.join(", ")+" "+G[1]}function c(z){return Array.isArray(z)}H.isArray=c;function m(z){return typeof z=="boolean"}H.isBoolean=m;function l(z){return z===null}H.isNull=l;function x(z){return z==null}H.isNullOrUndefined=x;function u(z){return typeof z=="number"}H.isNumber=u;function A(z){return typeof z=="string"}H.isString=A;function _(z){return typeof z=="symbol"}H.isSymbol=_;function g(z){return z===void 0}H.isUndefined=g;function b(z){return v(z)&&F(z)==="[object RegExp]"}H.isRegExp=b;function v(z){return typeof z=="object"&&z!==null}H.isObject=v;function C(z){return v(z)&&F(z)==="[object Date]"}H.isDate=C;function S(z){return v(z)&&(F(z)==="[object Error]"||z instanceof Error)}H.isError=S;function k(z){return typeof z=="function"}H.isFunction=k;function E(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}H.isPrimitive=E,H.isBuffer=o("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,B=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],B].join(" ")}H.log=function(){console.log("%s - %s",R(),H.format.apply(H,arguments))},H.inherits=o("inherits"),H._extend=function(z,B){if(!B||!v(B))return z;for(var G=Object.keys(B),Q=G.length;Q--;)z[G[Q]]=B[G[Q]];return z};function O(z,B){return Object.prototype.hasOwnProperty.call(z,B)}}).call(this)}).call(this,o("_process"),typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(o,U,H){H.byteLength=r,H.toByteArray=h,H.fromByteArray=y;for(var w=[],f=[],M=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)w[e]=T[e],f[T.charCodeAt(e)]=e;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function n(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=d.indexOf("=");c===-1&&(c=p);var m=c===p?0:4-c%4;return[c,m]}function r(d){var p=n(d),c=p[0],m=p[1];return(c+m)*3/4-m}function t(d,p,c){return(p+c)*3/4-c}function h(d){var p,c=n(d),m=c[0],l=c[1],x=new M(t(d,m,l)),u=0,A=l>0?m-4:m,_;for(_=0;_<A;_+=4)p=f[d.charCodeAt(_)]<<18|f[d.charCodeAt(_+1)]<<12|f[d.charCodeAt(_+2)]<<6|f[d.charCodeAt(_+3)],x[u++]=p>>16&255,x[u++]=p>>8&255,x[u++]=p&255;return l===2&&(p=f[d.charCodeAt(_)]<<2|f[d.charCodeAt(_+1)]>>4,x[u++]=p&255),l===1&&(p=f[d.charCodeAt(_)]<<10|f[d.charCodeAt(_+1)]<<4|f[d.charCodeAt(_+2)]>>2,x[u++]=p>>8&255,x[u++]=p&255),x}function i(d){return w[d>>18&63]+w[d>>12&63]+w[d>>6&63]+w[d&63]}function s(d,p,c){for(var m,l=[],x=p;x<c;x+=3)m=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(d[x+2]&255),l.push(i(m));return l.join("")}function y(d){for(var p,c=d.length,m=c%3,l=[],x=16383,u=0,A=c-m;u<A;u+=x)l.push(s(d,u,u+x>A?A:u+x));return m===1?(p=d[c-1],l.push(w[p>>2]+w[p<<4&63]+"==")):m===2&&(p=(d[c-2]<<8)+d[c-1],l.push(w[p>>10]+w[p>>4&63]+w[p<<2&63]+"=")),l.join("")}},{}],80:[function(o,U,H){function w(n,r,t,h,i){for(var s=i+1;h<=i;){var y=h+i>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p>=0?(s=y,i=y-1):h=y+1}return s}function f(n,r,t,h,i){for(var s=i+1;h<=i;){var y=h+i>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p>0?(s=y,i=y-1):h=y+1}return s}function M(n,r,t,h,i){for(var s=h-1;h<=i;){var y=h+i>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p<0?(s=y,h=y+1):i=y-1}return s}function T(n,r,t,h,i){for(var s=h-1;h<=i;){var y=h+i>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p<=0?(s=y,h=y+1):i=y-1}return s}function e(n,r,t,h,i){for(;h<=i;){var s=h+i>>>1,y=n[s],d=t!==void 0?t(y,r):y-r;if(d===0)return s;d<=0?h=s+1:i=s-1}return-1}function a(n,r,t,h,i,s){return typeof t=="function"?s(n,r,t,h===void 0?0:h|0,i===void 0?n.length-1:i|0):s(n,r,void 0,t===void 0?0:t|0,h===void 0?n.length-1:h|0)}U.exports={ge:function(n,r,t,h,i){return a(n,r,t,h,i,w)},gt:function(n,r,t,h,i){return a(n,r,t,h,i,f)},lt:function(n,r,t,h,i){return a(n,r,t,h,i,M)},le:function(n,r,t,h,i){return a(n,r,t,h,i,T)},eq:function(n,r,t,h,i){return a(n,r,t,h,i,e)}}},{}],81:[function(o,U,H){var w=32;H.INT_BITS=w,H.INT_MAX=2147483647,H.INT_MIN=-1<<w-1,H.sign=function(T){return(T>0)-(T<0)},H.abs=function(T){var e=T>>w-1;return(T^e)-e},H.min=function(T,e){return e^(T^e)&-(T<e)},H.max=function(T,e){return T^(T^e)&-(T<e)},H.isPow2=function(T){return!(T&T-1)&&!!T},H.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},H.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},H.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function f(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}H.countTrailingZeros=f,H.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},H.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},H.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var M=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,n=e,r=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=a&1,--r;T[e]=n<<r&255}})(M),H.reverse=function(T){return M[T&255]<<24|M[T>>>8&255]<<16|M[T>>>16&255]<<8|M[T>>>24&255]},H.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},H.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},H.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},H.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},H.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>f(T)+1}},{}],82:[function(o,U,H){var w=o("clamp");U.exports=M;var f=1e20;function M(a,n){n||(n={});var r=n.cutoff==null?.25:n.cutoff,t=n.radius==null?8:n.radius,h=n.channel||0,i,s,y,d,p,c,m,l,x,u,A;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,s=n.height,d=a,n.stride?c=n.stride:c=Math.floor(a.length/i/s)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,m=l.getContext("2d"),i=l.width,s=l.height,x=m.getImageData(0,0,i,s),d=x.data,c=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,m=a,i=l.width,s=l.height,x=m.getImageData(0,0,i,s),d=x.data,c=4):window.ImageData&&a instanceof window.ImageData&&(x=a,i=a.width,s=a.height,d=x.data,c=4);if(y=Math.max(i,s),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(p=d,d=Array(i*s),u=0,A=p.length;u<A;u++)d[u]=p[u*c+h]/255;else if(c!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(i*s),g=Array(i*s),b=Array(y),v=Array(y),C=Array(y+1),S=Array(y);for(u=0,A=i*s;u<A;u++){var k=d[u];_[u]=k===1?0:k===0?f:Math.pow(Math.max(0,.5-k),2),g[u]=k===1?f:k===0?0:Math.pow(Math.max(0,k-.5),2)}T(_,i,s,b,v,S,C),T(g,i,s,b,v,S,C);var E=window.Float32Array?new Float32Array(i*s):new Array(i*s);for(u=0,A=i*s;u<A;u++)E[u]=w(1-((_[u]-g[u])/t+r),0,1);return E}function T(a,n,r,t,h,i,s){for(var y=0;y<n;y++){for(var d=0;d<r;d++)t[d]=a[d*n+y];for(e(t,h,i,s,r),d=0;d<r;d++)a[d*n+y]=h[d]}for(d=0;d<r;d++){for(y=0;y<n;y++)t[y]=a[d*n+y];for(e(t,h,i,s,n),y=0;y<n;y++)a[d*n+y]=Math.sqrt(h[y])}}function e(a,n,r,t,h){r[0]=0,t[0]=-f,t[1]=+f;for(var i=1,s=0;i<h;i++){for(var y=(a[i]+i*i-(a[r[s]]+r[s]*r[s]))/(2*i-2*r[s]);y<=t[s];)s--,y=(a[i]+i*i-(a[r[s]]+r[s]*r[s]))/(2*i-2*r[s]);s++,r[s]=i,t[s]=y,t[s+1]=+f}for(i=0,s=0;i<h;i++){for(;t[s+1]<i;)s++;n[i]=(i-r[s])*(i-r[s])+a[r[s]]}}},{clamp:86}],83:[function(o,U,H){},{}],84:[function(o,U,H){var w=typeof Reflect=="object"?Reflect:null,f=w&&typeof w.apply=="function"?w.apply:function(u,A,_){return Function.prototype.apply.call(u,A,_)},M;w&&typeof w.ownKeys=="function"?M=w.ownKeys:Object.getOwnPropertySymbols?M=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:M=function(u){return Object.getOwnPropertyNames(u)};function T(x){console&&console.warn&&console.warn(x)}var e=Number.isNaN||function(u){return u!==u};function a(){a.init.call(this)}U.exports=a,U.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function r(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(x){if(typeof x!="number"||x<0||e(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");n=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||e(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function t(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return t(this)},a.prototype.emit=function(u){for(var A=[],_=1;_<arguments.length;_++)A.push(arguments[_]);var g=u==="error",b=this._events;if(b!==void 0)g=g&&b.error===void 0;else if(!g)return!1;if(g){var v;if(A.length>0&&(v=A[0]),v instanceof Error)throw v;var C=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw C.context=v,C}var S=b[u];if(S===void 0)return!1;if(typeof S=="function")f(S,this,A);else for(var k=S.length,E=p(S,k),_=0;_<k;++_)f(E[_],this,A);return!0};function h(x,u,A,_){var g,b,v;if(r(A),b=x._events,b===void 0?(b=x._events=Object.create(null),x._eventsCount=0):(b.newListener!==void 0&&(x.emit("newListener",u,A.listener?A.listener:A),b=x._events),v=b[u]),v===void 0)v=b[u]=A,++x._eventsCount;else if(typeof v=="function"?v=b[u]=_?[A,v]:[v,A]:_?v.unshift(A):v.push(A),g=t(x),g>0&&v.length>g&&!v.warned){v.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=x,C.type=u,C.count=v.length,T(C)}return x}a.prototype.addListener=function(u,A){return h(this,u,A,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,A){return h(this,u,A,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(x,u,A){var _={fired:!1,wrapFn:void 0,target:x,type:u,listener:A},g=i.bind(_);return g.listener=A,_.wrapFn=g,g}a.prototype.once=function(u,A){return r(A),this.on(u,s(this,u,A)),this},a.prototype.prependOnceListener=function(u,A){return r(A),this.prependListener(u,s(this,u,A)),this},a.prototype.removeListener=function(u,A){var _,g,b,v,C;if(r(A),g=this._events,g===void 0)return this;if(_=g[u],_===void 0)return this;if(_===A||_.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete g[u],g.removeListener&&this.emit("removeListener",u,_.listener||A));else if(typeof _!="function"){for(b=-1,v=_.length-1;v>=0;v--)if(_[v]===A||_[v].listener===A){C=_[v].listener,b=v;break}if(b<0)return this;b===0?_.shift():c(_,b),_.length===1&&(g[u]=_[0]),g.removeListener!==void 0&&this.emit("removeListener",u,C||A)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var A,_,g;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[u]),this;if(arguments.length===0){var b=Object.keys(_),v;for(g=0;g<b.length;++g)v=b[g],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=_[u],typeof A=="function")this.removeListener(u,A);else if(A!==void 0)for(g=A.length-1;g>=0;g--)this.removeListener(u,A[g]);return this};function y(x,u,A){var _=x._events;if(_===void 0)return[];var g=_[u];return g===void 0?[]:typeof g=="function"?A?[g.listener||g]:[g]:A?m(g):p(g,g.length)}a.prototype.listeners=function(u){return y(this,u,!0)},a.prototype.rawListeners=function(u){return y(this,u,!1)},a.listenerCount=function(x,u){return typeof x.listenerCount=="function"?x.listenerCount(u):d.call(x,u)},a.prototype.listenerCount=d;function d(x){var u=this._events;if(u!==void 0){var A=u[x];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function p(x,u){for(var A=new Array(u),_=0;_<u;++_)A[_]=x[_];return A}function c(x,u){for(;u+1<x.length;u++)x[u]=x[u+1];x.pop()}function m(x){for(var u=new Array(x.length),A=0;A<u.length;++A)u[A]=x[A].listener||x[A];return u}function l(x,u){return new Promise(function(A,_){function g(){b!==void 0&&x.removeListener("error",b),A([].slice.call(arguments))}var b;u!=="error"&&(b=function(C){x.removeListener(u,g),_(C)},x.once("error",b)),x.once(u,g)})}},{}],85:[function(o,U,H){(function(w){(function(){var f=o("base64-js"),M=o("ieee754");H.Buffer=n,H.SlowBuffer=m,H.INSPECT_MAX_BYTES=50;var T=2147483647;H.kMaxLength=T,n.TYPED_ARRAY_SUPPORT=e(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var se=new Uint8Array(1);return se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},se.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function a(se){if(se>T)throw new RangeError('The value "'+se+'" is invalid for option "size"');var ae=new Uint8Array(se);return ae.__proto__=n.prototype,ae}function n(se,ae,oe){if(typeof se=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(se)}return r(se,ae,oe)}typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function r(se,ae,oe){if(typeof se=="string")return s(se,ae);if(ArrayBuffer.isView(se))return y(se);if(se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(q(se,ArrayBuffer)||se&&q(se.buffer,ArrayBuffer))return d(se,ae,oe);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var be=se.valueOf&&se.valueOf();if(be!=null&&be!==se)return n.from(be,ae,oe);var ce=p(se);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return n.from(se[Symbol.toPrimitive]("string"),ae,oe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}n.from=function(se,ae,oe){return r(se,ae,oe)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function t(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function h(se,ae,oe){return t(se),se<=0?a(se):ae!==void 0?typeof oe=="string"?a(se).fill(ae,oe):a(se).fill(ae):a(se)}n.alloc=function(se,ae,oe){return h(se,ae,oe)};function i(se){return t(se),a(se<0?0:c(se)|0)}n.allocUnsafe=function(se){return i(se)},n.allocUnsafeSlow=function(se){return i(se)};function s(se,ae){if((typeof ae!="string"||ae==="")&&(ae="utf8"),!n.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);var oe=l(se,ae)|0,be=a(oe),ce=be.write(se,ae);return ce!==oe&&(be=be.slice(0,ce)),be}function y(se){for(var ae=se.length<0?0:c(se.length)|0,oe=a(ae),be=0;be<ae;be+=1)oe[be]=se[be]&255;return oe}function d(se,ae,oe){if(ae<0||se.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ae+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var be;return ae===void 0&&oe===void 0?be=new Uint8Array(se):oe===void 0?be=new Uint8Array(se,ae):be=new Uint8Array(se,ae,oe),be.__proto__=n.prototype,be}function p(se){if(n.isBuffer(se)){var ae=c(se.length)|0,oe=a(ae);return oe.length===0||se.copy(oe,0,0,ae),oe}if(se.length!==void 0)return typeof se.length!="number"||ie(se.length)?a(0):y(se);if(se.type==="Buffer"&&Array.isArray(se.data))return y(se.data)}function c(se){if(se>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return se|0}function m(se){return+se!=se&&(se=0),n.alloc(+se)}n.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==n.prototype},n.compare=function(ae,oe){if(q(ae,Uint8Array)&&(ae=n.from(ae,ae.offset,ae.byteLength)),q(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(ae)||!n.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===oe)return 0;for(var be=ae.length,ce=oe.length,de=0,ye=Math.min(be,ce);de<ye;++de)if(ae[de]!==oe[de]){be=ae[de],ce=oe[de];break}return be<ce?-1:ce<be?1:0},n.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ae,oe){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return n.alloc(0);var be;if(oe===void 0)for(oe=0,be=0;be<ae.length;++be)oe+=ae[be].length;var ce=n.allocUnsafe(oe),de=0;for(be=0;be<ae.length;++be){var ye=ae[be];if(q(ye,Uint8Array)&&(ye=n.from(ye)),!n.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(ce,de),de+=ye.length}return ce};function l(se,ae){if(n.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||q(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var oe=se.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&oe===0)return 0;for(var ce=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":return Y(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe*2;case"hex":return oe>>>1;case"base64":return ne(se).length;default:if(ce)return be?-1:Y(se).length;ae=(""+ae).toLowerCase(),ce=!0}}n.byteLength=l;function x(se,ae,oe){var be=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((oe===void 0||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0,ae>>>=0,oe<=ae))return"";for(se||(se="utf8");;)switch(se){case"hex":return z(this,ae,oe);case"utf8":case"utf-8":return F(this,ae,oe);case"ascii":return R(this,ae,oe);case"latin1":case"binary":return O(this,ae,oe);case"base64":return E(this,ae,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ae,oe);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),be=!0}}n.prototype._isBuffer=!0;function u(se,ae,oe){var be=se[ae];se[ae]=se[oe],se[oe]=be}n.prototype.swap16=function(){var ae=this.length;if(ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<ae;oe+=2)u(this,oe,oe+1);return this},n.prototype.swap32=function(){var ae=this.length;if(ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<ae;oe+=4)u(this,oe,oe+3),u(this,oe+1,oe+2);return this},n.prototype.swap64=function(){var ae=this.length;if(ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<ae;oe+=8)u(this,oe,oe+7),u(this,oe+1,oe+6),u(this,oe+2,oe+5),u(this,oe+3,oe+4);return this},n.prototype.toString=function(){var ae=this.length;return ae===0?"":arguments.length===0?F(this,0,ae):x.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(ae){if(!n.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae?!0:n.compare(this,ae)===0},n.prototype.inspect=function(){var ae="",oe=H.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(ae+=" ... "),"<Buffer "+ae+">"},n.prototype.compare=function(ae,oe,be,ce,de){if(q(ae,Uint8Array)&&(ae=n.from(ae,ae.offset,ae.byteLength)),!n.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ae);if(oe===void 0&&(oe=0),be===void 0&&(be=ae?ae.length:0),ce===void 0&&(ce=0),de===void 0&&(de=this.length),oe<0||be>ae.length||ce<0||de>this.length)throw new RangeError("out of range index");if(ce>=de&&oe>=be)return 0;if(ce>=de)return-1;if(oe>=be)return 1;if(oe>>>=0,be>>>=0,ce>>>=0,de>>>=0,this===ae)return 0;for(var ye=de-ce,ge=be-oe,me=Math.min(ye,ge),Me=this.slice(ce,de),Le=ae.slice(oe,be),Oe=0;Oe<me;++Oe)if(Me[Oe]!==Le[Oe]){ye=Me[Oe],ge=Le[Oe];break}return ye<ge?-1:ge<ye?1:0};function A(se,ae,oe,be,ce){if(se.length===0)return-1;if(typeof oe=="string"?(be=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),oe=+oe,ie(oe)&&(oe=ce?0:se.length-1),oe<0&&(oe=se.length+oe),oe>=se.length){if(ce)return-1;oe=se.length-1}else if(oe<0)if(ce)oe=0;else return-1;if(typeof ae=="string"&&(ae=n.from(ae,be)),n.isBuffer(ae))return ae.length===0?-1:_(se,ae,oe,be,ce);if(typeof ae=="number")return ae=ae&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(se,ae,oe):Uint8Array.prototype.lastIndexOf.call(se,ae,oe):_(se,[ae],oe,be,ce);throw new TypeError("val must be string, number or Buffer")}function _(se,ae,oe,be,ce){var de=1,ye=se.length,ge=ae.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(se.length<2||ae.length<2)return-1;de=2,ye/=2,ge/=2,oe/=2}function me(Ee,Ze){return de===1?Ee[Ze]:Ee.readUInt16BE(Ze*de)}var Me;if(ce){var Le=-1;for(Me=oe;Me<ye;Me++)if(me(se,Me)===me(ae,Le===-1?0:Me-Le)){if(Le===-1&&(Le=Me),Me-Le+1===ge)return Le*de}else Le!==-1&&(Me-=Me-Le),Le=-1}else for(oe+ge>ye&&(oe=ye-ge),Me=oe;Me>=0;Me--){for(var Oe=!0,_e=0;_e<ge;_e++)if(me(se,Me+_e)!==me(ae,_e)){Oe=!1;break}if(Oe)return Me}return-1}n.prototype.includes=function(ae,oe,be){return this.indexOf(ae,oe,be)!==-1},n.prototype.indexOf=function(ae,oe,be){return A(this,ae,oe,be,!0)},n.prototype.lastIndexOf=function(ae,oe,be){return A(this,ae,oe,be,!1)};function g(se,ae,oe,be){oe=Number(oe)||0;var ce=se.length-oe;be?(be=Number(be),be>ce&&(be=ce)):be=ce;var de=ae.length;be>de/2&&(be=de/2);for(var ye=0;ye<be;++ye){var ge=parseInt(ae.substr(ye*2,2),16);if(ie(ge))return ye;se[oe+ye]=ge}return ye}function b(se,ae,oe,be){return Z(Y(ae,se.length-oe),se,oe,be)}function v(se,ae,oe,be){return Z(V(ae),se,oe,be)}function C(se,ae,oe,be){return v(se,ae,oe,be)}function S(se,ae,oe,be){return Z(ne(ae),se,oe,be)}function k(se,ae,oe,be){return Z(ee(ae,se.length-oe),se,oe,be)}n.prototype.write=function(ae,oe,be,ce){if(oe===void 0)ce="utf8",be=this.length,oe=0;else if(be===void 0&&typeof oe=="string")ce=oe,be=this.length,oe=0;else if(isFinite(oe))oe=oe>>>0,isFinite(be)?(be=be>>>0,ce===void 0&&(ce="utf8")):(ce=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var de=this.length-oe;if((be===void 0||be>de)&&(be=de),ae.length>0&&(be<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var ye=!1;;)switch(ce){case"hex":return g(this,ae,oe,be);case"utf8":case"utf-8":return b(this,ae,oe,be);case"ascii":return v(this,ae,oe,be);case"latin1":case"binary":return C(this,ae,oe,be);case"base64":return S(this,ae,oe,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ae,oe,be);default:if(ye)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),ye=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(se,ae,oe){return ae===0&&oe===se.length?f.fromByteArray(se):f.fromByteArray(se.slice(ae,oe))}function F(se,ae,oe){oe=Math.min(se.length,oe);for(var be=[],ce=ae;ce<oe;){var de=se[ce],ye=null,ge=de>239?4:de>223?3:de>191?2:1;if(ce+ge<=oe){var me,Me,Le,Oe;switch(ge){case 1:de<128&&(ye=de);break;case 2:me=se[ce+1],(me&192)===128&&(Oe=(de&31)<<6|me&63,Oe>127&&(ye=Oe));break;case 3:me=se[ce+1],Me=se[ce+2],(me&192)===128&&(Me&192)===128&&(Oe=(de&15)<<12|(me&63)<<6|Me&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ye=Oe));break;case 4:me=se[ce+1],Me=se[ce+2],Le=se[ce+3],(me&192)===128&&(Me&192)===128&&(Le&192)===128&&(Oe=(de&15)<<18|(me&63)<<12|(Me&63)<<6|Le&63,Oe>65535&&Oe<1114112&&(ye=Oe))}}ye===null?(ye=65533,ge=1):ye>65535&&(ye-=65536,be.push(ye>>>10&1023|55296),ye=56320|ye&1023),be.push(ye),ce+=ge}return D(be)}var I=4096;function D(se){var ae=se.length;if(ae<=I)return String.fromCharCode.apply(String,se);for(var oe="",be=0;be<ae;)oe+=String.fromCharCode.apply(String,se.slice(be,be+=I));return oe}function R(se,ae,oe){var be="";oe=Math.min(se.length,oe);for(var ce=ae;ce<oe;++ce)be+=String.fromCharCode(se[ce]&127);return be}function O(se,ae,oe){var be="";oe=Math.min(se.length,oe);for(var ce=ae;ce<oe;++ce)be+=String.fromCharCode(se[ce]);return be}function z(se,ae,oe){var be=se.length;(!ae||ae<0)&&(ae=0),(!oe||oe<0||oe>be)&&(oe=be);for(var ce="",de=ae;de<oe;++de)ce+=te(se[de]);return ce}function B(se,ae,oe){for(var be=se.slice(ae,oe),ce="",de=0;de<be.length;de+=2)ce+=String.fromCharCode(be[de]+be[de+1]*256);return ce}n.prototype.slice=function(ae,oe){var be=this.length;ae=~~ae,oe=oe===void 0?be:~~oe,ae<0?(ae+=be,ae<0&&(ae=0)):ae>be&&(ae=be),oe<0?(oe+=be,oe<0&&(oe=0)):oe>be&&(oe=be),oe<ae&&(oe=ae);var ce=this.subarray(ae,oe);return ce.__proto__=n.prototype,ce};function G(se,ae,oe){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+ae>oe)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae],de=1,ye=0;++ye<oe&&(de*=256);)ce+=this[ae+ye]*de;return ce},n.prototype.readUIntBE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae+--oe],de=1;oe>0&&(de*=256);)ce+=this[ae+--oe]*de;return ce},n.prototype.readUInt8=function(ae,oe){return ae=ae>>>0,oe||G(ae,1,this.length),this[ae]},n.prototype.readUInt16LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,2,this.length),this[ae]|this[ae+1]<<8},n.prototype.readUInt16BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,2,this.length),this[ae]<<8|this[ae+1]},n.prototype.readUInt32LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+this[ae+3]*16777216},n.prototype.readUInt32BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]*16777216+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},n.prototype.readIntLE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae],de=1,ye=0;++ye<oe&&(de*=256);)ce+=this[ae+ye]*de;return de*=128,ce>=de&&(ce-=Math.pow(2,8*oe)),ce},n.prototype.readIntBE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=oe,de=1,ye=this[ae+--ce];ce>0&&(de*=256);)ye+=this[ae+--ce]*de;return de*=128,ye>=de&&(ye-=Math.pow(2,8*oe)),ye},n.prototype.readInt8=function(ae,oe){return ae=ae>>>0,oe||G(ae,1,this.length),this[ae]&128?(255-this[ae]+1)*-1:this[ae]},n.prototype.readInt16LE=function(ae,oe){ae=ae>>>0,oe||G(ae,2,this.length);var be=this[ae]|this[ae+1]<<8;return be&32768?be|4294901760:be},n.prototype.readInt16BE=function(ae,oe){ae=ae>>>0,oe||G(ae,2,this.length);var be=this[ae+1]|this[ae]<<8;return be&32768?be|4294901760:be},n.prototype.readInt32LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},n.prototype.readInt32BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},n.prototype.readFloatLE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),M.read(this,ae,!0,23,4)},n.prototype.readFloatBE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),M.read(this,ae,!1,23,4)},n.prototype.readDoubleLE=function(ae,oe){return ae=ae>>>0,oe||G(ae,8,this.length),M.read(this,ae,!0,52,8)},n.prototype.readDoubleBE=function(ae,oe){return ae=ae>>>0,oe||G(ae,8,this.length),M.read(this,ae,!1,52,8)};function Q(se,ae,oe,be,ce,de){if(!n.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>ce||ae<de)throw new RangeError('"value" argument is out of bounds');if(oe+be>se.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,be=be>>>0,!ce){var de=Math.pow(2,8*be)-1;Q(this,ae,oe,be,de,0)}var ye=1,ge=0;for(this[oe]=ae&255;++ge<be&&(ye*=256);)this[oe+ge]=ae/ye&255;return oe+be},n.prototype.writeUIntBE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,be=be>>>0,!ce){var de=Math.pow(2,8*be)-1;Q(this,ae,oe,be,de,0)}var ye=be-1,ge=1;for(this[oe+ye]=ae&255;--ye>=0&&(ge*=256);)this[oe+ye]=ae/ge&255;return oe+be},n.prototype.writeUInt8=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,1,255,0),this[oe]=ae&255,oe+1},n.prototype.writeUInt16LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,65535,0),this[oe]=ae&255,this[oe+1]=ae>>>8,oe+2},n.prototype.writeUInt16BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,65535,0),this[oe]=ae>>>8,this[oe+1]=ae&255,oe+2},n.prototype.writeUInt32LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,4294967295,0),this[oe+3]=ae>>>24,this[oe+2]=ae>>>16,this[oe+1]=ae>>>8,this[oe]=ae&255,oe+4},n.prototype.writeUInt32BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,4294967295,0),this[oe]=ae>>>24,this[oe+1]=ae>>>16,this[oe+2]=ae>>>8,this[oe+3]=ae&255,oe+4},n.prototype.writeIntLE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,!ce){var de=Math.pow(2,8*be-1);Q(this,ae,oe,be,de-1,-de)}var ye=0,ge=1,me=0;for(this[oe]=ae&255;++ye<be&&(ge*=256);)ae<0&&me===0&&this[oe+ye-1]!==0&&(me=1),this[oe+ye]=(ae/ge>>0)-me&255;return oe+be},n.prototype.writeIntBE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,!ce){var de=Math.pow(2,8*be-1);Q(this,ae,oe,be,de-1,-de)}var ye=be-1,ge=1,me=0;for(this[oe+ye]=ae&255;--ye>=0&&(ge*=256);)ae<0&&me===0&&this[oe+ye+1]!==0&&(me=1),this[oe+ye]=(ae/ge>>0)-me&255;return oe+be},n.prototype.writeInt8=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,1,127,-128),ae<0&&(ae=255+ae+1),this[oe]=ae&255,oe+1},n.prototype.writeInt16LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,32767,-32768),this[oe]=ae&255,this[oe+1]=ae>>>8,oe+2},n.prototype.writeInt16BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,32767,-32768),this[oe]=ae>>>8,this[oe+1]=ae&255,oe+2},n.prototype.writeInt32LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,2147483647,-2147483648),this[oe]=ae&255,this[oe+1]=ae>>>8,this[oe+2]=ae>>>16,this[oe+3]=ae>>>24,oe+4},n.prototype.writeInt32BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[oe]=ae>>>24,this[oe+1]=ae>>>16,this[oe+2]=ae>>>8,this[oe+3]=ae&255,oe+4};function X(se,ae,oe,be,ce,de){if(oe+be>se.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}function j(se,ae,oe,be,ce){return ae=+ae,oe=oe>>>0,ce||X(se,ae,oe,4),M.write(se,ae,oe,be,23,4),oe+4}n.prototype.writeFloatLE=function(ae,oe,be){return j(this,ae,oe,!0,be)},n.prototype.writeFloatBE=function(ae,oe,be){return j(this,ae,oe,!1,be)};function re(se,ae,oe,be,ce){return ae=+ae,oe=oe>>>0,ce||X(se,ae,oe,8),M.write(se,ae,oe,be,52,8),oe+8}n.prototype.writeDoubleLE=function(ae,oe,be){return re(this,ae,oe,!0,be)},n.prototype.writeDoubleBE=function(ae,oe,be){return re(this,ae,oe,!1,be)},n.prototype.copy=function(ae,oe,be,ce){if(!n.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(be||(be=0),!ce&&ce!==0&&(ce=this.length),oe>=ae.length&&(oe=ae.length),oe||(oe=0),ce>0&&ce<be&&(ce=be),ce===be||ae.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),ae.length-oe<ce-be&&(ce=ae.length-oe+be);var de=ce-be;if(this===ae&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(oe,be,ce);else if(this===ae&&be<oe&&oe<ce)for(var ye=de-1;ye>=0;--ye)ae[ye+oe]=this[ye+be];else Uint8Array.prototype.set.call(ae,this.subarray(be,ce),oe);return de},n.prototype.fill=function(ae,oe,be,ce){if(typeof ae=="string"){if(typeof oe=="string"?(ce=oe,oe=0,be=this.length):typeof be=="string"&&(ce=be,be=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!n.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(ae.length===1){var de=ae.charCodeAt(0);(ce==="utf8"&&de<128||ce==="latin1")&&(ae=de)}}else typeof ae=="number"&&(ae=ae&255);if(oe<0||this.length<oe||this.length<be)throw new RangeError("Out of range index");if(be<=oe)return this;oe=oe>>>0,be=be===void 0?this.length:be>>>0,ae||(ae=0);var ye;if(typeof ae=="number")for(ye=oe;ye<be;++ye)this[ye]=ae;else{var ge=n.isBuffer(ae)?ae:n.from(ae,ce),me=ge.length;if(me===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(ye=0;ye<be-oe;++ye)this[ye+oe]=ge[ye%me]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function K(se){if(se=se.split("=")[0],se=se.trim().replace(ue,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function te(se){return se<16?"0"+se.toString(16):se.toString(16)}function Y(se,ae){ae=ae||1/0;for(var oe,be=se.length,ce=null,de=[],ye=0;ye<be;++ye){if(oe=se.charCodeAt(ye),oe>55295&&oe<57344){if(!ce){if(oe>56319){(ae-=3)>-1&&de.push(239,191,189);continue}else if(ye+1===be){(ae-=3)>-1&&de.push(239,191,189);continue}ce=oe;continue}if(oe<56320){(ae-=3)>-1&&de.push(239,191,189),ce=oe;continue}oe=(ce-55296<<10|oe-56320)+65536}else ce&&(ae-=3)>-1&&de.push(239,191,189);if(ce=null,oe<128){if((ae-=1)<0)break;de.push(oe)}else if(oe<2048){if((ae-=2)<0)break;de.push(oe>>6|192,oe&63|128)}else if(oe<65536){if((ae-=3)<0)break;de.push(oe>>12|224,oe>>6&63|128,oe&63|128)}else if(oe<1114112){if((ae-=4)<0)break;de.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,oe&63|128)}else throw new Error("Invalid code point")}return de}function V(se){for(var ae=[],oe=0;oe<se.length;++oe)ae.push(se.charCodeAt(oe)&255);return ae}function ee(se,ae){for(var oe,be,ce,de=[],ye=0;ye<se.length&&!((ae-=2)<0);++ye)oe=se.charCodeAt(ye),be=oe>>8,ce=oe%256,de.push(ce),de.push(be);return de}function ne(se){return f.toByteArray(K(se))}function Z(se,ae,oe,be){for(var ce=0;ce<be&&!(ce+oe>=ae.length||ce>=se.length);++ce)ae[ce+oe]=se[ce];return ce}function q(se,ae){return se instanceof ae||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===ae.name}function ie(se){return se!==se}}).call(this)}).call(this,o("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(o,U,H){U.exports=w;function w(f,M,T){return M<T?f<M?M:f>T?T:f:f<T?T:f>M?M:f}},{}],87:[function(o,U,H){var w=o("clamp");U.exports=f,U.exports.to=f,U.exports.from=M;function f(T,e){e==null&&(e=!0);var a=T[0],n=T[1],r=T[2],t=T[3];t==null&&(t=e?1:255),e&&(a*=255,n*=255,r*=255,t*=255),a=w(a,0,255)&255,n=w(n,0,255)&255,r=w(r,0,255)&255,t=w(t,0,255)&255;var h=a*16777216+(n<<16)+(r<<8)+t;return h}function M(T,e){T=+T;var a=T>>>24,n=(T&16711680)>>>16,r=(T&65280)>>>8,t=T&255;return e===!1?[a,n,r,t]:[a/255,n/255,r/255,t/255]}},{clamp:86}],88:[function(o,U,H){U.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(o,U,H){var w=o("color-rgba"),f=o("clamp"),M=o("dtype");U.exports=function(a,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var r=M(n),t=new r(4),h=n!=="uint8"&&n!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=w(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:255,h&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(h?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:1):(t[0]=f(Math.floor(a[0]*255),0,255),t[1]=f(Math.floor(a[1]*255),0,255),t[2]=f(Math.floor(a[2]*255),0,255),t[3]=a[3]==null?255:f(Math.floor(a[3]*255),0,255)),t)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(o,U,H){(function(w){(function(){var f=o("color-name"),M=o("is-plain-obj"),T=o("defined");U.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(n){var r,t=[],h=1,i;if(typeof n=="string")if(f[n])t=f[n].slice(),i="rgb";else if(n==="transparent")h=0,i="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=n.slice(1),y=s.length,d=y<=4;h=1,d?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],y===4&&(h=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],y===8&&(h=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var p=r[1],c=p==="rgb",s=p.replace(/a$/,"");i=s;var y=s==="cmyk"?4:s==="gray"?1:3;t=r[2].trim().split(/\s*,\s*/).map(function(u,A){if(/%$/.test(u))return A===y?parseFloat(u)/100:s==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(s[A]==="h"){if(/deg$/.test(u))return parseFloat(u);if(e[u]!==void 0)return e[u]}return parseFloat(u)}),p===s&&t.push(1),h=c||t[y]===void 0?1:t[y],t=t.slice(0,y)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),i=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))i="rgb",t=[n>>>16,(n&65280)>>>8,n&255];else if(M(n)){var m=T(n.r,n.red,n.R,null);m!==null?(i="rgb",t=[m,T(n.g,n.green,n.G),T(n.b,n.blue,n.B)]):(i="hsl",t=[T(n.h,n.hue,n.H),T(n.s,n.saturation,n.S),T(n.l,n.lightness,n.L,n.b,n.brightness)]),h=T(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(h/=100)}else(Array.isArray(n)||w.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(t=[n[0],n[1],n[2]],i="rgb",h=n.length===4?n[3]:1);return{space:i,values:t,alpha:h}}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(o,U,H){var w=o("color-parse"),f=o("color-space/hsl"),M=o("clamp");U.exports=function(e){var a,n=w(e);return n.space?(a=Array(3),a[0]=M(n.values[0],0,255),a[1]=M(n.values[1],0,255),a[2]=M(n.values[2],0,255),n.space[0]==="h"&&(a=f.rgb(a)),a.push(M(n.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(o,U,H){var w=o("./rgb");U.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(f){var M=f[0]/360,T=f[1]/100,e=f[2]/100,a,n,r,t,h;if(T===0)return h=e*255,[h,h,h];e<.5?n=e*(1+T):n=e+T-e*T,a=2*e-n,t=[0,0,0];for(var i=0;i<3;i++)r=M+1/3*-(i-1),r<0?r++:r>1&&r--,6*r<1?h=a+(n-a)*6*r:2*r<1?h=n:3*r<2?h=a+(n-a)*(2/3-r)*6:h=a,t[i]=h*255;return t}},w.hsl=function(f){var M=f[0]/255,T=f[1]/255,e=f[2]/255,a=Math.min(M,T,e),n=Math.max(M,T,e),r=n-a,t,h,i;return n===a?t=0:M===n?t=(T-e)/r:T===n?t=2+(e-M)/r:e===n&&(t=4+(M-T)/r),t=Math.min(t*60,360),t<0&&(t+=360),i=(a+n)/2,n===a?h=0:i<=.5?h=r/(n+a):h=r/(2-n-a),[t,h*100,i*100]}},{"./rgb":93}],93:[function(o,U,H){U.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(o,U,H){U.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(o,U,H){U.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(o,U,H){U.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(o,U,H){U.exports=["normal","italic","oblique"]},{}],98:[function(o,U,H){U.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(o,U,H){U.exports={parse:o("./parse"),stringify:o("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(o,U,H){var w=o("css-font-size-keywords");U.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||w.indexOf(M)!==-1}}},{"css-font-size-keywords":95}],101:[function(o,U,H){var w=o("unquote"),f=o("css-global-keywords"),M=o("css-system-font-keywords"),T=o("css-font-weight-keywords"),e=o("css-font-style-keywords"),a=o("css-font-stretch-keywords"),n=o("string-split-by"),r=o("./lib/util").isSize;U.exports=h;var t=h.cache={};function h(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(t[s])return t[s];if(s==="")throw new Error("Cannot parse an empty string.");if(M.indexOf(s)!==-1)return t[s]={system:s};for(var y={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=n(s,/\s+/),p;p=d.shift();){if(f.indexOf(p)!==-1)return["style","variant","weight","stretch"].forEach(function(m){y[m]=p}),t[s]=y;if(e.indexOf(p)!==-1){y.style=p;continue}if(p==="normal"||p==="small-caps"){y.variant=p;continue}if(a.indexOf(p)!==-1){y.stretch=p;continue}if(T.indexOf(p)!==-1){y.weight=p;continue}if(r(p)){var c=n(p,"/");if(y.size=c[0],c[1]!=null?y.lineHeight=i(c[1]):d[0]==="/"&&(d.shift(),y.lineHeight=i(d.shift())),!d.length)throw new Error("Missing required font-family.");return y.family=n(d.join(" "),/\s*,\s*/).map(w),t[s]=y}throw new Error("Unknown or unsupported font token: "+p)}throw new Error("Missing required font-size.")}function i(s){var y=parseFloat(s);return y.toString()===s?y:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(o,U,H){var w=o("pick-by-alias"),f=o("./lib/util").isSize,M=s(o("css-global-keywords")),T=s(o("css-system-font-keywords")),e=s(o("css-font-weight-keywords")),a=s(o("css-font-style-keywords")),n=s(o("css-font-stretch-keywords")),r={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};U.exports=function(d){if(d=w(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&i(d.system,T),d.system;if(i(d.style,a),i(d.variant,r),i(d.weight,e),i(d.stretch,n),d.size==null&&(d.size=h.size),typeof d.size=="number"&&(d.size+="px"),!f)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=h.family),Array.isArray(d.family)&&(d.family.length||(d.family=[h.family]),d.family=d.family.map(function(c){return t[c]?c:'"'+c+'"'}).join(", "));var p=[];return p.push(d.style),d.variant!==d.style&&p.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&p.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&p.push(d.stretch),p.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),p.push(d.family),p.filter(Boolean).join(" ")};function i(y,d){if(y&&!d[y]&&!M[y])throw Error("Unknown keyword `"+y+"`");return y}function s(y){for(var d={},p=0;p<y.length;p++)d[y[p]]=1;return d}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(o,U,H){U.exports=["inherit","initial","unset"]},{}],104:[function(o,U,H){U.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(o,U,H){var w=o("type/value/is"),f=o("type/value/ensure"),M=o("type/plain-function/ensure"),T=o("es5-ext/object/copy"),e=o("es5-ext/object/normalize-options"),a=o("es5-ext/object/map"),n=Function.prototype.bind,r=Object.defineProperty,t=Object.prototype.hasOwnProperty,h;h=function(i,s,y){var d=f(s)&&M(s.value),p;return p=T(s),delete p.writable,delete p.value,p.get=function(){return!y.overwriteDefinition&&t.call(this,i)?d:(s.value=n.call(d,y.resolveContext?y.resolveContext(this):this),r(this,i,s),this[i])},p},U.exports=function(i){var s=e(arguments[1]);return w(s.resolveContext)&&M(s.resolveContext),a(i,function(y,d){return h(d,y,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(o,U,H){var w=o("type/value/is"),f=o("type/plain-function/is"),M=o("es5-ext/object/assign"),T=o("es5-ext/object/normalize-options"),e=o("es5-ext/string/#/contains"),a=U.exports=function(n,r){var t,h,i,s,y;return arguments.length<2||typeof n!="string"?(s=r,r=n,n=null):s=arguments[2],w(n)?(t=e.call(n,"c"),h=e.call(n,"e"),i=e.call(n,"w")):(t=i=!0,h=!1),y={value:r,configurable:t,enumerable:h,writable:i},s?M(T(s),y):y};a.gs=function(n,r,t){var h,i,s,y;return typeof n!="string"?(s=t,t=r,r=n,n=null):s=arguments[3],w(r)?f(r)?w(t)?f(t)||(s=t,t=void 0):t=void 0:(s=r,r=t=void 0):r=void 0,w(n)?(h=e.call(n,"c"),i=e.call(n,"e")):(h=!0,i=!1),y={get:r,set:t,configurable:h,enumerable:i},s?M(T(s),y):y}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(o,U,H){(function(w,f){f(typeof H=="object"&&typeof U<"u"?H:w.d3=w.d3||{})})(this,function(w){function f(Y,V){return Y<V?-1:Y>V?1:Y>=V?0:NaN}function M(Y){return Y.length===1&&(Y=T(Y)),{left:function(V,ee,ne,Z){for(ne==null&&(ne=0),Z==null&&(Z=V.length);ne<Z;){var q=ne+Z>>>1;Y(V[q],ee)<0?ne=q+1:Z=q}return ne},right:function(V,ee,ne,Z){for(ne==null&&(ne=0),Z==null&&(Z=V.length);ne<Z;){var q=ne+Z>>>1;Y(V[q],ee)>0?Z=q:ne=q+1}return ne}}}function T(Y){return function(V,ee){return f(Y(V),ee)}}var e=M(f),a=e.right,n=e.left;function r(Y,V){V==null&&(V=t);for(var ee=0,ne=Y.length-1,Z=Y[0],q=new Array(ne<0?0:ne);ee<ne;)q[ee]=V(Z,Z=Y[++ee]);return q}function t(Y,V){return[Y,V]}function h(Y,V,ee){var ne=Y.length,Z=V.length,q=new Array(ne*Z),ie,se,ae,oe;for(ee==null&&(ee=t),ie=ae=0;ie<ne;++ie)for(oe=Y[ie],se=0;se<Z;++se,++ae)q[ae]=ee(oe,V[se]);return q}function i(Y,V){return V<Y?-1:V>Y?1:V>=Y?0:NaN}function s(Y){return Y===null?NaN:+Y}function y(Y,V){var ee=Y.length,ne=0,Z=-1,q=0,ie,se,ae=0;if(V==null)for(;++Z<ee;)isNaN(ie=s(Y[Z]))||(se=ie-q,q+=se/++ne,ae+=se*(ie-q));else for(;++Z<ee;)isNaN(ie=s(V(Y[Z],Z,Y)))||(se=ie-q,q+=se/++ne,ae+=se*(ie-q));if(ne>1)return ae/(ne-1)}function d(Y,V){var ee=y(Y,V);return ee&&Math.sqrt(ee)}function p(Y,V){var ee=Y.length,ne=-1,Z,q,ie;if(V==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=ie=Z;++ne<ee;)(Z=Y[ne])!=null&&(q>Z&&(q=Z),ie<Z&&(ie=Z))}else for(;++ne<ee;)if((Z=V(Y[ne],ne,Y))!=null&&Z>=Z)for(q=ie=Z;++ne<ee;)(Z=V(Y[ne],ne,Y))!=null&&(q>Z&&(q=Z),ie<Z&&(ie=Z));return[q,ie]}var c=Array.prototype,m=c.slice,l=c.map;function x(Y){return function(){return Y}}function u(Y){return Y}function A(Y,V,ee){Y=+Y,V=+V,ee=(Z=arguments.length)<2?(V=Y,Y=0,1):Z<3?1:+ee;for(var ne=-1,Z=Math.max(0,Math.ceil((V-Y)/ee))|0,q=new Array(Z);++ne<Z;)q[ne]=Y+ne*ee;return q}var _=Math.sqrt(50),g=Math.sqrt(10),b=Math.sqrt(2);function v(Y,V,ee){var ne,Z=-1,q,ie,se;if(V=+V,Y=+Y,ee=+ee,Y===V&&ee>0)return[Y];if((ne=V<Y)&&(q=Y,Y=V,V=q),(se=C(Y,V,ee))===0||!isFinite(se))return[];if(se>0)for(Y=Math.ceil(Y/se),V=Math.floor(V/se),ie=new Array(q=Math.ceil(V-Y+1));++Z<q;)ie[Z]=(Y+Z)*se;else for(Y=Math.floor(Y*se),V=Math.ceil(V*se),ie=new Array(q=Math.ceil(Y-V+1));++Z<q;)ie[Z]=(Y-Z)/se;return ne&&ie.reverse(),ie}function C(Y,V,ee){var ne=(V-Y)/Math.max(0,ee),Z=Math.floor(Math.log(ne)/Math.LN10),q=ne/Math.pow(10,Z);return Z>=0?(q>=_?10:q>=g?5:q>=b?2:1)*Math.pow(10,Z):-Math.pow(10,-Z)/(q>=_?10:q>=g?5:q>=b?2:1)}function S(Y,V,ee){var ne=Math.abs(V-Y)/Math.max(0,ee),Z=Math.pow(10,Math.floor(Math.log(ne)/Math.LN10)),q=ne/Z;return q>=_?Z*=10:q>=g?Z*=5:q>=b&&(Z*=2),V<Y?-Z:Z}function k(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1}function E(){var Y=u,V=p,ee=k;function ne(Z){var q,ie=Z.length,se,ae=new Array(ie);for(q=0;q<ie;++q)ae[q]=Y(Z[q],q,Z);var oe=V(ae),be=oe[0],ce=oe[1],de=ee(ae,be,ce);Array.isArray(de)||(de=S(be,ce,de),de=A(Math.ceil(be/de)*de,ce,de));for(var ye=de.length;de[0]<=be;)de.shift(),--ye;for(;de[ye-1]>ce;)de.pop(),--ye;var ge=new Array(ye+1),me;for(q=0;q<=ye;++q)me=ge[q]=[],me.x0=q>0?de[q-1]:be,me.x1=q<ye?de[q]:ce;for(q=0;q<ie;++q)se=ae[q],be<=se&&se<=ce&&ge[a(de,se,0,ye)].push(Z[q]);return ge}return ne.value=function(Z){return arguments.length?(Y=typeof Z=="function"?Z:x(Z),ne):Y},ne.domain=function(Z){return arguments.length?(V=typeof Z=="function"?Z:x([Z[0],Z[1]]),ne):V},ne.thresholds=function(Z){return arguments.length?(ee=typeof Z=="function"?Z:Array.isArray(Z)?x(m.call(Z)):x(Z),ne):ee},ne}function F(Y,V,ee){if(ee==null&&(ee=s),!!(ne=Y.length)){if((V=+V)<=0||ne<2)return+ee(Y[0],0,Y);if(V>=1)return+ee(Y[ne-1],ne-1,Y);var ne,Z=(ne-1)*V,q=Math.floor(Z),ie=+ee(Y[q],q,Y),se=+ee(Y[q+1],q+1,Y);return ie+(se-ie)*(Z-q)}}function I(Y,V,ee){return Y=l.call(Y,s).sort(f),Math.ceil((ee-V)/(2*(F(Y,.75)-F(Y,.25))*Math.pow(Y.length,-1/3)))}function D(Y,V,ee){return Math.ceil((ee-V)/(3.5*d(Y)*Math.pow(Y.length,-1/3)))}function R(Y,V){var ee=Y.length,ne=-1,Z,q;if(V==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=Y[ne])!=null&&Z>q&&(q=Z)}else for(;++ne<ee;)if((Z=V(Y[ne],ne,Y))!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=V(Y[ne],ne,Y))!=null&&Z>q&&(q=Z);return q}function O(Y,V){var ee=Y.length,ne=ee,Z=-1,q,ie=0;if(V==null)for(;++Z<ee;)isNaN(q=s(Y[Z]))?--ne:ie+=q;else for(;++Z<ee;)isNaN(q=s(V(Y[Z],Z,Y)))?--ne:ie+=q;if(ne)return ie/ne}function z(Y,V){var ee=Y.length,ne=-1,Z,q=[];if(V==null)for(;++ne<ee;)isNaN(Z=s(Y[ne]))||q.push(Z);else for(;++ne<ee;)isNaN(Z=s(V(Y[ne],ne,Y)))||q.push(Z);return F(q.sort(f),.5)}function B(Y){for(var V=Y.length,ee,ne=-1,Z=0,q,ie;++ne<V;)Z+=Y[ne].length;for(q=new Array(Z);--V>=0;)for(ie=Y[V],ee=ie.length;--ee>=0;)q[--Z]=ie[ee];return q}function G(Y,V){var ee=Y.length,ne=-1,Z,q;if(V==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=Y[ne])!=null&&q>Z&&(q=Z)}else for(;++ne<ee;)if((Z=V(Y[ne],ne,Y))!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=V(Y[ne],ne,Y))!=null&&q>Z&&(q=Z);return q}function Q(Y,V){for(var ee=V.length,ne=new Array(ee);ee--;)ne[ee]=Y[V[ee]];return ne}function X(Y,V){if(!!(ee=Y.length)){var ee,ne=0,Z=0,q,ie=Y[Z];for(V==null&&(V=f);++ne<ee;)(V(q=Y[ne],ie)<0||V(ie,ie)!==0)&&(ie=q,Z=ne);if(V(ie,ie)===0)return Z}}function j(Y,V,ee){for(var ne=(ee==null?Y.length:ee)-(V=V==null?0:+V),Z,q;ne;)q=Math.random()*ne--|0,Z=Y[ne+V],Y[ne+V]=Y[q+V],Y[q+V]=Z;return Y}function re(Y,V){var ee=Y.length,ne=-1,Z,q=0;if(V==null)for(;++ne<ee;)(Z=+Y[ne])&&(q+=Z);else for(;++ne<ee;)(Z=+V(Y[ne],ne,Y))&&(q+=Z);return q}function ue(Y){if(!(q=Y.length))return[];for(var V=-1,ee=G(Y,K),ne=new Array(ee);++V<ee;)for(var Z=-1,q,ie=ne[V]=new Array(q);++Z<q;)ie[Z]=Y[Z][V];return ne}function K(Y){return Y.length}function te(){return ue(arguments)}w.bisect=a,w.bisectRight=a,w.bisectLeft=n,w.ascending=f,w.bisector=M,w.cross=h,w.descending=i,w.deviation=d,w.extent=p,w.histogram=E,w.thresholdFreedmanDiaconis=I,w.thresholdScott=D,w.thresholdSturges=k,w.max=R,w.mean=O,w.median=z,w.merge=B,w.min=G,w.pairs=r,w.permute=Q,w.quantile=F,w.range=A,w.scan=X,w.shuffle=j,w.sum=re,w.ticks=v,w.tickIncrement=C,w.tickStep=S,w.transpose=ue,w.variance=y,w.zip=te,Object.defineProperty(w,"__esModule",{value:!0})})},{}],108:[function(o,U,H){(function(w,f){f(typeof H=="object"&&typeof U<"u"?H:w.d3=w.d3||{})})(this,function(w){var f="$";function M(){}M.prototype=T.prototype={constructor:M,has:function(c){return f+c in this},get:function(c){return this[f+c]},set:function(c,m){return this[f+c]=m,this},remove:function(c){var m=f+c;return m in this&&delete this[m]},clear:function(){for(var c in this)c[0]===f&&delete this[c]},keys:function(){var c=[];for(var m in this)m[0]===f&&c.push(m.slice(1));return c},values:function(){var c=[];for(var m in this)m[0]===f&&c.push(this[m]);return c},entries:function(){var c=[];for(var m in this)m[0]===f&&c.push({key:m.slice(1),value:this[m]});return c},size:function(){var c=0;for(var m in this)m[0]===f&&++c;return c},empty:function(){for(var c in this)if(c[0]===f)return!1;return!0},each:function(c){for(var m in this)m[0]===f&&c(this[m],m.slice(1),this)}};function T(c,m){var l=new M;if(c instanceof M)c.each(function(g,b){l.set(b,g)});else if(Array.isArray(c)){var x=-1,u=c.length,A;if(m==null)for(;++x<u;)l.set(x,c[x]);else for(;++x<u;)l.set(m(A=c[x],x,c),A)}else if(c)for(var _ in c)l.set(_,c[_]);return l}function e(){var c=[],m=[],l,x,u;function A(g,b,v,C){if(b>=c.length)return l!=null&&g.sort(l),x!=null?x(g):g;for(var S=-1,k=g.length,E=c[b++],F,I,D=T(),R,O=v();++S<k;)(R=D.get(F=E(I=g[S])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,B){C(O,B,A(z,b,v,C))}),O}function _(g,b){if(++b>c.length)return g;var v,C=m[b-1];return x!=null&&b>=c.length?v=g.entries():(v=[],g.each(function(S,k){v.push({key:k,values:_(S,b)})})),C!=null?v.sort(function(S,k){return C(S.key,k.key)}):v}return u={object:function(g){return A(g,0,a,n)},map:function(g){return A(g,0,r,t)},entries:function(g){return _(A(g,0,r,t),0)},key:function(g){return c.push(g),u},sortKeys:function(g){return m[c.length-1]=g,u},sortValues:function(g){return l=g,u},rollup:function(g){return x=g,u}}}function a(){return{}}function n(c,m,l){c[m]=l}function r(){return T()}function t(c,m,l){c.set(m,l)}function h(){}var i=T.prototype;h.prototype=s.prototype={constructor:h,has:i.has,add:function(c){return c+="",this[f+c]=c,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each};function s(c,m){var l=new h;if(c instanceof h)c.each(function(A){l.add(A)});else if(c){var x=-1,u=c.length;if(m==null)for(;++x<u;)l.add(c[x]);else for(;++x<u;)l.add(m(c[x],x,c))}return l}function y(c){var m=[];for(var l in c)m.push(l);return m}function d(c){var m=[];for(var l in c)m.push(c[l]);return m}function p(c){var m=[];for(var l in c)m.push({key:l,value:c[l]});return m}w.nest=e,w.set=s,w.map=T,w.keys=y,w.values=d,w.entries=p,Object.defineProperty(w,"__esModule",{value:!0})})},{}],109:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(Re,We,xt){Re.prototype=We.prototype=xt,xt.constructor=Re}function M(Re,We){var xt=Object.create(Re.prototype);for(var Nt in We)xt[Nt]=We[Nt];return xt}function T(){}var e=.7,a=1/e,n="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),s=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),y=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),d=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),p=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),c=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f(T,A,{copy:function(Re){return Object.assign(new this.constructor,this,Re)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:x,formatRgb:u,toString:u});function l(){return this.rgb().formatHex()}function x(){return I(this).formatHsl()}function u(){return this.rgb().formatRgb()}function A(Re){var We,xt;return Re=(Re+"").trim().toLowerCase(),(We=h.exec(Re))?(xt=We[1].length,We=parseInt(We[1],16),xt===6?_(We):xt===3?new C(We>>8&15|We>>4&240,We>>4&15|We&240,(We&15)<<4|We&15,1):xt===8?g(We>>24&255,We>>16&255,We>>8&255,(We&255)/255):xt===4?g(We>>12&15|We>>8&240,We>>8&15|We>>4&240,We>>4&15|We&240,((We&15)<<4|We&15)/255):null):(We=i.exec(Re))?new C(We[1],We[2],We[3],1):(We=s.exec(Re))?new C(We[1]*255/100,We[2]*255/100,We[3]*255/100,1):(We=y.exec(Re))?g(We[1],We[2],We[3],We[4]):(We=d.exec(Re))?g(We[1]*255/100,We[2]*255/100,We[3]*255/100,We[4]):(We=p.exec(Re))?F(We[1],We[2]/100,We[3]/100,1):(We=c.exec(Re))?F(We[1],We[2]/100,We[3]/100,We[4]):m.hasOwnProperty(Re)?_(m[Re]):Re==="transparent"?new C(NaN,NaN,NaN,0):null}function _(Re){return new C(Re>>16&255,Re>>8&255,Re&255,1)}function g(Re,We,xt,Nt){return Nt<=0&&(Re=We=xt=NaN),new C(Re,We,xt,Nt)}function b(Re){return Re instanceof T||(Re=A(Re)),Re?(Re=Re.rgb(),new C(Re.r,Re.g,Re.b,Re.opacity)):new C}function v(Re,We,xt,Nt){return arguments.length===1?b(Re):new C(Re,We,xt,Nt==null?1:Nt)}function C(Re,We,xt,Nt){this.r=+Re,this.g=+We,this.b=+xt,this.opacity=+Nt}f(C,v,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new C(this.r*Re,this.g*Re,this.b*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new C(this.r*Re,this.g*Re,this.b*Re,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+E(this.r)+E(this.g)+E(this.b)}function k(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Re===1?")":", "+Re+")")}function E(Re){return Re=Math.max(0,Math.min(255,Math.round(Re)||0)),(Re<16?"0":"")+Re.toString(16)}function F(Re,We,xt,Nt){return Nt<=0?Re=We=xt=NaN:xt<=0||xt>=1?Re=We=NaN:We<=0&&(Re=NaN),new R(Re,We,xt,Nt)}function I(Re){if(Re instanceof R)return new R(Re.h,Re.s,Re.l,Re.opacity);if(Re instanceof T||(Re=A(Re)),!Re)return new R;if(Re instanceof R)return Re;Re=Re.rgb();var We=Re.r/255,xt=Re.g/255,Nt=Re.b/255,tr=Math.min(We,xt,Nt),Vt=Math.max(We,xt,Nt),Pt=NaN,$t=Vt-tr,Ut=(Vt+tr)/2;return $t?(We===Vt?Pt=(xt-Nt)/$t+(xt<Nt)*6:xt===Vt?Pt=(Nt-We)/$t+2:Pt=(We-xt)/$t+4,$t/=Ut<.5?Vt+tr:2-Vt-tr,Pt*=60):$t=Ut>0&&Ut<1?0:Pt,new R(Pt,$t,Ut,Re.opacity)}function D(Re,We,xt,Nt){return arguments.length===1?I(Re):new R(Re,We,xt,Nt==null?1:Nt)}function R(Re,We,xt,Nt){this.h=+Re,this.s=+We,this.l=+xt,this.opacity=+Nt}f(R,D,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new R(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new R(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=this.h%360+(this.h<0)*360,We=isNaN(Re)||isNaN(this.s)?0:this.s,xt=this.l,Nt=xt+(xt<.5?xt:1-xt)*We,tr=2*xt-Nt;return new C(O(Re>=240?Re-240:Re+120,tr,Nt),O(Re,tr,Nt),O(Re<120?Re+240:Re-120,tr,Nt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Re===1?")":", "+Re+")")}}));function O(Re,We,xt){return(Re<60?We+(xt-We)*Re/60:Re<180?xt:Re<240?We+(xt-We)*(240-Re)/60:We)*255}var z=Math.PI/180,B=180/Math.PI,G=18,Q=.96422,X=1,j=.82521,re=4/29,ue=6/29,K=3*ue*ue,te=ue*ue*ue;function Y(Re){if(Re instanceof ne)return new ne(Re.l,Re.a,Re.b,Re.opacity);if(Re instanceof ce)return de(Re);Re instanceof C||(Re=b(Re));var We=se(Re.r),xt=se(Re.g),Nt=se(Re.b),tr=Z((.2225045*We+.7168786*xt+.0606169*Nt)/X),Vt,Pt;return We===xt&&xt===Nt?Vt=Pt=tr:(Vt=Z((.4360747*We+.3850649*xt+.1430804*Nt)/Q),Pt=Z((.0139322*We+.0971045*xt+.7141733*Nt)/j)),new ne(116*tr-16,500*(Vt-tr),200*(tr-Pt),Re.opacity)}function V(Re,We){return new ne(Re,0,0,We==null?1:We)}function ee(Re,We,xt,Nt){return arguments.length===1?Y(Re):new ne(Re,We,xt,Nt==null?1:Nt)}function ne(Re,We,xt,Nt){this.l=+Re,this.a=+We,this.b=+xt,this.opacity=+Nt}f(ne,ee,M(T,{brighter:function(Re){return new ne(this.l+G*(Re==null?1:Re),this.a,this.b,this.opacity)},darker:function(Re){return new ne(this.l-G*(Re==null?1:Re),this.a,this.b,this.opacity)},rgb:function(){var Re=(this.l+16)/116,We=isNaN(this.a)?Re:Re+this.a/500,xt=isNaN(this.b)?Re:Re-this.b/200;return We=Q*q(We),Re=X*q(Re),xt=j*q(xt),new C(ie(3.1338561*We-1.6168667*Re-.4906146*xt),ie(-.9787684*We+1.9161415*Re+.033454*xt),ie(.0719453*We-.2289914*Re+1.4052427*xt),this.opacity)}}));function Z(Re){return Re>te?Math.pow(Re,1/3):Re/K+re}function q(Re){return Re>ue?Re*Re*Re:K*(Re-re)}function ie(Re){return 255*(Re<=.0031308?12.92*Re:1.055*Math.pow(Re,1/2.4)-.055)}function se(Re){return(Re/=255)<=.04045?Re/12.92:Math.pow((Re+.055)/1.055,2.4)}function ae(Re){if(Re instanceof ce)return new ce(Re.h,Re.c,Re.l,Re.opacity);if(Re instanceof ne||(Re=Y(Re)),Re.a===0&&Re.b===0)return new ce(NaN,0<Re.l&&Re.l<100?0:NaN,Re.l,Re.opacity);var We=Math.atan2(Re.b,Re.a)*B;return new ce(We<0?We+360:We,Math.sqrt(Re.a*Re.a+Re.b*Re.b),Re.l,Re.opacity)}function oe(Re,We,xt,Nt){return arguments.length===1?ae(Re):new ce(xt,We,Re,Nt==null?1:Nt)}function be(Re,We,xt,Nt){return arguments.length===1?ae(Re):new ce(Re,We,xt,Nt==null?1:Nt)}function ce(Re,We,xt,Nt){this.h=+Re,this.c=+We,this.l=+xt,this.opacity=+Nt}function de(Re){if(isNaN(Re.h))return new ne(Re.l,0,0,Re.opacity);var We=Re.h*z;return new ne(Re.l,Math.cos(We)*Re.c,Math.sin(We)*Re.c,Re.opacity)}f(ce,be,M(T,{brighter:function(Re){return new ce(this.h,this.c,this.l+G*(Re==null?1:Re),this.opacity)},darker:function(Re){return new ce(this.h,this.c,this.l-G*(Re==null?1:Re),this.opacity)},rgb:function(){return de(this).rgb()}}));var ye=-.14861,ge=1.78277,me=-.29227,Me=-.90649,Le=1.97294,Oe=Le*Me,_e=Le*ge,Ee=ge*me-Me*ye;function Ze(Re){if(Re instanceof Fe)return new Fe(Re.h,Re.s,Re.l,Re.opacity);Re instanceof C||(Re=b(Re));var We=Re.r/255,xt=Re.g/255,Nt=Re.b/255,tr=(Ee*Nt+Oe*We-_e*xt)/(Ee+Oe-_e),Vt=Nt-tr,Pt=(Le*(xt-tr)-me*Vt)/Me,$t=Math.sqrt(Pt*Pt+Vt*Vt)/(Le*tr*(1-tr)),Ut=$t?Math.atan2(Pt,Vt)*B-120:NaN;return new Fe(Ut<0?Ut+360:Ut,$t,tr,Re.opacity)}function Ge(Re,We,xt,Nt){return arguments.length===1?Ze(Re):new Fe(Re,We,xt,Nt==null?1:Nt)}function Fe(Re,We,xt,Nt){this.h=+Re,this.s=+We,this.l=+xt,this.opacity=+Nt}f(Fe,Ge,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new Fe(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new Fe(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=isNaN(this.h)?0:(this.h+120)*z,We=+this.l,xt=isNaN(this.s)?0:this.s*We*(1-We),Nt=Math.cos(Re),tr=Math.sin(Re);return new C(255*(We+xt*(ye*Nt+ge*tr)),255*(We+xt*(me*Nt+Me*tr)),255*(We+xt*(Le*Nt)),this.opacity)}})),w.color=A,w.cubehelix=Ge,w.gray=V,w.hcl=be,w.hsl=D,w.lab=ee,w.lch=oe,w.rgb=v,Object.defineProperty(w,"__esModule",{value:!0})})},{}],110:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f={value:function(){}};function M(){for(var r=0,t=arguments.length,h={},i;r<t;++r){if(!(i=arguments[r]+"")||i in h||/[\s.]/.test(i))throw new Error("illegal type: "+i);h[i]=[]}return new T(h)}function T(r){this._=r}function e(r,t){return r.trim().split(/^|\s+/).map(function(h){var i="",s=h.indexOf(".");if(s>=0&&(i=h.slice(s+1),h=h.slice(0,s)),h&&!t.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:i}})}T.prototype=M.prototype={constructor:T,on:function(r,t){var h=this._,i=e(r+"",h),s,y=-1,d=i.length;if(arguments.length<2){for(;++y<d;)if((s=(r=i[y]).type)&&(s=a(h[s],r.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++y<d;)if(s=(r=i[y]).type)h[s]=n(h[s],r.name,t);else if(t==null)for(s in h)h[s]=n(h[s],r.name,null);return this},copy:function(){var r={},t=this._;for(var h in t)r[h]=t[h].slice();return new T(r)},call:function(r,t){if((s=arguments.length-2)>0)for(var h=new Array(s),i=0,s,y;i<s;++i)h[i]=arguments[i+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(y=this._[r],i=0,s=y.length;i<s;++i)y[i].value.apply(t,h)},apply:function(r,t,h){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var i=this._[r],s=0,y=i.length;s<y;++s)i[s].value.apply(t,h)}};function a(r,t){for(var h=0,i=r.length,s;h<i;++h)if((s=r[h]).name===t)return s.value}function n(r,t,h){for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r[i]=f,r=r.slice(0,i).concat(r.slice(i+1));break}return h!=null&&r.push({name:t,value:h}),r}w.dispatch=M,Object.defineProperty(w,"__esModule",{value:!0})})},{}],111:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-quadtree"),o("d3-collection"),o("d3-dispatch"),o("d3-timer")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3,w.d3)})(this,function(w,f,M,T,e){function a(b,v){var C;b==null&&(b=0),v==null&&(v=0);function S(){var k,E=C.length,F,I=0,D=0;for(k=0;k<E;++k)F=C[k],I+=F.x,D+=F.y;for(I=I/E-b,D=D/E-v,k=0;k<E;++k)F=C[k],F.x-=I,F.y-=D}return S.initialize=function(k){C=k},S.x=function(k){return arguments.length?(b=+k,S):b},S.y=function(k){return arguments.length?(v=+k,S):v},S}function n(b){return function(){return b}}function r(){return(Math.random()-.5)*1e-6}function t(b){return b.x+b.vx}function h(b){return b.y+b.vy}function i(b){var v,C,S=1,k=1;typeof b!="function"&&(b=n(b==null?1:+b));function E(){for(var D,R=v.length,O,z,B,G,Q,X,j=0;j<k;++j)for(O=f.quadtree(v,t,h).visitAfter(F),D=0;D<R;++D)z=v[D],Q=C[z.index],X=Q*Q,B=z.x+z.vx,G=z.y+z.vy,O.visit(re);function re(ue,K,te,Y,V){var ee=ue.data,ne=ue.r,Z=Q+ne;if(ee){if(ee.index>z.index){var q=B-ee.x-ee.vx,ie=G-ee.y-ee.vy,se=q*q+ie*ie;se<Z*Z&&(q===0&&(q=r(),se+=q*q),ie===0&&(ie=r(),se+=ie*ie),se=(Z-(se=Math.sqrt(se)))/se*S,z.vx+=(q*=se)*(Z=(ne*=ne)/(X+ne)),z.vy+=(ie*=se)*Z,ee.vx-=q*(Z=1-Z),ee.vy-=ie*Z)}return}return K>B+Z||Y<B-Z||te>G+Z||V<G-Z}}function F(D){if(D.data)return D.r=C[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!v){var D,R=v.length,O;for(C=new Array(R),D=0;D<R;++D)O=v[D],C[O.index]=+b(O,D,v)}}return E.initialize=function(D){v=D,I()},E.iterations=function(D){return arguments.length?(k=+D,E):k},E.strength=function(D){return arguments.length?(S=+D,E):S},E.radius=function(D){return arguments.length?(b=typeof D=="function"?D:n(+D),I(),E):b},E}function s(b){return b.index}function y(b,v){var C=b.get(v);if(!C)throw new Error("missing: "+v);return C}function d(b){var v=s,C=O,S,k=n(30),E,F,I,D,R=1;b==null&&(b=[]);function O(X){return 1/Math.min(I[X.source.index],I[X.target.index])}function z(X){for(var j=0,re=b.length;j<R;++j)for(var ue=0,K,te,Y,V,ee,ne,Z;ue<re;++ue)K=b[ue],te=K.source,Y=K.target,V=Y.x+Y.vx-te.x-te.vx||r(),ee=Y.y+Y.vy-te.y-te.vy||r(),ne=Math.sqrt(V*V+ee*ee),ne=(ne-E[ue])/ne*X*S[ue],V*=ne,ee*=ne,Y.vx-=V*(Z=D[ue]),Y.vy-=ee*Z,te.vx+=V*(Z=1-Z),te.vy+=ee*Z}function B(){if(!!F){var X,j=F.length,re=b.length,ue=M.map(F,v),K;for(X=0,I=new Array(j);X<re;++X)K=b[X],K.index=X,typeof K.source!="object"&&(K.source=y(ue,K.source)),typeof K.target!="object"&&(K.target=y(ue,K.target)),I[K.source.index]=(I[K.source.index]||0)+1,I[K.target.index]=(I[K.target.index]||0)+1;for(X=0,D=new Array(re);X<re;++X)K=b[X],D[X]=I[K.source.index]/(I[K.source.index]+I[K.target.index]);S=new Array(re),G(),E=new Array(re),Q()}}function G(){if(!!F)for(var X=0,j=b.length;X<j;++X)S[X]=+C(b[X],X,b)}function Q(){if(!!F)for(var X=0,j=b.length;X<j;++X)E[X]=+k(b[X],X,b)}return z.initialize=function(X){F=X,B()},z.links=function(X){return arguments.length?(b=X,B(),z):b},z.id=function(X){return arguments.length?(v=X,z):v},z.iterations=function(X){return arguments.length?(R=+X,z):R},z.strength=function(X){return arguments.length?(C=typeof X=="function"?X:n(+X),G(),z):C},z.distance=function(X){return arguments.length?(k=typeof X=="function"?X:n(+X),Q(),z):k},z}function p(b){return b.x}function c(b){return b.y}var m=10,l=Math.PI*(3-Math.sqrt(5));function x(b){var v,C=1,S=.001,k=1-Math.pow(S,1/300),E=0,F=.6,I=M.map(),D=e.timer(O),R=T.dispatch("tick","end");b==null&&(b=[]);function O(){z(),R.call("tick",v),C<S&&(D.stop(),R.call("end",v))}function z(Q){var X,j=b.length,re;Q===void 0&&(Q=1);for(var ue=0;ue<Q;++ue)for(C+=(E-C)*k,I.each(function(K){K(C)}),X=0;X<j;++X)re=b[X],re.fx==null?re.x+=re.vx*=F:(re.x=re.fx,re.vx=0),re.fy==null?re.y+=re.vy*=F:(re.y=re.fy,re.vy=0);return v}function B(){for(var Q=0,X=b.length,j;Q<X;++Q){if(j=b[Q],j.index=Q,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var re=m*Math.sqrt(Q),ue=Q*l;j.x=re*Math.cos(ue),j.y=re*Math.sin(ue)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function G(Q){return Q.initialize&&Q.initialize(b),Q}return B(),v={tick:z,restart:function(){return D.restart(O),v},stop:function(){return D.stop(),v},nodes:function(Q){return arguments.length?(b=Q,B(),I.each(G),v):b},alpha:function(Q){return arguments.length?(C=+Q,v):C},alphaMin:function(Q){return arguments.length?(S=+Q,v):S},alphaDecay:function(Q){return arguments.length?(k=+Q,v):+k},alphaTarget:function(Q){return arguments.length?(E=+Q,v):E},velocityDecay:function(Q){return arguments.length?(F=1-Q,v):1-F},force:function(Q,X){return arguments.length>1?(X==null?I.remove(Q):I.set(Q,G(X)),v):I.get(Q)},find:function(Q,X,j){var re=0,ue=b.length,K,te,Y,V,ee;for(j==null?j=1/0:j*=j,re=0;re<ue;++re)V=b[re],K=Q-V.x,te=X-V.y,Y=K*K+te*te,Y<j&&(ee=V,j=Y);return ee},on:function(Q,X){return arguments.length>1?(R.on(Q,X),v):R.on(Q)}}}function u(){var b,v,C,S=n(-30),k,E=1,F=1/0,I=.81;function D(B){var G,Q=b.length,X=f.quadtree(b,p,c).visitAfter(O);for(C=B,G=0;G<Q;++G)v=b[G],X.visit(z)}function R(){if(!!b){var B,G=b.length,Q;for(k=new Array(G),B=0;B<G;++B)Q=b[B],k[Q.index]=+S(Q,B,b)}}function O(B){var G=0,Q,X,j=0,re,ue,K;if(B.length){for(re=ue=K=0;K<4;++K)(Q=B[K])&&(X=Math.abs(Q.value))&&(G+=Q.value,j+=X,re+=X*Q.x,ue+=X*Q.y);B.x=re/j,B.y=ue/j}else{Q=B,Q.x=Q.data.x,Q.y=Q.data.y;do G+=k[Q.data.index];while(Q=Q.next)}B.value=G}function z(B,G,Q,X){if(!B.value)return!0;var j=B.x-v.x,re=B.y-v.y,ue=X-G,K=j*j+re*re;if(ue*ue/I<K)return K<F&&(j===0&&(j=r(),K+=j*j),re===0&&(re=r(),K+=re*re),K<E&&(K=Math.sqrt(E*K)),v.vx+=j*B.value*C/K,v.vy+=re*B.value*C/K),!0;if(B.length||K>=F)return;(B.data!==v||B.next)&&(j===0&&(j=r(),K+=j*j),re===0&&(re=r(),K+=re*re),K<E&&(K=Math.sqrt(E*K)));do B.data!==v&&(ue=k[B.data.index]*C/K,v.vx+=j*ue,v.vy+=re*ue);while(B=B.next)}return D.initialize=function(B){b=B,R()},D.strength=function(B){return arguments.length?(S=typeof B=="function"?B:n(+B),R(),D):S},D.distanceMin=function(B){return arguments.length?(E=B*B,D):Math.sqrt(E)},D.distanceMax=function(B){return arguments.length?(F=B*B,D):Math.sqrt(F)},D.theta=function(B){return arguments.length?(I=B*B,D):Math.sqrt(I)},D}function A(b,v,C){var S,k=n(.1),E,F;typeof b!="function"&&(b=n(+b)),v==null&&(v=0),C==null&&(C=0);function I(R){for(var O=0,z=S.length;O<z;++O){var B=S[O],G=B.x-v||1e-6,Q=B.y-C||1e-6,X=Math.sqrt(G*G+Q*Q),j=(F[O]-X)*E[O]*R/X;B.vx+=G*j,B.vy+=Q*j}}function D(){if(!!S){var R,O=S.length;for(E=new Array(O),F=new Array(O),R=0;R<O;++R)F[R]=+b(S[R],R,S),E[R]=isNaN(F[R])?0:+k(S[R],R,S)}}return I.initialize=function(R){S=R,D()},I.strength=function(R){return arguments.length?(k=typeof R=="function"?R:n(+R),D(),I):k},I.radius=function(R){return arguments.length?(b=typeof R=="function"?R:n(+R),D(),I):b},I.x=function(R){return arguments.length?(v=+R,I):v},I.y=function(R){return arguments.length?(C=+R,I):C},I}function _(b){var v=n(.1),C,S,k;typeof b!="function"&&(b=n(b==null?0:+b));function E(I){for(var D=0,R=C.length,O;D<R;++D)O=C[D],O.vx+=(k[D]-O.x)*S[D]*I}function F(){if(!!C){var I,D=C.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+b(C[I],I,C))?0:+v(C[I],I,C)}}return E.initialize=function(I){C=I,F()},E.strength=function(I){return arguments.length?(v=typeof I=="function"?I:n(+I),F(),E):v},E.x=function(I){return arguments.length?(b=typeof I=="function"?I:n(+I),F(),E):b},E}function g(b){var v=n(.1),C,S,k;typeof b!="function"&&(b=n(b==null?0:+b));function E(I){for(var D=0,R=C.length,O;D<R;++D)O=C[D],O.vy+=(k[D]-O.y)*S[D]*I}function F(){if(!!C){var I,D=C.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+b(C[I],I,C))?0:+v(C[I],I,C)}}return E.initialize=function(I){C=I,F()},E.strength=function(I){return arguments.length?(v=typeof I=="function"?I:n(+I),F(),E):v},E.y=function(I){return arguments.length?(b=typeof I=="function"?I:n(+I),F(),E):b},E}w.forceCenter=a,w.forceCollide=i,w.forceLink=d,w.forceManyBody=u,w.forceRadial=A,w.forceSimulation=x,w.forceX=_,w.forceY=g,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=typeof globalThis<"u"?globalThis:w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)}function M(b,v){if((C=(b=v?b.toExponential(v-1):b.toExponential()).indexOf("e"))<0)return null;var C,S=b.slice(0,C);return[S.length>1?S[0]+S.slice(2):S,+b.slice(C+1)]}function T(b){return b=M(Math.abs(b)),b?b[1]:NaN}function e(b,v){return function(C,S){for(var k=C.length,E=[],F=0,I=b[0],D=0;k>0&&I>0&&(D+I+1>S&&(I=Math.max(1,S-D)),E.push(C.substring(k-=I,k+I)),!((D+=I+1)>S));)I=b[F=(F+1)%b.length];return E.reverse().join(v)}}function a(b){return function(v){return v.replace(/[0-9]/g,function(C){return b[+C]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(b){if(!(v=n.exec(b)))throw new Error("invalid format: "+b);var v;return new t({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}r.prototype=t.prototype;function t(b){this.fill=b.fill===void 0?" ":b.fill+"",this.align=b.align===void 0?">":b.align+"",this.sign=b.sign===void 0?"-":b.sign+"",this.symbol=b.symbol===void 0?"":b.symbol+"",this.zero=!!b.zero,this.width=b.width===void 0?void 0:+b.width,this.comma=!!b.comma,this.precision=b.precision===void 0?void 0:+b.precision,this.trim=!!b.trim,this.type=b.type===void 0?"":b.type+""}t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h(b){e:for(var v=b.length,C=1,S=-1,k;C<v;++C)switch(b[C]){case".":S=k=C;break;case"0":S===0&&(S=C),k=C;break;default:if(!+b[C])break e;S>0&&(S=0);break}return S>0?b.slice(0,S)+b.slice(k+1):b}var i;function s(b,v){var C=M(b,v);if(!C)return b+"";var S=C[0],k=C[1],E=k-(i=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,F=S.length;return E===F?S:E>F?S+new Array(E-F+1).join("0"):E>0?S.slice(0,E)+"."+S.slice(E):"0."+new Array(1-E).join("0")+M(b,Math.max(0,v+E-1))[0]}function y(b,v){var C=M(b,v);if(!C)return b+"";var S=C[0],k=C[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var d={"%":function(b,v){return(b*100).toFixed(v)},b:function(b){return Math.round(b).toString(2)},c:function(b){return b+""},d:f,e:function(b,v){return b.toExponential(v)},f:function(b,v){return b.toFixed(v)},g:function(b,v){return b.toPrecision(v)},o:function(b){return Math.round(b).toString(8)},p:function(b,v){return y(b*100,v)},r:y,s,X:function(b){return Math.round(b).toString(16).toUpperCase()},x:function(b){return Math.round(b).toString(16)}};function p(b){return b}var c=Array.prototype.map,m=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(b){var v=b.grouping===void 0||b.thousands===void 0?p:e(c.call(b.grouping,Number),b.thousands+""),C=b.currency===void 0?"":b.currency[0]+"",S=b.currency===void 0?"":b.currency[1]+"",k=b.decimal===void 0?".":b.decimal+"",E=b.numerals===void 0?p:a(c.call(b.numerals,String)),F=b.percent===void 0?"%":b.percent+"",I=b.minus===void 0?"-":b.minus+"",D=b.nan===void 0?"NaN":b.nan+"";function R(z){z=r(z);var B=z.fill,G=z.align,Q=z.sign,X=z.symbol,j=z.zero,re=z.width,ue=z.comma,K=z.precision,te=z.trim,Y=z.type;Y==="n"?(ue=!0,Y="g"):d[Y]||(K===void 0&&(K=12),te=!0,Y="g"),(j||B==="0"&&G==="=")&&(j=!0,B="0",G="=");var V=X==="$"?C:X==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",ee=X==="$"?S:/[%p]/.test(Y)?F:"",ne=d[Y],Z=/[defgprs%]/.test(Y);K=K===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function q(ie){var se=V,ae=ee,oe,be,ce;if(Y==="c")ae=ne(ie)+ae,ie="";else{ie=+ie;var de=ie<0||1/ie<0;if(ie=isNaN(ie)?D:ne(Math.abs(ie),K),te&&(ie=h(ie)),de&&+ie==0&&Q!=="+"&&(de=!1),se=(de?Q==="("?Q:I:Q==="-"||Q==="("?"":Q)+se,ae=(Y==="s"?m[8+i/3]:"")+ae+(de&&Q==="("?")":""),Z){for(oe=-1,be=ie.length;++oe<be;)if(ce=ie.charCodeAt(oe),48>ce||ce>57){ae=(ce===46?k+ie.slice(oe+1):ie.slice(oe))+ae,ie=ie.slice(0,oe);break}}}ue&&!j&&(ie=v(ie,1/0));var ye=se.length+ie.length+ae.length,ge=ye<re?new Array(re-ye+1).join(B):"";switch(ue&&j&&(ie=v(ge+ie,ge.length?re-ae.length:1/0),ge=""),G){case"<":ie=se+ie+ae+ge;break;case"=":ie=se+ge+ie+ae;break;case"^":ie=ge.slice(0,ye=ge.length>>1)+se+ie+ae+ge.slice(ye);break;default:ie=ge+se+ie+ae;break}return E(ie)}return q.toString=function(){return z+""},q}function O(z,B){var G=R((z=r(z),z.type="f",z)),Q=Math.max(-8,Math.min(8,Math.floor(T(B)/3)))*3,X=Math.pow(10,-Q),j=m[8+Q/3];return function(re){return G(X*re)+j}}return{format:R,formatPrefix:O}}var x;u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function u(b){return x=l(b),w.format=x.format,w.formatPrefix=x.formatPrefix,x}function A(b){return Math.max(0,-T(Math.abs(b)))}function _(b,v){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(v)/3)))*3-T(Math.abs(b)))}function g(b,v){return b=Math.abs(b),v=Math.abs(v)-b,Math.max(0,T(v)-T(b))+1}w.FormatSpecifier=t,w.formatDefaultLocale=u,w.formatLocale=l,w.formatSpecifier=r,w.precisionFixed=A,w.precisionPrefix=_,w.precisionRound=g,Object.defineProperty(w,"__esModule",{value:!0})})},{}],113:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-geo"),o("d3-array")):f(w.d3=w.d3||{},w.d3,w.d3)})(this,function(w,f,M){var T=Math.abs,e=Math.atan,a=Math.atan2,n=Math.cos,r=Math.exp,t=Math.floor,h=Math.log,i=Math.max,s=Math.min,y=Math.pow,d=Math.round,p=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},c=Math.sin,m=Math.tan,l=1e-6,x=1e-12,u=Math.PI,A=u/2,_=u/4,g=Math.SQRT1_2,b=D(2),v=D(u),C=u*2,S=180/u,k=u/180;function E(ze){return ze?ze/Math.sin(ze):1}function F(ze){return ze>1?A:ze<-1?-A:Math.asin(ze)}function I(ze){return ze>1?0:ze<-1?u:Math.acos(ze)}function D(ze){return ze>0?Math.sqrt(ze):0}function R(ze){return ze=r(2*ze),(ze-1)/(ze+1)}function O(ze){return(r(ze)-r(-ze))/2}function z(ze){return(r(ze)+r(-ze))/2}function B(ze){return h(ze+D(ze*ze+1))}function G(ze){return h(ze+D(ze*ze-1))}function Q(ze){var je=m(ze/2),nt=2*h(n(ze/2))/(je*je);function ht(Et,At){var It=n(Et),gr=n(At),br=c(At),pr=gr*It,Mr=-((1-pr?h((1+pr)/2)/(1-pr):-.5)+nt/(1+pr));return[Mr*gr*c(Et),Mr*br]}return ht.invert=function(Et,At){var It=D(Et*Et+At*At),gr=-ze/2,br=50,pr;if(!It)return[0,0];do{var Mr=gr/2,Or=n(Mr),$r=c(Mr),on=$r/Or,Sn=-h(T(Or));gr-=pr=(2/on*Sn-nt*on-It)/(-Sn/($r*$r)+1-nt/(2*Or*Or))*(Or<0?.7:1)}while(T(pr)>l&&--br>0);var Nn=c(gr);return[a(Et*Nn,It*n(gr)),F(At*Nn/It)]},ht}function X(){var ze=A,je=f.geoProjectionMutator(Q),nt=je(ze);return nt.radius=function(ht){return arguments.length?je(ze=ht*k):ze*S},nt.scale(179.976).clipAngle(147)}function j(ze,je){var nt=n(je),ht=E(I(nt*n(ze/=2)));return[2*nt*c(ze)*ht,c(je)*ht]}j.invert=function(ze,je){if(!(ze*ze+4*je*je>u*u+l)){var nt=ze,ht=je,Et=25;do{var At=c(nt),It=c(nt/2),gr=n(nt/2),br=c(ht),pr=n(ht),Mr=c(2*ht),Or=br*br,$r=pr*pr,on=It*It,Sn=1-$r*gr*gr,Nn=Sn?I(pr*gr)*D(Qn=1/Sn):Qn=0,Qn,wa=2*Nn*pr*It-ze,Ma=Nn*br-je,ri=Qn*($r*on+Nn*pr*gr*Or),Qa=Qn*(.5*At*Mr-Nn*2*br*It),si=Qn*.25*(Mr*It-Nn*br*$r*At),_i=Qn*(Or*gr+Nn*on*pr),mo=Qa*si-_i*ri;if(!mo)break;var fi=(Ma*Qa-wa*_i)/mo,to=(wa*si-Ma*ri)/mo;nt-=fi,ht-=to}while((T(fi)>l||T(to)>l)&&--Et>0);return[nt,ht]}};function re(){return f.geoProjection(j).scale(152.63)}function ue(ze){var je=c(ze),nt=n(ze),ht=ze>=0?1:-1,Et=m(ht*ze),At=(1+je-nt)/2;function It(gr,br){var pr=n(br),Mr=n(gr/=2);return[(1+pr)*c(gr),(ht*br>-a(Mr,Et)-.001?0:-ht*10)+At+c(br)*nt-(1+pr)*je*Mr]}return It.invert=function(gr,br){var pr=0,Mr=0,Or=50;do{var $r=n(pr),on=c(pr),Sn=n(Mr),Nn=c(Mr),Qn=1+Sn,wa=Qn*on-gr,Ma=At+Nn*nt-Qn*je*$r-br,ri=Qn*$r/2,Qa=-on*Nn,si=je*Qn*on/2,_i=nt*Sn+je*$r*Nn,mo=Qa*si-_i*ri,fi=(Ma*Qa-wa*_i)/mo/2,to=(wa*si-Ma*ri)/mo;T(to)>2&&(to/=2),pr-=fi,Mr-=to}while((T(fi)>l||T(to)>l)&&--Or>0);return ht*Mr>-a(n(pr),Et)-.001?[pr*2,Mr]:null},It}function K(){var ze=20*k,je=ze>=0?1:-1,nt=m(je*ze),ht=f.geoProjectionMutator(ue),Et=ht(ze),At=Et.stream;return Et.parallel=function(It){return arguments.length?(nt=m((je=(ze=It*k)>=0?1:-1)*ze),ht(ze)):ze*S},Et.stream=function(It){var gr=Et.rotate(),br=At(It),pr=(Et.rotate([0,0]),At(It)),Mr=Et.precision();return Et.rotate(gr),br.sphere=function(){pr.polygonStart(),pr.lineStart();for(var Or=je*-180;je*Or<180;Or+=je*90)pr.point(Or,je*90);if(ze)for(;je*(Or-=3*je*Mr)>=-180;)pr.point(Or,je*-a(n(Or*k/2),nt)*S);pr.lineEnd(),pr.polygonEnd()},br},Et.scale(218.695).center([0,28.0974])}function te(ze,je){var nt=m(je/2),ht=D(1-nt*nt),Et=1+ht*n(ze/=2),At=c(ze)*ht/Et,It=nt/Et,gr=At*At,br=It*It;return[4/3*At*(3+gr-3*br),4/3*It*(3+3*gr-br)]}te.invert=function(ze,je){if(ze*=3/8,je*=3/8,!ze&&T(je)>1)return null;var nt=ze*ze,ht=je*je,Et=1+nt+ht,At=D((Et-D(Et*Et-4*je*je))/2),It=F(At)/3,gr=At?G(T(je/At))/3:B(T(ze))/3,br=n(It),pr=z(gr),Mr=pr*pr-br*br;return[p(ze)*2*a(O(gr)*br,.25-Mr),p(je)*2*a(pr*c(It),.25+Mr)]};function Y(){return f.geoProjection(te).scale(66.1603)}var V=D(8),ee=h(1+b);function ne(ze,je){var nt=T(je);return nt<_?[ze,h(m(_+je/2))]:[ze*n(nt)*(2*b-1/c(nt)),p(je)*(2*b*(nt-_)-h(m(nt/2)))]}ne.invert=function(ze,je){if((At=T(je))<ee)return[ze,2*e(r(je))-A];var nt=_,ht=25,Et,At;do{var It=n(nt/2),gr=m(nt/2);nt-=Et=(V*(nt-_)-h(gr)-At)/(V-It*It/(2*gr))}while(T(Et)>x&&--ht>0);return[ze/(n(nt)*(V-1/c(nt))),p(je)*nt]};function Z(){return f.geoProjection(ne).scale(112.314)}function q(ze){var je=2*u/ze;function nt(ht,Et){var At=f.geoAzimuthalEquidistantRaw(ht,Et);if(T(ht)>A){var It=a(At[1],At[0]),gr=D(At[0]*At[0]+At[1]*At[1]),br=je*d((It-A)/je)+A,pr=a(c(It-=br),2-n(It));It=br+F(u/gr*c(pr))-pr,At[0]=gr*n(It),At[1]=gr*c(It)}return At}return nt.invert=function(ht,Et){var At=D(ht*ht+Et*Et);if(At>A){var It=a(Et,ht),gr=je*d((It-A)/je)+A,br=It>gr?-1:1,pr=At*n(gr-It),Mr=1/m(br*I((pr-u)/D(u*(u-2*pr)+At*At)));It=gr+2*e((Mr+br*D(Mr*Mr-3))/3),ht=At*n(It),Et=At*c(It)}return f.geoAzimuthalEquidistantRaw.invert(ht,Et)},nt}function ie(){var ze=5,je=f.geoProjectionMutator(q),nt=je(ze),ht=nt.stream,Et=.01,At=-n(Et*k),It=c(Et*k);return nt.lobes=function(gr){return arguments.length?je(ze=+gr):ze},nt.stream=function(gr){var br=nt.rotate(),pr=ht(gr),Mr=(nt.rotate([0,0]),ht(gr));return nt.rotate(br),pr.sphere=function(){Mr.polygonStart(),Mr.lineStart();for(var Or=0,$r=360/ze,on=2*u/ze,Sn=90-180/ze,Nn=A;Or<ze;++Or,Sn-=$r,Nn-=on)Mr.point(a(It*n(Nn),At)*S,F(It*c(Nn))*S),Sn<-90?(Mr.point(-90,-180-Sn-Et),Mr.point(-90,-180-Sn+Et)):(Mr.point(90,Sn+Et),Mr.point(90,Sn-Et));Mr.lineEnd(),Mr.polygonEnd()},pr},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function se(ze,je){if(arguments.length<2&&(je=ze),je===1)return f.geoAzimuthalEqualAreaRaw;if(je===1/0)return ae;function nt(ht,Et){var At=f.geoAzimuthalEqualAreaRaw(ht/je,Et);return At[0]*=ze,At}return nt.invert=function(ht,Et){var At=f.geoAzimuthalEqualAreaRaw.invert(ht/ze,Et);return At[0]*=je,At},nt}function ae(ze,je){return[ze*n(je)/n(je/=2),2*c(je)]}ae.invert=function(ze,je){var nt=2*F(je/2);return[ze*n(nt/2)/n(nt),nt]};function oe(){var ze=2,je=f.geoProjectionMutator(se),nt=je(ze);return nt.coefficient=function(ht){return arguments.length?je(ze=+ht):ze},nt.scale(169.529)}function be(ze,je,nt){var ht=100,Et,At,It;nt=nt===void 0?0:+nt,je=+je;do At=ze(nt),It=ze(nt+l),At===It&&(It=At+l),nt-=Et=-1*l*(At-je)/(At-It);while(ht-- >0&&T(Et)>l);return ht<0?NaN:nt}function ce(ze,je,nt){return je===void 0&&(je=40),nt===void 0&&(nt=x),function(ht,Et,At,It){var gr,br,pr;At=At===void 0?0:+At,It=It===void 0?0:+It;for(var Mr=0;Mr<je;Mr++){var Or=ze(At,It),$r=Or[0]-ht,on=Or[1]-Et;if(T($r)<nt&&T(on)<nt)break;var Sn=$r*$r+on*on;if(Sn>gr){At-=br/=2,It-=pr/=2;continue}gr=Sn;var Nn=(At>0?-1:1)*nt,Qn=(It>0?-1:1)*nt,wa=ze(At+Nn,It),Ma=ze(At,It+Qn),ri=(wa[0]-Or[0])/Nn,Qa=(wa[1]-Or[1])/Nn,si=(Ma[0]-Or[0])/Qn,_i=(Ma[1]-Or[1])/Qn,mo=_i*ri-Qa*si,fi=(T(mo)<.5?.5:1)/mo;if(br=(on*si-$r*_i)*fi,pr=($r*Qa-on*ri)*fi,At+=br,It+=pr,T(br)<nt&&T(pr)<nt)break}return[At,It]}}function de(){var ze=se(1.68,2),je=1.4,nt=12;function ht(Et,At){if(Et+At<-je){var It=(Et-At+1.6)*(Et+At+je)/8;Et+=It,At-=.8*It*c(At+u/2)}var gr=ze(Et,At),br=(1-n(Et*At))/nt;return gr[1]<0&&(gr[0]*=1+br),gr[1]>0&&(gr[1]*=1+br/1.5*gr[0]*gr[0]),gr}return ht.invert=ce(ht),ht}function ye(){return f.geoProjection(de()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ge(ze,je){var nt=ze*c(je),ht=30,Et;do je-=Et=(je+c(je)-nt)/(1+n(je));while(T(Et)>l&&--ht>0);return je/2}function me(ze,je,nt){function ht(Et,At){return[ze*Et*n(At=ge(nt,At)),je*c(At)]}return ht.invert=function(Et,At){return At=F(At/je),[Et/(ze*n(At)),F((2*At+c(2*At))/nt)]},ht}var Me=me(b/A,b,u);function Le(){return f.geoProjection(Me).scale(169.529)}var Oe=2.00276,_e=1.11072;function Ee(ze,je){var nt=ge(u,je);return[Oe*ze/(1/n(je)+_e/n(nt)),(je+b*c(nt))/Oe]}Ee.invert=function(ze,je){var nt=Oe*je,ht=je<0?-_:_,Et=25,At,It;do It=nt-b*c(ht),ht-=At=(c(2*ht)+2*ht-u*c(It))/(2*n(2*ht)+2+u*n(It)*b*n(ht));while(T(At)>l&&--Et>0);return It=nt-b*c(ht),[ze*(1/n(It)+_e/n(ht))/Oe,It]};function Ze(){return f.geoProjection(Ee).scale(160.857)}function Ge(ze){var je=0,nt=f.geoProjectionMutator(ze),ht=nt(je);return ht.parallel=function(Et){return arguments.length?nt(je=Et*k):je*S},ht}function Fe(ze,je){return[ze*n(je),je]}Fe.invert=function(ze,je){return[ze/n(je),je]};function Re(){return f.geoProjection(Fe).scale(152.63)}function We(ze){if(!ze)return Fe;var je=1/m(ze);function nt(ht,Et){var At=je+ze-Et,It=At&&ht*n(Et)/At;return[At*c(It),je-At*n(It)]}return nt.invert=function(ht,Et){var At=D(ht*ht+(Et=je-Et)*Et),It=je+ze-At;return[At/n(It)*a(ht,Et),It]},nt}function xt(){return Ge(We).scale(123.082).center([0,26.1441]).parallel(45)}function Nt(ze){function je(nt,ht){var Et=A-ht,At=Et&&nt*ze*c(Et)/Et;return[Et*c(At)/ze,A-Et*n(At)]}return je.invert=function(nt,ht){var Et=nt*ze,At=A-ht,It=D(Et*Et+At*At),gr=a(Et,At);return[(It?It/c(It):1)*gr/ze,A-It]},je}function tr(){var ze=.5,je=f.geoProjectionMutator(Nt),nt=je(ze);return nt.fraction=function(ht){return arguments.length?je(ze=+ht):ze},nt.scale(158.837)}var Vt=me(1,4/u,u);function Pt(){return f.geoProjection(Vt).scale(152.63)}function $t(ze,je,nt,ht,Et,At){var It=n(At),gr;if(T(ze)>1||T(At)>1)gr=I(nt*Et+je*ht*It);else{var br=c(ze/2),pr=c(At/2);gr=2*F(D(br*br+je*ht*pr*pr))}return T(gr)>l?[gr,a(ht*c(At),je*Et-nt*ht*It)]:[0,0]}function Ut(ze,je,nt){return I((ze*ze+je*je-nt*nt)/(2*ze*je))}function Lt(ze){return ze-2*u*t((ze+u)/(2*u))}function Ye(ze,je,nt){for(var ht=[[ze[0],ze[1],c(ze[1]),n(ze[1])],[je[0],je[1],c(je[1]),n(je[1])],[nt[0],nt[1],c(nt[1]),n(nt[1])]],Et=ht[2],At,It=0;It<3;++It,Et=At)At=ht[It],Et.v=$t(At[1]-Et[1],Et[3],Et[2],At[3],At[2],At[0]-Et[0]),Et.point=[0,0];var gr=Ut(ht[0].v[0],ht[2].v[0],ht[1].v[0]),br=Ut(ht[0].v[0],ht[1].v[0],ht[2].v[0]),pr=u-gr;ht[2].point[1]=0,ht[0].point[0]=-(ht[1].point[0]=ht[0].v[0]/2);var Mr=[ht[2].point[0]=ht[0].point[0]+ht[2].v[0]*n(gr),2*(ht[0].point[1]=ht[1].point[1]=ht[2].v[0]*c(gr))];function Or($r,on){var Sn=c(on),Nn=n(on),Qn=new Array(3),wa;for(wa=0;wa<3;++wa){var Ma=ht[wa];if(Qn[wa]=$t(on-Ma[1],Ma[3],Ma[2],Nn,Sn,$r-Ma[0]),!Qn[wa][0])return Ma.point;Qn[wa][1]=Lt(Qn[wa][1]-Ma.v[1])}var ri=Mr.slice();for(wa=0;wa<3;++wa){var Qa=wa==2?0:wa+1,si=Ut(ht[wa].v[0],Qn[wa][0],Qn[Qa][0]);Qn[wa][1]<0&&(si=-si),wa?wa==1?(si=br-si,ri[0]-=Qn[wa][0]*n(si),ri[1]-=Qn[wa][0]*c(si)):(si=pr-si,ri[0]+=Qn[wa][0]*n(si),ri[1]+=Qn[wa][0]*c(si)):(ri[0]+=Qn[wa][0]*n(si),ri[1]-=Qn[wa][0]*c(si))}return ri[0]/=3,ri[1]/=3,ri}return Or}function ot(ze){return ze[0]*=k,ze[1]*=k,ze}function Ve(){return Ae([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ae(ze,je,nt){var ht=f.geoCentroid({type:"MultiPoint",coordinates:[ze,je,nt]}),Et=[-ht[0],-ht[1]],At=f.geoRotation(Et),It=Ye(ot(At(ze)),ot(At(je)),ot(At(nt)));It.invert=ce(It);var gr=f.geoProjection(It).rotate(Et),br=gr.center;return delete gr.rotate,gr.center=function(pr){return arguments.length?br(At(pr)):At.invert(br())},gr.clipAngle(90)}function He(ze,je){var nt=D(1-c(je));return[2/v*ze*nt,v*(1-nt)]}He.invert=function(ze,je){var nt=(nt=je/v-1)*nt;return[nt>0?ze*D(u/nt)/2:0,F(1-nt)]};function Je(){return f.geoProjection(He).scale(95.6464).center([0,30])}function tt(ze){var je=m(ze);function nt(ht,Et){return[ht,(ht?ht/c(ht):1)*(c(Et)*n(ht)-je*n(Et))]}return nt.invert=je?function(ht,Et){ht&&(Et*=c(ht)/ht);var At=n(ht);return[ht,2*a(D(At*At+je*je-Et*Et)-At,je-Et)]}:function(ht,Et){return[ht,F(ht?Et*m(ht)/ht:Et)]},nt}function St(){return Ge(tt).scale(249.828).clipAngle(90)}var _t=D(3);function kt(ze,je){return[_t*ze*(2*n(2*je/3)-1)/v,_t*v*c(je/3)]}kt.invert=function(ze,je){var nt=3*F(je/(_t*v));return[v*ze/(_t*(2*n(2*nt/3)-1)),nt]};function jt(){return f.geoProjection(kt).scale(156.19)}function Bt(ze){var je=n(ze);function nt(ht,Et){return[ht*je,c(Et)/je]}return nt.invert=function(ht,Et){return[ht/je,F(Et*je)]},nt}function Wt(){return Ge(Bt).parallel(38.58).scale(195.044)}function Qt(ze){var je=n(ze);function nt(ht,Et){return[ht*je,(1+je)*m(Et/2)]}return nt.invert=function(ht,Et){return[ht/je,e(Et/(1+je))*2]},nt}function Zt(){return Ge(Qt).scale(124.75)}function cr(ze,je){var nt=D(8/(3*u));return[nt*ze*(1-T(je)/u),nt*je]}cr.invert=function(ze,je){var nt=D(8/(3*u)),ht=je/nt;return[ze/(nt*(1-T(ht)/u)),ht]};function Xr(){return f.geoProjection(cr).scale(165.664)}function vn(ze,je){var nt=D(4-3*c(T(je)));return[2/D(6*u)*ze*nt,p(je)*D(2*u/3)*(2-nt)]}vn.invert=function(ze,je){var nt=2-T(je)/D(2*u/3);return[ze*D(6*u)/(2*nt),p(je)*F((4-nt*nt)/3)]};function en(){return f.geoProjection(vn).scale(165.664)}function ft(ze,je){var nt=D(u*(4+u));return[2/nt*ze*(1+D(1-4*je*je/(u*u))),4/nt*je]}ft.invert=function(ze,je){var nt=D(u*(4+u))/2;return[ze*nt/(1+D(1-je*je*(4+u)/(4*u))),je*nt/2]};function ar(){return f.geoProjection(ft).scale(180.739)}function rr(ze,je){var nt=(2+A)*c(je);je/=2;for(var ht=0,Et=1/0;ht<10&&T(Et)>l;ht++){var At=n(je);je-=Et=(je+c(je)*(At+2)-nt)/(2*At*(1+At))}return[2/D(u*(4+u))*ze*(1+n(je)),2*D(u/(4+u))*c(je)]}rr.invert=function(ze,je){var nt=je*D((4+u)/u)/2,ht=F(nt),Et=n(ht);return[ze/(2/D(u*(4+u))*(1+Et)),F((ht+nt*(Et+2))/(2+A))]};function Kt(){return f.geoProjection(rr).scale(180.739)}function Er(ze,je){return[ze*(1+n(je))/D(2+u),2*je/D(2+u)]}Er.invert=function(ze,je){var nt=D(2+u),ht=je*nt/2;return[nt*ze/(1+n(ht)),ht]};function st(){return f.geoProjection(Er).scale(173.044)}function et(ze,je){for(var nt=(1+A)*c(je),ht=0,Et=1/0;ht<10&&T(Et)>l;ht++)je-=Et=(je+c(je)-nt)/(1+n(je));return nt=D(2+u),[ze*(1+n(je))/nt,2*je/nt]}et.invert=function(ze,je){var nt=1+A,ht=D(nt/2);return[ze*2*ht/(1+n(je*=ht)),F((je+c(je))/nt)]};function vt(){return f.geoProjection(et).scale(173.044)}var pt=3+2*b;function Ct(ze,je){var nt=c(ze/=2),ht=n(ze),Et=D(n(je)),At=n(je/=2),It=c(je)/(At+b*ht*Et),gr=D(2/(1+It*It)),br=D((b*At+(ht+nt)*Et)/(b*At+(ht-nt)*Et));return[pt*(gr*(br-1/br)-2*h(br)),pt*(gr*It*(br+1/br)-2*e(It))]}Ct.invert=function(ze,je){if(!(At=te.invert(ze/1.2,je*1.065)))return null;var nt=At[0],ht=At[1],Et=20,At;ze/=pt,je/=pt;do{var It=nt/2,gr=ht/2,br=c(It),pr=n(It),Mr=c(gr),Or=n(gr),$r=n(ht),on=D($r),Sn=Mr/(Or+b*pr*on),Nn=Sn*Sn,Qn=D(2/(1+Nn)),wa=b*Or+(pr+br)*on,Ma=b*Or+(pr-br)*on,ri=wa/Ma,Qa=D(ri),si=Qa-1/Qa,_i=Qa+1/Qa,mo=Qn*si-2*h(Qa)-ze,fi=Qn*Sn*_i-2*e(Sn)-je,to=Mr&&g*on*br*Nn/Mr,To=(b*pr*Or+on)/(2*(Or+b*pr*on)*(Or+b*pr*on)*on),Io=-.5*Sn*Qn*Qn*Qn,Li=Io*to,zi=Io*To,Ps=(Ps=2*Or+b*on*(pr-br))*Ps*Qa,ko=(b*pr*Or*on+$r)/Ps,Yo=-(b*br*Mr)/(on*Ps),ls=si*Li-2*ko/Qa+Qn*(ko+ko/ri),le=si*zi-2*Yo/Qa+Qn*(Yo+Yo/ri),we=Sn*_i*Li-2*to/(1+Nn)+Qn*_i*to+Qn*Sn*(ko-ko/ri),De=Sn*_i*zi-2*To/(1+Nn)+Qn*_i*To+Qn*Sn*(Yo-Yo/ri),Ue=le*we-De*ls;if(!Ue)break;var Be=(fi*le-mo*De)/Ue,$e=(mo*we-fi*ls)/Ue;nt-=Be,ht=i(-A,s(A,ht-$e))}while((T(Be)>l||T($e)>l)&&--Et>0);return T(T(ht)-A)<l?[0,ht]:Et&&[nt,ht]};function Ht(){return f.geoProjection(Ct).scale(62.5271)}var Pe=n(35*k);function ke(ze,je){var nt=m(je/2);return[ze*Pe*D(1-nt*nt),(1+Pe)*nt]}ke.invert=function(ze,je){var nt=je/(1+Pe);return[ze&&ze/(Pe*D(1-nt*nt)),2*e(nt)]};function lt(){return f.geoProjection(ke).scale(137.152)}function ct(ze,je){var nt=je/2,ht=n(nt);return[2*ze/v*n(je)*ht*ht,v*m(nt)]}ct.invert=function(ze,je){var nt=e(je/v),ht=n(nt),Et=2*nt;return[ze*v/2/(n(Et)*ht*ht),Et]};function yt(){return f.geoProjection(ct).scale(135.264)}function Rt(ze){var je=1-ze,nt=At(u,0)[0]-At(-u,0)[0],ht=At(0,A)[1]-At(0,-A)[1],Et=D(2*ht/nt);function At(br,pr){var Mr=n(pr),Or=c(pr);return[Mr/(je+ze*Mr)*br,je*pr+ze*Or]}function It(br,pr){var Mr=At(br,pr);return[Mr[0]*Et,Mr[1]/Et]}function gr(br){return It(0,br)[1]}return It.invert=function(br,pr){var Mr=be(gr,pr),Or=br/Et*(ze+je/n(Mr));return[Or,Mr]},It}function wt(){var ze=.5,je=f.geoProjectionMutator(Rt),nt=je(ze);return nt.alpha=function(ht){return arguments.length?je(ze=+ht):ze},nt.scale(168.725)}function Dt(ze){return[ze[0]/2,F(m(ze[1]/2*k))*S]}function Jt(ze){return[ze[0]*2,2*e(c(ze[1]*k))*S]}function fr(ze){ze==null&&(ze=f.geoOrthographic);var je=ze(),nt=f.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function ht(At){return je(Dt(At))}je.invert&&(ht.invert=function(At){return Jt(je.invert(At))}),ht.stream=function(At){var It=je.stream(At),gr=nt.stream({point:function(br,pr){It.point(br/2,F(m(-pr/2*k))*S)},lineStart:function(){It.lineStart()},lineEnd:function(){It.lineEnd()},polygonStart:function(){It.polygonStart()},polygonEnd:function(){It.polygonEnd()}});return gr.sphere=It.sphere,gr};function Et(At){ht[At]=function(){return arguments.length?(je[At].apply(je,arguments),ht):je[At]()}}return ht.rotate=function(At){return arguments.length?(nt.rotate(At),ht):nt.rotate()},ht.center=function(At){return arguments.length?(je.center(Dt(At)),ht):Jt(je.center())},Et("angle"),Et("clipAngle"),Et("clipExtent"),Et("fitExtent"),Et("fitHeight"),Et("fitSize"),Et("fitWidth"),Et("scale"),Et("translate"),Et("precision"),ht.scale(249.5)}function Rr(ze,je){var nt=2*u/je,ht=ze*ze;function Et(At,It){var gr=f.geoAzimuthalEquidistantRaw(At,It),br=gr[0],pr=gr[1],Mr=br*br+pr*pr;if(Mr>ht){var Or=D(Mr),$r=a(pr,br),on=nt*d($r/nt),Sn=$r-on,Nn=ze*n(Sn),Qn=(ze*c(Sn)-Sn*c(Nn))/(A-Nn),wa=Sr(Sn,Qn),Ma=(u-ze)/Pr(wa,Nn,u);br=Or;var ri=50,Qa;do br-=Qa=(ze+Pr(wa,Nn,br)*Ma-Or)/(wa(br)*Ma);while(T(Qa)>l&&--ri>0);pr=Sn*c(br),br<A&&(pr-=Qn*(br-A));var si=c(on),_i=n(on);gr[0]=br*_i-pr*si,gr[1]=br*si+pr*_i}return gr}return Et.invert=function(At,It){var gr=At*At+It*It;if(gr>ht){var br=D(gr),pr=a(It,At),Mr=nt*d(pr/nt),Or=pr-Mr;At=br*n(Or),It=br*c(Or);for(var $r=At-A,on=c(At),Sn=It/on,Nn=At<A?1/0:0,Qn=10;;){var wa=ze*c(Sn),Ma=ze*n(Sn),ri=c(Ma),Qa=A-Ma,si=(wa-Sn*ri)/Qa,_i=Sr(Sn,si);if(T(Nn)<x||!--Qn)break;Sn-=Nn=(Sn*on-si*$r-It)/(on-$r*2*(Qa*(Ma+Sn*wa*n(Ma)-ri)-wa*(wa-Sn*ri))/(Qa*Qa))}br=ze+Pr(_i,Ma,At)*(u-ze)/Pr(_i,Ma,u),pr=Mr+Sn,At=br*n(pr),It=br*c(pr)}return f.geoAzimuthalEquidistantRaw.invert(At,It)},Et}function Sr(ze,je){return function(nt){var ht=ze*n(nt);return nt<A&&(ht-=je),D(1+ht*ht)}}function Pr(ze,je,nt){for(var ht=50,Et=(nt-je)/ht,At=ze(je)+ze(nt),It=1,gr=je;It<ht;++It)At+=2*ze(gr+=Et);return At*.5*Et}function Jr(){var ze=6,je=30*k,nt=n(je),ht=c(je),Et=f.geoProjectionMutator(Rr),At=Et(je,ze),It=At.stream,gr=.01,br=-n(gr*k),pr=c(gr*k);return At.radius=function(Mr){return arguments.length?(nt=n(je=Mr*k),ht=c(je),Et(je,ze)):je*S},At.lobes=function(Mr){return arguments.length?Et(je,ze=+Mr):ze},At.stream=function(Mr){var Or=At.rotate(),$r=It(Mr),on=(At.rotate([0,0]),It(Mr));return At.rotate(Or),$r.sphere=function(){on.polygonStart(),on.lineStart();for(var Sn=0,Nn=2*u/ze,Qn=0;Sn<ze;++Sn,Qn-=Nn)on.point(a(pr*n(Qn),br)*S,F(pr*c(Qn))*S),on.point(a(ht*n(Qn-Nn/2),nt)*S,F(ht*c(Qn-Nn/2))*S);on.lineEnd(),on.polygonEnd()},$r},At.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function ur(ze,je,nt,ht,Et,At,It,gr){arguments.length<8&&(gr=0);function br(pr,Mr){if(!Mr)return[ze*pr/u,0];var Or=Mr*Mr,$r=ze+Or*(je+Or*(nt+Or*ht)),on=Mr*(Et-1+Or*(At-gr+Or*It)),Sn=($r*$r+on*on)/(2*on),Nn=pr*F($r/Sn)/u;return[Sn*c(Nn),Mr*(1+Or*gr)+Sn*(1-n(Nn))]}return br.invert=function(pr,Mr){var Or=u*pr/ze,$r=Mr,on,Sn,Nn=50;do{var Qn=$r*$r,wa=ze+Qn*(je+Qn*(nt+Qn*ht)),Ma=$r*(Et-1+Qn*(At-gr+Qn*It)),ri=wa*wa+Ma*Ma,Qa=2*Ma,si=ri/Qa,_i=si*si,mo=F(wa/si)/u,fi=Or*mo,to=wa*wa,To=(2*je+Qn*(4*nt+Qn*6*ht))*$r,Io=Et+Qn*(3*At+Qn*5*It),Li=2*(wa*To+Ma*(Io-1)),zi=2*(Io-1),Ps=(Li*Qa-ri*zi)/(Qa*Qa),ko=n(fi),Yo=c(fi),ls=si*ko,le=si*Yo,we=Or/u*(1/D(1-to/_i))*(To*si-wa*Ps)/_i,De=le-pr,Ue=$r*(1+Qn*gr)+si-ls-Mr,Be=Ps*Yo+ls*we,$e=ls*mo,Mt=1+Ps-(Ps*ko-le*we),mt=le*mo,Ot=Be*mt-Mt*$e;if(!Ot)break;Or-=on=(Ue*Be-De*Mt)/Ot,$r-=Sn=(De*mt-Ue*$e)/Ot}while((T(on)>l||T(Sn)>l)&&--Nn>0);return[Or,$r]},br}var wr=ur(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Br(){return f.geoProjection(wr).scale(149.995)}var Yr=ur(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Dr(){return f.geoProjection(Yr).scale(153.93)}var at=ur(5/6*u,-.62636,-.0344,0,1.3493,-.05524,0,.045);function zt(){return f.geoProjection(at).scale(130.945)}function qt(ze,je){var nt=ze*ze,ht=je*je;return[ze*(1-.162388*ht)*(.87-952426e-9*nt*nt),je*(1+ht/12)]}qt.invert=function(ze,je){var nt=ze,ht=je,Et=50,At;do{var It=ht*ht;ht-=At=(ht*(1+It/12)-je)/(1+It/4)}while(T(At)>l&&--Et>0);Et=50,ze/=1-.162388*It;do{var gr=(gr=nt*nt)*gr;nt-=At=(nt*(.87-952426e-9*gr)-ze)/(.87-.00476213*gr)}while(T(At)>l&&--Et>0);return[nt,ht]};function hr(){return f.geoProjection(qt).scale(131.747)}var Ur=ur(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Gr(){return f.geoProjection(Ur).scale(131.087)}function Ir(ze){var je=ze(A,0)[0]-ze(-A,0)[0];function nt(ht,Et){var At=ht>0?-.5:.5,It=ze(ht+At*u,Et);return It[0]-=At*je,It}return ze.invert&&(nt.invert=function(ht,Et){var At=ht>0?-.5:.5,It=ze.invert(ht+At*je,Et),gr=It[0]-At*u;return gr<-u?gr+=2*u:gr>u&&(gr-=2*u),It[0]=gr,It}),nt}function kr(ze,je){var nt=p(ze),ht=p(je),Et=n(je),At=n(ze)*Et,It=c(ze)*Et,gr=c(ht*je);ze=T(a(It,gr)),je=F(At),T(ze-A)>l&&(ze%=A);var br=Kr(ze>u/4?A-ze:ze,je);return ze>u/4&&(gr=br[0],br[0]=-br[1],br[1]=-gr),br[0]*=nt,br[1]*=-ht,br}kr.invert=function(ze,je){T(ze)>1&&(ze=p(ze)*2-ze),T(je)>1&&(je=p(je)*2-je);var nt=p(ze),ht=p(je),Et=-nt*ze,At=-ht*je,It=At/Et<1,gr=kn(It?At:Et,It?Et:At),br=gr[0],pr=gr[1],Mr=n(pr);return It&&(br=-A-br),[nt*(a(c(br)*Mr,-c(pr))+u),ht*F(n(br)*Mr)]};function Kr(ze,je){if(je===A)return[0,0];var nt=c(je),ht=nt*nt,Et=ht*ht,At=1+Et,It=1+3*Et,gr=1-Et,br=F(1/D(At)),pr=gr+ht*At*br,Mr=(1-nt)/pr,Or=D(Mr),$r=Mr*At,on=D($r),Sn=Or*gr,Nn,Qn;if(ze===0)return[0,-(Sn+ht*on)];var wa=n(je),Ma=1/wa,ri=2*nt*wa,Qa=(-3*ht+br*It)*ri,si=(-pr*wa-(1-nt)*Qa)/(pr*pr),_i=.5*si/Or,mo=gr*_i-2*ht*Or*ri,fi=ht*At*si+Mr*It*ri,to=-Ma*ri,To=-Ma*fi,Io=-2*Ma*mo,Li=4*ze/u,zi;if(ze>.222*u||je<u/4&&ze>.175*u){if(Nn=(Sn+ht*D($r*(1+Et)-Sn*Sn))/(1+Et),ze>u/4)return[Nn,Nn];var Ps=Nn,ko=.5*Nn;Nn=.5*(ko+Ps),Qn=50;do{var Yo=D($r-Nn*Nn),ls=Nn*(Io+to*Yo)+To*F(Nn/on)-Li;if(!ls)break;ls<0?ko=Nn:Ps=Nn,Nn=.5*(ko+Ps)}while(T(Ps-ko)>l&&--Qn>0)}else{Nn=l,Qn=25;do{var le=Nn*Nn,we=D($r-le),De=Io+to*we,Ue=Nn*De+To*F(Nn/on)-Li,Be=De+(To-to*le)/we;Nn-=zi=we?Ue/Be:0}while(T(zi)>l&&--Qn>0)}return[Nn,-Sn-ht*D($r-Nn*Nn)]}function kn(ze,je){for(var nt=0,ht=1,Et=.5,At=50;;){var It=Et*Et,gr=D(Et),br=F(1/D(1+It)),pr=1-It+Et*(1+It)*br,Mr=(1-gr)/pr,Or=D(Mr),$r=Mr*(1+It),on=Or*(1-It),Sn=$r-ze*ze,Nn=D(Sn),Qn=je+on+Et*Nn;if(T(ht-nt)<x||--At===0||Qn===0)break;Qn>0?nt=Et:ht=Et,Et=.5*(nt+ht)}if(!At)return null;var wa=F(gr),Ma=n(wa),ri=1/Ma,Qa=2*gr*Ma,si=(-3*Et+br*(1+3*It))*Qa,_i=(-pr*Ma-(1-gr)*si)/(pr*pr),mo=.5*_i/Or,fi=(1-It)*mo-2*Et*Or*Qa,to=-2*ri*fi,To=-ri*Qa,Io=-ri*(Et*(1+It)*_i+Mr*(1+3*It)*Qa);return[u/4*(ze*(to+To*Nn)+Io*F(ze/D($r))),wa]}function yn(){return f.geoProjection(Ir(kr)).scale(239.75)}function Yn(ze,je,nt){var ht,Et,At;return ze?(ht=In(ze,nt),je?(Et=In(je,1-nt),At=Et[1]*Et[1]+nt*ht[0]*ht[0]*Et[0]*Et[0],[[ht[0]*Et[2]/At,ht[1]*ht[2]*Et[0]*Et[1]/At],[ht[1]*Et[1]/At,-ht[0]*ht[2]*Et[0]*Et[2]/At],[ht[2]*Et[1]*Et[2]/At,-nt*ht[0]*ht[1]*Et[0]/At]]):[[ht[0],0],[ht[1],0],[ht[2],0]]):(Et=In(je,1-nt),[[0,Et[0]/Et[1]],[1/Et[1],0],[Et[2]/Et[1],0]])}function In(ze,je){var nt,ht,Et,At,It;if(je<l)return At=c(ze),ht=n(ze),nt=je*(ze-At*ht)/4,[At-nt*ht,ht+nt*At,1-je*At*At/2,ze-nt];if(je>=1-l)return nt=(1-je)/4,ht=z(ze),At=R(ze),Et=1/ht,It=ht*O(ze),[At+nt*(It-ze)/(ht*ht),Et-nt*At*Et*(It-ze),Et+nt*At*Et*(It+ze),2*e(r(ze))-A+nt*(It-ze)/ht];var gr=[1,0,0,0,0,0,0,0,0],br=[D(je),0,0,0,0,0,0,0,0],pr=0;for(ht=D(1-je),It=1;T(br[pr]/gr[pr])>l&&pr<8;)nt=gr[pr++],br[pr]=(nt-ht)/2,gr[pr]=(nt+ht)/2,ht=D(nt*ht),It*=2;Et=It*gr[pr]*ze;do At=br[pr]*c(ht=Et)/gr[pr],Et=(F(At)+Et)/2;while(--pr);return[c(Et),At=n(Et),At/n(Et-ht),Et]}function Jn(ze,je,nt){var ht=T(ze),Et=T(je),At=O(Et);if(ht){var It=1/c(ht),gr=1/(m(ht)*m(ht)),br=-(gr+nt*(At*At*It*It)-1+nt),pr=(nt-1)*gr,Mr=(-br+D(br*br-4*pr))/2;return[Zn(e(1/D(Mr)),nt)*p(ze),Zn(e(D((Mr/gr-1)/nt)),1-nt)*p(je)]}return[0,Zn(e(At),1-nt)*p(je)]}function Zn(ze,je){if(!je)return ze;if(je===1)return h(m(ze/2+_));for(var nt=1,ht=D(1-je),Et=D(je),At=0;T(Et)>l;At++){if(ze%u){var It=e(ht*m(ze)/nt);It<0&&(It+=u),ze+=It+~~(ze/u)*u}else ze+=ze;Et=(nt+ht)/2,ht=D(nt*ht),Et=((nt=Et)-ht)/2}return ze/(y(2,At)*nt)}function ba(ze,je){var nt=(b-1)/(b+1),ht=D(1-nt*nt),Et=Zn(A,ht*ht),At=-1,It=h(m(u/4+T(je)/2)),gr=r(At*It)/D(nt),br=Pa(gr*n(At*ze),gr*c(At*ze)),pr=Jn(br[0],br[1],ht*ht);return[-pr[1],(je>=0?1:-1)*(.5*Et-pr[0])]}function Pa(ze,je){var nt=ze*ze,ht=je+1,Et=1-nt-je*je;return[.5*((ze>=0?A:-A)-a(Et,2*ze)),-.25*h(Et*Et+4*nt)+.5*h(ht*ht+nt)]}function xi(ze,je){var nt=je[0]*je[0]+je[1]*je[1];return[(ze[0]*je[0]+ze[1]*je[1])/nt,(ze[1]*je[0]-ze[0]*je[1])/nt]}ba.invert=function(ze,je){var nt=(b-1)/(b+1),ht=D(1-nt*nt),Et=Zn(A,ht*ht),At=-1,It=Yn(.5*Et-je,-ze,ht*ht),gr=xi(It[0],It[1]),br=a(gr[1],gr[0])/At;return[br,2*e(r(.5/At*h(nt*gr[0]*gr[0]+nt*gr[1]*gr[1])))-A]};function Ka(){return f.geoProjection(Ir(ba)).scale(151.496)}function ti(ze){var je=c(ze),nt=n(ze),ht=$a(ze);ht.invert=$a(-ze);function Et(At,It){var gr=ht(At,It);At=gr[0],It=gr[1];var br=c(It),pr=n(It),Mr=n(At),Or=I(je*br+nt*pr*Mr),$r=c(Or),on=T($r)>l?Or/$r:1;return[on*nt*c(At),(T(At)>A?on:-on)*(je*pr-nt*br*Mr)]}return Et.invert=function(At,It){var gr=D(At*At+It*It),br=-c(gr),pr=n(gr),Mr=gr*pr,Or=-It*br,$r=gr*je,on=D(Mr*Mr+Or*Or-$r*$r),Sn=a(Mr*$r+Or*on,Or*$r-Mr*on),Nn=(gr>A?-1:1)*a(At*br,gr*n(Sn)*pr+It*c(Sn)*br);return ht.invert(Nn,Sn)},Et}function $a(ze){var je=c(ze),nt=n(ze);return function(ht,Et){var At=n(Et),It=n(ht)*At,gr=c(ht)*At,br=c(Et);return[a(gr,It*nt-br*je),F(br*nt+It*je)]}}function Cr(){var ze=0,je=f.geoProjectionMutator(ti),nt=je(ze),ht=nt.rotate,Et=nt.stream,At=f.geoCircle();return nt.parallel=function(It){if(!arguments.length)return ze*S;var gr=nt.rotate();return je(ze=It*k).rotate(gr)},nt.rotate=function(It){return arguments.length?(ht.call(nt,[It[0],It[1]-ze*S]),At.center([-It[0],-It[1]]),nt):(It=ht.call(nt),It[1]+=ze*S,It)},nt.stream=function(It){return It=Et(It),It.sphere=function(){It.polygonStart();var gr=.01,br=At.radius(90-gr)().coordinates[0],pr=br.length-1,Mr=-1,Or;for(It.lineStart();++Mr<pr;)It.point((Or=br[Mr])[0],Or[1]);for(It.lineEnd(),br=At.radius(90+gr)().coordinates[0],pr=br.length-1,It.lineStart();--Mr>=0;)It.point((Or=br[Mr])[0],Or[1]);It.lineEnd(),It.polygonEnd()},It},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var bn=3,gn=F(1-1/bn)*S,Ln=Bt(0);function qn(ze){var je=gn*k,nt=He(u,je)[0]-He(-u,je)[0],ht=Ln(0,je)[1],Et=He(0,je)[1],At=v-Et,It=C/ze,gr=4/C,br=ht+At*At*4/C;function pr(Mr,Or){var $r,on=T(Or);if(on>je){var Sn=s(ze-1,i(0,t((Mr+u)/It)));Mr+=u*(ze-1)/ze-Sn*It,$r=He(Mr,on),$r[0]=$r[0]*C/nt-C*(ze-1)/(2*ze)+Sn*C/ze,$r[1]=ht+($r[1]-Et)*4*At/C,Or<0&&($r[1]=-$r[1])}else $r=Ln(Mr,Or);return $r[0]*=gr,$r[1]/=br,$r}return pr.invert=function(Mr,Or){Mr/=gr,Or*=br;var $r=T(Or);if($r>ht){var on=s(ze-1,i(0,t((Mr+u)/It)));Mr=(Mr+u*(ze-1)/ze-on*It)*nt/C;var Sn=He.invert(Mr,.25*($r-ht)*C/At+Et);return Sn[0]-=u*(ze-1)/ze-on*It,Or<0&&(Sn[1]=-Sn[1]),Sn}return Ln.invert(Mr,Or)},pr}function da(ze,je){return[ze,je&1?90-l:gn]}function oa(ze,je){return[ze,je&1?-90+l:-gn]}function Bn(ze){return[ze[0]*(1-l),ze[1]]}function $n(ze){var je=[].concat(M.range(-180,180+ze/2,ze).map(da),M.range(180,-180-ze/2,-ze).map(oa));return{type:"Polygon",coordinates:[ze===180?je.map(Bn):je]}}function Xa(){var ze=4,je=f.geoProjectionMutator(qn),nt=je(ze),ht=nt.stream;return nt.lobes=function(Et){return arguments.length?je(ze=+Et):ze},nt.stream=function(Et){var At=nt.rotate(),It=ht(Et),gr=(nt.rotate([0,0]),ht(Et));return nt.rotate(At),It.sphere=function(){f.geoStream($n(180/ze),gr)},It},nt.scale(239.75)}function gi(ze){var je=1+ze,nt=c(1/je),ht=F(nt),Et=2*D(u/(At=u+4*ht*je)),At,It=.5*Et*(je+D(ze*(2+ze))),gr=ze*ze,br=je*je;function pr(Mr,Or){var $r=1-c(Or),on,Sn;if($r&&$r<2){var Nn=A-Or,Qn=25,wa;do{var Ma=c(Nn),ri=n(Nn),Qa=ht+a(Ma,je-ri),si=1+br-2*je*ri;Nn-=wa=(Nn-gr*ht-je*Ma+si*Qa-.5*$r*At)/(2*je*Ma*Qa)}while(T(wa)>x&&--Qn>0);on=Et*D(si),Sn=Mr*Qa/u}else on=Et*(ze+$r),Sn=Mr*ht/u;return[on*c(Sn),It-on*n(Sn)]}return pr.invert=function(Mr,Or){var $r=Mr*Mr+(Or-=It)*Or,on=(1+br-$r/(Et*Et))/(2*je),Sn=I(on),Nn=c(Sn),Qn=ht+a(Nn,je-on);return[F(Mr/D($r))*u/Qn,F(1-2*(Sn-gr*ht-je*Nn+(1+br-2*je*on)*Qn)/At)]},pr}function Xt(){var ze=1,je=f.geoProjectionMutator(gi),nt=je(ze);return nt.ratio=function(ht){return arguments.length?je(ze=+ht):ze},nt.scale(167.774).center([0,18.67])}var mr=.7109889596207567,un=.0528035274542;function xn(ze,je){return je>-mr?(ze=Me(ze,je),ze[1]+=un,ze):Fe(ze,je)}xn.invert=function(ze,je){return je>-mr?Me.invert(ze,je-un):Fe.invert(ze,je)};function sn(){return f.geoProjection(xn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Cn(ze,je){return T(je)>mr?(ze=Me(ze,je),ze[1]-=je>0?un:-un,ze):Fe(ze,je)}Cn.invert=function(ze,je){return T(je)>mr?Me.invert(ze,je+(je>0?un:-un)):Fe.invert(ze,je)};function Mn(){return f.geoProjection(Cn).scale(152.63)}function dn(ze,je,nt,ht){var Et=D(4*u/(2*nt+(1+ze-je/2)*c(2*nt)+(ze+je)/2*c(4*nt)+je/2*c(6*nt))),At=D(ht*c(nt)*D((1+ze*n(2*nt)+je*n(4*nt))/(1+ze+je))),It=nt*br(1);function gr(Or){return D(1+ze*n(2*Or)+je*n(4*Or))}function br(Or){var $r=Or*nt;return(2*$r+(1+ze-je/2)*c(2*$r)+(ze+je)/2*c(4*$r)+je/2*c(6*$r))/nt}function pr(Or){return gr(Or)*c(Or)}var Mr=function(Or,$r){var on=nt*be(br,It*c($r)/nt,$r/u);isNaN(on)&&(on=nt*p($r));var Sn=Et*gr(on);return[Sn*At*Or/u*n(on),Sn/At*c(on)]};return Mr.invert=function(Or,$r){var on=be(pr,$r*At/Et);return[Or*u/(n(on)*Et*At*gr(on)),F(nt*br(on/nt)/It)]},nt===0&&(Et=D(ht/u),Mr=function(Or,$r){return[Or*Et,c($r)/Et]},Mr.invert=function(Or,$r){return[Or/Et,F($r*Et)]}),Mr}function Tr(){var ze=1,je=0,nt=45*k,ht=2,Et=f.geoProjectionMutator(dn),At=Et(ze,je,nt,ht);return At.a=function(It){return arguments.length?Et(ze=+It,je,nt,ht):ze},At.b=function(It){return arguments.length?Et(ze,je=+It,nt,ht):je},At.psiMax=function(It){return arguments.length?Et(ze,je,nt=+It*k,ht):nt*S},At.ratio=function(It){return arguments.length?Et(ze,je,nt,ht=+It):ht},At.scale(180.739)}function Ar(ze,je,nt,ht,Et,At,It,gr,br,pr,Mr){if(Mr.nanEncountered)return NaN;var Or,$r,on,Sn,Nn,Qn,wa,Ma,ri,Qa;if(Or=nt-je,$r=ze(je+Or*.25),on=ze(nt-Or*.25),isNaN($r)){Mr.nanEncountered=!0;return}if(isNaN(on)){Mr.nanEncountered=!0;return}return Sn=Or*(ht+4*$r+Et)/12,Nn=Or*(Et+4*on+At)/12,Qn=Sn+Nn,Qa=(Qn-It)/15,pr>br?(Mr.maxDepthCount++,Qn+Qa):Math.abs(Qa)<gr?Qn+Qa:(wa=je+Or*.5,Ma=Ar(ze,je,wa,ht,$r,Et,Sn,gr*.5,br,pr+1,Mr),isNaN(Ma)?(Mr.nanEncountered=!0,NaN):(ri=Ar(ze,wa,nt,Et,on,At,Nn,gr*.5,br,pr+1,Mr),isNaN(ri)?(Mr.nanEncountered=!0,NaN):Ma+ri))}function Hr(ze,je,nt,ht,Et){var At={maxDepthCount:0,nanEncountered:!1};ht===void 0&&(ht=1e-8),Et===void 0&&(Et=20);var It=ze(je),gr=ze(.5*(je+nt)),br=ze(nt),pr=(It+4*gr+br)*(nt-je)/6,Mr=Ar(ze,je,nt,It,gr,br,pr,ht,Et,1,At);return Mr}function wn(ze,je,nt){function ht(on){return ze+(1-ze)*y(1-y(on,je),1/je)}function Et(on){return Hr(ht,0,on,1e-4)}for(var At=1/Et(1),It=1e3,gr=(1+1e-8)*At,br=[],pr=0;pr<=It;pr++)br.push(Et(pr/It)*gr);function Mr(on){var Sn=0,Nn=It,Qn=It>>1;do br[Qn]>on?Nn=Qn:Sn=Qn,Qn=Sn+Nn>>1;while(Qn>Sn);var wa=br[Qn+1]-br[Qn];return wa&&(wa=(on-br[Qn+1])/wa),(Qn+1+wa)/It}var Or=2*Mr(1)/u*At/nt,$r=function(on,Sn){var Nn=Mr(T(c(Sn))),Qn=ht(Nn)*on;return Nn/=Or,[Qn,Sn>=0?Nn:-Nn]};return $r.invert=function(on,Sn){var Nn;return Sn*=Or,T(Sn)<1&&(Nn=p(Sn)*F(Et(T(Sn))*At)),[on/ht(T(Sn)),Nn]},$r}function Gn(){var ze=0,je=2.5,nt=1.183136,ht=f.geoProjectionMutator(wn),Et=ht(ze,je,nt);return Et.alpha=function(At){return arguments.length?ht(ze=+At,je,nt):ze},Et.k=function(At){return arguments.length?ht(ze,je=+At,nt):je},Et.gamma=function(At){return arguments.length?ht(ze,je,nt=+At):nt},Et.scale(152.63)}function sa(ze,je){return T(ze[0]-je[0])<l&&T(ze[1]-je[1])<l}function En(ze,je){for(var nt=-1,ht=ze.length,Et=ze[0],At,It,gr,br=[];++nt<ht;){At=ze[nt],It=(At[0]-Et[0])/je,gr=(At[1]-Et[1])/je;for(var pr=0;pr<je;++pr)br.push([Et[0]+pr*It,Et[1]+pr*gr]);Et=At}return br.push(At),br}function ea(ze){var je=[],nt,ht,Et,At,It,gr,br,pr=ze[0].length;for(br=0;br<pr;++br)nt=ze[0][br],ht=nt[0][0],Et=nt[0][1],At=nt[1][1],It=nt[2][0],gr=nt[2][1],je.push(En([[ht+l,Et+l],[ht+l,At-l],[It-l,At-l],[It-l,gr+l]],30));for(br=ze[1].length-1;br>=0;--br)nt=ze[1][br],ht=nt[0][0],Et=nt[0][1],At=nt[1][1],It=nt[2][0],gr=nt[2][1],je.push(En([[It-l,gr-l],[It-l,At+l],[ht+l,At+l],[ht+l,Et-l]],30));return{type:"Polygon",coordinates:[M.merge(je)]}}function fa(ze,je,nt){var ht,Et;function At(br,pr){for(var Mr=pr<0?-1:1,Or=je[+(pr<0)],$r=0,on=Or.length-1;$r<on&&br>Or[$r][2][0];++$r);var Sn=ze(br-Or[$r][1][0],pr);return Sn[0]+=ze(Or[$r][1][0],Mr*pr>Mr*Or[$r][0][1]?Or[$r][0][1]:pr)[0],Sn}nt?At.invert=nt(At):ze.invert&&(At.invert=function(br,pr){for(var Mr=Et[+(pr<0)],Or=je[+(pr<0)],$r=0,on=Mr.length;$r<on;++$r){var Sn=Mr[$r];if(Sn[0][0]<=br&&br<Sn[1][0]&&Sn[0][1]<=pr&&pr<Sn[1][1]){var Nn=ze.invert(br-ze(Or[$r][1][0],0)[0],pr);return Nn[0]+=Or[$r][1][0],sa(At(Nn[0],Nn[1]),[br,pr])?Nn:null}}});var It=f.geoProjection(At),gr=It.stream;return It.stream=function(br){var pr=It.rotate(),Mr=gr(br),Or=(It.rotate([0,0]),gr(br));return It.rotate(pr),Mr.sphere=function(){f.geoStream(ht,Or)},Mr},It.lobes=function(br){return arguments.length?(ht=ea(br),je=br.map(function(pr){return pr.map(function(Mr){return[[Mr[0][0]*k,Mr[0][1]*k],[Mr[1][0]*k,Mr[1][1]*k],[Mr[2][0]*k,Mr[2][1]*k]]})}),Et=je.map(function(pr){return pr.map(function(Mr){var Or=ze(Mr[0][0],Mr[0][1])[0],$r=ze(Mr[2][0],Mr[2][1])[0],on=ze(Mr[1][0],Mr[0][1])[1],Sn=ze(Mr[1][0],Mr[1][1])[1],Nn;return on>Sn&&(Nn=on,on=Sn,Sn=Nn),[[Or,on],[$r,Sn]]})}),It):je.map(function(pr){return pr.map(function(Mr){return[[Mr[0][0]*S,Mr[0][1]*S],[Mr[1][0]*S,Mr[1][1]*S],[Mr[2][0]*S,Mr[2][1]*S]]})})},je!=null&&It.lobes(je),It}var _a=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Aa(){return fa(Ee,_a).scale(160.857)}var va=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function La(){return fa(Cn,va).scale(152.63)}var So=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Jo(){return fa(Me,So).scale(169.529)}var vs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function kl(){return fa(Me,vs).scale(169.529).rotate([20,0])}var Ul=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function _u(){return fa(xn,Ul,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var wi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function hl(){return fa(Fe,wi).scale(152.63).rotate([-20,0])}function el(ze,je){return[3/C*ze*D(u*u/3-je*je),je]}el.invert=function(ze,je){return[C/3*ze/D(u*u/3-je*je),je]};function qi(){return f.geoProjection(el).scale(158.837)}function No(ze){function je(nt,ht){if(T(T(ht)-A)<l)return[0,ht<0?-2:2];var Et=c(ht),At=y((1+Et)/(1-Et),ze/2),It=.5*(At+1/At)+n(nt*=ze);return[2*c(nt)/It,(At-1/At)/It]}return je.invert=function(nt,ht){var Et=T(ht);if(T(Et-2)<l)return nt?null:[0,p(ht)*A];if(Et>2)return null;nt/=2,ht/=2;var At=nt*nt,It=ht*ht,gr=2*ht/(1+At+It);return gr=y((1+gr)/(1-gr),1/ze),[a(2*nt,1-At-It)/ze,F((gr-1)/(gr+1))]},je}function Hl(){var ze=.5,je=f.geoProjectionMutator(No),nt=je(ze);return nt.spacing=function(ht){return arguments.length?je(ze=+ht):ze},nt.scale(124.75)}var Is=u/b;function Gi(ze,je){return[ze*(1+D(n(je)))/2,je/(n(je/2)*n(ze/6))]}Gi.invert=function(ze,je){var nt=T(ze),ht=T(je),Et=l,At=A;ht<Is?At*=ht/Is:Et+=6*I(Is/ht);for(var It=0;It<25;It++){var gr=c(At),br=D(n(At)),pr=c(At/2),Mr=n(At/2),Or=c(Et/6),$r=n(Et/6),on=.5*Et*(1+br)-nt,Sn=At/(Mr*$r)-ht,Nn=br?-.25*Et*gr/br:0,Qn=.5*(1+br),wa=(1+.5*At*pr/Mr)/(Mr*$r),Ma=At/Mr*(Or/6)/($r*$r),ri=Nn*Ma-wa*Qn,Qa=(on*Ma-Sn*Qn)/ri,si=(Sn*Nn-on*wa)/ri;if(At-=Qa,Et-=si,T(Qa)<l&&T(si)<l)break}return[ze<0?-Et:Et,je<0?-At:At]};function Cl(){return f.geoProjection(Gi).scale(97.2672)}function lo(ze,je){var nt=ze*ze,ht=je*je;return[ze*(.975534+ht*(-.119161+nt*-.0143059+ht*-.0547009)),je*(1.00384+nt*(.0802894+ht*-.02855+nt*199025e-9)+ht*(.0998909+ht*-.0491032))]}lo.invert=function(ze,je){var nt=p(ze)*u,ht=je/2,Et=50;do{var At=nt*nt,It=ht*ht,gr=nt*ht,br=nt*(.975534+It*(-.119161+At*-.0143059+It*-.0547009))-ze,pr=ht*(1.00384+At*(.0802894+It*-.02855+At*199025e-9)+It*(.0998909+It*-.0491032))-je,Mr=.975534-It*(.119161+3*At*.0143059+It*.0547009),Or=-gr*(2*.119161+4*.0547009*It+2*.0143059*At),$r=gr*(2*.0802894+4*199025e-9*At+2*-.02855*It),on=1.00384+At*(.0802894+199025e-9*At)+It*(3*(.0998909-.02855*At)-5*.0491032*It),Sn=Or*$r-on*Mr,Nn=(pr*Or-br*on)/Sn,Qn=(br*$r-pr*Mr)/Sn;nt-=Nn,ht-=Qn}while((T(Nn)>l||T(Qn)>l)&&--Et>0);return Et&&[nt,ht]};function Zi(){return f.geoProjection(lo).scale(139.98)}function yo(ze,je){return[c(ze)/n(je),m(je)*n(ze)]}yo.invert=function(ze,je){var nt=ze*ze,ht=je*je,Et=ht+1,At=nt+Et,It=ze?g*D((At-D(At*At-4*nt))/nt):1/D(Et);return[F(ze*It),p(je)*I(It)]};function uo(){return f.geoProjection(yo).scale(144.049).clipAngle(90-.001)}function ws(ze){var je=n(ze),nt=m(_+ze/2);function ht(Et,At){var It=At-ze,gr=T(It)<l?Et*je:T(gr=_+At/2)<l||T(T(gr)-A)<l?0:Et*It/h(m(gr)/nt);return[gr,It]}return ht.invert=function(Et,At){var It,gr=At+ze;return[T(At)<l?Et/je:T(It=_+gr/2)<l||T(T(It)-A)<l?0:Et*h(m(It)/nt)/At,gr]},ht}function vl(){return Ge(ws).parallel(40).scale(158.837)}function Nu(ze,je){return[ze,1.25*h(m(_+.4*je))]}Nu.invert=function(ze,je){return[ze,2.5*e(r(.8*je))-.625*u]};function ps(){return f.geoProjection(Nu).scale(108.318)}function Bu(ze){var je=ze.length-1;function nt(ht,Et){for(var At=n(Et),It=2/(1+At*n(ht)),gr=It*At*c(ht),br=It*c(Et),pr=je,Mr=ze[pr],Or=Mr[0],$r=Mr[1],on;--pr>=0;)Mr=ze[pr],Or=Mr[0]+gr*(on=Or)-br*$r,$r=Mr[1]+gr*$r+br*on;return Or=gr*(on=Or)-br*$r,$r=gr*$r+br*on,[Or,$r]}return nt.invert=function(ht,Et){var At=20,It=ht,gr=Et;do{for(var br=je,pr=ze[br],Mr=pr[0],Or=pr[1],$r=0,on=0,Sn;--br>=0;)pr=ze[br],$r=Mr+It*(Sn=$r)-gr*on,on=Or+It*on+gr*Sn,Mr=pr[0]+It*(Sn=Mr)-gr*Or,Or=pr[1]+It*Or+gr*Sn;$r=Mr+It*(Sn=$r)-gr*on,on=Or+It*on+gr*Sn,Mr=It*(Sn=Mr)-gr*Or-ht,Or=It*Or+gr*Sn-Et;var Nn=$r*$r+on*on,Qn,wa;It-=Qn=(Mr*$r+Or*on)/Nn,gr-=wa=(Or*$r-Mr*on)/Nn}while(T(Qn)+T(wa)>l*l&&--At>0);if(At){var Ma=D(It*It+gr*gr),ri=2*e(Ma*.5),Qa=c(ri);return[a(It*Qa,Ma*n(ri)),Ma?F(gr*Qa/Ma):0]}},nt}var tl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Bo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],sf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],rl=[[.9245,0],[0,0],[.01943,0]],Vs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function iu(){return Gs(tl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function lf(){return Gs(Bo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function uf(){return Gs(sf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function pl(){return Gs(rl,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function ou(){return Gs(Vs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Gs(ze,je){var nt=f.geoProjection(Bu(ze)).rotate(je).clipAngle(90),ht=f.geoRotation(je),Et=nt.center;return delete nt.rotate,nt.center=function(At){return arguments.length?Et(ht(At)):ht.invert(Et())},nt}var wu=D(6),Ll=D(7);function Tu(ze,je){var nt=F(7*c(je)/(3*wu));return[wu*ze*(2*n(2*nt/3)-1)/Ll,9*c(nt/3)/Ll]}Tu.invert=function(ze,je){var nt=3*F(je*Ll/9);return[ze*Ll/(wu*(2*n(2*nt/3)-1)),F(c(nt)*3*wu/7)]};function Uu(){return f.geoProjection(Tu).scale(164.859)}function su(ze,je){for(var nt=(1+g)*c(je),ht=je,Et=0,At;Et<25&&(ht-=At=(c(ht/2)+c(ht)-nt)/(.5*n(ht/2)+n(ht)),!(T(At)<l));Et++);return[ze*(1+2*n(ht)/n(ht/2))/(3*b),2*D(3)*c(ht/2)/D(2+b)]}su.invert=function(ze,je){var nt=je*D(2+b)/(2*D(3)),ht=2*F(nt);return[3*b*ze/(1+2*n(ht)/n(ht/2)),F((nt+c(ht))/(1+g))]};function ff(){return f.geoProjection(su).scale(188.209)}function dl(ze,je){for(var nt=D(6/(4+u)),ht=(1+u/4)*c(je),Et=je/2,At=0,It;At<25&&(Et-=It=(Et/2+c(Et)-ht)/(.5+n(Et)),!(T(It)<l));At++);return[nt*(.5+n(Et))*ze/1.5,nt*Et]}dl.invert=function(ze,je){var nt=D(6/(4+u)),ht=je/nt;return T(T(ht)-A)<l&&(ht=ht<0?-A:A),[1.5*ze/(nt*(.5+n(ht))),F((ht/2+c(ht))/(1+u/4))]};function Au(){return f.geoProjection(dl).scale(166.518)}function lu(ze,je){var nt=je*je,ht=nt*nt,Et=nt*ht;return[ze*(.84719-.13063*nt+Et*Et*(-.04515+.05494*nt-.02326*ht+.00331*Et)),je*(1.01183+ht*ht*(-.02625+.01926*nt-.00396*ht))]}lu.invert=function(ze,je){var nt=je,ht=25,Et,At,It,gr;do At=nt*nt,It=At*At,nt-=Et=(nt*(1.01183+It*It*(-.02625+.01926*At-.00396*It))-je)/(1.01183+It*It*(9*-.02625+11*.01926*At+13*-.00396*It));while(T(Et)>x&&--ht>0);return At=nt*nt,It=At*At,gr=At*It,[ze/(.84719-.13063*At+gr*gr*(-.04515+.05494*At-.02326*It+.00331*gr)),nt]};function Fs(){return f.geoProjection(lu).scale(175.295)}function Vl(ze,je){return[ze*(1+n(je))/2,2*(je-m(je/2))]}Vl.invert=function(ze,je){for(var nt=je/2,ht=0,Et=1/0;ht<10&&T(Et)>l;++ht){var At=n(je/2);je-=Et=(je-m(je/2)-nt)/(1-.5/(At*At))}return[2*ze/(1+n(je)),je]};function Mu(){return f.geoProjection(Vl).scale(152.63)}var Hu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Vu(){return fa(se(1/0),Hu).rotate([20,0]).scale(152.63)}function uu(ze,je){var nt=c(je),ht=n(je),Et=p(ze);if(ze===0||T(je)===A)return[0,je];if(je===0)return[ze,0];if(T(ze)===A)return[ze*ht,A*nt];var At=u/(2*ze)-2*ze/u,It=2*je/u,gr=(1-It*It)/(nt-It),br=At*At,pr=gr*gr,Mr=1+br/pr,Or=1+pr/br,$r=(At*nt/gr-At/2)/Mr,on=(pr*nt/br+gr/2)/Or,Sn=$r*$r+ht*ht/Mr,Nn=on*on-(pr*nt*nt/br+gr*nt-1)/Or;return[A*($r+D(Sn)*Et),A*(on+D(Nn<0?0:Nn)*p(-je*At)*Et)]}uu.invert=function(ze,je){ze/=A,je/=A;var nt=ze*ze,ht=je*je,Et=nt+ht,At=u*u;return[ze?(Et-1+D((1-Et)*(1-Et)+4*nt))/(2*ze)*A:0,be(function(It){return Et*(u*c(It)-2*It)*u+4*It*It*(je-c(It))+2*u*It-At*je},0)]};function cf(){return f.geoProjection(uu).scale(127.267)}var Gu=1.0148,ds=.23185,Pl=-.14499,Dl=.02406,Su=Gu,zs=5*ds,Uo=7*Pl,fu=9*Dl,Ys=1.790857183;function Ws(ze,je){var nt=je*je;return[ze,je*(Gu+nt*nt*(ds+nt*(Pl+Dl*nt)))]}Ws.invert=function(ze,je){je>Ys?je=Ys:je<-Ys&&(je=-Ys);var nt=je,ht;do{var Et=nt*nt;nt-=ht=(nt*(Gu+Et*Et*(ds+Et*(Pl+Dl*Et)))-je)/(Su+Et*Et*(zs+Et*(Uo+fu*Et)))}while(T(ht)>l);return[ze,nt]};function bo(){return f.geoProjection(Ws).scale(139.319)}function Gl(ze,je){if(T(je)<l)return[ze,0];var nt=m(je),ht=ze*c(je);return[c(ht)/nt,je+(1-n(ht))/nt]}Gl.invert=function(ze,je){if(T(je)<l)return[ze,0];var nt=ze*ze+je*je,ht=je*.5,Et=10,At;do{var It=m(ht),gr=1/n(ht),br=nt-2*je*ht+ht*ht;ht-=At=(It*br+2*(ht-je))/(2+br*gr*gr+2*(ht-je)*It)}while(T(At)>l&&--Et>0);return It=m(ht),[(T(je)<T(ht+1/It)?F(ze*It):p(je)*p(ze)*(I(T(ze*It))+A))/c(ht),ht]};function Yl(){return f.geoProjection(Gl).scale(103.74)}function yl(ze,je){var nt=Rl(ze[1],ze[0]),ht=Rl(je[1],je[0]),Et=jl(nt,ht),At=cu(nt)/cu(ht);return Wl([1,0,ze[0][0],0,1,ze[0][1]],Wl([At,0,0,0,At,0],Wl([n(Et),c(Et),0,-c(Et),n(Et),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function Os(ze){var je=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[je*ze[4],-je*ze[1],je*(ze[1]*ze[5]-ze[2]*ze[4]),-je*ze[3],je*ze[0],je*(ze[2]*ze[3]-ze[0]*ze[5])]}function Wl(ze,je){return[ze[0]*je[0]+ze[1]*je[3],ze[0]*je[1]+ze[1]*je[4],ze[0]*je[2]+ze[1]*je[5]+ze[2],ze[3]*je[0]+ze[4]*je[3],ze[3]*je[1]+ze[4]*je[4],ze[3]*je[2]+ze[4]*je[5]+ze[5]]}function Rl(ze,je){return[ze[0]-je[0],ze[1]-je[1]]}function cu(ze){return D(ze[0]*ze[0]+ze[1]*ze[1])}function jl(ze,je){return a(ze[0]*je[1]-ze[1]*je[0],ze[0]*je[0]+ze[1]*je[1])}function ml(ze,je,nt){ht(ze,{transform:null});function ht(pr,Mr){if(pr.edges=Eu(pr.face),Mr.face){var Or=pr.shared=Cf(pr.face,Mr.face),$r=yl(Or.map(Mr.project),Or.map(pr.project));pr.transform=Mr.transform?Wl(Mr.transform,$r):$r;for(var on=Mr.edges,Sn=0,Nn=on.length;Sn<Nn;++Sn)Ts(Or[0],on[Sn][1])&&Ts(Or[1],on[Sn][0])&&(on[Sn]=pr),Ts(Or[0],on[Sn][0])&&Ts(Or[1],on[Sn][1])&&(on[Sn]=pr);for(on=pr.edges,Sn=0,Nn=on.length;Sn<Nn;++Sn)Ts(Or[0],on[Sn][0])&&Ts(Or[1],on[Sn][1])&&(on[Sn]=Mr),Ts(Or[0],on[Sn][1])&&Ts(Or[1],on[Sn][0])&&(on[Sn]=Mr)}else pr.transform=Mr.transform;return pr.children&&pr.children.forEach(function(Qn){ht(Qn,pr)}),pr}function Et(pr,Mr){var Or=je(pr,Mr),$r=Or.project([pr*S,Mr*S]),on;return(on=Or.transform)?[on[0]*$r[0]+on[1]*$r[1]+on[2],-(on[3]*$r[0]+on[4]*$r[1]+on[5])]:($r[1]=-$r[1],$r)}Il(ze)&&(Et.invert=function(pr,Mr){var Or=At(ze,[pr,-Mr]);return Or&&(Or[0]*=k,Or[1]*=k,Or)});function At(pr,Mr){var Or=pr.project.invert,$r=pr.transform,on=Mr;if($r&&($r=Os($r),on=[$r[0]*on[0]+$r[1]*on[1]+$r[2],$r[3]*on[0]+$r[4]*on[1]+$r[5]]),Or&&pr===It(Sn=Or(on)))return Sn;for(var Sn,Nn=pr.children,Qn=0,wa=Nn&&Nn.length;Qn<wa;++Qn)if(Sn=At(Nn[Qn],Mr))return Sn}function It(pr){return je(pr[0]*k,pr[1]*k)}var gr=f.geoProjection(Et),br=gr.stream;return gr.stream=function(pr){var Mr=gr.rotate(),Or=br(pr),$r=(gr.rotate([0,0]),br(pr));return gr.rotate(Mr),Or.sphere=function(){$r.polygonStart(),$r.lineStart(),hf($r,ze),$r.lineEnd(),$r.polygonEnd()},Or},gr.angle(nt==null?-30:nt*S)}function hf(ze,je,nt){var ht,Et=je.edges,At=Et.length,It,gr={type:"MultiPoint",coordinates:je.face},br=je.face.filter(function(Nn){return T(Nn[1])!==90}),pr=f.geoBounds({type:"MultiPoint",coordinates:br}),Mr=!1,Or=-1,$r=pr[1][0]-pr[0][0],on=$r===180||$r===360?[(pr[0][0]+pr[1][0])/2,(pr[0][1]+pr[1][1])/2]:f.geoCentroid(gr);if(nt)for(;++Or<At&&Et[Or]!==nt;);++Or;for(var Sn=0;Sn<At;++Sn)It=Et[(Sn+Or)%At],Array.isArray(It)?(Mr||(ze.point((ht=f.geoInterpolate(It[0],on)(l))[0],ht[1]),Mr=!0),ze.point((ht=f.geoInterpolate(It[1],on)(l))[0],ht[1])):(Mr=!1,It!==nt&&hf(ze,It,je))}function Ts(ze,je){return ze&&je&&ze[0]===je[0]&&ze[1]===je[1]}function Cf(ze,je){for(var nt,ht,Et=ze.length,At=null,It=0;It<Et;++It){nt=ze[It];for(var gr=je.length;--gr>=0;)if(ht=je[gr],nt[0]===ht[0]&&nt[1]===ht[1]){if(At)return[At,nt];At=nt}}}function Eu(ze){for(var je=ze.length,nt=[],ht=ze[je-1],Et=0;Et<je;++Et)nt.push([ht,ht=ze[Et]]);return nt}function Il(ze){return ze.project.invert||ze.children&&ze.children.some(Il)}var Xl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],xl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(je){return Xl[je]})});function Zl(ze){ze=ze||function(nt){var ht=f.geoCentroid({type:"MultiPoint",coordinates:nt});return f.geoGnomonic().scale(1).translate([0,0]).rotate([-ht[0],-ht[1]])};var je=xl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ht){var Et=je[nt];Et&&(Et.children||(Et.children=[])).push(je[ht])}),ml(je[0],function(nt,ht){return je[nt<-u/2?ht<0?6:4:nt<0?ht<0?2:0:nt<u/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Yu=2/D(3);function Wu(ze,je){var nt=He(ze,je);return[nt[0]*Yu,nt[1]]}Wu.invert=function(ze,je){return He.invert(ze/Yu,je)};function Lf(ze){ze=ze||function(nt){var ht=f.geoCentroid({type:"MultiPoint",coordinates:nt});return f.geoProjection(Wu).translate([0,0]).scale(1).rotate(ht[1]>0?[-ht[0],0]:[180-ht[0],180])};var je=xl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ht){var Et=je[nt];Et&&(Et.children||(Et.children=[])).push(je[ht])}),ml(je[0],function(nt,ht){return je[nt<-u/2?ht<0?6:4:nt<0?ht<0?2:0:nt<u/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Yi(ze){ze=ze||function(It){var gr=It.length===6?f.geoCentroid({type:"MultiPoint",coordinates:It}):It[0];return f.geoGnomonic().scale(1).translate([0,0]).rotate([-gr[0],-gr[1]])};var je=xl.map(function(It){for(var gr=It.map(As),br=gr.length,pr=gr[br-1],Mr,Or=[],$r=0;$r<br;++$r)Mr=gr[$r],Or.push(gs([pr[0]*.9486832980505138+Mr[0]*.31622776601683794,pr[1]*.9486832980505138+Mr[1]*.31622776601683794,pr[2]*.9486832980505138+Mr[2]*.31622776601683794]),gs([Mr[0]*.9486832980505138+pr[0]*.31622776601683794,Mr[1]*.9486832980505138+pr[1]*.31622776601683794,Mr[2]*.9486832980505138+pr[2]*.31622776601683794])),pr=Mr;return Or}),nt=[],ht=[-1,0,0,1,0,1,4,5];je.forEach(function(It,gr){for(var br=xl[gr],pr=br.length,Mr=nt[gr]=[],Or=0;Or<pr;++Or)je.push([br[Or],It[(Or*2+2)%(2*pr)],It[(Or*2+1)%(2*pr)]]),ht.push(gr),Mr.push(bl(As(It[(Or*2+2)%(2*pr)]),As(It[(Or*2+1)%(2*pr)])))});var Et=je.map(function(It){return{project:ze(It),face:It}});ht.forEach(function(It,gr){var br=Et[It];br&&(br.children||(br.children=[])).push(Et[gr])});function At(It,gr){var br=n(gr),pr=[br*n(It),br*c(It),c(gr)],Mr=It<-u/2?gr<0?6:4:It<0?gr<0?2:0:It<u/2?gr<0?3:1:gr<0?7:5,Or=nt[Mr];return Et[Fl(Or[0],pr)<0?8+3*Mr:Fl(Or[1],pr)<0?8+3*Mr+1:Fl(Or[2],pr)<0?8+3*Mr+2:Mr]}return ml(Et[0],At).angle(-30).scale(110.625).center([0,45])}function Fl(ze,je){for(var nt=0,ht=ze.length,Et=0;nt<ht;++nt)Et+=ze[nt]*je[nt];return Et}function bl(ze,je){return[ze[1]*je[2]-ze[2]*je[1],ze[2]*je[0]-ze[0]*je[2],ze[0]*je[1]-ze[1]*je[0]]}function gs(ze){return[a(ze[1],ze[0])*S,F(i(-1,s(1,ze[2])))*S]}function As(ze){var je=ze[0]*k,nt=ze[1]*k,ht=n(nt);return[ht*n(je),ht*c(je),c(nt)]}function Kl(){}function _o(ze){if((nt=ze.length)<4)return!1;for(var je=0,nt,ht=ze[nt-1][1]*ze[0][0]-ze[nt-1][0]*ze[0][1];++je<nt;)ht+=ze[je-1][1]*ze[je][0]-ze[je-1][0]*ze[je][1];return ht<=0}function ju(ze,je){for(var nt=je[0],ht=je[1],Et=!1,At=0,It=ze.length,gr=It-1;At<It;gr=At++){var br=ze[At],pr=br[0],Mr=br[1],Or=ze[gr],$r=Or[0],on=Or[1];Mr>ht^on>ht&&nt<($r-pr)*(ht-Mr)/(on-Mr)+pr&&(Et=!Et)}return Et}function Ms(ze,je){var nt=je.stream,ht;if(!nt)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":ht=al;break;case"FeatureCollection":ht=nl;break;default:ht=Ss;break}return ht(ze,nt)}function nl(ze,je){return{type:"FeatureCollection",features:ze.features.map(function(nt){return al(nt,je)})}}function al(ze,je){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:Ss(ze.geometry,je)}}function js(ze,je){return{type:"GeometryCollection",geometries:ze.geometries.map(function(nt){return Ss(nt,je)})}}function Ss(ze,je){if(!ze)return null;if(ze.type==="GeometryCollection")return js(ze,je);var nt;switch(ze.type){case"Point":nt=Es;break;case"MultiPoint":nt=Es;break;case"LineString":nt=Xu;break;case"MultiLineString":nt=Xu;break;case"Polygon":nt=hu;break;case"MultiPolygon":nt=hu;break;case"Sphere":nt=hu;break;default:return null}return f.geoStream(ze,je(nt)),nt.result()}var eo=[],Ho=[],Es={point:function(ze,je){eo.push([ze,je])},result:function(){var ze=eo.length?eo.length<2?{type:"Point",coordinates:eo[0]}:{type:"MultiPoint",coordinates:eo}:null;return eo=[],ze}},Xu={lineStart:Kl,point:function(ze,je){eo.push([ze,je])},lineEnd:function(){eo.length&&(Ho.push(eo),eo=[])},result:function(){var ze=Ho.length?Ho.length<2?{type:"LineString",coordinates:Ho[0]}:{type:"MultiLineString",coordinates:Ho}:null;return Ho=[],ze}},hu={polygonStart:Kl,lineStart:Kl,point:function(ze,je){eo.push([ze,je])},lineEnd:function(){var ze=eo.length;if(ze){do eo.push(eo[0].slice());while(++ze<4);Ho.push(eo),eo=[]}},polygonEnd:Kl,result:function(){if(!Ho.length)return null;var ze=[],je=[];return Ho.forEach(function(nt){_o(nt)?ze.push([nt]):je.push(nt)}),je.forEach(function(nt){var ht=nt[0];ze.some(function(Et){if(ju(Et[0],ht))return Et.push(nt),!0})||ze.push([nt])}),Ho=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function Zu(ze){var je=ze(A,0)[0]-ze(-A,0)[0];function nt(ht,Et){var At=T(ht)<A,It=ze(At?ht:ht>0?ht-u:ht+u,Et),gr=(It[0]-It[1])*g,br=(It[0]+It[1])*g;if(At)return[gr,br];var pr=je*g,Mr=gr>0^br>0?-1:1;return[Mr*gr-p(br)*pr,Mr*br-p(gr)*pr]}return ze.invert&&(nt.invert=function(ht,Et){var At=(ht+Et)*g,It=(Et-ht)*g,gr=T(At)<.5*je&&T(It)<.5*je;if(!gr){var br=je*g,pr=At>0^It>0?-1:1,Mr=-pr*ht+(It>0?1:-1)*br,Or=-pr*Et+(At>0?1:-1)*br;At=(-Mr-Or)*g,It=(Mr-Or)*g}var $r=ze.invert(At,It);return gr||($r[0]+=At>0?u:-u),$r}),f.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function Tt(){return Zu(kr).scale(176.423)}function Yt(){return Zu(ba).scale(111.48)}function yr(ze,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function nt(pr){var Mr=pr.length,Or=2,$r=new Array(Mr);for($r[0]=+pr[0].toFixed(je),$r[1]=+pr[1].toFixed(je);Or<Mr;)$r[Or]=pr[Or],++Or;return $r}function ht(pr){return pr.map(nt)}function Et(pr){for(var Mr=nt(pr[0]),Or=[Mr],$r=1;$r<pr.length;$r++){var on=nt(pr[$r]);(on.length>2||on[0]!=Mr[0]||on[1]!=Mr[1])&&(Or.push(on),Mr=on)}return Or.length===1&&pr.length>1&&Or.push(nt(pr[pr.length-1])),Or}function At(pr){return pr.map(Et)}function It(pr){if(pr==null)return pr;var Mr;switch(pr.type){case"GeometryCollection":Mr={type:"GeometryCollection",geometries:pr.geometries.map(It)};break;case"Point":Mr={type:"Point",coordinates:nt(pr.coordinates)};break;case"MultiPoint":Mr={type:pr.type,coordinates:ht(pr.coordinates)};break;case"LineString":Mr={type:pr.type,coordinates:Et(pr.coordinates)};break;case"MultiLineString":case"Polygon":Mr={type:pr.type,coordinates:At(pr.coordinates)};break;case"MultiPolygon":Mr={type:"MultiPolygon",coordinates:pr.coordinates.map(At)};break;default:return pr}return pr.bbox!=null&&(Mr.bbox=pr.bbox),Mr}function gr(pr){var Mr={type:"Feature",properties:pr.properties,geometry:It(pr.geometry)};return pr.id!=null&&(Mr.id=pr.id),pr.bbox!=null&&(Mr.bbox=pr.bbox),Mr}if(ze!=null)switch(ze.type){case"Feature":return gr(ze);case"FeatureCollection":{var br={type:"FeatureCollection",features:ze.features.map(gr)};return ze.bbox!=null&&(br.bbox=ze.bbox),br}default:return It(ze)}return ze}function vr(ze){var je=c(ze);function nt(ht,Et){var At=je?m(ht*je/2)/je:ht/2;if(!Et)return[2*At,-ze];var It=2*e(At*c(Et)),gr=1/m(Et);return[c(It)*gr,Et+(1-n(It))*gr-ze]}return nt.invert=function(ht,Et){if(T(Et+=ze)<l)return[je?2*e(je*ht/2)/je:ht,0];var At=ht*ht+Et*Et,It=0,gr=10,br;do{var pr=m(It),Mr=1/n(It),Or=At-2*Et*It+It*It;It-=br=(pr*Or+2*(It-Et))/(2+Or*Mr*Mr+2*(It-Et)*pr)}while(T(br)>l&&--gr>0);var $r=ht*(pr=m(It)),on=m(T(Et)<T(It+1/pr)?F($r)*.5:I($r)*.5+u/4)/c(It);return[je?2*e(je*on)/je:2*on,It]},nt}function Nr(){return Ge(vr).scale(131.215)}var ln=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ln.forEach(function(ze){ze[1]*=1.0144});function _n(ze,je){var nt=s(18,T(je)*36/u),ht=t(nt),Et=nt-ht,At=(Or=ln[ht])[0],It=Or[1],gr=(Or=ln[++ht])[0],br=Or[1],pr=(Or=ln[s(19,++ht)])[0],Mr=Or[1],Or;return[ze*(gr+Et*(pr-At)/2+Et*Et*(pr-2*gr+At)/2),(je>0?A:-A)*(br+Et*(Mr-It)/2+Et*Et*(Mr-2*br+It)/2)]}_n.invert=function(ze,je){var nt=je/A,ht=nt*90,Et=s(18,T(ht/5)),At=i(0,t(Et));do{var It=ln[At][1],gr=ln[At+1][1],br=ln[s(19,At+2)][1],pr=br-It,Mr=br-2*gr+It,Or=2*(T(nt)-gr)/pr,$r=Mr/pr,on=Or*(1-$r*Or*(1-2*$r*Or));if(on>=0||At===1){ht=(je>=0?5:-5)*(on+Et);var Sn=50,Nn;do Et=s(18,T(ht)/5),At=t(Et),on=Et-At,It=ln[At][1],gr=ln[At+1][1],br=ln[s(19,At+2)][1],ht-=(Nn=(je>=0?A:-A)*(gr+on*(br-It)/2+on*on*(br-2*gr+It)/2)-je)*S;while(T(Nn)>x&&--Sn>0);break}}while(--At>=0);var Qn=ln[At][0],wa=ln[At+1][0],Ma=ln[s(19,At+2)][0];return[ze/(wa+on*(Ma-Qn)/2+on*on*(Ma-2*wa+Qn)/2),ht*k]};function Pn(){return f.geoProjection(_n).scale(152.63)}function zn(ze){function je(nt,ht){var Et=n(ht),At=(ze-1)/(ze-Et*n(nt));return[At*Et*c(nt),At*c(ht)]}return je.invert=function(nt,ht){var Et=nt*nt+ht*ht,At=D(Et),It=(ze-D(1-Et*(ze+1)/(ze-1)))/((ze-1)/At+At/(ze-1));return[a(nt*It,At*D(1-It*It)),At?F(ht*It/At):0]},je}function Wn(ze,je){var nt=zn(ze);if(!je)return nt;var ht=n(je),Et=c(je);function At(It,gr){var br=nt(It,gr),pr=br[1],Mr=pr*Et/(ze-1)+ht;return[br[0]*ht/Mr,pr/Mr]}return At.invert=function(It,gr){var br=(ze-1)/(ze-1-gr*Et);return nt.invert(br*It,br*gr*ht)},At}function Tn(){var ze=2,je=0,nt=f.geoProjectionMutator(Wn),ht=nt(ze,je);return ht.distance=function(Et){return arguments.length?nt(ze=+Et,je):ze},ht.tilt=function(Et){return arguments.length?nt(ze,je=Et*k):je*S},ht.scale(432.147).clipAngle(I(1/ze)*S-1e-6)}var Hn=1e-4,On=1e4,Xn=-180,aa=Xn+Hn,Va=180,Ia=Va-Hn,Ga=-90,Ya=Ga+Hn,ra=90,ma=ra-Hn;function Ja(ze){return ze.length>0}function ai(ze){return Math.floor(ze*On)/On}function Mi(ze){return ze===Ga||ze===ra?[0,ze]:[Xn,ai(ze)]}function Si(ze){var je=ze[0],nt=ze[1],ht=!1;return je<=aa?(je=Xn,ht=!0):je>=Ia&&(je=Va,ht=!0),nt<=Ya?(nt=Ga,ht=!0):nt>=ma&&(nt=ra,ht=!0),ht?[je,nt]:ze}function ki(ze){return ze.map(Si)}function Fi(ze,je,nt){for(var ht=0,Et=ze.length;ht<Et;++ht){var At=ze[ht].slice();nt.push({index:-1,polygon:je,ring:At});for(var It=0,gr=At.length;It<gr;++It){var br=At[It],pr=br[0],Mr=br[1];if(pr<=aa||pr>=Ia||Mr<=Ya||Mr>=ma){At[It]=Si(br);for(var Or=It+1;Or<gr;++Or){var $r=At[Or],on=$r[0],Sn=$r[1];if(on>aa&&on<Ia&&Sn>Ya&&Sn<ma)break}if(Or===It+1)continue;if(It){var Nn={index:-1,polygon:je,ring:At.slice(0,It+1)};Nn.ring[Nn.ring.length-1]=Mi(Mr),nt[nt.length-1]=Nn}else nt.pop();if(Or>=gr)break;nt.push({index:-1,polygon:je,ring:At=At.slice(Or-1)}),At[0]=Mi(At[0][1]),It=-1,gr=At.length}}}}function pi(ze){var je,nt=ze.length,ht={},Et={},At,It,gr,br,pr;for(je=0;je<nt;++je){if(At=ze[je],It=At.ring[0],br=At.ring[At.ring.length-1],It[0]===br[0]&&It[1]===br[1]){At.polygon.push(At.ring),ze[je]=null;continue}At.index=je,ht[It]=Et[br]=At}for(je=0;je<nt;++je)if(At=ze[je],At){if(It=At.ring[0],br=At.ring[At.ring.length-1],gr=Et[It],pr=ht[br],delete ht[It],delete Et[br],It[0]===br[0]&&It[1]===br[1]){At.polygon.push(At.ring);continue}gr?(delete Et[It],delete ht[gr.ring[0]],gr.ring.pop(),ze[gr.index]=null,At={index:-1,polygon:gr.polygon,ring:gr.ring.concat(At.ring)},gr===pr?At.polygon.push(At.ring):(At.index=nt++,ze.push(ht[At.ring[0]]=Et[At.ring[At.ring.length-1]]=At))):pr?(delete ht[br],delete Et[pr.ring[pr.ring.length-1]],At.ring.pop(),At={index:nt++,polygon:pr.polygon,ring:At.ring.concat(pr.ring)},ze[pr.index]=null,ze.push(ht[At.ring[0]]=Et[At.ring[At.ring.length-1]]=At)):(At.ring.push(At.ring[0]),At.polygon.push(At.ring))}}function Lo(ze){var je={type:"Feature",geometry:ho(ze.geometry)};return ze.id!=null&&(je.id=ze.id),ze.bbox!=null&&(je.bbox=ze.bbox),ze.properties!=null&&(je.properties=ze.properties),je}function ho(ze){if(ze==null)return ze;var je,nt,ht,Et;switch(ze.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:ze.geometries.map(ho)};break;case"Point":je={type:"Point",coordinates:Si(ze.coordinates)};break;case"MultiPoint":case"LineString":je={type:ze.type,coordinates:ki(ze.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:ze.coordinates.map(ki)};break;case"Polygon":{var At=[];Fi(ze.coordinates,At,nt=[]),pi(nt),je={type:"Polygon",coordinates:At};break}case"MultiPolygon":{nt=[],ht=-1,Et=ze.coordinates.length;for(var It=new Array(Et);++ht<Et;)Fi(ze.coordinates[ht],It[ht]=[],nt);pi(nt),je={type:"MultiPolygon",coordinates:It.filter(Ja)};break}default:return ze}return ze.bbox!=null&&(je.bbox=ze.bbox),je}function ni(ze){if(ze==null)return ze;switch(ze.type){case"Feature":return Lo(ze);case"FeatureCollection":{var je={type:"FeatureCollection",features:ze.features.map(Lo)};return ze.bbox!=null&&(je.bbox=ze.bbox),je}default:return ho(ze)}}function xa(ze,je){var nt=m(je/2),ht=c(_*nt);return[ze*(.74482-.34588*ht*ht),1.70711*nt]}xa.invert=function(ze,je){var nt=je/1.70711,ht=c(_*nt);return[ze/(.74482-.34588*ht*ht),2*e(nt)]};function Ci(){return f.geoProjection(xa).scale(146.153)}function wo(ze,je,nt){var ht=f.geoInterpolate(je,nt),Et=ht(.5),At=f.geoRotation([-Et[0],-Et[1]])(je),It=ht.distance/2,gr=-F(c(At[1]*k)/c(It)),br=[-Et[0],-Et[1],-(At[0]>0?u-gr:gr)*S],pr=f.geoProjection(ze(It)).rotate(br),Mr=f.geoRotation(br),Or=pr.center;return delete pr.rotate,pr.center=function($r){return arguments.length?Or(Mr($r)):Mr.invert(Or())},pr.clipAngle(90)}function Eo(ze){var je=n(ze);function nt(ht,Et){var At=f.geoGnomonicRaw(ht,Et);return At[0]*=je,At}return nt.invert=function(ht,Et){return f.geoGnomonicRaw.invert(ht/je,Et)},nt}function ks(){return Xs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Xs(ze,je){return wo(Eo,ze,je)}function Qo(ze){if(!(ze*=2))return f.geoAzimuthalEquidistantRaw;var je=-ze/2,nt=-je,ht=ze*ze,Et=m(nt),At=.5/c(nt);function It(gr,br){var pr=I(n(br)*n(gr-je)),Mr=I(n(br)*n(gr-nt)),Or=br<0?-1:1;return pr*=pr,Mr*=Mr,[(pr-Mr)/(2*ze),Or*D(4*ht*Mr-(ht-pr+Mr)*(ht-pr+Mr))/(2*ze)]}return It.invert=function(gr,br){var pr=br*br,Mr=n(D(pr+($r=gr+je)*$r)),Or=n(D(pr+($r=gr+nt)*$r)),$r,on;return[a(on=Mr-Or,$r=(Mr+Or)*Et),(br<0?-1:1)*I(D($r*$r+on*on)*At)]},It}function _l(){return Ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ns(ze,je){return wo(Qo,ze,je)}function Cs(ze,je){if(T(je)<l)return[ze,0];var nt=T(je/A),ht=F(nt);if(T(ze)<l||T(T(je)-A)<l)return[0,p(je)*u*m(ht/2)];var Et=n(ht),At=T(u/ze-ze/u)/2,It=At*At,gr=Et/(nt+Et-1),br=gr*(2/nt-1),pr=br*br,Mr=pr+It,Or=gr-pr,$r=It+gr;return[p(ze)*u*(At*Or+D(It*Or*Or-Mr*(gr*gr-pr)))/Mr,p(je)*u*(br*$r-At*D((It+1)*Mr-$r*$r))/Mr]}Cs.invert=function(ze,je){if(T(je)<l)return[ze,0];if(T(ze)<l)return[0,A*c(2*e(je/u))];var nt=(ze/=u)*ze,ht=(je/=u)*je,Et=nt+ht,At=Et*Et,It=-T(je)*(1+Et),gr=It-2*ht+nt,br=-2*It+1+2*ht+At,pr=ht/br+(2*gr*gr*gr/(br*br*br)-9*It*gr/(br*br))/27,Mr=(It-gr*gr/(3*br))/br,Or=2*D(-Mr/3),$r=I(3*pr/(Mr*Or))/3;return[u*(Et-1+D(1+2*(nt-ht)+At))/(2*ze),p(je)*u*(-Or*n($r+u/3)-gr/(3*br))]};function Po(){return f.geoProjection(Cs).scale(79.4183)}function vu(ze,je){if(T(je)<l)return[ze,0];var nt=T(je/A),ht=F(nt);if(T(ze)<l||T(T(je)-A)<l)return[0,p(je)*u*m(ht/2)];var Et=n(ht),At=T(u/ze-ze/u)/2,It=At*At,gr=Et*(D(1+It)-At*Et)/(1+It*nt*nt);return[p(ze)*u*gr,p(je)*u*D(1-gr*(2*At+gr))]}vu.invert=function(ze,je){if(!ze)return[0,A*c(2*e(je/u))];var nt=T(ze/u),ht=(1-nt*nt-(je/=u)*je)/(2*nt),Et=ht*ht,At=D(Et+1);return[p(ze)*u*(At-ht),p(je)*A*c(2*a(D((1-2*ht*nt)*(ht+At)-nt),D(At+ht+nt)))]};function ku(){return f.geoProjection(vu).scale(79.4183)}function Ls(ze,je){if(T(je)<l)return[ze,0];var nt=je/A,ht=F(nt);if(T(ze)<l||T(T(je)-A)<l)return[0,u*m(ht/2)];var Et=(u/ze-ze/u)/2,At=nt/(1+n(ht));return[u*(p(ze)*D(Et*Et+1-At*At)-Et),u*At]}Ls.invert=function(ze,je){if(!je)return[ze,0];var nt=je/u,ht=(u*u*(1-nt*nt)-ze*ze)/(2*u*ze);return[ze?u*(p(ze)*D(ht*ht+1)-ht):0,A*c(2*e(nt))]};function Ku(){return f.geoProjection(Ls).scale(79.4183)}function pu(ze,je){if(!je)return[ze,0];var nt=T(je);if(!ze||nt===A)return[0,je];var ht=nt/A,Et=ht*ht,At=(8*ht-Et*(Et+2)-5)/(2*Et*(ht-1)),It=At*At,gr=ht*At,br=Et+It+2*gr,pr=ht+3*At,Mr=ze/A,Or=Mr+1/Mr,$r=p(T(ze)-A)*D(Or*Or-4),on=$r*$r,Sn=br*(Et+It*on-1)+(1-Et)*(Et*(pr*pr+4*It)+12*gr*It+4*It*It),Nn=($r*(br+It-1)+2*D(Sn))/(4*br+on);return[p(ze)*A*Nn,p(je)*A*D(1+$r*T(Nn)-Nn*Nn)]}pu.invert=function(ze,je){var nt;if(!ze||!je)return[ze,je];je/=u;var ht=p(ze)*ze/A,Et=(ht*ht-1+4*je*je)/T(ht),At=Et*Et,It=2*je,gr=50;do{var br=It*It,pr=(8*It-br*(br+2)-5)/(2*br*(It-1)),Mr=(3*It-br*It-10)/(2*br*It),Or=pr*pr,$r=It*pr,on=It+pr,Sn=on*on,Nn=It+3*pr,Qn=Sn*(br+Or*At-1)+(1-br)*(br*(Nn*Nn+4*Or)+Or*(12*$r+4*Or)),wa=-2*on*(4*$r*Or+(1-4*br+3*br*br)*(1+Mr)+Or*(-6+14*br-At+(-8+8*br-2*At)*Mr)+$r*(-8+12*br+(-10+10*br-At)*Mr)),Ma=D(Qn),ri=Et*(Sn+Or-1)+2*Ma-ht*(4*Sn+At),Qa=Et*(2*pr*Mr+2*on*(1+Mr))+wa/Ma-8*on*(Et*(-1+Or+Sn)+2*Ma)*(1+Mr)/(At+4*Sn);It-=nt=ri/Qa}while(nt>l&&--gr>0);return[p(ze)*(D(Et*Et+4)+Et)*u/4,A*It]};function uc(){return f.geoProjection(pu).scale(127.16)}function vf(ze,je,nt,ht,Et){function At(It,gr){var br=nt*c(ht*gr),pr=D(1-br*br),Mr=D(2/(1+pr*n(It*=Et)));return[ze*pr*Mr*c(It),je*br*Mr]}return At.invert=function(It,gr){var br=It/ze,pr=gr/je,Mr=D(br*br+pr*pr),Or=2*F(Mr/2);return[a(It*m(Or),ze*Mr)/Et,Mr&&F(gr*c(Or)/(je*nt*Mr))/ht]},At}function Ju(ze,je,nt,ht){var Et=u/3;ze=i(ze,l),je=i(je,l),ze=s(ze,A),je=s(je,u-l),nt=i(nt,0),nt=s(nt,100-l),ht=i(ht,l);var At=nt/100+1,It=ht/100,gr=I(At*n(Et))/Et,br=c(ze)/c(gr*A),pr=je/u,Mr=D(It*c(ze/2)/c(je/2)),Or=Mr/D(pr*br*gr),$r=1/(Mr*D(pr*br*gr));return vf(Or,$r,br,gr,pr)}function pf(){var ze=65*k,je=60*k,nt=20,ht=200,Et=f.geoProjectionMutator(Ju),At=Et(ze,je,nt,ht);return At.poleline=function(It){return arguments.length?Et(ze=+It*k,je,nt,ht):ze*S},At.parallels=function(It){return arguments.length?Et(ze,je=+It*k,nt,ht):je*S},At.inflation=function(It){return arguments.length?Et(ze,je,nt=+It,ht):nt},At.ratio=function(It){return arguments.length?Et(ze,je,nt,ht=+It):ht},At.scale(163.775)}function Zs(){return pf().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Pf=4*u+3*D(3),df=2*D(2*u*D(3)/Pf),gf=me(df*D(3)/u,df,Pf/6);function $o(){return f.geoProjection(gf).scale(176.84)}function yf(ze,je){return[ze*D(1-3*je*je/(u*u)),je]}yf.invert=function(ze,je){return[ze/D(1-3*je*je/(u*u)),je]};function Yf(){return f.geoProjection(yf).scale(152.63)}function Bs(ze,je){var nt=n(je),ht=n(ze)*nt,Et=1-ht,At=n(ze=a(c(ze)*nt,-c(je))),It=c(ze);return nt=D(1-ht*ht),[It*nt-At*Et,-At*nt-It*Et]}Bs.invert=function(ze,je){var nt=(ze*ze+je*je)/-2,ht=D(-nt*(2+nt)),Et=je*nt+ze*ht,At=ze*nt-je*ht,It=D(At*At+Et*Et);return[a(ht*Et,It*(1+nt)),It?-F(ht*At/It):0]};function Qu(){return f.geoProjection(Bs).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function $u(ze,je){var nt=j(ze,je);return[(nt[0]+ze/A)/2,(nt[1]+je)/2]}$u.invert=function(ze,je){var nt=ze,ht=je,Et=25;do{var At=n(ht),It=c(ht),gr=c(2*ht),br=It*It,pr=At*At,Mr=c(nt),Or=n(nt/2),$r=c(nt/2),on=$r*$r,Sn=1-pr*Or*Or,Nn=Sn?I(At*Or)*D(Qn=1/Sn):Qn=0,Qn,wa=.5*(2*Nn*At*$r+nt/A)-ze,Ma=.5*(Nn*It+ht)-je,ri=.5*Qn*(pr*on+Nn*At*Or*br)+.5/A,Qa=Qn*(Mr*gr/4-Nn*It*$r),si=.125*Qn*(gr*$r-Nn*It*pr*Mr),_i=.5*Qn*(br*Or+Nn*on*At)+.5,mo=Qa*si-_i*ri,fi=(Ma*Qa-wa*_i)/mo,to=(wa*si-Ma*ri)/mo;nt-=fi,ht-=to}while((T(fi)>l||T(to)>l)&&--Et>0);return[nt,ht]};function mf(){return f.geoProjection($u).scale(158.837)}w.geoNaturalEarth=f.geoNaturalEarth1,w.geoNaturalEarthRaw=f.geoNaturalEarth1Raw,w.geoAiry=X,w.geoAiryRaw=Q,w.geoAitoff=re,w.geoAitoffRaw=j,w.geoArmadillo=K,w.geoArmadilloRaw=ue,w.geoAugust=Y,w.geoAugustRaw=te,w.geoBaker=Z,w.geoBakerRaw=ne,w.geoBerghaus=ie,w.geoBerghausRaw=q,w.geoBertin1953=ye,w.geoBertin1953Raw=de,w.geoBoggs=Ze,w.geoBoggsRaw=Ee,w.geoBonne=xt,w.geoBonneRaw=We,w.geoBottomley=tr,w.geoBottomleyRaw=Nt,w.geoBromley=Pt,w.geoBromleyRaw=Vt,w.geoChamberlin=Ae,w.geoChamberlinRaw=Ye,w.geoChamberlinAfrica=Ve,w.geoCollignon=Je,w.geoCollignonRaw=He,w.geoCraig=St,w.geoCraigRaw=tt,w.geoCraster=jt,w.geoCrasterRaw=kt,w.geoCylindricalEqualArea=Wt,w.geoCylindricalEqualAreaRaw=Bt,w.geoCylindricalStereographic=Zt,w.geoCylindricalStereographicRaw=Qt,w.geoEckert1=Xr,w.geoEckert1Raw=cr,w.geoEckert2=en,w.geoEckert2Raw=vn,w.geoEckert3=ar,w.geoEckert3Raw=ft,w.geoEckert4=Kt,w.geoEckert4Raw=rr,w.geoEckert5=st,w.geoEckert5Raw=Er,w.geoEckert6=vt,w.geoEckert6Raw=et,w.geoEisenlohr=Ht,w.geoEisenlohrRaw=Ct,w.geoFahey=lt,w.geoFaheyRaw=ke,w.geoFoucaut=yt,w.geoFoucautRaw=ct,w.geoFoucautSinusoidal=wt,w.geoFoucautSinusoidalRaw=Rt,w.geoGilbert=fr,w.geoGingery=Jr,w.geoGingeryRaw=Rr,w.geoGinzburg4=Br,w.geoGinzburg4Raw=wr,w.geoGinzburg5=Dr,w.geoGinzburg5Raw=Yr,w.geoGinzburg6=zt,w.geoGinzburg6Raw=at,w.geoGinzburg8=hr,w.geoGinzburg8Raw=qt,w.geoGinzburg9=Gr,w.geoGinzburg9Raw=Ur,w.geoGringorten=yn,w.geoGringortenRaw=kr,w.geoGuyou=Ka,w.geoGuyouRaw=ba,w.geoHammer=oe,w.geoHammerRaw=se,w.geoHammerRetroazimuthal=Cr,w.geoHammerRetroazimuthalRaw=ti,w.geoHealpix=Xa,w.geoHealpixRaw=qn,w.geoHill=Xt,w.geoHillRaw=gi,w.geoHomolosine=Mn,w.geoHomolosineRaw=Cn,w.geoHufnagel=Tr,w.geoHufnagelRaw=dn,w.geoHyperelliptical=Gn,w.geoHyperellipticalRaw=wn,w.geoInterrupt=fa,w.geoInterruptedBoggs=Aa,w.geoInterruptedHomolosine=La,w.geoInterruptedMollweide=Jo,w.geoInterruptedMollweideHemispheres=kl,w.geoInterruptedSinuMollweide=_u,w.geoInterruptedSinusoidal=hl,w.geoKavrayskiy7=qi,w.geoKavrayskiy7Raw=el,w.geoLagrange=Hl,w.geoLagrangeRaw=No,w.geoLarrivee=Cl,w.geoLarriveeRaw=Gi,w.geoLaskowski=Zi,w.geoLaskowskiRaw=lo,w.geoLittrow=uo,w.geoLittrowRaw=yo,w.geoLoximuthal=vl,w.geoLoximuthalRaw=ws,w.geoMiller=ps,w.geoMillerRaw=Nu,w.geoModifiedStereographic=Gs,w.geoModifiedStereographicRaw=Bu,w.geoModifiedStereographicAlaska=iu,w.geoModifiedStereographicGs48=lf,w.geoModifiedStereographicGs50=uf,w.geoModifiedStereographicMiller=pl,w.geoModifiedStereographicLee=ou,w.geoMollweide=Le,w.geoMollweideRaw=Me,w.geoMtFlatPolarParabolic=Uu,w.geoMtFlatPolarParabolicRaw=Tu,w.geoMtFlatPolarQuartic=ff,w.geoMtFlatPolarQuarticRaw=su,w.geoMtFlatPolarSinusoidal=Au,w.geoMtFlatPolarSinusoidalRaw=dl,w.geoNaturalEarth2=Fs,w.geoNaturalEarth2Raw=lu,w.geoNellHammer=Mu,w.geoNellHammerRaw=Vl,w.geoInterruptedQuarticAuthalic=Vu,w.geoNicolosi=cf,w.geoNicolosiRaw=uu,w.geoPatterson=bo,w.geoPattersonRaw=Ws,w.geoPolyconic=Yl,w.geoPolyconicRaw=Gl,w.geoPolyhedral=ml,w.geoPolyhedralButterfly=Zl,w.geoPolyhedralCollignon=Lf,w.geoPolyhedralWaterman=Yi,w.geoProject=Ms,w.geoGringortenQuincuncial=Tt,w.geoPeirceQuincuncial=Yt,w.geoPierceQuincuncial=Yt,w.geoQuantize=yr,w.geoQuincuncial=Zu,w.geoRectangularPolyconic=Nr,w.geoRectangularPolyconicRaw=vr,w.geoRobinson=Pn,w.geoRobinsonRaw=_n,w.geoSatellite=Tn,w.geoSatelliteRaw=Wn,w.geoSinuMollweide=sn,w.geoSinuMollweideRaw=xn,w.geoSinusoidal=Re,w.geoSinusoidalRaw=Fe,w.geoStitch=ni,w.geoTimes=Ci,w.geoTimesRaw=xa,w.geoTwoPointAzimuthal=Xs,w.geoTwoPointAzimuthalRaw=Eo,w.geoTwoPointAzimuthalUsa=ks,w.geoTwoPointEquidistant=Ns,w.geoTwoPointEquidistantRaw=Qo,w.geoTwoPointEquidistantUsa=_l,w.geoVanDerGrinten=Po,w.geoVanDerGrintenRaw=Cs,w.geoVanDerGrinten2=ku,w.geoVanDerGrinten2Raw=vu,w.geoVanDerGrinten3=Ku,w.geoVanDerGrinten3Raw=Ls,w.geoVanDerGrinten4=uc,w.geoVanDerGrinten4Raw=pu,w.geoWagner=pf,w.geoWagner7=Zs,w.geoWagnerRaw=Ju,w.geoWagner4=$o,w.geoWagner4Raw=gf,w.geoWagner6=Yf,w.geoWagner6Raw=yf,w.geoWiechel=Qu,w.geoWiechelRaw=Bs,w.geoWinkel3=mf,w.geoWinkel3Raw=$u,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-array")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(Tt){a(e,Tt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(Tt,Yt,yr){var vr=Tt.s=Yt+yr,Nr=vr-Yt,ln=vr-Nr;Tt.t=Yt-ln+(yr-Nr)}var n=1e-6,r=1e-12,t=Math.PI,h=t/2,i=t/4,s=t*2,y=180/t,d=t/180,p=Math.abs,c=Math.atan,m=Math.atan2,l=Math.cos,x=Math.ceil,u=Math.exp,A=Math.log,_=Math.pow,g=Math.sin,b=Math.sign||function(Tt){return Tt>0?1:Tt<0?-1:0},v=Math.sqrt,C=Math.tan;function S(Tt){return Tt>1?0:Tt<-1?t:Math.acos(Tt)}function k(Tt){return Tt>1?h:Tt<-1?-h:Math.asin(Tt)}function E(Tt){return(Tt=g(Tt/2))*Tt}function F(){}function I(Tt,Yt){Tt&&R.hasOwnProperty(Tt.type)&&R[Tt.type](Tt,Yt)}var D={Feature:function(Tt,Yt){I(Tt.geometry,Yt)},FeatureCollection:function(Tt,Yt){for(var yr=Tt.features,vr=-1,Nr=yr.length;++vr<Nr;)I(yr[vr].geometry,Yt)}},R={Sphere:function(Tt,Yt){Yt.sphere()},Point:function(Tt,Yt){Tt=Tt.coordinates,Yt.point(Tt[0],Tt[1],Tt[2])},MultiPoint:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)Tt=yr[vr],Yt.point(Tt[0],Tt[1],Tt[2])},LineString:function(Tt,Yt){O(Tt.coordinates,Yt,0)},MultiLineString:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)O(yr[vr],Yt,0)},Polygon:function(Tt,Yt){z(Tt.coordinates,Yt)},MultiPolygon:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)z(yr[vr],Yt)},GeometryCollection:function(Tt,Yt){for(var yr=Tt.geometries,vr=-1,Nr=yr.length;++vr<Nr;)I(yr[vr],Yt)}};function O(Tt,Yt,yr){var vr=-1,Nr=Tt.length-yr,ln;for(Yt.lineStart();++vr<Nr;)ln=Tt[vr],Yt.point(ln[0],ln[1],ln[2]);Yt.lineEnd()}function z(Tt,Yt){var yr=-1,vr=Tt.length;for(Yt.polygonStart();++yr<vr;)O(Tt[yr],Yt,1);Yt.polygonEnd()}function B(Tt,Yt){Tt&&D.hasOwnProperty(Tt.type)?D[Tt.type](Tt,Yt):I(Tt,Yt)}var G=M(),Q=M(),X,j,re,ue,K,te={point:F,lineStart:F,lineEnd:F,polygonStart:function(){G.reset(),te.lineStart=Y,te.lineEnd=V},polygonEnd:function(){var Tt=+G;Q.add(Tt<0?s+Tt:Tt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){Q.add(s)}};function Y(){te.point=ee}function V(){ne(X,j)}function ee(Tt,Yt){te.point=ne,X=Tt,j=Yt,Tt*=d,Yt*=d,re=Tt,ue=l(Yt=Yt/2+i),K=g(Yt)}function ne(Tt,Yt){Tt*=d,Yt*=d,Yt=Yt/2+i;var yr=Tt-re,vr=yr>=0?1:-1,Nr=vr*yr,ln=l(Yt),_n=g(Yt),Pn=K*_n,zn=ue*ln+Pn*l(Nr),Wn=Pn*vr*g(Nr);G.add(m(Wn,zn)),re=Tt,ue=ln,K=_n}function Z(Tt){return Q.reset(),B(Tt,te),Q*2}function q(Tt){return[m(Tt[1],Tt[0]),k(Tt[2])]}function ie(Tt){var Yt=Tt[0],yr=Tt[1],vr=l(yr);return[vr*l(Yt),vr*g(Yt),g(yr)]}function se(Tt,Yt){return Tt[0]*Yt[0]+Tt[1]*Yt[1]+Tt[2]*Yt[2]}function ae(Tt,Yt){return[Tt[1]*Yt[2]-Tt[2]*Yt[1],Tt[2]*Yt[0]-Tt[0]*Yt[2],Tt[0]*Yt[1]-Tt[1]*Yt[0]]}function oe(Tt,Yt){Tt[0]+=Yt[0],Tt[1]+=Yt[1],Tt[2]+=Yt[2]}function be(Tt,Yt){return[Tt[0]*Yt,Tt[1]*Yt,Tt[2]*Yt]}function ce(Tt){var Yt=v(Tt[0]*Tt[0]+Tt[1]*Tt[1]+Tt[2]*Tt[2]);Tt[0]/=Yt,Tt[1]/=Yt,Tt[2]/=Yt}var de,ye,ge,me,Me,Le,Oe,_e,Ee=M(),Ze,Ge,Fe={point:Re,lineStart:xt,lineEnd:Nt,polygonStart:function(){Fe.point=tr,Fe.lineStart=Vt,Fe.lineEnd=Pt,Ee.reset(),te.polygonStart()},polygonEnd:function(){te.polygonEnd(),Fe.point=Re,Fe.lineStart=xt,Fe.lineEnd=Nt,G<0?(de=-(ge=180),ye=-(me=90)):Ee>n?me=90:Ee<-n&&(ye=-90),Ge[0]=de,Ge[1]=ge},sphere:function(){de=-(ge=180),ye=-(me=90)}};function Re(Tt,Yt){Ze.push(Ge=[de=Tt,ge=Tt]),Yt<ye&&(ye=Yt),Yt>me&&(me=Yt)}function We(Tt,Yt){var yr=ie([Tt*d,Yt*d]);if(_e){var vr=ae(_e,yr),Nr=[vr[1],-vr[0],0],ln=ae(Nr,vr);ce(ln),ln=q(ln);var _n=Tt-Me,Pn=_n>0?1:-1,zn=ln[0]*y*Pn,Wn,Tn=p(_n)>180;Tn^(Pn*Me<zn&&zn<Pn*Tt)?(Wn=ln[1]*y,Wn>me&&(me=Wn)):(zn=(zn+360)%360-180,Tn^(Pn*Me<zn&&zn<Pn*Tt)?(Wn=-ln[1]*y,Wn<ye&&(ye=Wn)):(Yt<ye&&(ye=Yt),Yt>me&&(me=Yt))),Tn?Tt<Me?$t(de,Tt)>$t(de,ge)&&(ge=Tt):$t(Tt,ge)>$t(de,ge)&&(de=Tt):ge>=de?(Tt<de&&(de=Tt),Tt>ge&&(ge=Tt)):Tt>Me?$t(de,Tt)>$t(de,ge)&&(ge=Tt):$t(Tt,ge)>$t(de,ge)&&(de=Tt)}else Ze.push(Ge=[de=Tt,ge=Tt]);Yt<ye&&(ye=Yt),Yt>me&&(me=Yt),_e=yr,Me=Tt}function xt(){Fe.point=We}function Nt(){Ge[0]=de,Ge[1]=ge,Fe.point=Re,_e=null}function tr(Tt,Yt){if(_e){var yr=Tt-Me;Ee.add(p(yr)>180?yr+(yr>0?360:-360):yr)}else Le=Tt,Oe=Yt;te.point(Tt,Yt),We(Tt,Yt)}function Vt(){te.lineStart()}function Pt(){tr(Le,Oe),te.lineEnd(),p(Ee)>n&&(de=-(ge=180)),Ge[0]=de,Ge[1]=ge,_e=null}function $t(Tt,Yt){return(Yt-=Tt)<0?Yt+360:Yt}function Ut(Tt,Yt){return Tt[0]-Yt[0]}function Lt(Tt,Yt){return Tt[0]<=Tt[1]?Tt[0]<=Yt&&Yt<=Tt[1]:Yt<Tt[0]||Tt[1]<Yt}function Ye(Tt){var Yt,yr,vr,Nr,ln,_n,Pn;if(me=ge=-(de=ye=1/0),Ze=[],B(Tt,Fe),yr=Ze.length){for(Ze.sort(Ut),Yt=1,vr=Ze[0],ln=[vr];Yt<yr;++Yt)Nr=Ze[Yt],Lt(vr,Nr[0])||Lt(vr,Nr[1])?($t(vr[0],Nr[1])>$t(vr[0],vr[1])&&(vr[1]=Nr[1]),$t(Nr[0],vr[1])>$t(vr[0],vr[1])&&(vr[0]=Nr[0])):ln.push(vr=Nr);for(_n=-1/0,yr=ln.length-1,Yt=0,vr=ln[yr];Yt<=yr;vr=Nr,++Yt)Nr=ln[Yt],(Pn=$t(vr[1],Nr[0]))>_n&&(_n=Pn,de=Nr[0],ge=vr[1])}return Ze=Ge=null,de===1/0||ye===1/0?[[NaN,NaN],[NaN,NaN]]:[[de,ye],[ge,me]]}var ot,Ve,Ae,He,Je,tt,St,_t,kt,jt,Bt,Wt,Qt,Zt,cr,Xr,vn={sphere:F,point:en,lineStart:ar,lineEnd:Er,polygonStart:function(){vn.lineStart=st,vn.lineEnd=et},polygonEnd:function(){vn.lineStart=ar,vn.lineEnd=Er}};function en(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt);ft(yr*l(Tt),yr*g(Tt),g(Yt))}function ft(Tt,Yt,yr){++ot,Ae+=(Tt-Ae)/ot,He+=(Yt-He)/ot,Je+=(yr-Je)/ot}function ar(){vn.point=rr}function rr(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt);Zt=yr*l(Tt),cr=yr*g(Tt),Xr=g(Yt),vn.point=Kt,ft(Zt,cr,Xr)}function Kt(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt),vr=yr*l(Tt),Nr=yr*g(Tt),ln=g(Yt),_n=m(v((_n=cr*ln-Xr*Nr)*_n+(_n=Xr*vr-Zt*ln)*_n+(_n=Zt*Nr-cr*vr)*_n),Zt*vr+cr*Nr+Xr*ln);Ve+=_n,tt+=_n*(Zt+(Zt=vr)),St+=_n*(cr+(cr=Nr)),_t+=_n*(Xr+(Xr=ln)),ft(Zt,cr,Xr)}function Er(){vn.point=en}function st(){vn.point=vt}function et(){pt(Wt,Qt),vn.point=en}function vt(Tt,Yt){Wt=Tt,Qt=Yt,Tt*=d,Yt*=d,vn.point=pt;var yr=l(Yt);Zt=yr*l(Tt),cr=yr*g(Tt),Xr=g(Yt),ft(Zt,cr,Xr)}function pt(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt),vr=yr*l(Tt),Nr=yr*g(Tt),ln=g(Yt),_n=cr*ln-Xr*Nr,Pn=Xr*vr-Zt*ln,zn=Zt*Nr-cr*vr,Wn=v(_n*_n+Pn*Pn+zn*zn),Tn=k(Wn),Hn=Wn&&-Tn/Wn;kt+=Hn*_n,jt+=Hn*Pn,Bt+=Hn*zn,Ve+=Tn,tt+=Tn*(Zt+(Zt=vr)),St+=Tn*(cr+(cr=Nr)),_t+=Tn*(Xr+(Xr=ln)),ft(Zt,cr,Xr)}function Ct(Tt){ot=Ve=Ae=He=Je=tt=St=_t=kt=jt=Bt=0,B(Tt,vn);var Yt=kt,yr=jt,vr=Bt,Nr=Yt*Yt+yr*yr+vr*vr;return Nr<r&&(Yt=tt,yr=St,vr=_t,Ve<n&&(Yt=Ae,yr=He,vr=Je),Nr=Yt*Yt+yr*yr+vr*vr,Nr<r)?[NaN,NaN]:[m(yr,Yt)*y,k(vr/v(Nr))*y]}function Ht(Tt){return function(){return Tt}}function Pe(Tt,Yt){function yr(vr,Nr){return vr=Tt(vr,Nr),Yt(vr[0],vr[1])}return Tt.invert&&Yt.invert&&(yr.invert=function(vr,Nr){return vr=Yt.invert(vr,Nr),vr&&Tt.invert(vr[0],vr[1])}),yr}function ke(Tt,Yt){return[p(Tt)>t?Tt+Math.round(-Tt/s)*s:Tt,Yt]}ke.invert=ke;function lt(Tt,Yt,yr){return(Tt%=s)?Yt||yr?Pe(yt(Tt),Rt(Yt,yr)):yt(Tt):Yt||yr?Rt(Yt,yr):ke}function ct(Tt){return function(Yt,yr){return Yt+=Tt,[Yt>t?Yt-s:Yt<-t?Yt+s:Yt,yr]}}function yt(Tt){var Yt=ct(Tt);return Yt.invert=ct(-Tt),Yt}function Rt(Tt,Yt){var yr=l(Tt),vr=g(Tt),Nr=l(Yt),ln=g(Yt);function _n(Pn,zn){var Wn=l(zn),Tn=l(Pn)*Wn,Hn=g(Pn)*Wn,On=g(zn),Xn=On*yr+Tn*vr;return[m(Hn*Nr-Xn*ln,Tn*yr-On*vr),k(Xn*Nr+Hn*ln)]}return _n.invert=function(Pn,zn){var Wn=l(zn),Tn=l(Pn)*Wn,Hn=g(Pn)*Wn,On=g(zn),Xn=On*Nr-Hn*ln;return[m(Hn*Nr+On*ln,Tn*yr+Xn*vr),k(Xn*yr-Tn*vr)]},_n}function wt(Tt){Tt=lt(Tt[0]*d,Tt[1]*d,Tt.length>2?Tt[2]*d:0);function Yt(yr){return yr=Tt(yr[0]*d,yr[1]*d),yr[0]*=y,yr[1]*=y,yr}return Yt.invert=function(yr){return yr=Tt.invert(yr[0]*d,yr[1]*d),yr[0]*=y,yr[1]*=y,yr},Yt}function Dt(Tt,Yt,yr,vr,Nr,ln){if(!!yr){var _n=l(Yt),Pn=g(Yt),zn=vr*yr;Nr==null?(Nr=Yt+vr*s,ln=Yt-zn/2):(Nr=Jt(_n,Nr),ln=Jt(_n,ln),(vr>0?Nr<ln:Nr>ln)&&(Nr+=vr*s));for(var Wn,Tn=Nr;vr>0?Tn>ln:Tn<ln;Tn-=zn)Wn=q([_n,-Pn*l(Tn),-Pn*g(Tn)]),Tt.point(Wn[0],Wn[1])}}function Jt(Tt,Yt){Yt=ie(Yt),Yt[0]-=Tt,ce(Yt);var yr=S(-Yt[1]);return((-Yt[2]<0?-yr:yr)+s-n)%s}function fr(){var Tt=Ht([0,0]),Yt=Ht(90),yr=Ht(6),vr,Nr,ln={point:_n};function _n(zn,Wn){vr.push(zn=Nr(zn,Wn)),zn[0]*=y,zn[1]*=y}function Pn(){var zn=Tt.apply(this,arguments),Wn=Yt.apply(this,arguments)*d,Tn=yr.apply(this,arguments)*d;return vr=[],Nr=lt(-zn[0]*d,-zn[1]*d,0).invert,Dt(ln,Wn,Tn,1),zn={type:"Polygon",coordinates:[vr]},vr=Nr=null,zn}return Pn.center=function(zn){return arguments.length?(Tt=typeof zn=="function"?zn:Ht([+zn[0],+zn[1]]),Pn):Tt},Pn.radius=function(zn){return arguments.length?(Yt=typeof zn=="function"?zn:Ht(+zn),Pn):Yt},Pn.precision=function(zn){return arguments.length?(yr=typeof zn=="function"?zn:Ht(+zn),Pn):yr},Pn}function Rr(){var Tt=[],Yt;return{point:function(yr,vr,Nr){Yt.push([yr,vr,Nr])},lineStart:function(){Tt.push(Yt=[])},lineEnd:F,rejoin:function(){Tt.length>1&&Tt.push(Tt.pop().concat(Tt.shift()))},result:function(){var yr=Tt;return Tt=[],Yt=null,yr}}}function Sr(Tt,Yt){return p(Tt[0]-Yt[0])<n&&p(Tt[1]-Yt[1])<n}function Pr(Tt,Yt,yr,vr){this.x=Tt,this.z=Yt,this.o=yr,this.e=vr,this.v=!1,this.n=this.p=null}function Jr(Tt,Yt,yr,vr,Nr){var ln=[],_n=[],Pn,zn;if(Tt.forEach(function(aa){if(!((Va=aa.length-1)<=0)){var Va,Ia=aa[0],Ga=aa[Va],Ya;if(Sr(Ia,Ga)){if(!Ia[2]&&!Ga[2]){for(Nr.lineStart(),Pn=0;Pn<Va;++Pn)Nr.point((Ia=aa[Pn])[0],Ia[1]);Nr.lineEnd();return}Ga[0]+=2*n}ln.push(Ya=new Pr(Ia,aa,null,!0)),_n.push(Ya.o=new Pr(Ia,null,Ya,!1)),ln.push(Ya=new Pr(Ga,aa,null,!1)),_n.push(Ya.o=new Pr(Ga,null,Ya,!0))}}),!!ln.length){for(_n.sort(Yt),ur(ln),ur(_n),Pn=0,zn=_n.length;Pn<zn;++Pn)_n[Pn].e=yr=!yr;for(var Wn=ln[0],Tn,Hn;;){for(var On=Wn,Xn=!0;On.v;)if((On=On.n)===Wn)return;Tn=On.z,Nr.lineStart();do{if(On.v=On.o.v=!0,On.e){if(Xn)for(Pn=0,zn=Tn.length;Pn<zn;++Pn)Nr.point((Hn=Tn[Pn])[0],Hn[1]);else vr(On.x,On.n.x,1,Nr);On=On.n}else{if(Xn)for(Tn=On.p.z,Pn=Tn.length-1;Pn>=0;--Pn)Nr.point((Hn=Tn[Pn])[0],Hn[1]);else vr(On.x,On.p.x,-1,Nr);On=On.p}On=On.o,Tn=On.z,Xn=!Xn}while(!On.v);Nr.lineEnd()}}}function ur(Tt){if(!!(Yt=Tt.length)){for(var Yt,yr=0,vr=Tt[0],Nr;++yr<Yt;)vr.n=Nr=Tt[yr],Nr.p=vr,vr=Nr;vr.n=Nr=Tt[0],Nr.p=vr}}var wr=M();function Br(Tt){return p(Tt[0])<=t?Tt[0]:b(Tt[0])*((p(Tt[0])+t)%s-t)}function Yr(Tt,Yt){var yr=Br(Yt),vr=Yt[1],Nr=g(vr),ln=[g(yr),-l(yr),0],_n=0,Pn=0;wr.reset(),Nr===1?vr=h+n:Nr===-1&&(vr=-h-n);for(var zn=0,Wn=Tt.length;zn<Wn;++zn)if(!!(Hn=(Tn=Tt[zn]).length))for(var Tn,Hn,On=Tn[Hn-1],Xn=Br(On),aa=On[1]/2+i,Va=g(aa),Ia=l(aa),Ga=0;Ga<Hn;++Ga,Xn=ra,Va=Ja,Ia=ai,On=Ya){var Ya=Tn[Ga],ra=Br(Ya),ma=Ya[1]/2+i,Ja=g(ma),ai=l(ma),Mi=ra-Xn,Si=Mi>=0?1:-1,ki=Si*Mi,Fi=ki>t,pi=Va*Ja;if(wr.add(m(pi*Si*g(ki),Ia*ai+pi*l(ki))),_n+=Fi?Mi+Si*s:Mi,Fi^Xn>=yr^ra>=yr){var Lo=ae(ie(On),ie(Ya));ce(Lo);var ho=ae(ln,Lo);ce(ho);var ni=(Fi^Mi>=0?-1:1)*k(ho[2]);(vr>ni||vr===ni&&(Lo[0]||Lo[1]))&&(Pn+=Fi^Mi>=0?1:-1)}}return(_n<-n||_n<n&&wr<-n)^Pn&1}function Dr(Tt,Yt,yr,vr){return function(Nr){var ln=Yt(Nr),_n=Rr(),Pn=Yt(_n),zn=!1,Wn,Tn,Hn,On={point:Xn,lineStart:Va,lineEnd:Ia,polygonStart:function(){On.point=Ga,On.lineStart=Ya,On.lineEnd=ra,Tn=[],Wn=[]},polygonEnd:function(){On.point=Xn,On.lineStart=Va,On.lineEnd=Ia,Tn=f.merge(Tn);var ma=Yr(Wn,vr);Tn.length?(zn||(Nr.polygonStart(),zn=!0),Jr(Tn,zt,ma,yr,Nr)):ma&&(zn||(Nr.polygonStart(),zn=!0),Nr.lineStart(),yr(null,null,1,Nr),Nr.lineEnd()),zn&&(Nr.polygonEnd(),zn=!1),Tn=Wn=null},sphere:function(){Nr.polygonStart(),Nr.lineStart(),yr(null,null,1,Nr),Nr.lineEnd(),Nr.polygonEnd()}};function Xn(ma,Ja){Tt(ma,Ja)&&Nr.point(ma,Ja)}function aa(ma,Ja){ln.point(ma,Ja)}function Va(){On.point=aa,ln.lineStart()}function Ia(){On.point=Xn,ln.lineEnd()}function Ga(ma,Ja){Hn.push([ma,Ja]),Pn.point(ma,Ja)}function Ya(){Pn.lineStart(),Hn=[]}function ra(){Ga(Hn[0][0],Hn[0][1]),Pn.lineEnd();var ma=Pn.clean(),Ja=_n.result(),ai,Mi=Ja.length,Si,ki,Fi;if(Hn.pop(),Wn.push(Hn),Hn=null,!!Mi){if(ma&1){if(ki=Ja[0],(Si=ki.length-1)>0){for(zn||(Nr.polygonStart(),zn=!0),Nr.lineStart(),ai=0;ai<Si;++ai)Nr.point((Fi=ki[ai])[0],Fi[1]);Nr.lineEnd()}return}Mi>1&&ma&2&&Ja.push(Ja.pop().concat(Ja.shift())),Tn.push(Ja.filter(at))}}return On}}function at(Tt){return Tt.length>1}function zt(Tt,Yt){return((Tt=Tt.x)[0]<0?Tt[1]-h-n:h-Tt[1])-((Yt=Yt.x)[0]<0?Yt[1]-h-n:h-Yt[1])}var qt=Dr(function(){return!0},hr,Gr,[-t,-h]);function hr(Tt){var Yt=NaN,yr=NaN,vr=NaN,Nr;return{lineStart:function(){Tt.lineStart(),Nr=1},point:function(ln,_n){var Pn=ln>0?t:-t,zn=p(ln-Yt);p(zn-t)<n?(Tt.point(Yt,yr=(yr+_n)/2>0?h:-h),Tt.point(vr,yr),Tt.lineEnd(),Tt.lineStart(),Tt.point(Pn,yr),Tt.point(ln,yr),Nr=0):vr!==Pn&&zn>=t&&(p(Yt-vr)<n&&(Yt-=vr*n),p(ln-Pn)<n&&(ln-=Pn*n),yr=Ur(Yt,yr,ln,_n),Tt.point(vr,yr),Tt.lineEnd(),Tt.lineStart(),Tt.point(Pn,yr),Nr=0),Tt.point(Yt=ln,yr=_n),vr=Pn},lineEnd:function(){Tt.lineEnd(),Yt=yr=NaN},clean:function(){return 2-Nr}}}function Ur(Tt,Yt,yr,vr){var Nr,ln,_n=g(Tt-yr);return p(_n)>n?c((g(Yt)*(ln=l(vr))*g(yr)-g(vr)*(Nr=l(Yt))*g(Tt))/(Nr*ln*_n)):(Yt+vr)/2}function Gr(Tt,Yt,yr,vr){var Nr;if(Tt==null)Nr=yr*h,vr.point(-t,Nr),vr.point(0,Nr),vr.point(t,Nr),vr.point(t,0),vr.point(t,-Nr),vr.point(0,-Nr),vr.point(-t,-Nr),vr.point(-t,0),vr.point(-t,Nr);else if(p(Tt[0]-Yt[0])>n){var ln=Tt[0]<Yt[0]?t:-t;Nr=yr*ln/2,vr.point(-ln,Nr),vr.point(0,Nr),vr.point(ln,Nr)}else vr.point(Yt[0],Yt[1])}function Ir(Tt){var Yt=l(Tt),yr=6*d,vr=Yt>0,Nr=p(Yt)>n;function ln(Tn,Hn,On,Xn){Dt(Xn,Tt,yr,On,Tn,Hn)}function _n(Tn,Hn){return l(Tn)*l(Hn)>Yt}function Pn(Tn){var Hn,On,Xn,aa,Va;return{lineStart:function(){aa=Xn=!1,Va=1},point:function(Ia,Ga){var Ya=[Ia,Ga],ra,ma=_n(Ia,Ga),Ja=vr?ma?0:Wn(Ia,Ga):ma?Wn(Ia+(Ia<0?t:-t),Ga):0;if(!Hn&&(aa=Xn=ma)&&Tn.lineStart(),ma!==Xn&&(ra=zn(Hn,Ya),(!ra||Sr(Hn,ra)||Sr(Ya,ra))&&(Ya[2]=1)),ma!==Xn)Va=0,ma?(Tn.lineStart(),ra=zn(Ya,Hn),Tn.point(ra[0],ra[1])):(ra=zn(Hn,Ya),Tn.point(ra[0],ra[1],2),Tn.lineEnd()),Hn=ra;else if(Nr&&Hn&&vr^ma){var ai;!(Ja&On)&&(ai=zn(Ya,Hn,!0))&&(Va=0,vr?(Tn.lineStart(),Tn.point(ai[0][0],ai[0][1]),Tn.point(ai[1][0],ai[1][1]),Tn.lineEnd()):(Tn.point(ai[1][0],ai[1][1]),Tn.lineEnd(),Tn.lineStart(),Tn.point(ai[0][0],ai[0][1],3)))}ma&&(!Hn||!Sr(Hn,Ya))&&Tn.point(Ya[0],Ya[1]),Hn=Ya,Xn=ma,On=Ja},lineEnd:function(){Xn&&Tn.lineEnd(),Hn=null},clean:function(){return Va|(aa&&Xn)<<1}}}function zn(Tn,Hn,On){var Xn=ie(Tn),aa=ie(Hn),Va=[1,0,0],Ia=ae(Xn,aa),Ga=se(Ia,Ia),Ya=Ia[0],ra=Ga-Ya*Ya;if(!ra)return!On&&Tn;var ma=Yt*Ga/ra,Ja=-Yt*Ya/ra,ai=ae(Va,Ia),Mi=be(Va,ma),Si=be(Ia,Ja);oe(Mi,Si);var ki=ai,Fi=se(Mi,ki),pi=se(ki,ki),Lo=Fi*Fi-pi*(se(Mi,Mi)-1);if(!(Lo<0)){var ho=v(Lo),ni=be(ki,(-Fi-ho)/pi);if(oe(ni,Mi),ni=q(ni),!On)return ni;var xa=Tn[0],Ci=Hn[0],wo=Tn[1],Eo=Hn[1],ks;Ci<xa&&(ks=xa,xa=Ci,Ci=ks);var Xs=Ci-xa,Qo=p(Xs-t)<n,_l=Qo||Xs<n;if(!Qo&&Eo<wo&&(ks=wo,wo=Eo,Eo=ks),_l?Qo?wo+Eo>0^ni[1]<(p(ni[0]-xa)<n?wo:Eo):wo<=ni[1]&&ni[1]<=Eo:Xs>t^(xa<=ni[0]&&ni[0]<=Ci)){var Ns=be(ki,(-Fi+ho)/pi);return oe(Ns,Mi),[ni,q(Ns)]}}}function Wn(Tn,Hn){var On=vr?Tt:t-Tt,Xn=0;return Tn<-On?Xn|=1:Tn>On&&(Xn|=2),Hn<-On?Xn|=4:Hn>On&&(Xn|=8),Xn}return Dr(_n,Pn,ln,vr?[0,-Tt]:[-t,Tt-t])}function kr(Tt,Yt,yr,vr,Nr,ln){var _n=Tt[0],Pn=Tt[1],zn=Yt[0],Wn=Yt[1],Tn=0,Hn=1,On=zn-_n,Xn=Wn-Pn,aa;if(aa=yr-_n,!(!On&&aa>0)){if(aa/=On,On<0){if(aa<Tn)return;aa<Hn&&(Hn=aa)}else if(On>0){if(aa>Hn)return;aa>Tn&&(Tn=aa)}if(aa=Nr-_n,!(!On&&aa<0)){if(aa/=On,On<0){if(aa>Hn)return;aa>Tn&&(Tn=aa)}else if(On>0){if(aa<Tn)return;aa<Hn&&(Hn=aa)}if(aa=vr-Pn,!(!Xn&&aa>0)){if(aa/=Xn,Xn<0){if(aa<Tn)return;aa<Hn&&(Hn=aa)}else if(Xn>0){if(aa>Hn)return;aa>Tn&&(Tn=aa)}if(aa=ln-Pn,!(!Xn&&aa<0)){if(aa/=Xn,Xn<0){if(aa>Hn)return;aa>Tn&&(Tn=aa)}else if(Xn>0){if(aa<Tn)return;aa<Hn&&(Hn=aa)}return Tn>0&&(Tt[0]=_n+Tn*On,Tt[1]=Pn+Tn*Xn),Hn<1&&(Yt[0]=_n+Hn*On,Yt[1]=Pn+Hn*Xn),!0}}}}}var Kr=1e9,kn=-Kr;function yn(Tt,Yt,yr,vr){function Nr(Wn,Tn){return Tt<=Wn&&Wn<=yr&&Yt<=Tn&&Tn<=vr}function ln(Wn,Tn,Hn,On){var Xn=0,aa=0;if(Wn==null||(Xn=_n(Wn,Hn))!==(aa=_n(Tn,Hn))||zn(Wn,Tn)<0^Hn>0)do On.point(Xn===0||Xn===3?Tt:yr,Xn>1?vr:Yt);while((Xn=(Xn+Hn+4)%4)!==aa);else On.point(Tn[0],Tn[1])}function _n(Wn,Tn){return p(Wn[0]-Tt)<n?Tn>0?0:3:p(Wn[0]-yr)<n?Tn>0?2:1:p(Wn[1]-Yt)<n?Tn>0?1:0:Tn>0?3:2}function Pn(Wn,Tn){return zn(Wn.x,Tn.x)}function zn(Wn,Tn){var Hn=_n(Wn,1),On=_n(Tn,1);return Hn!==On?Hn-On:Hn===0?Tn[1]-Wn[1]:Hn===1?Wn[0]-Tn[0]:Hn===2?Wn[1]-Tn[1]:Tn[0]-Wn[0]}return function(Wn){var Tn=Wn,Hn=Rr(),On,Xn,aa,Va,Ia,Ga,Ya,ra,ma,Ja,ai,Mi={point:Si,lineStart:Lo,lineEnd:ho,polygonStart:Fi,polygonEnd:pi};function Si(xa,Ci){Nr(xa,Ci)&&Tn.point(xa,Ci)}function ki(){for(var xa=0,Ci=0,wo=Xn.length;Ci<wo;++Ci)for(var Eo=Xn[Ci],ks=1,Xs=Eo.length,Qo=Eo[0],_l,Ns,Cs=Qo[0],Po=Qo[1];ks<Xs;++ks)_l=Cs,Ns=Po,Qo=Eo[ks],Cs=Qo[0],Po=Qo[1],Ns<=vr?Po>vr&&(Cs-_l)*(vr-Ns)>(Po-Ns)*(Tt-_l)&&++xa:Po<=vr&&(Cs-_l)*(vr-Ns)<(Po-Ns)*(Tt-_l)&&--xa;return xa}function Fi(){Tn=Hn,On=[],Xn=[],ai=!0}function pi(){var xa=ki(),Ci=ai&&xa,wo=(On=f.merge(On)).length;(Ci||wo)&&(Wn.polygonStart(),Ci&&(Wn.lineStart(),ln(null,null,1,Wn),Wn.lineEnd()),wo&&Jr(On,Pn,xa,ln,Wn),Wn.polygonEnd()),Tn=Wn,On=Xn=aa=null}function Lo(){Mi.point=ni,Xn&&Xn.push(aa=[]),Ja=!0,ma=!1,Ya=ra=NaN}function ho(){On&&(ni(Va,Ia),Ga&&ma&&Hn.rejoin(),On.push(Hn.result())),Mi.point=Si,ma&&Tn.lineEnd()}function ni(xa,Ci){var wo=Nr(xa,Ci);if(Xn&&aa.push([xa,Ci]),Ja)Va=xa,Ia=Ci,Ga=wo,Ja=!1,wo&&(Tn.lineStart(),Tn.point(xa,Ci));else if(wo&&ma)Tn.point(xa,Ci);else{var Eo=[Ya=Math.max(kn,Math.min(Kr,Ya)),ra=Math.max(kn,Math.min(Kr,ra))],ks=[xa=Math.max(kn,Math.min(Kr,xa)),Ci=Math.max(kn,Math.min(Kr,Ci))];kr(Eo,ks,Tt,Yt,yr,vr)?(ma||(Tn.lineStart(),Tn.point(Eo[0],Eo[1])),Tn.point(ks[0],ks[1]),wo||Tn.lineEnd(),ai=!1):wo&&(Tn.lineStart(),Tn.point(xa,Ci),ai=!1)}Ya=xa,ra=Ci,ma=wo}return Mi}}function Yn(){var Tt=0,Yt=0,yr=960,vr=500,Nr,ln,_n;return _n={stream:function(Pn){return Nr&&ln===Pn?Nr:Nr=yn(Tt,Yt,yr,vr)(ln=Pn)},extent:function(Pn){return arguments.length?(Tt=+Pn[0][0],Yt=+Pn[0][1],yr=+Pn[1][0],vr=+Pn[1][1],Nr=ln=null,_n):[[Tt,Yt],[yr,vr]]}}}var In=M(),Jn,Zn,ba,Pa={sphere:F,point:F,lineStart:xi,lineEnd:F,polygonStart:F,polygonEnd:F};function xi(){Pa.point=ti,Pa.lineEnd=Ka}function Ka(){Pa.point=Pa.lineEnd=F}function ti(Tt,Yt){Tt*=d,Yt*=d,Jn=Tt,Zn=g(Yt),ba=l(Yt),Pa.point=$a}function $a(Tt,Yt){Tt*=d,Yt*=d;var yr=g(Yt),vr=l(Yt),Nr=p(Tt-Jn),ln=l(Nr),_n=g(Nr),Pn=vr*_n,zn=ba*yr-Zn*vr*ln,Wn=Zn*yr+ba*vr*ln;In.add(m(v(Pn*Pn+zn*zn),Wn)),Jn=Tt,Zn=yr,ba=vr}function Cr(Tt){return In.reset(),B(Tt,Pa),+In}var bn=[null,null],gn={type:"LineString",coordinates:bn};function Ln(Tt,Yt){return bn[0]=Tt,bn[1]=Yt,Cr(gn)}var qn={Feature:function(Tt,Yt){return oa(Tt.geometry,Yt)},FeatureCollection:function(Tt,Yt){for(var yr=Tt.features,vr=-1,Nr=yr.length;++vr<Nr;)if(oa(yr[vr].geometry,Yt))return!0;return!1}},da={Sphere:function(){return!0},Point:function(Tt,Yt){return Bn(Tt.coordinates,Yt)},MultiPoint:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if(Bn(yr[vr],Yt))return!0;return!1},LineString:function(Tt,Yt){return $n(Tt.coordinates,Yt)},MultiLineString:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if($n(yr[vr],Yt))return!0;return!1},Polygon:function(Tt,Yt){return Xa(Tt.coordinates,Yt)},MultiPolygon:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if(Xa(yr[vr],Yt))return!0;return!1},GeometryCollection:function(Tt,Yt){for(var yr=Tt.geometries,vr=-1,Nr=yr.length;++vr<Nr;)if(oa(yr[vr],Yt))return!0;return!1}};function oa(Tt,Yt){return Tt&&da.hasOwnProperty(Tt.type)?da[Tt.type](Tt,Yt):!1}function Bn(Tt,Yt){return Ln(Tt,Yt)===0}function $n(Tt,Yt){for(var yr,vr,Nr,ln=0,_n=Tt.length;ln<_n;ln++){if(vr=Ln(Tt[ln],Yt),vr===0||ln>0&&(Nr=Ln(Tt[ln],Tt[ln-1]),Nr>0&&yr<=Nr&&vr<=Nr&&(yr+vr-Nr)*(1-Math.pow((yr-vr)/Nr,2))<r*Nr))return!0;yr=vr}return!1}function Xa(Tt,Yt){return!!Yr(Tt.map(gi),Xt(Yt))}function gi(Tt){return Tt=Tt.map(Xt),Tt.pop(),Tt}function Xt(Tt){return[Tt[0]*d,Tt[1]*d]}function mr(Tt,Yt){return(Tt&&qn.hasOwnProperty(Tt.type)?qn[Tt.type]:oa)(Tt,Yt)}function un(Tt,Yt,yr){var vr=f.range(Tt,Yt-n,yr).concat(Yt);return function(Nr){return vr.map(function(ln){return[Nr,ln]})}}function xn(Tt,Yt,yr){var vr=f.range(Tt,Yt-n,yr).concat(Yt);return function(Nr){return vr.map(function(ln){return[ln,Nr]})}}function sn(){var Tt,Yt,yr,vr,Nr,ln,_n,Pn,zn=10,Wn=zn,Tn=90,Hn=360,On,Xn,aa,Va,Ia=2.5;function Ga(){return{type:"MultiLineString",coordinates:Ya()}}function Ya(){return f.range(x(vr/Tn)*Tn,yr,Tn).map(aa).concat(f.range(x(Pn/Hn)*Hn,_n,Hn).map(Va)).concat(f.range(x(Yt/zn)*zn,Tt,zn).filter(function(ra){return p(ra%Tn)>n}).map(On)).concat(f.range(x(ln/Wn)*Wn,Nr,Wn).filter(function(ra){return p(ra%Hn)>n}).map(Xn))}return Ga.lines=function(){return Ya().map(function(ra){return{type:"LineString",coordinates:ra}})},Ga.outline=function(){return{type:"Polygon",coordinates:[aa(vr).concat(Va(_n).slice(1),aa(yr).reverse().slice(1),Va(Pn).reverse().slice(1))]}},Ga.extent=function(ra){return arguments.length?Ga.extentMajor(ra).extentMinor(ra):Ga.extentMinor()},Ga.extentMajor=function(ra){return arguments.length?(vr=+ra[0][0],yr=+ra[1][0],Pn=+ra[0][1],_n=+ra[1][1],vr>yr&&(ra=vr,vr=yr,yr=ra),Pn>_n&&(ra=Pn,Pn=_n,_n=ra),Ga.precision(Ia)):[[vr,Pn],[yr,_n]]},Ga.extentMinor=function(ra){return arguments.length?(Yt=+ra[0][0],Tt=+ra[1][0],ln=+ra[0][1],Nr=+ra[1][1],Yt>Tt&&(ra=Yt,Yt=Tt,Tt=ra),ln>Nr&&(ra=ln,ln=Nr,Nr=ra),Ga.precision(Ia)):[[Yt,ln],[Tt,Nr]]},Ga.step=function(ra){return arguments.length?Ga.stepMajor(ra).stepMinor(ra):Ga.stepMinor()},Ga.stepMajor=function(ra){return arguments.length?(Tn=+ra[0],Hn=+ra[1],Ga):[Tn,Hn]},Ga.stepMinor=function(ra){return arguments.length?(zn=+ra[0],Wn=+ra[1],Ga):[zn,Wn]},Ga.precision=function(ra){return arguments.length?(Ia=+ra,On=un(ln,Nr,90),Xn=xn(Yt,Tt,Ia),aa=un(Pn,_n,90),Va=xn(vr,yr,Ia),Ga):Ia},Ga.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Cn(){return sn()()}function Mn(Tt,Yt){var yr=Tt[0]*d,vr=Tt[1]*d,Nr=Yt[0]*d,ln=Yt[1]*d,_n=l(vr),Pn=g(vr),zn=l(ln),Wn=g(ln),Tn=_n*l(yr),Hn=_n*g(yr),On=zn*l(Nr),Xn=zn*g(Nr),aa=2*k(v(E(ln-vr)+_n*zn*E(Nr-yr))),Va=g(aa),Ia=aa?function(Ga){var Ya=g(Ga*=aa)/Va,ra=g(aa-Ga)/Va,ma=ra*Tn+Ya*On,Ja=ra*Hn+Ya*Xn,ai=ra*Pn+Ya*Wn;return[m(Ja,ma)*y,m(ai,v(ma*ma+Ja*Ja))*y]}:function(){return[yr*y,vr*y]};return Ia.distance=aa,Ia}function dn(Tt){return Tt}var Tr=M(),Ar=M(),Hr,wn,Gn,sa,En={point:F,lineStart:F,lineEnd:F,polygonStart:function(){En.lineStart=ea,En.lineEnd=Aa},polygonEnd:function(){En.lineStart=En.lineEnd=En.point=F,Tr.add(p(Ar)),Ar.reset()},result:function(){var Tt=Tr/2;return Tr.reset(),Tt}};function ea(){En.point=fa}function fa(Tt,Yt){En.point=_a,Hr=Gn=Tt,wn=sa=Yt}function _a(Tt,Yt){Ar.add(sa*Tt-Gn*Yt),Gn=Tt,sa=Yt}function Aa(){_a(Hr,wn)}var va=1/0,La=va,So=-va,Jo=So,vs={point:kl,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var Tt=[[va,La],[So,Jo]];return So=Jo=-(La=va=1/0),Tt}};function kl(Tt,Yt){Tt<va&&(va=Tt),Tt>So&&(So=Tt),Yt<La&&(La=Yt),Yt>Jo&&(Jo=Yt)}var Ul=0,_u=0,wi=0,hl=0,el=0,qi=0,No=0,Hl=0,Is=0,Gi,Cl,lo,Zi,yo={point:uo,lineStart:ws,lineEnd:ps,polygonStart:function(){yo.lineStart=Bu,yo.lineEnd=tl},polygonEnd:function(){yo.point=uo,yo.lineStart=ws,yo.lineEnd=ps},result:function(){var Tt=Is?[No/Is,Hl/Is]:qi?[hl/qi,el/qi]:wi?[Ul/wi,_u/wi]:[NaN,NaN];return Ul=_u=wi=hl=el=qi=No=Hl=Is=0,Tt}};function uo(Tt,Yt){Ul+=Tt,_u+=Yt,++wi}function ws(){yo.point=vl}function vl(Tt,Yt){yo.point=Nu,uo(lo=Tt,Zi=Yt)}function Nu(Tt,Yt){var yr=Tt-lo,vr=Yt-Zi,Nr=v(yr*yr+vr*vr);hl+=Nr*(lo+Tt)/2,el+=Nr*(Zi+Yt)/2,qi+=Nr,uo(lo=Tt,Zi=Yt)}function ps(){yo.point=uo}function Bu(){yo.point=Bo}function tl(){sf(Gi,Cl)}function Bo(Tt,Yt){yo.point=sf,uo(Gi=lo=Tt,Cl=Zi=Yt)}function sf(Tt,Yt){var yr=Tt-lo,vr=Yt-Zi,Nr=v(yr*yr+vr*vr);hl+=Nr*(lo+Tt)/2,el+=Nr*(Zi+Yt)/2,qi+=Nr,Nr=Zi*Tt-lo*Yt,No+=Nr*(lo+Tt),Hl+=Nr*(Zi+Yt),Is+=Nr*3,uo(lo=Tt,Zi=Yt)}function rl(Tt){this._context=Tt}rl.prototype={_radius:4.5,pointRadius:function(Tt){return this._radius=Tt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Tt,Yt){switch(this._point){case 0:{this._context.moveTo(Tt,Yt),this._point=1;break}case 1:{this._context.lineTo(Tt,Yt);break}default:{this._context.moveTo(Tt+this._radius,Yt),this._context.arc(Tt,Yt,this._radius,0,s);break}}},result:F};var Vs=M(),iu,lf,uf,pl,ou,Gs={point:F,lineStart:function(){Gs.point=wu},lineEnd:function(){iu&&Ll(lf,uf),Gs.point=F},polygonStart:function(){iu=!0},polygonEnd:function(){iu=null},result:function(){var Tt=+Vs;return Vs.reset(),Tt}};function wu(Tt,Yt){Gs.point=Ll,lf=pl=Tt,uf=ou=Yt}function Ll(Tt,Yt){pl-=Tt,ou-=Yt,Vs.add(v(pl*pl+ou*ou)),pl=Tt,ou=Yt}function Tu(){this._string=[]}Tu.prototype={_radius:4.5,_circle:Uu(4.5),pointRadius:function(Tt){return(Tt=+Tt)!==this._radius&&(this._radius=Tt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Tt,Yt){switch(this._point){case 0:{this._string.push("M",Tt,",",Yt),this._point=1;break}case 1:{this._string.push("L",Tt,",",Yt);break}default:{this._circle==null&&(this._circle=Uu(this._radius)),this._string.push("M",Tt,",",Yt,this._circle);break}}},result:function(){if(this._string.length){var Tt=this._string.join("");return this._string=[],Tt}else return null}};function Uu(Tt){return"m0,"+Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+-2*Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+2*Tt+"z"}function su(Tt,Yt){var yr=4.5,vr,Nr;function ln(_n){return _n&&(typeof yr=="function"&&Nr.pointRadius(+yr.apply(this,arguments)),B(_n,vr(Nr))),Nr.result()}return ln.area=function(_n){return B(_n,vr(En)),En.result()},ln.measure=function(_n){return B(_n,vr(Gs)),Gs.result()},ln.bounds=function(_n){return B(_n,vr(vs)),vs.result()},ln.centroid=function(_n){return B(_n,vr(yo)),yo.result()},ln.projection=function(_n){return arguments.length?(vr=_n==null?(Tt=null,dn):(Tt=_n).stream,ln):Tt},ln.context=function(_n){return arguments.length?(Nr=_n==null?(Yt=null,new Tu):new rl(Yt=_n),typeof yr!="function"&&Nr.pointRadius(yr),ln):Yt},ln.pointRadius=function(_n){return arguments.length?(yr=typeof _n=="function"?_n:(Nr.pointRadius(+_n),+_n),ln):yr},ln.projection(Tt).context(Yt)}function ff(Tt){return{stream:dl(Tt)}}function dl(Tt){return function(Yt){var yr=new Au;for(var vr in Tt)yr[vr]=Tt[vr];return yr.stream=Yt,yr}}function Au(){}Au.prototype={constructor:Au,point:function(Tt,Yt){this.stream.point(Tt,Yt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function lu(Tt,Yt,yr){var vr=Tt.clipExtent&&Tt.clipExtent();return Tt.scale(150).translate([0,0]),vr!=null&&Tt.clipExtent(null),B(yr,Tt.stream(vs)),Yt(vs.result()),vr!=null&&Tt.clipExtent(vr),Tt}function Fs(Tt,Yt,yr){return lu(Tt,function(vr){var Nr=Yt[1][0]-Yt[0][0],ln=Yt[1][1]-Yt[0][1],_n=Math.min(Nr/(vr[1][0]-vr[0][0]),ln/(vr[1][1]-vr[0][1])),Pn=+Yt[0][0]+(Nr-_n*(vr[1][0]+vr[0][0]))/2,zn=+Yt[0][1]+(ln-_n*(vr[1][1]+vr[0][1]))/2;Tt.scale(150*_n).translate([Pn,zn])},yr)}function Vl(Tt,Yt,yr){return Fs(Tt,[[0,0],Yt],yr)}function Mu(Tt,Yt,yr){return lu(Tt,function(vr){var Nr=+Yt,ln=Nr/(vr[1][0]-vr[0][0]),_n=(Nr-ln*(vr[1][0]+vr[0][0]))/2,Pn=-ln*vr[0][1];Tt.scale(150*ln).translate([_n,Pn])},yr)}function Hu(Tt,Yt,yr){return lu(Tt,function(vr){var Nr=+Yt,ln=Nr/(vr[1][1]-vr[0][1]),_n=-ln*vr[0][0],Pn=(Nr-ln*(vr[1][1]+vr[0][1]))/2;Tt.scale(150*ln).translate([_n,Pn])},yr)}var Vu=16,uu=l(30*d);function cf(Tt,Yt){return+Yt?ds(Tt,Yt):Gu(Tt)}function Gu(Tt){return dl({point:function(Yt,yr){Yt=Tt(Yt,yr),this.stream.point(Yt[0],Yt[1])}})}function ds(Tt,Yt){function yr(vr,Nr,ln,_n,Pn,zn,Wn,Tn,Hn,On,Xn,aa,Va,Ia){var Ga=Wn-vr,Ya=Tn-Nr,ra=Ga*Ga+Ya*Ya;if(ra>4*Yt&&Va--){var ma=_n+On,Ja=Pn+Xn,ai=zn+aa,Mi=v(ma*ma+Ja*Ja+ai*ai),Si=k(ai/=Mi),ki=p(p(ai)-1)<n||p(ln-Hn)<n?(ln+Hn)/2:m(Ja,ma),Fi=Tt(ki,Si),pi=Fi[0],Lo=Fi[1],ho=pi-vr,ni=Lo-Nr,xa=Ya*ho-Ga*ni;(xa*xa/ra>Yt||p((Ga*ho+Ya*ni)/ra-.5)>.3||_n*On+Pn*Xn+zn*aa<uu)&&(yr(vr,Nr,ln,_n,Pn,zn,pi,Lo,ki,ma/=Mi,Ja/=Mi,ai,Va,Ia),Ia.point(pi,Lo),yr(pi,Lo,ki,ma,Ja,ai,Wn,Tn,Hn,On,Xn,aa,Va,Ia))}}return function(vr){var Nr,ln,_n,Pn,zn,Wn,Tn,Hn,On,Xn,aa,Va,Ia={point:Ga,lineStart:Ya,lineEnd:ma,polygonStart:function(){vr.polygonStart(),Ia.lineStart=Ja},polygonEnd:function(){vr.polygonEnd(),Ia.lineStart=Ya}};function Ga(Si,ki){Si=Tt(Si,ki),vr.point(Si[0],Si[1])}function Ya(){Hn=NaN,Ia.point=ra,vr.lineStart()}function ra(Si,ki){var Fi=ie([Si,ki]),pi=Tt(Si,ki);yr(Hn,On,Tn,Xn,aa,Va,Hn=pi[0],On=pi[1],Tn=Si,Xn=Fi[0],aa=Fi[1],Va=Fi[2],Vu,vr),vr.point(Hn,On)}function ma(){Ia.point=Ga,vr.lineEnd()}function Ja(){Ya(),Ia.point=ai,Ia.lineEnd=Mi}function ai(Si,ki){ra(Nr=Si,ki),ln=Hn,_n=On,Pn=Xn,zn=aa,Wn=Va,Ia.point=ra}function Mi(){yr(Hn,On,Tn,Xn,aa,Va,ln,_n,Nr,Pn,zn,Wn,Vu,vr),Ia.lineEnd=ma,ma()}return Ia}}var Pl=dl({point:function(Tt,Yt){this.stream.point(Tt*d,Yt*d)}});function Dl(Tt){return dl({point:function(Yt,yr){var vr=Tt(Yt,yr);return this.stream.point(vr[0],vr[1])}})}function Su(Tt,Yt,yr,vr,Nr){function ln(_n,Pn){return _n*=vr,Pn*=Nr,[Yt+Tt*_n,yr-Tt*Pn]}return ln.invert=function(_n,Pn){return[(_n-Yt)/Tt*vr,(yr-Pn)/Tt*Nr]},ln}function zs(Tt,Yt,yr,vr,Nr,ln){var _n=l(ln),Pn=g(ln),zn=_n*Tt,Wn=Pn*Tt,Tn=_n/Tt,Hn=Pn/Tt,On=(Pn*yr-_n*Yt)/Tt,Xn=(Pn*Yt+_n*yr)/Tt;function aa(Va,Ia){return Va*=vr,Ia*=Nr,[zn*Va-Wn*Ia+Yt,yr-Wn*Va-zn*Ia]}return aa.invert=function(Va,Ia){return[vr*(Tn*Va-Hn*Ia+On),Nr*(Xn-Hn*Va-Tn*Ia)]},aa}function Uo(Tt){return fu(function(){return Tt})()}function fu(Tt){var Yt,yr=150,vr=480,Nr=250,ln=0,_n=0,Pn=0,zn=0,Wn=0,Tn,Hn=0,On=1,Xn=1,aa=null,Va=qt,Ia=null,Ga,Ya,ra,ma=dn,Ja=.5,ai,Mi,Si,ki,Fi;function pi(xa){return Si(xa[0]*d,xa[1]*d)}function Lo(xa){return xa=Si.invert(xa[0],xa[1]),xa&&[xa[0]*y,xa[1]*y]}pi.stream=function(xa){return ki&&Fi===xa?ki:ki=Pl(Dl(Tn)(Va(ai(ma(Fi=xa)))))},pi.preclip=function(xa){return arguments.length?(Va=xa,aa=void 0,ni()):Va},pi.postclip=function(xa){return arguments.length?(ma=xa,Ia=Ga=Ya=ra=null,ni()):ma},pi.clipAngle=function(xa){return arguments.length?(Va=+xa?Ir(aa=xa*d):(aa=null,qt),ni()):aa*y},pi.clipExtent=function(xa){return arguments.length?(ma=xa==null?(Ia=Ga=Ya=ra=null,dn):yn(Ia=+xa[0][0],Ga=+xa[0][1],Ya=+xa[1][0],ra=+xa[1][1]),ni()):Ia==null?null:[[Ia,Ga],[Ya,ra]]},pi.scale=function(xa){return arguments.length?(yr=+xa,ho()):yr},pi.translate=function(xa){return arguments.length?(vr=+xa[0],Nr=+xa[1],ho()):[vr,Nr]},pi.center=function(xa){return arguments.length?(ln=xa[0]%360*d,_n=xa[1]%360*d,ho()):[ln*y,_n*y]},pi.rotate=function(xa){return arguments.length?(Pn=xa[0]%360*d,zn=xa[1]%360*d,Wn=xa.length>2?xa[2]%360*d:0,ho()):[Pn*y,zn*y,Wn*y]},pi.angle=function(xa){return arguments.length?(Hn=xa%360*d,ho()):Hn*y},pi.reflectX=function(xa){return arguments.length?(On=xa?-1:1,ho()):On<0},pi.reflectY=function(xa){return arguments.length?(Xn=xa?-1:1,ho()):Xn<0},pi.precision=function(xa){return arguments.length?(ai=cf(Mi,Ja=xa*xa),ni()):v(Ja)},pi.fitExtent=function(xa,Ci){return Fs(pi,xa,Ci)},pi.fitSize=function(xa,Ci){return Vl(pi,xa,Ci)},pi.fitWidth=function(xa,Ci){return Mu(pi,xa,Ci)},pi.fitHeight=function(xa,Ci){return Hu(pi,xa,Ci)};function ho(){var xa=zs(yr,0,0,On,Xn,Hn).apply(null,Yt(ln,_n)),Ci=(Hn?zs:Su)(yr,vr-xa[0],Nr-xa[1],On,Xn,Hn);return Tn=lt(Pn,zn,Wn),Mi=Pe(Yt,Ci),Si=Pe(Tn,Mi),ai=cf(Mi,Ja),ni()}function ni(){return ki=Fi=null,pi}return function(){return Yt=Tt.apply(this,arguments),pi.invert=Yt.invert&&Lo,ho()}}function Ys(Tt){var Yt=0,yr=t/3,vr=fu(Tt),Nr=vr(Yt,yr);return Nr.parallels=function(ln){return arguments.length?vr(Yt=ln[0]*d,yr=ln[1]*d):[Yt*y,yr*y]},Nr}function Ws(Tt){var Yt=l(Tt);function yr(vr,Nr){return[vr*Yt,g(Nr)/Yt]}return yr.invert=function(vr,Nr){return[vr/Yt,k(Nr*Yt)]},yr}function bo(Tt,Yt){var yr=g(Tt),vr=(yr+g(Yt))/2;if(p(vr)<n)return Ws(Tt);var Nr=1+yr*(2*vr-yr),ln=v(Nr)/vr;function _n(Pn,zn){var Wn=v(Nr-2*vr*g(zn))/vr;return[Wn*g(Pn*=vr),ln-Wn*l(Pn)]}return _n.invert=function(Pn,zn){var Wn=ln-zn,Tn=m(Pn,p(Wn))*b(Wn);return Wn*vr<0&&(Tn-=t*b(Pn)*b(Wn)),[Tn/vr,k((Nr-(Pn*Pn+Wn*Wn)*vr*vr)/(2*vr))]},_n}function Gl(){return Ys(bo).scale(155.424).center([0,33.6442])}function Yl(){return Gl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function yl(Tt){var Yt=Tt.length;return{point:function(yr,vr){for(var Nr=-1;++Nr<Yt;)Tt[Nr].point(yr,vr)},sphere:function(){for(var yr=-1;++yr<Yt;)Tt[yr].sphere()},lineStart:function(){for(var yr=-1;++yr<Yt;)Tt[yr].lineStart()},lineEnd:function(){for(var yr=-1;++yr<Yt;)Tt[yr].lineEnd()},polygonStart:function(){for(var yr=-1;++yr<Yt;)Tt[yr].polygonStart()},polygonEnd:function(){for(var yr=-1;++yr<Yt;)Tt[yr].polygonEnd()}}}function Os(){var Tt,Yt,yr=Yl(),vr,Nr=Gl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln,_n=Gl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pn,zn,Wn={point:function(On,Xn){zn=[On,Xn]}};function Tn(On){var Xn=On[0],aa=On[1];return zn=null,vr.point(Xn,aa),zn||(ln.point(Xn,aa),zn)||(Pn.point(Xn,aa),zn)}Tn.invert=function(On){var Xn=yr.scale(),aa=yr.translate(),Va=(On[0]-aa[0])/Xn,Ia=(On[1]-aa[1])/Xn;return(Ia>=.12&&Ia<.234&&Va>=-.425&&Va<-.214?Nr:Ia>=.166&&Ia<.234&&Va>=-.214&&Va<-.115?_n:yr).invert(On)},Tn.stream=function(On){return Tt&&Yt===On?Tt:Tt=yl([yr.stream(Yt=On),Nr.stream(On),_n.stream(On)])},Tn.precision=function(On){return arguments.length?(yr.precision(On),Nr.precision(On),_n.precision(On),Hn()):yr.precision()},Tn.scale=function(On){return arguments.length?(yr.scale(On),Nr.scale(On*.35),_n.scale(On),Tn.translate(yr.translate())):yr.scale()},Tn.translate=function(On){if(!arguments.length)return yr.translate();var Xn=yr.scale(),aa=+On[0],Va=+On[1];return vr=yr.translate(On).clipExtent([[aa-.455*Xn,Va-.238*Xn],[aa+.455*Xn,Va+.238*Xn]]).stream(Wn),ln=Nr.translate([aa-.307*Xn,Va+.201*Xn]).clipExtent([[aa-.425*Xn+n,Va+.12*Xn+n],[aa-.214*Xn-n,Va+.234*Xn-n]]).stream(Wn),Pn=_n.translate([aa-.205*Xn,Va+.212*Xn]).clipExtent([[aa-.214*Xn+n,Va+.166*Xn+n],[aa-.115*Xn-n,Va+.234*Xn-n]]).stream(Wn),Hn()},Tn.fitExtent=function(On,Xn){return Fs(Tn,On,Xn)},Tn.fitSize=function(On,Xn){return Vl(Tn,On,Xn)},Tn.fitWidth=function(On,Xn){return Mu(Tn,On,Xn)},Tn.fitHeight=function(On,Xn){return Hu(Tn,On,Xn)};function Hn(){return Tt=Yt=null,Tn}return Tn.scale(1070)}function Wl(Tt){return function(Yt,yr){var vr=l(Yt),Nr=l(yr),ln=Tt(vr*Nr);return[ln*Nr*g(Yt),ln*g(yr)]}}function Rl(Tt){return function(Yt,yr){var vr=v(Yt*Yt+yr*yr),Nr=Tt(vr),ln=g(Nr),_n=l(Nr);return[m(Yt*ln,vr*_n),k(vr&&yr*ln/vr)]}}var cu=Wl(function(Tt){return v(2/(1+Tt))});cu.invert=Rl(function(Tt){return 2*k(Tt/2)});function jl(){return Uo(cu).scale(124.75).clipAngle(180-.001)}var ml=Wl(function(Tt){return(Tt=S(Tt))&&Tt/g(Tt)});ml.invert=Rl(function(Tt){return Tt});function hf(){return Uo(ml).scale(79.4188).clipAngle(180-.001)}function Ts(Tt,Yt){return[Tt,A(C((h+Yt)/2))]}Ts.invert=function(Tt,Yt){return[Tt,2*c(u(Yt))-h]};function Cf(){return Eu(Ts).scale(961/s)}function Eu(Tt){var Yt=Uo(Tt),yr=Yt.center,vr=Yt.scale,Nr=Yt.translate,ln=Yt.clipExtent,_n=null,Pn,zn,Wn;Yt.scale=function(Hn){return arguments.length?(vr(Hn),Tn()):vr()},Yt.translate=function(Hn){return arguments.length?(Nr(Hn),Tn()):Nr()},Yt.center=function(Hn){return arguments.length?(yr(Hn),Tn()):yr()},Yt.clipExtent=function(Hn){return arguments.length?(Hn==null?_n=Pn=zn=Wn=null:(_n=+Hn[0][0],Pn=+Hn[0][1],zn=+Hn[1][0],Wn=+Hn[1][1]),Tn()):_n==null?null:[[_n,Pn],[zn,Wn]]};function Tn(){var Hn=t*vr(),On=Yt(wt(Yt.rotate()).invert([0,0]));return ln(_n==null?[[On[0]-Hn,On[1]-Hn],[On[0]+Hn,On[1]+Hn]]:Tt===Ts?[[Math.max(On[0]-Hn,_n),Pn],[Math.min(On[0]+Hn,zn),Wn]]:[[_n,Math.max(On[1]-Hn,Pn)],[zn,Math.min(On[1]+Hn,Wn)]])}return Tn()}function Il(Tt){return C((h+Tt)/2)}function Xl(Tt,Yt){var yr=l(Tt),vr=Tt===Yt?g(Tt):A(yr/l(Yt))/A(Il(Yt)/Il(Tt)),Nr=yr*_(Il(Tt),vr)/vr;if(!vr)return Ts;function ln(_n,Pn){Nr>0?Pn<-h+n&&(Pn=-h+n):Pn>h-n&&(Pn=h-n);var zn=Nr/_(Il(Pn),vr);return[zn*g(vr*_n),Nr-zn*l(vr*_n)]}return ln.invert=function(_n,Pn){var zn=Nr-Pn,Wn=b(vr)*v(_n*_n+zn*zn),Tn=m(_n,p(zn))*b(zn);return zn*vr<0&&(Tn-=t*b(_n)*b(zn)),[Tn/vr,2*c(_(Nr/Wn,1/vr))-h]},ln}function xl(){return Ys(Xl).scale(109.5).parallels([30,30])}function Zl(Tt,Yt){return[Tt,Yt]}Zl.invert=Zl;function Yu(){return Uo(Zl).scale(152.63)}function Wu(Tt,Yt){var yr=l(Tt),vr=Tt===Yt?g(Tt):(yr-l(Yt))/(Yt-Tt),Nr=yr/vr+Tt;if(p(vr)<n)return Zl;function ln(_n,Pn){var zn=Nr-Pn,Wn=vr*_n;return[zn*g(Wn),Nr-zn*l(Wn)]}return ln.invert=function(_n,Pn){var zn=Nr-Pn,Wn=m(_n,p(zn))*b(zn);return zn*vr<0&&(Wn-=t*b(_n)*b(zn)),[Wn/vr,Nr-b(vr)*v(_n*_n+zn*zn)]},ln}function Lf(){return Ys(Wu).scale(131.154).center([0,13.9389])}var Yi=1.340264,Fl=-.081106,bl=893e-6,gs=.003796,As=v(3)/2,Kl=12;function _o(Tt,Yt){var yr=k(As*g(Yt)),vr=yr*yr,Nr=vr*vr*vr;return[Tt*l(yr)/(As*(Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr))),yr*(Yi+Fl*vr+Nr*(bl+gs*vr))]}_o.invert=function(Tt,Yt){for(var yr=Yt,vr=yr*yr,Nr=vr*vr*vr,ln=0,_n,Pn,zn;ln<Kl&&(Pn=yr*(Yi+Fl*vr+Nr*(bl+gs*vr))-Yt,zn=Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr),yr-=_n=Pn/zn,vr=yr*yr,Nr=vr*vr*vr,!(p(_n)<r));++ln);return[As*Tt*(Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr))/l(yr),k(g(yr)/As)]};function ju(){return Uo(_o).scale(177.158)}function Ms(Tt,Yt){var yr=l(Yt),vr=l(Tt)*yr;return[yr*g(Tt)/vr,g(Yt)/vr]}Ms.invert=Rl(c);function nl(){return Uo(Ms).scale(144.049).clipAngle(60)}function al(){var Tt=1,Yt=0,yr=0,vr=1,Nr=1,ln=0,_n,Pn,zn=null,Wn,Tn,Hn,On=1,Xn=1,aa=dl({point:function(ma,Ja){var ai=ra([ma,Ja]);this.stream.point(ai[0],ai[1])}}),Va=dn,Ia,Ga;function Ya(){return On=Tt*vr,Xn=Tt*Nr,Ia=Ga=null,ra}function ra(ma){var Ja=ma[0]*On,ai=ma[1]*Xn;if(ln){var Mi=ai*_n-Ja*Pn;Ja=Ja*_n+ai*Pn,ai=Mi}return[Ja+Yt,ai+yr]}return ra.invert=function(ma){var Ja=ma[0]-Yt,ai=ma[1]-yr;if(ln){var Mi=ai*_n+Ja*Pn;Ja=Ja*_n-ai*Pn,ai=Mi}return[Ja/On,ai/Xn]},ra.stream=function(ma){return Ia&&Ga===ma?Ia:Ia=aa(Va(Ga=ma))},ra.postclip=function(ma){return arguments.length?(Va=ma,zn=Wn=Tn=Hn=null,Ya()):Va},ra.clipExtent=function(ma){return arguments.length?(Va=ma==null?(zn=Wn=Tn=Hn=null,dn):yn(zn=+ma[0][0],Wn=+ma[0][1],Tn=+ma[1][0],Hn=+ma[1][1]),Ya()):zn==null?null:[[zn,Wn],[Tn,Hn]]},ra.scale=function(ma){return arguments.length?(Tt=+ma,Ya()):Tt},ra.translate=function(ma){return arguments.length?(Yt=+ma[0],yr=+ma[1],Ya()):[Yt,yr]},ra.angle=function(ma){return arguments.length?(ln=ma%360*d,Pn=g(ln),_n=l(ln),Ya()):ln*y},ra.reflectX=function(ma){return arguments.length?(vr=ma?-1:1,Ya()):vr<0},ra.reflectY=function(ma){return arguments.length?(Nr=ma?-1:1,Ya()):Nr<0},ra.fitExtent=function(ma,Ja){return Fs(ra,ma,Ja)},ra.fitSize=function(ma,Ja){return Vl(ra,ma,Ja)},ra.fitWidth=function(ma,Ja){return Mu(ra,ma,Ja)},ra.fitHeight=function(ma,Ja){return Hu(ra,ma,Ja)},ra}function js(Tt,Yt){var yr=Yt*Yt,vr=yr*yr;return[Tt*(.8707-.131979*yr+vr*(-.013791+vr*(.003971*yr-.001529*vr))),Yt*(1.007226+yr*(.015085+vr*(-.044475+.028874*yr-.005916*vr)))]}js.invert=function(Tt,Yt){var yr=Yt,vr=25,Nr;do{var ln=yr*yr,_n=ln*ln;yr-=Nr=(yr*(1.007226+ln*(.015085+_n*(-.044475+.028874*ln-.005916*_n)))-Yt)/(1.007226+ln*(.015085*3+_n*(-.044475*7+.028874*9*ln-.005916*11*_n)))}while(p(Nr)>n&&--vr>0);return[Tt/(.8707+(ln=yr*yr)*(-.131979+ln*(-.013791+ln*ln*ln*(.003971-.001529*ln)))),yr]};function Ss(){return Uo(js).scale(175.295)}function eo(Tt,Yt){return[l(Yt)*g(Tt),g(Yt)]}eo.invert=Rl(k);function Ho(){return Uo(eo).scale(249.5).clipAngle(90+n)}function Es(Tt,Yt){var yr=l(Yt),vr=1+l(Tt)*yr;return[yr*g(Tt)/vr,g(Yt)/vr]}Es.invert=Rl(function(Tt){return 2*c(Tt)});function Xu(){return Uo(Es).scale(250).clipAngle(142)}function hu(Tt,Yt){return[A(C((h+Yt)/2)),-Tt]}hu.invert=function(Tt,Yt){return[-Yt,2*c(u(Tt))-h]};function Zu(){var Tt=Eu(hu),Yt=Tt.center,yr=Tt.rotate;return Tt.center=function(vr){return arguments.length?Yt([-vr[1],vr[0]]):(vr=Yt(),[vr[1],-vr[0]])},Tt.rotate=function(vr){return arguments.length?yr([vr[0],vr[1],vr.length>2?vr[2]+90:90]):(vr=yr(),[vr[0],vr[1],vr[2]-90])},yr([0,0,90]).scale(159.155)}w.geoAlbers=Yl,w.geoAlbersUsa=Os,w.geoArea=Z,w.geoAzimuthalEqualArea=jl,w.geoAzimuthalEqualAreaRaw=cu,w.geoAzimuthalEquidistant=hf,w.geoAzimuthalEquidistantRaw=ml,w.geoBounds=Ye,w.geoCentroid=Ct,w.geoCircle=fr,w.geoClipAntimeridian=qt,w.geoClipCircle=Ir,w.geoClipExtent=Yn,w.geoClipRectangle=yn,w.geoConicConformal=xl,w.geoConicConformalRaw=Xl,w.geoConicEqualArea=Gl,w.geoConicEqualAreaRaw=bo,w.geoConicEquidistant=Lf,w.geoConicEquidistantRaw=Wu,w.geoContains=mr,w.geoDistance=Ln,w.geoEqualEarth=ju,w.geoEqualEarthRaw=_o,w.geoEquirectangular=Yu,w.geoEquirectangularRaw=Zl,w.geoGnomonic=nl,w.geoGnomonicRaw=Ms,w.geoGraticule=sn,w.geoGraticule10=Cn,w.geoIdentity=al,w.geoInterpolate=Mn,w.geoLength=Cr,w.geoMercator=Cf,w.geoMercatorRaw=Ts,w.geoNaturalEarth1=Ss,w.geoNaturalEarth1Raw=js,w.geoOrthographic=Ho,w.geoOrthographicRaw=eo,w.geoPath=su,w.geoProjection=Uo,w.geoProjectionMutator=fu,w.geoRotation=wt,w.geoStereographic=Xu,w.geoStereographicRaw=Es,w.geoStream=B,w.geoTransform=ff,w.geoTransverseMercator=Zu,w.geoTransverseMercatorRaw=hu,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(Ve,Ae){return Ve.parent===Ae.parent?1:2}function M(Ve){return Ve.reduce(T,0)/Ve.length}function T(Ve,Ae){return Ve+Ae.x}function e(Ve){return 1+Ve.reduce(a,0)}function a(Ve,Ae){return Math.max(Ve,Ae.y)}function n(Ve){for(var Ae;Ae=Ve.children;)Ve=Ae[0];return Ve}function r(Ve){for(var Ae;Ae=Ve.children;)Ve=Ae[Ae.length-1];return Ve}function t(){var Ve=f,Ae=1,He=1,Je=!1;function tt(St){var _t,kt=0;St.eachAfter(function(Zt){var cr=Zt.children;cr?(Zt.x=M(cr),Zt.y=e(cr)):(Zt.x=_t?kt+=Ve(Zt,_t):0,Zt.y=0,_t=Zt)});var jt=n(St),Bt=r(St),Wt=jt.x-Ve(jt,Bt)/2,Qt=Bt.x+Ve(Bt,jt)/2;return St.eachAfter(Je?function(Zt){Zt.x=(Zt.x-St.x)*Ae,Zt.y=(St.y-Zt.y)*He}:function(Zt){Zt.x=(Zt.x-Wt)/(Qt-Wt)*Ae,Zt.y=(1-(St.y?Zt.y/St.y:1))*He})}return tt.separation=function(St){return arguments.length?(Ve=St,tt):Ve},tt.size=function(St){return arguments.length?(Je=!1,Ae=+St[0],He=+St[1],tt):Je?null:[Ae,He]},tt.nodeSize=function(St){return arguments.length?(Je=!0,Ae=+St[0],He=+St[1],tt):Je?[Ae,He]:null},tt}function h(Ve){var Ae=0,He=Ve.children,Je=He&&He.length;if(!Je)Ae=1;else for(;--Je>=0;)Ae+=He[Je].value;Ve.value=Ae}function i(){return this.eachAfter(h)}function s(Ve){var Ae=this,He,Je=[Ae],tt,St,_t;do for(He=Je.reverse(),Je=[];Ae=He.pop();)if(Ve(Ae),tt=Ae.children,tt)for(St=0,_t=tt.length;St<_t;++St)Je.push(tt[St]);while(Je.length);return this}function y(Ve){for(var Ae=this,He=[Ae],Je,tt;Ae=He.pop();)if(Ve(Ae),Je=Ae.children,Je)for(tt=Je.length-1;tt>=0;--tt)He.push(Je[tt]);return this}function d(Ve){for(var Ae=this,He=[Ae],Je=[],tt,St,_t;Ae=He.pop();)if(Je.push(Ae),tt=Ae.children,tt)for(St=0,_t=tt.length;St<_t;++St)He.push(tt[St]);for(;Ae=Je.pop();)Ve(Ae);return this}function p(Ve){return this.eachAfter(function(Ae){for(var He=+Ve(Ae.data)||0,Je=Ae.children,tt=Je&&Je.length;--tt>=0;)He+=Je[tt].value;Ae.value=He})}function c(Ve){return this.eachBefore(function(Ae){Ae.children&&Ae.children.sort(Ve)})}function m(Ve){for(var Ae=this,He=l(Ae,Ve),Je=[Ae];Ae!==He;)Ae=Ae.parent,Je.push(Ae);for(var tt=Je.length;Ve!==He;)Je.splice(tt,0,Ve),Ve=Ve.parent;return Je}function l(Ve,Ae){if(Ve===Ae)return Ve;var He=Ve.ancestors(),Je=Ae.ancestors(),tt=null;for(Ve=He.pop(),Ae=Je.pop();Ve===Ae;)tt=Ve,Ve=He.pop(),Ae=Je.pop();return tt}function x(){for(var Ve=this,Ae=[Ve];Ve=Ve.parent;)Ae.push(Ve);return Ae}function u(){var Ve=[];return this.each(function(Ae){Ve.push(Ae)}),Ve}function A(){var Ve=[];return this.eachBefore(function(Ae){Ae.children||Ve.push(Ae)}),Ve}function _(){var Ve=this,Ae=[];return Ve.each(function(He){He!==Ve&&Ae.push({source:He.parent,target:He})}),Ae}function g(Ve,Ae){var He=new k(Ve),Je=+Ve.value&&(He.value=Ve.value),tt,St=[He],_t,kt,jt,Bt;for(Ae==null&&(Ae=v);tt=St.pop();)if(Je&&(tt.value=+tt.data.value),(kt=Ae(tt.data))&&(Bt=kt.length))for(tt.children=new Array(Bt),jt=Bt-1;jt>=0;--jt)St.push(_t=tt.children[jt]=new k(kt[jt])),_t.parent=tt,_t.depth=tt.depth+1;return He.eachBefore(S)}function b(){return g(this).eachBefore(C)}function v(Ve){return Ve.children}function C(Ve){Ve.data=Ve.data.data}function S(Ve){var Ae=0;do Ve.height=Ae;while((Ve=Ve.parent)&&Ve.height<++Ae)}function k(Ve){this.data=Ve,this.depth=this.height=0,this.parent=null}k.prototype=g.prototype={constructor:k,count:i,each:s,eachAfter:d,eachBefore:y,sum:p,sort:c,path:m,ancestors:x,descendants:u,leaves:A,links:_,copy:b};var E=Array.prototype.slice;function F(Ve){for(var Ae=Ve.length,He,Je;Ae;)Je=Math.random()*Ae--|0,He=Ve[Ae],Ve[Ae]=Ve[Je],Ve[Je]=He;return Ve}function I(Ve){for(var Ae=0,He=(Ve=F(E.call(Ve))).length,Je=[],tt,St;Ae<He;)tt=Ve[Ae],St&&O(St,tt)?++Ae:(St=B(Je=D(Je,tt)),Ae=0);return St}function D(Ve,Ae){var He,Je;if(z(Ae,Ve))return[Ae];for(He=0;He<Ve.length;++He)if(R(Ae,Ve[He])&&z(Q(Ve[He],Ae),Ve))return[Ve[He],Ae];for(He=0;He<Ve.length-1;++He)for(Je=He+1;Je<Ve.length;++Je)if(R(Q(Ve[He],Ve[Je]),Ae)&&R(Q(Ve[He],Ae),Ve[Je])&&R(Q(Ve[Je],Ae),Ve[He])&&z(X(Ve[He],Ve[Je],Ae),Ve))return[Ve[He],Ve[Je],Ae];throw new Error}function R(Ve,Ae){var He=Ve.r-Ae.r,Je=Ae.x-Ve.x,tt=Ae.y-Ve.y;return He<0||He*He<Je*Je+tt*tt}function O(Ve,Ae){var He=Ve.r-Ae.r+1e-6,Je=Ae.x-Ve.x,tt=Ae.y-Ve.y;return He>0&&He*He>Je*Je+tt*tt}function z(Ve,Ae){for(var He=0;He<Ae.length;++He)if(!O(Ve,Ae[He]))return!1;return!0}function B(Ve){switch(Ve.length){case 1:return G(Ve[0]);case 2:return Q(Ve[0],Ve[1]);case 3:return X(Ve[0],Ve[1],Ve[2])}}function G(Ve){return{x:Ve.x,y:Ve.y,r:Ve.r}}function Q(Ve,Ae){var He=Ve.x,Je=Ve.y,tt=Ve.r,St=Ae.x,_t=Ae.y,kt=Ae.r,jt=St-He,Bt=_t-Je,Wt=kt-tt,Qt=Math.sqrt(jt*jt+Bt*Bt);return{x:(He+St+jt/Qt*Wt)/2,y:(Je+_t+Bt/Qt*Wt)/2,r:(Qt+tt+kt)/2}}function X(Ve,Ae,He){var Je=Ve.x,tt=Ve.y,St=Ve.r,_t=Ae.x,kt=Ae.y,jt=Ae.r,Bt=He.x,Wt=He.y,Qt=He.r,Zt=Je-_t,cr=Je-Bt,Xr=tt-kt,vn=tt-Wt,en=jt-St,ft=Qt-St,ar=Je*Je+tt*tt-St*St,rr=ar-_t*_t-kt*kt+jt*jt,Kt=ar-Bt*Bt-Wt*Wt+Qt*Qt,Er=cr*Xr-Zt*vn,st=(Xr*Kt-vn*rr)/(Er*2)-Je,et=(vn*en-Xr*ft)/Er,vt=(cr*rr-Zt*Kt)/(Er*2)-tt,pt=(Zt*ft-cr*en)/Er,Ct=et*et+pt*pt-1,Ht=2*(St+st*et+vt*pt),Pe=st*st+vt*vt-St*St,ke=-(Ct?(Ht+Math.sqrt(Ht*Ht-4*Ct*Pe))/(2*Ct):Pe/Ht);return{x:Je+st+et*ke,y:tt+vt+pt*ke,r:ke}}function j(Ve,Ae,He){var Je=Ve.x-Ae.x,tt,St,_t=Ve.y-Ae.y,kt,jt,Bt=Je*Je+_t*_t;Bt?(St=Ae.r+He.r,St*=St,jt=Ve.r+He.r,jt*=jt,St>jt?(tt=(Bt+jt-St)/(2*Bt),kt=Math.sqrt(Math.max(0,jt/Bt-tt*tt)),He.x=Ve.x-tt*Je-kt*_t,He.y=Ve.y-tt*_t+kt*Je):(tt=(Bt+St-jt)/(2*Bt),kt=Math.sqrt(Math.max(0,St/Bt-tt*tt)),He.x=Ae.x+tt*Je-kt*_t,He.y=Ae.y+tt*_t+kt*Je)):(He.x=Ae.x+He.r,He.y=Ae.y)}function re(Ve,Ae){var He=Ve.r+Ae.r-1e-6,Je=Ae.x-Ve.x,tt=Ae.y-Ve.y;return He>0&&He*He>Je*Je+tt*tt}function ue(Ve){var Ae=Ve._,He=Ve.next._,Je=Ae.r+He.r,tt=(Ae.x*He.r+He.x*Ae.r)/Je,St=(Ae.y*He.r+He.y*Ae.r)/Je;return tt*tt+St*St}function K(Ve){this._=Ve,this.next=null,this.previous=null}function te(Ve){if(!(tt=Ve.length))return 0;var Ae,He,Je,tt,St,_t,kt,jt,Bt,Wt,Qt;if(Ae=Ve[0],Ae.x=0,Ae.y=0,!(tt>1))return Ae.r;if(He=Ve[1],Ae.x=-He.r,He.x=Ae.r,He.y=0,!(tt>2))return Ae.r+He.r;j(He,Ae,Je=Ve[2]),Ae=new K(Ae),He=new K(He),Je=new K(Je),Ae.next=Je.previous=He,He.next=Ae.previous=Je,Je.next=He.previous=Ae;e:for(kt=3;kt<tt;++kt){j(Ae._,He._,Je=Ve[kt]),Je=new K(Je),jt=He.next,Bt=Ae.previous,Wt=He._.r,Qt=Ae._.r;do if(Wt<=Qt){if(re(jt._,Je._)){He=jt,Ae.next=He,He.previous=Ae,--kt;continue e}Wt+=jt._.r,jt=jt.next}else{if(re(Bt._,Je._)){Ae=Bt,Ae.next=He,He.previous=Ae,--kt;continue e}Qt+=Bt._.r,Bt=Bt.previous}while(jt!==Bt.next);for(Je.previous=Ae,Je.next=He,Ae.next=He.previous=He=Je,St=ue(Ae);(Je=Je.next)!==He;)(_t=ue(Je))<St&&(Ae=Je,St=_t);He=Ae.next}for(Ae=[He._],Je=He;(Je=Je.next)!==He;)Ae.push(Je._);for(Je=I(Ae),kt=0;kt<tt;++kt)Ae=Ve[kt],Ae.x-=Je.x,Ae.y-=Je.y;return Je.r}function Y(Ve){return te(Ve),Ve}function V(Ve){return Ve==null?null:ee(Ve)}function ee(Ve){if(typeof Ve!="function")throw new Error;return Ve}function ne(){return 0}function Z(Ve){return function(){return Ve}}function q(Ve){return Math.sqrt(Ve.value)}function ie(){var Ve=null,Ae=1,He=1,Je=ne;function tt(St){return St.x=Ae/2,St.y=He/2,Ve?St.eachBefore(se(Ve)).eachAfter(ae(Je,.5)).eachBefore(oe(1)):St.eachBefore(se(q)).eachAfter(ae(ne,1)).eachAfter(ae(Je,St.r/Math.min(Ae,He))).eachBefore(oe(Math.min(Ae,He)/(2*St.r))),St}return tt.radius=function(St){return arguments.length?(Ve=V(St),tt):Ve},tt.size=function(St){return arguments.length?(Ae=+St[0],He=+St[1],tt):[Ae,He]},tt.padding=function(St){return arguments.length?(Je=typeof St=="function"?St:Z(+St),tt):Je},tt}function se(Ve){return function(Ae){Ae.children||(Ae.r=Math.max(0,+Ve(Ae)||0))}}function ae(Ve,Ae){return function(He){if(Je=He.children){var Je,tt,St=Je.length,_t=Ve(He)*Ae||0,kt;if(_t)for(tt=0;tt<St;++tt)Je[tt].r+=_t;if(kt=te(Je),_t)for(tt=0;tt<St;++tt)Je[tt].r-=_t;He.r=kt+_t}}}function oe(Ve){return function(Ae){var He=Ae.parent;Ae.r*=Ve,He&&(Ae.x=He.x+Ve*Ae.x,Ae.y=He.y+Ve*Ae.y)}}function be(Ve){Ve.x0=Math.round(Ve.x0),Ve.y0=Math.round(Ve.y0),Ve.x1=Math.round(Ve.x1),Ve.y1=Math.round(Ve.y1)}function ce(Ve,Ae,He,Je,tt){for(var St=Ve.children,_t,kt=-1,jt=St.length,Bt=Ve.value&&(Je-Ae)/Ve.value;++kt<jt;)_t=St[kt],_t.y0=He,_t.y1=tt,_t.x0=Ae,_t.x1=Ae+=_t.value*Bt}function de(){var Ve=1,Ae=1,He=0,Je=!1;function tt(_t){var kt=_t.height+1;return _t.x0=_t.y0=He,_t.x1=Ve,_t.y1=Ae/kt,_t.eachBefore(St(Ae,kt)),Je&&_t.eachBefore(be),_t}function St(_t,kt){return function(jt){jt.children&&ce(jt,jt.x0,_t*(jt.depth+1)/kt,jt.x1,_t*(jt.depth+2)/kt);var Bt=jt.x0,Wt=jt.y0,Qt=jt.x1-He,Zt=jt.y1-He;Qt<Bt&&(Bt=Qt=(Bt+Qt)/2),Zt<Wt&&(Wt=Zt=(Wt+Zt)/2),jt.x0=Bt,jt.y0=Wt,jt.x1=Qt,jt.y1=Zt}}return tt.round=function(_t){return arguments.length?(Je=!!_t,tt):Je},tt.size=function(_t){return arguments.length?(Ve=+_t[0],Ae=+_t[1],tt):[Ve,Ae]},tt.padding=function(_t){return arguments.length?(He=+_t,tt):He},tt}var ye="$",ge={depth:-1},me={};function Me(Ve){return Ve.id}function Le(Ve){return Ve.parentId}function Oe(){var Ve=Me,Ae=Le;function He(Je){var tt,St,_t=Je.length,kt,jt,Bt,Wt=new Array(_t),Qt,Zt,cr={};for(St=0;St<_t;++St)tt=Je[St],Bt=Wt[St]=new k(tt),(Qt=Ve(tt,St,Je))!=null&&(Qt+="")&&(Zt=ye+(Bt.id=Qt),cr[Zt]=Zt in cr?me:Bt);for(St=0;St<_t;++St)if(Bt=Wt[St],Qt=Ae(Je[St],St,Je),Qt==null||!(Qt+="")){if(kt)throw new Error("multiple roots");kt=Bt}else{if(jt=cr[ye+Qt],!jt)throw new Error("missing: "+Qt);if(jt===me)throw new Error("ambiguous: "+Qt);jt.children?jt.children.push(Bt):jt.children=[Bt],Bt.parent=jt}if(!kt)throw new Error("no root");if(kt.parent=ge,kt.eachBefore(function(Xr){Xr.depth=Xr.parent.depth+1,--_t}).eachBefore(S),kt.parent=null,_t>0)throw new Error("cycle");return kt}return He.id=function(Je){return arguments.length?(Ve=ee(Je),He):Ve},He.parentId=function(Je){return arguments.length?(Ae=ee(Je),He):Ae},He}function _e(Ve,Ae){return Ve.parent===Ae.parent?1:2}function Ee(Ve){var Ae=Ve.children;return Ae?Ae[0]:Ve.t}function Ze(Ve){var Ae=Ve.children;return Ae?Ae[Ae.length-1]:Ve.t}function Ge(Ve,Ae,He){var Je=He/(Ae.i-Ve.i);Ae.c-=Je,Ae.s+=He,Ve.c+=Je,Ae.z+=He,Ae.m+=He}function Fe(Ve){for(var Ae=0,He=0,Je=Ve.children,tt=Je.length,St;--tt>=0;)St=Je[tt],St.z+=Ae,St.m+=Ae,Ae+=St.s+(He+=St.c)}function Re(Ve,Ae,He){return Ve.a.parent===Ae.parent?Ve.a:He}function We(Ve,Ae){this._=Ve,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ae}We.prototype=Object.create(k.prototype);function xt(Ve){for(var Ae=new We(Ve,0),He,Je=[Ae],tt,St,_t,kt;He=Je.pop();)if(St=He._.children)for(He.children=new Array(kt=St.length),_t=kt-1;_t>=0;--_t)Je.push(tt=He.children[_t]=new We(St[_t],_t)),tt.parent=He;return(Ae.parent=new We(null,0)).children=[Ae],Ae}function Nt(){var Ve=_e,Ae=1,He=1,Je=null;function tt(Bt){var Wt=xt(Bt);if(Wt.eachAfter(St),Wt.parent.m=-Wt.z,Wt.eachBefore(_t),Je)Bt.eachBefore(jt);else{var Qt=Bt,Zt=Bt,cr=Bt;Bt.eachBefore(function(ar){ar.x<Qt.x&&(Qt=ar),ar.x>Zt.x&&(Zt=ar),ar.depth>cr.depth&&(cr=ar)});var Xr=Qt===Zt?1:Ve(Qt,Zt)/2,vn=Xr-Qt.x,en=Ae/(Zt.x+Xr+vn),ft=He/(cr.depth||1);Bt.eachBefore(function(ar){ar.x=(ar.x+vn)*en,ar.y=ar.depth*ft})}return Bt}function St(Bt){var Wt=Bt.children,Qt=Bt.parent.children,Zt=Bt.i?Qt[Bt.i-1]:null;if(Wt){Fe(Bt);var cr=(Wt[0].z+Wt[Wt.length-1].z)/2;Zt?(Bt.z=Zt.z+Ve(Bt._,Zt._),Bt.m=Bt.z-cr):Bt.z=cr}else Zt&&(Bt.z=Zt.z+Ve(Bt._,Zt._));Bt.parent.A=kt(Bt,Zt,Bt.parent.A||Qt[0])}function _t(Bt){Bt._.x=Bt.z+Bt.parent.m,Bt.m+=Bt.parent.m}function kt(Bt,Wt,Qt){if(Wt){for(var Zt=Bt,cr=Bt,Xr=Wt,vn=Zt.parent.children[0],en=Zt.m,ft=cr.m,ar=Xr.m,rr=vn.m,Kt;Xr=Ze(Xr),Zt=Ee(Zt),Xr&&Zt;)vn=Ee(vn),cr=Ze(cr),cr.a=Bt,Kt=Xr.z+ar-Zt.z-en+Ve(Xr._,Zt._),Kt>0&&(Ge(Re(Xr,Bt,Qt),Bt,Kt),en+=Kt,ft+=Kt),ar+=Xr.m,en+=Zt.m,rr+=vn.m,ft+=cr.m;Xr&&!Ze(cr)&&(cr.t=Xr,cr.m+=ar-ft),Zt&&!Ee(vn)&&(vn.t=Zt,vn.m+=en-rr,Qt=Bt)}return Qt}function jt(Bt){Bt.x*=Ae,Bt.y=Bt.depth*He}return tt.separation=function(Bt){return arguments.length?(Ve=Bt,tt):Ve},tt.size=function(Bt){return arguments.length?(Je=!1,Ae=+Bt[0],He=+Bt[1],tt):Je?null:[Ae,He]},tt.nodeSize=function(Bt){return arguments.length?(Je=!0,Ae=+Bt[0],He=+Bt[1],tt):Je?[Ae,He]:null},tt}function tr(Ve,Ae,He,Je,tt){for(var St=Ve.children,_t,kt=-1,jt=St.length,Bt=Ve.value&&(tt-He)/Ve.value;++kt<jt;)_t=St[kt],_t.x0=Ae,_t.x1=Je,_t.y0=He,_t.y1=He+=_t.value*Bt}var Vt=(1+Math.sqrt(5))/2;function Pt(Ve,Ae,He,Je,tt,St){for(var _t=[],kt=Ae.children,jt,Bt,Wt=0,Qt=0,Zt=kt.length,cr,Xr,vn=Ae.value,en,ft,ar,rr,Kt,Er,st;Wt<Zt;){cr=tt-He,Xr=St-Je;do en=kt[Qt++].value;while(!en&&Qt<Zt);for(ft=ar=en,Er=Math.max(Xr/cr,cr/Xr)/(vn*Ve),st=en*en*Er,Kt=Math.max(ar/st,st/ft);Qt<Zt;++Qt){if(en+=Bt=kt[Qt].value,Bt<ft&&(ft=Bt),Bt>ar&&(ar=Bt),st=en*en*Er,rr=Math.max(ar/st,st/ft),rr>Kt){en-=Bt;break}Kt=rr}_t.push(jt={value:en,dice:cr<Xr,children:kt.slice(Wt,Qt)}),jt.dice?ce(jt,He,Je,tt,vn?Je+=Xr*en/vn:St):tr(jt,He,Je,vn?He+=cr*en/vn:tt,St),vn-=en,Wt=Qt}return _t}var $t=function Ve(Ae){function He(Je,tt,St,_t,kt){Pt(Ae,Je,tt,St,_t,kt)}return He.ratio=function(Je){return Ve((Je=+Je)>1?Je:1)},He}(Vt);function Ut(){var Ve=$t,Ae=!1,He=1,Je=1,tt=[0],St=ne,_t=ne,kt=ne,jt=ne,Bt=ne;function Wt(Zt){return Zt.x0=Zt.y0=0,Zt.x1=He,Zt.y1=Je,Zt.eachBefore(Qt),tt=[0],Ae&&Zt.eachBefore(be),Zt}function Qt(Zt){var cr=tt[Zt.depth],Xr=Zt.x0+cr,vn=Zt.y0+cr,en=Zt.x1-cr,ft=Zt.y1-cr;en<Xr&&(Xr=en=(Xr+en)/2),ft<vn&&(vn=ft=(vn+ft)/2),Zt.x0=Xr,Zt.y0=vn,Zt.x1=en,Zt.y1=ft,Zt.children&&(cr=tt[Zt.depth+1]=St(Zt)/2,Xr+=Bt(Zt)-cr,vn+=_t(Zt)-cr,en-=kt(Zt)-cr,ft-=jt(Zt)-cr,en<Xr&&(Xr=en=(Xr+en)/2),ft<vn&&(vn=ft=(vn+ft)/2),Ve(Zt,Xr,vn,en,ft))}return Wt.round=function(Zt){return arguments.length?(Ae=!!Zt,Wt):Ae},Wt.size=function(Zt){return arguments.length?(He=+Zt[0],Je=+Zt[1],Wt):[He,Je]},Wt.tile=function(Zt){return arguments.length?(Ve=ee(Zt),Wt):Ve},Wt.padding=function(Zt){return arguments.length?Wt.paddingInner(Zt).paddingOuter(Zt):Wt.paddingInner()},Wt.paddingInner=function(Zt){return arguments.length?(St=typeof Zt=="function"?Zt:Z(+Zt),Wt):St},Wt.paddingOuter=function(Zt){return arguments.length?Wt.paddingTop(Zt).paddingRight(Zt).paddingBottom(Zt).paddingLeft(Zt):Wt.paddingTop()},Wt.paddingTop=function(Zt){return arguments.length?(_t=typeof Zt=="function"?Zt:Z(+Zt),Wt):_t},Wt.paddingRight=function(Zt){return arguments.length?(kt=typeof Zt=="function"?Zt:Z(+Zt),Wt):kt},Wt.paddingBottom=function(Zt){return arguments.length?(jt=typeof Zt=="function"?Zt:Z(+Zt),Wt):jt},Wt.paddingLeft=function(Zt){return arguments.length?(Bt=typeof Zt=="function"?Zt:Z(+Zt),Wt):Bt},Wt}function Lt(Ve,Ae,He,Je,tt){var St=Ve.children,_t,kt=St.length,jt,Bt=new Array(kt+1);for(Bt[0]=jt=_t=0;_t<kt;++_t)Bt[_t+1]=jt+=St[_t].value;Wt(0,kt,Ve.value,Ae,He,Je,tt);function Wt(Qt,Zt,cr,Xr,vn,en,ft){if(Qt>=Zt-1){var ar=St[Qt];ar.x0=Xr,ar.y0=vn,ar.x1=en,ar.y1=ft;return}for(var rr=Bt[Qt],Kt=cr/2+rr,Er=Qt+1,st=Zt-1;Er<st;){var et=Er+st>>>1;Bt[et]<Kt?Er=et+1:st=et}Kt-Bt[Er-1]<Bt[Er]-Kt&&Qt+1<Er&&--Er;var vt=Bt[Er]-rr,pt=cr-vt;if(en-Xr>ft-vn){var Ct=(Xr*pt+en*vt)/cr;Wt(Qt,Er,vt,Xr,vn,Ct,ft),Wt(Er,Zt,pt,Ct,vn,en,ft)}else{var Ht=(vn*pt+ft*vt)/cr;Wt(Qt,Er,vt,Xr,vn,en,Ht),Wt(Er,Zt,pt,Xr,Ht,en,ft)}}}function Ye(Ve,Ae,He,Je,tt){(Ve.depth&1?tr:ce)(Ve,Ae,He,Je,tt)}var ot=function Ve(Ae){function He(Je,tt,St,_t,kt){if((jt=Je._squarify)&&jt.ratio===Ae)for(var jt,Bt,Wt,Qt,Zt=-1,cr,Xr=jt.length,vn=Je.value;++Zt<Xr;){for(Bt=jt[Zt],Wt=Bt.children,Qt=Bt.value=0,cr=Wt.length;Qt<cr;++Qt)Bt.value+=Wt[Qt].value;Bt.dice?ce(Bt,tt,St,_t,St+=(kt-St)*Bt.value/vn):tr(Bt,tt,St,tt+=(_t-tt)*Bt.value/vn,kt),vn-=Bt.value}else Je._squarify=jt=Pt(Ae,Je,tt,St,_t,kt),jt.ratio=Ae}return He.ratio=function(Je){return Ve((Je=+Je)>1?Je:1)},He}(Vt);w.cluster=t,w.hierarchy=g,w.pack=ie,w.packEnclose=I,w.packSiblings=Y,w.partition=de,w.stratify=Oe,w.tree=Nt,w.treemap=Ut,w.treemapBinary=Lt,w.treemapDice=ce,w.treemapResquarify=ot,w.treemapSlice=tr,w.treemapSliceDice=Ye,w.treemapSquarify=$t,Object.defineProperty(w,"__esModule",{value:!0})})},{}],116:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-color")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(_e,Ee,Ze,Ge,Fe){var Re=_e*_e,We=Re*_e;return((1-3*_e+3*Re-We)*Ee+(4-6*Re+3*We)*Ze+(1+3*_e+3*Re-3*We)*Ge+We*Fe)/6}function T(_e){var Ee=_e.length-1;return function(Ze){var Ge=Ze<=0?Ze=0:Ze>=1?(Ze=1,Ee-1):Math.floor(Ze*Ee),Fe=_e[Ge],Re=_e[Ge+1],We=Ge>0?_e[Ge-1]:2*Fe-Re,xt=Ge<Ee-1?_e[Ge+2]:2*Re-Fe;return M((Ze-Ge/Ee)*Ee,We,Fe,Re,xt)}}function e(_e){var Ee=_e.length;return function(Ze){var Ge=Math.floor(((Ze%=1)<0?++Ze:Ze)*Ee),Fe=_e[(Ge+Ee-1)%Ee],Re=_e[Ge%Ee],We=_e[(Ge+1)%Ee],xt=_e[(Ge+2)%Ee];return M((Ze-Ge/Ee)*Ee,Fe,Re,We,xt)}}function a(_e){return function(){return _e}}function n(_e,Ee){return function(Ze){return _e+Ze*Ee}}function r(_e,Ee,Ze){return _e=Math.pow(_e,Ze),Ee=Math.pow(Ee,Ze)-_e,Ze=1/Ze,function(Ge){return Math.pow(_e+Ge*Ee,Ze)}}function t(_e,Ee){var Ze=Ee-_e;return Ze?n(_e,Ze>180||Ze<-180?Ze-360*Math.round(Ze/360):Ze):a(isNaN(_e)?Ee:_e)}function h(_e){return(_e=+_e)==1?i:function(Ee,Ze){return Ze-Ee?r(Ee,Ze,_e):a(isNaN(Ee)?Ze:Ee)}}function i(_e,Ee){var Ze=Ee-_e;return Ze?n(_e,Ze):a(isNaN(_e)?Ee:_e)}var s=function _e(Ee){var Ze=h(Ee);function Ge(Fe,Re){var We=Ze((Fe=f.rgb(Fe)).r,(Re=f.rgb(Re)).r),xt=Ze(Fe.g,Re.g),Nt=Ze(Fe.b,Re.b),tr=i(Fe.opacity,Re.opacity);return function(Vt){return Fe.r=We(Vt),Fe.g=xt(Vt),Fe.b=Nt(Vt),Fe.opacity=tr(Vt),Fe+""}}return Ge.gamma=_e,Ge}(1);function y(_e){return function(Ee){var Ze=Ee.length,Ge=new Array(Ze),Fe=new Array(Ze),Re=new Array(Ze),We,xt;for(We=0;We<Ze;++We)xt=f.rgb(Ee[We]),Ge[We]=xt.r||0,Fe[We]=xt.g||0,Re[We]=xt.b||0;return Ge=_e(Ge),Fe=_e(Fe),Re=_e(Re),xt.opacity=1,function(Nt){return xt.r=Ge(Nt),xt.g=Fe(Nt),xt.b=Re(Nt),xt+""}}}var d=y(T),p=y(e);function c(_e,Ee){Ee||(Ee=[]);var Ze=_e?Math.min(Ee.length,_e.length):0,Ge=Ee.slice(),Fe;return function(Re){for(Fe=0;Fe<Ze;++Fe)Ge[Fe]=_e[Fe]*(1-Re)+Ee[Fe]*Re;return Ge}}function m(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function l(_e,Ee){return(m(Ee)?c:x)(_e,Ee)}function x(_e,Ee){var Ze=Ee?Ee.length:0,Ge=_e?Math.min(Ze,_e.length):0,Fe=new Array(Ge),Re=new Array(Ze),We;for(We=0;We<Ge;++We)Fe[We]=k(_e[We],Ee[We]);for(;We<Ze;++We)Re[We]=Ee[We];return function(xt){for(We=0;We<Ge;++We)Re[We]=Fe[We](xt);return Re}}function u(_e,Ee){var Ze=new Date;return _e=+_e,Ee=+Ee,function(Ge){return Ze.setTime(_e*(1-Ge)+Ee*Ge),Ze}}function A(_e,Ee){return _e=+_e,Ee=+Ee,function(Ze){return _e*(1-Ze)+Ee*Ze}}function _(_e,Ee){var Ze={},Ge={},Fe;(_e===null||typeof _e!="object")&&(_e={}),(Ee===null||typeof Ee!="object")&&(Ee={});for(Fe in Ee)Fe in _e?Ze[Fe]=k(_e[Fe],Ee[Fe]):Ge[Fe]=Ee[Fe];return function(Re){for(Fe in Ze)Ge[Fe]=Ze[Fe](Re);return Ge}}var g=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(g.source,"g");function v(_e){return function(){return _e}}function C(_e){return function(Ee){return _e(Ee)+""}}function S(_e,Ee){var Ze=g.lastIndex=b.lastIndex=0,Ge,Fe,Re,We=-1,xt=[],Nt=[];for(_e=_e+"",Ee=Ee+"";(Ge=g.exec(_e))&&(Fe=b.exec(Ee));)(Re=Fe.index)>Ze&&(Re=Ee.slice(Ze,Re),xt[We]?xt[We]+=Re:xt[++We]=Re),(Ge=Ge[0])===(Fe=Fe[0])?xt[We]?xt[We]+=Fe:xt[++We]=Fe:(xt[++We]=null,Nt.push({i:We,x:A(Ge,Fe)})),Ze=b.lastIndex;return Ze<Ee.length&&(Re=Ee.slice(Ze),xt[We]?xt[We]+=Re:xt[++We]=Re),xt.length<2?Nt[0]?C(Nt[0].x):v(Ee):(Ee=Nt.length,function(tr){for(var Vt=0,Pt;Vt<Ee;++Vt)xt[(Pt=Nt[Vt]).i]=Pt.x(tr);return xt.join("")})}function k(_e,Ee){var Ze=typeof Ee,Ge;return Ee==null||Ze==="boolean"?a(Ee):(Ze==="number"?A:Ze==="string"?(Ge=f.color(Ee))?(Ee=Ge,s):S:Ee instanceof f.color?s:Ee instanceof Date?u:m(Ee)?c:Array.isArray(Ee)?x:typeof Ee.valueOf!="function"&&typeof Ee.toString!="function"||isNaN(Ee)?_:A)(_e,Ee)}function E(_e){var Ee=_e.length;return function(Ze){return _e[Math.max(0,Math.min(Ee-1,Math.floor(Ze*Ee)))]}}function F(_e,Ee){var Ze=t(+_e,+Ee);return function(Ge){var Fe=Ze(Ge);return Fe-360*Math.floor(Fe/360)}}function I(_e,Ee){return _e=+_e,Ee=+Ee,function(Ze){return Math.round(_e*(1-Ze)+Ee*Ze)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(_e,Ee,Ze,Ge,Fe,Re){var We,xt,Nt;return(We=Math.sqrt(_e*_e+Ee*Ee))&&(_e/=We,Ee/=We),(Nt=_e*Ze+Ee*Ge)&&(Ze-=_e*Nt,Ge-=Ee*Nt),(xt=Math.sqrt(Ze*Ze+Ge*Ge))&&(Ze/=xt,Ge/=xt,Nt/=xt),_e*Ge<Ee*Ze&&(_e=-_e,Ee=-Ee,Nt=-Nt,We=-We),{translateX:Fe,translateY:Re,rotate:Math.atan2(Ee,_e)*D,skewX:Math.atan(Nt)*D,scaleX:We,scaleY:xt}}var z,B,G,Q;function X(_e){return _e==="none"?R:(z||(z=document.createElement("DIV"),B=document.documentElement,G=document.defaultView),z.style.transform=_e,_e=G.getComputedStyle(B.appendChild(z),null).getPropertyValue("transform"),B.removeChild(z),_e=_e.slice(7,-1).split(","),O(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function j(_e){return _e==null||(Q||(Q=document.createElementNS("http://www.w3.org/2000/svg","g")),Q.setAttribute("transform",_e),!(_e=Q.transform.baseVal.consolidate()))?R:(_e=_e.matrix,O(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function re(_e,Ee,Ze,Ge){function Fe(tr){return tr.length?tr.pop()+" ":""}function Re(tr,Vt,Pt,$t,Ut,Lt){if(tr!==Pt||Vt!==$t){var Ye=Ut.push("translate(",null,Ee,null,Ze);Lt.push({i:Ye-4,x:A(tr,Pt)},{i:Ye-2,x:A(Vt,$t)})}else(Pt||$t)&&Ut.push("translate("+Pt+Ee+$t+Ze)}function We(tr,Vt,Pt,$t){tr!==Vt?(tr-Vt>180?Vt+=360:Vt-tr>180&&(tr+=360),$t.push({i:Pt.push(Fe(Pt)+"rotate(",null,Ge)-2,x:A(tr,Vt)})):Vt&&Pt.push(Fe(Pt)+"rotate("+Vt+Ge)}function xt(tr,Vt,Pt,$t){tr!==Vt?$t.push({i:Pt.push(Fe(Pt)+"skewX(",null,Ge)-2,x:A(tr,Vt)}):Vt&&Pt.push(Fe(Pt)+"skewX("+Vt+Ge)}function Nt(tr,Vt,Pt,$t,Ut,Lt){if(tr!==Pt||Vt!==$t){var Ye=Ut.push(Fe(Ut)+"scale(",null,",",null,")");Lt.push({i:Ye-4,x:A(tr,Pt)},{i:Ye-2,x:A(Vt,$t)})}else(Pt!==1||$t!==1)&&Ut.push(Fe(Ut)+"scale("+Pt+","+$t+")")}return function(tr,Vt){var Pt=[],$t=[];return tr=_e(tr),Vt=_e(Vt),Re(tr.translateX,tr.translateY,Vt.translateX,Vt.translateY,Pt,$t),We(tr.rotate,Vt.rotate,Pt,$t),xt(tr.skewX,Vt.skewX,Pt,$t),Nt(tr.scaleX,tr.scaleY,Vt.scaleX,Vt.scaleY,Pt,$t),tr=Vt=null,function(Ut){for(var Lt=-1,Ye=$t.length,ot;++Lt<Ye;)Pt[(ot=$t[Lt]).i]=ot.x(Ut);return Pt.join("")}}}var ue=re(X,"px, ","px)","deg)"),K=re(j,", ",")",")"),te=Math.SQRT2,Y=2,V=4,ee=1e-12;function ne(_e){return((_e=Math.exp(_e))+1/_e)/2}function Z(_e){return((_e=Math.exp(_e))-1/_e)/2}function q(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ie(_e,Ee){var Ze=_e[0],Ge=_e[1],Fe=_e[2],Re=Ee[0],We=Ee[1],xt=Ee[2],Nt=Re-Ze,tr=We-Ge,Vt=Nt*Nt+tr*tr,Pt,$t;if(Vt<ee)$t=Math.log(xt/Fe)/te,Pt=function(Ae){return[Ze+Ae*Nt,Ge+Ae*tr,Fe*Math.exp(te*Ae*$t)]};else{var Ut=Math.sqrt(Vt),Lt=(xt*xt-Fe*Fe+V*Vt)/(2*Fe*Y*Ut),Ye=(xt*xt-Fe*Fe-V*Vt)/(2*xt*Y*Ut),ot=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Ve=Math.log(Math.sqrt(Ye*Ye+1)-Ye);$t=(Ve-ot)/te,Pt=function(Ae){var He=Ae*$t,Je=ne(ot),tt=Fe/(Y*Ut)*(Je*q(te*He+ot)-Z(ot));return[Ze+tt*Nt,Ge+tt*tr,Fe*Je/ne(te*He+ot)]}}return Pt.duration=$t*1e3,Pt}function se(_e){return function(Ee,Ze){var Ge=_e((Ee=f.hsl(Ee)).h,(Ze=f.hsl(Ze)).h),Fe=i(Ee.s,Ze.s),Re=i(Ee.l,Ze.l),We=i(Ee.opacity,Ze.opacity);return function(xt){return Ee.h=Ge(xt),Ee.s=Fe(xt),Ee.l=Re(xt),Ee.opacity=We(xt),Ee+""}}}var ae=se(t),oe=se(i);function be(_e,Ee){var Ze=i((_e=f.lab(_e)).l,(Ee=f.lab(Ee)).l),Ge=i(_e.a,Ee.a),Fe=i(_e.b,Ee.b),Re=i(_e.opacity,Ee.opacity);return function(We){return _e.l=Ze(We),_e.a=Ge(We),_e.b=Fe(We),_e.opacity=Re(We),_e+""}}function ce(_e){return function(Ee,Ze){var Ge=_e((Ee=f.hcl(Ee)).h,(Ze=f.hcl(Ze)).h),Fe=i(Ee.c,Ze.c),Re=i(Ee.l,Ze.l),We=i(Ee.opacity,Ze.opacity);return function(xt){return Ee.h=Ge(xt),Ee.c=Fe(xt),Ee.l=Re(xt),Ee.opacity=We(xt),Ee+""}}}var de=ce(t),ye=ce(i);function ge(_e){return function Ee(Ze){Ze=+Ze;function Ge(Fe,Re){var We=_e((Fe=f.cubehelix(Fe)).h,(Re=f.cubehelix(Re)).h),xt=i(Fe.s,Re.s),Nt=i(Fe.l,Re.l),tr=i(Fe.opacity,Re.opacity);return function(Vt){return Fe.h=We(Vt),Fe.s=xt(Vt),Fe.l=Nt(Math.pow(Vt,Ze)),Fe.opacity=tr(Vt),Fe+""}}return Ge.gamma=Ee,Ge}(1)}var me=ge(t),Me=ge(i);function Le(_e,Ee){for(var Ze=0,Ge=Ee.length-1,Fe=Ee[0],Re=new Array(Ge<0?0:Ge);Ze<Ge;)Re[Ze]=_e(Fe,Fe=Ee[++Ze]);return function(We){var xt=Math.max(0,Math.min(Ge-1,Math.floor(We*=Ge)));return Re[xt](We-xt)}}function Oe(_e,Ee){for(var Ze=new Array(Ee),Ge=0;Ge<Ee;++Ge)Ze[Ge]=_e(Ge/(Ee-1));return Ze}w.interpolate=k,w.interpolateArray=l,w.interpolateBasis=T,w.interpolateBasisClosed=e,w.interpolateCubehelix=me,w.interpolateCubehelixLong=Me,w.interpolateDate=u,w.interpolateDiscrete=E,w.interpolateHcl=de,w.interpolateHclLong=ye,w.interpolateHsl=ae,w.interpolateHslLong=oe,w.interpolateHue=F,w.interpolateLab=be,w.interpolateNumber=A,w.interpolateNumberArray=c,w.interpolateObject=_,w.interpolateRgb=s,w.interpolateRgbBasis=d,w.interpolateRgbBasisClosed=p,w.interpolateRound=I,w.interpolateString=S,w.interpolateTransformCss=ue,w.interpolateTransformSvg=K,w.interpolateZoom=ie,w.piecewise=Le,w.quantize=Oe,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=Math.PI,M=2*f,T=1e-6,e=M-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new a}a.prototype=n.prototype={constructor:a,moveTo:function(r,t){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,t){this._+="L"+(this._x1=+r)+","+(this._y1=+t)},quadraticCurveTo:function(r,t,h,i){this._+="Q"+ +r+","+ +t+","+(this._x1=+h)+","+(this._y1=+i)},bezierCurveTo:function(r,t,h,i,s,y){this._+="C"+ +r+","+ +t+","+ +h+","+ +i+","+(this._x1=+s)+","+(this._y1=+y)},arcTo:function(r,t,h,i,s){r=+r,t=+t,h=+h,i=+i,s=+s;var y=this._x1,d=this._y1,p=h-r,c=i-t,m=y-r,l=d-t,x=m*m+l*l;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=t);else if(x>T)if(!(Math.abs(l*p-c*m)>T)||!s)this._+="L"+(this._x1=r)+","+(this._y1=t);else{var u=h-y,A=i-d,_=p*p+c*c,g=u*u+A*A,b=Math.sqrt(_),v=Math.sqrt(x),C=s*Math.tan((f-Math.acos((_+x-g)/(2*b*v)))/2),S=C/v,k=C/b;Math.abs(S-1)>T&&(this._+="L"+(r+S*m)+","+(t+S*l)),this._+="A"+s+","+s+",0,0,"+ +(l*u>m*A)+","+(this._x1=r+k*p)+","+(this._y1=t+k*c)}},arc:function(r,t,h,i,s,y){r=+r,t=+t,h=+h,y=!!y;var d=h*Math.cos(i),p=h*Math.sin(i),c=r+d,m=t+p,l=1^y,x=y?i-s:s-i;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+c+","+m:(Math.abs(this._x1-c)>T||Math.abs(this._y1-m)>T)&&(this._+="L"+c+","+m),h&&(x<0&&(x=x%M+M),x>e?this._+="A"+h+","+h+",0,1,"+l+","+(r-d)+","+(t-p)+"A"+h+","+h+",0,1,"+l+","+(this._x1=c)+","+(this._y1=m):x>T&&(this._+="A"+h+","+h+",0,"+ +(x>=f)+","+l+","+(this._x1=r+h*Math.cos(s))+","+(this._y1=t+h*Math.sin(s))))},rect:function(r,t,h,i){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)+"h"+ +h+"v"+ +i+"h"+-h+"Z"},toString:function(){return this._}},w.path=n,Object.defineProperty(w,"__esModule",{value:!0})})},{}],118:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(b){var v=+this._x.call(null,b),C=+this._y.call(null,b);return M(this.cover(v,C),v,C,b)}function M(b,v,C,S){if(isNaN(v)||isNaN(C))return b;var k,E=b._root,F={data:S},I=b._x0,D=b._y0,R=b._x1,O=b._y1,z,B,G,Q,X,j,re,ue;if(!E)return b._root=F,b;for(;E.length;)if((X=v>=(z=(I+R)/2))?I=z:R=z,(j=C>=(B=(D+O)/2))?D=B:O=B,k=E,!(E=E[re=j<<1|X]))return k[re]=F,b;if(G=+b._x.call(null,E.data),Q=+b._y.call(null,E.data),v===G&&C===Q)return F.next=E,k?k[re]=F:b._root=F,b;do k=k?k[re]=new Array(4):b._root=new Array(4),(X=v>=(z=(I+R)/2))?I=z:R=z,(j=C>=(B=(D+O)/2))?D=B:O=B;while((re=j<<1|X)===(ue=(Q>=B)<<1|G>=z));return k[ue]=E,k[re]=F,b}function T(b){var v,C,S=b.length,k,E,F=new Array(S),I=new Array(S),D=1/0,R=1/0,O=-1/0,z=-1/0;for(C=0;C<S;++C)isNaN(k=+this._x.call(null,v=b[C]))||isNaN(E=+this._y.call(null,v))||(F[C]=k,I[C]=E,k<D&&(D=k),k>O&&(O=k),E<R&&(R=E),E>z&&(z=E));if(D>O||R>z)return this;for(this.cover(D,R).cover(O,z),C=0;C<S;++C)M(this,F[C],I[C],b[C]);return this}function e(b,v){if(isNaN(b=+b)||isNaN(v=+v))return this;var C=this._x0,S=this._y0,k=this._x1,E=this._y1;if(isNaN(C))k=(C=Math.floor(b))+1,E=(S=Math.floor(v))+1;else{for(var F=k-C,I=this._root,D,R;C>b||b>=k||S>v||v>=E;)switch(R=(v<S)<<1|b<C,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:k=C+F,E=S+F;break;case 1:C=k-F,E=S+F;break;case 2:k=C+F,S=E-F;break;case 3:C=k-F,S=E-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=C,this._y0=S,this._x1=k,this._y1=E,this}function a(){var b=[];return this.visit(function(v){if(!v.length)do b.push(v.data);while(v=v.next)}),b}function n(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(b,v,C,S,k){this.node=b,this.x0=v,this.y0=C,this.x1=S,this.y1=k}function t(b,v,C){var S,k=this._x0,E=this._y0,F,I,D,R,O=this._x1,z=this._y1,B=[],G=this._root,Q,X;for(G&&B.push(new r(G,k,E,O,z)),C==null?C=1/0:(k=b-C,E=v-C,O=b+C,z=v+C,C*=C);Q=B.pop();)if(!(!(G=Q.node)||(F=Q.x0)>O||(I=Q.y0)>z||(D=Q.x1)<k||(R=Q.y1)<E))if(G.length){var j=(F+D)/2,re=(I+R)/2;B.push(new r(G[3],j,re,D,R),new r(G[2],F,re,j,R),new r(G[1],j,I,D,re),new r(G[0],F,I,j,re)),(X=(v>=re)<<1|b>=j)&&(Q=B[B.length-1],B[B.length-1]=B[B.length-1-X],B[B.length-1-X]=Q)}else{var ue=b-+this._x.call(null,G.data),K=v-+this._y.call(null,G.data),te=ue*ue+K*K;if(te<C){var Y=Math.sqrt(C=te);k=b-Y,E=v-Y,O=b+Y,z=v+Y,S=G.data}}return S}function h(b){if(isNaN(O=+this._x.call(null,b))||isNaN(z=+this._y.call(null,b)))return this;var v,C=this._root,S,k,E,F=this._x0,I=this._y0,D=this._x1,R=this._y1,O,z,B,G,Q,X,j,re;if(!C)return this;if(C.length)for(;;){if((Q=O>=(B=(F+D)/2))?F=B:D=B,(X=z>=(G=(I+R)/2))?I=G:R=G,v=C,!(C=C[j=X<<1|Q]))return this;if(!C.length)break;(v[j+1&3]||v[j+2&3]||v[j+3&3])&&(S=v,re=j)}for(;C.data!==b;)if(k=C,!(C=C.next))return this;return(E=C.next)&&delete C.next,k?(E?k.next=E:delete k.next,this):v?(E?v[j]=E:delete v[j],(C=v[0]||v[1]||v[2]||v[3])&&C===(v[3]||v[2]||v[1]||v[0])&&!C.length&&(S?S[re]=C:this._root=C),this):(this._root=E,this)}function i(b){for(var v=0,C=b.length;v<C;++v)this.remove(b[v]);return this}function s(){return this._root}function y(){var b=0;return this.visit(function(v){if(!v.length)do++b;while(v=v.next)}),b}function d(b){var v=[],C,S=this._root,k,E,F,I,D;for(S&&v.push(new r(S,this._x0,this._y0,this._x1,this._y1));C=v.pop();)if(!b(S=C.node,E=C.x0,F=C.y0,I=C.x1,D=C.y1)&&S.length){var R=(E+I)/2,O=(F+D)/2;(k=S[3])&&v.push(new r(k,R,O,I,D)),(k=S[2])&&v.push(new r(k,E,O,R,D)),(k=S[1])&&v.push(new r(k,R,F,I,O)),(k=S[0])&&v.push(new r(k,E,F,R,O))}return this}function p(b){var v=[],C=[],S;for(this._root&&v.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=v.pop();){var k=S.node;if(k.length){var E,F=S.x0,I=S.y0,D=S.x1,R=S.y1,O=(F+D)/2,z=(I+R)/2;(E=k[0])&&v.push(new r(E,F,I,O,z)),(E=k[1])&&v.push(new r(E,O,I,D,z)),(E=k[2])&&v.push(new r(E,F,z,O,R)),(E=k[3])&&v.push(new r(E,O,z,D,R))}C.push(S)}for(;S=C.pop();)b(S.node,S.x0,S.y0,S.x1,S.y1);return this}function c(b){return b[0]}function m(b){return arguments.length?(this._x=b,this):this._x}function l(b){return b[1]}function x(b){return arguments.length?(this._y=b,this):this._y}function u(b,v,C){var S=new A(v==null?c:v,C==null?l:C,NaN,NaN,NaN,NaN);return b==null?S:S.addAll(b)}function A(b,v,C,S,k,E){this._x=b,this._y=v,this._x0=C,this._y0=S,this._x1=k,this._y1=E,this._root=void 0}function _(b){for(var v={data:b.data},C=v;b=b.next;)C=C.next={data:b.data};return v}var g=u.prototype=A.prototype;g.copy=function(){var b=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),v=this._root,C,S;if(!v)return b;if(!v.length)return b._root=_(v),b;for(C=[{source:v,target:b._root=new Array(4)}];v=C.pop();)for(var k=0;k<4;++k)(S=v.source[k])&&(S.length?C.push({source:S,target:v.target[k]=new Array(4)}):v.target[k]=_(S));return b},g.add=f,g.addAll=T,g.cover=e,g.data=a,g.extent=n,g.find=t,g.remove=h,g.removeAll=i,g.root=s,g.size=y,g.visit=d,g.visitAfter=p,g.x=m,g.y=x,w.quadtree=u,Object.defineProperty(w,"__esModule",{value:!0})})},{}],119:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-path")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(at){return function(){return at}}var T=Math.abs,e=Math.atan2,a=Math.cos,n=Math.max,r=Math.min,t=Math.sin,h=Math.sqrt,i=1e-12,s=Math.PI,y=s/2,d=2*s;function p(at){return at>1?0:at<-1?s:Math.acos(at)}function c(at){return at>=1?y:at<=-1?-y:Math.asin(at)}function m(at){return at.innerRadius}function l(at){return at.outerRadius}function x(at){return at.startAngle}function u(at){return at.endAngle}function A(at){return at&&at.padAngle}function _(at,zt,qt,hr,Ur,Gr,Ir,kr){var Kr=qt-at,kn=hr-zt,yn=Ir-Ur,Yn=kr-Gr,In=Yn*Kr-yn*kn;if(!(In*In<i))return In=(yn*(zt-Gr)-Yn*(at-Ur))/In,[at+In*Kr,zt+In*kn]}function g(at,zt,qt,hr,Ur,Gr,Ir){var kr=at-qt,Kr=zt-hr,kn=(Ir?Gr:-Gr)/h(kr*kr+Kr*Kr),yn=kn*Kr,Yn=-kn*kr,In=at+yn,Jn=zt+Yn,Zn=qt+yn,ba=hr+Yn,Pa=(In+Zn)/2,xi=(Jn+ba)/2,Ka=Zn-In,ti=ba-Jn,$a=Ka*Ka+ti*ti,Cr=Ur-Gr,bn=In*ba-Zn*Jn,gn=(ti<0?-1:1)*h(n(0,Cr*Cr*$a-bn*bn)),Ln=(bn*ti-Ka*gn)/$a,qn=(-bn*Ka-ti*gn)/$a,da=(bn*ti+Ka*gn)/$a,oa=(-bn*Ka+ti*gn)/$a,Bn=Ln-Pa,$n=qn-xi,Xa=da-Pa,gi=oa-xi;return Bn*Bn+$n*$n>Xa*Xa+gi*gi&&(Ln=da,qn=oa),{cx:Ln,cy:qn,x01:-yn,y01:-Yn,x11:Ln*(Ur/Cr-1),y11:qn*(Ur/Cr-1)}}function b(){var at=m,zt=l,qt=M(0),hr=null,Ur=x,Gr=u,Ir=A,kr=null;function Kr(){var kn,yn,Yn=+at.apply(this,arguments),In=+zt.apply(this,arguments),Jn=Ur.apply(this,arguments)-y,Zn=Gr.apply(this,arguments)-y,ba=T(Zn-Jn),Pa=Zn>Jn;if(kr||(kr=kn=f.path()),In<Yn&&(yn=In,In=Yn,Yn=yn),!(In>i))kr.moveTo(0,0);else if(ba>d-i)kr.moveTo(In*a(Jn),In*t(Jn)),kr.arc(0,0,In,Jn,Zn,!Pa),Yn>i&&(kr.moveTo(Yn*a(Zn),Yn*t(Zn)),kr.arc(0,0,Yn,Zn,Jn,Pa));else{var xi=Jn,Ka=Zn,ti=Jn,$a=Zn,Cr=ba,bn=ba,gn=Ir.apply(this,arguments)/2,Ln=gn>i&&(hr?+hr.apply(this,arguments):h(Yn*Yn+In*In)),qn=r(T(In-Yn)/2,+qt.apply(this,arguments)),da=qn,oa=qn,Bn,$n;if(Ln>i){var Xa=c(Ln/Yn*t(gn)),gi=c(Ln/In*t(gn));(Cr-=Xa*2)>i?(Xa*=Pa?1:-1,ti+=Xa,$a-=Xa):(Cr=0,ti=$a=(Jn+Zn)/2),(bn-=gi*2)>i?(gi*=Pa?1:-1,xi+=gi,Ka-=gi):(bn=0,xi=Ka=(Jn+Zn)/2)}var Xt=In*a(xi),mr=In*t(xi),un=Yn*a($a),xn=Yn*t($a);if(qn>i){var sn=In*a(Ka),Cn=In*t(Ka),Mn=Yn*a(ti),dn=Yn*t(ti),Tr;if(ba<s&&(Tr=_(Xt,mr,Mn,dn,sn,Cn,un,xn))){var Ar=Xt-Tr[0],Hr=mr-Tr[1],wn=sn-Tr[0],Gn=Cn-Tr[1],sa=1/t(p((Ar*wn+Hr*Gn)/(h(Ar*Ar+Hr*Hr)*h(wn*wn+Gn*Gn)))/2),En=h(Tr[0]*Tr[0]+Tr[1]*Tr[1]);da=r(qn,(Yn-En)/(sa-1)),oa=r(qn,(In-En)/(sa+1))}}bn>i?oa>i?(Bn=g(Mn,dn,Xt,mr,In,oa,Pa),$n=g(sn,Cn,un,xn,In,oa,Pa),kr.moveTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),oa<qn?kr.arc(Bn.cx,Bn.cy,oa,e(Bn.y01,Bn.x01),e($n.y01,$n.x01),!Pa):(kr.arc(Bn.cx,Bn.cy,oa,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Pa),kr.arc(0,0,In,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e($n.cy+$n.y11,$n.cx+$n.x11),!Pa),kr.arc($n.cx,$n.cy,oa,e($n.y11,$n.x11),e($n.y01,$n.x01),!Pa))):(kr.moveTo(Xt,mr),kr.arc(0,0,In,xi,Ka,!Pa)):kr.moveTo(Xt,mr),!(Yn>i)||!(Cr>i)?kr.lineTo(un,xn):da>i?(Bn=g(un,xn,sn,Cn,Yn,-da,Pa),$n=g(Xt,mr,Mn,dn,Yn,-da,Pa),kr.lineTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),da<qn?kr.arc(Bn.cx,Bn.cy,da,e(Bn.y01,Bn.x01),e($n.y01,$n.x01),!Pa):(kr.arc(Bn.cx,Bn.cy,da,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Pa),kr.arc(0,0,Yn,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e($n.cy+$n.y11,$n.cx+$n.x11),Pa),kr.arc($n.cx,$n.cy,da,e($n.y11,$n.x11),e($n.y01,$n.x01),!Pa))):kr.arc(0,0,Yn,$a,ti,Pa)}if(kr.closePath(),kn)return kr=null,kn+""||null}return Kr.centroid=function(){var kn=(+at.apply(this,arguments)+ +zt.apply(this,arguments))/2,yn=(+Ur.apply(this,arguments)+ +Gr.apply(this,arguments))/2-s/2;return[a(yn)*kn,t(yn)*kn]},Kr.innerRadius=function(kn){return arguments.length?(at=typeof kn=="function"?kn:M(+kn),Kr):at},Kr.outerRadius=function(kn){return arguments.length?(zt=typeof kn=="function"?kn:M(+kn),Kr):zt},Kr.cornerRadius=function(kn){return arguments.length?(qt=typeof kn=="function"?kn:M(+kn),Kr):qt},Kr.padRadius=function(kn){return arguments.length?(hr=kn==null?null:typeof kn=="function"?kn:M(+kn),Kr):hr},Kr.startAngle=function(kn){return arguments.length?(Ur=typeof kn=="function"?kn:M(+kn),Kr):Ur},Kr.endAngle=function(kn){return arguments.length?(Gr=typeof kn=="function"?kn:M(+kn),Kr):Gr},Kr.padAngle=function(kn){return arguments.length?(Ir=typeof kn=="function"?kn:M(+kn),Kr):Ir},Kr.context=function(kn){return arguments.length?(kr=kn==null?null:kn,Kr):kr},Kr}function v(at){this._context=at}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;default:this._context.lineTo(at,zt);break}}};function C(at){return new v(at)}function S(at){return at[0]}function k(at){return at[1]}function E(){var at=S,zt=k,qt=M(!0),hr=null,Ur=C,Gr=null;function Ir(kr){var Kr,kn=kr.length,yn,Yn=!1,In;for(hr==null&&(Gr=Ur(In=f.path())),Kr=0;Kr<=kn;++Kr)!(Kr<kn&&qt(yn=kr[Kr],Kr,kr))===Yn&&((Yn=!Yn)?Gr.lineStart():Gr.lineEnd()),Yn&&Gr.point(+at(yn,Kr,kr),+zt(yn,Kr,kr));if(In)return Gr=null,In+""||null}return Ir.x=function(kr){return arguments.length?(at=typeof kr=="function"?kr:M(+kr),Ir):at},Ir.y=function(kr){return arguments.length?(zt=typeof kr=="function"?kr:M(+kr),Ir):zt},Ir.defined=function(kr){return arguments.length?(qt=typeof kr=="function"?kr:M(!!kr),Ir):qt},Ir.curve=function(kr){return arguments.length?(Ur=kr,hr!=null&&(Gr=Ur(hr)),Ir):Ur},Ir.context=function(kr){return arguments.length?(kr==null?hr=Gr=null:Gr=Ur(hr=kr),Ir):hr},Ir}function F(){var at=S,zt=null,qt=M(0),hr=k,Ur=M(!0),Gr=null,Ir=C,kr=null;function Kr(yn){var Yn,In,Jn,Zn=yn.length,ba,Pa=!1,xi,Ka=new Array(Zn),ti=new Array(Zn);for(Gr==null&&(kr=Ir(xi=f.path())),Yn=0;Yn<=Zn;++Yn){if(!(Yn<Zn&&Ur(ba=yn[Yn],Yn,yn))===Pa)if(Pa=!Pa)In=Yn,kr.areaStart(),kr.lineStart();else{for(kr.lineEnd(),kr.lineStart(),Jn=Yn-1;Jn>=In;--Jn)kr.point(Ka[Jn],ti[Jn]);kr.lineEnd(),kr.areaEnd()}Pa&&(Ka[Yn]=+at(ba,Yn,yn),ti[Yn]=+qt(ba,Yn,yn),kr.point(zt?+zt(ba,Yn,yn):Ka[Yn],hr?+hr(ba,Yn,yn):ti[Yn]))}if(xi)return kr=null,xi+""||null}function kn(){return E().defined(Ur).curve(Ir).context(Gr)}return Kr.x=function(yn){return arguments.length?(at=typeof yn=="function"?yn:M(+yn),zt=null,Kr):at},Kr.x0=function(yn){return arguments.length?(at=typeof yn=="function"?yn:M(+yn),Kr):at},Kr.x1=function(yn){return arguments.length?(zt=yn==null?null:typeof yn=="function"?yn:M(+yn),Kr):zt},Kr.y=function(yn){return arguments.length?(qt=typeof yn=="function"?yn:M(+yn),hr=null,Kr):qt},Kr.y0=function(yn){return arguments.length?(qt=typeof yn=="function"?yn:M(+yn),Kr):qt},Kr.y1=function(yn){return arguments.length?(hr=yn==null?null:typeof yn=="function"?yn:M(+yn),Kr):hr},Kr.lineX0=Kr.lineY0=function(){return kn().x(at).y(qt)},Kr.lineY1=function(){return kn().x(at).y(hr)},Kr.lineX1=function(){return kn().x(zt).y(qt)},Kr.defined=function(yn){return arguments.length?(Ur=typeof yn=="function"?yn:M(!!yn),Kr):Ur},Kr.curve=function(yn){return arguments.length?(Ir=yn,Gr!=null&&(kr=Ir(Gr)),Kr):Ir},Kr.context=function(yn){return arguments.length?(yn==null?Gr=kr=null:kr=Ir(Gr=yn),Kr):Gr},Kr}function I(at,zt){return zt<at?-1:zt>at?1:zt>=at?0:NaN}function D(at){return at}function R(){var at=D,zt=I,qt=null,hr=M(0),Ur=M(d),Gr=M(0);function Ir(kr){var Kr,kn=kr.length,yn,Yn,In=0,Jn=new Array(kn),Zn=new Array(kn),ba=+hr.apply(this,arguments),Pa=Math.min(d,Math.max(-d,Ur.apply(this,arguments)-ba)),xi,Ka=Math.min(Math.abs(Pa)/kn,Gr.apply(this,arguments)),ti=Ka*(Pa<0?-1:1),$a;for(Kr=0;Kr<kn;++Kr)($a=Zn[Jn[Kr]=Kr]=+at(kr[Kr],Kr,kr))>0&&(In+=$a);for(zt!=null?Jn.sort(function(Cr,bn){return zt(Zn[Cr],Zn[bn])}):qt!=null&&Jn.sort(function(Cr,bn){return qt(kr[Cr],kr[bn])}),Kr=0,Yn=In?(Pa-kn*ti)/In:0;Kr<kn;++Kr,ba=xi)yn=Jn[Kr],$a=Zn[yn],xi=ba+($a>0?$a*Yn:0)+ti,Zn[yn]={data:kr[yn],index:Kr,value:$a,startAngle:ba,endAngle:xi,padAngle:Ka};return Zn}return Ir.value=function(kr){return arguments.length?(at=typeof kr=="function"?kr:M(+kr),Ir):at},Ir.sortValues=function(kr){return arguments.length?(zt=kr,qt=null,Ir):zt},Ir.sort=function(kr){return arguments.length?(qt=kr,zt=null,Ir):qt},Ir.startAngle=function(kr){return arguments.length?(hr=typeof kr=="function"?kr:M(+kr),Ir):hr},Ir.endAngle=function(kr){return arguments.length?(Ur=typeof kr=="function"?kr:M(+kr),Ir):Ur},Ir.padAngle=function(kr){return arguments.length?(Gr=typeof kr=="function"?kr:M(+kr),Ir):Gr},Ir}var O=B(C);function z(at){this._curve=at}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,zt){this._curve.point(zt*Math.sin(at),zt*-Math.cos(at))}};function B(at){function zt(qt){return new z(at(qt))}return zt._curve=at,zt}function G(at){var zt=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(qt){return arguments.length?zt(B(qt)):zt()._curve},at}function Q(){return G(E().curve(O))}function X(){var at=F().curve(O),zt=at.curve,qt=at.lineX0,hr=at.lineX1,Ur=at.lineY0,Gr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return G(qt())},delete at.lineX0,at.lineEndAngle=function(){return G(hr())},delete at.lineX1,at.lineInnerRadius=function(){return G(Ur())},delete at.lineY0,at.lineOuterRadius=function(){return G(Gr())},delete at.lineY1,at.curve=function(Ir){return arguments.length?zt(B(Ir)):zt()._curve},at}function j(at,zt){return[(zt=+zt)*Math.cos(at-=Math.PI/2),zt*Math.sin(at)]}var re=Array.prototype.slice;function ue(at){return at.source}function K(at){return at.target}function te(at){var zt=ue,qt=K,hr=S,Ur=k,Gr=null;function Ir(){var kr,Kr=re.call(arguments),kn=zt.apply(this,Kr),yn=qt.apply(this,Kr);if(Gr||(Gr=kr=f.path()),at(Gr,+hr.apply(this,(Kr[0]=kn,Kr)),+Ur.apply(this,Kr),+hr.apply(this,(Kr[0]=yn,Kr)),+Ur.apply(this,Kr)),kr)return Gr=null,kr+""||null}return Ir.source=function(kr){return arguments.length?(zt=kr,Ir):zt},Ir.target=function(kr){return arguments.length?(qt=kr,Ir):qt},Ir.x=function(kr){return arguments.length?(hr=typeof kr=="function"?kr:M(+kr),Ir):hr},Ir.y=function(kr){return arguments.length?(Ur=typeof kr=="function"?kr:M(+kr),Ir):Ur},Ir.context=function(kr){return arguments.length?(Gr=kr==null?null:kr,Ir):Gr},Ir}function Y(at,zt,qt,hr,Ur){at.moveTo(zt,qt),at.bezierCurveTo(zt=(zt+hr)/2,qt,zt,Ur,hr,Ur)}function V(at,zt,qt,hr,Ur){at.moveTo(zt,qt),at.bezierCurveTo(zt,qt=(qt+Ur)/2,hr,qt,hr,Ur)}function ee(at,zt,qt,hr,Ur){var Gr=j(zt,qt),Ir=j(zt,qt=(qt+Ur)/2),kr=j(hr,qt),Kr=j(hr,Ur);at.moveTo(Gr[0],Gr[1]),at.bezierCurveTo(Ir[0],Ir[1],kr[0],kr[1],Kr[0],Kr[1])}function ne(){return te(Y)}function Z(){return te(V)}function q(){var at=te(ee);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ie={draw:function(at,zt){var qt=Math.sqrt(zt/s);at.moveTo(qt,0),at.arc(0,0,qt,0,d)}},se={draw:function(at,zt){var qt=Math.sqrt(zt/5)/2;at.moveTo(-3*qt,-qt),at.lineTo(-qt,-qt),at.lineTo(-qt,-3*qt),at.lineTo(qt,-3*qt),at.lineTo(qt,-qt),at.lineTo(3*qt,-qt),at.lineTo(3*qt,qt),at.lineTo(qt,qt),at.lineTo(qt,3*qt),at.lineTo(-qt,3*qt),at.lineTo(-qt,qt),at.lineTo(-3*qt,qt),at.closePath()}},ae=Math.sqrt(1/3),oe=ae*2,be={draw:function(at,zt){var qt=Math.sqrt(zt/oe),hr=qt*ae;at.moveTo(0,-qt),at.lineTo(hr,0),at.lineTo(0,qt),at.lineTo(-hr,0),at.closePath()}},ce=.8908130915292852,de=Math.sin(s/10)/Math.sin(7*s/10),ye=Math.sin(d/10)*de,ge=-Math.cos(d/10)*de,me={draw:function(at,zt){var qt=Math.sqrt(zt*ce),hr=ye*qt,Ur=ge*qt;at.moveTo(0,-qt),at.lineTo(hr,Ur);for(var Gr=1;Gr<5;++Gr){var Ir=d*Gr/5,kr=Math.cos(Ir),Kr=Math.sin(Ir);at.lineTo(Kr*qt,-kr*qt),at.lineTo(kr*hr-Kr*Ur,Kr*hr+kr*Ur)}at.closePath()}},Me={draw:function(at,zt){var qt=Math.sqrt(zt),hr=-qt/2;at.rect(hr,hr,qt,qt)}},Le=Math.sqrt(3),Oe={draw:function(at,zt){var qt=-Math.sqrt(zt/(Le*3));at.moveTo(0,qt*2),at.lineTo(-Le*qt,-qt),at.lineTo(Le*qt,-qt),at.closePath()}},_e=-.5,Ee=Math.sqrt(3)/2,Ze=1/Math.sqrt(12),Ge=(Ze/2+1)*3,Fe={draw:function(at,zt){var qt=Math.sqrt(zt/Ge),hr=qt/2,Ur=qt*Ze,Gr=hr,Ir=qt*Ze+qt,kr=-Gr,Kr=Ir;at.moveTo(hr,Ur),at.lineTo(Gr,Ir),at.lineTo(kr,Kr),at.lineTo(_e*hr-Ee*Ur,Ee*hr+_e*Ur),at.lineTo(_e*Gr-Ee*Ir,Ee*Gr+_e*Ir),at.lineTo(_e*kr-Ee*Kr,Ee*kr+_e*Kr),at.lineTo(_e*hr+Ee*Ur,_e*Ur-Ee*hr),at.lineTo(_e*Gr+Ee*Ir,_e*Ir-Ee*Gr),at.lineTo(_e*kr+Ee*Kr,_e*Kr-Ee*kr),at.closePath()}},Re=[ie,se,be,Me,me,Oe,Fe];function We(){var at=M(ie),zt=M(64),qt=null;function hr(){var Ur;if(qt||(qt=Ur=f.path()),at.apply(this,arguments).draw(qt,+zt.apply(this,arguments)),Ur)return qt=null,Ur+""||null}return hr.type=function(Ur){return arguments.length?(at=typeof Ur=="function"?Ur:M(Ur),hr):at},hr.size=function(Ur){return arguments.length?(zt=typeof Ur=="function"?Ur:M(+Ur),hr):zt},hr.context=function(Ur){return arguments.length?(qt=Ur==null?null:Ur,hr):qt},hr}function xt(){}function Nt(at,zt,qt){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+zt)/6,(at._y0+4*at._y1+qt)/6)}function tr(at){this._context=at}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function Vt(at){return new tr(at)}function Pt(at){this._context=at}Pt.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._x2=at,this._y2=zt;break;case 1:this._point=2,this._x3=at,this._y3=zt;break;case 2:this._point=3,this._x4=at,this._y4=zt,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+zt)/6);break;default:Nt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function $t(at){return new Pt(at)}function Ut(at){this._context=at}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var qt=(this._x0+4*this._x1+at)/6,hr=(this._y0+4*this._y1+zt)/6;this._line?this._context.lineTo(qt,hr):this._context.moveTo(qt,hr);break;case 3:this._point=4;default:Nt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function Lt(at){return new Ut(at)}function Ye(at,zt){this._basis=new tr(at),this._beta=zt}Ye.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,zt=this._y,qt=at.length-1;if(qt>0)for(var hr=at[0],Ur=zt[0],Gr=at[qt]-hr,Ir=zt[qt]-Ur,kr=-1,Kr;++kr<=qt;)Kr=kr/qt,this._basis.point(this._beta*at[kr]+(1-this._beta)*(hr+Kr*Gr),this._beta*zt[kr]+(1-this._beta)*(Ur+Kr*Ir));this._x=this._y=null,this._basis.lineEnd()},point:function(at,zt){this._x.push(+at),this._y.push(+zt)}};var ot=function at(zt){function qt(hr){return zt===1?new tr(hr):new Ye(hr,zt)}return qt.beta=function(hr){return at(+hr)},qt}(.85);function Ve(at,zt,qt){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-zt),at._y2+at._k*(at._y1-qt),at._x2,at._y2)}function Ae(at,zt){this._context=at,this._k=(1-zt)/6}Ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ve(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2,this._x1=at,this._y1=zt;break;case 2:this._point=3;default:Ve(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var He=function at(zt){function qt(hr){return new Ae(hr,zt)}return qt.tension=function(hr){return at(+hr)},qt}(0);function Je(at,zt){this._context=at,this._k=(1-zt)/6}Je.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._x3=at,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=zt);break;case 2:this._point=3,this._x5=at,this._y5=zt;break;default:Ve(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var tt=function at(zt){function qt(hr){return new Je(hr,zt)}return qt.tension=function(hr){return at(+hr)},qt}(0);function St(at,zt){this._context=at,this._k=(1-zt)/6}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ve(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var _t=function at(zt){function qt(hr){return new St(hr,zt)}return qt.tension=function(hr){return at(+hr)},qt}(0);function kt(at,zt,qt){var hr=at._x1,Ur=at._y1,Gr=at._x2,Ir=at._y2;if(at._l01_a>i){var kr=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,Kr=3*at._l01_a*(at._l01_a+at._l12_a);hr=(hr*kr-at._x0*at._l12_2a+at._x2*at._l01_2a)/Kr,Ur=(Ur*kr-at._y0*at._l12_2a+at._y2*at._l01_2a)/Kr}if(at._l23_a>i){var kn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,yn=3*at._l23_a*(at._l23_a+at._l12_a);Gr=(Gr*kn+at._x1*at._l23_2a-zt*at._l12_2a)/yn,Ir=(Ir*kn+at._y1*at._l23_2a-qt*at._l12_2a)/yn}at._context.bezierCurveTo(hr,Ur,Gr,Ir,at._x2,at._y2)}function jt(at,zt){this._context=at,this._alpha=zt}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){if(at=+at,zt=+zt,this._point){var qt=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3;default:kt(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Bt=function at(zt){function qt(hr){return zt?new jt(hr,zt):new Ae(hr,0)}return qt.alpha=function(hr){return at(+hr)},qt}(.5);function Wt(at,zt){this._context=at,this._alpha=zt}Wt.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,zt){if(at=+at,zt=+zt,this._point){var qt=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=zt);break;case 2:this._point=3,this._x5=at,this._y5=zt;break;default:kt(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Qt=function at(zt){function qt(hr){return zt?new Wt(hr,zt):new Je(hr,0)}return qt.alpha=function(hr){return at(+hr)},qt}(.5);function Zt(at,zt){this._context=at,this._alpha=zt}Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){if(at=+at,zt=+zt,this._point){var qt=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kt(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var cr=function at(zt){function qt(hr){return zt?new Zt(hr,zt):new St(hr,0)}return qt.alpha=function(hr){return at(+hr)},qt}(.5);function Xr(at){this._context=at}Xr.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,zt){at=+at,zt=+zt,this._point?this._context.lineTo(at,zt):(this._point=1,this._context.moveTo(at,zt))}};function vn(at){return new Xr(at)}function en(at){return at<0?-1:1}function ft(at,zt,qt){var hr=at._x1-at._x0,Ur=zt-at._x1,Gr=(at._y1-at._y0)/(hr||Ur<0&&-0),Ir=(qt-at._y1)/(Ur||hr<0&&-0),kr=(Gr*Ur+Ir*hr)/(hr+Ur);return(en(Gr)+en(Ir))*Math.min(Math.abs(Gr),Math.abs(Ir),.5*Math.abs(kr))||0}function ar(at,zt){var qt=at._x1-at._x0;return qt?(3*(at._y1-at._y0)/qt-zt)/2:zt}function rr(at,zt,qt){var hr=at._x0,Ur=at._y0,Gr=at._x1,Ir=at._y1,kr=(Gr-hr)/3;at._context.bezierCurveTo(hr+kr,Ur+kr*zt,Gr-kr,Ir-kr*qt,Gr,Ir)}function Kt(at){this._context=at}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rr(this,this._t0,ar(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){var qt=NaN;if(at=+at,zt=+zt,!(at===this._x1&&zt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3,rr(this,ar(this,qt=ft(this,at,zt)),qt);break;default:rr(this,this._t0,qt=ft(this,at,zt));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt,this._t0=qt}}};function Er(at){this._context=new st(at)}(Er.prototype=Object.create(Kt.prototype)).point=function(at,zt){Kt.prototype.point.call(this,zt,at)};function st(at){this._context=at}st.prototype={moveTo:function(at,zt){this._context.moveTo(zt,at)},closePath:function(){this._context.closePath()},lineTo:function(at,zt){this._context.lineTo(zt,at)},bezierCurveTo:function(at,zt,qt,hr,Ur,Gr){this._context.bezierCurveTo(zt,at,hr,qt,Gr,Ur)}};function et(at){return new Kt(at)}function vt(at){return new Er(at)}function pt(at){this._context=at}pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,zt=this._y,qt=at.length;if(qt)if(this._line?this._context.lineTo(at[0],zt[0]):this._context.moveTo(at[0],zt[0]),qt===2)this._context.lineTo(at[1],zt[1]);else for(var hr=Ct(at),Ur=Ct(zt),Gr=0,Ir=1;Ir<qt;++Gr,++Ir)this._context.bezierCurveTo(hr[0][Gr],Ur[0][Gr],hr[1][Gr],Ur[1][Gr],at[Ir],zt[Ir]);(this._line||this._line!==0&&qt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,zt){this._x.push(+at),this._y.push(+zt)}};function Ct(at){var zt,qt=at.length-1,hr,Ur=new Array(qt),Gr=new Array(qt),Ir=new Array(qt);for(Ur[0]=0,Gr[0]=2,Ir[0]=at[0]+2*at[1],zt=1;zt<qt-1;++zt)Ur[zt]=1,Gr[zt]=4,Ir[zt]=4*at[zt]+2*at[zt+1];for(Ur[qt-1]=2,Gr[qt-1]=7,Ir[qt-1]=8*at[qt-1]+at[qt],zt=1;zt<qt;++zt)hr=Ur[zt]/Gr[zt-1],Gr[zt]-=hr,Ir[zt]-=hr*Ir[zt-1];for(Ur[qt-1]=Ir[qt-1]/Gr[qt-1],zt=qt-2;zt>=0;--zt)Ur[zt]=(Ir[zt]-Ur[zt+1])/Gr[zt];for(Gr[qt-1]=(at[qt]+Ur[qt-1])/2,zt=0;zt<qt-1;++zt)Gr[zt]=2*at[zt+1]-Ur[zt+1];return[Ur,Gr]}function Ht(at){return new pt(at)}function Pe(at,zt){this._context=at,this._t=zt}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,zt),this._context.lineTo(at,zt);else{var qt=this._x*(1-this._t)+at*this._t;this._context.lineTo(qt,this._y),this._context.lineTo(qt,zt)}break}}this._x=at,this._y=zt}};function ke(at){return new Pe(at,.5)}function lt(at){return new Pe(at,0)}function ct(at){return new Pe(at,1)}function yt(at,zt){if((Ir=at.length)>1)for(var qt=1,hr,Ur,Gr=at[zt[0]],Ir,kr=Gr.length;qt<Ir;++qt)for(Ur=Gr,Gr=at[zt[qt]],hr=0;hr<kr;++hr)Gr[hr][1]+=Gr[hr][0]=isNaN(Ur[hr][1])?Ur[hr][0]:Ur[hr][1]}function Rt(at){for(var zt=at.length,qt=new Array(zt);--zt>=0;)qt[zt]=zt;return qt}function wt(at,zt){return at[zt]}function Dt(){var at=M([]),zt=Rt,qt=yt,hr=wt;function Ur(Gr){var Ir=at.apply(this,arguments),kr,Kr=Gr.length,kn=Ir.length,yn=new Array(kn),Yn;for(kr=0;kr<kn;++kr){for(var In=Ir[kr],Jn=yn[kr]=new Array(Kr),Zn=0,ba;Zn<Kr;++Zn)Jn[Zn]=ba=[0,+hr(Gr[Zn],In,Zn,Gr)],ba.data=Gr[Zn];Jn.key=In}for(kr=0,Yn=zt(yn);kr<kn;++kr)yn[Yn[kr]].index=kr;return qt(yn,Yn),yn}return Ur.keys=function(Gr){return arguments.length?(at=typeof Gr=="function"?Gr:M(re.call(Gr)),Ur):at},Ur.value=function(Gr){return arguments.length?(hr=typeof Gr=="function"?Gr:M(+Gr),Ur):hr},Ur.order=function(Gr){return arguments.length?(zt=Gr==null?Rt:typeof Gr=="function"?Gr:M(re.call(Gr)),Ur):zt},Ur.offset=function(Gr){return arguments.length?(qt=Gr==null?yt:Gr,Ur):qt},Ur}function Jt(at,zt){if((hr=at.length)>0){for(var qt,hr,Ur=0,Gr=at[0].length,Ir;Ur<Gr;++Ur){for(Ir=qt=0;qt<hr;++qt)Ir+=at[qt][Ur][1]||0;if(Ir)for(qt=0;qt<hr;++qt)at[qt][Ur][1]/=Ir}yt(at,zt)}}function fr(at,zt){if((Kr=at.length)>0)for(var qt,hr=0,Ur,Gr,Ir,kr,Kr,kn=at[zt[0]].length;hr<kn;++hr)for(Ir=kr=0,qt=0;qt<Kr;++qt)(Gr=(Ur=at[zt[qt]][hr])[1]-Ur[0])>0?(Ur[0]=Ir,Ur[1]=Ir+=Gr):Gr<0?(Ur[1]=kr,Ur[0]=kr+=Gr):(Ur[0]=0,Ur[1]=Gr)}function Rr(at,zt){if((Ur=at.length)>0){for(var qt=0,hr=at[zt[0]],Ur,Gr=hr.length;qt<Gr;++qt){for(var Ir=0,kr=0;Ir<Ur;++Ir)kr+=at[Ir][qt][1]||0;hr[qt][1]+=hr[qt][0]=-kr/2}yt(at,zt)}}function Sr(at,zt){if(!(!((Ir=at.length)>0)||!((Gr=(Ur=at[zt[0]]).length)>0))){for(var qt=0,hr=1,Ur,Gr,Ir;hr<Gr;++hr){for(var kr=0,Kr=0,kn=0;kr<Ir;++kr){for(var yn=at[zt[kr]],Yn=yn[hr][1]||0,In=yn[hr-1][1]||0,Jn=(Yn-In)/2,Zn=0;Zn<kr;++Zn){var ba=at[zt[Zn]],Pa=ba[hr][1]||0,xi=ba[hr-1][1]||0;Jn+=Pa-xi}Kr+=Yn,kn+=Jn*Yn}Ur[hr-1][1]+=Ur[hr-1][0]=qt,Kr&&(qt-=kn/Kr)}Ur[hr-1][1]+=Ur[hr-1][0]=qt,yt(at,zt)}}function Pr(at){var zt=at.map(Jr);return Rt(at).sort(function(qt,hr){return zt[qt]-zt[hr]})}function Jr(at){for(var zt=-1,qt=0,hr=at.length,Ur,Gr=-1/0;++zt<hr;)(Ur=+at[zt][1])>Gr&&(Gr=Ur,qt=zt);return qt}function ur(at){var zt=at.map(wr);return Rt(at).sort(function(qt,hr){return zt[qt]-zt[hr]})}function wr(at){for(var zt=0,qt=-1,hr=at.length,Ur;++qt<hr;)(Ur=+at[qt][1])&&(zt+=Ur);return zt}function Br(at){return ur(at).reverse()}function Yr(at){var zt=at.length,qt,hr,Ur=at.map(wr),Gr=Pr(at),Ir=0,kr=0,Kr=[],kn=[];for(qt=0;qt<zt;++qt)hr=Gr[qt],Ir<kr?(Ir+=Ur[hr],Kr.push(hr)):(kr+=Ur[hr],kn.push(hr));return kn.reverse().concat(Kr)}function Dr(at){return Rt(at).reverse()}w.arc=b,w.area=F,w.areaRadial=X,w.curveBasis=Vt,w.curveBasisClosed=$t,w.curveBasisOpen=Lt,w.curveBundle=ot,w.curveCardinal=He,w.curveCardinalClosed=tt,w.curveCardinalOpen=_t,w.curveCatmullRom=Bt,w.curveCatmullRomClosed=Qt,w.curveCatmullRomOpen=cr,w.curveLinear=C,w.curveLinearClosed=vn,w.curveMonotoneX=et,w.curveMonotoneY=vt,w.curveNatural=Ht,w.curveStep=ke,w.curveStepAfter=ct,w.curveStepBefore=lt,w.line=E,w.lineRadial=Q,w.linkHorizontal=ne,w.linkRadial=q,w.linkVertical=Z,w.pie=R,w.pointRadial=j,w.radialArea=X,w.radialLine=Q,w.stack=Dt,w.stackOffsetDiverging=fr,w.stackOffsetExpand=Jt,w.stackOffsetNone=yt,w.stackOffsetSilhouette=Rr,w.stackOffsetWiggle=Sr,w.stackOrderAppearance=Pr,w.stackOrderAscending=ur,w.stackOrderDescending=Br,w.stackOrderInsideOut=Yr,w.stackOrderNone=Rt,w.stackOrderReverse=Dr,w.symbol=We,w.symbolCircle=ie,w.symbolCross=se,w.symbolDiamond=be,w.symbolSquare=Me,w.symbolStar=me,w.symbolTriangle=Oe,w.symbolWye=Fe,w.symbols=Re,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H,o("d3-time")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(Ye){if(0<=Ye.y&&Ye.y<100){var ot=new Date(-1,Ye.m,Ye.d,Ye.H,Ye.M,Ye.S,Ye.L);return ot.setFullYear(Ye.y),ot}return new Date(Ye.y,Ye.m,Ye.d,Ye.H,Ye.M,Ye.S,Ye.L)}function T(Ye){if(0<=Ye.y&&Ye.y<100){var ot=new Date(Date.UTC(-1,Ye.m,Ye.d,Ye.H,Ye.M,Ye.S,Ye.L));return ot.setUTCFullYear(Ye.y),ot}return new Date(Date.UTC(Ye.y,Ye.m,Ye.d,Ye.H,Ye.M,Ye.S,Ye.L))}function e(Ye,ot,Ve){return{y:Ye,m:ot,d:Ve,H:0,M:0,S:0,L:0}}function a(Ye){var ot=Ye.dateTime,Ve=Ye.date,Ae=Ye.time,He=Ye.periods,Je=Ye.days,tt=Ye.shortDays,St=Ye.months,_t=Ye.shortMonths,kt=y(He),jt=d(He),Bt=y(Je),Wt=d(Je),Qt=y(tt),Zt=d(tt),cr=y(St),Xr=d(St),vn=y(_t),en=d(_t),ft={a:ct,A:yt,b:Rt,B:wt,c:null,d:z,e:z,f:j,H:B,I:G,j:Q,L:X,m:re,M:ue,p:Dt,q:Jt,Q:We,s:xt,S:K,u:te,U:Y,V,w:ee,W:ne,x:null,X:null,y:Z,Y:q,Z:ie,"%":Re},ar={a:fr,A:Rr,b:Sr,B:Pr,c:null,d:se,e:se,f:de,H:ae,I:oe,j:be,L:ce,m:ye,M:ge,p:Jr,q:ur,Q:We,s:xt,S:me,u:Me,U:Le,V:Oe,w:_e,W:Ee,x:null,X:null,y:Ze,Y:Ge,Z:Fe,"%":Re},rr={a:vt,A:pt,b:Ct,B:Ht,c:Pe,d:v,e:v,f:I,H:S,I:S,j:C,L:F,m:b,M:k,p:et,q:g,Q:R,s:O,S:E,u:c,U:m,V:l,w:p,W:x,x:ke,X:lt,y:A,Y:u,Z:_,"%":D};ft.x=Kt(Ve,ft),ft.X=Kt(Ae,ft),ft.c=Kt(ot,ft),ar.x=Kt(Ve,ar),ar.X=Kt(Ae,ar),ar.c=Kt(ot,ar);function Kt(wr,Br){return function(Yr){var Dr=[],at=-1,zt=0,qt=wr.length,hr,Ur,Gr;for(Yr instanceof Date||(Yr=new Date(+Yr));++at<qt;)wr.charCodeAt(at)===37&&(Dr.push(wr.slice(zt,at)),(Ur=n[hr=wr.charAt(++at)])!=null?hr=wr.charAt(++at):Ur=hr==="e"?" ":"0",(Gr=Br[hr])&&(hr=Gr(Yr,Ur)),Dr.push(hr),zt=at+1);return Dr.push(wr.slice(zt,at)),Dr.join("")}}function Er(wr,Br){return function(Yr){var Dr=e(1900,void 0,1),at=st(Dr,wr,Yr+="",0),zt,qt;if(at!=Yr.length)return null;if("Q"in Dr)return new Date(Dr.Q);if("s"in Dr)return new Date(Dr.s*1e3+("L"in Dr?Dr.L:0));if(Br&&!("Z"in Dr)&&(Dr.Z=0),"p"in Dr&&(Dr.H=Dr.H%12+Dr.p*12),Dr.m===void 0&&(Dr.m="q"in Dr?Dr.q:0),"V"in Dr){if(Dr.V<1||Dr.V>53)return null;"w"in Dr||(Dr.w=1),"Z"in Dr?(zt=T(e(Dr.y,0,1)),qt=zt.getUTCDay(),zt=qt>4||qt===0?f.utcMonday.ceil(zt):f.utcMonday(zt),zt=f.utcDay.offset(zt,(Dr.V-1)*7),Dr.y=zt.getUTCFullYear(),Dr.m=zt.getUTCMonth(),Dr.d=zt.getUTCDate()+(Dr.w+6)%7):(zt=M(e(Dr.y,0,1)),qt=zt.getDay(),zt=qt>4||qt===0?f.timeMonday.ceil(zt):f.timeMonday(zt),zt=f.timeDay.offset(zt,(Dr.V-1)*7),Dr.y=zt.getFullYear(),Dr.m=zt.getMonth(),Dr.d=zt.getDate()+(Dr.w+6)%7)}else("W"in Dr||"U"in Dr)&&("w"in Dr||(Dr.w="u"in Dr?Dr.u%7:"W"in Dr?1:0),qt="Z"in Dr?T(e(Dr.y,0,1)).getUTCDay():M(e(Dr.y,0,1)).getDay(),Dr.m=0,Dr.d="W"in Dr?(Dr.w+6)%7+Dr.W*7-(qt+5)%7:Dr.w+Dr.U*7-(qt+6)%7);return"Z"in Dr?(Dr.H+=Dr.Z/100|0,Dr.M+=Dr.Z%100,T(Dr)):M(Dr)}}function st(wr,Br,Yr,Dr){for(var at=0,zt=Br.length,qt=Yr.length,hr,Ur;at<zt;){if(Dr>=qt)return-1;if(hr=Br.charCodeAt(at++),hr===37){if(hr=Br.charAt(at++),Ur=rr[hr in n?Br.charAt(at++):hr],!Ur||(Dr=Ur(wr,Yr,Dr))<0)return-1}else if(hr!=Yr.charCodeAt(Dr++))return-1}return Dr}function et(wr,Br,Yr){var Dr=kt.exec(Br.slice(Yr));return Dr?(wr.p=jt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function vt(wr,Br,Yr){var Dr=Qt.exec(Br.slice(Yr));return Dr?(wr.w=Zt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function pt(wr,Br,Yr){var Dr=Bt.exec(Br.slice(Yr));return Dr?(wr.w=Wt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function Ct(wr,Br,Yr){var Dr=vn.exec(Br.slice(Yr));return Dr?(wr.m=en[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function Ht(wr,Br,Yr){var Dr=cr.exec(Br.slice(Yr));return Dr?(wr.m=Xr[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function Pe(wr,Br,Yr){return st(wr,ot,Br,Yr)}function ke(wr,Br,Yr){return st(wr,Ve,Br,Yr)}function lt(wr,Br,Yr){return st(wr,Ae,Br,Yr)}function ct(wr){return tt[wr.getDay()]}function yt(wr){return Je[wr.getDay()]}function Rt(wr){return _t[wr.getMonth()]}function wt(wr){return St[wr.getMonth()]}function Dt(wr){return He[+(wr.getHours()>=12)]}function Jt(wr){return 1+~~(wr.getMonth()/3)}function fr(wr){return tt[wr.getUTCDay()]}function Rr(wr){return Je[wr.getUTCDay()]}function Sr(wr){return _t[wr.getUTCMonth()]}function Pr(wr){return St[wr.getUTCMonth()]}function Jr(wr){return He[+(wr.getUTCHours()>=12)]}function ur(wr){return 1+~~(wr.getUTCMonth()/3)}return{format:function(wr){var Br=Kt(wr+="",ft);return Br.toString=function(){return wr},Br},parse:function(wr){var Br=Er(wr+="",!1);return Br.toString=function(){return wr},Br},utcFormat:function(wr){var Br=Kt(wr+="",ar);return Br.toString=function(){return wr},Br},utcParse:function(wr){var Br=Er(wr+="",!0);return Br.toString=function(){return wr},Br}}}var n={"-":"",_:" ",0:"0"},r=/^\s*\d+/,t=/^%/,h=/[\\^$*+?|[\]().{}]/g;function i(Ye,ot,Ve){var Ae=Ye<0?"-":"",He=(Ae?-Ye:Ye)+"",Je=He.length;return Ae+(Je<Ve?new Array(Ve-Je+1).join(ot)+He:He)}function s(Ye){return Ye.replace(h,"\\$&")}function y(Ye){return new RegExp("^(?:"+Ye.map(s).join("|")+")","i")}function d(Ye){for(var ot={},Ve=-1,Ae=Ye.length;++Ve<Ae;)ot[Ye[Ve].toLowerCase()]=Ve;return ot}function p(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+1));return Ae?(Ye.w=+Ae[0],Ve+Ae[0].length):-1}function c(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+1));return Ae?(Ye.u=+Ae[0],Ve+Ae[0].length):-1}function m(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.U=+Ae[0],Ve+Ae[0].length):-1}function l(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.V=+Ae[0],Ve+Ae[0].length):-1}function x(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.W=+Ae[0],Ve+Ae[0].length):-1}function u(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+4));return Ae?(Ye.y=+Ae[0],Ve+Ae[0].length):-1}function A(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.y=+Ae[0]+(+Ae[0]>68?1900:2e3),Ve+Ae[0].length):-1}function _(Ye,ot,Ve){var Ae=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ot.slice(Ve,Ve+6));return Ae?(Ye.Z=Ae[1]?0:-(Ae[2]+(Ae[3]||"00")),Ve+Ae[0].length):-1}function g(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+1));return Ae?(Ye.q=Ae[0]*3-3,Ve+Ae[0].length):-1}function b(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.m=Ae[0]-1,Ve+Ae[0].length):-1}function v(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.d=+Ae[0],Ve+Ae[0].length):-1}function C(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+3));return Ae?(Ye.m=0,Ye.d=+Ae[0],Ve+Ae[0].length):-1}function S(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.H=+Ae[0],Ve+Ae[0].length):-1}function k(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.M=+Ae[0],Ve+Ae[0].length):-1}function E(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+2));return Ae?(Ye.S=+Ae[0],Ve+Ae[0].length):-1}function F(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+3));return Ae?(Ye.L=+Ae[0],Ve+Ae[0].length):-1}function I(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve,Ve+6));return Ae?(Ye.L=Math.floor(Ae[0]/1e3),Ve+Ae[0].length):-1}function D(Ye,ot,Ve){var Ae=t.exec(ot.slice(Ve,Ve+1));return Ae?Ve+Ae[0].length:-1}function R(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve));return Ae?(Ye.Q=+Ae[0],Ve+Ae[0].length):-1}function O(Ye,ot,Ve){var Ae=r.exec(ot.slice(Ve));return Ae?(Ye.s=+Ae[0],Ve+Ae[0].length):-1}function z(Ye,ot){return i(Ye.getDate(),ot,2)}function B(Ye,ot){return i(Ye.getHours(),ot,2)}function G(Ye,ot){return i(Ye.getHours()%12||12,ot,2)}function Q(Ye,ot){return i(1+f.timeDay.count(f.timeYear(Ye),Ye),ot,3)}function X(Ye,ot){return i(Ye.getMilliseconds(),ot,3)}function j(Ye,ot){return X(Ye,ot)+"000"}function re(Ye,ot){return i(Ye.getMonth()+1,ot,2)}function ue(Ye,ot){return i(Ye.getMinutes(),ot,2)}function K(Ye,ot){return i(Ye.getSeconds(),ot,2)}function te(Ye){var ot=Ye.getDay();return ot===0?7:ot}function Y(Ye,ot){return i(f.timeSunday.count(f.timeYear(Ye)-1,Ye),ot,2)}function V(Ye,ot){var Ve=Ye.getDay();return Ye=Ve>=4||Ve===0?f.timeThursday(Ye):f.timeThursday.ceil(Ye),i(f.timeThursday.count(f.timeYear(Ye),Ye)+(f.timeYear(Ye).getDay()===4),ot,2)}function ee(Ye){return Ye.getDay()}function ne(Ye,ot){return i(f.timeMonday.count(f.timeYear(Ye)-1,Ye),ot,2)}function Z(Ye,ot){return i(Ye.getFullYear()%100,ot,2)}function q(Ye,ot){return i(Ye.getFullYear()%1e4,ot,4)}function ie(Ye){var ot=Ye.getTimezoneOffset();return(ot>0?"-":(ot*=-1,"+"))+i(ot/60|0,"0",2)+i(ot%60,"0",2)}function se(Ye,ot){return i(Ye.getUTCDate(),ot,2)}function ae(Ye,ot){return i(Ye.getUTCHours(),ot,2)}function oe(Ye,ot){return i(Ye.getUTCHours()%12||12,ot,2)}function be(Ye,ot){return i(1+f.utcDay.count(f.utcYear(Ye),Ye),ot,3)}function ce(Ye,ot){return i(Ye.getUTCMilliseconds(),ot,3)}function de(Ye,ot){return ce(Ye,ot)+"000"}function ye(Ye,ot){return i(Ye.getUTCMonth()+1,ot,2)}function ge(Ye,ot){return i(Ye.getUTCMinutes(),ot,2)}function me(Ye,ot){return i(Ye.getUTCSeconds(),ot,2)}function Me(Ye){var ot=Ye.getUTCDay();return ot===0?7:ot}function Le(Ye,ot){return i(f.utcSunday.count(f.utcYear(Ye)-1,Ye),ot,2)}function Oe(Ye,ot){var Ve=Ye.getUTCDay();return Ye=Ve>=4||Ve===0?f.utcThursday(Ye):f.utcThursday.ceil(Ye),i(f.utcThursday.count(f.utcYear(Ye),Ye)+(f.utcYear(Ye).getUTCDay()===4),ot,2)}function _e(Ye){return Ye.getUTCDay()}function Ee(Ye,ot){return i(f.utcMonday.count(f.utcYear(Ye)-1,Ye),ot,2)}function Ze(Ye,ot){return i(Ye.getUTCFullYear()%100,ot,2)}function Ge(Ye,ot){return i(Ye.getUTCFullYear()%1e4,ot,4)}function Fe(){return"+0000"}function Re(){return"%"}function We(Ye){return+Ye}function xt(Ye){return Math.floor(+Ye/1e3)}var Nt;tr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tr(Ye){return Nt=a(Ye),w.timeFormat=Nt.format,w.timeParse=Nt.parse,w.utcFormat=Nt.utcFormat,w.utcParse=Nt.utcParse,Nt}var Vt="%Y-%m-%dT%H:%M:%S.%LZ";function Pt(Ye){return Ye.toISOString()}var $t=Date.prototype.toISOString?Pt:w.utcFormat(Vt);function Ut(Ye){var ot=new Date(Ye);return isNaN(ot)?null:ot}var Lt=+new Date("2000-01-01T00:00:00.000Z")?Ut:w.utcParse(Vt);w.isoFormat=$t,w.isoParse=Lt,w.timeFormatDefaultLocale=tr,w.timeFormatLocale=a,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=new Date,M=new Date;function T(_e,Ee,Ze,Ge){function Fe(Re){return _e(Re=arguments.length===0?new Date:new Date(+Re)),Re}return Fe.floor=function(Re){return _e(Re=new Date(+Re)),Re},Fe.ceil=function(Re){return _e(Re=new Date(Re-1)),Ee(Re,1),_e(Re),Re},Fe.round=function(Re){var We=Fe(Re),xt=Fe.ceil(Re);return Re-We<xt-Re?We:xt},Fe.offset=function(Re,We){return Ee(Re=new Date(+Re),We==null?1:Math.floor(We)),Re},Fe.range=function(Re,We,xt){var Nt=[],tr;if(Re=Fe.ceil(Re),xt=xt==null?1:Math.floor(xt),!(Re<We)||!(xt>0))return Nt;do Nt.push(tr=new Date(+Re)),Ee(Re,xt),_e(Re);while(tr<Re&&Re<We);return Nt},Fe.filter=function(Re){return T(function(We){if(We>=We)for(;_e(We),!Re(We);)We.setTime(We-1)},function(We,xt){if(We>=We)if(xt<0)for(;++xt<=0;)for(;Ee(We,-1),!Re(We););else for(;--xt>=0;)for(;Ee(We,1),!Re(We););})},Ze&&(Fe.count=function(Re,We){return f.setTime(+Re),M.setTime(+We),_e(f),_e(M),Math.floor(Ze(f,M))},Fe.every=function(Re){return Re=Math.floor(Re),!isFinite(Re)||!(Re>0)?null:Re>1?Fe.filter(Ge?function(We){return Ge(We)%Re===0}:function(We){return Fe.count(0,We)%Re===0}):Fe}),Fe}var e=T(function(){},function(_e,Ee){_e.setTime(+_e+Ee)},function(_e,Ee){return Ee-_e});e.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?T(function(Ee){Ee.setTime(Math.floor(Ee/_e)*_e)},function(Ee,Ze){Ee.setTime(+Ee+Ze*_e)},function(Ee,Ze){return(Ze-Ee)/_e}):e};var a=e.range,n=1e3,r=6e4,t=36e5,h=864e5,i=6048e5,s=T(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,Ee){_e.setTime(+_e+Ee*n)},function(_e,Ee){return(Ee-_e)/n},function(_e){return _e.getUTCSeconds()}),y=s.range,d=T(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*n)},function(_e,Ee){_e.setTime(+_e+Ee*r)},function(_e,Ee){return(Ee-_e)/r},function(_e){return _e.getMinutes()}),p=d.range,c=T(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*n-_e.getMinutes()*r)},function(_e,Ee){_e.setTime(+_e+Ee*t)},function(_e,Ee){return(Ee-_e)/t},function(_e){return _e.getHours()}),m=c.range,l=T(function(_e){_e.setHours(0,0,0,0)},function(_e,Ee){_e.setDate(_e.getDate()+Ee)},function(_e,Ee){return(Ee-_e-(Ee.getTimezoneOffset()-_e.getTimezoneOffset())*r)/h},function(_e){return _e.getDate()-1}),x=l.range;function u(_e){return T(function(Ee){Ee.setDate(Ee.getDate()-(Ee.getDay()+7-_e)%7),Ee.setHours(0,0,0,0)},function(Ee,Ze){Ee.setDate(Ee.getDate()+Ze*7)},function(Ee,Ze){return(Ze-Ee-(Ze.getTimezoneOffset()-Ee.getTimezoneOffset())*r)/i})}var A=u(0),_=u(1),g=u(2),b=u(3),v=u(4),C=u(5),S=u(6),k=A.range,E=_.range,F=g.range,I=b.range,D=v.range,R=C.range,O=S.range,z=T(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,Ee){_e.setMonth(_e.getMonth()+Ee)},function(_e,Ee){return Ee.getMonth()-_e.getMonth()+(Ee.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),B=z.range,G=T(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,Ee){_e.setFullYear(_e.getFullYear()+Ee)},function(_e,Ee){return Ee.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});G.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:T(function(Ee){Ee.setFullYear(Math.floor(Ee.getFullYear()/_e)*_e),Ee.setMonth(0,1),Ee.setHours(0,0,0,0)},function(Ee,Ze){Ee.setFullYear(Ee.getFullYear()+Ze*_e)})};var Q=G.range,X=T(function(_e){_e.setUTCSeconds(0,0)},function(_e,Ee){_e.setTime(+_e+Ee*r)},function(_e,Ee){return(Ee-_e)/r},function(_e){return _e.getUTCMinutes()}),j=X.range,re=T(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,Ee){_e.setTime(+_e+Ee*t)},function(_e,Ee){return(Ee-_e)/t},function(_e){return _e.getUTCHours()}),ue=re.range,K=T(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,Ee){_e.setUTCDate(_e.getUTCDate()+Ee)},function(_e,Ee){return(Ee-_e)/h},function(_e){return _e.getUTCDate()-1}),te=K.range;function Y(_e){return T(function(Ee){Ee.setUTCDate(Ee.getUTCDate()-(Ee.getUTCDay()+7-_e)%7),Ee.setUTCHours(0,0,0,0)},function(Ee,Ze){Ee.setUTCDate(Ee.getUTCDate()+Ze*7)},function(Ee,Ze){return(Ze-Ee)/i})}var V=Y(0),ee=Y(1),ne=Y(2),Z=Y(3),q=Y(4),ie=Y(5),se=Y(6),ae=V.range,oe=ee.range,be=ne.range,ce=Z.range,de=q.range,ye=ie.range,ge=se.range,me=T(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,Ee){_e.setUTCMonth(_e.getUTCMonth()+Ee)},function(_e,Ee){return Ee.getUTCMonth()-_e.getUTCMonth()+(Ee.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Me=me.range,Le=T(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,Ee){_e.setUTCFullYear(_e.getUTCFullYear()+Ee)},function(_e,Ee){return Ee.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});Le.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:T(function(Ee){Ee.setUTCFullYear(Math.floor(Ee.getUTCFullYear()/_e)*_e),Ee.setUTCMonth(0,1),Ee.setUTCHours(0,0,0,0)},function(Ee,Ze){Ee.setUTCFullYear(Ee.getUTCFullYear()+Ze*_e)})};var Oe=Le.range;w.timeDay=l,w.timeDays=x,w.timeFriday=C,w.timeFridays=R,w.timeHour=c,w.timeHours=m,w.timeInterval=T,w.timeMillisecond=e,w.timeMilliseconds=a,w.timeMinute=d,w.timeMinutes=p,w.timeMonday=_,w.timeMondays=E,w.timeMonth=z,w.timeMonths=B,w.timeSaturday=S,w.timeSaturdays=O,w.timeSecond=s,w.timeSeconds=y,w.timeSunday=A,w.timeSundays=k,w.timeThursday=v,w.timeThursdays=D,w.timeTuesday=g,w.timeTuesdays=F,w.timeWednesday=b,w.timeWednesdays=I,w.timeWeek=A,w.timeWeeks=k,w.timeYear=G,w.timeYears=Q,w.utcDay=K,w.utcDays=te,w.utcFriday=ie,w.utcFridays=ye,w.utcHour=re,w.utcHours=ue,w.utcMillisecond=e,w.utcMilliseconds=a,w.utcMinute=X,w.utcMinutes=j,w.utcMonday=ee,w.utcMondays=oe,w.utcMonth=me,w.utcMonths=Me,w.utcSaturday=se,w.utcSaturdays=ge,w.utcSecond=s,w.utcSeconds=y,w.utcSunday=V,w.utcSundays=ae,w.utcThursday=q,w.utcThursdays=de,w.utcTuesday=ne,w.utcTuesdays=be,w.utcWednesday=Z,w.utcWednesdays=ce,w.utcWeek=V,w.utcWeeks=ae,w.utcYear=Le,w.utcYears=Oe,Object.defineProperty(w,"__esModule",{value:!0})})},{}],122:[function(o,U,H){arguments[4][121][0].apply(H,arguments)},{dup:121}],123:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=0,M=0,T=0,e=1e3,a,n,r=0,t=0,h=0,i=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};function y(){return t||(s(d),t=i.now()+h)}function d(){t=0}function p(){this._call=this._time=this._next=null}p.prototype=c.prototype={constructor:p,restart:function(b,v,C){if(typeof b!="function")throw new TypeError("callback is not a function");C=(C==null?y():+C)+(v==null?0:+v),!this._next&&n!==this&&(n?n._next=this:a=this,n=this),this._call=b,this._time=C,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function c(b,v,C){var S=new p;return S.restart(b,v,C),S}function m(){y(),++f;for(var b=a,v;b;)(v=t-b._time)>=0&&b._call.call(null,v),b=b._next;--f}function l(){t=(r=i.now())+h,f=M=0;try{m()}finally{f=0,u(),t=0}}function x(){var b=i.now(),v=b-r;v>e&&(h-=v,r=b)}function u(){for(var b,v=a,C,S=1/0;v;)v._call?(S>v._time&&(S=v._time),b=v,v=v._next):(C=v._next,v._next=null,v=b?b._next=C:a=C);n=b,A(S)}function A(b){if(!f){M&&(M=clearTimeout(M));var v=b-t;v>24?(b<1/0&&(M=setTimeout(l,b-i.now()-h)),T&&(T=clearInterval(T))):(T||(r=i.now(),T=setInterval(x,e)),f=1,s(l))}}function _(b,v,C){var S=new p;return v=v==null?0:+v,S.restart(function(k){S.stop(),b(k+v)},v,C),S}function g(b,v,C){var S=new p,k=v;return v==null?(S.restart(b,v,C),S):(v=+v,C=C==null?y():+C,S.restart(function E(F){F+=k,S.restart(E,k+=v,C),b(F)},v,C),S)}w.interval=g,w.now=y,w.timeout=_,w.timer=c,w.timerFlush=m,Object.defineProperty(w,"__esModule",{value:!0})})},{}],124:[function(o,U,H){U.exports=function(){for(var w=0;w<arguments.length;w++)if(arguments[w]!==void 0)return arguments[w]}},{}],125:[function(o,U,H){U.exports=T;var w=T.canvas=document.createElement("canvas"),f=w.getContext("2d"),M=e([32,126]);T.createPairs=e,T.ascii=M;function T(a,n){Array.isArray(a)&&(a=a.join(", "));var r={},t,h=16,i=.05;n&&(n.length===2&&typeof n[0]=="number"?t=e(n):Array.isArray(n)?t=n:(n.o?t=e(n.o):n.pairs&&(t=n.pairs),n.fontSize&&(h=n.fontSize),n.threshold!=null&&(i=n.threshold))),t||(t=M),f.font=h+"px "+a;for(var s=0;s<t.length;s++){var y=t[s],d=f.measureText(y[0]).width+f.measureText(y[1]).width,p=f.measureText(y).width;if(Math.abs(d-p)>h*i){var c=(p-d)/h;r[y]=c*1e3}}return r}function e(a){for(var n=[],r=a[0];r<=a[1];r++)for(var t=String.fromCharCode(r),h=a[0];h<a[1];h++){var i=String.fromCharCode(h),s=t+i;n.push(s)}return n}},{}],126:[function(o,U,H){var w=o("abs-svg-path"),f=o("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};U.exports=function(T,e){T.beginPath(),f(w(e)).forEach(function(a){var n=a[0],r=a.slice(1);T[M[n]].apply(T,r)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(o,U,H){U.exports=function(w){switch(w){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(o,U,H){function w(T,e,a){var n=T[a]|0;if(n<=0)return[];var r=new Array(n),t;if(a===T.length-1)for(t=0;t<n;++t)r[t]=e;else for(t=0;t<n;++t)r[t]=w(T,e,a+1);return r}function f(T,e){var a,n;for(a=new Array(T),n=0;n<T;++n)a[n]=e;return a}function M(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return f(T|0,e);break;case"object":if(typeof T.length=="number")return w(T,e,0);break}return[]}U.exports=M},{}],129:[function(o,U,H){U.exports=w,U.exports.default=w;function w(R,O,z){z=z||2;var B=O&&O.length,G=B?O[0]*z:R.length,Q=f(R,0,G,z,!0),X=[];if(!Q||Q.next===Q.prev)return X;var j,re,ue,K,te,Y,V;if(B&&(Q=t(R,O,Q,z)),R.length>80*z){j=ue=R[0],re=K=R[1];for(var ee=z;ee<G;ee+=z)te=R[ee],Y=R[ee+1],te<j&&(j=te),Y<re&&(re=Y),te>ue&&(ue=te),Y>K&&(K=Y);V=Math.max(ue-j,K-re),V=V!==0?1/V:0}return T(Q,X,z,j,re,V),X}function f(R,O,z,B,G){var Q,X;if(G===D(R,O,z,B)>0)for(Q=O;Q<z;Q+=B)X=E(Q,R[Q],R[Q+1],X);else for(Q=z-B;Q>=O;Q-=B)X=E(Q,R[Q],R[Q+1],X);return X&&A(X,X.next)&&(F(X),X=X.next),X}function M(R,O){if(!R)return R;O||(O=R);var z=R,B;do if(B=!1,!z.steiner&&(A(z,z.next)||u(z.prev,z,z.next)===0)){if(F(z),z=O=z.prev,z===z.next)break;B=!0}else z=z.next;while(B||z!==O);return O}function T(R,O,z,B,G,Q,X){if(!!R){!X&&Q&&d(R,B,G,Q);for(var j=R,re,ue;R.prev!==R.next;){if(re=R.prev,ue=R.next,Q?a(R,B,G,Q):e(R)){O.push(re.i/z),O.push(R.i/z),O.push(ue.i/z),F(R),R=ue.next,j=ue.next;continue}if(R=ue,R===j){X?X===1?(R=n(M(R),O,z),T(R,O,z,B,G,Q,2)):X===2&&r(R,O,z,B,G,Q):T(M(R),O,z,B,G,Q,1);break}}}}function e(R){var O=R.prev,z=R,B=R.next;if(u(O,z,B)>=0)return!1;for(var G=R.next.next;G!==R.prev;){if(l(O.x,O.y,z.x,z.y,B.x,B.y,G.x,G.y)&&u(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function a(R,O,z,B){var G=R.prev,Q=R,X=R.next;if(u(G,Q,X)>=0)return!1;for(var j=G.x<Q.x?G.x<X.x?G.x:X.x:Q.x<X.x?Q.x:X.x,re=G.y<Q.y?G.y<X.y?G.y:X.y:Q.y<X.y?Q.y:X.y,ue=G.x>Q.x?G.x>X.x?G.x:X.x:Q.x>X.x?Q.x:X.x,K=G.y>Q.y?G.y>X.y?G.y:X.y:Q.y>X.y?Q.y:X.y,te=c(j,re,O,z,B),Y=c(ue,K,O,z,B),V=R.prevZ,ee=R.nextZ;V&&V.z>=te&&ee&&ee.z<=Y;){if(V!==R.prev&&V!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,V.x,V.y)&&u(V.prev,V,V.next)>=0||(V=V.prevZ,ee!==R.prev&&ee!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,ee.x,ee.y)&&u(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;V&&V.z>=te;){if(V!==R.prev&&V!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,V.x,V.y)&&u(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;ee&&ee.z<=Y;){if(ee!==R.prev&&ee!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,ee.x,ee.y)&&u(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function n(R,O,z){var B=R;do{var G=B.prev,Q=B.next.next;!A(G,Q)&&_(G,B,B.next,Q)&&C(G,Q)&&C(Q,G)&&(O.push(G.i/z),O.push(B.i/z),O.push(Q.i/z),F(B),F(B.next),B=R=Q),B=B.next}while(B!==R);return M(B)}function r(R,O,z,B,G,Q){var X=R;do{for(var j=X.next.next;j!==X.prev;){if(X.i!==j.i&&x(X,j)){var re=k(X,j);X=M(X,X.next),re=M(re,re.next),T(X,O,z,B,G,Q),T(re,O,z,B,G,Q);return}j=j.next}X=X.next}while(X!==R)}function t(R,O,z,B){var G=[],Q,X,j,re,ue;for(Q=0,X=O.length;Q<X;Q++)j=O[Q]*B,re=Q<X-1?O[Q+1]*B:R.length,ue=f(R,j,re,B,!1),ue===ue.next&&(ue.steiner=!0),G.push(m(ue));for(G.sort(h),Q=0;Q<G.length;Q++)i(G[Q],z),z=M(z,z.next);return z}function h(R,O){return R.x-O.x}function i(R,O){if(O=s(R,O),O){var z=k(O,R);M(O,O.next),M(z,z.next)}}function s(R,O){var z=O,B=R.x,G=R.y,Q=-1/0,X;do{if(G<=z.y&&G>=z.next.y&&z.next.y!==z.y){var j=z.x+(G-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(j<=B&&j>Q){if(Q=j,j===B){if(G===z.y)return z;if(G===z.next.y)return z.next}X=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!X)return null;if(B===Q)return X;var re=X,ue=X.x,K=X.y,te=1/0,Y;z=X;do B>=z.x&&z.x>=ue&&B!==z.x&&l(G<K?B:Q,G,ue,K,G<K?Q:B,G,z.x,z.y)&&(Y=Math.abs(G-z.y)/(B-z.x),C(z,R)&&(Y<te||Y===te&&(z.x>X.x||z.x===X.x&&y(X,z)))&&(X=z,te=Y)),z=z.next;while(z!==re);return X}function y(R,O){return u(R.prev,R,O.prev)<0&&u(O.next,R,R.next)<0}function d(R,O,z,B){var G=R;do G.z===null&&(G.z=c(G.x,G.y,O,z,B)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,p(G)}function p(R){var O,z,B,G,Q,X,j,re,ue=1;do{for(z=R,R=null,Q=null,X=0;z;){for(X++,B=z,j=0,O=0;O<ue&&(j++,B=B.nextZ,!!B);O++);for(re=ue;j>0||re>0&&B;)j!==0&&(re===0||!B||z.z<=B.z)?(G=z,z=z.nextZ,j--):(G=B,B=B.nextZ,re--),Q?Q.nextZ=G:R=G,G.prevZ=Q,Q=G;z=B}Q.nextZ=null,ue*=2}while(X>1);return R}function c(R,O,z,B,G){return R=32767*(R-z)*G,O=32767*(O-B)*G,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function m(R){var O=R,z=R;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==R);return z}function l(R,O,z,B,G,Q,X,j){return(G-X)*(O-j)-(R-X)*(Q-j)>=0&&(R-X)*(B-j)-(z-X)*(O-j)>=0&&(z-X)*(Q-j)-(G-X)*(B-j)>=0}function x(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!v(R,O)&&(C(R,O)&&C(O,R)&&S(R,O)&&(u(R.prev,R,O.prev)||u(R,O.prev,O))||A(R,O)&&u(R.prev,R,R.next)>0&&u(O.prev,O,O.next)>0)}function u(R,O,z){return(O.y-R.y)*(z.x-O.x)-(O.x-R.x)*(z.y-O.y)}function A(R,O){return R.x===O.x&&R.y===O.y}function _(R,O,z,B){var G=b(u(R,O,z)),Q=b(u(R,O,B)),X=b(u(z,B,R)),j=b(u(z,B,O));return!!(G!==Q&&X!==j||G===0&&g(R,z,O)||Q===0&&g(R,B,O)||X===0&&g(z,R,B)||j===0&&g(z,O,B))}function g(R,O,z){return O.x<=Math.max(R.x,z.x)&&O.x>=Math.min(R.x,z.x)&&O.y<=Math.max(R.y,z.y)&&O.y>=Math.min(R.y,z.y)}function b(R){return R>0?1:R<0?-1:0}function v(R,O){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==O.i&&z.next.i!==O.i&&_(z,z.next,R,O))return!0;z=z.next}while(z!==R);return!1}function C(R,O){return u(R.prev,R,R.next)<0?u(R,O,R.next)>=0&&u(R,R.prev,O)>=0:u(R,O,R.prev)<0||u(R,R.next,O)<0}function S(R,O){var z=R,B=!1,G=(R.x+O.x)/2,Q=(R.y+O.y)/2;do z.y>Q!=z.next.y>Q&&z.next.y!==z.y&&G<(z.next.x-z.x)*(Q-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next;while(z!==R);return B}function k(R,O){var z=new I(R.i,R.x,R.y),B=new I(O.i,O.x,O.y),G=R.next,Q=O.prev;return R.next=O,O.prev=R,z.next=G,G.prev=z,B.next=z,z.prev=B,Q.next=B,B.prev=Q,B}function E(R,O,z,B){var G=new I(R,O,z);return B?(G.next=B.next,G.prev=B,B.next.prev=G,B.next=G):(G.prev=G,G.next=G),G}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,z){this.i=R,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(R,O,z,B){var G=O&&O.length,Q=G?O[0]*z:R.length,X=Math.abs(D(R,0,Q,z));if(G)for(var j=0,re=O.length;j<re;j++){var ue=O[j]*z,K=j<re-1?O[j+1]*z:R.length;X-=Math.abs(D(R,ue,K,z))}var te=0;for(j=0;j<B.length;j+=3){var Y=B[j]*z,V=B[j+1]*z,ee=B[j+2]*z;te+=Math.abs((R[Y]-R[ee])*(R[V+1]-R[Y+1])-(R[Y]-R[V])*(R[ee+1]-R[Y+1]))}return X===0&&te===0?0:Math.abs((te-X)/X)};function D(R,O,z,B){for(var G=0,Q=O,X=z-B;Q<z;Q+=B)G+=(R[X]-R[Q])*(R[Q+1]+R[X+1]),X=Q;return G}w.flatten=function(R){for(var O=R[0][0].length,z={vertices:[],holes:[],dimensions:O},B=0,G=0;G<R.length;G++){for(var Q=0;Q<R[G].length;Q++)for(var X=0;X<O;X++)z.vertices.push(R[G][Q][X]);G>0&&(B+=R[G-1].length,z.holes.push(B))}return z}},{}],130:[function(o,U,H){var w=o("strongly-connected-components");U.exports=function(M,T){var e=[],a=[],n=[],r={},t=[],h;function i(A){n[A]=!1,r.hasOwnProperty(A)&&Object.keys(r[A]).forEach(function(_){delete r[A][_],n[_]&&i(_)})}function s(A){var _=!1;a.push(A),n[A]=!0;var g,b;for(g=0;g<t[A].length;g++)b=t[A][g],b===h?(y(h,a),_=!0):n[b]||(_=s(b));if(_)i(A);else for(g=0;g<t[A].length;g++){b=t[A][g];var v=r[b];v||(v={},r[b]=v),v[b]=!0}return a.pop(),_}function y(A,_){var g=[].concat(_).concat(A);T?T(s):e.push(g)}function d(A){for(var _=0;_<M.length;_++)_<A&&(M[_]=[]),M[_]=M[_].filter(function(g){return g>=A})}function p(A){d(A);for(var _=M,g=w(_),b=g.components.filter(function(I){return I.length>1}),v=1/0,C,S=0;S<b.length;S++)for(var k=0;k<b[S].length;k++)b[S][k]<v&&(v=b[S][k],C=S);var E=b[C];if(!E)return!1;var F=M.map(function(I,D){return E.indexOf(D)===-1?[]:I.filter(function(R){return E.indexOf(R)!==-1})});return{leastVertex:v,adjList:F}}h=0;for(var c=M.length;h<c;){var m=p(h);if(h=m.leastVertex,t=m.adjList,t){for(var l=0;l<t.length;l++)for(var x=0;x<t[l].length;x++){var u=t[l][x];n[+u]=!1,r[u]={}}s(h),h=h+1}else h=c}if(!T)return e}},{"strongly-connected-components":307}],131:[function(o,U,H){var w=o("../../object/valid-value");U.exports=function(){return w(this).length=0,this}},{"../../object/valid-value":162}],132:[function(o,U,H){U.exports=o("./is-implemented")()?Array.from:o("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(o,U,H){U.exports=function(){var w=Array.from,f,M;return typeof w!="function"?!1:(f=["raz","dwa"],M=w(f),Boolean(M&&M!==f&&M[1]==="dwa"))}},{}],134:[function(o,U,H){var w=o("es6-symbol").iterator,f=o("../../function/is-arguments"),M=o("../../function/is-function"),T=o("../../number/to-pos-integer"),e=o("../../object/valid-callable"),a=o("../../object/valid-value"),n=o("../../object/is-value"),r=o("../../string/is-string"),t=Array.isArray,h=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;U.exports=function(y){var d=arguments[1],p=arguments[2],c,m,l,x,u,A,_,g,b,v;if(y=Object(a(y)),n(d)&&e(d),!this||this===Array||!M(this)){if(!d){if(f(y))return u=y.length,u!==1?Array.apply(null,y):(x=new Array(1),x[0]=y[0],x);if(t(y)){for(x=new Array(u=y.length),m=0;m<u;++m)x[m]=y[m];return x}}x=[]}else c=this;if(!t(y)){if((b=y[w])!==void 0){for(_=e(b).call(y),c&&(x=new c),g=_.next(),m=0;!g.done;)v=d?h.call(d,p,g.value,m):g.value,c?(i.value=v,s(x,m,i)):x[m]=v,g=_.next(),++m;u=m}else if(r(y)){for(u=y.length,c&&(x=new c),m=0,l=0;m<u;++m)v=y[m],m+1<u&&(A=v.charCodeAt(0),A>=55296&&A<=56319&&(v+=y[++m])),v=d?h.call(d,p,v,l):v,c?(i.value=v,s(x,l,i)):x[l]=v,++l;u=l}}if(u===void 0)for(u=T(y.length),c&&(x=new c(u)),m=0;m<u;++m)v=d?h.call(d,p,y[m],m):y[m],c?(i.value=v,s(x,m,i)):x[m]=v;return c&&(i.value=null,x.length=u),x}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(o,U,H){var w=Object.prototype.toString,f=w.call(function(){return arguments}());U.exports=function(M){return w.call(M)===f}},{}],136:[function(o,U,H){var w=Object.prototype.toString,f=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);U.exports=function(M){return typeof M=="function"&&f(w.call(M))}},{}],137:[function(o,U,H){U.exports=function(){}},{}],138:[function(o,U,H){U.exports=o("./is-implemented")()?Math.sign:o("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(o,U,H){U.exports=function(){var w=Math.sign;return typeof w!="function"?!1:w(10)===1&&w(-20)===-1}},{}],140:[function(o,U,H){U.exports=function(w){return w=Number(w),isNaN(w)||w===0?w:w>0?1:-1}},{}],141:[function(o,U,H){var w=o("../math/sign"),f=Math.abs,M=Math.floor;U.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:w(T)*M(f(T)))}},{"../math/sign":138}],142:[function(o,U,H){var w=o("./to-integer"),f=Math.max;U.exports=function(M){return f(0,w(M))}},{"./to-integer":141}],143:[function(o,U,H){var w=o("./valid-callable"),f=o("./valid-value"),M=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;U.exports=function(n,r){return function(t,h){var i,s=arguments[2],y=arguments[3];return t=Object(f(t)),w(h),i=e(t),y&&i.sort(typeof y=="function"?M.call(y,t):void 0),typeof n!="function"&&(n=i[n]),T.call(n,i,function(d,p){return a.call(t,d)?T.call(h,s,t[d],d,t,p):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(o,U,H){U.exports=o("./is-implemented")()?Object.assign:o("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(o,U,H){U.exports=function(){var w=Object.assign,f;return typeof w!="function"?!1:(f={foo:"raz"},w(f,{bar:"dwa"},{trzy:"trzy"}),f.foo+f.bar+f.trzy==="razdwatrzy")}},{}],146:[function(o,U,H){var w=o("../keys"),f=o("../valid-value"),M=Math.max;U.exports=function(T,e){var a,n,r=M(arguments.length,2),t;for(T=Object(f(T)),t=function(h){try{T[h]=e[h]}catch(i){a||(a=i)}},n=1;n<r;++n)e=arguments[n],w(e).forEach(t);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(o,U,H){var w=o("../array/from"),f=o("./assign"),M=o("./valid-value");U.exports=function(T){var e=Object(M(T)),a=arguments[1],n=Object(arguments[2]);if(e!==T&&!a)return e;var r={};return a?w(a,function(t){(n.ensure||t in T)&&(r[t]=T[t])}):f(r,T),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(o,U,H){var w=Object.create,f;o("./set-prototype-of/is-implemented")()||(f=o("./set-prototype-of/shim")),U.exports=function(){var M,T,e;return!f||f.level!==1?w:(M={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(M,T),Object.defineProperty(f,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(a,n){return w(a===null?M:a,n)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(o,U,H){U.exports=o("./_iterate")("forEach")},{"./_iterate":143}],150:[function(o,U,H){var w=o("./is-value"),f={function:!0,object:!0};U.exports=function(M){return w(M)&&f[typeof M]||!1}},{"./is-value":151}],151:[function(o,U,H){var w=o("../function/noop")();U.exports=function(f){return f!==w&&f!==null}},{"../function/noop":137}],152:[function(o,U,H){U.exports=o("./is-implemented")()?Object.keys:o("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(o,U,H){U.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(o,U,H){var w=o("../is-value"),f=Object.keys;U.exports=function(M){return f(w(M)?Object(M):M)}},{"../is-value":151}],155:[function(o,U,H){var w=o("./valid-callable"),f=o("./for-each"),M=Function.prototype.call;U.exports=function(T,e){var a={},n=arguments[2];return w(e),f(T,function(r,t,h,i){a[t]=M.call(e,n,r,t,h,i)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(o,U,H){var w=o("./is-value"),f=Array.prototype.forEach,M=Object.create,T=function(e,a){var n;for(n in e)a[n]=e[n]};U.exports=function(e){var a=M(null);return f.call(arguments,function(n){!w(n)||T(Object(n),a)}),a}},{"./is-value":151}],157:[function(o,U,H){U.exports=o("./is-implemented")()?Object.setPrototypeOf:o("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(o,U,H){var w=Object.create,f=Object.getPrototypeOf,M={};U.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||w;return typeof T!="function"?!1:f(T(e(null),M))===M}},{}],159:[function(o,U,H){var w=o("../is-object"),f=o("../valid-value"),M=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(n,r){if(f(n),r===null||w(r))return n;throw new TypeError("Prototype must be null or an object")},U.exports=function(n){var r,t;return n?(n.level===2?n.set?(t=n.set,r=function(h,i){return t.call(a(h,i),i),h}):r=function(h,i){return a(h,i).__proto__=i,h}:r=function h(i,s){var y;return a(i,s),y=M.call(h.nullPolyfill,i),y&&delete h.nullPolyfill.__proto__,s===null&&(s=h.nullPolyfill),i.__proto__=s,y&&T(h.nullPolyfill,"__proto__",e),i},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),r={},t,h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{t=h.set,t.call(n,r)}catch{}if(Object.getPrototypeOf(n)===r)return{set:t,level:2}}return n.__proto__=r,Object.getPrototypeOf(n)===r?{level:2}:(n={},n.__proto__=r,Object.getPrototypeOf(n)===r?{level:1}:!1)}()),o("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(o,U,H){U.exports=function(w){if(typeof w!="function")throw new TypeError(w+" is not a function");return w}},{}],161:[function(o,U,H){var w=o("./is-object");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not an Object");return f}},{"./is-object":150}],162:[function(o,U,H){var w=o("./is-value");U.exports=function(f){if(!w(f))throw new TypeError("Cannot use null or undefined");return f}},{"./is-value":151}],163:[function(o,U,H){U.exports=o("./is-implemented")()?String.prototype.contains:o("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(o,U,H){var w="razdwatrzy";U.exports=function(){return typeof w.contains!="function"?!1:w.contains("dwa")===!0&&w.contains("foo")===!1}},{}],165:[function(o,U,H){var w=String.prototype.indexOf;U.exports=function(f){return w.call(this,f,arguments[1])>-1}},{}],166:[function(o,U,H){var w=Object.prototype.toString,f=w.call("");U.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||w.call(M)===f)||!1}},{}],167:[function(o,U,H){var w=Object.create(null),f=Math.random;U.exports=function(){var M;do M=f().toString(36).slice(2);while(w[M]);return M}},{}],168:[function(o,U,H){var w=o("es5-ext/object/set-prototype-of"),f=o("es5-ext/string/#/contains"),M=o("d"),T=o("es6-symbol"),e=o("./"),a=Object.defineProperty,n;n=U.exports=function(r,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e.call(this,r),t?f.call(t,"key+value")?t="key+value":f.call(t,"key")?t="key":t="value":t="value",a(this,"__kind__",M("",t))},w&&w(n,e),delete n.prototype.constructor,n.prototype=Object.create(e.prototype,{_resolve:M(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),a(n.prototype,T.toStringTag,M("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(o,U,H){var w=o("es5-ext/function/is-arguments"),f=o("es5-ext/object/valid-callable"),M=o("es5-ext/string/is-string"),T=o("./get"),e=Array.isArray,a=Function.prototype.call,n=Array.prototype.some;U.exports=function(r,t){var h,i=arguments[2],s,y,d,p,c,m,l;if(e(r)||w(r)?h="array":M(r)?h="string":r=T(r),f(t),y=function(){d=!0},h==="array"){n.call(r,function(x){return a.call(t,i,x,y),d});return}if(h==="string"){for(c=r.length,p=0;p<c&&(m=r[p],p+1<c&&(l=m.charCodeAt(0),l>=55296&&l<=56319&&(m+=r[++p])),a.call(t,i,m,y),!d);++p);return}for(s=r.next();!s.done;){if(a.call(t,i,s.value,y),d)return;s=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(o,U,H){var w=o("es5-ext/function/is-arguments"),f=o("es5-ext/string/is-string"),M=o("./array"),T=o("./string"),e=o("./valid-iterable"),a=o("es6-symbol").iterator;U.exports=function(n){return typeof e(n)[a]=="function"?n[a]():w(n)?new M(n):f(n)?new T(n):new M(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(o,U,H){var w=o("es5-ext/array/#/clear"),f=o("es5-ext/object/assign"),M=o("es5-ext/object/valid-callable"),T=o("es5-ext/object/valid-value"),e=o("d"),a=o("d/auto-bind"),n=o("es6-symbol"),r=Object.defineProperty,t=Object.defineProperties,h;U.exports=h=function(i,s){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");t(this,{__list__:e("w",T(i)),__context__:e("w",s),__nextIndex__:e("w",0)}),s&&(M(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete h.prototype.constructor,t(h.prototype,f({_next:e(function(){var i;if(!!this.__list__){if(this.__redo__&&(i=this.__redo__.shift(),i!==void 0))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:e(function(i){return this.__list__[i]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",e("c",[i]));return}this.__redo__.forEach(function(s,y){s>=i&&(this.__redo__[y]=++s)},this),this.__redo__.push(i)}}),_onDelete:e(function(i){var s;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(s=this.__redo__.indexOf(i),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(y,d){y>i&&(this.__redo__[d]=--y)},this)))}),_onClear:e(function(){this.__redo__&&w.call(this.__redo__),this.__nextIndex__=0})}))),r(h.prototype,n.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(o,U,H){var w=o("es5-ext/function/is-arguments"),f=o("es5-ext/object/is-value"),M=o("es5-ext/string/is-string"),T=o("es6-symbol").iterator,e=Array.isArray;U.exports=function(a){return f(a)?e(a)||M(a)||w(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(o,U,H){var w=o("es5-ext/object/set-prototype-of"),f=o("d"),M=o("es6-symbol"),T=o("./"),e=Object.defineProperty,a;a=U.exports=function(n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");n=String(n),T.call(this,n),e(this,"__length__",f("",n.length))},w&&w(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:f(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:f(function(n){var r=this.__list__[n],t;return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),e(a.prototype,M.toStringTag,f("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(o,U,H){var w=o("./is-iterable");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not iterable");return f}},{"./is-iterable":172}],175:[function(o,U,H){U.exports=o("./is-implemented")()?o("ext/global-this").Symbol:o("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(o,U,H){var w=o("ext/global-this"),f={object:!0,symbol:!0};U.exports=function(){var M=w.Symbol,T;if(typeof M!="function")return!1;T=M("test symbol");try{String(T)}catch{return!1}return!(!f[typeof M.iterator]||!f[typeof M.toPrimitive]||!f[typeof M.toStringTag])}},{"ext/global-this":188}],177:[function(o,U,H){U.exports=function(w){return w?typeof w=="symbol"?!0:!w.constructor||w.constructor.name!=="Symbol"?!1:w[w.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(o,U,H){var w=o("d"),f=Object.create,M=Object.defineProperty,T=Object.prototype,e=f(null);U.exports=function(a){for(var n=0,r,t;e[a+(n||"")];)++n;return a+=n||"",e[a]=!0,r="@@"+a,M(T,r,w.gs(null,function(h){t||(t=!0,M(this,r,w(h)),t=!1)})),r}},{d:106}],179:[function(o,U,H){var w=o("d"),f=o("ext/global-this").Symbol;U.exports=function(M){return Object.defineProperties(M,{hasInstance:w("",f&&f.hasInstance||M("hasInstance")),isConcatSpreadable:w("",f&&f.isConcatSpreadable||M("isConcatSpreadable")),iterator:w("",f&&f.iterator||M("iterator")),match:w("",f&&f.match||M("match")),replace:w("",f&&f.replace||M("replace")),search:w("",f&&f.search||M("search")),species:w("",f&&f.species||M("species")),split:w("",f&&f.split||M("split")),toPrimitive:w("",f&&f.toPrimitive||M("toPrimitive")),toStringTag:w("",f&&f.toStringTag||M("toStringTag")),unscopables:w("",f&&f.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(o,U,H){var w=o("d"),f=o("../../../validate-symbol"),M=Object.create(null);U.exports=function(T){return Object.defineProperties(T,{for:w(function(e){return M[e]?M[e]:M[e]=T(String(e))}),keyFor:w(function(e){var a;f(e);for(a in M)if(M[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(o,U,H){var w=o("d"),f=o("./validate-symbol"),M=o("ext/global-this").Symbol,T=o("./lib/private/generate-name"),e=o("./lib/private/setup/standard-symbols"),a=o("./lib/private/setup/symbol-registry"),n=Object.create,r=Object.defineProperties,t=Object.defineProperty,h,i,s;if(typeof M=="function")try{String(M()),s=!0}catch{}else M=null;i=function(d){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return h(d)},U.exports=h=function y(d){var p;if(this instanceof y)throw new TypeError("Symbol is not a constructor");return s?M(d):(p=n(i.prototype),d=d===void 0?"":String(d),r(p,{__description__:w("",d),__name__:w("",T(d))}))},e(h),a(h),r(i.prototype,{constructor:w(h),toString:w("",function(){return this.__name__})}),r(h.prototype,{toString:w(function(){return"Symbol ("+f(this).__description__+")"}),valueOf:w(function(){return f(this)})}),t(h.prototype,h.toPrimitive,w("",function(){var y=f(this);return typeof y=="symbol"?y:y.toString()})),t(h.prototype,h.toStringTag,w("c","Symbol")),t(i.prototype,h.toStringTag,w("c",h.prototype[h.toStringTag])),t(i.prototype,h.toPrimitive,w("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(o,U,H){var w=o("./is-symbol");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not a symbol");return f}},{"./is-symbol":177}],183:[function(o,U,H){U.exports=o("./is-implemented")()?WeakMap:o("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(o,U,H){U.exports=function(){var w,f;if(typeof WeakMap!="function")return!1;try{w=new WeakMap([[f={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(w)!=="[object WeakMap]"||typeof w.set!="function"||w.set({},1)!==w||typeof w.delete!="function"||typeof w.has!="function"||w.get(f)!=="one")}},{}],185:[function(o,U,H){U.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(o,U,H){var w=o("es5-ext/object/is-value"),f=o("es5-ext/object/set-prototype-of"),M=o("es5-ext/object/valid-object"),T=o("es5-ext/object/valid-value"),e=o("es5-ext/string/random-uniq"),a=o("d"),n=o("es6-iterator/get"),r=o("es6-iterator/for-of"),t=o("es6-symbol").toStringTag,h=o("./is-native-implemented"),i=Array.isArray,s=Object.defineProperty,y=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,p;U.exports=p=function(){var c=arguments[0],m;if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return m=h&&f&&WeakMap!==p?f(new WeakMap,d(this)):this,w(c)&&(i(c)||(c=n(c))),s(m,"__weakMapData__",a("c","$weakMap$"+e())),c&&r(c,function(l){T(l),m.set(l[0],l[1])}),m},h&&(f&&f(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:a(p)})),Object.defineProperties(p.prototype,{delete:a(function(c){return y.call(M(c),this.__weakMapData__)?(delete c[this.__weakMapData__],!0):!1}),get:a(function(c){if(!!y.call(M(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:a(function(c){return y.call(M(c),this.__weakMapData__)}),set:a(function(c,m){return s(M(c),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),s(p.prototype,t,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(o,U,H){var w=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};U.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return w()}try{return __global__||w()}finally{delete Object.prototype.__global__}}()},{}],188:[function(o,U,H){U.exports=o("./is-implemented")()?globalThis:o("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(o,U,H){U.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(o,U,H){var w=o("is-string-blank");U.exports=function(f){var M=typeof f;if(M==="string"){var T=f;if(f=+f,f===0&&w(T))return!1}else if(M!=="number")return!1;return f-f<1}},{"is-string-blank":237}],191:[function(o,U,H){var w=o("dtype");U.exports=f;function f(M,T,e){if(!M)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var a=M[0].length,n=M.length*a,r,t,h,i;(!T||typeof T=="string")&&(T=new(w(T||"float32"))(n+e));var s=T.length-e;if(n!==s)throw new Error("source length "+n+" ("+a+"x"+M.length+") does not match destination length "+s);for(r=0,h=e;r<M.length;r++)for(t=0;t<a;t++)T[h++]=M[r][t]===null?NaN:M[r][t]}else if(!T||typeof T=="string"){var y=w(T||"float32");if(Array.isArray(M)||T==="array")for(T=new y(M.length+e),r=0,h=e,i=T.length;h<i;h++,r++)T[h]=M[r]===null?NaN:M[r];else e===0?T=new y(M):(T=new y(M.length+e),T.set(M,e))}else T.set(M,e);return T}},{dtype:127}],192:[function(o,U,H){var w=o("css-font/stringify"),f=[32,126];U.exports=M;function M(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),n=T.font,r=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],t=T.chars||f;if(n&&typeof n!="string"&&(n=w(n)),!Array.isArray(t))t=String(t).split("");else if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var h=[],i=t[0],s=0;i<=t[1];i++)h[s++]=String.fromCharCode(i);t=h}e=e.slice(),a.width=e[0],a.height=e[1];var y=a.getContext("2d");y.fillStyle="#000",y.fillRect(0,0,a.width,a.height),y.font=n,y.textAlign="center",y.textBaseline="middle",y.fillStyle="#fff";for(var d=r[0]/2,p=r[1]/2,i=0;i<t.length;i++)y.fillText(t[i],d,p),(d+=r[0])>e[0]-r[0]/2&&(d=r[0]/2,p+=r[1]);return a}},{"css-font/stringify":102}],193:[function(o,U,H){U.exports=w,w.canvas=document.createElement("canvas"),w.cache={};function w(i,a){a||(a={}),(typeof i=="string"||Array.isArray(i))&&(a.family=i);var n=Array.isArray(a.family)?a.family.join(", "):a.family;if(!n)throw Error("`family` must be defined");var r=a.size||a.fontSize||a.em||48,t=a.weight||a.fontWeight||"",h=a.style||a.fontStyle||"",i=[h,t,r].join(" ")+"px "+n,s=a.origin||"top";if(w.cache[n]&&r<=w.cache[n].em)return f(w.cache[n],s);var y=a.canvas||w.canvas,d=y.getContext("2d"),p={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},c=Math.ceil(r*1.5);y.height=c,y.width=c*.5,d.font=i;var m="H",l={top:0};d.clearRect(0,0,c,c),d.textBaseline="top",d.fillStyle="black",d.fillText(m,0,0);var x=M(d.getImageData(0,0,c,c));d.clearRect(0,0,c,c),d.textBaseline="bottom",d.fillText(m,0,c);var u=M(d.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-u+x,d.clearRect(0,0,c,c),d.textBaseline="alphabetic",d.fillText(m,0,c);var A=M(d.getImageData(0,0,c,c)),_=c-A-1+x;l.baseline=l.alphabetic=_,d.clearRect(0,0,c,c),d.textBaseline="middle",d.fillText(m,0,c*.5);var g=M(d.getImageData(0,0,c,c));l.median=l.middle=c-g-1+x-c*.5,d.clearRect(0,0,c,c),d.textBaseline="hanging",d.fillText(m,0,c*.5);var b=M(d.getImageData(0,0,c,c));l.hanging=c-b-1+x-c*.5,d.clearRect(0,0,c,c),d.textBaseline="ideographic",d.fillText(m,0,c);var v=M(d.getImageData(0,0,c,c));if(l.ideographic=c-v-1+x,p.upper&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.upper,0,0),l.upper=M(d.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),p.lower&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.lower,0,0),l.lower=M(d.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),p.tittle&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.tittle,0,0),l.tittle=M(d.getImageData(0,0,c,c))),p.ascent&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.ascent,0,0),l.ascent=M(d.getImageData(0,0,c,c))),p.descent&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.descent,0,0),l.descent=T(d.getImageData(0,0,c,c))),p.overshoot){d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.overshoot,0,0);var C=T(d.getImageData(0,0,c,c));l.overshoot=C-_}for(var S in l)l[S]/=r;return l.em=r,w.cache[n]=l,f(l,s)}function f(e,a){var n={};typeof a=="string"&&(a=e[a]);for(var r in e)r!=="em"&&(n[r]=e[r]-a);return n}function M(e){for(var a=e.height,n=e.data,r=3;r<n.length;r+=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}function T(e){for(var a=e.height,n=e.data,r=n.length-1;r>0;r-=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}},{}],194:[function(o,U,H){U.exports=w;function w(f,M){if(typeof f!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var T=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(T.width=M.width),typeof M.height=="number"&&(T.height=M.height);var e=M,a;try{var n=[f];f.indexOf("webgl")===0&&n.push("experimental-"+f);for(var r=0;r<n.length;r++)if(a=T.getContext(n[r],e),a)return a}catch{a=null}return a||null}},{}],195:[function(o,U,H){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],h=M[6],i=M[7],s=M[8],y=M[9],d=M[10],p=M[11],c=M[12],m=M[13],l=M[14],x=M[15];return f[0]=t*(d*x-p*l)-y*(h*x-i*l)+m*(h*p-i*d),f[1]=-(e*(d*x-p*l)-y*(a*x-n*l)+m*(a*p-n*d)),f[2]=e*(h*x-i*l)-t*(a*x-n*l)+m*(a*i-n*h),f[3]=-(e*(h*p-i*d)-t*(a*p-n*d)+y*(a*i-n*h)),f[4]=-(r*(d*x-p*l)-s*(h*x-i*l)+c*(h*p-i*d)),f[5]=T*(d*x-p*l)-s*(a*x-n*l)+c*(a*p-n*d),f[6]=-(T*(h*x-i*l)-r*(a*x-n*l)+c*(a*i-n*h)),f[7]=T*(h*p-i*d)-r*(a*p-n*d)+s*(a*i-n*h),f[8]=r*(y*x-p*m)-s*(t*x-i*m)+c*(t*p-i*y),f[9]=-(T*(y*x-p*m)-s*(e*x-n*m)+c*(e*p-n*y)),f[10]=T*(t*x-i*m)-r*(e*x-n*m)+c*(e*i-n*t),f[11]=-(T*(t*p-i*y)-r*(e*p-n*y)+s*(e*i-n*t)),f[12]=-(r*(y*l-d*m)-s*(t*l-h*m)+c*(t*d-h*y)),f[13]=T*(y*l-d*m)-s*(e*l-a*m)+c*(e*d-a*y),f[14]=-(T*(t*l-h*m)-r*(e*l-a*m)+c*(e*h-a*t)),f[15]=T*(t*d-h*y)-r*(e*d-a*y)+s*(e*h-a*t),f}},{}],196:[function(o,U,H){U.exports=w;function w(f){var M=new Float32Array(16);return M[0]=f[0],M[1]=f[1],M[2]=f[2],M[3]=f[3],M[4]=f[4],M[5]=f[5],M[6]=f[6],M[7]=f[7],M[8]=f[8],M[9]=f[9],M[10]=f[10],M[11]=f[11],M[12]=f[12],M[13]=f[13],M[14]=f[14],M[15]=f[15],M}},{}],197:[function(o,U,H){U.exports=w;function w(f,M){return f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],198:[function(o,U,H){U.exports=w;function w(){var f=new Float32Array(16);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],199:[function(o,U,H){U.exports=w;function w(f){var M=f[0],T=f[1],e=f[2],a=f[3],n=f[4],r=f[5],t=f[6],h=f[7],i=f[8],s=f[9],y=f[10],d=f[11],p=f[12],c=f[13],m=f[14],l=f[15],x=M*r-T*n,u=M*t-e*n,A=M*h-a*n,_=T*t-e*r,g=T*h-a*r,b=e*h-a*t,v=i*c-s*p,C=i*m-y*p,S=i*l-d*p,k=s*m-y*c,E=s*l-d*c,F=y*l-d*m;return x*F-u*E+A*k+_*S-g*C+b*v}},{}],200:[function(o,U,H){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=T+T,t=e+e,h=a+a,i=T*r,s=e*r,y=e*t,d=a*r,p=a*t,c=a*h,m=n*r,l=n*t,x=n*h;return f[0]=1-y-c,f[1]=s+x,f[2]=d-l,f[3]=0,f[4]=s-x,f[5]=1-i-c,f[6]=p+m,f[7]=0,f[8]=d+l,f[9]=p-m,f[10]=1-i-y,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],201:[function(o,U,H){U.exports=w;function w(f,M,T){var e,a,n,r=T[0],t=T[1],h=T[2],i=Math.sqrt(r*r+t*t+h*h);return Math.abs(i)<1e-6?null:(i=1/i,r*=i,t*=i,h*=i,e=Math.sin(M),a=Math.cos(M),n=1-a,f[0]=r*r*n+a,f[1]=t*r*n+h*e,f[2]=h*r*n-t*e,f[3]=0,f[4]=r*t*n-h*e,f[5]=t*t*n+a,f[6]=h*t*n+r*e,f[7]=0,f[8]=r*h*n+t*e,f[9]=t*h*n-r*e,f[10]=h*h*n+a,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f)}},{}],202:[function(o,U,H){U.exports=w;function w(f,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=e+e,h=a+a,i=n+n,s=e*t,y=e*h,d=e*i,p=a*h,c=a*i,m=n*i,l=r*t,x=r*h,u=r*i;return f[0]=1-(p+m),f[1]=y+u,f[2]=d-x,f[3]=0,f[4]=y-u,f[5]=1-(s+m),f[6]=c+l,f[7]=0,f[8]=d+x,f[9]=c-l,f[10]=1-(s+p),f[11]=0,f[12]=T[0],f[13]=T[1],f[14]=T[2],f[15]=1,f}},{}],203:[function(o,U,H){U.exports=w;function w(f,M){return f[0]=M[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=M[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=M[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],204:[function(o,U,H){U.exports=w;function w(f,M){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=M[0],f[13]=M[1],f[14]=M[2],f[15]=1,f}},{}],205:[function(o,U,H){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=e,f[6]=T,f[7]=0,f[8]=0,f[9]=-T,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],206:[function(o,U,H){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=0,f[2]=-T,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=T,f[9]=0,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],207:[function(o,U,H){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=T,f[2]=0,f[3]=0,f[4]=-T,f[5]=e,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],208:[function(o,U,H){U.exports=w;function w(f,M,T,e,a,n,r){var t=1/(T-M),h=1/(a-e),i=1/(n-r);return f[0]=n*2*t,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=n*2*h,f[6]=0,f[7]=0,f[8]=(T+M)*t,f[9]=(a+e)*h,f[10]=(r+n)*i,f[11]=-1,f[12]=0,f[13]=0,f[14]=r*n*2*i,f[15]=0,f}},{}],209:[function(o,U,H){U.exports=w;function w(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],210:[function(o,U,H){U.exports={create:o("./create"),clone:o("./clone"),copy:o("./copy"),identity:o("./identity"),transpose:o("./transpose"),invert:o("./invert"),adjoint:o("./adjoint"),determinant:o("./determinant"),multiply:o("./multiply"),translate:o("./translate"),scale:o("./scale"),rotate:o("./rotate"),rotateX:o("./rotateX"),rotateY:o("./rotateY"),rotateZ:o("./rotateZ"),fromRotation:o("./fromRotation"),fromRotationTranslation:o("./fromRotationTranslation"),fromScaling:o("./fromScaling"),fromTranslation:o("./fromTranslation"),fromXRotation:o("./fromXRotation"),fromYRotation:o("./fromYRotation"),fromZRotation:o("./fromZRotation"),fromQuat:o("./fromQuat"),frustum:o("./frustum"),perspective:o("./perspective"),perspectiveFromFieldOfView:o("./perspectiveFromFieldOfView"),ortho:o("./ortho"),lookAt:o("./lookAt"),str:o("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(o,U,H){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],h=M[6],i=M[7],s=M[8],y=M[9],d=M[10],p=M[11],c=M[12],m=M[13],l=M[14],x=M[15],u=T*t-e*r,A=T*h-a*r,_=T*i-n*r,g=e*h-a*t,b=e*i-n*t,v=a*i-n*h,C=s*m-y*c,S=s*l-d*c,k=s*x-p*c,E=y*l-d*m,F=y*x-p*m,I=d*x-p*l,D=u*I-A*F+_*E+g*k-b*S+v*C;return D?(D=1/D,f[0]=(t*I-h*F+i*E)*D,f[1]=(a*F-e*I-n*E)*D,f[2]=(m*v-l*b+x*g)*D,f[3]=(d*b-y*v-p*g)*D,f[4]=(h*k-r*I-i*S)*D,f[5]=(T*I-a*k+n*S)*D,f[6]=(l*_-c*v-x*A)*D,f[7]=(s*v-d*_+p*A)*D,f[8]=(r*F-t*k+i*C)*D,f[9]=(e*k-T*F-n*C)*D,f[10]=(c*b-m*_+x*u)*D,f[11]=(y*_-s*b-p*u)*D,f[12]=(t*S-r*E-h*C)*D,f[13]=(T*E-e*S+a*C)*D,f[14]=(m*A-c*g-l*u)*D,f[15]=(s*g-y*A+d*u)*D,f):null}},{}],212:[function(o,U,H){var w=o("./identity");U.exports=f;function f(M,T,e,a){var n,r,t,h,i,s,y,d,p,c,m=T[0],l=T[1],x=T[2],u=a[0],A=a[1],_=a[2],g=e[0],b=e[1],v=e[2];return Math.abs(m-g)<1e-6&&Math.abs(l-b)<1e-6&&Math.abs(x-v)<1e-6?w(M):(y=m-g,d=l-b,p=x-v,c=1/Math.sqrt(y*y+d*d+p*p),y*=c,d*=c,p*=c,n=A*p-_*d,r=_*y-u*p,t=u*d-A*y,c=Math.sqrt(n*n+r*r+t*t),c?(c=1/c,n*=c,r*=c,t*=c):(n=0,r=0,t=0),h=d*t-p*r,i=p*n-y*t,s=y*r-d*n,c=Math.sqrt(h*h+i*i+s*s),c?(c=1/c,h*=c,i*=c,s*=c):(h=0,i=0,s=0),M[0]=n,M[1]=h,M[2]=y,M[3]=0,M[4]=r,M[5]=i,M[6]=d,M[7]=0,M[8]=t,M[9]=s,M[10]=p,M[11]=0,M[12]=-(n*m+r*l+t*x),M[13]=-(h*m+i*l+s*x),M[14]=-(y*m+d*l+p*x),M[15]=1,M)}},{"./identity":209}],213:[function(o,U,H){U.exports=w;function w(f,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=M[4],h=M[5],i=M[6],s=M[7],y=M[8],d=M[9],p=M[10],c=M[11],m=M[12],l=M[13],x=M[14],u=M[15],A=T[0],_=T[1],g=T[2],b=T[3];return f[0]=A*e+_*t+g*y+b*m,f[1]=A*a+_*h+g*d+b*l,f[2]=A*n+_*i+g*p+b*x,f[3]=A*r+_*s+g*c+b*u,A=T[4],_=T[5],g=T[6],b=T[7],f[4]=A*e+_*t+g*y+b*m,f[5]=A*a+_*h+g*d+b*l,f[6]=A*n+_*i+g*p+b*x,f[7]=A*r+_*s+g*c+b*u,A=T[8],_=T[9],g=T[10],b=T[11],f[8]=A*e+_*t+g*y+b*m,f[9]=A*a+_*h+g*d+b*l,f[10]=A*n+_*i+g*p+b*x,f[11]=A*r+_*s+g*c+b*u,A=T[12],_=T[13],g=T[14],b=T[15],f[12]=A*e+_*t+g*y+b*m,f[13]=A*a+_*h+g*d+b*l,f[14]=A*n+_*i+g*p+b*x,f[15]=A*r+_*s+g*c+b*u,f}},{}],214:[function(o,U,H){U.exports=w;function w(f,M,T,e,a,n,r){var t=1/(M-T),h=1/(e-a),i=1/(n-r);return f[0]=-2*t,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*h,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*i,f[11]=0,f[12]=(M+T)*t,f[13]=(a+e)*h,f[14]=(r+n)*i,f[15]=1,f}},{}],215:[function(o,U,H){U.exports=w;function w(f,M,T,e,a){var n=1/Math.tan(M/2),r=1/(e-a);return f[0]=n/T,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=n,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=(a+e)*r,f[11]=-1,f[12]=0,f[13]=0,f[14]=2*a*e*r,f[15]=0,f}},{}],216:[function(o,U,H){U.exports=w;function w(f,M,T,e){var a=Math.tan(M.upDegrees*Math.PI/180),n=Math.tan(M.downDegrees*Math.PI/180),r=Math.tan(M.leftDegrees*Math.PI/180),t=Math.tan(M.rightDegrees*Math.PI/180),h=2/(r+t),i=2/(a+n);return f[0]=h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=i,f[6]=0,f[7]=0,f[8]=-((r-t)*h*.5),f[9]=(a-n)*i*.5,f[10]=e/(T-e),f[11]=-1,f[12]=0,f[13]=0,f[14]=e*T/(T-e),f[15]=0,f}},{}],217:[function(o,U,H){U.exports=w;function w(f,M,T,e){var a=e[0],n=e[1],r=e[2],t=Math.sqrt(a*a+n*n+r*r),h,i,s,y,d,p,c,m,l,x,u,A,_,g,b,v,C,S,k,E,F,I,D,R;return Math.abs(t)<1e-6?null:(t=1/t,a*=t,n*=t,r*=t,h=Math.sin(T),i=Math.cos(T),s=1-i,y=M[0],d=M[1],p=M[2],c=M[3],m=M[4],l=M[5],x=M[6],u=M[7],A=M[8],_=M[9],g=M[10],b=M[11],v=a*a*s+i,C=n*a*s+r*h,S=r*a*s-n*h,k=a*n*s-r*h,E=n*n*s+i,F=r*n*s+a*h,I=a*r*s+n*h,D=n*r*s-a*h,R=r*r*s+i,f[0]=y*v+m*C+A*S,f[1]=d*v+l*C+_*S,f[2]=p*v+x*C+g*S,f[3]=c*v+u*C+b*S,f[4]=y*k+m*E+A*F,f[5]=d*k+l*E+_*F,f[6]=p*k+x*E+g*F,f[7]=c*k+u*E+b*F,f[8]=y*I+m*D+A*R,f[9]=d*I+l*D+_*R,f[10]=p*I+x*D+g*R,f[11]=c*I+u*D+b*R,M!==f&&(f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f)}},{}],218:[function(o,U,H){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[4],r=M[5],t=M[6],h=M[7],i=M[8],s=M[9],y=M[10],d=M[11];return M!==f&&(f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[4]=n*a+i*e,f[5]=r*a+s*e,f[6]=t*a+y*e,f[7]=h*a+d*e,f[8]=i*a-n*e,f[9]=s*a-r*e,f[10]=y*a-t*e,f[11]=d*a-h*e,f}},{}],219:[function(o,U,H){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],h=M[3],i=M[8],s=M[9],y=M[10],d=M[11];return M!==f&&(f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=n*a-i*e,f[1]=r*a-s*e,f[2]=t*a-y*e,f[3]=h*a-d*e,f[8]=n*e+i*a,f[9]=r*e+s*a,f[10]=t*e+y*a,f[11]=h*e+d*a,f}},{}],220:[function(o,U,H){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],h=M[3],i=M[4],s=M[5],y=M[6],d=M[7];return M!==f&&(f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=n*a+i*e,f[1]=r*a+s*e,f[2]=t*a+y*e,f[3]=h*a+d*e,f[4]=i*a-n*e,f[5]=s*a-r*e,f[6]=y*a-t*e,f[7]=d*a-h*e,f}},{}],221:[function(o,U,H){U.exports=w;function w(f,M,T){var e=T[0],a=T[1],n=T[2];return f[0]=M[0]*e,f[1]=M[1]*e,f[2]=M[2]*e,f[3]=M[3]*e,f[4]=M[4]*a,f[5]=M[5]*a,f[6]=M[6]*a,f[7]=M[7]*a,f[8]=M[8]*n,f[9]=M[9]*n,f[10]=M[10]*n,f[11]=M[11]*n,f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],222:[function(o,U,H){U.exports=w;function w(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}},{}],223:[function(o,U,H){U.exports=w;function w(f,M,T){var e=T[0],a=T[1],n=T[2],r,t,h,i,s,y,d,p,c,m,l,x;return M===f?(f[12]=M[0]*e+M[4]*a+M[8]*n+M[12],f[13]=M[1]*e+M[5]*a+M[9]*n+M[13],f[14]=M[2]*e+M[6]*a+M[10]*n+M[14],f[15]=M[3]*e+M[7]*a+M[11]*n+M[15]):(r=M[0],t=M[1],h=M[2],i=M[3],s=M[4],y=M[5],d=M[6],p=M[7],c=M[8],m=M[9],l=M[10],x=M[11],f[0]=r,f[1]=t,f[2]=h,f[3]=i,f[4]=s,f[5]=y,f[6]=d,f[7]=p,f[8]=c,f[9]=m,f[10]=l,f[11]=x,f[12]=r*e+s*a+c*n+M[12],f[13]=t*e+y*a+m*n+M[13],f[14]=h*e+d*a+l*n+M[14],f[15]=i*e+p*a+x*n+M[15]),f}},{}],224:[function(o,U,H){U.exports=w;function w(f,M){if(f===M){var T=M[1],e=M[2],a=M[3],n=M[6],r=M[7],t=M[11];f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=T,f[6]=M[9],f[7]=M[13],f[8]=e,f[9]=n,f[11]=M[14],f[12]=a,f[13]=r,f[14]=t}else f[0]=M[0],f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=M[1],f[5]=M[5],f[6]=M[9],f[7]=M[13],f[8]=M[2],f[9]=M[6],f[10]=M[10],f[11]=M[14],f[12]=M[3],f[13]=M[7],f[14]=M[11],f[15]=M[15];return f}},{}],225:[function(o,U,H){var w=o("css-font"),f=o("pick-by-alias"),M=o("regl"),T=o("gl-util/context"),e=o("es6-weak-map"),a=o("color-normalize"),n=o("font-atlas"),r=o("typedarray-pool"),t=o("parse-rect"),h=o("is-plain-obj"),i=o("parse-unit"),s=o("to-px"),y=o("detect-kerning"),d=o("object-assign"),p=o("font-measure"),c=o("flatten-vertex-data"),m=o("bit-twiddle"),l=m.nextPow2,x=new e,u=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(u=!0),document.body.removeChild(A)}var _=function(v){g(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=T(v),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(v)?v:{})};_.prototype.createShader=function(){var v=this.regl,C=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(k,E){return[E.atlas.width,E.atlas.height]},atlasDim:function(k,E){return[E.atlas.cols,E.atlas.rows]},atlas:function(k,E){return E.atlas.texture},charStep:function(k,E){return E.atlas.step},em:function(k,E){return E.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:v,draw:C,atlas:S}},_.prototype.update=function(v){var C=this;if(typeof v=="string")v={text:v};else if(!v)return;v=f(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),v.opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=t(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=c(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!v.font&&(v.font=_.baseFontSize+"px sans-serif");var S=!1,k=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(_e,Ee){if(typeof _e=="string")try{_e=w.parse(_e)}catch{_e=w.parse(_.baseFontSize+"px "+_e)}else _e=w.parse(w.stringify(_e));var Ze=w.stringify({size:_.baseFontSize,family:_e.family,stretch:u?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),Ge=i(_e.size),Fe=Math.round(Ge[0]*s(Ge[1]));if(Fe!==C.fontSize[Ee]&&(k=!0,C.fontSize[Ee]=Fe),(!C.font[Ee]||Ze!=C.font[Ee].baseString)&&(S=!0,C.font[Ee]=_.fonts[Ze],!C.font[Ee])){var Re=_e.family.join(", "),We=[_e.style];_e.style!=_e.variant&&We.push(_e.variant),_e.variant!=_e.weight&&We.push(_e.weight),u&&_e.weight!=_e.stretch&&We.push(_e.stretch),C.font[Ee]={baseString:Ze,family:Re,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:p(Re,{origin:"top",fontSize:_.baseFontSize,fontStyle:We.join(" ")})},_.fonts[Ze]=C.font[Ee]}}),(S||k)&&this.font.forEach(function(_e,Ee){var Ze=w.stringify({size:C.fontSize[Ee],family:_e.family,stretch:u?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(C.fontAtlas[Ee]=C.shader.atlas[Ze],!C.fontAtlas[Ee]){var Ge=_e.metrics;C.shader.atlas[Ze]=C.fontAtlas[Ee]={fontString:Ze,step:Math.ceil(C.fontSize[Ee]*Ge.bottom*.5)*2,em:C.fontSize[Ee],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:C.regl.texture()}}v.text==null&&(v.text=C.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var E=Array(v.position.length*.5),F=0;F<E.length;F++)E[F]=v.text;v.text=E}var I;if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var D=1;D<v.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+v.text[D-1].length,this.count+=v.text[D].length,this.counts.push(v.text[D].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(_e,Ee){_.atlasContext.font=_e.baseString;for(var Ze=C.fontAtlas[Ee],Ge=0;Ge<C.text.length;Ge++){var Fe=C.text.charAt(Ge);if(Ze.ids[Fe]==null&&(Ze.ids[Fe]=Ze.chars.length,Ze.chars.push(Fe),I.push(Fe)),_e.width[Fe]==null&&(_e.width[Fe]=_.atlasContext.measureText(Fe).width/_.baseFontSize,C.kerning)){var Re=[];for(var We in _e.width)Re.push(We+Fe,Fe+We);d(_e.kerning,y(_e.family,{pairs:Re}))}}})}if(v.position)if(v.position.length>2){for(var R=!v.position[0].length,O=r.mallocFloat(this.count*2),z=0,B=0;z<this.counts.length;z++){var G=this.counts[z];if(R)for(var Q=0;Q<G;Q++)O[B++]=v.position[z*2],O[B++]=v.position[z*2+1];else for(var X=0;X<G;X++)O[B++]=v.position[z][0],O[B++]=v.position[z][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),r.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var j=r.mallocUint8(this.count),re=r.mallocFloat(this.count*2);this.textWidth=[];for(var ue=0,K=0;ue<this.counts.length;ue++){for(var te=this.counts[ue],Y=this.font[ue]||this.font[0],V=this.fontAtlas[ue]||this.fontAtlas[0],ee=0;ee<te;ee++){var ne=this.text.charAt(K),Z=this.text.charAt(K-1);if(j[K]=V.ids[ne],re[K*2]=Y.width[ne],ee){var q=re[K*2-2],ie=re[K*2],se=re[K*2-1],ae=se+q*.5+ie*.5;if(this.kerning){var oe=Y.kerning[Z+ne];oe&&(ae+=oe*.001)}re[K*2+1]=ae}else re[K*2+1]=re[K*2]*.5;K++}this.textWidth.push(re.length?re[K*2-2]*.5+re[K*2-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:j,type:"uint8",usage:"stream"}),this.sizeBuffer({data:re,type:"float",usage:"stream"}),r.freeUint8(j),r.freeFloat(re),I.length&&this.font.forEach(function(_e,Ee){var Ze=C.fontAtlas[Ee],Ge=Ze.step,Fe=Math.floor(_.maxAtlasSize/Ge),Re=Math.min(Fe,Ze.chars.length),We=Math.ceil(Ze.chars.length/Re),xt=l(Re*Ge),Nt=l(We*Ge);Ze.width=xt,Ze.height=Nt,Ze.rows=We,Ze.cols=Re,Ze.em&&Ze.texture({data:n({canvas:_.atlasCanvas,font:Ze.fontString,chars:Ze.chars,shape:[xt,Nt],step:[Ge,Ge]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(_e,Ee){var Ze=Array.isArray(C.align)?C.align.length>1?C.align[Ee]:C.align[0]:C.align;if(typeof Ze=="number")return Ze;switch(Ze){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,Ee){var Ze=(C.font[Ee]||C.font[0]).metrics,Ge=0;return Ge+=Ze.bottom*.5,typeof _e=="number"?Ge+=_e-Ze.baseline:Ge+=-Ze[_e],Ge*=-1,Ge})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color=="string"||!isNaN(v.color))this.color=a(v.color,"uint8");else{var be;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var ce=v.color.length;be=r.mallocUint8(ce);for(var de=(v.color.subarray||v.color.slice).bind(v.color),ye=0;ye<ce;ye+=4)be.set(a(de(ye,ye+4),"uint8"),ye)}else{var ge=v.color.length;be=r.mallocUint8(ge*4);for(var me=0;me<ge;me++)be.set(a(v.color[me]||0,"uint8"),me*4)}this.color=be}if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity){var Me=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Me){var Le=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Le);for(var Oe=0;Oe<this.batch.length;Oe++)this.batch[Oe]={count:this.counts.length>1?this.counts[Oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Oe*4,Oe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Oe]:this.opacity,baseline:this.baselineOffset[Oe]!=null?this.baselineOffset[Oe]:this.baselineOffset[0],align:this.align?this.alignOffset[Oe]!=null?this.alignOffset[Oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Oe*2,Oe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function g(b){return typeof b=="function"&&b._gl&&b.prop&&b.texture&&b.buffer}U.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(o,U,H){(function(w){(function(){var f=o("pick-by-alias");U.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},T(t)?t={container:t}:e(t)?t={container:t}:a(t)?t={gl:t}:t=f(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=w.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var h=document.querySelector(t.container);if(!h)throw Error("Element "+t.container+" is not found");t.container=h}T(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=n(),t.container.appendChild(t.canvas),M(t))}else if(!t.canvas)if(typeof document<"u")t.container=document.body||document.documentElement,t.canvas=n(),t.container.appendChild(t.canvas),M(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{t.gl=t.canvas.getContext(i,t.attrs)}catch{}return t.gl}),t.gl};function M(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*w.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*w.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function T(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function e(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function a(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function n(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(o,U,H){U.exports=function(w){typeof w=="string"&&(w=[w]);for(var f=[].slice.call(arguments,1),M=[],T=0;T<w.length-1;T++)M.push(w[T],f[T]||"");return M.push(w[T]),M.join("")}},{}],228:[function(o,U,H){(function(w){(function(){var f=o("is-browser"),M;typeof w.matchMedia=="function"?M=!w.matchMedia("(hover: none)").matches:M=f,U.exports=M}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(o,U,H){var w=o("is-browser");function f(){var M=!1;try{var T=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{M=!1}return M}U.exports=w&&f()},{"is-browser":232}],230:[function(o,U,H){H.read=function(w,f,M,T,e){var a,n,r=e*8-T-1,t=(1<<r)-1,h=t>>1,i=-7,s=M?e-1:0,y=M?-1:1,d=w[f+s];for(s+=y,a=d&(1<<-i)-1,d>>=-i,i+=r;i>0;a=a*256+w[f+s],s+=y,i-=8);for(n=a&(1<<-i)-1,a>>=-i,i+=T;i>0;n=n*256+w[f+s],s+=y,i-=8);if(a===0)a=1-h;else{if(a===t)return n?NaN:(d?-1:1)*(1/0);n=n+Math.pow(2,T),a=a-h}return(d?-1:1)*n*Math.pow(2,a-T)},H.write=function(w,f,M,T,e,a){var n,r,t,h=a*8-e-1,i=(1<<h)-1,s=i>>1,y=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=T?0:a-1,p=T?1:-1,c=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(r=isNaN(f)?1:0,n=i):(n=Math.floor(Math.log(f)/Math.LN2),f*(t=Math.pow(2,-n))<1&&(n--,t*=2),n+s>=1?f+=y/t:f+=y*Math.pow(2,1-s),f*t>=2&&(n++,t/=2),n+s>=i?(r=0,n=i):n+s>=1?(r=(f*t-1)*Math.pow(2,e),n=n+s):(r=f*Math.pow(2,s-1)*Math.pow(2,e),n=0));e>=8;w[M+d]=r&255,d+=p,r/=256,e-=8);for(n=n<<e|r,h+=e;h>0;w[M+d]=n&255,d+=p,n/=256,h-=8);w[M+d-p]|=c*128}},{}],231:[function(o,U,H){typeof Object.create=="function"?U.exports=function(f,M){M&&(f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:U.exports=function(f,M){if(M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}}},{}],232:[function(o,U,H){U.exports=!0},{}],233:[function(o,U,H){U.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(o,U,H){U.exports=M,U.exports.isMobile=M,U.exports.default=M;var w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,f=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?f.test(e):w.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(o,U,H){U.exports=function(w){var f=typeof w;return w!==null&&(f==="object"||f==="function")}},{}],236:[function(o,U,H){var w=Object.prototype.toString;U.exports=function(f){var M;return w.call(f)==="[object Object]"&&(M=Object.getPrototypeOf(f),M===null||M===Object.getPrototypeOf({}))}},{}],237:[function(o,U,H){U.exports=function(w){for(var f=w.length,M,T=0;T<f;T++)if(M=w.charCodeAt(T),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},{}],238:[function(o,U,H){U.exports=function(f){return typeof f!="string"?!1:(f=f.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(f)&&/[\dz]$/i.test(f)&&f.length>4))}},{}],239:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?U.exports=f():(w=w||self,w.mapboxgl=f())})(this,function(){var w,f,M;function T(e,a){if(!w)w=a;else if(!f)f=a;else{var n="var sharedChunk = {}; ("+w+")(sharedChunk); ("+f+")(sharedChunk);",r={};w(r),M=a(r),M.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(L,P){return P={exports:{}},L(P,P.exports),P.exports}var n="1.10.1",r=t;function t(L,P,N,$){this.cx=3*L,this.bx=3*(N-L)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*($-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=L,this.p1y=$,this.p2x=N,this.p2y=$}t.prototype.sampleCurveX=function(L){return((this.ax*L+this.bx)*L+this.cx)*L},t.prototype.sampleCurveY=function(L){return((this.ay*L+this.by)*L+this.cy)*L},t.prototype.sampleCurveDerivativeX=function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},t.prototype.solveCurveX=function(L,P){typeof P>"u"&&(P=1e-6);var N,$,he,xe,Te;for(he=L,Te=0;Te<8;Te++){if(xe=this.sampleCurveX(he)-L,Math.abs(xe)<P)return he;var Ne=this.sampleCurveDerivativeX(he);if(Math.abs(Ne)<1e-6)break;he=he-xe/Ne}if(N=0,$=1,he=L,he<N)return N;if(he>$)return $;for(;N<$;){if(xe=this.sampleCurveX(he),Math.abs(xe-L)<P)return he;L>xe?N=he:$=he,he=($-N)*.5+N}return he},t.prototype.solve=function(L,P){return this.sampleCurveY(this.solveCurveX(L,P))};var h=i;function i(L,P){this.x=L,this.y=P}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,P){return this.clone()._rotateAround(L,P)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var P=L.x-this.x,N=L.y-this.y;return P*P+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,P){return Math.atan2(this.x*P-this.y*L,this.x*L+this.y*P)},_matMult:function(L){var P=L[0]*this.x+L[1]*this.y,N=L[2]*this.x+L[3]*this.y;return this.x=P,this.y=N,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var P=Math.cos(L),N=Math.sin(L),$=P*this.x-N*this.y,he=N*this.x+P*this.y;return this.x=$,this.y=he,this},_rotateAround:function(L,P){var N=Math.cos(L),$=Math.sin(L),he=P.x+N*(this.x-P.x)-$*(this.y-P.y),xe=P.y+$*(this.x-P.x)+N*(this.y-P.y);return this.x=he,this.y=xe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(L){return L instanceof i?L:Array.isArray(L)?new i(L[0],L[1]):L};function s(L,P){if(Array.isArray(L)){if(!Array.isArray(P)||L.length!==P.length)return!1;for(var N=0;N<L.length;N++)if(!s(L[N],P[N]))return!1;return!0}if(typeof L=="object"&&L!==null&&P!==null){if(typeof P!="object")return!1;var $=Object.keys(L);if($.length!==Object.keys(P).length)return!1;for(var he in L)if(!s(L[he],P[he]))return!1;return!0}return L===P}function y(L){if(L<=0)return 0;if(L>=1)return 1;var P=L*L,N=P*L;return 4*(L<.5?N:3*(L-P)+N-.75)}function d(L,P,N,$){var he=new r(L,P,N,$);return function(xe){return he.solve(xe)}}var p=d(.25,.1,.25,1);function c(L,P,N){return Math.min(N,Math.max(P,L))}function m(L,P,N){var $=N-P,he=((L-P)%$+$)%$+P;return he===P?N:he}function l(L,P,N){if(!L.length)return N(null,[]);var $=L.length,he=new Array(L.length),xe=null;L.forEach(function(Te,Ne){P(Te,function(rt,gt){rt&&(xe=rt),he[Ne]=gt,--$===0&&N(xe,he)})})}function x(L){var P=[];for(var N in L)P.push(L[N]);return P}function u(L,P){var N=[];for(var $ in L)$ in P||N.push($);return N}function A(L){for(var P=[],N=arguments.length-1;N-- >0;)P[N]=arguments[N+1];for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];for(var Te in xe)L[Te]=xe[Te]}return L}function _(L,P){for(var N={},$=0;$<P.length;$++){var he=P[$];he in L&&(N[he]=L[he])}return N}var g=1;function b(){return g++}function v(){function L(P){return P?(P^Math.random()*16>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,L)}return L()}function C(L){return L?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L):!1}function S(L,P){L.forEach(function(N){!P[N]||(P[N]=P[N].bind(P))})}function k(L,P){return L.indexOf(P,L.length-P.length)!==-1}function E(L,P,N){var $={};for(var he in L)$[he]=P.call(N||this,L[he],he,L);return $}function F(L,P,N){var $={};for(var he in L)P.call(N||this,L[he],he,L)&&($[he]=L[he]);return $}function I(L){return Array.isArray(L)?L.map(I):typeof L=="object"&&L?E(L,I):L}function D(L,P){for(var N=0;N<L.length;N++)if(P.indexOf(L[N])>=0)return!0;return!1}var R={};function O(L){R[L]||(typeof console<"u"&&console.warn(L),R[L]=!0)}function z(L,P,N){return(N.y-L.y)*(P.x-L.x)>(P.y-L.y)*(N.x-L.x)}function B(L){for(var P=0,N=0,$=L.length,he=$-1,xe=void 0,Te=void 0;N<$;he=N++)xe=L[N],Te=L[he],P+=(Te.x-xe.x)*(xe.y+Te.y);return P}function G(L){var P=L[0],N=L[1],$=L[2];return N+=90,N*=Math.PI/180,$*=Math.PI/180,{x:P*Math.cos(N)*Math.sin($),y:P*Math.sin(N)*Math.sin($),z:P*Math.cos($)}}function Q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function X(L){var P=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(L.replace(P,function(he,xe,Te,Ne){var rt=Te||Ne;return N[xe]=rt?rt.toLowerCase():!0,""}),N["max-age"]){var $=parseInt(N["max-age"],10);isNaN($)?delete N["max-age"]:N["max-age"]=$}return N}var j=null;function re(L){if(j==null){var P=L.navigator?L.navigator.userAgent:null;j=!!L.safari||!!(P&&(/\b(iPad|iPhone|iPod)\b/.test(P)||!!P.match("Safari")&&!P.match("Chrome")))}return j}function ue(L){try{var P=self[L];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch{return!1}}function K(L){return self.btoa(encodeURIComponent(L).replace(/%([0-9A-F]{2})/g,function(P,N){return String.fromCharCode(Number("0x"+N))}))}function te(L){return decodeURIComponent(self.atob(L).split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var Y=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),V=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ee=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ne,Z,q={now:Y,frame:function(P){var N=V(P);return{cancel:function(){return ee(N)}}},getImageData:function(P,N){N===void 0&&(N=0);var $=self.document.createElement("canvas"),he=$.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return $.width=P.width,$.height=P.height,he.drawImage(P,0,0,P.width,P.height),he.getImageData(-N,-N,P.width+2*N,P.height+2*N)},resolveURL:function(P){return ne||(ne=self.document.createElement("a")),ne.href=P,ne.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(Z==null&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},se={supported:!1,testSupport:de},ae,oe=!1,be,ce=!1;self.document&&(be=self.document.createElement("img"),be.onload=function(){ae&&ye(ae),ae=null,ce=!0},be.onerror=function(){oe=!0,ae=null},be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function de(L){oe||!be||(ce?ye(L):ae=L)}function ye(L){var P=L.createTexture();L.bindTexture(L.TEXTURE_2D,P);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,be),L.isContextLost())return;se.supported=!0}catch{}L.deleteTexture(P),oe=!0}var ge="01";function me(){for(var L="1",P="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",$=0;$<10;$++)N+=P[Math.floor(Math.random()*62)];var he=12*60*60*1e3,xe=[L,ge,N].join(""),Te=Date.now()+he;return{token:xe,tokenExpiresAt:Te}}var Me=function(P,N){this._transformRequestFn=P,this._customAccessToken=N,this._createSkuToken()};Me.prototype._createSkuToken=function(){var P=me();this._skuToken=P.token,this._skuTokenExpiresAt=P.tokenExpiresAt},Me.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Me.prototype.transformRequest=function(P,N){return this._transformRequestFn?this._transformRequestFn(P,N)||{url:P}:{url:P}},Me.prototype.normalizeStyleURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||N)},Me.prototype.normalizeGlyphsURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||N)},Me.prototype.normalizeSourceURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||N)},Me.prototype.normalizeSpriteURL=function(P,N,$,he){var xe=Fe(P);return Le(P)?(xe.path="/styles/v1"+xe.path+"/sprite"+N+$,this._makeAPIURL(xe,this._customAccessToken||he)):(xe.path+=""+N+$,Re(xe))},Me.prototype.normalizeTileURL=function(P,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),P&&!Le(P))return P;var $=Fe(P),he=/(\.(png|jpg)\d*)(?=$)/,xe=/^.+\/v4\//,Te=q.devicePixelRatio>=2||N===512?"@2x":"",Ne=se.supported?".webp":"$1";$.path=$.path.replace(he,""+Te+Ne),$.path=$.path.replace(xe,"/"),$.path="/v4"+$.path;var rt=this._customAccessToken||Ze($.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&rt&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,rt)},Me.prototype.canonicalizeTileURL=function(P,N){var $="/v4/",he=/\.[\w]+$/,xe=Fe(P);if(!xe.path.match(/(^\/v4\/)/)||!xe.path.match(he))return P;var Te="mapbox://tiles/";Te+=xe.path.replace($,"");var Ne=xe.params;return N&&(Ne=Ne.filter(function(rt){return!rt.match(/^access_token=/)})),Ne.length&&(Te+="?"+Ne.join("&")),Te},Me.prototype.canonicalizeTileset=function(P,N){for(var $=N?Le(N):!1,he=[],xe=0,Te=P.tiles||[];xe<Te.length;xe+=1){var Ne=Te[xe];_e(Ne)?he.push(this.canonicalizeTileURL(Ne,$)):he.push(Ne)}return he},Me.prototype._makeAPIURL=function(P,N){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Fe(ie.API_URL);if(P.protocol=he.protocol,P.authority=he.authority,he.path!=="/"&&(P.path=""+he.path+P.path),!ie.REQUIRE_ACCESS_TOKEN)return Re(P);if(N=N||ie.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+$);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return P.params=P.params.filter(function(xe){return xe.indexOf("access_token")===-1}),P.params.push("access_token="+N),Re(P)};function Le(L){return L.indexOf("mapbox:")===0}var Oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(L){return Oe.test(L)}function Ee(L){return L.indexOf("sku=")>0&&_e(L)}function Ze(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P],he=$.match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(L){var P=L.match(Ge);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function Re(L){var P=L.params.length?"?"+L.params.join("&"):"";return L.protocol+"://"+L.authority+L.path+P}var We="mapbox.eventData";function xt(L){if(!L)return null;var P=L.split(".");if(!P||P.length!==3)return null;try{var N=JSON.parse(te(P[1]));return N}catch{return null}}var Nt=function(P){this.type=P,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Nt.prototype.getStorageKey=function(P){var N=xt(ie.ACCESS_TOKEN),$="";return N&&N.u?$=K(N.u):$=ie.ACCESS_TOKEN||"",P?We+"."+P+":"+$:We+":"+$},Nt.prototype.fetchEventData=function(){var P=ue("localStorage"),N=this.getStorageKey(),$=this.getStorageKey("uuid");if(P)try{var he=self.localStorage.getItem(N);he&&(this.eventData=JSON.parse(he));var xe=self.localStorage.getItem($);xe&&(this.anonId=xe)}catch{O("Unable to read from LocalStorage")}},Nt.prototype.saveEventData=function(){var P=ue("localStorage"),N=this.getStorageKey(),$=this.getStorageKey("uuid");if(P)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Nt.prototype.processRequests=function(P){},Nt.prototype.postEvent=function(P,N,$,he){var xe=this;if(!!ie.EVENTS_URL){var Te=Fe(ie.EVENTS_URL);Te.params.push("access_token="+(he||ie.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(P).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:ge,userId:this.anonId},rt=N?A(Ne,N):Ne,gt={url:Re(Te),headers:{"Content-Type":"text/plain"},body:JSON.stringify([rt])};this.pendingRequest=Ct(gt,function(bt){xe.pendingRequest=null,$(bt),xe.saveEventData(),xe.processRequests(he)})}},Nt.prototype.queueRequest=function(P,N){this.queue.push(P),this.processRequests(N)};var tr=function(L){function P(){L.call(this,"map.load"),this.success={},this.skuToken=""}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.postMapLoadEvent=function($,he,xe,Te){this.skuToken=xe,(ie.EVENTS_URL&&Te||ie.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Ne){return Le(Ne)||_e(Ne)}))&&this.queueRequest({id:he,timestamp:Date.now()},Te)},P.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){var xe=this.queue.shift(),Te=xe.id,Ne=xe.timestamp;Te&&this.success[Te]||(this.anonId||this.fetchEventData(),C(this.anonId)||(this.anonId=v()),this.postEvent(Ne,{skuToken:this.skuToken},function(rt){rt||Te&&(he.success[Te]=!0)},$))}},P}(Nt),Vt=function(L){function P(N){L.call(this,"appUserTurnstile"),this._customAccessToken=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.postTurnstileEvent=function($,he){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(xe){return Le(xe)||_e(xe)})&&this.queueRequest(Date.now(),he)},P.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var xe=xt(ie.ACCESS_TOKEN),Te=xe?xe.u:ie.ACCESS_TOKEN,Ne=Te!==this.eventData.tokenU;C(this.anonId)||(this.anonId=v(),Ne=!0);var rt=this.queue.shift();if(this.eventData.lastSuccess){var gt=new Date(this.eventData.lastSuccess),bt=new Date(rt),Gt=(rt-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Gt>=1||Gt<-1||gt.getDate()!==bt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(rt,{"enabled.telemetry":!1},function(lr){lr||(he.eventData.lastSuccess=rt,he.eventData.tokenU=Te)},$)}},P}(Nt),Pt=new Vt,$t=Pt.postTurnstileEvent.bind(Pt),Ut=new tr,Lt=Ut.postMapLoadEvent.bind(Ut),Ye="mapbox-tiles",ot=500,Ve=50,Ae=1e3*60*7,He;function Je(){self.caches&&!He&&(He=self.caches.open(Ye))}var tt;function St(L,P){if(tt===void 0)try{new Response(new ReadableStream),tt=!0}catch{tt=!1}tt?P(L.body):L.blob().then(P)}function _t(L,P,N){if(Je(),!!He){var $={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(Te,Ne){return $.headers.set(Ne,Te)});var he=X(P.headers.get("Cache-Control")||"");if(!he["no-store"]){he["max-age"]&&$.headers.set("Expires",new Date(N+he["max-age"]*1e3).toUTCString());var xe=new Date($.headers.get("Expires")).getTime()-N;xe<Ae||St(P,function(Te){var Ne=new self.Response(Te,$);Je(),He&&He.then(function(rt){return rt.put(kt(L.url),Ne)}).catch(function(rt){return O(rt.message)})})}}}function kt(L){var P=L.indexOf("?");return P<0?L:L.slice(0,P)}function jt(L,P){if(Je(),!He)return P(null);var N=kt(L.url);He.then(function($){$.match(N).then(function(he){var xe=Bt(he);$.delete(N),xe&&$.put(N,he.clone()),P(null,he,xe)}).catch(P)}).catch(P)}function Bt(L){if(!L)return!1;var P=new Date(L.headers.get("Expires")||0),N=X(L.headers.get("Cache-Control")||"");return P>Date.now()&&!N["no-cache"]}var Wt=1/0;function Qt(L){Wt++,Wt>Ve&&(L.getActor().send("enforceCacheSizeLimit",ot),Wt=0)}function Zt(L){Je(),He&&He.then(function(P){P.keys().then(function(N){for(var $=0;$<N.length-L;$++)P.delete(N[$])})})}function cr(L){var P=self.caches.delete(Ye);L&&P.catch(L).then(function(){return L()})}function Xr(L,P){ot=L,Ve=P}var vn;function en(){return vn==null&&(vn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),vn}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ft);var ar=function(L){function P(N,$,he){$===401&&_e(he)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),L.call(this,N),this.status=$,this.url=he,this.name=this.constructor.name,this.message=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),rr=Q()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Kt=function(L){return/^file:/.test(L)||/^file:/.test(rr())&&!/^\w+:/.test(L)};function Er(L,P){var N=new self.AbortController,$=new self.Request(L.url,{method:L.method||"GET",body:L.body,credentials:L.credentials,headers:L.headers,referrer:rr(),signal:N.signal}),he=!1,xe=!1,Te=Ee($.url);L.type==="json"&&$.headers.set("Accept","application/json");var Ne=function(gt,bt,Gt){if(!xe){if(gt&&gt.message!=="SecurityError"&&O(gt),bt&&Gt)return rt(bt);var lr=Date.now();self.fetch($).then(function(ir){if(ir.ok){var _r=Te?ir.clone():null;return rt(ir,_r,lr)}else return P(new ar(ir.statusText,ir.status,L.url))}).catch(function(ir){ir.code!==20&&P(new Error(ir.message))})}},rt=function(gt,bt,Gt){(L.type==="arrayBuffer"?gt.arrayBuffer():L.type==="json"?gt.json():gt.text()).then(function(lr){xe||(bt&&Gt&&_t($,bt,Gt),he=!0,P(null,lr,gt.headers.get("Cache-Control"),gt.headers.get("Expires")))}).catch(function(lr){xe||P(new Error(lr.message))})};return Te?jt($,Ne):Ne(null,null),{cancel:function(){xe=!0,he||N.abort()}}}function st(L,P){var N=new self.XMLHttpRequest;N.open(L.method||"GET",L.url,!0),L.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var $ in L.headers)N.setRequestHeader($,L.headers[$]);return L.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=L.credentials==="include",N.onerror=function(){P(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var he=N.response;if(L.type==="json")try{he=JSON.parse(N.response)}catch(xe){return P(xe)}P(null,he,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else P(new ar(N.statusText,N.status,L.url))},N.send(L.body),{cancel:function(){return N.abort()}}}var et=function(L,P){if(!Kt(L.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Er(L,P);if(Q()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",L,P,void 0,N)}}return st(L,P)},vt=function(L,P){return et(A(L,{type:"json"}),P)},pt=function(L,P){return et(A(L,{type:"arrayBuffer"}),P)},Ct=function(L,P){return et(A(L,{method:"POST"}),P)};function Ht(L){var P=self.document.createElement("a");return P.href=L,P.protocol===self.document.location.protocol&&P.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ke(L,P,N,$){var he=new self.Image,xe=self.URL;he.onload=function(){P(null,he),xe.revokeObjectURL(he.src)},he.onerror=function(){return P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Te=new self.Blob([new Uint8Array(L)],{type:"image/png"});he.cacheControl=N,he.expires=$,he.src=L.byteLength?xe.createObjectURL(Te):Pe}function lt(L,P){var N=new self.Blob([new Uint8Array(L)],{type:"image/png"});self.createImageBitmap(N).then(function($){P(null,$)}).catch(function($){P(new Error("Could not load image because of "+$.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ct,yt,Rt=function(){ct=[],yt=0};Rt();var wt=function(L,P){if(se.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),yt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:L,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return ct.push(N),N}yt++;var $=!1,he=function(){if(!$)for($=!0,yt--;ct.length&&yt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Te=ct.shift(),Ne=Te.requestParameters,rt=Te.callback,gt=Te.cancelled;gt||(Te.cancel=wt(Ne,rt).cancel)}},xe=pt(L,function(Te,Ne,rt,gt){he(),Te?P(Te):Ne&&(en()?lt(Ne,P):ke(Ne,P,rt,gt))});return{cancel:function(){xe.cancel(),he()}}},Dt=function(L,P){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){P(null,N)};for(var $=0;$<L.length;$++){var he=self.document.createElement("source");Ht(L[$])||(N.crossOrigin="Anonymous"),he.src=L[$],N.appendChild(he)}return{cancel:function(){}}};function Jt(L,P,N){var $=N[L]&&N[L].indexOf(P)!==-1;$||(N[L]=N[L]||[],N[L].push(P))}function fr(L,P,N){if(N&&N[L]){var $=N[L].indexOf(P);$!==-1&&N[L].splice($,1)}}var Rr=function(P,N){N===void 0&&(N={}),A(this,N),this.type=P},Sr=function(L){function P(N,$){$===void 0&&($={}),L.call(this,"error",A({error:N},$))}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Rr),Pr=function(){};Pr.prototype.on=function(P,N){return this._listeners=this._listeners||{},Jt(P,N,this._listeners),this},Pr.prototype.off=function(P,N){return fr(P,N,this._listeners),fr(P,N,this._oneTimeListeners),this},Pr.prototype.once=function(P,N){return this._oneTimeListeners=this._oneTimeListeners||{},Jt(P,N,this._oneTimeListeners),this},Pr.prototype.fire=function(P,N){typeof P=="string"&&(P=new Rr(P,N||{}));var $=P.type;if(this.listens($)){P.target=this;for(var he=this._listeners&&this._listeners[$]?this._listeners[$].slice():[],xe=0,Te=he;xe<Te.length;xe+=1){var Ne=Te[xe];Ne.call(this,P)}for(var rt=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[],gt=0,bt=rt;gt<bt.length;gt+=1){var Gt=bt[gt];fr($,Gt,this._oneTimeListeners),Gt.call(this,P)}var lr=this._eventedParent;lr&&(A(P,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),lr.fire(P))}else P instanceof Sr&&console.error(P.error);return this},Pr.prototype.listens=function(P){return this._listeners&&this._listeners[P]&&this._listeners[P].length>0||this._oneTimeListeners&&this._oneTimeListeners[P]&&this._oneTimeListeners[P].length>0||this._eventedParent&&this._eventedParent.listens(P)},Pr.prototype.setEventedParent=function(P,N){return this._eventedParent=P,this._eventedParentData=N,this};var Jr=8,ur={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},wr={"*":{type:"source"}},Br=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Yr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Dr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},zt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},qt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ur={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Gr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ir={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zn={type:"array",value:"*"},ba={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Pa={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},xi={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ka={type:"array",value:"*",minimum:1},ti={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},$a={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Cr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],bn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},gn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},qn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},da={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},oa={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$n={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},gi={"*":{type:"string"}},Xt={$version:Jr,$root:ur,sources:wr,source:Br,source_vector:Yr,source_raster:Dr,source_raster_dem:at,source_geojson:zt,source_video:qt,source_image:hr,layer:Ur,layout:Gr,layout_background:Ir,layout_fill:kr,layout_circle:Kr,layout_heatmap:kn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:yn,layout_symbol:Yn,layout_raster:In,layout_hillshade:Jn,filter:Zn,filter_operator:ba,geometry_type:Pa,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:xi,expression:Ka,expression_name:ti,light:$a,paint:Cr,paint_fill:bn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:gn,paint_circle:Ln,paint_heatmap:qn,paint_symbol:da,paint_raster:oa,paint_hillshade:Bn,paint_background:$n,transition:Xa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:gi},mr=function(P,N,$,he){this.message=(P?P+": ":"")+$,he&&(this.identifier=he),N!=null&&N.__line__&&(this.line=N.__line__)};function un(L){var P=L.key,N=L.value;return N?[new mr(P,N,"constants have been deprecated as of v8")]:[]}function xn(L){for(var P=[],N=arguments.length-1;N-- >0;)P[N]=arguments[N+1];for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];for(var Te in xe)L[Te]=xe[Te]}return L}function sn(L){return L instanceof Number||L instanceof String||L instanceof Boolean?L.valueOf():L}function Cn(L){if(Array.isArray(L))return L.map(Cn);if(L instanceof Object&&!(L instanceof Number||L instanceof String||L instanceof Boolean)){var P={};for(var N in L)P[N]=Cn(L[N]);return P}return sn(L)}var Mn=function(L){function P(N,$){L.call(this,$),this.message=$,this.key=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Error),dn=function(P,N){N===void 0&&(N=[]),this.parent=P,this.bindings={};for(var $=0,he=N;$<he.length;$+=1){var xe=he[$],Te=xe[0],Ne=xe[1];this.bindings[Te]=Ne}};dn.prototype.concat=function(P){return new dn(this,P)},dn.prototype.get=function(P){if(this.bindings[P])return this.bindings[P];if(this.parent)return this.parent.get(P);throw new Error(P+" not found in scope.")},dn.prototype.has=function(P){return this.bindings[P]?!0:this.parent?this.parent.has(P):!1};var Tr={kind:"null"},Ar={kind:"number"},Hr={kind:"string"},wn={kind:"boolean"},Gn={kind:"color"},sa={kind:"object"},En={kind:"value"},ea={kind:"error"},fa={kind:"collator"},_a={kind:"formatted"},Aa={kind:"resolvedImage"};function va(L,P){return{kind:"array",itemType:L,N:P}}function La(L){if(L.kind==="array"){var P=La(L.itemType);return typeof L.N=="number"?"array<"+P+", "+L.N+">":L.itemType.kind==="value"?"array":"array<"+P+">"}else return L.kind}var So=[Tr,Ar,Hr,wn,Gn,_a,sa,va(En),Aa];function Jo(L,P){if(P.kind==="error")return null;if(L.kind==="array"){if(P.kind==="array"&&(P.N===0&&P.itemType.kind==="value"||!Jo(L.itemType,P.itemType))&&(typeof L.N!="number"||L.N===P.N))return null}else{if(L.kind===P.kind)return null;if(L.kind==="value")for(var N=0,$=So;N<$.length;N+=1){var he=$[N];if(!Jo(he,P))return null}}return"Expected "+La(L)+" but found "+La(P)+" instead."}function vs(L,P){return P.some(function(N){return N.kind===L.kind})}function kl(L,P){return P.some(function(N){return N==="null"?L===null:N==="array"?Array.isArray(L):N==="object"?L&&!Array.isArray(L)&&typeof L=="object":N===typeof L})}var Ul=a(function(L,P){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $(gt){return gt=Math.round(gt),gt<0?0:gt>255?255:gt}function he(gt){return gt<0?0:gt>1?1:gt}function xe(gt){return gt[gt.length-1]==="%"?$(parseFloat(gt)/100*255):$(parseInt(gt))}function Te(gt){return gt[gt.length-1]==="%"?he(parseFloat(gt)/100):he(parseFloat(gt))}function Ne(gt,bt,Gt){return Gt<0?Gt+=1:Gt>1&&(Gt-=1),Gt*6<1?gt+(bt-gt)*Gt*6:Gt*2<1?bt:Gt*3<2?gt+(bt-gt)*(2/3-Gt)*6:gt}function rt(gt){var bt=gt.replace(/ /g,"").toLowerCase();if(bt in N)return N[bt].slice();if(bt[0]==="#"){if(bt.length===4){var Gt=parseInt(bt.substr(1),16);return Gt>=0&&Gt<=4095?[(Gt&3840)>>4|(Gt&3840)>>8,Gt&240|(Gt&240)>>4,Gt&15|(Gt&15)<<4,1]:null}else if(bt.length===7){var Gt=parseInt(bt.substr(1),16);return Gt>=0&&Gt<=16777215?[(Gt&16711680)>>16,(Gt&65280)>>8,Gt&255,1]:null}return null}var lr=bt.indexOf("("),ir=bt.indexOf(")");if(lr!==-1&&ir+1===bt.length){var _r=bt.substr(0,lr),Vr=bt.substr(lr+1,ir-(lr+1)).split(","),cn=1;switch(_r){case"rgba":if(Vr.length!==4)return null;cn=Te(Vr.pop());case"rgb":return Vr.length!==3?null:[xe(Vr[0]),xe(Vr[1]),xe(Vr[2]),cn];case"hsla":if(Vr.length!==4)return null;cn=Te(Vr.pop());case"hsl":if(Vr.length!==3)return null;var an=(parseFloat(Vr[0])%360+360)%360/360,Rn=Te(Vr[1]),An=Te(Vr[2]),Dn=An<=.5?An*(Rn+1):An+Rn-An*Rn,Un=An*2-Dn;return[$(Ne(Un,Dn,an+1/3)*255),$(Ne(Un,Dn,an)*255),$(Ne(Un,Dn,an-1/3)*255),cn];default:return null}}return null}try{P.parseCSSColor=rt}catch{}}),_u=Ul.parseCSSColor,wi=function(P,N,$,he){he===void 0&&(he=1),this.r=P,this.g=N,this.b=$,this.a=he};wi.parse=function(P){if(!!P){if(P instanceof wi)return P;if(typeof P=="string"){var N=_u(P);if(!!N)return new wi(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},wi.prototype.toString=function(){var P=this.toArray(),N=P[0],$=P[1],he=P[2],xe=P[3];return"rgba("+Math.round(N)+","+Math.round($)+","+Math.round(he)+","+xe+")"},wi.prototype.toArray=function(){var P=this,N=P.r,$=P.g,he=P.b,xe=P.a;return xe===0?[0,0,0,0]:[N*255/xe,$*255/xe,he*255/xe,xe]},wi.black=new wi(0,0,0,1),wi.white=new wi(1,1,1,1),wi.transparent=new wi(0,0,0,0),wi.red=new wi(1,0,0,1);var hl=function(P,N,$){P?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};hl.prototype.compare=function(P,N){return this.collator.compare(P,N)},hl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var el=function(P,N,$,he,xe){this.text=P,this.image=N,this.scale=$,this.fontStack=he,this.textColor=xe},qi=function(P){this.sections=P};qi.fromString=function(P){return new qi([new el(P,null,null,null,null)])},qi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(P){return P.text.length!==0||P.image&&P.image.name.length!==0})},qi.factory=function(P){return P instanceof qi?P:qi.fromString(P)},qi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(P){return P.text}).join("")},qi.prototype.serialize=function(){for(var P=["format"],N=0,$=this.sections;N<$.length;N+=1){var he=$[N];if(he.image){P.push(["image",he.image.name]);continue}P.push(he.text);var xe={};he.fontStack&&(xe["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(xe["font-scale"]=he.scale),he.textColor&&(xe["text-color"]=["rgba"].concat(he.textColor.toArray())),P.push(xe)}return P};var No=function(P){this.name=P.name,this.available=P.available};No.prototype.toString=function(){return this.name},No.fromString=function(P){return P?new No({name:P,available:!1}):null},No.prototype.serialize=function(){return["image",this.name]};function Hl(L,P,N,$){if(!(typeof L=="number"&&L>=0&&L<=255&&typeof P=="number"&&P>=0&&P<=255&&typeof N=="number"&&N>=0&&N<=255)){var he=typeof $=="number"?[L,P,N,$]:[L,P,N];return"Invalid rgba value ["+he.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof $>"u"||typeof $=="number"&&$>=0&&$<=1?null:"Invalid rgba value ["+[L,P,N,$].join(", ")+"]: 'a' must be between 0 and 1."}function Is(L){if(L===null)return!0;if(typeof L=="string")return!0;if(typeof L=="boolean")return!0;if(typeof L=="number")return!0;if(L instanceof wi)return!0;if(L instanceof hl)return!0;if(L instanceof qi)return!0;if(L instanceof No)return!0;if(Array.isArray(L)){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(!Is($))return!1}return!0}else if(typeof L=="object"){for(var he in L)if(!Is(L[he]))return!1;return!0}else return!1}function Gi(L){if(L===null)return Tr;if(typeof L=="string")return Hr;if(typeof L=="boolean")return wn;if(typeof L=="number")return Ar;if(L instanceof wi)return Gn;if(L instanceof hl)return fa;if(L instanceof qi)return _a;if(L instanceof No)return Aa;if(Array.isArray(L)){for(var P=L.length,N,$=0,he=L;$<he.length;$+=1){var xe=he[$],Te=Gi(xe);if(!N)N=Te;else{if(N===Te)continue;N=En;break}}return va(N||En,P)}else return sa}function Cl(L){var P=typeof L;return L===null?"":P==="string"||P==="number"||P==="boolean"?String(L):L instanceof wi||L instanceof qi||L instanceof No?L.toString():JSON.stringify(L)}var lo=function(P,N){this.type=P,this.value=N};lo.parse=function(P,N){if(P.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(!Is(P[1]))return N.error("invalid value");var $=P[1],he=Gi($),xe=N.expectedType;return he.kind==="array"&&he.N===0&&xe&&xe.kind==="array"&&(typeof xe.N!="number"||xe.N===0)&&(he=xe),new lo(he,$)},lo.prototype.evaluate=function(){return this.value},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof wi?["rgba"].concat(this.value.toArray()):this.value instanceof qi?this.value.serialize():this.value};var Zi=function(P){this.name="ExpressionEvaluationError",this.message=P};Zi.prototype.toJSON=function(){return this.message};var yo={string:Hr,number:Ar,boolean:wn,object:sa},uo=function(P,N){this.type=P,this.args=N};uo.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=1,he,xe=P[0];if(xe==="array"){var Te;if(P.length>2){var Ne=P[1];if(typeof Ne!="string"||!(Ne in yo)||Ne==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);Te=yo[Ne],$++}else Te=En;var rt;if(P.length>3){if(P[2]!==null&&(typeof P[2]!="number"||P[2]<0||P[2]!==Math.floor(P[2])))return N.error('The length argument to "array" must be a positive integer literal',2);rt=P[2],$++}he=va(Te,rt)}else he=yo[xe];for(var gt=[];$<P.length;$++){var bt=N.parse(P[$],$,En);if(!bt)return null;gt.push(bt)}return new uo(he,gt)},uo.prototype.evaluate=function(P){for(var N=0;N<this.args.length;N++){var $=this.args[N].evaluate(P),he=Jo(this.type,Gi($));if(he){if(N===this.args.length-1)throw new Zi("Expected value to be of type "+La(this.type)+", but found "+La(Gi($))+" instead.")}else return $}return null},uo.prototype.eachChild=function(P){this.args.forEach(P)},uo.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},uo.prototype.serialize=function(){var P=this.type,N=[P.kind];if(P.kind==="array"){var $=P.itemType;if($.kind==="string"||$.kind==="number"||$.kind==="boolean"){N.push($.kind);var he=P.N;(typeof he=="number"||this.args.length>1)&&N.push(he)}}return N.concat(this.args.map(function(xe){return xe.serialize()}))};var ws=function(P){this.type=_a,this.sections=P};ws.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=P[1];if(!Array.isArray($)&&typeof $=="object")return N.error("First argument must be an image or text section.");for(var he=[],xe=!1,Te=1;Te<=P.length-1;++Te){var Ne=P[Te];if(xe&&typeof Ne=="object"&&!Array.isArray(Ne)){xe=!1;var rt=null;if(Ne["font-scale"]&&(rt=N.parse(Ne["font-scale"],1,Ar),!rt))return null;var gt=null;if(Ne["text-font"]&&(gt=N.parse(Ne["text-font"],1,va(Hr)),!gt))return null;var bt=null;if(Ne["text-color"]&&(bt=N.parse(Ne["text-color"],1,Gn),!bt))return null;var Gt=he[he.length-1];Gt.scale=rt,Gt.font=gt,Gt.textColor=bt}else{var lr=N.parse(P[Te],1,En);if(!lr)return null;var ir=lr.type.kind;if(ir!=="string"&&ir!=="value"&&ir!=="null"&&ir!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,he.push({content:lr,scale:null,font:null,textColor:null})}}return new ws(he)},ws.prototype.evaluate=function(P){var N=function($){var he=$.content.evaluate(P);return Gi(he)===Aa?new el("",he,null,null,null):new el(Cl(he),null,$.scale?$.scale.evaluate(P):null,$.font?$.font.evaluate(P).join(","):null,$.textColor?$.textColor.evaluate(P):null)};return new qi(this.sections.map(N))},ws.prototype.eachChild=function(P){for(var N=0,$=this.sections;N<$.length;N+=1){var he=$[N];P(he.content),he.scale&&P(he.scale),he.font&&P(he.font),he.textColor&&P(he.textColor)}},ws.prototype.outputDefined=function(){return!1},ws.prototype.serialize=function(){for(var P=["format"],N=0,$=this.sections;N<$.length;N+=1){var he=$[N];P.push(he.content.serialize());var xe={};he.scale&&(xe["font-scale"]=he.scale.serialize()),he.font&&(xe["text-font"]=he.font.serialize()),he.textColor&&(xe["text-color"]=he.textColor.serialize()),P.push(xe)}return P};var vl=function(P){this.type=Aa,this.input=P};vl.parse=function(P,N){if(P.length!==2)return N.error("Expected two arguments.");var $=N.parse(P[1],1,Hr);return $?new vl($):N.error("No image name provided.")},vl.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=No.fromString(N);return $&&P.availableImages&&($.available=P.availableImages.indexOf(N)>-1),$},vl.prototype.eachChild=function(P){P(this.input)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return["image",this.input.serialize()]};var Nu={"to-boolean":wn,"to-color":Gn,"to-number":Ar,"to-string":Hr},ps=function(P,N){this.type=P,this.args=N};ps.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=P[0];if(($==="to-boolean"||$==="to-string")&&P.length!==2)return N.error("Expected one argument.");for(var he=Nu[$],xe=[],Te=1;Te<P.length;Te++){var Ne=N.parse(P[Te],Te,En);if(!Ne)return null;xe.push(Ne)}return new ps(he,xe)},ps.prototype.evaluate=function(P){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(P));if(this.type.kind==="color"){for(var N,$,he=0,xe=this.args;he<xe.length;he+=1){var Te=xe[he];if(N=Te.evaluate(P),$=null,N instanceof wi)return N;if(typeof N=="string"){var Ne=P.parseColor(N);if(Ne)return Ne}else if(Array.isArray(N)&&(N.length<3||N.length>4?$="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":$=Hl(N[0],N[1],N[2],N[3]),!$))return new wi(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Zi($||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var rt=null,gt=0,bt=this.args;gt<bt.length;gt+=1){var Gt=bt[gt];if(rt=Gt.evaluate(P),rt===null)return 0;var lr=Number(rt);if(!isNaN(lr))return lr}throw new Zi("Could not convert "+JSON.stringify(rt)+" to number.")}else return this.type.kind==="formatted"?qi.fromString(Cl(this.args[0].evaluate(P))):this.type.kind==="resolvedImage"?No.fromString(Cl(this.args[0].evaluate(P))):Cl(this.args[0].evaluate(P))},ps.prototype.eachChild=function(P){this.args.forEach(P)},ps.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},ps.prototype.serialize=function(){if(this.type.kind==="formatted")return new ws([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new vl(this.args[0]).serialize();var P=["to-"+this.type.kind];return this.eachChild(function(N){P.push(N.serialize())}),P};var Bu=["Unknown","Point","LineString","Polygon"],tl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};tl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},tl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Bu[this.feature.type]:this.feature.type:null},tl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},tl.prototype.canonicalID=function(){return this.canonical},tl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},tl.prototype.parseColor=function(P){var N=this._parseColorCache[P];return N||(N=this._parseColorCache[P]=wi.parse(P)),N};var Bo=function(P,N,$,he){this.name=P,this.type=N,this._evaluate=$,this.args=he};Bo.prototype.evaluate=function(P){return this._evaluate(P,this.args)},Bo.prototype.eachChild=function(P){this.args.forEach(P)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(P){return P.serialize()}))},Bo.parse=function(P,N){var $,he=P[0],xe=Bo.definitions[he];if(!xe)return N.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Te=Array.isArray(xe)?xe[0]:xe.type,Ne=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,rt=Ne.filter(function(za){var Na=za[0];return!Array.isArray(Na)||Na.length===P.length-1}),gt=null,bt=0,Gt=rt;bt<Gt.length;bt+=1){var lr=Gt[bt],ir=lr[0],_r=lr[1];gt=new Uo(N.registry,N.path,null,N.scope);for(var Vr=[],cn=!1,an=1;an<P.length;an++){var Rn=P[an],An=Array.isArray(ir)?ir[an-1]:ir.type,Dn=gt.parse(Rn,1+Vr.length,An);if(!Dn){cn=!0;break}Vr.push(Dn)}if(!cn){if(Array.isArray(ir)&&ir.length!==Vr.length){gt.error("Expected "+ir.length+" arguments, but found "+Vr.length+" instead.");continue}for(var Un=0;Un<Vr.length;Un++){var Kn=Array.isArray(ir)?ir[Un]:ir.type,ha=Vr[Un];gt.concat(Un+1).checkSubtype(Kn,ha.type)}if(gt.errors.length===0)return new Bo(he,Te,_r,Vr)}}if(rt.length===1)($=N.errors).push.apply($,gt.errors);else{for(var ua=rt.length?rt:Ne,Ba=ua.map(function(za){var Na=za[0];return sf(Na)}).join(" | "),ka=[],Da=1;Da<P.length;Da++){var li=N.parse(P[Da],1+ka.length);if(!li)return null;ka.push(La(li.type))}N.error("Expected arguments of type "+Ba+", but found ("+ka.join(", ")+") instead.")}return null},Bo.register=function(P,N){Bo.definitions=N;for(var $ in N)P[$]=Bo};function sf(L){return Array.isArray(L)?"("+L.map(La).join(", ")+")":"("+La(L.type)+"...)"}var rl=function(P,N,$){this.type=fa,this.locale=$,this.caseSensitive=P,this.diacriticSensitive=N};rl.parse=function(P,N){if(P.length!==2)return N.error("Expected one argument.");var $=P[1];if(typeof $!="object"||Array.isArray($))return N.error("Collator options argument must be an object.");var he=N.parse($["case-sensitive"]===void 0?!1:$["case-sensitive"],1,wn);if(!he)return null;var xe=N.parse($["diacritic-sensitive"]===void 0?!1:$["diacritic-sensitive"],1,wn);if(!xe)return null;var Te=null;return $.locale&&(Te=N.parse($.locale,1,Hr),!Te)?null:new rl(he,xe,Te)},rl.prototype.evaluate=function(P){return new hl(this.caseSensitive.evaluate(P),this.diacriticSensitive.evaluate(P),this.locale?this.locale.evaluate(P):null)},rl.prototype.eachChild=function(P){P(this.caseSensitive),P(this.diacriticSensitive),this.locale&&P(this.locale)},rl.prototype.outputDefined=function(){return!1},rl.prototype.serialize=function(){var P={};return P["case-sensitive"]=this.caseSensitive.serialize(),P["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(P.locale=this.locale.serialize()),["collator",P]};var Vs=8192;function iu(L,P){L[0]=Math.min(L[0],P[0]),L[1]=Math.min(L[1],P[1]),L[2]=Math.max(L[2],P[0]),L[3]=Math.max(L[3],P[1])}function lf(L){return(180+L)/360}function uf(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function pl(L,P){return!(L[0]<=P[0]||L[2]>=P[2]||L[1]<=P[1]||L[3]>=P[3])}function ou(L,P){var N=lf(L[0]),$=uf(L[1]),he=Math.pow(2,P.z);return[Math.round(N*he*Vs),Math.round($*he*Vs)]}function Gs(L,P,N){var $=L[0]-P[0],he=L[1]-P[1],xe=L[0]-N[0],Te=L[1]-N[1];return $*Te-xe*he===0&&$*xe<=0&&he*Te<=0}function wu(L,P,N){return P[1]>L[1]!=N[1]>L[1]&&L[0]<(N[0]-P[0])*(L[1]-P[1])/(N[1]-P[1])+P[0]}function Ll(L,P){for(var N=!1,$=0,he=P.length;$<he;$++)for(var xe=P[$],Te=0,Ne=xe.length;Te<Ne-1;Te++){if(Gs(L,xe[Te],xe[Te+1]))return!1;wu(L,xe[Te],xe[Te+1])&&(N=!N)}return N}function Tu(L,P){for(var N=0;N<P.length;N++)if(Ll(L,P[N]))return!0;return!1}function Uu(L,P){return L[0]*P[1]-L[1]*P[0]}function su(L,P,N,$){var he=L[0]-N[0],xe=L[1]-N[1],Te=P[0]-N[0],Ne=P[1]-N[1],rt=$[0]-N[0],gt=$[1]-N[1],bt=he*gt-rt*xe,Gt=Te*gt-rt*Ne;return bt>0&&Gt<0||bt<0&&Gt>0}function ff(L,P,N,$){var he=[P[0]-L[0],P[1]-L[1]],xe=[$[0]-N[0],$[1]-N[1]];return Uu(xe,he)===0?!1:!!(su(L,P,N,$)&&su(N,$,L,P))}function dl(L,P,N){for(var $=0,he=N;$<he.length;$+=1)for(var xe=he[$],Te=0;Te<xe.length-1;++Te)if(ff(L,P,xe[Te],xe[Te+1]))return!0;return!1}function Au(L,P){for(var N=0;N<L.length;++N)if(!Ll(L[N],P))return!1;for(var $=0;$<L.length-1;++$)if(dl(L[$],L[$+1],P))return!1;return!0}function lu(L,P){for(var N=0;N<P.length;N++)if(Au(L,P[N]))return!0;return!1}function Fs(L,P,N){for(var $=[],he=0;he<L.length;he++){for(var xe=[],Te=0;Te<L[he].length;Te++){var Ne=ou(L[he][Te],N);iu(P,Ne),xe.push(Ne)}$.push(xe)}return $}function Vl(L,P,N){for(var $=[],he=0;he<L.length;he++){var xe=Fs(L[he],P,N);$.push(xe)}return $}function Mu(L,P,N,$){if(L[0]<N[0]||L[0]>N[2]){var he=$*.5,xe=L[0]-N[0]>he?-$:N[0]-L[0]>he?$:0;xe===0&&(xe=L[0]-N[2]>he?-$:N[2]-L[0]>he?$:0),L[0]+=xe}iu(P,L)}function Hu(L){L[0]=L[1]=1/0,L[2]=L[3]=-1/0}function Vu(L,P,N,$){for(var he=Math.pow(2,$.z)*Vs,xe=[$.x*Vs,$.y*Vs],Te=[],Ne=0,rt=L;Ne<rt.length;Ne+=1)for(var gt=rt[Ne],bt=0,Gt=gt;bt<Gt.length;bt+=1){var lr=Gt[bt],ir=[lr.x+xe[0],lr.y+xe[1]];Mu(ir,P,N,he),Te.push(ir)}return Te}function uu(L,P,N,$){for(var he=Math.pow(2,$.z)*Vs,xe=[$.x*Vs,$.y*Vs],Te=[],Ne=0,rt=L;Ne<rt.length;Ne+=1){for(var gt=rt[Ne],bt=[],Gt=0,lr=gt;Gt<lr.length;Gt+=1){var ir=lr[Gt],_r=[ir.x+xe[0],ir.y+xe[1]];iu(P,_r),bt.push(_r)}Te.push(bt)}if(P[2]-P[0]<=he/2){Hu(P);for(var Vr=0,cn=Te;Vr<cn.length;Vr+=1)for(var an=cn[Vr],Rn=0,An=an;Rn<An.length;Rn+=1){var Dn=An[Rn];Mu(Dn,P,N,he)}}return Te}function cf(L,P){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=L.canonicalID();if(P.type==="Polygon"){var xe=Fs(P.coordinates,$,he),Te=Vu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var Ne=0,rt=Te;Ne<rt.length;Ne+=1){var gt=rt[Ne];if(!Ll(gt,xe))return!1}}if(P.type==="MultiPolygon"){var bt=Vl(P.coordinates,$,he),Gt=Vu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var _r=ir[lr];if(!Tu(_r,bt))return!1}}return!0}function Gu(L,P){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=L.canonicalID();if(P.type==="Polygon"){var xe=Fs(P.coordinates,$,he),Te=uu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var Ne=0,rt=Te;Ne<rt.length;Ne+=1){var gt=rt[Ne];if(!Au(gt,xe))return!1}}if(P.type==="MultiPolygon"){var bt=Vl(P.coordinates,$,he),Gt=uu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var _r=ir[lr];if(!lu(_r,bt))return!1}}return!0}var ds=function(P,N){this.type=wn,this.geojson=P,this.geometries=N};ds.parse=function(P,N){if(P.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(Is(P[1])){var $=P[1];if($.type==="FeatureCollection")for(var he=0;he<$.features.length;++he){var xe=$.features[he].geometry.type;if(xe==="Polygon"||xe==="MultiPolygon")return new ds($,$.features[he].geometry)}else if($.type==="Feature"){var Te=$.geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new ds($,$.geometry)}else if($.type==="Polygon"||$.type==="MultiPolygon")return new ds($,$)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ds.prototype.evaluate=function(P){if(P.geometry()!=null&&P.canonicalID()!=null){if(P.geometryType()==="Point")return cf(P,this.geometries);if(P.geometryType()==="LineString")return Gu(P,this.geometries)}return!1},ds.prototype.eachChild=function(){},ds.prototype.outputDefined=function(){return!0},ds.prototype.serialize=function(){return["within",this.geojson]};function Pl(L){if(L instanceof Bo){if(L.name==="get"&&L.args.length===1)return!1;if(L.name==="feature-state")return!1;if(L.name==="has"&&L.args.length===1)return!1;if(L.name==="properties"||L.name==="geometry-type"||L.name==="id")return!1;if(/^filter-/.test(L.name))return!1}if(L instanceof ds)return!1;var P=!0;return L.eachChild(function(N){P&&!Pl(N)&&(P=!1)}),P}function Dl(L){if(L instanceof Bo&&L.name==="feature-state")return!1;var P=!0;return L.eachChild(function(N){P&&!Dl(N)&&(P=!1)}),P}function Su(L,P){if(L instanceof Bo&&P.indexOf(L.name)>=0)return!1;var N=!0;return L.eachChild(function($){N&&!Su($,P)&&(N=!1)}),N}var zs=function(P,N){this.type=N.type,this.name=P,this.boundExpression=N};zs.parse=function(P,N){if(P.length!==2||typeof P[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var $=P[1];return N.scope.has($)?new zs($,N.scope.get($)):N.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},zs.prototype.evaluate=function(P){return this.boundExpression.evaluate(P)},zs.prototype.eachChild=function(){},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["var",this.name]};var Uo=function(P,N,$,he,xe){N===void 0&&(N=[]),he===void 0&&(he=new dn),xe===void 0&&(xe=[]),this.registry=P,this.path=N,this.key=N.map(function(Te){return"["+Te+"]"}).join(""),this.scope=he,this.errors=xe,this.expectedType=$};Uo.prototype.parse=function(P,N,$,he,xe){return xe===void 0&&(xe={}),N?this.concat(N,$,he)._parse(P,xe):this._parse(P,xe)},Uo.prototype._parse=function(P,N){(P===null||typeof P=="string"||typeof P=="boolean"||typeof P=="number")&&(P=["literal",P]);function $(bt,Gt,lr){return lr==="assert"?new uo(Gt,[bt]):lr==="coerce"?new ps(Gt,[bt]):bt}if(Array.isArray(P)){if(P.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=P[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[he];if(xe){var Te=xe.parse(P,this);if(!Te)return null;if(this.expectedType){var Ne=this.expectedType,rt=Te.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&rt.kind==="value")Te=$(Te,Ne,N.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(rt.kind==="value"||rt.kind==="string"))Te=$(Te,Ne,N.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,rt))return null}if(!(Te instanceof lo)&&Te.type.kind!=="resolvedImage"&&fu(Te)){var gt=new tl;try{Te=new lo(Te.type,Te.evaluate(gt))}catch(bt){return this.error(bt.message),null}}return Te}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof P>"u"?this.error("'undefined' value invalid. Use null instead."):typeof P=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof P+" instead.")},Uo.prototype.concat=function(P,N,$){var he=typeof P=="number"?this.path.concat(P):this.path,xe=$?this.scope.concat($):this.scope;return new Uo(this.registry,he,N||null,xe,this.errors)},Uo.prototype.error=function(P){for(var N=[],$=arguments.length-1;$-- >0;)N[$]=arguments[$+1];var he=""+this.key+N.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new Mn(he,P))},Uo.prototype.checkSubtype=function(P,N){var $=Jo(P,N);return $&&this.error($),$};function fu(L){if(L instanceof zs)return fu(L.boundExpression);if(L instanceof Bo&&L.name==="error")return!1;if(L instanceof rl)return!1;if(L instanceof ds)return!1;var P=L instanceof ps||L instanceof uo,N=!0;return L.eachChild(function($){P?N=N&&fu($):N=N&&$ instanceof lo}),N?Pl(L)&&Su(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ys(L,P){for(var N=L.length-1,$=0,he=N,xe=0,Te,Ne;$<=he;)if(xe=Math.floor(($+he)/2),Te=L[xe],Ne=L[xe+1],Te<=P){if(xe===N||P<Ne)return xe;$=xe+1}else if(Te>P)he=xe-1;else throw new Zi("Input is not a number.");return 0}var Ws=function(P,N,$){this.type=P,this.input=N,this.labels=[],this.outputs=[];for(var he=0,xe=$;he<xe.length;he+=1){var Te=xe[he],Ne=Te[0],rt=Te[1];this.labels.push(Ne),this.outputs.push(rt)}};Ws.parse=function(P,N){if(P.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return N.error("Expected an even number of arguments.");var $=N.parse(P[1],1,Ar);if(!$)return null;var he=[],xe=null;N.expectedType&&N.expectedType.kind!=="value"&&(xe=N.expectedType);for(var Te=1;Te<P.length;Te+=2){var Ne=Te===1?-1/0:P[Te],rt=P[Te+1],gt=Te,bt=Te+1;if(typeof Ne!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',gt);if(he.length&&he[he.length-1][0]>=Ne)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',gt);var Gt=N.parse(rt,bt,xe);if(!Gt)return null;xe=xe||Gt.type,he.push([Ne,Gt])}return new Ws(xe,$,he)},Ws.prototype.evaluate=function(P){var N=this.labels,$=this.outputs;if(N.length===1)return $[0].evaluate(P);var he=this.input.evaluate(P);if(he<=N[0])return $[0].evaluate(P);var xe=N.length;if(he>=N[xe-1])return $[xe-1].evaluate(P);var Te=Ys(N,he);return $[Te].evaluate(P)},Ws.prototype.eachChild=function(P){P(this.input);for(var N=0,$=this.outputs;N<$.length;N+=1){var he=$[N];P(he)}},Ws.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},Ws.prototype.serialize=function(){for(var P=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&P.push(this.labels[N]),P.push(this.outputs[N].serialize());return P};function bo(L,P,N){return L*(1-N)+P*N}function Gl(L,P,N){return new wi(bo(L.r,P.r,N),bo(L.g,P.g,N),bo(L.b,P.b,N),bo(L.a,P.a,N))}function Yl(L,P,N){return L.map(function($,he){return bo($,P[he],N)})}var yl=Object.freeze({__proto__:null,number:bo,color:Gl,array:Yl}),Os=.95047,Wl=1,Rl=1.08883,cu=4/29,jl=6/29,ml=3*jl*jl,hf=jl*jl*jl,Ts=Math.PI/180,Cf=180/Math.PI;function Eu(L){return L>hf?Math.pow(L,1/3):L/ml+cu}function Il(L){return L>jl?L*L*L:ml*(L-cu)}function Xl(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function xl(L){return L/=255,L<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Zl(L){var P=xl(L.r),N=xl(L.g),$=xl(L.b),he=Eu((.4124564*P+.3575761*N+.1804375*$)/Os),xe=Eu((.2126729*P+.7151522*N+.072175*$)/Wl),Te=Eu((.0193339*P+.119192*N+.9503041*$)/Rl);return{l:116*xe-16,a:500*(he-xe),b:200*(xe-Te),alpha:L.a}}function Yu(L){var P=(L.l+16)/116,N=isNaN(L.a)?P:P+L.a/500,$=isNaN(L.b)?P:P-L.b/200;return P=Wl*Il(P),N=Os*Il(N),$=Rl*Il($),new wi(Xl(3.2404542*N-1.5371385*P-.4985314*$),Xl(-.969266*N+1.8760108*P+.041556*$),Xl(.0556434*N-.2040259*P+1.0572252*$),L.alpha)}function Wu(L,P,N){return{l:bo(L.l,P.l,N),a:bo(L.a,P.a,N),b:bo(L.b,P.b,N),alpha:bo(L.alpha,P.alpha,N)}}function Lf(L){var P=Zl(L),N=P.l,$=P.a,he=P.b,xe=Math.atan2(he,$)*Cf;return{h:xe<0?xe+360:xe,c:Math.sqrt($*$+he*he),l:N,alpha:L.a}}function Yi(L){var P=L.h*Ts,N=L.c,$=L.l;return Yu({l:$,a:Math.cos(P)*N,b:Math.sin(P)*N,alpha:L.alpha})}function Fl(L,P,N){var $=P-L;return L+N*($>180||$<-180?$-360*Math.round($/360):$)}function bl(L,P,N){return{h:Fl(L.h,P.h,N),c:bo(L.c,P.c,N),l:bo(L.l,P.l,N),alpha:bo(L.alpha,P.alpha,N)}}var gs={forward:Zl,reverse:Yu,interpolate:Wu},As={forward:Lf,reverse:Yi,interpolate:bl},Kl=Object.freeze({__proto__:null,lab:gs,hcl:As}),_o=function(P,N,$,he,xe){this.type=P,this.operator=N,this.interpolation=$,this.input=he,this.labels=[],this.outputs=[];for(var Te=0,Ne=xe;Te<Ne.length;Te+=1){var rt=Ne[Te],gt=rt[0],bt=rt[1];this.labels.push(gt),this.outputs.push(bt)}};_o.interpolationFactor=function(P,N,$,he){var xe=0;if(P.name==="exponential")xe=ju(N,P.base,$,he);else if(P.name==="linear")xe=ju(N,1,$,he);else if(P.name==="cubic-bezier"){var Te=P.controlPoints,Ne=new r(Te[0],Te[1],Te[2],Te[3]);xe=Ne.solve(ju(N,1,$,he))}return xe},_o.parse=function(P,N){var $=P[0],he=P[1],xe=P[2],Te=P.slice(3);if(!Array.isArray(he)||he.length===0)return N.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var Ne=he[1];if(typeof Ne!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ne}}else if(he[0]==="cubic-bezier"){var rt=he.slice(1);if(rt.length!==4||rt.some(function(an){return typeof an!="number"||an<0||an>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:rt}}else return N.error("Unknown interpolation type "+String(he[0]),1,0);if(P.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return N.error("Expected an even number of arguments.");if(xe=N.parse(xe,2,Ar),!xe)return null;var gt=[],bt=null;$==="interpolate-hcl"||$==="interpolate-lab"?bt=Gn:N.expectedType&&N.expectedType.kind!=="value"&&(bt=N.expectedType);for(var Gt=0;Gt<Te.length;Gt+=2){var lr=Te[Gt],ir=Te[Gt+1],_r=Gt+3,Vr=Gt+4;if(typeof lr!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_r);if(gt.length&&gt[gt.length-1][0]>=lr)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_r);var cn=N.parse(ir,Vr,bt);if(!cn)return null;bt=bt||cn.type,gt.push([lr,cn])}return bt.kind!=="number"&&bt.kind!=="color"&&!(bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number")?N.error("Type "+La(bt)+" is not interpolatable."):new _o(bt,$,he,xe,gt)},_o.prototype.evaluate=function(P){var N=this.labels,$=this.outputs;if(N.length===1)return $[0].evaluate(P);var he=this.input.evaluate(P);if(he<=N[0])return $[0].evaluate(P);var xe=N.length;if(he>=N[xe-1])return $[xe-1].evaluate(P);var Te=Ys(N,he),Ne=N[Te],rt=N[Te+1],gt=_o.interpolationFactor(this.interpolation,he,Ne,rt),bt=$[Te].evaluate(P),Gt=$[Te+1].evaluate(P);return this.operator==="interpolate"?yl[this.type.kind.toLowerCase()](bt,Gt,gt):this.operator==="interpolate-hcl"?As.reverse(As.interpolate(As.forward(bt),As.forward(Gt),gt)):gs.reverse(gs.interpolate(gs.forward(bt),gs.forward(Gt),gt))},_o.prototype.eachChild=function(P){P(this.input);for(var N=0,$=this.outputs;N<$.length;N+=1){var he=$[N];P(he)}},_o.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},_o.prototype.serialize=function(){var P;this.interpolation.name==="linear"?P=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?P=["linear"]:P=["exponential",this.interpolation.base]:P=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,P,this.input.serialize()],$=0;$<this.labels.length;$++)N.push(this.labels[$],this.outputs[$].serialize());return N};function ju(L,P,N,$){var he=$-N,xe=L-N;return he===0?0:P===1?xe/he:(Math.pow(P,xe)-1)/(Math.pow(P,he)-1)}var Ms=function(P,N){this.type=P,this.args=N};Ms.parse=function(P,N){if(P.length<2)return N.error("Expectected at least one argument.");var $=null,he=N.expectedType;he&&he.kind!=="value"&&($=he);for(var xe=[],Te=0,Ne=P.slice(1);Te<Ne.length;Te+=1){var rt=Ne[Te],gt=N.parse(rt,1+xe.length,$,void 0,{typeAnnotation:"omit"});if(!gt)return null;$=$||gt.type,xe.push(gt)}var bt=he&&xe.some(function(Gt){return Jo(he,Gt.type)});return bt?new Ms(En,xe):new Ms($,xe)},Ms.prototype.evaluate=function(P){for(var N=null,$=0,he,xe=0,Te=this.args;xe<Te.length;xe+=1){var Ne=Te[xe];if($++,N=Ne.evaluate(P),N&&N instanceof No&&!N.available&&(he||(he=N.name),N=null,$===this.args.length&&(N=he)),N!==null)break}return N},Ms.prototype.eachChild=function(P){this.args.forEach(P)},Ms.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},Ms.prototype.serialize=function(){var P=["coalesce"];return this.eachChild(function(N){P.push(N.serialize())}),P};var nl=function(P,N){this.type=N.type,this.bindings=[].concat(P),this.result=N};nl.prototype.evaluate=function(P){return this.result.evaluate(P)},nl.prototype.eachChild=function(P){for(var N=0,$=this.bindings;N<$.length;N+=1){var he=$[N];P(he[1])}P(this.result)},nl.parse=function(P,N){if(P.length<4)return N.error("Expected at least 3 arguments, but found "+(P.length-1)+" instead.");for(var $=[],he=1;he<P.length-1;he+=2){var xe=P[he];if(typeof xe!="string")return N.error("Expected string, but found "+typeof xe+" instead.",he);if(/[^a-zA-Z0-9_]/.test(xe))return N.error("Variable names must contain only alphanumeric characters or '_'.",he);var Te=N.parse(P[he+1],he+1);if(!Te)return null;$.push([xe,Te])}var Ne=N.parse(P[P.length-1],P.length-1,N.expectedType,$);return Ne?new nl($,Ne):null},nl.prototype.outputDefined=function(){return this.result.outputDefined()},nl.prototype.serialize=function(){for(var P=["let"],N=0,$=this.bindings;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];P.push(xe,Te.serialize())}return P.push(this.result.serialize()),P};var al=function(P,N,$){this.type=P,this.index=N,this.input=$};al.parse=function(P,N){if(P.length!==3)return N.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,Ar),he=N.parse(P[2],2,va(N.expectedType||En));if(!$||!he)return null;var xe=he.type;return new al(xe.itemType,$,he)},al.prototype.evaluate=function(P){var N=this.index.evaluate(P),$=this.input.evaluate(P);if(N<0)throw new Zi("Array index out of bounds: "+N+" < 0.");if(N>=$.length)throw new Zi("Array index out of bounds: "+N+" > "+($.length-1)+".");if(N!==Math.floor(N))throw new Zi("Array index must be an integer, but found "+N+" instead.");return $[N]},al.prototype.eachChild=function(P){P(this.index),P(this.input)},al.prototype.outputDefined=function(){return!1},al.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var js=function(P,N){this.type=wn,this.needle=P,this.haystack=N};js.parse=function(P,N){if(P.length!==3)return N.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,En);return!$||!he?null:vs($.type,[wn,Hr,Ar,Tr,En])?new js($,he):N.error("Expected first argument to be of type boolean, string, number or null, but found "+La($.type)+" instead")},js.prototype.evaluate=function(P){var N=this.needle.evaluate(P),$=this.haystack.evaluate(P);if(!$)return!1;if(!kl(N,["boolean","string","number","null"]))throw new Zi("Expected first argument to be of type boolean, string, number or null, but found "+La(Gi(N))+" instead.");if(!kl($,["string","array"]))throw new Zi("Expected second argument to be of type array or string, but found "+La(Gi($))+" instead.");return $.indexOf(N)>=0},js.prototype.eachChild=function(P){P(this.needle),P(this.haystack)},js.prototype.outputDefined=function(){return!0},js.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ss=function(P,N,$){this.type=Ar,this.needle=P,this.haystack=N,this.fromIndex=$};Ss.parse=function(P,N){if(P.length<=2||P.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,En);if(!$||!he)return null;if(!vs($.type,[wn,Hr,Ar,Tr,En]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+La($.type)+" instead");if(P.length===4){var xe=N.parse(P[3],3,Ar);return xe?new Ss($,he,xe):null}else return new Ss($,he)},Ss.prototype.evaluate=function(P){var N=this.needle.evaluate(P),$=this.haystack.evaluate(P);if(!kl(N,["boolean","string","number","null"]))throw new Zi("Expected first argument to be of type boolean, string, number or null, but found "+La(Gi(N))+" instead.");if(!kl($,["string","array"]))throw new Zi("Expected second argument to be of type array or string, but found "+La(Gi($))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(P);return $.indexOf(N,he)}return $.indexOf(N)},Ss.prototype.eachChild=function(P){P(this.needle),P(this.haystack),this.fromIndex&&P(this.fromIndex)},Ss.prototype.outputDefined=function(){return!1},Ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var P=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),P]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var eo=function(P,N,$,he,xe,Te){this.inputType=P,this.type=N,this.input=$,this.cases=he,this.outputs=xe,this.otherwise=Te};eo.parse=function(P,N){if(P.length<5)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if(P.length%2!==1)return N.error("Expected an even number of arguments.");var $,he;N.expectedType&&N.expectedType.kind!=="value"&&(he=N.expectedType);for(var xe={},Te=[],Ne=2;Ne<P.length-1;Ne+=2){var rt=P[Ne],gt=P[Ne+1];Array.isArray(rt)||(rt=[rt]);var bt=N.concat(Ne);if(rt.length===0)return bt.error("Expected at least one branch label.");for(var Gt=0,lr=rt;Gt<lr.length;Gt+=1){var ir=lr[Gt];if(typeof ir!="number"&&typeof ir!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof ir=="number"&&Math.abs(ir)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ir=="number"&&Math.floor(ir)!==ir)return bt.error("Numeric branch labels must be integer values.");if(!$)$=Gi(ir);else if(bt.checkSubtype($,Gi(ir)))return null;if(typeof xe[String(ir)]<"u")return bt.error("Branch labels must be unique.");xe[String(ir)]=Te.length}var _r=N.parse(gt,Ne,he);if(!_r)return null;he=he||_r.type,Te.push(_r)}var Vr=N.parse(P[1],1,En);if(!Vr)return null;var cn=N.parse(P[P.length-1],P.length-1,he);return!cn||Vr.type.kind!=="value"&&N.concat(1).checkSubtype($,Vr.type)?null:new eo($,he,Vr,xe,Te,cn)},eo.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=Gi(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return $.evaluate(P)},eo.prototype.eachChild=function(P){P(this.input),this.outputs.forEach(P),P(this.otherwise)},eo.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})&&this.otherwise.outputDefined()},eo.prototype.serialize=function(){for(var P=this,N=["match",this.input.serialize()],$=Object.keys(this.cases).sort(),he=[],xe={},Te=0,Ne=$;Te<Ne.length;Te+=1){var rt=Ne[Te],gt=xe[this.cases[rt]];gt===void 0?(xe[this.cases[rt]]=he.length,he.push([this.cases[rt],[rt]])):he[gt][1].push(rt)}for(var bt=function(Vr){return P.inputType.kind==="number"?Number(Vr):Vr},Gt=0,lr=he;Gt<lr.length;Gt+=1){var ir=lr[Gt],gt=ir[0],_r=ir[1];_r.length===1?N.push(bt(_r[0])):N.push(_r.map(bt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Ho=function(P,N,$){this.type=P,this.branches=N,this.otherwise=$};Ho.parse=function(P,N){if(P.length<4)return N.error("Expected at least 3 arguments, but found only "+(P.length-1)+".");if(P.length%2!==0)return N.error("Expected an odd number of arguments.");var $;N.expectedType&&N.expectedType.kind!=="value"&&($=N.expectedType);for(var he=[],xe=1;xe<P.length-1;xe+=2){var Te=N.parse(P[xe],xe,wn);if(!Te)return null;var Ne=N.parse(P[xe+1],xe+1,$);if(!Ne)return null;he.push([Te,Ne]),$=$||Ne.type}var rt=N.parse(P[P.length-1],P.length-1,$);return rt?new Ho($,he,rt):null},Ho.prototype.evaluate=function(P){for(var N=0,$=this.branches;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];if(xe.evaluate(P))return Te.evaluate(P)}return this.otherwise.evaluate(P)},Ho.prototype.eachChild=function(P){for(var N=0,$=this.branches;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];P(xe),P(Te)}P(this.otherwise)},Ho.prototype.outputDefined=function(){return this.branches.every(function(P){P[0];var N=P[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Ho.prototype.serialize=function(){var P=["case"];return this.eachChild(function(N){P.push(N.serialize())}),P};var Es=function(P,N,$,he){this.type=P,this.input=N,this.beginIndex=$,this.endIndex=he};Es.parse=function(P,N){if(P.length<=2||P.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,Ar);if(!$||!he)return null;if(!vs($.type,[va(En),Hr,En]))return N.error("Expected first argument to be of type array or string, but found "+La($.type)+" instead");if(P.length===4){var xe=N.parse(P[3],3,Ar);return xe?new Es($.type,$,he,xe):null}else return new Es($.type,$,he)},Es.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=this.beginIndex.evaluate(P);if(!kl(N,["string","array"]))throw new Zi("Expected first argument to be of type array or string, but found "+La(Gi(N))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(P);return N.slice($,he)}return N.slice($)},Es.prototype.eachChild=function(P){P(this.input),P(this.beginIndex),this.endIndex&&P(this.endIndex)},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var P=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),P]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Xu(L,P){return L==="=="||L==="!="?P.kind==="boolean"||P.kind==="string"||P.kind==="number"||P.kind==="null"||P.kind==="value":P.kind==="string"||P.kind==="number"||P.kind==="value"}function hu(L,P,N){return P===N}function Zu(L,P,N){return P!==N}function Tt(L,P,N){return P<N}function Yt(L,P,N){return P>N}function yr(L,P,N){return P<=N}function vr(L,P,N){return P>=N}function Nr(L,P,N,$){return $.compare(P,N)===0}function ln(L,P,N,$){return!Nr(L,P,N,$)}function _n(L,P,N,$){return $.compare(P,N)<0}function Pn(L,P,N,$){return $.compare(P,N)>0}function zn(L,P,N,$){return $.compare(P,N)<=0}function Wn(L,P,N,$){return $.compare(P,N)>=0}function Tn(L,P,N){var $=L!=="=="&&L!=="!=";return function(){function he(xe,Te,Ne){this.type=wn,this.lhs=xe,this.rhs=Te,this.collator=Ne,this.hasUntypedArgument=xe.type.kind==="value"||Te.type.kind==="value"}return he.parse=function(Te,Ne){if(Te.length!==3&&Te.length!==4)return Ne.error("Expected two or three arguments.");var rt=Te[0],gt=Ne.parse(Te[1],1,En);if(!gt)return null;if(!Xu(rt,gt.type))return Ne.concat(1).error('"'+rt+`" comparisons are not supported for type '`+La(gt.type)+"'.");var bt=Ne.parse(Te[2],2,En);if(!bt)return null;if(!Xu(rt,bt.type))return Ne.concat(2).error('"'+rt+`" comparisons are not supported for type '`+La(bt.type)+"'.");if(gt.type.kind!==bt.type.kind&&gt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot compare types '"+La(gt.type)+"' and '"+La(bt.type)+"'.");$&&(gt.type.kind==="value"&&bt.type.kind!=="value"?gt=new uo(bt.type,[gt]):gt.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new uo(gt.type,[bt])));var Gt=null;if(Te.length===4){if(gt.type.kind!=="string"&&bt.type.kind!=="string"&&gt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Gt=Ne.parse(Te[3],3,fa),!Gt)return null}return new he(gt,bt,Gt)},he.prototype.evaluate=function(Te){var Ne=this.lhs.evaluate(Te),rt=this.rhs.evaluate(Te);if($&&this.hasUntypedArgument){var gt=Gi(Ne),bt=Gi(rt);if(gt.kind!==bt.kind||!(gt.kind==="string"||gt.kind==="number"))throw new Zi('Expected arguments for "'+L+'" to be (string, string) or (number, number), but found ('+gt.kind+", "+bt.kind+") instead.")}if(this.collator&&!$&&this.hasUntypedArgument){var Gt=Gi(Ne),lr=Gi(rt);if(Gt.kind!=="string"||lr.kind!=="string")return P(Te,Ne,rt)}return this.collator?N(Te,Ne,rt,this.collator.evaluate(Te)):P(Te,Ne,rt)},he.prototype.eachChild=function(Te){Te(this.lhs),Te(this.rhs),this.collator&&Te(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var Te=[L];return this.eachChild(function(Ne){Te.push(Ne.serialize())}),Te},he}()}var Hn=Tn("==",hu,Nr),On=Tn("!=",Zu,ln),Xn=Tn("<",Tt,_n),aa=Tn(">",Yt,Pn),Va=Tn("<=",yr,zn),Ia=Tn(">=",vr,Wn),Ga=function(P,N,$,he,xe){this.type=Hr,this.number=P,this.locale=N,this.currency=$,this.minFractionDigits=he,this.maxFractionDigits=xe};Ga.parse=function(P,N){if(P.length!==3)return N.error("Expected two arguments.");var $=N.parse(P[1],1,Ar);if(!$)return null;var he=P[2];if(typeof he!="object"||Array.isArray(he))return N.error("NumberFormat options argument must be an object.");var xe=null;if(he.locale&&(xe=N.parse(he.locale,1,Hr),!xe))return null;var Te=null;if(he.currency&&(Te=N.parse(he.currency,1,Hr),!Te))return null;var Ne=null;if(he["min-fraction-digits"]&&(Ne=N.parse(he["min-fraction-digits"],1,Ar),!Ne))return null;var rt=null;return he["max-fraction-digits"]&&(rt=N.parse(he["max-fraction-digits"],1,Ar),!rt)?null:new Ga($,xe,Te,Ne,rt)},Ga.prototype.evaluate=function(P){return new Intl.NumberFormat(this.locale?this.locale.evaluate(P):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(P):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(P):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(P):void 0}).format(this.number.evaluate(P))},Ga.prototype.eachChild=function(P){P(this.number),this.locale&&P(this.locale),this.currency&&P(this.currency),this.minFractionDigits&&P(this.minFractionDigits),this.maxFractionDigits&&P(this.maxFractionDigits)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){var P={};return this.locale&&(P.locale=this.locale.serialize()),this.currency&&(P.currency=this.currency.serialize()),this.minFractionDigits&&(P["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(P["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),P]};var Ya=function(P){this.type=Ar,this.input=P};Ya.parse=function(P,N){if(P.length!==2)return N.error("Expected 1 argument, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1);return $?$.type.kind!=="array"&&$.type.kind!=="string"&&$.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+La($.type)+" instead."):new Ya($):null},Ya.prototype.evaluate=function(P){var N=this.input.evaluate(P);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Zi("Expected value to be of type string or array, but found "+La(Gi(N))+" instead.")},Ya.prototype.eachChild=function(P){P(this.input)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){var P=["length"];return this.eachChild(function(N){P.push(N.serialize())}),P};var ra={"==":Hn,"!=":On,">":aa,"<":Xn,">=":Ia,"<=":Va,array:uo,at:al,boolean:uo,case:Ho,coalesce:Ms,collator:rl,format:ws,image:vl,in:js,"index-of":Ss,interpolate:_o,"interpolate-hcl":_o,"interpolate-lab":_o,length:Ya,let:nl,literal:lo,match:eo,number:uo,"number-format":Ga,object:uo,slice:Es,step:Ws,string:uo,"to-boolean":ps,"to-color":ps,"to-number":ps,"to-string":ps,var:zs,within:ds};function ma(L,P){var N=P[0],$=P[1],he=P[2],xe=P[3];N=N.evaluate(L),$=$.evaluate(L),he=he.evaluate(L);var Te=xe?xe.evaluate(L):1,Ne=Hl(N,$,he,Te);if(Ne)throw new Zi(Ne);return new wi(N/255*Te,$/255*Te,he/255*Te,Te)}function Ja(L,P){return L in P}function ai(L,P){var N=P[L];return typeof N>"u"?null:N}function Mi(L,P,N,$){for(;N<=$;){var he=N+$>>1;if(P[he]===L)return!0;P[he]>L?$=he-1:N=he+1}return!1}function Si(L){return{type:L}}Bo.register(ra,{error:[ea,[Hr],function(L,P){var N=P[0];throw new Zi(N.evaluate(L))}],typeof:[Hr,[En],function(L,P){var N=P[0];return La(Gi(N.evaluate(L)))}],"to-rgba":[va(Ar,4),[Gn],function(L,P){var N=P[0];return N.evaluate(L).toArray()}],rgb:[Gn,[Ar,Ar,Ar],ma],rgba:[Gn,[Ar,Ar,Ar,Ar],ma],has:{type:wn,overloads:[[[Hr],function(L,P){var N=P[0];return Ja(N.evaluate(L),L.properties())}],[[Hr,sa],function(L,P){var N=P[0],$=P[1];return Ja(N.evaluate(L),$.evaluate(L))}]]},get:{type:En,overloads:[[[Hr],function(L,P){var N=P[0];return ai(N.evaluate(L),L.properties())}],[[Hr,sa],function(L,P){var N=P[0],$=P[1];return ai(N.evaluate(L),$.evaluate(L))}]]},"feature-state":[En,[Hr],function(L,P){var N=P[0];return ai(N.evaluate(L),L.featureState||{})}],properties:[sa,[],function(L){return L.properties()}],"geometry-type":[Hr,[],function(L){return L.geometryType()}],id:[En,[],function(L){return L.id()}],zoom:[Ar,[],function(L){return L.globals.zoom}],"heatmap-density":[Ar,[],function(L){return L.globals.heatmapDensity||0}],"line-progress":[Ar,[],function(L){return L.globals.lineProgress||0}],accumulated:[En,[],function(L){return L.globals.accumulated===void 0?null:L.globals.accumulated}],"+":[Ar,Si(Ar),function(L,P){for(var N=0,$=0,he=P;$<he.length;$+=1){var xe=he[$];N+=xe.evaluate(L)}return N}],"*":[Ar,Si(Ar),function(L,P){for(var N=1,$=0,he=P;$<he.length;$+=1){var xe=he[$];N*=xe.evaluate(L)}return N}],"-":{type:Ar,overloads:[[[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)-$.evaluate(L)}],[[Ar],function(L,P){var N=P[0];return-N.evaluate(L)}]]},"/":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)/$.evaluate(L)}],"%":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)%$.evaluate(L)}],ln2:[Ar,[],function(){return Math.LN2}],pi:[Ar,[],function(){return Math.PI}],e:[Ar,[],function(){return Math.E}],"^":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return Math.pow(N.evaluate(L),$.evaluate(L))}],sqrt:[Ar,[Ar],function(L,P){var N=P[0];return Math.sqrt(N.evaluate(L))}],log10:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))/Math.LN10}],ln:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))}],log2:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))/Math.LN2}],sin:[Ar,[Ar],function(L,P){var N=P[0];return Math.sin(N.evaluate(L))}],cos:[Ar,[Ar],function(L,P){var N=P[0];return Math.cos(N.evaluate(L))}],tan:[Ar,[Ar],function(L,P){var N=P[0];return Math.tan(N.evaluate(L))}],asin:[Ar,[Ar],function(L,P){var N=P[0];return Math.asin(N.evaluate(L))}],acos:[Ar,[Ar],function(L,P){var N=P[0];return Math.acos(N.evaluate(L))}],atan:[Ar,[Ar],function(L,P){var N=P[0];return Math.atan(N.evaluate(L))}],min:[Ar,Si(Ar),function(L,P){return Math.min.apply(Math,P.map(function(N){return N.evaluate(L)}))}],max:[Ar,Si(Ar),function(L,P){return Math.max.apply(Math,P.map(function(N){return N.evaluate(L)}))}],abs:[Ar,[Ar],function(L,P){var N=P[0];return Math.abs(N.evaluate(L))}],round:[Ar,[Ar],function(L,P){var N=P[0],$=N.evaluate(L);return $<0?-Math.round(-$):Math.round($)}],floor:[Ar,[Ar],function(L,P){var N=P[0];return Math.floor(N.evaluate(L))}],ceil:[Ar,[Ar],function(L,P){var N=P[0];return Math.ceil(N.evaluate(L))}],"filter-==":[wn,[Hr,En],function(L,P){var N=P[0],$=P[1];return L.properties()[N.value]===$.value}],"filter-id-==":[wn,[En],function(L,P){var N=P[0];return L.id()===N.value}],"filter-type-==":[wn,[Hr],function(L,P){var N=P[0];return L.geometryType()===N.value}],"filter-<":[wn,[Hr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he<xe}],"filter-id-<":[wn,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$<he}],"filter->":[wn,[Hr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he>xe}],"filter-id->":[wn,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$>he}],"filter-<=":[wn,[Hr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he<=xe}],"filter-id-<=":[wn,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$<=he}],"filter->=":[wn,[Hr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he>=xe}],"filter-id->=":[wn,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$>=he}],"filter-has":[wn,[En],function(L,P){var N=P[0];return N.value in L.properties()}],"filter-has-id":[wn,[],function(L){return L.id()!==null&&L.id()!==void 0}],"filter-type-in":[wn,[va(Hr)],function(L,P){var N=P[0];return N.value.indexOf(L.geometryType())>=0}],"filter-id-in":[wn,[va(En)],function(L,P){var N=P[0];return N.value.indexOf(L.id())>=0}],"filter-in-small":[wn,[Hr,va(En)],function(L,P){var N=P[0],$=P[1];return $.value.indexOf(L.properties()[N.value])>=0}],"filter-in-large":[wn,[Hr,va(En)],function(L,P){var N=P[0],$=P[1];return Mi(L.properties()[N.value],$.value,0,$.value.length-1)}],all:{type:wn,overloads:[[[wn,wn],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)&&$.evaluate(L)}],[Si(wn),function(L,P){for(var N=0,$=P;N<$.length;N+=1){var he=$[N];if(!he.evaluate(L))return!1}return!0}]]},any:{type:wn,overloads:[[[wn,wn],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)||$.evaluate(L)}],[Si(wn),function(L,P){for(var N=0,$=P;N<$.length;N+=1){var he=$[N];if(he.evaluate(L))return!0}return!1}]]},"!":[wn,[wn],function(L,P){var N=P[0];return!N.evaluate(L)}],"is-supported-script":[wn,[Hr],function(L,P){var N=P[0],$=L.globals&&L.globals.isSupportedScript;return $?$(N.evaluate(L)):!0}],upcase:[Hr,[Hr],function(L,P){var N=P[0];return N.evaluate(L).toUpperCase()}],downcase:[Hr,[Hr],function(L,P){var N=P[0];return N.evaluate(L).toLowerCase()}],concat:[Hr,Si(En),function(L,P){return P.map(function(N){return Cl(N.evaluate(L))}).join("")}],"resolved-locale":[Hr,[fa],function(L,P){var N=P[0];return N.evaluate(L).resolvedLocale()}]});function ki(L){return{result:"success",value:L}}function Fi(L){return{result:"error",value:L}}function pi(L){return L["property-type"]==="data-driven"||L["property-type"]==="cross-faded-data-driven"}function Lo(L){return!!L.expression&&L.expression.parameters.indexOf("zoom")>-1}function ho(L){return!!L.expression&&L.expression.interpolated}function ni(L){return L instanceof Number?"number":L instanceof String?"string":L instanceof Boolean?"boolean":Array.isArray(L)?"array":L===null?"null":typeof L}function xa(L){return typeof L=="object"&&L!==null&&!Array.isArray(L)}function Ci(L){return L}function wo(L,P){var N=P.type==="color",$=L.stops&&typeof L.stops[0][0]=="object",he=$||L.property!==void 0,xe=$||!he,Te=L.type||(ho(P)?"exponential":"interval");if(N&&(L=xn({},L),L.stops&&(L.stops=L.stops.map(function(ua){return[ua[0],wi.parse(ua[1])]})),L.default?L.default=wi.parse(L.default):L.default=wi.parse(P.default)),L.colorSpace&&L.colorSpace!=="rgb"&&!Kl[L.colorSpace])throw new Error("Unknown color space: "+L.colorSpace);var Ne,rt,gt;if(Te==="exponential")Ne=Qo;else if(Te==="interval")Ne=Xs;else if(Te==="categorical"){Ne=ks,rt=Object.create(null);for(var bt=0,Gt=L.stops;bt<Gt.length;bt+=1){var lr=Gt[bt];rt[lr[0]]=lr[1]}gt=typeof L.stops[0][0]}else if(Te==="identity")Ne=_l;else throw new Error('Unknown function type "'+Te+'"');if($){for(var ir={},_r=[],Vr=0;Vr<L.stops.length;Vr++){var cn=L.stops[Vr],an=cn[0].zoom;ir[an]===void 0&&(ir[an]={zoom:an,type:L.type,property:L.property,default:L.default,stops:[]},_r.push(an)),ir[an].stops.push([cn[0].value,cn[1]])}for(var Rn=[],An=0,Dn=_r;An<Dn.length;An+=1){var Un=Dn[An];Rn.push([ir[Un].zoom,wo(ir[Un],P)])}var Kn={name:"linear"};return{kind:"composite",interpolationType:Kn,interpolationFactor:_o.interpolationFactor.bind(void 0,Kn),zoomStops:Rn.map(function(ua){return ua[0]}),evaluate:function(Ba,ka){var Da=Ba.zoom;return Qo({stops:Rn,base:L.base},P,Da).evaluate(Da,ka)}}}else if(xe){var ha=Te==="exponential"?{name:"exponential",base:L.base!==void 0?L.base:1}:null;return{kind:"camera",interpolationType:ha,interpolationFactor:_o.interpolationFactor.bind(void 0,ha),zoomStops:L.stops.map(function(ua){return ua[0]}),evaluate:function(ua){var Ba=ua.zoom;return Ne(L,P,Ba,rt,gt)}}}else return{kind:"source",evaluate:function(Ba,ka){var Da=ka&&ka.properties?ka.properties[L.property]:void 0;return Da===void 0?Eo(L.default,P.default):Ne(L,P,Da,rt,gt)}}}function Eo(L,P,N){if(L!==void 0)return L;if(P!==void 0)return P;if(N!==void 0)return N}function ks(L,P,N,$,he){var xe=typeof N===he?$[N]:void 0;return Eo(xe,L.default,P.default)}function Xs(L,P,N){if(ni(N)!=="number")return Eo(L.default,P.default);var $=L.stops.length;if($===1||N<=L.stops[0][0])return L.stops[0][1];if(N>=L.stops[$-1][0])return L.stops[$-1][1];var he=Ys(L.stops.map(function(xe){return xe[0]}),N);return L.stops[he][1]}function Qo(L,P,N){var $=L.base!==void 0?L.base:1;if(ni(N)!=="number")return Eo(L.default,P.default);var he=L.stops.length;if(he===1||N<=L.stops[0][0])return L.stops[0][1];if(N>=L.stops[he-1][0])return L.stops[he-1][1];var xe=Ys(L.stops.map(function(Gt){return Gt[0]}),N),Te=Ns(N,$,L.stops[xe][0],L.stops[xe+1][0]),Ne=L.stops[xe][1],rt=L.stops[xe+1][1],gt=yl[P.type]||Ci;if(L.colorSpace&&L.colorSpace!=="rgb"){var bt=Kl[L.colorSpace];gt=function(Gt,lr){return bt.reverse(bt.interpolate(bt.forward(Gt),bt.forward(lr),Te))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var lr=[],ir=arguments.length;ir--;)lr[ir]=arguments[ir];var _r=Ne.evaluate.apply(void 0,lr),Vr=rt.evaluate.apply(void 0,lr);if(!(_r===void 0||Vr===void 0))return gt(_r,Vr,Te)}}:gt(Ne,rt,Te)}function _l(L,P,N){return P.type==="color"?N=wi.parse(N):P.type==="formatted"?N=qi.fromString(N.toString()):P.type==="resolvedImage"?N=No.fromString(N.toString()):ni(N)!==P.type&&(P.type!=="enum"||!P.values[N])&&(N=void 0),Eo(N,L.default,P.default)}function Ns(L,P,N,$){var he=$-N,xe=L-N;return he===0?0:P===1?xe/he:(Math.pow(P,xe)-1)/(Math.pow(P,he)-1)}var Cs=function(P,N){this.expression=P,this._warningHistory={},this._evaluator=new tl,this._defaultValue=N?pf(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};Cs.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._evaluator.globals=P,this._evaluator.feature=N,this._evaluator.featureState=$,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Te,this.expression.evaluate(this._evaluator)},Cs.prototype.evaluate=function(P,N,$,he,xe,Te){this._evaluator.globals=P,this._evaluator.feature=N||null,this._evaluator.featureState=$||null,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Te||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new Zi("Expected value to be one of "+Object.keys(this._enumValues).map(function(rt){return JSON.stringify(rt)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(rt){return this._warningHistory[rt.message]||(this._warningHistory[rt.message]=!0,typeof console<"u"&&console.warn(rt.message)),this._defaultValue}};function Po(L){return Array.isArray(L)&&L.length>0&&typeof L[0]=="string"&&L[0]in ra}function vu(L,P){var N=new Uo(ra,[],P?Ju(P):void 0),$=N.parse(L,void 0,void 0,void 0,P&&P.type==="string"?{typeAnnotation:"coerce"}:void 0);return $?ki(new Cs($,P)):Fi(N.errors)}var ku=function(P,N){this.kind=P,this._styleExpression=N,this.isStateDependent=P!=="constant"&&!Dl(N.expression)};ku.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,N,$,he,xe,Te)},ku.prototype.evaluate=function(P,N,$,he,xe,Te){return this._styleExpression.evaluate(P,N,$,he,xe,Te)};var Ls=function(P,N,$,he){this.kind=P,this.zoomStops=$,this._styleExpression=N,this.isStateDependent=P!=="camera"&&!Dl(N.expression),this.interpolationType=he};Ls.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,N,$,he,xe,Te)},Ls.prototype.evaluate=function(P,N,$,he,xe,Te){return this._styleExpression.evaluate(P,N,$,he,xe,Te)},Ls.prototype.interpolationFactor=function(P,N,$){return this.interpolationType?_o.interpolationFactor(this.interpolationType,P,N,$):0};function Ku(L,P){if(L=vu(L,P),L.result==="error")return L;var N=L.value.expression,$=Pl(N);if(!$&&!pi(P))return Fi([new Mn("","data expressions not supported")]);var he=Su(N,["zoom"]);if(!he&&!Lo(P))return Fi([new Mn("","zoom expressions not supported")]);var xe=vf(N);if(!xe&&!he)return Fi([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(xe instanceof Mn)return Fi([xe]);if(xe instanceof _o&&!ho(P))return Fi([new Mn("",'"interpolate" expressions cannot be used with this property')]);if(!xe)return ki($?new ku("constant",L.value):new ku("source",L.value));var Te=xe instanceof _o?xe.interpolation:void 0;return ki($?new Ls("camera",L.value,xe.labels,Te):new Ls("composite",L.value,xe.labels,Te))}var pu=function(P,N){this._parameters=P,this._specification=N,xn(this,wo(this._parameters,this._specification))};pu.deserialize=function(P){return new pu(P._parameters,P._specification)},pu.serialize=function(P){return{_parameters:P._parameters,_specification:P._specification}};function uc(L,P){if(xa(L))return new pu(L,P);if(Po(L)){var N=Ku(L,P);if(N.result==="error")throw new Error(N.value.map(function(he){return he.key+": "+he.message}).join(", "));return N.value}else{var $=L;return typeof L=="string"&&P.type==="color"&&($=wi.parse(L)),{kind:"constant",evaluate:function(){return $}}}}function vf(L){var P=null;if(L instanceof nl)P=vf(L.result);else if(L instanceof Ms)for(var N=0,$=L.args;N<$.length;N+=1){var he=$[N];if(P=vf(he),P)break}else(L instanceof Ws||L instanceof _o)&&L.input instanceof Bo&&L.input.name==="zoom"&&(P=L);return P instanceof Mn||L.eachChild(function(xe){var Te=vf(xe);Te instanceof Mn?P=Te:!P&&Te?P=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&Te&&P!==Te&&(P=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}function Ju(L){var P={color:Gn,string:Hr,number:Ar,enum:Hr,boolean:wn,formatted:_a,resolvedImage:Aa};return L.type==="array"?va(P[L.value]||En,L.length):P[L.type]}function pf(L){return L.type==="color"&&xa(L.default)?new wi(0,0,0,0):L.type==="color"?wi.parse(L.default)||null:L.default===void 0?null:L.default}function Zs(L){var P=L.key,N=L.value,$=L.valueSpec||{},he=L.objectElementValidators||{},xe=L.style,Te=L.styleSpec,Ne=[],rt=ni(N);if(rt!=="object")return[new mr(P,N,"object expected, "+rt+" found")];for(var gt in N){var bt=gt.split(".")[0],Gt=$[bt]||$["*"],lr=void 0;if(he[bt])lr=he[bt];else if($[bt])lr=_i;else if(he["*"])lr=he["*"];else if($["*"])lr=_i;else{Ne.push(new mr(P,N[gt],'unknown property "'+gt+'"'));continue}Ne=Ne.concat(lr({key:(P&&P+".")+gt,value:N[gt],valueSpec:Gt,style:xe,styleSpec:Te,object:N,objectKey:gt},N))}for(var ir in $)he[ir]||$[ir].required&&$[ir].default===void 0&&N[ir]===void 0&&Ne.push(new mr(P,N,'missing required property "'+ir+'"'));return Ne}function Pf(L){var P=L.value,N=L.valueSpec,$=L.style,he=L.styleSpec,xe=L.key,Te=L.arrayElementValidator||_i;if(ni(P)!=="array")return[new mr(xe,P,"array expected, "+ni(P)+" found")];if(N.length&&P.length!==N.length)return[new mr(xe,P,"array length "+N.length+" expected, length "+P.length+" found")];if(N["min-length"]&&P.length<N["min-length"])return[new mr(xe,P,"array length at least "+N["min-length"]+" expected, length "+P.length+" found")];var Ne={type:N.value,values:N.values};he.$version<7&&(Ne.function=N.function),ni(N.value)==="object"&&(Ne=N.value);for(var rt=[],gt=0;gt<P.length;gt++)rt=rt.concat(Te({array:P,arrayIndex:gt,value:P[gt],valueSpec:Ne,style:$,styleSpec:he,key:xe+"["+gt+"]"}));return rt}function df(L){var P=L.key,N=L.value,$=L.valueSpec,he=ni(N);return he==="number"&&N!==N&&(he="NaN"),he!=="number"?[new mr(P,N,"number expected, "+he+" found")]:"minimum"in $&&N<$.minimum?[new mr(P,N,N+" is less than the minimum value "+$.minimum)]:"maximum"in $&&N>$.maximum?[new mr(P,N,N+" is greater than the maximum value "+$.maximum)]:[]}function gf(L){var P=L.valueSpec,N=sn(L.value.type),$,he={},xe,Te,Ne=N!=="categorical"&&L.value.property===void 0,rt=!Ne,gt=ni(L.value.stops)==="array"&&ni(L.value.stops[0])==="array"&&ni(L.value.stops[0][0])==="object",bt=Zs({key:L.key,value:L.value,valueSpec:L.styleSpec.function,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{stops:Gt,default:_r}});return N==="identity"&&Ne&&bt.push(new mr(L.key,L.value,'missing required property "property"')),N!=="identity"&&!L.value.stops&&bt.push(new mr(L.key,L.value,'missing required property "stops"')),N==="exponential"&&L.valueSpec.expression&&!ho(L.valueSpec)&&bt.push(new mr(L.key,L.value,"exponential functions not supported")),L.styleSpec.$version>=8&&(rt&&!pi(L.valueSpec)?bt.push(new mr(L.key,L.value,"property functions not supported")):Ne&&!Lo(L.valueSpec)&&bt.push(new mr(L.key,L.value,"zoom functions not supported"))),(N==="categorical"||gt)&&L.value.property===void 0&&bt.push(new mr(L.key,L.value,'"property" property is required')),bt;function Gt(Vr){if(N==="identity")return[new mr(Vr.key,Vr.value,'identity function may not have a "stops" property')];var cn=[],an=Vr.value;return cn=cn.concat(Pf({key:Vr.key,value:an,valueSpec:Vr.valueSpec,style:Vr.style,styleSpec:Vr.styleSpec,arrayElementValidator:lr})),ni(an)==="array"&&an.length===0&&cn.push(new mr(Vr.key,an,"array must have at least one stop")),cn}function lr(Vr){var cn=[],an=Vr.value,Rn=Vr.key;if(ni(an)!=="array")return[new mr(Rn,an,"array expected, "+ni(an)+" found")];if(an.length!==2)return[new mr(Rn,an,"array length 2 expected, length "+an.length+" found")];if(gt){if(ni(an[0])!=="object")return[new mr(Rn,an,"object expected, "+ni(an[0])+" found")];if(an[0].zoom===void 0)return[new mr(Rn,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new mr(Rn,an,"object stop key must have value")];if(Te&&Te>sn(an[0].zoom))return[new mr(Rn,an[0].zoom,"stop zoom values must appear in ascending order")];sn(an[0].zoom)!==Te&&(Te=sn(an[0].zoom),xe=void 0,he={}),cn=cn.concat(Zs({key:Rn+"[0]",value:an[0],valueSpec:{zoom:{}},style:Vr.style,styleSpec:Vr.styleSpec,objectElementValidators:{zoom:df,value:ir}}))}else cn=cn.concat(ir({key:Rn+"[0]",value:an[0],valueSpec:{},style:Vr.style,styleSpec:Vr.styleSpec},an));return Po(Cn(an[1]))?cn.concat([new mr(Rn+"[1]",an[1],"expressions are not allowed in function stops.")]):cn.concat(_i({key:Rn+"[1]",value:an[1],valueSpec:P,style:Vr.style,styleSpec:Vr.styleSpec}))}function ir(Vr,cn){var an=ni(Vr.value),Rn=sn(Vr.value),An=Vr.value!==null?Vr.value:cn;if(!$)$=an;else if(an!==$)return[new mr(Vr.key,An,an+" stop domain type must match previous stop domain type "+$)];if(an!=="number"&&an!=="string"&&an!=="boolean")return[new mr(Vr.key,An,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&N!=="categorical"){var Dn="number expected, "+an+" found";return pi(P)&&N===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mr(Vr.key,An,Dn)]}return N==="categorical"&&an==="number"&&(!isFinite(Rn)||Math.floor(Rn)!==Rn)?[new mr(Vr.key,An,"integer expected, found "+Rn)]:N!=="categorical"&&an==="number"&&xe!==void 0&&Rn<xe?[new mr(Vr.key,An,"stop domain values must appear in ascending order")]:(xe=Rn,N==="categorical"&&Rn in he?[new mr(Vr.key,An,"stop domain values must be unique")]:(he[Rn]=!0,[]))}function _r(Vr){return _i({key:Vr.key,value:Vr.value,valueSpec:P,style:Vr.style,styleSpec:Vr.styleSpec})}}function $o(L){var P=(L.expressionContext==="property"?Ku:vu)(Cn(L.value),L.valueSpec);if(P.result==="error")return P.value.map(function($){return new mr(""+L.key+$.key,L.value,$.message)});var N=P.value.expression||P.value._styleExpression.expression;if(L.expressionContext==="property"&&L.propertyKey==="text-font"&&!N.outputDefined())return[new mr(L.key,L.value,'Invalid data expression for "'+L.propertyKey+'". Output values must be contained as literals within the expression.')];if(L.expressionContext==="property"&&L.propertyType==="layout"&&!Dl(N))return[new mr(L.key,L.value,'"feature-state" data expressions are not supported with layout properties.')];if(L.expressionContext==="filter"&&!Dl(N))return[new mr(L.key,L.value,'"feature-state" data expressions are not supported with filters.')];if(L.expressionContext&&L.expressionContext.indexOf("cluster")===0){if(!Su(N,["zoom","feature-state"]))return[new mr(L.key,L.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(L.expressionContext==="cluster-initial"&&!Pl(N))return[new mr(L.key,L.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yf(L){var P=L.value,N=L.key,$=ni(P);return $!=="boolean"?[new mr(N,P,"boolean expected, "+$+" found")]:[]}function Yf(L){var P=L.key,N=L.value,$=ni(N);return $!=="string"?[new mr(P,N,"color expected, "+$+" found")]:_u(N)===null?[new mr(P,N,'color expected, "'+N+'" found')]:[]}function Bs(L){var P=L.key,N=L.value,$=L.valueSpec,he=[];return Array.isArray($.values)?$.values.indexOf(sn(N))===-1&&he.push(new mr(P,N,"expected one of ["+$.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys($.values).indexOf(sn(N))===-1&&he.push(new mr(P,N,"expected one of ["+Object.keys($.values).join(", ")+"], "+JSON.stringify(N)+" found")),he}function Qu(L){if(L===!0||L===!1)return!0;if(!Array.isArray(L)||L.length===0)return!1;switch(L[0]){case"has":return L.length>=2&&L[1]!=="$id"&&L[1]!=="$type";case"in":return L.length>=3&&(typeof L[1]!="string"||Array.isArray(L[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return L.length!==3||Array.isArray(L[1])||Array.isArray(L[2]);case"any":case"all":for(var P=0,N=L.slice(1);P<N.length;P+=1){var $=N[P];if(!Qu($)&&typeof $!="boolean")return!1}return!0;default:return!0}}var $u={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mf(L){if(L==null)return{filter:function(){return!0},needGeometry:!1};Qu(L)||(L=nt(L));var P=vu(L,$u);if(P.result==="error")throw new Error(P.value.map(function($){return $.key+": "+$.message}).join(", "));var N=je(L);return{filter:function($,he,xe){return P.value.evaluate($,he,{},xe)},needGeometry:N}}function ze(L,P){return L<P?-1:L>P?1:0}function je(L){if(!Array.isArray(L))return!1;if(L[0]==="within")return!0;for(var P=1;P<L.length;P++)if(je(L[P]))return!0;return!1}function nt(L){if(!L)return!0;var P=L[0];if(L.length<=1)return P!=="any";var N=P==="=="?ht(L[1],L[2],"=="):P==="!="?gr(ht(L[1],L[2],"==")):P==="<"||P===">"||P==="<="||P===">="?ht(L[1],L[2],P):P==="any"?Et(L.slice(1)):P==="all"?["all"].concat(L.slice(1).map(nt)):P==="none"?["all"].concat(L.slice(1).map(nt).map(gr)):P==="in"?At(L[1],L.slice(2)):P==="!in"?gr(At(L[1],L.slice(2))):P==="has"?It(L[1]):P==="!has"?gr(It(L[1])):P==="within"?L:!0;return N}function ht(L,P,N){switch(L){case"$type":return["filter-type-"+N,P];case"$id":return["filter-id-"+N,P];default:return["filter-"+N,L,P]}}function Et(L){return["any"].concat(L.map(nt))}function At(L,P){if(P.length===0)return!1;switch(L){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(N){return typeof N!=typeof P[0]})?["filter-in-large",L,["literal",P.sort(ze)]]:["filter-in-small",L,["literal",P]]}}function It(L){switch(L){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",L]}}function gr(L){return["!",L]}function br(L){return Qu(Cn(L.value))?$o(xn({},L,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pr(L)}function pr(L){var P=L.value,N=L.key;if(ni(P)!=="array")return[new mr(N,P,"array expected, "+ni(P)+" found")];var $=L.styleSpec,he,xe=[];if(P.length<1)return[new mr(N,P,"filter array must have at least 1 element")];switch(xe=xe.concat(Bs({key:N+"[0]",value:P[0],valueSpec:$.filter_operator,style:L.style,styleSpec:L.styleSpec})),sn(P[0])){case"<":case"<=":case">":case">=":P.length>=2&&sn(P[1])==="$type"&&xe.push(new mr(N,P,'"$type" cannot be use with operator "'+P[0]+'"'));case"==":case"!=":P.length!==3&&xe.push(new mr(N,P,'filter array for operator "'+P[0]+'" must have 3 elements'));case"in":case"!in":P.length>=2&&(he=ni(P[1]),he!=="string"&&xe.push(new mr(N+"[1]",P[1],"string expected, "+he+" found")));for(var Te=2;Te<P.length;Te++)he=ni(P[Te]),sn(P[1])==="$type"?xe=xe.concat(Bs({key:N+"["+Te+"]",value:P[Te],valueSpec:$.geometry_type,style:L.style,styleSpec:L.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&xe.push(new mr(N+"["+Te+"]",P[Te],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<P.length;Ne++)xe=xe.concat(pr({key:N+"["+Ne+"]",value:P[Ne],style:L.style,styleSpec:L.styleSpec}));break;case"has":case"!has":he=ni(P[1]),P.length!==2?xe.push(new mr(N,P,'filter array for "'+P[0]+'" operator must have 2 elements')):he!=="string"&&xe.push(new mr(N+"[1]",P[1],"string expected, "+he+" found"));break;case"within":he=ni(P[1]),P.length!==2?xe.push(new mr(N,P,'filter array for "'+P[0]+'" operator must have 2 elements')):he!=="object"&&xe.push(new mr(N+"[1]",P[1],"object expected, "+he+" found"));break}return xe}function Mr(L,P){var N=L.key,$=L.style,he=L.styleSpec,xe=L.value,Te=L.objectKey,Ne=he[P+"_"+L.layerType];if(!Ne)return[];var rt=Te.match(/^(.*)-transition$/);if(P==="paint"&&rt&&Ne[rt[1]]&&Ne[rt[1]].transition)return _i({key:N,value:xe,valueSpec:he.transition,style:$,styleSpec:he});var gt=L.valueSpec||Ne[Te];if(!gt)return[new mr(N,xe,'unknown property "'+Te+'"')];var bt;if(ni(xe)==="string"&&pi(gt)&&!gt.tokens&&(bt=/^{([^}]+)}$/.exec(xe)))return[new mr(N,xe,'"'+Te+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Gt=[];return L.layerType==="symbol"&&(Te==="text-field"&&$&&!$.glyphs&&Gt.push(new mr(N,xe,'use of "text-field" requires a style "glyphs" property')),Te==="text-font"&&xa(Cn(xe))&&sn(xe.type)==="identity"&&Gt.push(new mr(N,xe,'"text-font" does not support identity functions'))),Gt.concat(_i({key:L.key,value:xe,valueSpec:gt,style:$,styleSpec:he,expressionContext:"property",propertyType:P,propertyKey:Te}))}function Or(L){return Mr(L,"paint")}function $r(L){return Mr(L,"layout")}function on(L){var P=[],N=L.value,$=L.key,he=L.style,xe=L.styleSpec;!N.type&&!N.ref&&P.push(new mr($,N,'either "type" or "ref" is required'));var Te=sn(N.type),Ne=sn(N.ref);if(N.id)for(var rt=sn(N.id),gt=0;gt<L.arrayIndex;gt++){var bt=he.layers[gt];sn(bt.id)===rt&&P.push(new mr($,N.id,'duplicate layer id "'+N.id+'", previously used at line '+bt.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(_r){_r in N&&P.push(new mr($,N[_r],'"'+_r+'" is prohibited for ref layers'))});var Gt;he.layers.forEach(function(_r){sn(_r.id)===Ne&&(Gt=_r)}),Gt?Gt.ref?P.push(new mr($,N.ref,"ref cannot reference another ref layer")):Te=sn(Gt.type):P.push(new mr($,N.ref,'ref layer "'+Ne+'" not found'))}else if(Te!=="background")if(!N.source)P.push(new mr($,N,'missing required property "source"'));else{var lr=he.sources&&he.sources[N.source],ir=lr&&sn(lr.type);lr?ir==="vector"&&Te==="raster"?P.push(new mr($,N.source,'layer "'+N.id+'" requires a raster source')):ir==="raster"&&Te!=="raster"?P.push(new mr($,N.source,'layer "'+N.id+'" requires a vector source')):ir==="vector"&&!N["source-layer"]?P.push(new mr($,N,'layer "'+N.id+'" must specify a "source-layer"')):ir==="raster-dem"&&Te!=="hillshade"?P.push(new mr($,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):Te==="line"&&N.paint&&N.paint["line-gradient"]&&(ir!=="geojson"||!lr.lineMetrics)&&P.push(new mr($,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new mr($,N.source,'source "'+N.source+'" not found'))}return P=P.concat(Zs({key:$,value:N,valueSpec:xe.layer,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _i({key:$+".type",value:N.type,valueSpec:xe.layer.type,style:L.style,styleSpec:L.styleSpec,object:N,objectKey:"type"})},filter:br,layout:function(Vr){return Zs({layer:N,key:Vr.key,value:Vr.value,style:Vr.style,styleSpec:Vr.styleSpec,objectElementValidators:{"*":function(an){return $r(xn({layerType:Te},an))}}})},paint:function(Vr){return Zs({layer:N,key:Vr.key,value:Vr.value,style:Vr.style,styleSpec:Vr.styleSpec,objectElementValidators:{"*":function(an){return Or(xn({layerType:Te},an))}}})}}})),P}function Sn(L){var P=L.value,N=L.key,$=ni(P);return $!=="string"?[new mr(N,P,"string expected, "+$+" found")]:[]}var Nn={promoteId:wa};function Qn(L){var P=L.value,N=L.key,$=L.styleSpec,he=L.style;if(!P.type)return[new mr(N,P,'"type" is required')];var xe=sn(P.type),Te;switch(xe){case"vector":case"raster":case"raster-dem":return Te=Zs({key:N,value:P,valueSpec:$["source_"+xe.replace("-","_")],style:L.style,styleSpec:$,objectElementValidators:Nn}),Te;case"geojson":if(Te=Zs({key:N,value:P,valueSpec:$.source_geojson,style:he,styleSpec:$,objectElementValidators:Nn}),P.cluster)for(var Ne in P.clusterProperties){var rt=P.clusterProperties[Ne],gt=rt[0],bt=rt[1],Gt=typeof gt=="string"?[gt,["accumulated"],["get",Ne]]:gt;Te.push.apply(Te,$o({key:N+"."+Ne+".map",value:bt,expressionContext:"cluster-map"})),Te.push.apply(Te,$o({key:N+"."+Ne+".reduce",value:Gt,expressionContext:"cluster-reduce"}))}return Te;case"video":return Zs({key:N,value:P,valueSpec:$.source_video,style:he,styleSpec:$});case"image":return Zs({key:N,value:P,valueSpec:$.source_image,style:he,styleSpec:$});case"canvas":return[new mr(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bs({key:N+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:$})}}function wa(L){var P=L.key,N=L.value;if(ni(N)==="string")return Sn({key:P,value:N});var $=[];for(var he in N)$.push.apply($,Sn({key:P+"."+he,value:N[he]}));return $}function Ma(L){var P=L.value,N=L.styleSpec,$=N.light,he=L.style,xe=[],Te=ni(P);if(P===void 0)return xe;if(Te!=="object")return xe=xe.concat([new mr("light",P,"object expected, "+Te+" found")]),xe;for(var Ne in P){var rt=Ne.match(/^(.*)-transition$/);rt&&$[rt[1]]&&$[rt[1]].transition?xe=xe.concat(_i({key:Ne,value:P[Ne],valueSpec:N.transition,style:he,styleSpec:N})):$[Ne]?xe=xe.concat(_i({key:Ne,value:P[Ne],valueSpec:$[Ne],style:he,styleSpec:N})):xe=xe.concat([new mr(Ne,P[Ne],'unknown property "'+Ne+'"')])}return xe}function ri(L){return Sn(L).length===0?[]:$o(L)}function Qa(L){return Sn(L).length===0?[]:$o(L)}var si={"*":function(){return[]},array:Pf,boolean:yf,number:df,color:Yf,constants:un,enum:Bs,filter:br,function:gf,layer:on,object:Zs,source:Qn,light:Ma,string:Sn,formatted:ri,resolvedImage:Qa};function _i(L){var P=L.value,N=L.valueSpec,$=L.styleSpec;if(N.expression&&xa(sn(P)))return gf(L);if(N.expression&&Po(Cn(P)))return $o(L);if(N.type&&si[N.type])return si[N.type](L);var he=Zs(xn({},L,{valueSpec:N.type?$[N.type]:N}));return he}function mo(L){var P=L.value,N=L.key,$=Sn(L);return $.length||(P.indexOf("{fontstack}")===-1&&$.push(new mr(N,P,'"glyphs" url must include a "{fontstack}" token')),P.indexOf("{range}")===-1&&$.push(new mr(N,P,'"glyphs" url must include a "{range}" token'))),$}function fi(L,P){P===void 0&&(P=Xt);var N=[];return N=N.concat(_i({key:"",value:L,valueSpec:P.$root,styleSpec:P,style:L,objectElementValidators:{glyphs:mo,"*":function(){return[]}}})),L.constants&&(N=N.concat(un({key:"constants",value:L.constants,style:L,styleSpec:P}))),to(N)}fi.source=To(Qn),fi.light=To(Ma),fi.layer=To(on),fi.filter=To(br),fi.paintProperty=To(Or),fi.layoutProperty=To($r);function to(L){return[].concat(L).sort(function(P,N){return P.line-N.line})}function To(L){return function(){for(var P=[],N=arguments.length;N--;)P[N]=arguments[N];return to(L.apply(this,P))}}var Io=fi,Li=Io.light,zi=Io.paintProperty,Ps=Io.layoutProperty;function ko(L,P){var N=!1;if(P&&P.length)for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];L.fire(new Sr(new Error(xe.message))),N=!0}return N}var Yo=le,ls=3;function le(L,P,N){var $=this.cells=[];if(L instanceof ArrayBuffer){this.arrayBuffer=L;var he=new Int32Array(this.arrayBuffer);L=he[0],P=he[1],N=he[2],this.d=P+2*N;for(var xe=0;xe<this.d*this.d;xe++){var Te=he[ls+xe],Ne=he[ls+xe+1];$.push(Te===Ne?null:he.subarray(Te,Ne))}var rt=he[ls+$.length],gt=he[ls+$.length+1];this.keys=he.subarray(rt,gt),this.bboxes=he.subarray(gt),this.insert=this._insertReadonly}else{this.d=P+2*N;for(var bt=0;bt<this.d*this.d;bt++)$.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=L,this.padding=N,this.scale=P/L,this.uid=0;var Gt=N/P*L;this.min=-Gt,this.max=L+Gt}le.prototype.insert=function(L,P,N,$,he){this._forEachCell(P,N,$,he,this._insertCell,this.uid++),this.keys.push(L),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push($),this.bboxes.push(he)},le.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},le.prototype._insertCell=function(L,P,N,$,he,xe){this.cells[he].push(xe)},le.prototype.query=function(L,P,N,$,he){var xe=this.min,Te=this.max;if(L<=xe&&P<=xe&&Te<=N&&Te<=$&&!he)return Array.prototype.slice.call(this.keys);var Ne=[],rt={};return this._forEachCell(L,P,N,$,this._queryCell,Ne,rt,he),Ne},le.prototype._queryCell=function(L,P,N,$,he,xe,Te,Ne){var rt=this.cells[he];if(rt!==null)for(var gt=this.keys,bt=this.bboxes,Gt=0;Gt<rt.length;Gt++){var lr=rt[Gt];if(Te[lr]===void 0){var ir=lr*4;(Ne?Ne(bt[ir+0],bt[ir+1],bt[ir+2],bt[ir+3]):L<=bt[ir+2]&&P<=bt[ir+3]&&N>=bt[ir+0]&&$>=bt[ir+1])?(Te[lr]=!0,xe.push(gt[lr])):Te[lr]=!1}}},le.prototype._forEachCell=function(L,P,N,$,he,xe,Te,Ne){for(var rt=this._convertToCellCoord(L),gt=this._convertToCellCoord(P),bt=this._convertToCellCoord(N),Gt=this._convertToCellCoord($),lr=rt;lr<=bt;lr++)for(var ir=gt;ir<=Gt;ir++){var _r=this.d*ir+lr;if(!(Ne&&!Ne(this._convertFromCellCoord(lr),this._convertFromCellCoord(ir),this._convertFromCellCoord(lr+1),this._convertFromCellCoord(ir+1)))&&he.call(this,L,P,N,$,_r,xe,Te,Ne))return}},le.prototype._convertFromCellCoord=function(L){return(L-this.padding)/this.scale},le.prototype._convertToCellCoord=function(L){return Math.max(0,Math.min(this.d-1,Math.floor(L*this.scale)+this.padding))},le.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var L=this.cells,P=ls+this.cells.length+1+1,N=0,$=0;$<this.cells.length;$++)N+=this.cells[$].length;var he=new Int32Array(P+N+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var xe=P,Te=0;Te<L.length;Te++){var Ne=L[Te];he[ls+Te]=xe,he.set(Ne,xe),xe+=Ne.length}return he[ls+L.length]=xe,he.set(this.keys,xe),xe+=this.keys.length,he[ls+L.length+1]=xe,he.set(this.bboxes,xe),xe+=this.bboxes.length,he.buffer};var we=self.ImageData,De=self.ImageBitmap,Ue={};function Be(L,P,N){N===void 0&&(N={}),Object.defineProperty(P,"_classRegistryKey",{value:L,writeable:!1}),Ue[L]={klass:P,omit:N.omit||[],shallow:N.shallow||[]}}Be("Object",Object),Yo.serialize=function(P,N){var $=P.toArrayBuffer();return N&&N.push($),{buffer:$}},Yo.deserialize=function(P){return new Yo(P.buffer)},Be("Grid",Yo),Be("Color",wi),Be("Error",Error),Be("ResolvedImage",No),Be("StylePropertyFunction",pu),Be("StyleExpression",Cs,{omit:["_evaluator"]}),Be("ZoomDependentExpression",Ls),Be("ZoomConstantExpression",ku),Be("CompoundExpression",Bo,{omit:["_evaluate"]});for(var $e in ra)ra[$e]._classRegistryKey||Be("Expression_"+$e,ra[$e]);function Mt(L){return L&&typeof ArrayBuffer<"u"&&(L instanceof ArrayBuffer||L.constructor&&L.constructor.name==="ArrayBuffer")}function mt(L){return De&&L instanceof De}function Ot(L,P){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp)return L;if(Mt(L)||mt(L))return P&&P.push(L),L;if(ArrayBuffer.isView(L)){var N=L;return P&&P.push(N.buffer),N}if(L instanceof we)return P&&P.push(L.data.buffer),L;if(Array.isArray(L)){for(var $=[],he=0,xe=L;he<xe.length;he+=1){var Te=xe[he];$.push(Ot(Te,P))}return $}if(typeof L=="object"){var Ne=L.constructor,rt=Ne._classRegistryKey;if(!rt)throw new Error("can't serialize object of unregistered class");var gt=Ne.serialize?Ne.serialize(L,P):{};if(!Ne.serialize){for(var bt in L)if(!!L.hasOwnProperty(bt)&&!(Ue[rt].omit.indexOf(bt)>=0)){var Gt=L[bt];gt[bt]=Ue[rt].shallow.indexOf(bt)>=0?Gt:Ot(Gt,P)}L instanceof Error&&(gt.message=L.message)}if(gt.$name)throw new Error("$name property is reserved for worker serialization logic.");return rt!=="Object"&&(gt.$name=rt),gt}throw new Error("can't serialize object of type "+typeof L)}function er(L){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp||Mt(L)||mt(L)||ArrayBuffer.isView(L)||L instanceof we)return L;if(Array.isArray(L))return L.map(er);if(typeof L=="object"){var P=L.$name||"Object",N=Ue[P],$=N.klass;if(!$)throw new Error("can't deserialize unregistered class "+P);if($.deserialize)return $.deserialize(L);for(var he=Object.create($.prototype),xe=0,Te=Object.keys(L);xe<Te.length;xe+=1){var Ne=Te[xe];if(Ne!=="$name"){var rt=L[Ne];he[Ne]=Ue[P].shallow.indexOf(Ne)>=0?rt:er(rt)}}return he}throw new Error("can't deserialize object of type "+typeof L)}var or=function(){this.first=!0};or.prototype.update=function(P,N){var $=Math.floor(P);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=P,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=N),P!==this.lastZoom?(this.lastZoom=P,this.lastFloorZoom=$,!0):!1)};var sr={"Latin-1 Supplement":function(L){return L>=128&&L<=255},Arabic:function(L){return L>=1536&&L<=1791},"Arabic Supplement":function(L){return L>=1872&&L<=1919},"Arabic Extended-A":function(L){return L>=2208&&L<=2303},"Hangul Jamo":function(L){return L>=4352&&L<=4607},"Unified Canadian Aboriginal Syllabics":function(L){return L>=5120&&L<=5759},Khmer:function(L){return L>=6016&&L<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(L){return L>=6320&&L<=6399},"General Punctuation":function(L){return L>=8192&&L<=8303},"Letterlike Symbols":function(L){return L>=8448&&L<=8527},"Number Forms":function(L){return L>=8528&&L<=8591},"Miscellaneous Technical":function(L){return L>=8960&&L<=9215},"Control Pictures":function(L){return L>=9216&&L<=9279},"Optical Character Recognition":function(L){return L>=9280&&L<=9311},"Enclosed Alphanumerics":function(L){return L>=9312&&L<=9471},"Geometric Shapes":function(L){return L>=9632&&L<=9727},"Miscellaneous Symbols":function(L){return L>=9728&&L<=9983},"Miscellaneous Symbols and Arrows":function(L){return L>=11008&&L<=11263},"CJK Radicals Supplement":function(L){return L>=11904&&L<=12031},"Kangxi Radicals":function(L){return L>=12032&&L<=12255},"Ideographic Description Characters":function(L){return L>=12272&&L<=12287},"CJK Symbols and Punctuation":function(L){return L>=12288&&L<=12351},Hiragana:function(L){return L>=12352&&L<=12447},Katakana:function(L){return L>=12448&&L<=12543},Bopomofo:function(L){return L>=12544&&L<=12591},"Hangul Compatibility Jamo":function(L){return L>=12592&&L<=12687},Kanbun:function(L){return L>=12688&&L<=12703},"Bopomofo Extended":function(L){return L>=12704&&L<=12735},"CJK Strokes":function(L){return L>=12736&&L<=12783},"Katakana Phonetic Extensions":function(L){return L>=12784&&L<=12799},"Enclosed CJK Letters and Months":function(L){return L>=12800&&L<=13055},"CJK Compatibility":function(L){return L>=13056&&L<=13311},"CJK Unified Ideographs Extension A":function(L){return L>=13312&&L<=19903},"Yijing Hexagram Symbols":function(L){return L>=19904&&L<=19967},"CJK Unified Ideographs":function(L){return L>=19968&&L<=40959},"Yi Syllables":function(L){return L>=40960&&L<=42127},"Yi Radicals":function(L){return L>=42128&&L<=42191},"Hangul Jamo Extended-A":function(L){return L>=43360&&L<=43391},"Hangul Syllables":function(L){return L>=44032&&L<=55215},"Hangul Jamo Extended-B":function(L){return L>=55216&&L<=55295},"Private Use Area":function(L){return L>=57344&&L<=63743},"CJK Compatibility Ideographs":function(L){return L>=63744&&L<=64255},"Arabic Presentation Forms-A":function(L){return L>=64336&&L<=65023},"Vertical Forms":function(L){return L>=65040&&L<=65055},"CJK Compatibility Forms":function(L){return L>=65072&&L<=65103},"Small Form Variants":function(L){return L>=65104&&L<=65135},"Arabic Presentation Forms-B":function(L){return L>=65136&&L<=65279},"Halfwidth and Fullwidth Forms":function(L){return L>=65280&&L<=65519}};function Lr(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(Wr($.charCodeAt(0)))return!0}return!1}function nn(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(!pn($.charCodeAt(0)))return!1}return!0}function pn(L){return!(sr.Arabic(L)||sr["Arabic Supplement"](L)||sr["Arabic Extended-A"](L)||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L))}function zr(L){return L<11904?!1:!!(sr["Bopomofo Extended"](L)||sr.Bopomofo(L)||sr["CJK Compatibility Forms"](L)||sr["CJK Compatibility Ideographs"](L)||sr["CJK Compatibility"](L)||sr["CJK Radicals Supplement"](L)||sr["CJK Strokes"](L)||sr["CJK Symbols and Punctuation"](L)||sr["CJK Unified Ideographs Extension A"](L)||sr["CJK Unified Ideographs"](L)||sr["Enclosed CJK Letters and Months"](L)||sr["Halfwidth and Fullwidth Forms"](L)||sr.Hiragana(L)||sr["Ideographic Description Characters"](L)||sr["Kangxi Radicals"](L)||sr["Katakana Phonetic Extensions"](L)||sr.Katakana(L)||sr["Vertical Forms"](L)||sr["Yi Radicals"](L)||sr["Yi Syllables"](L))}function Wr(L){return L===746||L===747?!0:L<4352?!1:!!(sr["Bopomofo Extended"](L)||sr.Bopomofo(L)||sr["CJK Compatibility Forms"](L)&&!(L>=65097&&L<=65103)||sr["CJK Compatibility Ideographs"](L)||sr["CJK Compatibility"](L)||sr["CJK Radicals Supplement"](L)||sr["CJK Strokes"](L)||sr["CJK Symbols and Punctuation"](L)&&!(L>=12296&&L<=12305)&&!(L>=12308&&L<=12319)&&L!==12336||sr["CJK Unified Ideographs Extension A"](L)||sr["CJK Unified Ideographs"](L)||sr["Enclosed CJK Letters and Months"](L)||sr["Hangul Compatibility Jamo"](L)||sr["Hangul Jamo Extended-A"](L)||sr["Hangul Jamo Extended-B"](L)||sr["Hangul Jamo"](L)||sr["Hangul Syllables"](L)||sr.Hiragana(L)||sr["Ideographic Description Characters"](L)||sr.Kanbun(L)||sr["Kangxi Radicals"](L)||sr["Katakana Phonetic Extensions"](L)||sr.Katakana(L)&&L!==12540||sr["Halfwidth and Fullwidth Forms"](L)&&L!==65288&&L!==65289&&L!==65293&&!(L>=65306&&L<=65310)&&L!==65339&&L!==65341&&L!==65343&&!(L>=65371&&L<=65503)&&L!==65507&&!(L>=65512&&L<=65519)||sr["Small Form Variants"](L)&&!(L>=65112&&L<=65118)&&!(L>=65123&&L<=65126)||sr["Unified Canadian Aboriginal Syllabics"](L)||sr["Unified Canadian Aboriginal Syllabics Extended"](L)||sr["Vertical Forms"](L)||sr["Yijing Hexagram Symbols"](L)||sr["Yi Syllables"](L)||sr["Yi Radicals"](L))}function qr(L){return!!(sr["Latin-1 Supplement"](L)&&(L===167||L===169||L===174||L===177||L===188||L===189||L===190||L===215||L===247)||sr["General Punctuation"](L)&&(L===8214||L===8224||L===8225||L===8240||L===8241||L===8251||L===8252||L===8258||L===8263||L===8264||L===8265||L===8273)||sr["Letterlike Symbols"](L)||sr["Number Forms"](L)||sr["Miscellaneous Technical"](L)&&(L>=8960&&L<=8967||L>=8972&&L<=8991||L>=8996&&L<=9e3||L===9003||L>=9085&&L<=9114||L>=9150&&L<=9165||L===9167||L>=9169&&L<=9179||L>=9186&&L<=9215)||sr["Control Pictures"](L)&&L!==9251||sr["Optical Character Recognition"](L)||sr["Enclosed Alphanumerics"](L)||sr["Geometric Shapes"](L)||sr["Miscellaneous Symbols"](L)&&!(L>=9754&&L<=9759)||sr["Miscellaneous Symbols and Arrows"](L)&&(L>=11026&&L<=11055||L>=11088&&L<=11097||L>=11192&&L<=11243)||sr["CJK Symbols and Punctuation"](L)||sr.Katakana(L)||sr["Private Use Area"](L)||sr["CJK Compatibility Forms"](L)||sr["Small Form Variants"](L)||sr["Halfwidth and Fullwidth Forms"](L)||L===8734||L===8756||L===8757||L>=9984&&L<=10087||L>=10102&&L<=10131||L===65532||L===65533)}function fn(L){return!(Wr(L)||qr(L))}function hn(L){return sr.Arabic(L)||sr["Arabic Supplement"](L)||sr["Arabic Extended-A"](L)||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L)}function tn(L){return L>=1424&&L<=2303||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L)}function jn(L,P){return!(!P&&tn(L)||L>=2304&&L<=3583||L>=3840&&L<=4255||sr.Khmer(L))}function la(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(tn($.charCodeAt(0)))return!0}return!1}function Ea(L,P){for(var N=0,$=L;N<$.length;N+=1){var he=$[N];if(!jn(he.charCodeAt(0),P))return!1}return!0}var ca={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ra=null,pa=ca.unavailable,ja=null,Oa=function(L){L&&typeof L=="string"&&L.indexOf("NetworkError")>-1&&(pa=ca.error),Ra&&Ra(L)};function ii(){Ei.fire(new Rr("pluginStateChange",{pluginStatus:pa,pluginURL:ja}))}var Ei=new Pr,Ao=function(){return pa},ji=function(L){return L({pluginStatus:pa,pluginURL:ja}),Ei.on("pluginStateChange",L),L},ga=function(L,P,N){if(N===void 0&&(N=!1),pa===ca.deferred||pa===ca.loading||pa===ca.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");ja=q.resolveURL(L),pa=ca.deferred,Ra=P,ii(),N||hi()},hi=function(){if(pa!==ca.deferred||!ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pa=ca.loading,ii(),ja&&pt({url:ja},function(L){L?Oa(L):(pa=ca.loaded,ii())})},qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return pa===ca.loaded||qa.applyArabicShaping!=null},isLoading:function(){return pa===ca.loading},setState:function(P){pa=P.pluginStatus,ja=P.pluginURL},isParsed:function(){return qa.applyArabicShaping!=null&&qa.processBidirectionalText!=null&&qa.processStyledBidirectionalText!=null},getPluginURL:function(){return ja}},Oi=function(){!qa.isLoading()&&!qa.isLoaded()&&Ao()==="deferred"&&hi()},di=function(P,N){this.zoom=P,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new or,this.transition={})};di.prototype.isSupportedScript=function(P){return Ea(P,qa.isLoaded())},di.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},di.prototype.getCrossfadeParameters=function(){var P=this.zoom,N=P-Math.floor(P),$=this.crossFadingFactor();return P>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*N}};var xo=function(P,N){this.property=P,this.value=N,this.expression=uc(N===void 0?P.specification.default:N,P.specification)};xo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},xo.prototype.possiblyEvaluate=function(P,N,$){return this.property.possiblyEvaluate(this,P,N,$)};var fo=function(P){this.property=P,this.value=new xo(P,void 0)};fo.prototype.transitioned=function(P,N){return new us(this.property,this.value,N,A({},P.transition,this.transition),P.now)},fo.prototype.untransitioned=function(){return new us(this.property,this.value,null,{},0)};var Co=function(P){this._properties=P,this._values=Object.create(P.defaultTransitionablePropertyValues)};Co.prototype.getValue=function(P){return I(this._values[P].value.value)},Co.prototype.setValue=function(P,N){this._values.hasOwnProperty(P)||(this._values[P]=new fo(this._values[P].property)),this._values[P].value=new xo(this._values[P].property,N===null?void 0:I(N))},Co.prototype.getTransition=function(P){return I(this._values[P].transition)},Co.prototype.setTransition=function(P,N){this._values.hasOwnProperty(P)||(this._values[P]=new fo(this._values[P].property)),this._values[P].transition=I(N)||void 0},Co.prototype.serialize=function(){for(var P={},N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N],xe=this.getValue(he);xe!==void 0&&(P[he]=xe);var Te=this.getTransition(he);Te!==void 0&&(P[he+"-transition"]=Te)}return P},Co.prototype.transitioned=function(P,N){for(var $=new qo(this._properties),he=0,xe=Object.keys(this._values);he<xe.length;he+=1){var Te=xe[he];$._values[Te]=this._values[Te].transitioned(P,N._values[Te])}return $},Co.prototype.untransitioned=function(){for(var P=new qo(this._properties),N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N];P._values[he]=this._values[he].untransitioned()}return P};var us=function(P,N,$,he,xe){this.property=P,this.value=N,this.begin=xe+he.delay||0,this.end=this.begin+he.duration||0,P.specification.transition&&(he.delay||he.duration)&&(this.prior=$)};us.prototype.possiblyEvaluate=function(P,N,$){var he=P.now||0,xe=this.value.possiblyEvaluate(P,N,$),Te=this.prior;if(Te){if(he>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(he<this.begin)return Te.possiblyEvaluate(P,N,$);var Ne=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(P,N,$),xe,y(Ne))}else return xe};var qo=function(P){this._properties=P,this._values=Object.create(P.defaultTransitioningPropertyValues)};qo.prototype.possiblyEvaluate=function(P,N,$){for(var he=new Qi(this._properties),xe=0,Te=Object.keys(this._values);xe<Te.length;xe+=1){var Ne=Te[xe];he._values[Ne]=this._values[Ne].possiblyEvaluate(P,N,$)}return he},qo.prototype.hasTransition=function(){for(var P=0,N=Object.keys(this._values);P<N.length;P+=1){var $=N[P];if(this._values[$].prior)return!0}return!1};var fs=function(P){this._properties=P,this._values=Object.create(P.defaultPropertyValues)};fs.prototype.getValue=function(P){return I(this._values[P].value)},fs.prototype.setValue=function(P,N){this._values[P]=new xo(this._values[P].property,N===null?void 0:I(N))},fs.prototype.serialize=function(){for(var P={},N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N],xe=this.getValue(he);xe!==void 0&&(P[he]=xe)}return P},fs.prototype.possiblyEvaluate=function(P,N,$){for(var he=new Qi(this._properties),xe=0,Te=Object.keys(this._values);xe<Te.length;xe+=1){var Ne=Te[xe];he._values[Ne]=this._values[Ne].possiblyEvaluate(P,N,$)}return he};var ro=function(P,N,$){this.property=P,this.value=N,this.parameters=$};ro.prototype.isConstant=function(){return this.value.kind==="constant"},ro.prototype.constantOr=function(P){return this.value.kind==="constant"?this.value.value:P},ro.prototype.evaluate=function(P,N,$,he){return this.property.evaluate(this.value,this.parameters,P,N,$,he)};var Qi=function(P){this._properties=P,this._values=Object.create(P.defaultPossiblyEvaluatedValues)};Qi.prototype.get=function(P){return this._values[P]};var Ua=function(P){this.specification=P};Ua.prototype.possiblyEvaluate=function(P,N){return P.expression.evaluate(N)},Ua.prototype.interpolate=function(P,N,$){var he=yl[this.specification.type];return he?he(P,N,$):P};var ei=function(P,N){this.specification=P,this.overrides=N};ei.prototype.possiblyEvaluate=function(P,N,$,he){return P.expression.kind==="constant"||P.expression.kind==="camera"?new ro(this,{kind:"constant",value:P.expression.evaluate(N,null,{},$,he)},N):new ro(this,P.expression,N)},ei.prototype.interpolate=function(P,N,$){if(P.value.kind!=="constant"||N.value.kind!=="constant")return P;if(P.value.value===void 0||N.value.value===void 0)return new ro(this,{kind:"constant",value:void 0},P.parameters);var he=yl[this.specification.type];return he?new ro(this,{kind:"constant",value:he(P.value.value,N.value.value,$)},P.parameters):P},ei.prototype.evaluate=function(P,N,$,he,xe,Te){return P.kind==="constant"?P.value:P.evaluate(N,$,he,xe,Te)};var Do=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function($,he,xe,Te){if($.value===void 0)return new ro(this,{kind:"constant",value:void 0},he);if($.expression.kind==="constant"){var Ne=$.expression.evaluate(he,null,{},xe,Te),rt=$.property.specification.type==="resolvedImage",gt=rt&&typeof Ne!="string"?Ne.name:Ne,bt=this._calculate(gt,gt,gt,he);return new ro(this,{kind:"constant",value:bt},he)}else if($.expression.kind==="camera"){var Gt=this._calculate($.expression.evaluate({zoom:he.zoom-1}),$.expression.evaluate({zoom:he.zoom}),$.expression.evaluate({zoom:he.zoom+1}),he);return new ro(this,{kind:"constant",value:Gt},he)}else return new ro(this,$.expression,he)},P.prototype.evaluate=function($,he,xe,Te,Ne,rt){if($.kind==="source"){var gt=$.evaluate(he,xe,Te,Ne,rt);return this._calculate(gt,gt,gt,he)}else return $.kind==="composite"?this._calculate($.evaluate({zoom:Math.floor(he.zoom)-1},xe,Te),$.evaluate({zoom:Math.floor(he.zoom)},xe,Te),$.evaluate({zoom:Math.floor(he.zoom)+1},xe,Te),he):$.value},P.prototype._calculate=function($,he,xe,Te){var Ne=Te.zoom;return Ne>Te.zoomHistory.lastIntegerZoom?{from:$,to:he}:{from:xe,to:he}},P.prototype.interpolate=function($){return $},P}(ei),vo=function(P){this.specification=P};vo.prototype.possiblyEvaluate=function(P,N,$,he){if(P.value!==void 0)if(P.expression.kind==="constant"){var xe=P.expression.evaluate(N,null,{},$,he);return this._calculate(xe,xe,xe,N)}else return this._calculate(P.expression.evaluate(new di(Math.floor(N.zoom-1),N)),P.expression.evaluate(new di(Math.floor(N.zoom),N)),P.expression.evaluate(new di(Math.floor(N.zoom+1),N)),N)},vo.prototype._calculate=function(P,N,$,he){var xe=he.zoom;return xe>he.zoomHistory.lastIntegerZoom?{from:P,to:N}:{from:$,to:N}},vo.prototype.interpolate=function(P){return P};var Wo=function(P){this.specification=P};Wo.prototype.possiblyEvaluate=function(P,N,$,he){return!!P.expression.evaluate(N,null,{},$,he)},Wo.prototype.interpolate=function(){return!1};var io=function(P){this.properties=P,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in P){var $=P[N];$.specification.overridable&&this.overridableProperties.push(N);var he=this.defaultPropertyValues[N]=new xo($,void 0),xe=this.defaultTransitionablePropertyValues[N]=new fo($);this.defaultTransitioningPropertyValues[N]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=he.possiblyEvaluate({})}};Be("DataDrivenProperty",ei),Be("DataConstantProperty",Ua),Be("CrossFadedDataDrivenProperty",Do),Be("CrossFadedProperty",vo),Be("ColorRampProperty",Wo);var cs="-transition",Us=function(L){function P(N,$){if(L.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),$.layout&&(this._unevaluatedLayout=new fs($.layout)),$.paint)){this._transitionablePaint=new Co($.paint);for(var he in N.paint)this.setPaintProperty(he,N.paint[he],{validate:!1});for(var xe in N.layout)this.setLayoutProperty(xe,N.layout[xe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qi($.paint)}}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function($){return $==="visibility"?this.visibility:this._unevaluatedLayout.getValue($)},P.prototype.setLayoutProperty=function($,he,xe){if(xe===void 0&&(xe={}),he!=null){var Te="layers."+this.id+".layout."+$;if(this._validate(Ps,Te,$,he,xe))return}if($==="visibility"){this.visibility=he;return}this._unevaluatedLayout.setValue($,he)},P.prototype.getPaintProperty=function($){return k($,cs)?this._transitionablePaint.getTransition($.slice(0,-cs.length)):this._transitionablePaint.getValue($)},P.prototype.setPaintProperty=function($,he,xe){if(xe===void 0&&(xe={}),he!=null){var Te="layers."+this.id+".paint."+$;if(this._validate(zi,Te,$,he,xe))return!1}if(k($,cs))return this._transitionablePaint.setTransition($.slice(0,-cs.length),he||void 0),!1;var Ne=this._transitionablePaint._values[$],rt=Ne.property.specification["property-type"]==="cross-faded-data-driven",gt=Ne.value.isDataDriven(),bt=Ne.value;this._transitionablePaint.setValue($,he),this._handleSpecialPaintPropertyUpdate($);var Gt=this._transitionablePaint._values[$].value,lr=Gt.isDataDriven();return lr||gt||rt||this._handleOverridablePaintPropertyUpdate($,bt,Gt)},P.prototype._handleSpecialPaintPropertyUpdate=function($){},P.prototype._handleOverridablePaintPropertyUpdate=function($,he,xe){return!1},P.prototype.isHidden=function($){return this.minzoom&&$<this.minzoom||this.maxzoom&&$>=this.maxzoom?!0:this.visibility==="none"},P.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function($,he){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,he)},P.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),F($,function(he,xe){return he!==void 0&&!(xe==="layout"&&!Object.keys(he).length)&&!(xe==="paint"&&!Object.keys(he).length)})},P.prototype._validate=function($,he,xe,Te,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:ko(this,$.call(Io,{key:he,layerType:this.type,objectKey:xe,value:Te,styleSpec:Xt,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var $ in this.paint._values){var he=this.paint.get($);if(!(!(he instanceof ro)||!pi(he.property.specification))&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},P}(Pr),du={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},oo=function(P,N){this._structArray=P,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Wf=128,Jl=5,Ki=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ki.serialize=function(P,N){return P._trim(),N&&(P.isTransferred=!0,N.push(P.arrayBuffer)),{length:P.length,arrayBuffer:P.arrayBuffer}},Ki.deserialize=function(P){var N=Object.create(this.prototype);return N.arrayBuffer=P.arrayBuffer,N.length=P.length,N.capacity=P.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},Ki.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ki.prototype.clear=function(){this.length=0},Ki.prototype.resize=function(P){this.reserve(P),this.length=P},Ki.prototype.reserve=function(P){if(P>this.capacity){this.capacity=Math.max(P,Math.floor(this.capacity*Jl),Wf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},Ki.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function jo(L,P){P===void 0&&(P=1);var N=0,$=0,he=L.map(function(Te){var Ne=ep(Te.type),rt=N=Mc(N,Math.max(P,Ne)),gt=Te.components||1;return $=Math.max($,Ne),N+=Ne*gt,{name:Te.name,type:Te.type,components:gt,offset:rt}}),xe=Mc(N,Math.max($,P));return{members:he,size:xe,alignment:P}}function ep(L){return du[L].BYTES_PER_ELEMENT}function Mc(L,P){return Math.ceil(L/P)*P}var fc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.int16[Te+0]=he,this.int16[Te+1]=xe,$},P}(Ki);fc.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",fc);var xf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var rt=$*4;return this.int16[rt+0]=he,this.int16[rt+1]=xe,this.int16[rt+2]=Te,this.int16[rt+3]=Ne,$},P}(Ki);xf.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",xf);var jf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,rt)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt){var bt=$*6;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.int16[bt+2]=Te,this.int16[bt+3]=Ne,this.int16[bt+4]=rt,this.int16[bt+5]=gt,$},P}(Ki);jf.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",jf);var Sc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,rt)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt){var bt=$*4,Gt=$*8;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.uint8[Gt+4]=Te,this.uint8[Gt+5]=Ne,this.uint8[Gt+6]=rt,this.uint8[Gt+7]=gt,$},P}(Ki);Sc.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",Sc);var il=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr){var ir=this.length;return this.resize(ir+1),this.emplace(ir,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir){var _r=$*9,Vr=$*18;return this.uint16[_r+0]=he,this.uint16[_r+1]=xe,this.uint16[_r+2]=Te,this.uint16[_r+3]=Ne,this.uint16[_r+4]=rt,this.uint16[_r+5]=gt,this.uint16[_r+6]=bt,this.uint16[_r+7]=Gt,this.uint8[Vr+16]=lr,this.uint8[Vr+17]=ir,$},P}(Ki);il.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",il);var bf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r){var Vr=this.length;return this.resize(Vr+1),this.emplace(Vr,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr){var cn=$*12;return this.int16[cn+0]=he,this.int16[cn+1]=xe,this.int16[cn+2]=Te,this.int16[cn+3]=Ne,this.uint16[cn+4]=rt,this.uint16[cn+5]=gt,this.uint16[cn+6]=bt,this.uint16[cn+7]=Gt,this.int16[cn+8]=lr,this.int16[cn+9]=ir,this.int16[cn+10]=_r,this.int16[cn+11]=Vr,$},P}(Ki);bf.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",bf);var ph=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.float32[Ne+0]=he,this.float32[Ne+1]=xe,this.float32[Ne+2]=Te,$},P}(Ki);ph.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",ph);var dh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.uint32[xe+0]=he,$},P}(Ki);dh.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",dh);var cc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt,gt,bt,Gt){var lr=this.length;return this.resize(lr+1),this.emplace(lr,$,he,xe,Te,Ne,rt,gt,bt,Gt)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr){var ir=$*10,_r=$*5;return this.int16[ir+0]=he,this.int16[ir+1]=xe,this.int16[ir+2]=Te,this.int16[ir+3]=Ne,this.int16[ir+4]=rt,this.int16[ir+5]=gt,this.uint32[_r+3]=bt,this.uint16[ir+8]=Gt,this.uint16[ir+9]=lr,$},P}(Ki);cc.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",cc);var Ec=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,rt)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt){var bt=$*6;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.int16[bt+2]=Te,this.int16[bt+3]=Ne,this.int16[bt+4]=rt,this.int16[bt+5]=gt,$},P}(Ki);Ec.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",Ec);var qu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne){var rt=this.length;return this.resize(rt+1),this.emplace(rt,$,he,xe,Te,Ne)},P.prototype.emplace=function($,he,xe,Te,Ne,rt){var gt=$*4,bt=$*8;return this.float32[gt+0]=he,this.float32[gt+1]=xe,this.float32[gt+2]=Te,this.int16[bt+6]=Ne,this.int16[bt+7]=rt,$},P}(Ki);qu.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",qu);var wl=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var rt=$*12,gt=$*3;return this.uint8[rt+0]=he,this.uint8[rt+1]=xe,this.float32[gt+1]=Te,this.float32[gt+2]=Ne,$},P}(Ki);wl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",wl);var ef=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.uint16[Ne+0]=he,this.uint16[Ne+1]=xe,this.uint16[Ne+2]=Te,$},P}(Ki);ef.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",ef);var hc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An,Dn){var Un=$*24,Kn=$*12,ha=$*48;return this.int16[Un+0]=he,this.int16[Un+1]=xe,this.uint16[Un+2]=Te,this.uint16[Un+3]=Ne,this.uint32[Kn+2]=rt,this.uint32[Kn+3]=gt,this.uint32[Kn+4]=bt,this.uint16[Un+10]=Gt,this.uint16[Un+11]=lr,this.uint16[Un+12]=ir,this.float32[Kn+7]=_r,this.float32[Kn+8]=Vr,this.uint8[ha+36]=cn,this.uint8[ha+37]=an,this.uint8[ha+38]=Rn,this.uint32[Kn+10]=An,this.int16[Un+22]=Dn,$},P}(Ki);hc.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hc);var kc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,ka,Da,li,za,Na){var mi=this.length;return this.resize(mi+1),this.emplace(mi,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,ka,Da,li,za,Na)},P.prototype.emplace=function($,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,ka,Da,li,za,Na,mi){var oi=$*34,Ni=$*17;return this.int16[oi+0]=he,this.int16[oi+1]=xe,this.int16[oi+2]=Te,this.int16[oi+3]=Ne,this.int16[oi+4]=rt,this.int16[oi+5]=gt,this.int16[oi+6]=bt,this.int16[oi+7]=Gt,this.uint16[oi+8]=lr,this.uint16[oi+9]=ir,this.uint16[oi+10]=_r,this.uint16[oi+11]=Vr,this.uint16[oi+12]=cn,this.uint16[oi+13]=an,this.uint16[oi+14]=Rn,this.uint16[oi+15]=An,this.uint16[oi+16]=Dn,this.uint16[oi+17]=Un,this.uint16[oi+18]=Kn,this.uint16[oi+19]=ha,this.uint16[oi+20]=ua,this.uint16[oi+21]=Ba,this.uint16[oi+22]=ka,this.uint32[Ni+12]=Da,this.float32[Ni+13]=li,this.float32[Ni+14]=za,this.float32[Ni+15]=Na,this.float32[Ni+16]=mi,$},P}(Ki);kc.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",kc);var Xf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.float32[xe+0]=he,$},P}(Ki);Xf.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",Xf);var gh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.int16[Ne+0]=he,this.int16[Ne+1]=xe,this.int16[Ne+2]=Te,$},P}(Ki);gh.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",gh);var _f=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*2,rt=$*4;return this.uint32[Ne+0]=he,this.uint16[rt+2]=xe,this.uint16[rt+3]=Te,$},P}(Ki);_f.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",_f);var vc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.uint16[Te+0]=he,this.uint16[Te+1]=xe,$},P}(Ki);vc.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",vc);var Zf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.uint16[xe+0]=he,$},P}(Ki);Zf.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",Zf);var wf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.float32[Te+0]=he,this.float32[Te+1]=xe,$},P}(Ki);wf.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",wf);var yh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var rt=$*4;return this.float32[rt+0]=he,this.float32[rt+1]=xe,this.float32[rt+2]=Te,this.float32[rt+3]=Ne,$},P}(Ki);yh.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",yh);var nv=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new h(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,N),P}(oo);nv.prototype.size=20;var Tf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new nv(this,$)},P}(cc);Be("CollisionBoxArray",Tf);var mh=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function($){this._structArray.uint8[this._pos1+37]=$},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function($){this._structArray.uint8[this._pos1+38]=$},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function($){this._structArray.uint32[this._pos4+10]=$},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,N),P}(oo);mh.prototype.size=48;var Kf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new mh(this,$)},P}(hc);Be("PlacedSymbolArray",Kf);var av=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function($){this._structArray.uint32[this._pos4+12]=$},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,N),P}(oo);av.prototype.size=68;var iv=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new av(this,$)},P}(kc);Be("SymbolInstanceArray",iv);var gu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getoffsetX=function($){return this.float32[$*1+0]},P}(Xf);Be("GlyphOffsetArray",gu);var ov=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getx=function($){return this.int16[$*3+0]},P.prototype.gety=function($){return this.int16[$*3+1]},P.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[$*3+2]},P}(gh);Be("SymbolLineVertexArray",ov);var sv=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,N),P}(oo);sv.prototype.size=8;var xh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new sv(this,$)},P}(_f);Be("FeatureIndexArray",xh);var lv=jo([{name:"a_pos",components:2,type:"Int16"}],4),fe=lv.members,W=function(P){P===void 0&&(P=[]),this.segments=P};W.prototype.prepareSegment=function(P,N,$,he){var xe=this.segments[this.segments.length-1];return P>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+P),(!xe||xe.vertexLength+P>W.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==he)&&(xe={vertexOffset:N.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},he!==void 0&&(xe.sortKey=he),this.segments.push(xe)),xe},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var P=0,N=this.segments;P<N.length;P+=1){var $=N[P];for(var he in $.vaos)$.vaos[he].destroy()}},W.simpleSegment=function(P,N,$,he){return new W([{vertexOffset:P,primitiveOffset:N,vertexLength:$,primitiveLength:he,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function ve(L,P){return L=c(Math.floor(L),0,255),P=c(Math.floor(P),0,255),256*L+P}var J=jo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),pe=a(function(L){function P(N,$){var he,xe,Te,Ne,rt,gt,bt,Gt;for(he=N.length&3,xe=N.length-he,Te=$,rt=3432918353,gt=461845907,Gt=0;Gt<xe;)bt=N.charCodeAt(Gt)&255|(N.charCodeAt(++Gt)&255)<<8|(N.charCodeAt(++Gt)&255)<<16|(N.charCodeAt(++Gt)&255)<<24,++Gt,bt=(bt&65535)*rt+(((bt>>>16)*rt&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*gt+(((bt>>>16)*gt&65535)<<16)&4294967295,Te^=bt,Te=Te<<13|Te>>>19,Ne=(Te&65535)*5+(((Te>>>16)*5&65535)<<16)&4294967295,Te=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(bt=0,he){case 3:bt^=(N.charCodeAt(Gt+2)&255)<<16;case 2:bt^=(N.charCodeAt(Gt+1)&255)<<8;case 1:bt^=N.charCodeAt(Gt)&255,bt=(bt&65535)*rt+(((bt>>>16)*rt&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*gt+(((bt>>>16)*gt&65535)<<16)&4294967295,Te^=bt}return Te^=N.length,Te^=Te>>>16,Te=(Te&65535)*2246822507+(((Te>>>16)*2246822507&65535)<<16)&4294967295,Te^=Te>>>13,Te=(Te&65535)*3266489909+(((Te>>>16)*3266489909&65535)<<16)&4294967295,Te^=Te>>>16,Te>>>0}L.exports=P}),Se=a(function(L){function P(N,$){for(var he=N.length,xe=$^he,Te=0,Ne;he>=4;)Ne=N.charCodeAt(Te)&255|(N.charCodeAt(++Te)&255)<<8|(N.charCodeAt(++Te)&255)<<16|(N.charCodeAt(++Te)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16)^Ne,he-=4,++Te;switch(he){case 3:xe^=(N.charCodeAt(Te+2)&255)<<16;case 2:xe^=(N.charCodeAt(Te+1)&255)<<8;case 1:xe^=N.charCodeAt(Te)&255,xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16)}return xe^=xe>>>13,xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16),xe^=xe>>>15,xe>>>0}L.exports=P}),Ie=pe,Qe=pe,dt=Se;Ie.murmur3=Qe,Ie.murmur2=dt;var Ft=function(){this.ids=[],this.positions=[],this.indexed=!1};Ft.prototype.add=function(P,N,$,he){this.ids.push(dr(P)),this.positions.push(N,$,he)},Ft.prototype.getPositions=function(P){for(var N=dr(P),$=0,he=this.ids.length-1;$<he;){var xe=$+he>>1;this.ids[xe]>=N?he=xe:$=xe+1}for(var Te=[];this.ids[$]===N;){var Ne=this.positions[3*$],rt=this.positions[3*$+1],gt=this.positions[3*$+2];Te.push({index:Ne,start:rt,end:gt}),$++}return Te},Ft.serialize=function(P,N){var $=new Float64Array(P.ids),he=new Uint32Array(P.positions);return xr($,he,0,$.length-1),N&&N.push($.buffer,he.buffer),{ids:$,positions:he}},Ft.deserialize=function(P){var N=new Ft;return N.ids=P.ids,N.positions=P.positions,N.indexed=!0,N};var nr=Math.pow(2,53)-1;function dr(L){var P=+L;return!isNaN(P)&&P<=nr?P:Ie(String(L))}function xr(L,P,N,$){for(;N<$;){for(var he=L[N+$>>1],xe=N-1,Te=$+1;;){do xe++;while(L[xe]<he);do Te--;while(L[Te]>he);if(xe>=Te)break;Fr(L,xe,Te),Fr(P,3*xe,3*Te),Fr(P,3*xe+1,3*Te+1),Fr(P,3*xe+2,3*Te+2)}Te-N<$-Te?(xr(L,P,N,Te),N=Te+1):(xr(L,P,Te+1,$),$=Te)}}function Fr(L,P,N){var $=L[P];L[P]=L[N],L[N]=$}Be("FeaturePositionMap",Ft);var Zr=function(P,N){this.gl=P.gl,this.location=N},Qr=function(L){function P(N,$){L.call(this,N,$),this.current=0}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},P}(Zr),jr=function(L){function P(N,$){L.call(this,N,$),this.current=0}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},P}(Zr),rn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1])&&(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},P}(Zr),mn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2])&&(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},P}(Zr),Fn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0,0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2]||$[3]!==this.current[3])&&(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},P}(Zr),Vn=function(L){function P(N,$){L.call(this,N,$),this.current=wi.transparent}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($.r!==this.current.r||$.g!==this.current.g||$.b!==this.current.b||$.a!==this.current.a)&&(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},P}(Zr),ta=new Float32Array(16),ia=function(L){function P(N,$){L.call(this,N,$),this.current=ta}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);return}for(var he=1;he<16;he++)if($[he]!==this.current[he]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},P}(Zr);function na(L){return[ve(255*L.r,255*L.g),ve(255*L.b,255*L.a)]}var ya=function(P,N,$){this.value=P,this.uniformNames=N.map(function(he){return"u_"+he}),this.type=$};ya.prototype.setUniform=function(P,N,$){P.set($.constantOr(this.value))},ya.prototype.getBinding=function(P,N,$){return this.type==="color"?new Vn(P,N):new jr(P,N)};var Sa=function(P,N){this.uniformNames=N.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Sa.prototype.setConstantPatternPositions=function(P,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=P.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=P.tlbr},Sa.prototype.setUniform=function(P,N,$,he){var xe=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;xe&&P.set(xe)},Sa.prototype.getBinding=function(P,N,$){return $.substr(0,9)==="u_pattern"?new Fn(P,N):new jr(P,N)};var Ta=function(P,N,$,he){this.expression=P,this.type=$,this.maxValue=0,this.paintVertexAttributes=N.map(function(xe){return{name:"a_"+xe,type:"Float32",components:$==="color"?2:1,offset:0}}),this.paintVertexArray=new he};Ta.prototype.populatePaintArray=function(P,N,$,he,xe){var Te=this.paintVertexArray.length,Ne=this.expression.evaluate(new di(0),N,{},he,[],xe);this.paintVertexArray.resize(P),this._setPaintValue(Te,P,Ne)},Ta.prototype.updatePaintArray=function(P,N,$,he){var xe=this.expression.evaluate({zoom:0},$,he);this._setPaintValue(P,N,xe)},Ta.prototype._setPaintValue=function(P,N,$){if(this.type==="color")for(var he=na($),xe=P;xe<N;xe++)this.paintVertexArray.emplace(xe,he[0],he[1]);else{for(var Te=P;Te<N;Te++)this.paintVertexArray.emplace(Te,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},Ta.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ca=function(P,N,$,he,xe,Te){this.expression=P,this.uniformNames=N.map(function(Ne){return"u_"+Ne+"_t"}),this.type=$,this.useIntegerZoom=he,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=N.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:$==="color"?4:2,offset:0}}),this.paintVertexArray=new Te};Ca.prototype.populatePaintArray=function(P,N,$,he,xe){var Te=this.expression.evaluate(new di(this.zoom),N,{},he,[],xe),Ne=this.expression.evaluate(new di(this.zoom+1),N,{},he,[],xe),rt=this.paintVertexArray.length;this.paintVertexArray.resize(P),this._setPaintValue(rt,P,Te,Ne)},Ca.prototype.updatePaintArray=function(P,N,$,he){var xe=this.expression.evaluate({zoom:this.zoom},$,he),Te=this.expression.evaluate({zoom:this.zoom+1},$,he);this._setPaintValue(P,N,xe,Te)},Ca.prototype._setPaintValue=function(P,N,$,he){if(this.type==="color")for(var xe=na($),Te=na(he),Ne=P;Ne<N;Ne++)this.paintVertexArray.emplace(Ne,xe[0],xe[1],Te[0],Te[1]);else{for(var rt=P;rt<N;rt++)this.paintVertexArray.emplace(rt,$,he);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(he))}},Ca.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ca.prototype.setUniform=function(P,N){var $=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,he=c(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);P.set(he)},Ca.prototype.getBinding=function(P,N,$){return new jr(P,N)};var Fa=function(P,N,$,he,xe,Te){this.expression=P,this.type=N,this.useIntegerZoom=$,this.zoom=he,this.layerId=Te,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};Fa.prototype.populatePaintArray=function(P,N,$){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(P),this.zoomOutPaintVertexArray.resize(P),this._setPaintValues(he,P,N.patterns&&N.patterns[this.layerId],$)},Fa.prototype.updatePaintArray=function(P,N,$,he,xe){this._setPaintValues(P,N,$.patterns&&$.patterns[this.layerId],xe)},Fa.prototype._setPaintValues=function(P,N,$,he){if(!(!he||!$)){var xe=$.min,Te=$.mid,Ne=$.max,rt=he[xe],gt=he[Te],bt=he[Ne];if(!(!rt||!gt||!bt))for(var Gt=P;Gt<N;Gt++)this.zoomInPaintVertexArray.emplace(Gt,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],rt.tl[0],rt.tl[1],rt.br[0],rt.br[1],gt.pixelRatio,rt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Gt,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],gt.pixelRatio,bt.pixelRatio)}},Fa.prototype.upload=function(P){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=P.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=P.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Fa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Za=function(P,N,$,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var xe=[];for(var Te in P.paint._values)if(!!$(Te)){var Ne=P.paint.get(Te);if(!(!(Ne instanceof ro)||!pi(Ne.property.specification))){var rt=Hi(Te,P.type),gt=Ne.value,bt=Ne.property.specification.type,Gt=Ne.property.useIntegerZoom,lr=Ne.property.specification["property-type"],ir=lr==="cross-faded"||lr==="cross-faded-data-driven";if(gt.kind==="constant")this.binders[Te]=ir?new Sa(gt.value,rt):new ya(gt.value,rt,bt),xe.push("/u_"+Te);else if(gt.kind==="source"||ir){var _r=Ti(Te,bt,"source");this.binders[Te]=ir?new Fa(gt,bt,Gt,N,_r,P.id):new Ta(gt,rt,bt,_r),xe.push("/a_"+Te)}else{var Vr=Ti(Te,bt,"composite");this.binders[Te]=new Ca(gt,rt,bt,Gt,N,Vr),xe.push("/z_"+Te)}}}this.cacheKey=xe.sort().join("")};Za.prototype.getMaxValue=function(P){var N=this.binders[P];return N instanceof Ta||N instanceof Ca?N.maxValue:0},Za.prototype.populatePaintArrays=function(P,N,$,he,xe){for(var Te in this.binders){var Ne=this.binders[Te];(Ne instanceof Ta||Ne instanceof Ca||Ne instanceof Fa)&&Ne.populatePaintArray(P,N,$,he,xe)}},Za.prototype.setConstantPatternPositions=function(P,N){for(var $ in this.binders){var he=this.binders[$];he instanceof Sa&&he.setConstantPatternPositions(P,N)}},Za.prototype.updatePaintArrays=function(P,N,$,he,xe){var Te=!1;for(var Ne in P)for(var rt=N.getPositions(Ne),gt=0,bt=rt;gt<bt.length;gt+=1){var Gt=bt[gt],lr=$.feature(Gt.index);for(var ir in this.binders){var _r=this.binders[ir];if((_r instanceof Ta||_r instanceof Ca||_r instanceof Fa)&&_r.expression.isStateDependent===!0){var Vr=he.paint.get(ir);_r.expression=Vr.value,_r.updatePaintArray(Gt.start,Gt.end,lr,P[Ne],xe),Te=!0}}}return Te},Za.prototype.defines=function(){var P=[];for(var N in this.binders){var $=this.binders[N];($ instanceof ya||$ instanceof Sa)&&P.push.apply(P,$.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return P},Za.prototype.getPaintVertexBuffers=function(){return this._buffers},Za.prototype.getUniforms=function(P,N){var $=[];for(var he in this.binders){var xe=this.binders[he];if(xe instanceof ya||xe instanceof Sa||xe instanceof Ca)for(var Te=0,Ne=xe.uniformNames;Te<Ne.length;Te+=1){var rt=Ne[Te];if(N[rt]){var gt=xe.getBinding(P,N[rt],rt);$.push({name:rt,property:he,binding:gt})}}}return $},Za.prototype.setUniforms=function(P,N,$,he){for(var xe=0,Te=N;xe<Te.length;xe+=1){var Ne=Te[xe],rt=Ne.name,gt=Ne.property,bt=Ne.binding;this.binders[gt].setUniform(bt,he,$.get(gt),rt)}},Za.prototype.updatePaintBuffers=function(P){this._buffers=[];for(var N in this.binders){var $=this.binders[N];if(P&&$ instanceof Fa){var he=P.fromScale===2?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else($ instanceof Ta||$ instanceof Ca)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},Za.prototype.upload=function(P){for(var N in this.binders){var $=this.binders[N];($ instanceof Ta||$ instanceof Ca||$ instanceof Fa)&&$.upload(P)}this.updatePaintBuffers()},Za.prototype.destroy=function(){for(var P in this.binders){var N=this.binders[P];(N instanceof Ta||N instanceof Ca||N instanceof Fa)&&N.destroy()}};var ci=function(P,N,$,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var xe=0,Te=N;xe<Te.length;xe+=1){var Ne=Te[xe];this.programConfigurations[Ne.id]=new Za(Ne,$,he,P)}this.needsUpload=!1,this._featureMap=new Ft,this._bufferOffset=0};ci.prototype.populatePaintArrays=function(P,N,$,he,xe,Te){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(P,N,he,xe,Te);N.id!==void 0&&this._featureMap.add(N.id,$,this._bufferOffset,P),this._bufferOffset=P,this.needsUpload=!0},ci.prototype.updatePaintArrays=function(P,N,$,he){for(var xe=0,Te=$;xe<Te.length;xe+=1){var Ne=Te[xe];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(P,this._featureMap,N,Ne,he)||this.needsUpload}},ci.prototype.get=function(P){return this.programConfigurations[P]},ci.prototype.upload=function(P){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(P);this.needsUpload=!1}},ci.prototype.destroy=function(){for(var P in this.programConfigurations)this.programConfigurations[P].destroy()};function Hi(L,P){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[L]||[L.replace(P+"-","").replace(/-/g,"_")]}function yi(L){var P={"line-pattern":{source:il,composite:il},"fill-pattern":{source:il,composite:il},"fill-extrusion-pattern":{source:il,composite:il}};return P[L]}function Ti(L,P,N){var $={color:{source:wf,composite:yh},number:{source:Xf,composite:wf}},he=yi(L);return he&&he[N]||$[P][N]}Be("ConstantBinder",ya),Be("CrossFadedConstantBinder",Sa),Be("SourceExpressionBinder",Ta),Be("CrossFadedCompositeBinder",Fa),Be("CompositeExpressionBinder",Ca),Be("ProgramConfiguration",Za,{omit:["_buffers"]}),Be("ProgramConfigurationSet",ci);var Wa=8192;function Vi(L){return{min:-1*Math.pow(2,L-1),max:Math.pow(2,L-1)-1}}var Xi=Vi(15);function $i(L){for(var P=Wa/L.extent,N=L.loadGeometry(),$=0;$<N.length;$++)for(var he=N[$],xe=0;xe<he.length;xe++){var Te=he[xe];Te.x=Math.round(Te.x*P),Te.y=Math.round(Te.y*P),(Te.x<Xi.min||Te.x>Xi.max||Te.y<Xi.min||Te.y>Xi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Te.x=c(Te.x,Xi.min,Xi.max),Te.y=c(Te.y,Xi.min,Xi.max))}return N}function Pi(L,P,N,$,he){L.emplaceBack(P*2+($+1)/2,N*2+(he+1)/2)}var so=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new fc,this.indexArray=new ef,this.segments=new W,this.programConfigurations=new ci(fe,P.layers,P.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};so.prototype.populate=function(P,N,$){var he=this.layers[0],xe=[],Te=null;he.type==="circle"&&(Te=he.layout.get("circle-sort-key"));for(var Ne=0,rt=P;Ne<rt.length;Ne+=1){var gt=rt[Ne],bt=gt.feature,Gt=gt.id,lr=gt.index,ir=gt.sourceLayerIndex,_r=this.layers[0]._featureFilter.needGeometry,Vr={type:bt.type,id:Gt,properties:bt.properties,geometry:_r?$i(bt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),Vr,$)){_r||(Vr.geometry=$i(bt));var cn=Te?Te.evaluate(Vr,{},$):void 0,an={id:Gt,properties:bt.properties,type:bt.type,sourceLayerIndex:ir,index:lr,geometry:Vr.geometry,patterns:{},sortKey:cn};xe.push(an)}}Te&&xe.sort(function(ka,Da){return ka.sortKey-Da.sortKey});for(var Rn=0,An=xe;Rn<An.length;Rn+=1){var Dn=An[Rn],Un=Dn,Kn=Un.geometry,ha=Un.index,ua=Un.sourceLayerIndex,Ba=P[ha].feature;this.addFeature(Dn,Kn,ha,$),N.featureIndex.insert(Ba,Kn,ha,ua,this.index)}},so.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},so.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},so.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},so.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,fe),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},so.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},so.prototype.addFeature=function(P,N,$,he){for(var xe=0,Te=N;xe<Te.length;xe+=1)for(var Ne=Te[xe],rt=0,gt=Ne;rt<gt.length;rt+=1){var bt=gt[rt],Gt=bt.x,lr=bt.y;if(!(Gt<0||Gt>=Wa||lr<0||lr>=Wa)){var ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,P.sortKey),_r=ir.vertexLength;Pi(this.layoutVertexArray,Gt,lr,-1,-1),Pi(this.layoutVertexArray,Gt,lr,1,-1),Pi(this.layoutVertexArray,Gt,lr,1,1),Pi(this.layoutVertexArray,Gt,lr,-1,1),this.indexArray.emplaceBack(_r,_r+1,_r+2),this.indexArray.emplaceBack(_r,_r+3,_r+2),ir.vertexLength+=4,ir.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,{},he)},Be("CircleBucket",so,{omit:["layers"]});function vi(L,P){for(var N=0;N<L.length;N++)if(ol(P,L[N]))return!0;for(var $=0;$<P.length;$++)if(ol(L,P[$]))return!0;return!!$l(L,P)}function Ri(L,P,N){return!!(ol(L,P)||Lu(P,L,N))}function Fo(L,P){if(L.length===1)return Pu(P,L[0]);for(var N=0;N<P.length;N++)for(var $=P[N],he=0;he<$.length;he++)if(ol(L,$[he]))return!0;for(var xe=0;xe<L.length;xe++)if(Pu(P,L[xe]))return!0;for(var Te=0;Te<P.length;Te++)if($l(L,P[Te]))return!0;return!1}function es(L,P,N){for(var $=0;$<P.length;$++){var he=P[$];if(L.length>=3){for(var xe=0;xe<he.length;xe++)if(ol(L,he[xe]))return!0}if(Ql(L,he,N))return!0}return!1}function Ql(L,P,N){if(L.length>1){if($l(L,P))return!0;for(var $=0;$<P.length;$++)if(Lu(P[$],L,N))return!0}for(var he=0;he<L.length;he++)if(Lu(L[he],P,N))return!0;return!1}function $l(L,P){if(L.length===0||P.length===0)return!1;for(var N=0;N<L.length-1;N++)for(var $=L[N],he=L[N+1],xe=0;xe<P.length-1;xe++){var Te=P[xe],Ne=P[xe+1];if(Cu($,he,Te,Ne))return!0}return!1}function Cu(L,P,N,$){return z(L,N,$)!==z(P,N,$)&&z(L,P,N)!==z(L,P,$)}function Lu(L,P,N){var $=N*N;if(P.length===1)return L.distSqr(P[0])<$;for(var he=1;he<P.length;he++){var xe=P[he-1],Te=P[he];if(tf(L,xe,Te)<$)return!0}return!1}function tf(L,P,N){var $=P.distSqr(N);if($===0)return L.distSqr(P);var he=((L.x-P.x)*(N.x-P.x)+(L.y-P.y)*(N.y-P.y))/$;return he<0?L.distSqr(P):he>1?L.distSqr(N):L.distSqr(N.sub(P)._mult(he)._add(P))}function Pu(L,P){for(var N=!1,$,he,xe,Te=0;Te<L.length;Te++){$=L[Te];for(var Ne=0,rt=$.length-1;Ne<$.length;rt=Ne++)he=$[Ne],xe=$[rt],he.y>P.y!=xe.y>P.y&&P.x<(xe.x-he.x)*(P.y-he.y)/(xe.y-he.y)+he.x&&(N=!N)}return N}function ol(L,P){for(var N=!1,$=0,he=L.length-1;$<L.length;he=$++){var xe=L[$],Te=L[he];xe.y>P.y!=Te.y>P.y&&P.x<(Te.x-xe.x)*(P.y-xe.y)/(Te.y-xe.y)+xe.x&&(N=!N)}return N}function Af(L,P,N,$,he){for(var xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe];if(P<=Ne.x&&N<=Ne.y&&$>=Ne.x&&he>=Ne.y)return!0}var rt=[new h(P,N),new h(P,he),new h($,he),new h($,N)];if(L.length>2)for(var gt=0,bt=rt;gt<bt.length;gt+=1){var Gt=bt[gt];if(ol(L,Gt))return!0}for(var lr=0;lr<L.length-1;lr++){var ir=L[lr],_r=L[lr+1];if(Hs(ir,_r,rt))return!0}return!1}function Hs(L,P,N){var $=N[0],he=N[2];if(L.x<$.x&&P.x<$.x||L.x>he.x&&P.x>he.x||L.y<$.y&&P.y<$.y||L.y>he.y&&P.y>he.y)return!1;var xe=z(L,P,N[0]);return xe!==z(L,P,N[1])||xe!==z(L,P,N[2])||xe!==z(L,P,N[3])}function zl(L,P,N){var $=P.paint.get(L).value;return $.kind==="constant"?$.value:N.programConfigurations.get(P.id).getMaxValue(L)}function Du(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function yu(L,P,N,$,he){if(!P[0]&&!P[1])return L;var xe=h.convert(P)._mult(he);N==="viewport"&&xe._rotate(-$);for(var Te=[],Ne=0;Ne<L.length;Ne++){var rt=L[Ne];Te.push(rt.sub(xe))}return Te}var Ru=new io({"circle-sort-key":new ei(Xt.layout_circle["circle-sort-key"])}),Cc=new io({"circle-radius":new ei(Xt.paint_circle["circle-radius"]),"circle-color":new ei(Xt.paint_circle["circle-color"]),"circle-blur":new ei(Xt.paint_circle["circle-blur"]),"circle-opacity":new ei(Xt.paint_circle["circle-opacity"]),"circle-translate":new Ua(Xt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ua(Xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ua(Xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ua(Xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(Xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(Xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(Xt.paint_circle["circle-stroke-opacity"])}),Df={paint:Cc,layout:Ru},Ds=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var L=arguments,P=0,N=arguments.length;N--;)P+=L[N]*L[N];return Math.sqrt(P)});function pc(){var L=new Ds(4);return Ds!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}function Ks(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3],Ne=Math.sin(N),rt=Math.cos(N);return L[0]=$*rt+xe*Ne,L[1]=he*rt+Te*Ne,L[2]=$*-Ne+xe*rt,L[3]=he*-Ne+Te*rt,L}function dc(){var L=new Ds(9);return Ds!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}function Lc(L,P){var N=Math.sin(P),$=Math.cos(P);return L[0]=$,L[1]=N,L[2]=0,L[3]=-N,L[4]=$,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function Pc(){var L=new Ds(16);return Ds!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L}function uv(L){var P=new Ds(16);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P[3]=L[3],P[4]=L[4],P[5]=L[5],P[6]=L[6],P[7]=L[7],P[8]=L[8],P[9]=L[9],P[10]=L[10],P[11]=L[11],P[12]=L[12],P[13]=L[13],P[14]=L[14],P[15]=L[15],P}function Dc(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function Jf(L,P){var N=P[0],$=P[1],he=P[2],xe=P[3],Te=P[4],Ne=P[5],rt=P[6],gt=P[7],bt=P[8],Gt=P[9],lr=P[10],ir=P[11],_r=P[12],Vr=P[13],cn=P[14],an=P[15],Rn=N*Ne-$*Te,An=N*rt-he*Te,Dn=N*gt-xe*Te,Un=$*rt-he*Ne,Kn=$*gt-xe*Ne,ha=he*gt-xe*rt,ua=bt*Vr-Gt*_r,Ba=bt*cn-lr*_r,ka=bt*an-ir*_r,Da=Gt*cn-lr*Vr,li=Gt*an-ir*Vr,za=lr*an-ir*cn,Na=Rn*za-An*li+Dn*Da+Un*ka-Kn*Ba+ha*ua;return Na?(Na=1/Na,L[0]=(Ne*za-rt*li+gt*Da)*Na,L[1]=(he*li-$*za-xe*Da)*Na,L[2]=(Vr*ha-cn*Kn+an*Un)*Na,L[3]=(lr*Kn-Gt*ha-ir*Un)*Na,L[4]=(rt*ka-Te*za-gt*Ba)*Na,L[5]=(N*za-he*ka+xe*Ba)*Na,L[6]=(cn*Dn-_r*ha-an*An)*Na,L[7]=(bt*ha-lr*Dn+ir*An)*Na,L[8]=(Te*li-Ne*ka+gt*ua)*Na,L[9]=($*ka-N*li-xe*ua)*Na,L[10]=(_r*Kn-Vr*Dn+an*Rn)*Na,L[11]=(Gt*Dn-bt*Kn-ir*Rn)*Na,L[12]=(Ne*Ba-Te*Da-rt*ua)*Na,L[13]=(N*Da-$*Ba+he*ua)*Na,L[14]=(Vr*An-_r*Un-cn*Rn)*Na,L[15]=(bt*Un-Gt*An+lr*Rn)*Na,L):null}function Qf(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3],Ne=P[4],rt=P[5],gt=P[6],bt=P[7],Gt=P[8],lr=P[9],ir=P[10],_r=P[11],Vr=P[12],cn=P[13],an=P[14],Rn=P[15],An=N[0],Dn=N[1],Un=N[2],Kn=N[3];return L[0]=An*$+Dn*Ne+Un*Gt+Kn*Vr,L[1]=An*he+Dn*rt+Un*lr+Kn*cn,L[2]=An*xe+Dn*gt+Un*ir+Kn*an,L[3]=An*Te+Dn*bt+Un*_r+Kn*Rn,An=N[4],Dn=N[5],Un=N[6],Kn=N[7],L[4]=An*$+Dn*Ne+Un*Gt+Kn*Vr,L[5]=An*he+Dn*rt+Un*lr+Kn*cn,L[6]=An*xe+Dn*gt+Un*ir+Kn*an,L[7]=An*Te+Dn*bt+Un*_r+Kn*Rn,An=N[8],Dn=N[9],Un=N[10],Kn=N[11],L[8]=An*$+Dn*Ne+Un*Gt+Kn*Vr,L[9]=An*he+Dn*rt+Un*lr+Kn*cn,L[10]=An*xe+Dn*gt+Un*ir+Kn*an,L[11]=An*Te+Dn*bt+Un*_r+Kn*Rn,An=N[12],Dn=N[13],Un=N[14],Kn=N[15],L[12]=An*$+Dn*Ne+Un*Gt+Kn*Vr,L[13]=An*he+Dn*rt+Un*lr+Kn*cn,L[14]=An*xe+Dn*gt+Un*ir+Kn*an,L[15]=An*Te+Dn*bt+Un*_r+Kn*Rn,L}function Vo(L,P,N){var $=N[0],he=N[1],xe=N[2],Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an;return P===L?(L[12]=P[0]*$+P[4]*he+P[8]*xe+P[12],L[13]=P[1]*$+P[5]*he+P[9]*xe+P[13],L[14]=P[2]*$+P[6]*he+P[10]*xe+P[14],L[15]=P[3]*$+P[7]*he+P[11]*xe+P[15]):(Te=P[0],Ne=P[1],rt=P[2],gt=P[3],bt=P[4],Gt=P[5],lr=P[6],ir=P[7],_r=P[8],Vr=P[9],cn=P[10],an=P[11],L[0]=Te,L[1]=Ne,L[2]=rt,L[3]=gt,L[4]=bt,L[5]=Gt,L[6]=lr,L[7]=ir,L[8]=_r,L[9]=Vr,L[10]=cn,L[11]=an,L[12]=Te*$+bt*he+_r*xe+P[12],L[13]=Ne*$+Gt*he+Vr*xe+P[13],L[14]=rt*$+lr*he+cn*xe+P[14],L[15]=gt*$+ir*he+an*xe+P[15]),L}function Tl(L,P,N){var $=N[0],he=N[1],xe=N[2];return L[0]=P[0]*$,L[1]=P[1]*$,L[2]=P[2]*$,L[3]=P[3]*$,L[4]=P[4]*he,L[5]=P[5]*he,L[6]=P[6]*he,L[7]=P[7]*he,L[8]=P[8]*xe,L[9]=P[9]*xe,L[10]=P[10]*xe,L[11]=P[11]*xe,L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15],L}function Al(L,P,N){var $=Math.sin(N),he=Math.cos(N),xe=P[4],Te=P[5],Ne=P[6],rt=P[7],gt=P[8],bt=P[9],Gt=P[10],lr=P[11];return P!==L&&(L[0]=P[0],L[1]=P[1],L[2]=P[2],L[3]=P[3],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[4]=xe*he+gt*$,L[5]=Te*he+bt*$,L[6]=Ne*he+Gt*$,L[7]=rt*he+lr*$,L[8]=gt*he-xe*$,L[9]=bt*he-Te*$,L[10]=Gt*he-Ne*$,L[11]=lr*he-rt*$,L}function Rc(L,P,N){var $=Math.sin(N),he=Math.cos(N),xe=P[0],Te=P[1],Ne=P[2],rt=P[3],gt=P[4],bt=P[5],Gt=P[6],lr=P[7];return P!==L&&(L[8]=P[8],L[9]=P[9],L[10]=P[10],L[11]=P[11],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[0]=xe*he+gt*$,L[1]=Te*he+bt*$,L[2]=Ne*he+Gt*$,L[3]=rt*he+lr*$,L[4]=gt*he-xe*$,L[5]=bt*he-Te*$,L[6]=Gt*he-Ne*$,L[7]=lr*he-rt*$,L}function bh(L,P,N,$,he){var xe=1/Math.tan(P/2),Te;return L[0]=xe/N,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=xe,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,he!=null&&he!==1/0?(Te=1/($-he),L[10]=(he+$)*Te,L[14]=2*he*$*Te):(L[10]=-1,L[14]=-2*$),L}function tp(L,P,N,$,he,xe,Te){var Ne=1/(P-N),rt=1/($-he),gt=1/(xe-Te);return L[0]=-2*Ne,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*rt,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*gt,L[11]=0,L[12]=(P+N)*Ne,L[13]=(he+$)*rt,L[14]=(Te+xe)*gt,L[15]=1,L}var rp=Qf;function gc(){var L=new Ds(3);return Ds!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L}function np(L){var P=new Ds(3);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P}function Ic(L,P,N){return L[0]=P[0]+N[0],L[1]=P[1]+N[1],L[2]=P[2]+N[2],L}function ap(L,P,N){return L[0]=P[0]-N[0],L[1]=P[1]-N[1],L[2]=P[2]-N[2],L}function ip(L,P,N){return L[0]=P[0]*N,L[1]=P[1]*N,L[2]=P[2]*N,L}function _h(L,P){var N=P[0],$=P[1],he=P[2],xe=N*N+$*$+he*he;return xe>0&&(xe=1/Math.sqrt(xe)),L[0]=P[0]*xe,L[1]=P[1]*xe,L[2]=P[2]*xe,L}function sg(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]}function lg(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=N[0],Ne=N[1],rt=N[2];return L[0]=he*rt-xe*Ne,L[1]=xe*Te-$*rt,L[2]=$*Ne-he*Te,L}function ug(L,P,N){var $=P[0],he=P[1],xe=P[2];return L[0]=$*N[0]+he*N[3]+xe*N[6],L[1]=$*N[1]+he*N[4]+xe*N[7],L[2]=$*N[2]+he*N[5]+xe*N[8],L}var fg=ap;(function(){var L=gc();return function(P,N,$,he,xe,Te){var Ne,rt;for(N||(N=3),$||($=0),he?rt=Math.min(he*N+$,P.length):rt=P.length,Ne=$;Ne<rt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],L[2]=P[Ne+2],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1],P[Ne+2]=L[2];return P}})();function cg(){var L=new Ds(4);return Ds!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0),L}function hg(L,P,N){return L[0]=P[0]*N,L[1]=P[1]*N,L[2]=P[2]*N,L[3]=P[3]*N,L}function vg(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]+L[3]*P[3]}function fv(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3];return L[0]=N[0]*$+N[4]*he+N[8]*xe+N[12]*Te,L[1]=N[1]*$+N[5]*he+N[9]*xe+N[13]*Te,L[2]=N[2]*$+N[6]*he+N[10]*xe+N[14]*Te,L[3]=N[3]*$+N[7]*he+N[11]*xe+N[15]*Te,L}(function(){var L=cg();return function(P,N,$,he,xe,Te){var Ne,rt;for(N||(N=4),$||($=0),he?rt=Math.min(he*N+$,P.length):rt=P.length,Ne=$;Ne<rt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],L[2]=P[Ne+2],L[3]=P[Ne+3],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1],P[Ne+2]=L[2],P[Ne+3]=L[3];return P}})();function pg(){var L=new Ds(2);return Ds!=Float32Array&&(L[0]=0,L[1]=0),L}function dg(L){var P=L[0],N=L[1];return P*P+N*N}var gg=dg;(function(){var L=pg();return function(P,N,$,he,xe,Te){var Ne,rt;for(N||(N=2),$||($=0),he?rt=Math.min(he*N+$,P.length):rt=P.length,Ne=$;Ne<rt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1];return P}})();var yg=function(L){function P(N){L.call(this,N,Df)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new so($)},P.prototype.queryRadius=function($){var he=$;return zl("circle-radius",this,he)+zl("circle-stroke-width",this,he)+Du(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,rt,gt,bt){for(var Gt=yu($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),rt.angle,gt),lr=this.paint.get("circle-radius").evaluate(he,xe),ir=this.paint.get("circle-stroke-width").evaluate(he,xe),_r=lr+ir,Vr=this.paint.get("circle-pitch-alignment")==="map",cn=Vr?Gt:mg(Gt,bt),an=Vr?_r*gt:_r,Rn=0,An=Te;Rn<An.length;Rn+=1)for(var Dn=An[Rn],Un=0,Kn=Dn;Un<Kn.length;Un+=1){var ha=Kn[Un],ua=Vr?ha:nd(ha,bt),Ba=an,ka=fv([],[ha.x,ha.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ba*=ka[3]/rt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ba*=rt.cameraToCenterDistance/ka[3]),Ri(cn,ua,Ba))return!0}return!1},P}(Us);function nd(L,P){var N=fv([],[L.x,L.y,0,1],P);return new h(N[0]/N[3],N[1]/N[3])}function mg(L,P){return L.map(function(N){return nd(N,P)})}var ad=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(so);Be("HeatmapBucket",ad,{omit:["layers"]});function op(L,P,N,$){var he=P.width,xe=P.height;if(!$)$=new Uint8Array(he*xe*N);else if($ instanceof Uint8ClampedArray)$=new Uint8Array($.buffer);else if($.length!==he*xe*N)throw new RangeError("mismatched image size");return L.width=he,L.height=xe,L.data=$,L}function id(L,P,N){var $=P.width,he=P.height;if(!($===L.width&&he===L.height)){var xe=op({},{width:$,height:he},N);sp(L,xe,{x:0,y:0},{x:0,y:0},{width:Math.min(L.width,$),height:Math.min(L.height,he)},N),L.width=$,L.height=he,L.data=xe.data}}function sp(L,P,N,$,he,xe){if(he.width===0||he.height===0)return P;if(he.width>L.width||he.height>L.height||N.x>L.width-he.width||N.y>L.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>P.width||he.height>P.height||$.x>P.width-he.width||$.y>P.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var Te=L.data,Ne=P.data,rt=0;rt<he.height;rt++)for(var gt=((N.y+rt)*L.width+N.x)*xe,bt=(($.y+rt)*P.width+$.x)*xe,Gt=0;Gt<he.width*xe;Gt++)Ne[bt+Gt]=Te[gt+Gt];return P}var yc=function(P,N){op(this,P,1,N)};yc.prototype.resize=function(P){id(this,P,1)},yc.prototype.clone=function(){return new yc({width:this.width,height:this.height},new Uint8Array(this.data))},yc.copy=function(P,N,$,he,xe){sp(P,N,$,he,xe,1)};var Ml=function(P,N){op(this,P,4,N)};Ml.prototype.resize=function(P){id(this,P,4)},Ml.prototype.replace=function(P,N){N?this.data.set(P):P instanceof Uint8ClampedArray?this.data=new Uint8Array(P.buffer):this.data=P},Ml.prototype.clone=function(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))},Ml.copy=function(P,N,$,he,xe){sp(P,N,$,he,xe,4)},Be("AlphaImage",yc),Be("RGBAImage",Ml);var xg=new io({"heatmap-radius":new ei(Xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(Xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ua(Xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(Xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ua(Xt.paint_heatmap["heatmap-opacity"])}),bg={paint:xg};function od(L,P){for(var N=new Uint8Array(1024),$={},he=0,xe=0;he<256;he++,xe+=4){$[P]=he/255;var Te=L.evaluate($);N[xe+0]=Math.floor(Te.r*255/Te.a),N[xe+1]=Math.floor(Te.g*255/Te.a),N[xe+2]=Math.floor(Te.b*255/Te.a),N[xe+3]=Math.floor(Te.a*255)}return new Ml({width:256,height:1},N)}var _g=function(L){function P(N){L.call(this,N,bg),this._updateColorRamp()}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new ad($)},P.prototype._handleSpecialPaintPropertyUpdate=function($){$==="heatmap-color"&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){var $=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=od($,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},P}(Us),wg=new io({"hillshade-illumination-direction":new Ua(Xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ua(Xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ua(Xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ua(Xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ua(Xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ua(Xt.paint_hillshade["hillshade-accent-color"])}),Tg={paint:wg},Ag=function(L){function P(N){L.call(this,N,Tg)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},P}(Us),Mg=jo([{name:"a_pos",components:2,type:"Int16"}],4),sd=Mg.members,lp=cv,Sg=cv;function cv(L,P,N){N=N||2;var $=P&&P.length,he=$?P[0]*N:L.length,xe=ld(L,0,he,N,!0),Te=[];if(!xe||xe.next===xe.prev)return Te;var Ne,rt,gt,bt,Gt,lr,ir;if($&&(xe=Pg(L,P,xe,N)),L.length>80*N){Ne=gt=L[0],rt=bt=L[1];for(var _r=N;_r<he;_r+=N)Gt=L[_r],lr=L[_r+1],Gt<Ne&&(Ne=Gt),lr<rt&&(rt=lr),Gt>gt&&(gt=Gt),lr>bt&&(bt=lr);ir=Math.max(gt-Ne,bt-rt),ir=ir!==0?1/ir:0}return wh(xe,Te,N,Ne,rt,ir),Te}function ld(L,P,N,$,he){var xe,Te;if(he===cp(L,P,N,$)>0)for(xe=P;xe<N;xe+=$)Te=cd(xe,L[xe],L[xe+1],Te);else for(xe=N-$;xe>=P;xe-=$)Te=cd(xe,L[xe],L[xe+1],Te);return Te&&hv(Te,Te.next)&&(Ah(Te),Te=Te.next),Te}function $f(L,P){if(!L)return L;P||(P=L);var N=L,$;do if($=!1,!N.steiner&&(hv(N,N.next)||ts(N.prev,N,N.next)===0)){if(Ah(N),N=P=N.prev,N===N.next)break;$=!0}else N=N.next;while($||N!==P);return P}function wh(L,P,N,$,he,xe,Te){if(!!L){!Te&&xe&&zg(L,$,he,xe);for(var Ne=L,rt,gt;L.prev!==L.next;){if(rt=L.prev,gt=L.next,xe?kg(L,$,he,xe):Eg(L)){P.push(rt.i/N),P.push(L.i/N),P.push(gt.i/N),Ah(L),L=gt.next,Ne=gt.next;continue}if(L=gt,L===Ne){Te?Te===1?(L=Cg($f(L),P,N),wh(L,P,N,$,he,xe,2)):Te===2&&Lg(L,P,N,$,he,xe):wh($f(L),P,N,$,he,xe,1);break}}}}function Eg(L){var P=L.prev,N=L,$=L.next;if(ts(P,N,$)>=0)return!1;for(var he=L.next.next;he!==L.prev;){if(Fc(P.x,P.y,N.x,N.y,$.x,$.y,he.x,he.y)&&ts(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function kg(L,P,N,$){var he=L.prev,xe=L,Te=L.next;if(ts(he,xe,Te)>=0)return!1;for(var Ne=he.x<xe.x?he.x<Te.x?he.x:Te.x:xe.x<Te.x?xe.x:Te.x,rt=he.y<xe.y?he.y<Te.y?he.y:Te.y:xe.y<Te.y?xe.y:Te.y,gt=he.x>xe.x?he.x>Te.x?he.x:Te.x:xe.x>Te.x?xe.x:Te.x,bt=he.y>xe.y?he.y>Te.y?he.y:Te.y:xe.y>Te.y?xe.y:Te.y,Gt=up(Ne,rt,P,N,$),lr=up(gt,bt,P,N,$),ir=L.prevZ,_r=L.nextZ;ir&&ir.z>=Gt&&_r&&_r.z<=lr;){if(ir!==L.prev&&ir!==L.next&&Fc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,ir.x,ir.y)&&ts(ir.prev,ir,ir.next)>=0||(ir=ir.prevZ,_r!==L.prev&&_r!==L.next&&Fc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,_r.x,_r.y)&&ts(_r.prev,_r,_r.next)>=0))return!1;_r=_r.nextZ}for(;ir&&ir.z>=Gt;){if(ir!==L.prev&&ir!==L.next&&Fc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,ir.x,ir.y)&&ts(ir.prev,ir,ir.next)>=0)return!1;ir=ir.prevZ}for(;_r&&_r.z<=lr;){if(_r!==L.prev&&_r!==L.next&&Fc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,_r.x,_r.y)&&ts(_r.prev,_r,_r.next)>=0)return!1;_r=_r.nextZ}return!0}function Cg(L,P,N){var $=L;do{var he=$.prev,xe=$.next.next;!hv(he,xe)&&ud(he,$,$.next,xe)&&Th(he,xe)&&Th(xe,he)&&(P.push(he.i/N),P.push($.i/N),P.push(xe.i/N),Ah($),Ah($.next),$=L=xe),$=$.next}while($!==L);return $f($)}function Lg(L,P,N,$,he,xe){var Te=L;do{for(var Ne=Te.next.next;Ne!==Te.prev;){if(Te.i!==Ne.i&&Bg(Te,Ne)){var rt=fd(Te,Ne);Te=$f(Te,Te.next),rt=$f(rt,rt.next),wh(Te,P,N,$,he,xe),wh(rt,P,N,$,he,xe);return}Ne=Ne.next}Te=Te.next}while(Te!==L)}function Pg(L,P,N,$){var he=[],xe,Te,Ne,rt,gt;for(xe=0,Te=P.length;xe<Te;xe++)Ne=P[xe]*$,rt=xe<Te-1?P[xe+1]*$:L.length,gt=ld(L,Ne,rt,$,!1),gt===gt.next&&(gt.steiner=!0),he.push(Ng(gt));for(he.sort(Dg),xe=0;xe<he.length;xe++)Rg(he[xe],N),N=$f(N,N.next);return N}function Dg(L,P){return L.x-P.x}function Rg(L,P){if(P=Ig(L,P),P){var N=fd(P,L);$f(P,P.next),$f(N,N.next)}}function Ig(L,P){var N=P,$=L.x,he=L.y,xe=-1/0,Te;do{if(he<=N.y&&he>=N.next.y&&N.next.y!==N.y){var Ne=N.x+(he-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ne<=$&&Ne>xe){if(xe=Ne,Ne===$){if(he===N.y)return N;if(he===N.next.y)return N.next}Te=N.x<N.next.x?N:N.next}}N=N.next}while(N!==P);if(!Te)return null;if($===xe)return Te;var rt=Te,gt=Te.x,bt=Te.y,Gt=1/0,lr;N=Te;do $>=N.x&&N.x>=gt&&$!==N.x&&Fc(he<bt?$:xe,he,gt,bt,he<bt?xe:$,he,N.x,N.y)&&(lr=Math.abs(he-N.y)/($-N.x),Th(N,L)&&(lr<Gt||lr===Gt&&(N.x>Te.x||N.x===Te.x&&Fg(Te,N)))&&(Te=N,Gt=lr)),N=N.next;while(N!==rt);return Te}function Fg(L,P){return ts(L.prev,L,P.prev)<0&&ts(P.next,L,L.next)<0}function zg(L,P,N,$){var he=L;do he.z===null&&(he.z=up(he.x,he.y,P,N,$)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==L);he.prevZ.nextZ=null,he.prevZ=null,Og(he)}function Og(L){var P,N,$,he,xe,Te,Ne,rt,gt=1;do{for(N=L,L=null,xe=null,Te=0;N;){for(Te++,$=N,Ne=0,P=0;P<gt&&(Ne++,$=$.nextZ,!!$);P++);for(rt=gt;Ne>0||rt>0&&$;)Ne!==0&&(rt===0||!$||N.z<=$.z)?(he=N,N=N.nextZ,Ne--):(he=$,$=$.nextZ,rt--),xe?xe.nextZ=he:L=he,he.prevZ=xe,xe=he;N=$}xe.nextZ=null,gt*=2}while(Te>1);return L}function up(L,P,N,$,he){return L=32767*(L-N)*he,P=32767*(P-$)*he,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,L|P<<1}function Ng(L){var P=L,N=L;do(P.x<N.x||P.x===N.x&&P.y<N.y)&&(N=P),P=P.next;while(P!==L);return N}function Fc(L,P,N,$,he,xe,Te,Ne){return(he-Te)*(P-Ne)-(L-Te)*(xe-Ne)>=0&&(L-Te)*($-Ne)-(N-Te)*(P-Ne)>=0&&(N-Te)*(xe-Ne)-(he-Te)*($-Ne)>=0}function Bg(L,P){return L.next.i!==P.i&&L.prev.i!==P.i&&!Ug(L,P)&&(Th(L,P)&&Th(P,L)&&Hg(L,P)&&(ts(L.prev,L,P.prev)||ts(L,P.prev,P))||hv(L,P)&&ts(L.prev,L,L.next)>0&&ts(P.prev,P,P.next)>0)}function ts(L,P,N){return(P.y-L.y)*(N.x-P.x)-(P.x-L.x)*(N.y-P.y)}function hv(L,P){return L.x===P.x&&L.y===P.y}function ud(L,P,N,$){var he=pv(ts(L,P,N)),xe=pv(ts(L,P,$)),Te=pv(ts(N,$,L)),Ne=pv(ts(N,$,P));return!!(he!==xe&&Te!==Ne||he===0&&vv(L,N,P)||xe===0&&vv(L,$,P)||Te===0&&vv(N,L,$)||Ne===0&&vv(N,P,$))}function vv(L,P,N){return P.x<=Math.max(L.x,N.x)&&P.x>=Math.min(L.x,N.x)&&P.y<=Math.max(L.y,N.y)&&P.y>=Math.min(L.y,N.y)}function pv(L){return L>0?1:L<0?-1:0}function Ug(L,P){var N=L;do{if(N.i!==L.i&&N.next.i!==L.i&&N.i!==P.i&&N.next.i!==P.i&&ud(N,N.next,L,P))return!0;N=N.next}while(N!==L);return!1}function Th(L,P){return ts(L.prev,L,L.next)<0?ts(L,P,L.next)>=0&&ts(L,L.prev,P)>=0:ts(L,P,L.prev)<0||ts(L,L.next,P)<0}function Hg(L,P){var N=L,$=!1,he=(L.x+P.x)/2,xe=(L.y+P.y)/2;do N.y>xe!=N.next.y>xe&&N.next.y!==N.y&&he<(N.next.x-N.x)*(xe-N.y)/(N.next.y-N.y)+N.x&&($=!$),N=N.next;while(N!==L);return $}function fd(L,P){var N=new fp(L.i,L.x,L.y),$=new fp(P.i,P.x,P.y),he=L.next,xe=P.prev;return L.next=P,P.prev=L,N.next=he,he.prev=N,$.next=N,N.prev=$,xe.next=$,$.prev=xe,$}function cd(L,P,N,$){var he=new fp(L,P,N);return $?(he.next=$.next,he.prev=$,$.next.prev=he,$.next=he):(he.prev=he,he.next=he),he}function Ah(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function fp(L,P,N){this.i=L,this.x=P,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}cv.deviation=function(L,P,N,$){var he=P&&P.length,xe=he?P[0]*N:L.length,Te=Math.abs(cp(L,0,xe,N));if(he)for(var Ne=0,rt=P.length;Ne<rt;Ne++){var gt=P[Ne]*N,bt=Ne<rt-1?P[Ne+1]*N:L.length;Te-=Math.abs(cp(L,gt,bt,N))}var Gt=0;for(Ne=0;Ne<$.length;Ne+=3){var lr=$[Ne]*N,ir=$[Ne+1]*N,_r=$[Ne+2]*N;Gt+=Math.abs((L[lr]-L[_r])*(L[ir+1]-L[lr+1])-(L[lr]-L[ir])*(L[_r+1]-L[lr+1]))}return Te===0&&Gt===0?0:Math.abs((Gt-Te)/Te)};function cp(L,P,N,$){for(var he=0,xe=P,Te=N-$;xe<N;xe+=$)he+=(L[Te]-L[xe])*(L[xe+1]+L[Te+1]),Te=xe;return he}cv.flatten=function(L){for(var P=L[0][0].length,N={vertices:[],holes:[],dimensions:P},$=0,he=0;he<L.length;he++){for(var xe=0;xe<L[he].length;xe++)for(var Te=0;Te<P;Te++)N.vertices.push(L[he][xe][Te]);he>0&&($+=L[he-1].length,N.holes.push($))}return N},lp.default=Sg;function Vg(L,P,N,$,he){hd(L,P,N||0,$||L.length-1,he||Gg)}function hd(L,P,N,$,he){for(;$>N;){if($-N>600){var xe=$-N+1,Te=P-N+1,Ne=Math.log(xe),rt=.5*Math.exp(2*Ne/3),gt=.5*Math.sqrt(Ne*rt*(xe-rt)/xe)*(Te-xe/2<0?-1:1),bt=Math.max(N,Math.floor(P-Te*rt/xe+gt)),Gt=Math.min($,Math.floor(P+(xe-Te)*rt/xe+gt));hd(L,P,bt,Gt,he)}var lr=L[P],ir=N,_r=$;for(Mh(L,N,P),he(L[$],lr)>0&&Mh(L,N,$);ir<_r;){for(Mh(L,ir,_r),ir++,_r--;he(L[ir],lr)<0;)ir++;for(;he(L[_r],lr)>0;)_r--}he(L[N],lr)===0?Mh(L,N,_r):(_r++,Mh(L,_r,$)),_r<=P&&(N=_r+1),P<=_r&&($=_r-1)}}function Mh(L,P,N){var $=L[P];L[P]=L[N],L[N]=$}function Gg(L,P){return L<P?-1:L>P?1:0}function hp(L,P){var N=L.length;if(N<=1)return[L];for(var $=[],he,xe,Te=0;Te<N;Te++){var Ne=B(L[Te]);Ne!==0&&(L[Te].area=Math.abs(Ne),xe===void 0&&(xe=Ne<0),xe===Ne<0?(he&&$.push(he),he=[L[Te]]):he.push(L[Te]))}if(he&&$.push(he),P>1)for(var rt=0;rt<$.length;rt++)$[rt].length<=P||(Vg($[rt],P,1,$[rt].length-1,Yg),$[rt]=$[rt].slice(0,P));return $}function Yg(L,P){return P.area-L.area}function vp(L,P,N){for(var $=N.patternDependencies,he=!1,xe=0,Te=P;xe<Te.length;xe+=1){var Ne=Te[xe],rt=Ne.paint.get(L+"-pattern");rt.isConstant()||(he=!0);var gt=rt.constantOr(null);gt&&(he=!0,$[gt.to]=!0,$[gt.from]=!0)}return he}function pp(L,P,N,$,he){for(var xe=he.patternDependencies,Te=0,Ne=P;Te<Ne.length;Te+=1){var rt=Ne[Te],gt=rt.paint.get(L+"-pattern"),bt=gt.value;if(bt.kind!=="constant"){var Gt=bt.evaluate({zoom:$-1},N,{},he.availableImages),lr=bt.evaluate({zoom:$},N,{},he.availableImages),ir=bt.evaluate({zoom:$+1},N,{},he.availableImages);Gt=Gt&&Gt.name?Gt.name:Gt,lr=lr&&lr.name?lr.name:lr,ir=ir&&ir.name?ir.name:ir,xe[Gt]=!0,xe[lr]=!0,xe[ir]=!0,N.patterns[rt.id]={min:Gt,mid:lr,max:ir}}}return N}var Wg=500,rf=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fc,this.indexArray=new ef,this.indexArray2=new vc,this.programConfigurations=new ci(sd,P.layers,P.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};rf.prototype.populate=function(P,N,$){this.hasPattern=vp("fill",this.layers,N);for(var he=this.layers[0].layout.get("fill-sort-key"),xe=[],Te=0,Ne=P;Te<Ne.length;Te+=1){var rt=Ne[Te],gt=rt.feature,bt=rt.id,Gt=rt.index,lr=rt.sourceLayerIndex,ir=this.layers[0]._featureFilter.needGeometry,_r={type:gt.type,id:bt,properties:gt.properties,geometry:ir?$i(gt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),_r,$)){ir||(_r.geometry=$i(gt));var Vr=he?he.evaluate(_r,{},$,N.availableImages):void 0,cn={id:bt,properties:gt.properties,type:gt.type,sourceLayerIndex:lr,index:Gt,geometry:_r.geometry,patterns:{},sortKey:Vr};xe.push(cn)}}he&&xe.sort(function(ka,Da){return ka.sortKey-Da.sortKey});for(var an=0,Rn=xe;an<Rn.length;an+=1){var An=Rn[an],Dn=An,Un=Dn.geometry,Kn=Dn.index,ha=Dn.sourceLayerIndex;if(this.hasPattern){var ua=pp("fill",this.layers,An,this.zoom,N);this.patternFeatures.push(ua)}else this.addFeature(An,Un,Kn,$,{});var Ba=P[Kn].feature;N.featureIndex.insert(Ba,Un,Kn,ha,this.index)}},rf.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},rf.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Te=xe[he];this.addFeature(Te,Te.geometry,Te.index,N,$)}},rf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},rf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rf.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,sd),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.indexBuffer2=P.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(P),this.uploaded=!0},rf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},rf.prototype.addFeature=function(P,N,$,he,xe){for(var Te=0,Ne=hp(N,Wg);Te<Ne.length;Te+=1){for(var rt=Ne[Te],gt=0,bt=0,Gt=rt;bt<Gt.length;bt+=1){var lr=Gt[bt];gt+=lr.length}for(var ir=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray),_r=ir.vertexLength,Vr=[],cn=[],an=0,Rn=rt;an<Rn.length;an+=1){var An=Rn[an];if(An.length!==0){An!==rt[0]&&cn.push(Vr.length/2);var Dn=this.segments2.prepareSegment(An.length,this.layoutVertexArray,this.indexArray2),Un=Dn.vertexLength;this.layoutVertexArray.emplaceBack(An[0].x,An[0].y),this.indexArray2.emplaceBack(Un+An.length-1,Un),Vr.push(An[0].x),Vr.push(An[0].y);for(var Kn=1;Kn<An.length;Kn++)this.layoutVertexArray.emplaceBack(An[Kn].x,An[Kn].y),this.indexArray2.emplaceBack(Un+Kn-1,Un+Kn),Vr.push(An[Kn].x),Vr.push(An[Kn].y);Dn.vertexLength+=An.length,Dn.primitiveLength+=An.length}}for(var ha=lp(Vr,cn),ua=0;ua<ha.length;ua+=3)this.indexArray.emplaceBack(_r+ha[ua],_r+ha[ua+1],_r+ha[ua+2]);ir.vertexLength+=gt,ir.primitiveLength+=ha.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Be("FillBucket",rf,{omit:["layers","patternFeatures"]});var jg=new io({"fill-sort-key":new ei(Xt.layout_fill["fill-sort-key"])}),Xg=new io({"fill-antialias":new Ua(Xt.paint_fill["fill-antialias"]),"fill-opacity":new ei(Xt.paint_fill["fill-opacity"]),"fill-color":new ei(Xt.paint_fill["fill-color"]),"fill-outline-color":new ei(Xt.paint_fill["fill-outline-color"]),"fill-translate":new Ua(Xt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ua(Xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Do(Xt.paint_fill["fill-pattern"])}),Zg={paint:Xg,layout:jg},Kg=function(L){function P(N){L.call(this,N,Zg)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.recalculate=function($,he){L.prototype.recalculate.call(this,$,he);var xe=this.paint._values["fill-outline-color"];xe.value.kind==="constant"&&xe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function($){return new rf($)},P.prototype.queryRadius=function(){return Du(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,rt,gt){var bt=yu($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),rt.angle,gt);return Fo(bt,Te)},P.prototype.isTileClipped=function(){return!0},P}(Us),Jg=jo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vd=Jg.members,pd=zc;function zc(L,P,N,$,he){this.properties={},this.extent=N,this.type=0,this._pbf=L,this._geometry=-1,this._keys=$,this._values=he,L.readFields(Qg,this,P)}function Qg(L,P,N){L==1?P.id=N.readVarint():L==2?$g(N,P):L==3?P.type=N.readVarint():L==4&&(P._geometry=N.pos)}function $g(L,P){for(var N=L.readVarint()+L.pos;L.pos<N;){var $=P._keys[L.readVarint()],he=P._values[L.readVarint()];P.properties[$]=he}}zc.types=["Unknown","Point","LineString","Polygon"],zc.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var P=L.readVarint()+L.pos,N=1,$=0,he=0,xe=0,Te=[],Ne;L.pos<P;){if($<=0){var rt=L.readVarint();N=rt&7,$=rt>>3}if($--,N===1||N===2)he+=L.readSVarint(),xe+=L.readSVarint(),N===1&&(Ne&&Te.push(Ne),Ne=[]),Ne.push(new h(he,xe));else if(N===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+N)}return Ne&&Te.push(Ne),Te},zc.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var P=L.readVarint()+L.pos,N=1,$=0,he=0,xe=0,Te=1/0,Ne=-1/0,rt=1/0,gt=-1/0;L.pos<P;){if($<=0){var bt=L.readVarint();N=bt&7,$=bt>>3}if($--,N===1||N===2)he+=L.readSVarint(),xe+=L.readSVarint(),he<Te&&(Te=he),he>Ne&&(Ne=he),xe<rt&&(rt=xe),xe>gt&&(gt=xe);else if(N!==7)throw new Error("unknown command "+N)}return[Te,rt,Ne,gt]},zc.prototype.toGeoJSON=function(L,P,N){var $=this.extent*Math.pow(2,N),he=this.extent*L,xe=this.extent*P,Te=this.loadGeometry(),Ne=zc.types[this.type],rt,gt;function bt(ir){for(var _r=0;_r<ir.length;_r++){var Vr=ir[_r],cn=180-(Vr.y+xe)*360/$;ir[_r]=[(Vr.x+he)*360/$-180,360/Math.PI*Math.atan(Math.exp(cn*Math.PI/180))-90]}}switch(this.type){case 1:var Gt=[];for(rt=0;rt<Te.length;rt++)Gt[rt]=Te[rt][0];Te=Gt,bt(Te);break;case 2:for(rt=0;rt<Te.length;rt++)bt(Te[rt]);break;case 3:for(Te=qg(Te),rt=0;rt<Te.length;rt++)for(gt=0;gt<Te[rt].length;gt++)bt(Te[rt][gt]);break}Te.length===1?Te=Te[0]:Ne="Multi"+Ne;var lr={type:"Feature",geometry:{type:Ne,coordinates:Te},properties:this.properties};return"id"in this&&(lr.id=this.id),lr};function qg(L){var P=L.length;if(P<=1)return[L];for(var N=[],$,he,xe=0;xe<P;xe++){var Te=ey(L[xe]);Te!==0&&(he===void 0&&(he=Te<0),he===Te<0?($&&N.push($),$=[L[xe]]):$.push(L[xe]))}return $&&N.push($),N}function ey(L){for(var P=0,N=0,$=L.length,he=$-1,xe,Te;N<$;he=N++)xe=L[N],Te=L[he],P+=(Te.x-xe.x)*(xe.y+Te.y);return P}var dd=gd;function gd(L,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=L,this._keys=[],this._values=[],this._features=[],L.readFields(ty,this,P),this.length=this._features.length}function ty(L,P,N){L===15?P.version=N.readVarint():L===1?P.name=N.readString():L===5?P.extent=N.readVarint():L===2?P._features.push(N.pos):L===3?P._keys.push(N.readString()):L===4&&P._values.push(ry(N))}function ry(L){for(var P=null,N=L.readVarint()+L.pos;L.pos<N;){var $=L.readVarint()>>3;P=$===1?L.readString():$===2?L.readFloat():$===3?L.readDouble():$===4?L.readVarint64():$===5?L.readVarint():$===6?L.readSVarint():$===7?L.readBoolean():null}return P}gd.prototype.feature=function(L){if(L<0||L>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[L];var P=this._pbf.readVarint()+this._pbf.pos;return new pd(this._pbf,P,this.extent,this._keys,this._values)};var ny=ay;function ay(L,P){this.layers=L.readFields(iy,{},P)}function iy(L,P,N){if(L===3){var $=new dd(N,N.readVarint()+N.pos);$.length&&(P[$.name]=$)}}var oy=ny,sy=pd,ly=dd,Oc={VectorTile:oy,VectorTileFeature:sy,VectorTileLayer:ly},uy=Oc.VectorTileFeature.types,fy=500,dp=Math.pow(2,13);function Sh(L,P,N,$,he,xe,Te,Ne){L.emplaceBack(P,N,Math.floor($*dp)*2+Te,he*dp*2,xe*dp*2,Math.round(Ne))}var nf=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new jf,this.indexArray=new ef,this.programConfigurations=new ci(vd,P.layers,P.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};nf.prototype.populate=function(P,N,$){this.features=[],this.hasPattern=vp("fill-extrusion",this.layers,N);for(var he=0,xe=P;he<xe.length;he+=1){var Te=xe[he],Ne=Te.feature,rt=Te.id,gt=Te.index,bt=Te.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,lr={type:Ne.type,id:rt,properties:Ne.properties,geometry:Gt?$i(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),lr,$)){var ir={id:rt,sourceLayerIndex:bt,index:gt,geometry:Gt?lr.geometry:$i(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id<"u"&&(ir.id=Ne.id),this.hasPattern?this.features.push(pp("fill-extrusion",this.layers,ir,this.zoom,N)):this.addFeature(ir,ir.geometry,gt,$,{}),N.featureIndex.insert(Ne,ir.geometry,gt,bt,this.index,!0)}}},nf.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.features;he<xe.length;he+=1){var Te=xe[he],Ne=Te.geometry;this.addFeature(Te,Ne,Te.index,N,$)}},nf.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},nf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nf.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,vd),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},nf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},nf.prototype.addFeature=function(P,N,$,he,xe){for(var Te=0,Ne=hp(N,fy);Te<Ne.length;Te+=1){for(var rt=Ne[Te],gt=0,bt=0,Gt=rt;bt<Gt.length;bt+=1){var lr=Gt[bt];gt+=lr.length}for(var ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),_r=0,Vr=rt;_r<Vr.length;_r+=1){var cn=Vr[_r];if(cn.length!==0&&!hy(cn))for(var an=0,Rn=0;Rn<cn.length;Rn++){var An=cn[Rn];if(Rn>=1){var Dn=cn[Rn-1];if(!cy(An,Dn)){ir.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Un=An.sub(Dn)._perp()._unit(),Kn=Dn.dist(An);an+Kn>32768&&(an=0),Sh(this.layoutVertexArray,An.x,An.y,Un.x,Un.y,0,0,an),Sh(this.layoutVertexArray,An.x,An.y,Un.x,Un.y,0,1,an),an+=Kn,Sh(this.layoutVertexArray,Dn.x,Dn.y,Un.x,Un.y,0,0,an),Sh(this.layoutVertexArray,Dn.x,Dn.y,Un.x,Un.y,0,1,an);var ha=ir.vertexLength;this.indexArray.emplaceBack(ha,ha+2,ha+1),this.indexArray.emplaceBack(ha+1,ha+2,ha+3),ir.vertexLength+=4,ir.primitiveLength+=2}}}}if(ir.vertexLength+gt>W.MAX_VERTEX_ARRAY_LENGTH&&(ir=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray)),uy[P.type]==="Polygon"){for(var ua=[],Ba=[],ka=ir.vertexLength,Da=0,li=rt;Da<li.length;Da+=1){var za=li[Da];if(za.length!==0){za!==rt[0]&&Ba.push(ua.length/2);for(var Na=0;Na<za.length;Na++){var mi=za[Na];Sh(this.layoutVertexArray,mi.x,mi.y,0,0,1,1,0),ua.push(mi.x),ua.push(mi.y)}}}for(var oi=lp(ua,Ba),Ni=0;Ni<oi.length;Ni+=3)this.indexArray.emplaceBack(ka+oi[Ni],ka+oi[Ni+2],ka+oi[Ni+1]);ir.primitiveLength+=oi.length/3,ir.vertexLength+=gt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Be("FillExtrusionBucket",nf,{omit:["layers","features"]});function cy(L,P){return L.x===P.x&&(L.x<0||L.x>Wa)||L.y===P.y&&(L.y<0||L.y>Wa)}function hy(L){return L.every(function(P){return P.x<0})||L.every(function(P){return P.x>Wa})||L.every(function(P){return P.y<0})||L.every(function(P){return P.y>Wa})}var vy=new io({"fill-extrusion-opacity":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Do(Xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),py={paint:vy},dy=function(L){function P(N){L.call(this,N,py)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new nf($)},P.prototype.queryRadius=function(){return Du(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,rt,gt,bt){var Gt=yu($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),rt.angle,gt),lr=this.paint.get("fill-extrusion-height").evaluate(he,xe),ir=this.paint.get("fill-extrusion-base").evaluate(he,xe),_r=my(Gt,bt,rt,0),Vr=yy(Te,ir,lr,bt),cn=Vr[0],an=Vr[1];return gy(cn,an,_r)},P}(Us);function Eh(L,P){return L.x*P.x+L.y*P.y}function yd(L,P){if(L.length===1){for(var N=0,$=P[N++],he;!he||$.equals(he);)if(he=P[N++],!he)return 1/0;for(;N<P.length;N++){var xe=P[N],Te=L[0],Ne=he.sub($),rt=xe.sub($),gt=Te.sub($),bt=Eh(Ne,Ne),Gt=Eh(Ne,rt),lr=Eh(rt,rt),ir=Eh(gt,Ne),_r=Eh(gt,rt),Vr=bt*lr-Gt*Gt,cn=(lr*ir-Gt*_r)/Vr,an=(bt*_r-Gt*ir)/Vr,Rn=1-cn-an,An=$.z*Rn+he.z*cn+xe.z*an;if(isFinite(An))return An}return 1/0}else{for(var Dn=1/0,Un=0,Kn=P;Un<Kn.length;Un+=1){var ha=Kn[Un];Dn=Math.min(Dn,ha.z)}return Dn}}function gy(L,P,N){var $=1/0;Fo(N,P)&&($=yd(N,P[0]));for(var he=0;he<P.length;he++)for(var xe=P[he],Te=L[he],Ne=0;Ne<xe.length-1;Ne++){var rt=xe[Ne],gt=xe[Ne+1],bt=Te[Ne],Gt=Te[Ne+1],lr=[rt,gt,Gt,bt,rt];vi(N,lr)&&($=Math.min($,yd(N,lr)))}return $===1/0?!1:$}function yy(L,P,N,$){for(var he=[],xe=[],Te=$[8]*P,Ne=$[9]*P,rt=$[10]*P,gt=$[11]*P,bt=$[8]*N,Gt=$[9]*N,lr=$[10]*N,ir=$[11]*N,_r=0,Vr=L;_r<Vr.length;_r+=1){for(var cn=Vr[_r],an=[],Rn=[],An=0,Dn=cn;An<Dn.length;An+=1){var Un=Dn[An],Kn=Un.x,ha=Un.y,ua=$[0]*Kn+$[4]*ha+$[12],Ba=$[1]*Kn+$[5]*ha+$[13],ka=$[2]*Kn+$[6]*ha+$[14],Da=$[3]*Kn+$[7]*ha+$[15],li=ua+Te,za=Ba+Ne,Na=ka+rt,mi=Da+gt,oi=ua+bt,Ni=Ba+Gt,ao=ka+lr,Bi=Da+ir,Ui=new h(li/mi,za/mi);Ui.z=Na/mi,an.push(Ui);var Ii=new h(oi/Bi,Ni/Bi);Ii.z=ao/Bi,Rn.push(Ii)}he.push(an),xe.push(Rn)}return[he,xe]}function my(L,P,N,$){for(var he=[],xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe],rt=[Ne.x,Ne.y,$,1];fv(rt,rt,P),he.push(new h(rt[0]/rt[3],rt[1]/rt[3]))}return he}var xy=jo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),md=xy.members,by=Oc.VectorTileFeature.types,xd=63,_y=Math.cos(75/2*(Math.PI/180)),wy=15,Ty=20,Ay=15,bd=1/2,_d=Math.pow(2,Ay-1)/bd,Sl=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Sc,this.indexArray=new ef,this.programConfigurations=new ci(md,P.layers,P.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Sl.prototype.populate=function(P,N,$){this.hasPattern=vp("line",this.layers,N);for(var he=this.layers[0].layout.get("line-sort-key"),xe=[],Te=0,Ne=P;Te<Ne.length;Te+=1){var rt=Ne[Te],gt=rt.feature,bt=rt.id,Gt=rt.index,lr=rt.sourceLayerIndex,ir=this.layers[0]._featureFilter.needGeometry,_r={type:gt.type,id:bt,properties:gt.properties,geometry:ir?$i(gt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),_r,$)){ir||(_r.geometry=$i(gt));var Vr=he?he.evaluate(_r,{},$):void 0,cn={id:bt,properties:gt.properties,type:gt.type,sourceLayerIndex:lr,index:Gt,geometry:_r.geometry,patterns:{},sortKey:Vr};xe.push(cn)}}he&&xe.sort(function(ka,Da){return ka.sortKey-Da.sortKey});for(var an=0,Rn=xe;an<Rn.length;an+=1){var An=Rn[an],Dn=An,Un=Dn.geometry,Kn=Dn.index,ha=Dn.sourceLayerIndex;if(this.hasPattern){var ua=pp("line",this.layers,An,this.zoom,N);this.patternFeatures.push(ua)}else this.addFeature(An,Un,Kn,$,{});var Ba=P[Kn].feature;N.featureIndex.insert(Ba,Un,Kn,ha,this.index)}},Sl.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},Sl.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Te=xe[he];this.addFeature(Te,Te.geometry,Te.index,N,$)}},Sl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sl.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,md),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Sl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sl.prototype.addFeature=function(P,N,$,he,xe){for(var Te=this.layers[0].layout,Ne=Te.get("line-join").evaluate(P,{}),rt=Te.get("line-cap"),gt=Te.get("line-miter-limit"),bt=Te.get("line-round-limit"),Gt=0,lr=N;Gt<lr.length;Gt+=1){var ir=lr[Gt];this.addLine(ir,P,Ne,rt,gt,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Sl.prototype.addLine=function(P,N,$,he,xe,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Ne=0;Ne<P.length-1;Ne++)this.totalDistance+=P[Ne].dist(P[Ne+1]);this.updateScaledDistance()}for(var rt=by[N.type]==="Polygon",gt=P.length;gt>=2&&P[gt-1].equals(P[gt-2]);)gt--;for(var bt=0;bt<gt-1&&P[bt].equals(P[bt+1]);)bt++;if(!(gt<(rt?3:2))){$==="bevel"&&(xe=1.05);var Gt=this.overscaling<=16?wy*Wa/(512*this.overscaling):0,lr=this.segments.prepareSegment(gt*10,this.layoutVertexArray,this.indexArray),ir,_r=void 0,Vr=void 0,cn=void 0,an=void 0;this.e1=this.e2=-1,rt&&(ir=P[gt-2],an=P[bt].sub(ir)._unit()._perp());for(var Rn=bt;Rn<gt;Rn++)if(Vr=Rn===gt-1?rt?P[bt+1]:void 0:P[Rn+1],!(Vr&&P[Rn].equals(Vr))){an&&(cn=an),ir&&(_r=ir),ir=P[Rn],an=Vr?Vr.sub(ir)._unit()._perp():cn,cn=cn||an;var An=cn.add(an);(An.x!==0||An.y!==0)&&An._unit();var Dn=cn.x*an.x+cn.y*an.y,Un=An.x*an.x+An.y*an.y,Kn=Un!==0?1/Un:1/0,ha=2*Math.sqrt(2-2*Un),ua=Un<_y&&_r&&Vr,Ba=cn.x*an.y-cn.y*an.x>0;if(ua&&Rn>bt){var ka=ir.dist(_r);if(ka>2*Gt){var Da=ir.sub(ir.sub(_r)._mult(Gt/ka)._round());this.updateDistance(_r,Da),this.addCurrentVertex(Da,cn,0,0,lr),_r=Da}}var li=_r&&Vr,za=li?$:rt?"butt":he;if(li&&za==="round"&&(Kn<Te?za="miter":Kn<=2&&(za="fakeround")),za==="miter"&&Kn>xe&&(za="bevel"),za==="bevel"&&(Kn>2&&(za="flipbevel"),Kn<xe&&(za="miter")),_r&&this.updateDistance(_r,ir),za==="miter")An._mult(Kn),this.addCurrentVertex(ir,An,0,0,lr);else if(za==="flipbevel"){if(Kn>100)An=an.mult(-1);else{var Na=Kn*cn.add(an).mag()/cn.sub(an).mag();An._perp()._mult(Na*(Ba?-1:1))}this.addCurrentVertex(ir,An,0,0,lr),this.addCurrentVertex(ir,An.mult(-1),0,0,lr)}else if(za==="bevel"||za==="fakeround"){var mi=-Math.sqrt(Kn*Kn-1),oi=Ba?mi:0,Ni=Ba?0:mi;if(_r&&this.addCurrentVertex(ir,cn,oi,Ni,lr),za==="fakeround")for(var ao=Math.round(ha*180/Math.PI/Ty),Bi=1;Bi<ao;Bi++){var Ui=Bi/ao;if(Ui!==.5){var Ii=Ui-.5,co=1.0904+Dn*(-3.2452+Dn*(3.55645-Dn*1.43519)),go=.848013+Dn*(-1.06021+Dn*.215638);Ui=Ui+Ui*Ii*(Ui-1)*(co*Ii*Ii+go)}var zo=an.sub(cn)._mult(Ui)._add(cn)._unit()._mult(Ba?-1:1);this.addHalfVertex(ir,zo.x,zo.y,!1,Ba,0,lr)}Vr&&this.addCurrentVertex(ir,an,-oi,-Ni,lr)}else if(za==="butt")this.addCurrentVertex(ir,An,0,0,lr);else if(za==="square"){var Go=_r?1:-1;this.addCurrentVertex(ir,An,Go,Go,lr)}else za==="round"&&(_r&&(this.addCurrentVertex(ir,cn,0,0,lr),this.addCurrentVertex(ir,cn,1,1,lr,!0)),Vr&&(this.addCurrentVertex(ir,an,-1,-1,lr,!0),this.addCurrentVertex(ir,an,0,0,lr)));if(ua&&Rn<gt-1){var ms=ir.dist(Vr);if(ms>2*Gt){var as=ir.add(Vr.sub(ir)._mult(Gt/ms)._round());this.updateDistance(ir,as),this.addCurrentVertex(as,an,0,0,lr),ir=as}}}}},Sl.prototype.addCurrentVertex=function(P,N,$,he,xe,Te){Te===void 0&&(Te=!1);var Ne=N.x+N.y*$,rt=N.y-N.x*$,gt=-N.x+N.y*he,bt=-N.y-N.x*he;this.addHalfVertex(P,Ne,rt,Te,!1,$,xe),this.addHalfVertex(P,gt,bt,Te,!0,-he,xe),this.distance>_d/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(P,N,$,he,xe,Te))},Sl.prototype.addHalfVertex=function(P,N,$,he,xe,Te,Ne){var rt=P.x,gt=P.y,bt=this.scaledDistance*bd;this.layoutVertexArray.emplaceBack((rt<<1)+(he?1:0),(gt<<1)+(xe?1:0),Math.round(xd*N)+128,Math.round(xd*$)+128,(Te===0?0:Te<0?-1:1)+1|(bt&63)<<2,bt>>6);var Gt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Gt),Ne.primitiveLength++),xe?this.e2=Gt:this.e1=Gt},Sl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(_d-1):this.distance},Sl.prototype.updateDistance=function(P,N){this.distance+=P.dist(N),this.updateScaledDistance()},Be("LineBucket",Sl,{omit:["layers","patternFeatures"]});var My=new io({"line-cap":new Ua(Xt.layout_line["line-cap"]),"line-join":new ei(Xt.layout_line["line-join"]),"line-miter-limit":new Ua(Xt.layout_line["line-miter-limit"]),"line-round-limit":new Ua(Xt.layout_line["line-round-limit"]),"line-sort-key":new ei(Xt.layout_line["line-sort-key"])}),Sy=new io({"line-opacity":new ei(Xt.paint_line["line-opacity"]),"line-color":new ei(Xt.paint_line["line-color"]),"line-translate":new Ua(Xt.paint_line["line-translate"]),"line-translate-anchor":new Ua(Xt.paint_line["line-translate-anchor"]),"line-width":new ei(Xt.paint_line["line-width"]),"line-gap-width":new ei(Xt.paint_line["line-gap-width"]),"line-offset":new ei(Xt.paint_line["line-offset"]),"line-blur":new ei(Xt.paint_line["line-blur"]),"line-dasharray":new vo(Xt.paint_line["line-dasharray"]),"line-pattern":new Do(Xt.paint_line["line-pattern"]),"line-gradient":new Wo(Xt.paint_line["line-gradient"])}),wd={paint:Sy,layout:My},Ey=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function($,he){return he=new di(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),L.prototype.possiblyEvaluate.call(this,$,he)},P.prototype.evaluate=function($,he,xe,Te){return he=A({},he,{zoom:Math.floor(he.zoom)}),L.prototype.evaluate.call(this,$,he,xe,Te)},P}(ei),Td=new Ey(wd.paint.properties["line-width"].specification);Td.useIntegerZoom=!0;var ky=function(L){function P(N){L.call(this,N,wd)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function($){$==="line-gradient"&&this._updateGradient()},P.prototype._updateGradient=function(){var $=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=od($,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function($,he){L.prototype.recalculate.call(this,$,he),this.paint._values["line-floorwidth"]=Td.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},P.prototype.createBucket=function($){return new Sl($)},P.prototype.queryRadius=function($){var he=$,xe=Ad(zl("line-width",this,he),zl("line-gap-width",this,he)),Te=zl("line-offset",this,he);return xe/2+Math.abs(Te)+Du(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,rt,gt){var bt=yu($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),rt.angle,gt),Gt=gt/2*Ad(this.paint.get("line-width").evaluate(he,xe),this.paint.get("line-gap-width").evaluate(he,xe)),lr=this.paint.get("line-offset").evaluate(he,xe);return lr&&(Te=Cy(Te,lr*gt)),es(bt,Te,Gt)},P.prototype.isTileClipped=function(){return!0},P}(Us);function Ad(L,P){return P>0?P+2*L:L}function Cy(L,P){for(var N=[],$=new h(0,0),he=0;he<L.length;he++){for(var xe=L[he],Te=[],Ne=0;Ne<xe.length;Ne++){var rt=xe[Ne-1],gt=xe[Ne],bt=xe[Ne+1],Gt=Ne===0?$:gt.sub(rt)._unit()._perp(),lr=Ne===xe.length-1?$:bt.sub(gt)._unit()._perp(),ir=Gt._add(lr)._unit(),_r=ir.x*lr.x+ir.y*lr.y;ir._mult(1/_r),Te.push(ir._mult(P)._add(gt))}N.push(Te)}return N}var gp=jo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ly=jo([{name:"a_projected_pos",components:3,type:"Float32"}],4);jo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Py=jo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);jo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Md=jo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Dy=jo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);jo([{name:"triangle",components:3,type:"Uint16"}]),jo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),jo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),jo([{type:"Float32",name:"offsetX"}]),jo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Ry(L,P,N){var $=P.layout.get("text-transform").evaluate(N,{});return $==="uppercase"?L=L.toLocaleUpperCase():$==="lowercase"&&(L=L.toLocaleLowerCase()),qa.applyArabicShaping&&(L=qa.applyArabicShaping(L)),L}function Iy(L,P,N){return L.sections.forEach(function($){$.text=Ry($.text,P,N)}),L}function Fy(L){var P={},N={},$=[],he=0;function xe(an){$.push(L[an]),he++}function Te(an,Rn,An){var Dn=N[an];return delete N[an],N[Rn]=Dn,$[Dn].geometry[0].pop(),$[Dn].geometry[0]=$[Dn].geometry[0].concat(An[0]),Dn}function Ne(an,Rn,An){var Dn=P[Rn];return delete P[Rn],P[an]=Dn,$[Dn].geometry[0].shift(),$[Dn].geometry[0]=An[0].concat($[Dn].geometry[0]),Dn}function rt(an,Rn,An){var Dn=An?Rn[0][Rn[0].length-1]:Rn[0][0];return an+":"+Dn.x+":"+Dn.y}for(var gt=0;gt<L.length;gt++){var bt=L[gt],Gt=bt.geometry,lr=bt.text?bt.text.toString():null;if(!lr){xe(gt);continue}var ir=rt(lr,Gt),_r=rt(lr,Gt,!0);if(ir in N&&_r in P&&N[ir]!==P[_r]){var Vr=Ne(ir,_r,Gt),cn=Te(ir,_r,$[Vr].geometry);delete P[ir],delete N[_r],N[rt(lr,$[cn].geometry,!0)]=cn,$[Vr].geometry=null}else ir in N?Te(ir,_r,Gt):_r in P?Ne(ir,_r,Gt):(xe(gt),P[ir]=he-1,N[_r]=he-1)}return $.filter(function(an){return an.geometry})}var kh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function zy(L){for(var P="",N=0;N<L.length;N++){var $=L.charCodeAt(N+1)||null,he=L.charCodeAt(N-1)||null,xe=(!$||!fn($)||kh[L[N+1]])&&(!he||!fn(he)||kh[L[N-1]]);xe&&kh[L[N]]?P+=kh[L[N]]:P+=L[N]}return P}var Rs=24,Oy=function(L,P,N,$,he){var xe,Te,Ne=he*8-$-1,rt=(1<<Ne)-1,gt=rt>>1,bt=-7,Gt=N?he-1:0,lr=N?-1:1,ir=L[P+Gt];for(Gt+=lr,xe=ir&(1<<-bt)-1,ir>>=-bt,bt+=Ne;bt>0;xe=xe*256+L[P+Gt],Gt+=lr,bt-=8);for(Te=xe&(1<<-bt)-1,xe>>=-bt,bt+=$;bt>0;Te=Te*256+L[P+Gt],Gt+=lr,bt-=8);if(xe===0)xe=1-gt;else{if(xe===rt)return Te?NaN:(ir?-1:1)*(1/0);Te=Te+Math.pow(2,$),xe=xe-gt}return(ir?-1:1)*Te*Math.pow(2,xe-$)},Ny=function(L,P,N,$,he,xe){var Te,Ne,rt,gt=xe*8-he-1,bt=(1<<gt)-1,Gt=bt>>1,lr=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,ir=$?0:xe-1,_r=$?1:-1,Vr=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Ne=isNaN(P)?1:0,Te=bt):(Te=Math.floor(Math.log(P)/Math.LN2),P*(rt=Math.pow(2,-Te))<1&&(Te--,rt*=2),Te+Gt>=1?P+=lr/rt:P+=lr*Math.pow(2,1-Gt),P*rt>=2&&(Te++,rt/=2),Te+Gt>=bt?(Ne=0,Te=bt):Te+Gt>=1?(Ne=(P*rt-1)*Math.pow(2,he),Te=Te+Gt):(Ne=P*Math.pow(2,Gt-1)*Math.pow(2,he),Te=0));he>=8;L[N+ir]=Ne&255,ir+=_r,Ne/=256,he-=8);for(Te=Te<<he|Ne,gt+=he;gt>0;L[N+ir]=Te&255,ir+=_r,Te/=256,gt-=8);L[N+ir-_r]|=Vr*128},dv={read:Oy,write:Ny},gv=po;function po(L){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(L)?L:new Uint8Array(L||0),this.pos=0,this.type=0,this.length=this.buf.length}po.Varint=0,po.Fixed64=1,po.Bytes=2,po.Fixed32=5;var yp=(1<<16)*(1<<16),Sd=1/yp,By=12,Ed=typeof TextDecoder>"u"?null:new TextDecoder("utf8");po.prototype={destroy:function(){this.buf=null},readFields:function(L,P,N){for(N=N||this.length;this.pos<N;){var $=this.readVarint(),he=$>>3,xe=this.pos;this.type=$&7,L(he,P,this),this.pos===xe&&this.skip($)}return P},readMessage:function(L,P){return this.readFields(L,P,this.readVarint()+this.pos)},readFixed32:function(){var L=yv(this.buf,this.pos);return this.pos+=4,L},readSFixed32:function(){var L=Cd(this.buf,this.pos);return this.pos+=4,L},readFixed64:function(){var L=yv(this.buf,this.pos)+yv(this.buf,this.pos+4)*yp;return this.pos+=8,L},readSFixed64:function(){var L=yv(this.buf,this.pos)+Cd(this.buf,this.pos+4)*yp;return this.pos+=8,L},readFloat:function(){var L=dv.read(this.buf,this.pos,!0,23,4);return this.pos+=4,L},readDouble:function(){var L=dv.read(this.buf,this.pos,!0,52,8);return this.pos+=8,L},readVarint:function(L){var P=this.buf,N,$;return $=P[this.pos++],N=$&127,$<128||($=P[this.pos++],N|=($&127)<<7,$<128)||($=P[this.pos++],N|=($&127)<<14,$<128)||($=P[this.pos++],N|=($&127)<<21,$<128)?N:($=P[this.pos],N|=($&15)<<28,Uy(N,L,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var L=this.readVarint();return L%2===1?(L+1)/-2:L/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var L=this.readVarint()+this.pos,P=this.pos;return this.pos=L,L-P>=By&&Ed?em(this.buf,P,L):qy(this.buf,P,L)},readBytes:function(){var L=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,L);return this.pos=L,P},readPackedVarint:function(L,P){if(this.type!==po.Bytes)return L.push(this.readVarint(P));var N=Rf(this);for(L=L||[];this.pos<N;)L.push(this.readVarint(P));return L},readPackedSVarint:function(L){if(this.type!==po.Bytes)return L.push(this.readSVarint());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readSVarint());return L},readPackedBoolean:function(L){if(this.type!==po.Bytes)return L.push(this.readBoolean());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readBoolean());return L},readPackedFloat:function(L){if(this.type!==po.Bytes)return L.push(this.readFloat());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readFloat());return L},readPackedDouble:function(L){if(this.type!==po.Bytes)return L.push(this.readDouble());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readDouble());return L},readPackedFixed32:function(L){if(this.type!==po.Bytes)return L.push(this.readFixed32());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readFixed32());return L},readPackedSFixed32:function(L){if(this.type!==po.Bytes)return L.push(this.readSFixed32());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed32());return L},readPackedFixed64:function(L){if(this.type!==po.Bytes)return L.push(this.readFixed64());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readFixed64());return L},readPackedSFixed64:function(L){if(this.type!==po.Bytes)return L.push(this.readSFixed64());var P=Rf(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed64());return L},skip:function(L){var P=L&7;if(P===po.Varint)for(;this.buf[this.pos++]>127;);else if(P===po.Bytes)this.pos=this.readVarint()+this.pos;else if(P===po.Fixed32)this.pos+=4;else if(P===po.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+P)},writeTag:function(L,P){this.writeVarint(L<<3|P)},realloc:function(L){for(var P=this.length||16;P<this.pos+L;)P*=2;if(P!==this.length){var N=new Uint8Array(P);N.set(this.buf),this.buf=N,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(L){this.realloc(4),Bc(this.buf,L,this.pos),this.pos+=4},writeSFixed32:function(L){this.realloc(4),Bc(this.buf,L,this.pos),this.pos+=4},writeFixed64:function(L){this.realloc(8),Bc(this.buf,L&-1,this.pos),Bc(this.buf,Math.floor(L*Sd),this.pos+4),this.pos+=8},writeSFixed64:function(L){this.realloc(8),Bc(this.buf,L&-1,this.pos),Bc(this.buf,Math.floor(L*Sd),this.pos+4),this.pos+=8},writeVarint:function(L){if(L=+L||0,L>268435455||L<0){Hy(L,this);return}this.realloc(4),this.buf[this.pos++]=L&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=L>>>7&127)))},writeSVarint:function(L){this.writeVarint(L<0?-L*2-1:L*2)},writeBoolean:function(L){this.writeVarint(Boolean(L))},writeString:function(L){L=String(L),this.realloc(L.length*4),this.pos++;var P=this.pos;this.pos=tm(this.buf,L,this.pos);var N=this.pos-P;N>=128&&kd(P,N,this),this.pos=P-1,this.writeVarint(N),this.pos+=N},writeFloat:function(L){this.realloc(4),dv.write(this.buf,L,this.pos,!0,23,4),this.pos+=4},writeDouble:function(L){this.realloc(8),dv.write(this.buf,L,this.pos,!0,52,8),this.pos+=8},writeBytes:function(L){var P=L.length;this.writeVarint(P),this.realloc(P);for(var N=0;N<P;N++)this.buf[this.pos++]=L[N]},writeRawMessage:function(L,P){this.pos++;var N=this.pos;L(P,this);var $=this.pos-N;$>=128&&kd(N,$,this),this.pos=N-1,this.writeVarint($),this.pos+=$},writeMessage:function(L,P,N){this.writeTag(L,po.Bytes),this.writeRawMessage(P,N)},writePackedVarint:function(L,P){P.length&&this.writeMessage(L,Yy,P)},writePackedSVarint:function(L,P){P.length&&this.writeMessage(L,Wy,P)},writePackedBoolean:function(L,P){P.length&&this.writeMessage(L,Zy,P)},writePackedFloat:function(L,P){P.length&&this.writeMessage(L,jy,P)},writePackedDouble:function(L,P){P.length&&this.writeMessage(L,Xy,P)},writePackedFixed32:function(L,P){P.length&&this.writeMessage(L,Ky,P)},writePackedSFixed32:function(L,P){P.length&&this.writeMessage(L,Jy,P)},writePackedFixed64:function(L,P){P.length&&this.writeMessage(L,Qy,P)},writePackedSFixed64:function(L,P){P.length&&this.writeMessage(L,$y,P)},writeBytesField:function(L,P){this.writeTag(L,po.Bytes),this.writeBytes(P)},writeFixed32Field:function(L,P){this.writeTag(L,po.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(L,P){this.writeTag(L,po.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(L,P){this.writeTag(L,po.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(L,P){this.writeTag(L,po.Fixed64),this.writeSFixed64(P)},writeVarintField:function(L,P){this.writeTag(L,po.Varint),this.writeVarint(P)},writeSVarintField:function(L,P){this.writeTag(L,po.Varint),this.writeSVarint(P)},writeStringField:function(L,P){this.writeTag(L,po.Bytes),this.writeString(P)},writeFloatField:function(L,P){this.writeTag(L,po.Fixed32),this.writeFloat(P)},writeDoubleField:function(L,P){this.writeTag(L,po.Fixed64),this.writeDouble(P)},writeBooleanField:function(L,P){this.writeVarintField(L,Boolean(P))}};function Uy(L,P,N){var $=N.buf,he,xe;if(xe=$[N.pos++],he=(xe&112)>>4,xe<128||(xe=$[N.pos++],he|=(xe&127)<<3,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<10,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<17,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<24,xe<128)||(xe=$[N.pos++],he|=(xe&1)<<31,xe<128))return Nc(L,he,P);throw new Error("Expected varint not more than 10 bytes")}function Rf(L){return L.type===po.Bytes?L.readVarint()+L.pos:L.pos+1}function Nc(L,P,N){return N?P*4294967296+(L>>>0):(P>>>0)*4294967296+(L>>>0)}function Hy(L,P){var N,$;if(L>=0?(N=L%4294967296|0,$=L/4294967296|0):(N=~(-L%4294967296),$=~(-L/4294967296),N^4294967295?N=N+1|0:(N=0,$=$+1|0)),L>=18446744073709552e3||L<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10),Vy(N,$,P),Gy($,P)}function Vy(L,P,N){N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos]=L&127}function Gy(L,P){var N=(L&7)<<4;P.buf[P.pos++]|=N|((L>>>=3)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127)))))}function kd(L,P,N){var $=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(Math.LN2*7));N.realloc($);for(var he=N.pos-1;he>=L;he--)N.buf[he+$]=N.buf[he]}function Yy(L,P){for(var N=0;N<L.length;N++)P.writeVarint(L[N])}function Wy(L,P){for(var N=0;N<L.length;N++)P.writeSVarint(L[N])}function jy(L,P){for(var N=0;N<L.length;N++)P.writeFloat(L[N])}function Xy(L,P){for(var N=0;N<L.length;N++)P.writeDouble(L[N])}function Zy(L,P){for(var N=0;N<L.length;N++)P.writeBoolean(L[N])}function Ky(L,P){for(var N=0;N<L.length;N++)P.writeFixed32(L[N])}function Jy(L,P){for(var N=0;N<L.length;N++)P.writeSFixed32(L[N])}function Qy(L,P){for(var N=0;N<L.length;N++)P.writeFixed64(L[N])}function $y(L,P){for(var N=0;N<L.length;N++)P.writeSFixed64(L[N])}function yv(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+L[P+3]*16777216}function Bc(L,P,N){L[N]=P,L[N+1]=P>>>8,L[N+2]=P>>>16,L[N+3]=P>>>24}function Cd(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+(L[P+3]<<24)}function qy(L,P,N){for(var $="",he=P;he<N;){var xe=L[he],Te=null,Ne=xe>239?4:xe>223?3:xe>191?2:1;if(he+Ne>N)break;var rt,gt,bt;Ne===1?xe<128&&(Te=xe):Ne===2?(rt=L[he+1],(rt&192)===128&&(Te=(xe&31)<<6|rt&63,Te<=127&&(Te=null))):Ne===3?(rt=L[he+1],gt=L[he+2],(rt&192)===128&&(gt&192)===128&&(Te=(xe&15)<<12|(rt&63)<<6|gt&63,(Te<=2047||Te>=55296&&Te<=57343)&&(Te=null))):Ne===4&&(rt=L[he+1],gt=L[he+2],bt=L[he+3],(rt&192)===128&&(gt&192)===128&&(bt&192)===128&&(Te=(xe&15)<<18|(rt&63)<<12|(gt&63)<<6|bt&63,(Te<=65535||Te>=1114112)&&(Te=null))),Te===null?(Te=65533,Ne=1):Te>65535&&(Te-=65536,$+=String.fromCharCode(Te>>>10&1023|55296),Te=56320|Te&1023),$+=String.fromCharCode(Te),he+=Ne}return $}function em(L,P,N){return Ed.decode(L.subarray(P,N))}function tm(L,P,N){for(var $=0,he,xe;$<P.length;$++){if(he=P.charCodeAt($),he>55295&&he<57344)if(xe)if(he<56320){L[N++]=239,L[N++]=191,L[N++]=189,xe=he;continue}else he=xe-55296<<10|he-56320|65536,xe=null;else{he>56319||$+1===P.length?(L[N++]=239,L[N++]=191,L[N++]=189):xe=he;continue}else xe&&(L[N++]=239,L[N++]=191,L[N++]=189,xe=null);he<128?L[N++]=he:(he<2048?L[N++]=he>>6|192:(he<65536?L[N++]=he>>12|224:(L[N++]=he>>18|240,L[N++]=he>>12&63|128),L[N++]=he>>6&63|128),L[N++]=he&63|128)}return N}var mp=3;function rm(L,P,N){L===1&&N.readMessage(nm,P)}function nm(L,P,N){if(L===3){var $=N.readMessage(am,{}),he=$.id,xe=$.bitmap,Te=$.width,Ne=$.height,rt=$.left,gt=$.top,bt=$.advance;P.push({id:he,bitmap:new yc({width:Te+2*mp,height:Ne+2*mp},xe),metrics:{width:Te,height:Ne,left:rt,top:gt,advance:bt}})}}function am(L,P,N){L===1?P.id=N.readVarint():L===2?P.bitmap=N.readBytes():L===3?P.width=N.readVarint():L===4?P.height=N.readVarint():L===5?P.left=N.readSVarint():L===6?P.top=N.readSVarint():L===7&&(P.advance=N.readVarint())}function im(L){return new gv(L).readFields(rm,[])}var Ld=mp;function Pd(L){for(var P=0,N=0,$=0,he=L;$<he.length;$+=1){var xe=he[$];P+=xe.w*xe.h,N=Math.max(N,xe.w)}L.sort(function(cn,an){return an.h-cn.h});for(var Te=Math.max(Math.ceil(Math.sqrt(P/.95)),N),Ne=[{x:0,y:0,w:Te,h:1/0}],rt=0,gt=0,bt=0,Gt=L;bt<Gt.length;bt+=1)for(var lr=Gt[bt],ir=Ne.length-1;ir>=0;ir--){var _r=Ne[ir];if(!(lr.w>_r.w||lr.h>_r.h)){if(lr.x=_r.x,lr.y=_r.y,gt=Math.max(gt,lr.y+lr.h),rt=Math.max(rt,lr.x+lr.w),lr.w===_r.w&&lr.h===_r.h){var Vr=Ne.pop();ir<Ne.length&&(Ne[ir]=Vr)}else lr.h===_r.h?(_r.x+=lr.w,_r.w-=lr.w):lr.w===_r.w?(_r.y+=lr.h,_r.h-=lr.h):(Ne.push({x:_r.x+lr.w,y:_r.y,w:_r.w-lr.w,h:lr.h}),_r.y+=lr.h,_r.h-=lr.h);break}}return{w:rt,h:gt,fill:P/(rt*gt)||0}}var Ol=1,mv=function(P,N){var $=N.pixelRatio,he=N.version,xe=N.stretchX,Te=N.stretchY,Ne=N.content;this.paddedRect=P,this.pixelRatio=$,this.stretchX=xe,this.stretchY=Te,this.content=Ne,this.version=he},Ch={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ch.tl.get=function(){return[this.paddedRect.x+Ol,this.paddedRect.y+Ol]},Ch.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Ol,this.paddedRect.y+this.paddedRect.h-Ol]},Ch.tlbr.get=function(){return this.tl.concat(this.br)},Ch.displaySize.get=function(){return[(this.paddedRect.w-Ol*2)/this.pixelRatio,(this.paddedRect.h-Ol*2)/this.pixelRatio]},Object.defineProperties(mv.prototype,Ch);var Lh=function(P,N){var $={},he={};this.haveRenderCallbacks=[];var xe=[];this.addImages(P,$,xe),this.addImages(N,he,xe);var Te=Pd(xe),Ne=Te.w,rt=Te.h,gt=new Ml({width:Ne||1,height:rt||1});for(var bt in P){var Gt=P[bt],lr=$[bt].paddedRect;Ml.copy(Gt.data,gt,{x:0,y:0},{x:lr.x+Ol,y:lr.y+Ol},Gt.data)}for(var ir in N){var _r=N[ir],Vr=he[ir].paddedRect,cn=Vr.x+Ol,an=Vr.y+Ol,Rn=_r.data.width,An=_r.data.height;Ml.copy(_r.data,gt,{x:0,y:0},{x:cn,y:an},_r.data),Ml.copy(_r.data,gt,{x:0,y:An-1},{x:cn,y:an-1},{width:Rn,height:1}),Ml.copy(_r.data,gt,{x:0,y:0},{x:cn,y:an+An},{width:Rn,height:1}),Ml.copy(_r.data,gt,{x:Rn-1,y:0},{x:cn-1,y:an},{width:1,height:An}),Ml.copy(_r.data,gt,{x:0,y:0},{x:cn+Rn,y:an},{width:1,height:An})}this.image=gt,this.iconPositions=$,this.patternPositions=he};Lh.prototype.addImages=function(P,N,$){for(var he in P){var xe=P[he],Te={x:0,y:0,w:xe.data.width+2*Ol,h:xe.data.height+2*Ol};$.push(Te),N[he]=new mv(Te,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},Lh.prototype.patchUpdatedImages=function(P,N){P.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var $ in P.updatedImages)this.patchUpdatedImage(this.iconPositions[$],P.getImage($),N),this.patchUpdatedImage(this.patternPositions[$],P.getImage($),N)},Lh.prototype.patchUpdatedImage=function(P,N,$){if(!(!P||!N)&&P.version!==N.version){P.version=N.version;var he=P.tl,xe=he[0],Te=he[1];$.update(N.data,void 0,{x:xe,y:Te})}},Be("ImagePosition",mv),Be("ImageAtlas",Lh);var ql={horizontal:1,vertical:2,horizontalOnly:3},Ph=-17;function om(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if($.positionedGlyphs.length!==0)return!1}return!0}var Dd=57344,Rd=63743,Uc=function(){this.scale=1,this.fontStack="",this.imageName=null};Uc.forText=function(P,N){var $=new Uc;return $.scale=P||1,$.fontStack=N,$},Uc.forImage=function(P){var N=new Uc;return N.imageName=P,N};var Js=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Js.fromFeature=function(P,N){for(var $=new Js,he=0;he<P.sections.length;he++){var xe=P.sections[he];xe.image?$.addImageSection(xe):$.addTextSection(xe,N)}return $},Js.prototype.length=function(){return this.text.length},Js.prototype.getSection=function(P){return this.sections[this.sectionIndex[P]]},Js.prototype.getSectionIndex=function(P){return this.sectionIndex[P]},Js.prototype.getCharCode=function(P){return this.text.charCodeAt(P)},Js.prototype.verticalizePunctuation=function(){this.text=zy(this.text)},Js.prototype.trim=function(){for(var P=0,N=0;N<this.text.length&&Mf[this.text.charCodeAt(N)];N++)P++;for(var $=this.text.length,he=this.text.length-1;he>=0&&he>=P&&Mf[this.text.charCodeAt(he)];he--)$--;this.text=this.text.substring(P,$),this.sectionIndex=this.sectionIndex.slice(P,$)},Js.prototype.substring=function(P,N){var $=new Js;return $.text=this.text.substring(P,N),$.sectionIndex=this.sectionIndex.slice(P,N),$.sections=this.sections,$},Js.prototype.toString=function(){return this.text},Js.prototype.getMaxScale=function(){var P=this;return this.sectionIndex.reduce(function(N,$){return Math.max(N,P.sections[$].scale)},0)},Js.prototype.addTextSection=function(P,N){this.text+=P.text,this.sections.push(Uc.forText(P.scale,P.fontStack||N));for(var $=this.sections.length-1,he=0;he<P.text.length;++he)this.sectionIndex.push($)},Js.prototype.addImageSection=function(P){var N=P.image?P.image.name:"";if(N.length===0){O("Can't add FormattedSection with an empty image.");return}var $=this.getNextImageSectionCharCode();if(!$){O("Reached maximum number of images "+(Rd-Dd+2));return}this.text+=String.fromCharCode($),this.sections.push(Uc.forImage(N)),this.sectionIndex.push(this.sections.length-1)},Js.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Rd?null:++this.imageSectionID:(this.imageSectionID=Dd,this.imageSectionID)};function sm(L,P){for(var N=[],$=L.text,he=0,xe=0,Te=P;xe<Te.length;xe+=1){var Ne=Te[xe];N.push(L.substring(he,Ne)),he=Ne}return he<$.length&&N.push(L.substring(he,$.length)),N}function xv(L,P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr){var cn=Js.fromFeature(L,he);Gt===ql.vertical&&cn.verticalizePunctuation();var an,Rn=qa.processBidirectionalText,An=qa.processStyledBidirectionalText;if(Rn&&cn.sections.length===1){an=[];for(var Dn=Rn(cn.toString(),xp(cn,gt,xe,P,$,ir,_r)),Un=0,Kn=Dn;Un<Kn.length;Un+=1){var ha=Kn[Un],ua=new Js;ua.text=ha,ua.sections=cn.sections;for(var Ba=0;Ba<ha.length;Ba++)ua.sectionIndex.push(0);an.push(ua)}}else if(An){an=[];for(var ka=An(cn.text,cn.sectionIndex,xp(cn,gt,xe,P,$,ir,_r)),Da=0,li=ka;Da<li.length;Da+=1){var za=li[Da],Na=new Js;Na.text=za[0],Na.sectionIndex=za[1],Na.sections=cn.sections,an.push(Na)}}else an=sm(cn,xp(cn,gt,xe,P,$,ir,_r));var mi=[],oi={positionedLines:mi,text:cn.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:Gt,iconsInText:!1,verticalizable:!1};return fm(oi,P,N,$,an,Te,Ne,rt,Gt,gt,lr,Vr),om(mi)?!1:oi}var Mf={};Mf[9]=!0,Mf[10]=!0,Mf[11]=!0,Mf[12]=!0,Mf[13]=!0,Mf[32]=!0;var Nl={};Nl[10]=!0,Nl[32]=!0,Nl[38]=!0,Nl[40]=!0,Nl[41]=!0,Nl[43]=!0,Nl[45]=!0,Nl[47]=!0,Nl[173]=!0,Nl[183]=!0,Nl[8203]=!0,Nl[8208]=!0,Nl[8211]=!0,Nl[8231]=!0;function Id(L,P,N,$,he,xe){if(P.imageName){var rt=$[P.imageName];return rt?rt.displaySize[0]*P.scale*Rs/xe+he:0}else{var Te=N[P.fontStack],Ne=Te&&Te[L];return Ne?Ne.metrics.advance*P.scale+he:0}}function lm(L,P,N,$,he,xe){for(var Te=0,Ne=0;Ne<L.length();Ne++){var rt=L.getSection(Ne);Te+=Id(L.getCharCode(Ne),rt,$,he,P,xe)}var gt=Math.max(1,Math.ceil(Te/N));return Te/gt}function Fd(L,P,N,$){var he=Math.pow(L-P,2);return $?L<P?he/2:he*2:he+Math.abs(N)*N}function um(L,P,N){var $=0;return L===10&&($-=1e4),N&&($+=150),(L===40||L===65288)&&($+=50),(P===41||P===65289)&&($+=50),$}function zd(L,P,N,$,he,xe){for(var Te=null,Ne=Fd(P,N,he,xe),rt=0,gt=$;rt<gt.length;rt+=1){var bt=gt[rt],Gt=P-bt.x,lr=Fd(Gt,N,he,xe)+bt.badness;lr<=Ne&&(Te=bt,Ne=lr)}return{index:L,x:P,priorBreak:Te,badness:Ne}}function Od(L){return L?Od(L.priorBreak).concat(L.index):[]}function xp(L,P,N,$,he,xe,Te){if(xe!=="point")return[];if(!L)return[];for(var Ne=[],rt=lm(L,P,N,$,he,Te),gt=L.text.indexOf("\u200B")>=0,bt=0,Gt=0;Gt<L.length();Gt++){var lr=L.getSection(Gt),ir=L.getCharCode(Gt);if(Mf[ir]||(bt+=Id(ir,lr,$,he,P,Te)),Gt<L.length()-1){var _r=zr(ir);(Nl[ir]||_r||lr.imageName)&&Ne.push(zd(Gt+1,bt,rt,Ne,um(ir,L.getCharCode(Gt+1),_r&&gt),!1))}}return Od(zd(L.length(),bt,rt,Ne,0,!0))}function bp(L){var P=.5,N=.5;switch(L){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0;break}switch(L){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:P,verticalAlign:N}}function fm(L,P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt){for(var lr=0,ir=Ph,_r=0,Vr=0,cn=Ne==="right"?1:Ne==="left"?0:.5,an=0,Rn=0,An=he;Rn<An.length;Rn+=1){var Dn=An[Rn];Dn.trim();var Un=Dn.getMaxScale(),Kn=(Un-1)*Rs,ha={positionedGlyphs:[],lineOffset:0};L.positionedLines[an]=ha;var ua=ha.positionedGlyphs,Ba=0;if(!Dn.length()){ir+=xe,++an;continue}for(var ka=0;ka<Dn.length();ka++){var Da=Dn.getSection(ka),li=Dn.getSectionIndex(ka),za=Dn.getCharCode(ka),Na=0,mi=null,oi=null,Ni=null,ao=Rs,Bi=!(rt===ql.horizontal||!bt&&!Wr(za)||bt&&(Mf[za]||hn(za)));if(Da.imageName){var zo=$[Da.imageName];if(!zo)continue;Ni=Da.imageName,L.iconsInText=L.iconsInText||!0,oi=zo.paddedRect;var Go=zo.displaySize;Da.scale=Da.scale*Rs/Gt,mi={width:Go[0],height:Go[1],left:Ol,top:-Ld,advance:Bi?Go[1]:Go[0]};var ms=Rs-Go[1]*Da.scale;Na=Kn+ms,ao=mi.advance;var as=Bi?Go[0]*Da.scale-Rs*Un:Go[1]*Da.scale-Rs*Un;as>0&&as>Ba&&(Ba=as)}else{var Ui=N[Da.fontStack],Ii=Ui&&Ui[za];if(Ii&&Ii.rect)oi=Ii.rect,mi=Ii.metrics;else{var co=P[Da.fontStack],go=co&&co[za];if(!go)continue;mi=go.metrics}Na=(Un-Da.scale)*Rs}Bi?(L.verticalizable=!0,ua.push({glyph:za,imageName:Ni,x:lr,y:ir+Na,vertical:Bi,scale:Da.scale,fontStack:Da.fontStack,sectionIndex:li,metrics:mi,rect:oi}),lr+=ao*Da.scale+gt):(ua.push({glyph:za,imageName:Ni,x:lr,y:ir+Na,vertical:Bi,scale:Da.scale,fontStack:Da.fontStack,sectionIndex:li,metrics:mi,rect:oi}),lr+=mi.advance*Da.scale+gt)}if(ua.length!==0){var Qs=lr-gt;_r=Math.max(Qs,_r),cm(ua,0,ua.length-1,cn,Ba)}lr=0;var $s=xe*Un+Ba;ha.lineOffset=Math.max(Ba,Kn),ir+=$s,Vr=Math.max($s,Vr),++an}var xs=ir-Ph,sl=bp(Te),ll=sl.horizontalAlign,hs=sl.verticalAlign;hm(L.positionedLines,cn,ll,hs,_r,Vr,xe,xs,he.length),L.top+=-hs*xs,L.bottom=L.top+xs,L.left+=-ll*_r,L.right=L.left+_r}function cm(L,P,N,$,he){if(!(!$&&!he))for(var xe=L[N],Te=xe.metrics.advance*xe.scale,Ne=(L[N].x+Te)*$,rt=P;rt<=N;rt++)L[rt].x-=Ne,L[rt].y+=he}function hm(L,P,N,$,he,xe,Te,Ne,rt){var gt=(P-N)*he,bt=0;xe!==Te?bt=-Ne*$-Ph:bt=(-$*rt+.5)*Te;for(var Gt=0,lr=L;Gt<lr.length;Gt+=1)for(var ir=lr[Gt],_r=0,Vr=ir.positionedGlyphs;_r<Vr.length;_r+=1){var cn=Vr[_r];cn.x+=gt,cn.y+=bt}}function vm(L,P,N){var $=bp(N),he=$.horizontalAlign,xe=$.verticalAlign,Te=P[0],Ne=P[1],rt=Te-L.displaySize[0]*he,gt=rt+L.displaySize[0],bt=Ne-L.displaySize[1]*xe,Gt=bt+L.displaySize[1];return{image:L,top:bt,bottom:Gt,left:rt,right:gt}}function Nd(L,P,N,$,he,xe){var Te=L.image,Ne;if(Te.content){var rt=Te.content,gt=Te.pixelRatio||1;Ne=[rt[0]/gt,rt[1]/gt,Te.displaySize[0]-rt[2]/gt,Te.displaySize[1]-rt[3]/gt]}var bt=P.left*xe,Gt=P.right*xe,lr,ir,_r,Vr;N==="width"||N==="both"?(Vr=he[0]+bt-$[3],ir=he[0]+Gt+$[1]):(Vr=he[0]+(bt+Gt-Te.displaySize[0])/2,ir=Vr+Te.displaySize[0]);var cn=P.top*xe,an=P.bottom*xe;return N==="height"||N==="both"?(lr=he[1]+cn-$[0],_r=he[1]+an+$[2]):(lr=he[1]+(cn+an-Te.displaySize[1])/2,_r=lr+Te.displaySize[1]),{image:Te,top:lr,right:ir,bottom:_r,left:Vr,collisionPadding:Ne}}var Hc=function(L){function P(N,$,he,xe){L.call(this,N,$),this.angle=he,xe!==void 0&&(this.segment=xe)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(h);Be("Anchor",Hc);var af=128;function _p(L,P){var N=P.expression;if(N.kind==="constant"){var $=N.evaluate(new di(L+1));return{kind:"constant",layoutSize:$}}else{if(N.kind==="source")return{kind:"source"};for(var he=N.zoomStops,xe=N.interpolationType,Te=0;Te<he.length&&he[Te]<=L;)Te++;Te=Math.max(0,Te-1);for(var Ne=Te;Ne<he.length&&he[Ne]<L+1;)Ne++;Ne=Math.min(he.length-1,Ne);var rt=he[Te],gt=he[Ne];if(N.kind==="composite")return{kind:"composite",minZoom:rt,maxZoom:gt,interpolationType:xe};var bt=N.evaluate(new di(rt)),Gt=N.evaluate(new di(gt));return{kind:"camera",minZoom:rt,maxZoom:gt,minSize:bt,maxSize:Gt,interpolationType:xe}}}function Bd(L,P,N){var $=P.uSize,he=P.uSizeT,xe=N.lowerSize,Te=N.upperSize;return L.kind==="source"?xe/af:L.kind==="composite"?bo(xe/af,Te/af,he):$}function Ud(L,P){var N=0,$=0;if(L.kind==="constant")$=L.layoutSize;else if(L.kind!=="source"){var he=L.interpolationType,xe=L.minZoom,Te=L.maxZoom,Ne=he?c(_o.interpolationFactor(he,P,xe,Te),0,1):0;L.kind==="camera"?$=bo(L.minSize,L.maxSize,Ne):N=Ne}return{uSizeT:N,uSize:$}}var pm=Object.freeze({__proto__:null,getSizeData:_p,evaluateSizeForFeature:Bd,evaluateSizeForZoom:Ud,SIZE_PACK_FACTOR:af});function Hd(L,P,N,$,he){if(P.segment===void 0)return!0;for(var xe=P,Te=P.segment+1,Ne=0;Ne>-N/2;){if(Te--,Te<0)return!1;Ne-=L[Te].dist(xe),xe=L[Te]}Ne+=L[Te].dist(L[Te+1]),Te++;for(var rt=[],gt=0;Ne<N/2;){var bt=L[Te-1],Gt=L[Te],lr=L[Te+1];if(!lr)return!1;var ir=bt.angleTo(Gt)-Gt.angleTo(lr);for(ir=Math.abs((ir+3*Math.PI)%(Math.PI*2)-Math.PI),rt.push({distance:Ne,angleDelta:ir}),gt+=ir;Ne-rt[0].distance>$;)gt-=rt.shift().angleDelta;if(gt>he)return!1;Te++,Ne+=Gt.dist(lr)}return!0}function Vd(L){for(var P=0,N=0;N<L.length-1;N++)P+=L[N].dist(L[N+1]);return P}function Gd(L,P,N){return L?3/5*P*N:0}function Yd(L,P){return Math.max(L?L.right-L.left:0,P?P.right-P.left:0)}function dm(L,P,N,$,he,xe){for(var Te=Gd(N,he,xe),Ne=Yd(N,$)*xe,rt=0,gt=Vd(L)/2,bt=0;bt<L.length-1;bt++){var Gt=L[bt],lr=L[bt+1],ir=Gt.dist(lr);if(rt+ir>gt){var _r=(gt-rt)/ir,Vr=bo(Gt.x,lr.x,_r),cn=bo(Gt.y,lr.y,_r),an=new Hc(Vr,cn,lr.angleTo(Gt),bt);return an._round(),!Te||Hd(L,an,Ne,Te,P)?an:void 0}rt+=ir}}function gm(L,P,N,$,he,xe,Te,Ne,rt){var gt=Gd($,xe,Te),bt=Yd($,he),Gt=bt*Te,lr=L[0].x===0||L[0].x===rt||L[0].y===0||L[0].y===rt;P-Gt<P/4&&(P=Gt+P/4);var ir=xe*2,_r=lr?P/2*Ne%P:(bt/2+ir)*Te*Ne%P;return Wd(L,_r,P,gt,N,Gt,lr,!1,rt)}function Wd(L,P,N,$,he,xe,Te,Ne,rt){for(var gt=xe/2,bt=Vd(L),Gt=0,lr=P-N,ir=[],_r=0;_r<L.length-1;_r++){for(var Vr=L[_r],cn=L[_r+1],an=Vr.dist(cn),Rn=cn.angleTo(Vr);lr+N<Gt+an;){lr+=N;var An=(lr-Gt)/an,Dn=bo(Vr.x,cn.x,An),Un=bo(Vr.y,cn.y,An);if(Dn>=0&&Dn<rt&&Un>=0&&Un<rt&&lr-gt>=0&&lr+gt<=bt){var Kn=new Hc(Dn,Un,Rn,_r);Kn._round(),(!$||Hd(L,Kn,xe,$,he))&&ir.push(Kn)}}Gt+=an}return!Ne&&!ir.length&&!Te&&(ir=Wd(L,Gt/2,N,$,he,xe,Te,!0,rt)),ir}function jd(L,P,N,$,he){for(var xe=[],Te=0;Te<L.length;Te++)for(var Ne=L[Te],rt=void 0,gt=0;gt<Ne.length-1;gt++){var bt=Ne[gt],Gt=Ne[gt+1];bt.x<P&&Gt.x<P||(bt.x<P?bt=new h(P,bt.y+(Gt.y-bt.y)*((P-bt.x)/(Gt.x-bt.x)))._round():Gt.x<P&&(Gt=new h(P,bt.y+(Gt.y-bt.y)*((P-bt.x)/(Gt.x-bt.x)))._round()),!(bt.y<N&&Gt.y<N)&&(bt.y<N?bt=new h(bt.x+(Gt.x-bt.x)*((N-bt.y)/(Gt.y-bt.y)),N)._round():Gt.y<N&&(Gt=new h(bt.x+(Gt.x-bt.x)*((N-bt.y)/(Gt.y-bt.y)),N)._round()),!(bt.x>=$&&Gt.x>=$)&&(bt.x>=$?bt=new h($,bt.y+(Gt.y-bt.y)*(($-bt.x)/(Gt.x-bt.x)))._round():Gt.x>=$&&(Gt=new h($,bt.y+(Gt.y-bt.y)*(($-bt.x)/(Gt.x-bt.x)))._round()),!(bt.y>=he&&Gt.y>=he)&&(bt.y>=he?bt=new h(bt.x+(Gt.x-bt.x)*((he-bt.y)/(Gt.y-bt.y)),he)._round():Gt.y>=he&&(Gt=new h(bt.x+(Gt.x-bt.x)*((he-bt.y)/(Gt.y-bt.y)),he)._round()),(!rt||!bt.equals(rt[rt.length-1]))&&(rt=[bt],xe.push(rt)),rt.push(Gt)))))}return xe}var Vc=Ol;function Xd(L,P,N,$){var he=[],xe=L.image,Te=xe.pixelRatio,Ne=xe.paddedRect.w-2*Vc,rt=xe.paddedRect.h-2*Vc,gt=L.right-L.left,bt=L.bottom-L.top,Gt=xe.stretchX||[[0,Ne]],lr=xe.stretchY||[[0,rt]],ir=function(Ui,Ii){return Ui+Ii[1]-Ii[0]},_r=Gt.reduce(ir,0),Vr=lr.reduce(ir,0),cn=Ne-_r,an=rt-Vr,Rn=0,An=_r,Dn=0,Un=Vr,Kn=0,ha=cn,ua=0,Ba=an;if(xe.content&&$){var ka=xe.content;Rn=bv(Gt,0,ka[0]),Dn=bv(lr,0,ka[1]),An=bv(Gt,ka[0],ka[2]),Un=bv(lr,ka[1],ka[3]),Kn=ka[0]-Rn,ua=ka[1]-Dn,ha=ka[2]-ka[0]-An,Ba=ka[3]-ka[1]-Un}var Da=function(Ui,Ii,co,go){var zo=_v(Ui.stretch-Rn,An,gt,L.left),Go=wv(Ui.fixed-Kn,ha,Ui.stretch,_r),ms=_v(Ii.stretch-Dn,Un,bt,L.top),as=wv(Ii.fixed-ua,Ba,Ii.stretch,Vr),Qs=_v(co.stretch-Rn,An,gt,L.left),$s=wv(co.fixed-Kn,ha,co.stretch,_r),xs=_v(go.stretch-Dn,Un,bt,L.top),sl=wv(go.fixed-ua,Ba,go.stretch,Vr),ll=new h(zo,ms),hs=new h(Qs,ms),ul=new h(Qs,xs),eu=new h(zo,xs),zf=new h(Go/Te,as/Te),tc=new h($s/Te,sl/Te),rc=P*Math.PI/180;if(rc){var nc=Math.sin(rc),Jc=Math.cos(rc),Iu=[Jc,-nc,nc,Jc];ll._matMult(Iu),hs._matMult(Iu),eu._matMult(Iu),ul._matMult(Iu)}var kv=Ui.stretch+Ui.fixed,Cp=co.stretch+co.fixed,Cv=Ii.stretch+Ii.fixed,Lp=go.stretch+go.fixed,mu={x:xe.paddedRect.x+Vc+kv,y:xe.paddedRect.y+Vc+Cv,w:Cp-kv,h:Lp-Cv},Qc=ha/Te/gt,Lv=Ba/Te/bt;return{tl:ll,tr:hs,bl:eu,br:ul,tex:mu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:zf,pixelOffsetBR:tc,minFontScaleX:Qc,minFontScaleY:Lv,isSDF:N}};if(!$||!xe.stretchX&&!xe.stretchY)he.push(Da({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:rt+1}));else for(var li=Zd(Gt,cn,_r),za=Zd(lr,an,Vr),Na=0;Na<li.length-1;Na++)for(var mi=li[Na],oi=li[Na+1],Ni=0;Ni<za.length-1;Ni++){var ao=za[Ni],Bi=za[Ni+1];he.push(Da(mi,ao,oi,Bi))}return he}function bv(L,P,N){for(var $=0,he=0,xe=L;he<xe.length;he+=1){var Te=xe[he];$+=Math.max(P,Math.min(N,Te[1]))-Math.max(P,Math.min(N,Te[0]))}return $}function Zd(L,P,N){for(var $=[{fixed:-Vc,stretch:0}],he=0,xe=L;he<xe.length;he+=1){var Te=xe[he],Ne=Te[0],rt=Te[1],gt=$[$.length-1];$.push({fixed:Ne-gt.stretch,stretch:gt.stretch}),$.push({fixed:Ne-gt.stretch,stretch:gt.stretch+(rt-Ne)})}return $.push({fixed:P+Vc,stretch:N}),$}function _v(L,P,N,$){return L/P*N+$}function wv(L,P,N,$){return L-P*N/$}function ym(L,P,N,$,he,xe,Te,Ne){for(var rt=$.layout.get("text-rotate").evaluate(xe,{})*Math.PI/180,gt=[],bt=0,Gt=P.positionedLines;bt<Gt.length;bt+=1)for(var lr=Gt[bt],ir=0,_r=lr.positionedGlyphs;ir<_r.length;ir+=1){var Vr=_r[ir];if(!!Vr.rect){var cn=Vr.rect||{},an=1,Rn=Ld+an,An=!0,Dn=1,Un=0,Kn=(he||Ne)&&Vr.vertical,ha=Vr.metrics.advance*Vr.scale/2;if(Ne&&P.verticalizable){var ua=(Vr.scale-1)*Rs,Ba=(Rs-Vr.metrics.width*Vr.scale)/2;Un=lr.lineOffset/2-(Vr.imageName?-Ba:ua)}if(Vr.imageName){var ka=Te[Vr.imageName];An=ka.sdf,Dn=ka.pixelRatio,Rn=Ol/Dn}var Da=he?[Vr.x+ha,Vr.y]:[0,0],li=he?[0,0]:[Vr.x+ha+N[0],Vr.y+N[1]-Un],za=[0,0];Kn&&(za=li,li=[0,0]);var Na=(Vr.metrics.left-Rn)*Vr.scale-ha+li[0],mi=(-Vr.metrics.top-Rn)*Vr.scale+li[1],oi=Na+cn.w*Vr.scale/Dn,Ni=mi+cn.h*Vr.scale/Dn,ao=new h(Na,mi),Bi=new h(oi,mi),Ui=new h(Na,Ni),Ii=new h(oi,Ni);if(Kn){var co=new h(-ha,ha-Ph),go=-Math.PI/2,zo=Rs/2-ha,Go=Vr.imageName?zo:0,ms=new h(5-Ph-zo,-Go),as=new(Function.prototype.bind.apply(h,[null].concat(za)));ao._rotateAround(go,co)._add(ms)._add(as),Bi._rotateAround(go,co)._add(ms)._add(as),Ui._rotateAround(go,co)._add(ms)._add(as),Ii._rotateAround(go,co)._add(ms)._add(as)}if(rt){var Qs=Math.sin(rt),$s=Math.cos(rt),xs=[$s,-Qs,Qs,$s];ao._matMult(xs),Bi._matMult(xs),Ui._matMult(xs),Ii._matMult(xs)}var sl=new h(0,0),ll=new h(0,0),hs=0,ul=0;gt.push({tl:ao,tr:Bi,bl:Ui,br:Ii,tex:cn,writingMode:P.writingMode,glyphOffset:Da,sectionIndex:Vr.sectionIndex,isSDF:An,pixelOffsetTL:sl,pixelOffsetBR:ll,minFontScaleX:hs,minFontScaleY:ul})}}return gt}var Tv=function(P,N,$,he,xe,Te,Ne,rt,gt,bt){if(this.boxStartIndex=P.length,gt){var Gt=Te.top,lr=Te.bottom,ir=Te.collisionPadding;ir&&(Gt-=ir[1],lr+=ir[3]);var _r=lr-Gt;_r>0&&(_r=Math.max(10,_r),this.circleDiameter=_r)}else{var Vr=Te.top*Ne-rt,cn=Te.bottom*Ne+rt,an=Te.left*Ne-rt,Rn=Te.right*Ne+rt,An=Te.collisionPadding;if(An&&(an-=An[0]*Ne,Vr-=An[1]*Ne,Rn+=An[2]*Ne,cn+=An[3]*Ne),bt){var Dn=new h(an,Vr),Un=new h(Rn,Vr),Kn=new h(an,cn),ha=new h(Rn,cn),ua=bt*Math.PI/180;Dn._rotate(ua),Un._rotate(ua),Kn._rotate(ua),ha._rotate(ua),an=Math.min(Dn.x,Un.x,Kn.x,ha.x),Rn=Math.max(Dn.x,Un.x,Kn.x,ha.x),Vr=Math.min(Dn.y,Un.y,Kn.y,ha.y),cn=Math.max(Dn.y,Un.y,Kn.y,ha.y)}P.emplaceBack(N.x,N.y,an,Vr,Rn,cn,$,he,xe)}this.boxEndIndex=P.length},Gc=function(P,N){if(P===void 0&&(P=[]),N===void 0&&(N=mm),this.data=P,this.length=this.data.length,this.compare=N,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};Gc.prototype.push=function(P){this.data.push(P),this.length++,this._up(this.length-1)},Gc.prototype.pop=function(){if(this.length!==0){var P=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),P}},Gc.prototype.peek=function(){return this.data[0]},Gc.prototype._up=function(P){for(var N=this,$=N.data,he=N.compare,xe=$[P];P>0;){var Te=P-1>>1,Ne=$[Te];if(he(xe,Ne)>=0)break;$[P]=Ne,P=Te}$[P]=xe},Gc.prototype._down=function(P){for(var N=this,$=N.data,he=N.compare,xe=this.length>>1,Te=$[P];P<xe;){var Ne=(P<<1)+1,rt=$[Ne],gt=Ne+1;if(gt<this.length&&he($[gt],rt)<0&&(Ne=gt,rt=$[gt]),he(rt,Te)>=0)break;$[P]=rt,P=Ne}$[P]=Te};function mm(L,P){return L<P?-1:L>P?1:0}function xm(L,P,N){P===void 0&&(P=1),N===void 0&&(N=!1);for(var $=1/0,he=1/0,xe=-1/0,Te=-1/0,Ne=L[0],rt=0;rt<Ne.length;rt++){var gt=Ne[rt];(!rt||gt.x<$)&&($=gt.x),(!rt||gt.y<he)&&(he=gt.y),(!rt||gt.x>xe)&&(xe=gt.x),(!rt||gt.y>Te)&&(Te=gt.y)}var bt=xe-$,Gt=Te-he,lr=Math.min(bt,Gt),ir=lr/2,_r=new Gc([],bm);if(lr===0)return new h($,he);for(var Vr=$;Vr<xe;Vr+=lr)for(var cn=he;cn<Te;cn+=lr)_r.push(new Yc(Vr+ir,cn+ir,ir,L));for(var an=wm(L),Rn=_r.length;_r.length;){var An=_r.pop();(An.d>an.d||!an.d)&&(an=An,N&&console.log("found best %d after %d probes",Math.round(1e4*An.d)/1e4,Rn)),!(An.max-an.d<=P)&&(ir=An.h/2,_r.push(new Yc(An.p.x-ir,An.p.y-ir,ir,L)),_r.push(new Yc(An.p.x+ir,An.p.y-ir,ir,L)),_r.push(new Yc(An.p.x-ir,An.p.y+ir,ir,L)),_r.push(new Yc(An.p.x+ir,An.p.y+ir,ir,L)),Rn+=4)}return N&&(console.log("num probes: "+Rn),console.log("best distance: "+an.d)),an.p}function bm(L,P){return P.max-L.max}function Yc(L,P,N,$){this.p=new h(L,P),this.h=N,this.d=_m(this.p,$),this.max=this.d+this.h*Math.SQRT2}function _m(L,P){for(var N=!1,$=1/0,he=0;he<P.length;he++)for(var xe=P[he],Te=0,Ne=xe.length,rt=Ne-1;Te<Ne;rt=Te++){var gt=xe[Te],bt=xe[rt];gt.y>L.y!=bt.y>L.y&&L.x<(bt.x-gt.x)*(L.y-gt.y)/(bt.y-gt.y)+gt.x&&(N=!N),$=Math.min($,tf(L,gt,bt))}return(N?1:-1)*Math.sqrt($)}function wm(L){for(var P=0,N=0,$=0,he=L[0],xe=0,Te=he.length,Ne=Te-1;xe<Te;Ne=xe++){var rt=he[xe],gt=he[Ne],bt=rt.x*gt.y-gt.x*rt.y;N+=(rt.x+gt.x)*bt,$+=(rt.y+gt.y)*bt,P+=bt*3}return new Yc(N/P,$/P,0,L)}var Wc=7,wp=Number.POSITIVE_INFINITY;function Kd(L,P){function N(he,xe){var Te=0,Ne=0;xe<0&&(xe=0);var rt=xe/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ne=rt-Wc;break;case"bottom-right":case"bottom-left":Ne=-rt+Wc;break;case"bottom":Ne=-xe+Wc;break;case"top":Ne=xe-Wc;break}switch(he){case"top-right":case"bottom-right":Te=-rt;break;case"top-left":case"bottom-left":Te=rt;break;case"left":Te=xe;break;case"right":Te=-xe;break}return[Te,Ne]}function $(he,xe,Te){var Ne=0,rt=0;switch(xe=Math.abs(xe),Te=Math.abs(Te),he){case"top-right":case"top-left":case"top":rt=Te-Wc;break;case"bottom-right":case"bottom-left":case"bottom":rt=-Te+Wc;break}switch(he){case"top-right":case"bottom-right":case"right":Ne=-xe;break;case"top-left":case"bottom-left":case"left":Ne=xe;break}return[Ne,rt]}return P[1]!==wp?$(L,P[0],P[1]):N(L,P[0])}function Tm(L,P,N,$,he,xe,Te){L.createArrays();var Ne=512*L.overscaling;L.tilePixelRatio=Wa/Ne,L.compareText={},L.iconsNeedLinear=!1;var rt=L.layers[0].layout,gt=L.layers[0]._unevaluatedLayout._values,bt={};if(L.textSizeData.kind==="composite"){var Gt=L.textSizeData,lr=Gt.minZoom,ir=Gt.maxZoom;bt.compositeTextSizes=[gt["text-size"].possiblyEvaluate(new di(lr),Te),gt["text-size"].possiblyEvaluate(new di(ir),Te)]}if(L.iconSizeData.kind==="composite"){var _r=L.iconSizeData,Vr=_r.minZoom,cn=_r.maxZoom;bt.compositeIconSizes=[gt["icon-size"].possiblyEvaluate(new di(Vr),Te),gt["icon-size"].possiblyEvaluate(new di(cn),Te)]}bt.layoutTextSize=gt["text-size"].possiblyEvaluate(new di(L.zoom+1),Te),bt.layoutIconSize=gt["icon-size"].possiblyEvaluate(new di(L.zoom+1),Te),bt.textMaxSize=gt["text-size"].possiblyEvaluate(new di(18));for(var an=rt.get("text-line-height")*Rs,Rn=rt.get("text-rotation-alignment")==="map"&&rt.get("symbol-placement")!=="point",An=rt.get("text-keep-upright"),Dn=rt.get("text-size"),Un=function(){var ua=ha[Kn],Ba=rt.get("text-font").evaluate(ua,{},Te).join(","),ka=Dn.evaluate(ua,{},Te),Da=bt.layoutTextSize.evaluate(ua,{},Te),li=bt.layoutIconSize.evaluate(ua,{},Te),za={horizontal:{},vertical:void 0},Na=ua.text,mi=[0,0];if(Na){var oi=Na.toString(),Ni=rt.get("text-letter-spacing").evaluate(ua,{},Te)*Rs,ao=nn(oi)?Ni:0,Bi=rt.get("text-anchor").evaluate(ua,{},Te),Ui=rt.get("text-variable-anchor");if(!Ui){var Ii=rt.get("text-radial-offset").evaluate(ua,{},Te);Ii?mi=Kd(Bi,[Ii*Rs,wp]):mi=rt.get("text-offset").evaluate(ua,{},Te).map(function(zf){return zf*Rs})}var co=Rn?"center":rt.get("text-justify").evaluate(ua,{},Te),go=rt.get("symbol-placement"),zo=go==="point"?rt.get("text-max-width").evaluate(ua,{},Te)*Rs:0,Go=function(){L.allowVerticalPlacement&&Lr(oi)&&(za.vertical=xv(Na,P,N,he,Ba,zo,an,Bi,"left",ao,mi,ql.vertical,!0,go,Da,ka))};if(!Rn&&Ui){for(var ms=co==="auto"?Ui.map(function(zf){return Tp(zf)}):[co],as=!1,Qs=0;Qs<ms.length;Qs++){var $s=ms[Qs];if(!za.horizontal[$s])if(as)za.horizontal[$s]=za.horizontal[0];else{var xs=xv(Na,P,N,he,Ba,zo,an,"center",$s,ao,mi,ql.horizontal,!1,go,Da,ka);xs&&(za.horizontal[$s]=xs,as=xs.positionedLines.length===1)}}Go()}else{co==="auto"&&(co=Tp(Bi));var sl=xv(Na,P,N,he,Ba,zo,an,Bi,co,ao,mi,ql.horizontal,!1,go,Da,ka);sl&&(za.horizontal[co]=sl),Go(),Lr(oi)&&Rn&&An&&(za.vertical=xv(Na,P,N,he,Ba,zo,an,Bi,co,ao,mi,ql.vertical,!1,go,Da,ka))}}var ll=void 0,hs=!1;if(ua.icon&&ua.icon.name){var ul=$[ua.icon.name];ul&&(ll=vm(he[ua.icon.name],rt.get("icon-offset").evaluate(ua,{},Te),rt.get("icon-anchor").evaluate(ua,{},Te)),hs=ul.sdf,L.sdfIcons===void 0?L.sdfIcons=ul.sdf:L.sdfIcons!==ul.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ul.pixelRatio!==L.pixelRatio||rt.get("icon-rotate").constantOr(1)!==0)&&(L.iconsNeedLinear=!0))}var eu=Qd(za.horizontal)||za.vertical;L.iconsInText=eu?eu.iconsInText:!1,(eu||ll)&&Am(L,ua,za,ll,$,bt,Da,li,mi,hs,Te)},Kn=0,ha=L.features;Kn<ha.length;Kn+=1)Un();xe&&L.generateCollisionDebugBuffers()}function Tp(L){switch(L){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Am(L,P,N,$,he,xe,Te,Ne,rt,gt,bt){var Gt=xe.textMaxSize.evaluate(P,{});Gt===void 0&&(Gt=Te);var lr=L.layers[0].layout,ir=lr.get("icon-offset").evaluate(P,{},bt),_r=Qd(N.horizontal),Vr=24,cn=Te/Vr,an=L.tilePixelRatio*cn,Rn=L.tilePixelRatio*Gt/Vr,An=L.tilePixelRatio*Ne,Dn=L.tilePixelRatio*lr.get("symbol-spacing"),Un=lr.get("text-padding")*L.tilePixelRatio,Kn=lr.get("icon-padding")*L.tilePixelRatio,ha=lr.get("text-max-angle")/180*Math.PI,ua=lr.get("text-rotation-alignment")==="map"&&lr.get("symbol-placement")!=="point",Ba=lr.get("icon-rotation-alignment")==="map"&&lr.get("symbol-placement")!=="point",ka=lr.get("symbol-placement"),Da=Dn/2,li=lr.get("icon-text-fit"),za;$&&li!=="none"&&(L.allowVerticalPlacement&&N.vertical&&(za=Nd($,N.vertical,li,lr.get("icon-text-fit-padding"),ir,cn)),_r&&($=Nd($,_r,li,lr.get("icon-text-fit-padding"),ir,cn)));var Na=function(Jc,Iu){Iu.x<0||Iu.x>=Wa||Iu.y<0||Iu.y>=Wa||Mm(L,Iu,Jc,N,$,he,za,L.layers[0],L.collisionBoxArray,P.index,P.sourceLayerIndex,L.index,an,Un,ua,rt,An,Kn,Ba,ir,P,xe,gt,bt,Te)};if(ka==="line")for(var mi=0,oi=jd(P.geometry,0,0,Wa,Wa);mi<oi.length;mi+=1)for(var Ni=oi[mi],ao=gm(Ni,Dn,ha,N.vertical||_r,$,Vr,Rn,L.overscaling,Wa),Bi=0,Ui=ao;Bi<Ui.length;Bi+=1){var Ii=Ui[Bi],co=_r;(!co||!Sm(L,co.text,Da,Ii))&&Na(Ni,Ii)}else if(ka==="line-center")for(var go=0,zo=P.geometry;go<zo.length;go+=1){var Go=zo[go];if(Go.length>1){var ms=dm(Go,ha,N.vertical||_r,$,Vr,Rn);ms&&Na(Go,ms)}}else if(P.type==="Polygon")for(var as=0,Qs=hp(P.geometry,0);as<Qs.length;as+=1){var $s=Qs[as],xs=xm($s,16);Na($s[0],new Hc(xs.x,xs.y,0))}else if(P.type==="LineString")for(var sl=0,ll=P.geometry;sl<ll.length;sl+=1){var hs=ll[sl];Na(hs,new Hc(hs[0].x,hs[0].y,0))}else if(P.type==="Point")for(var ul=0,eu=P.geometry;ul<eu.length;ul+=1)for(var zf=eu[ul],tc=0,rc=zf;tc<rc.length;tc+=1){var nc=rc[tc];Na([nc],new Hc(nc.x,nc.y,0))}}var Dh=255,qf=Dh*af;function Jd(L,P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r){var Vr=ym(P,N,Ne,he,xe,Te,$,L.allowVerticalPlacement),cn=L.textSizeData,an=null;cn.kind==="source"?(an=[af*he.layout.get("text-size").evaluate(Te,{})],an[0]>qf&&O(L.layerIds[0]+': Value for "text-size" is >= '+Dh+'. Reduce your "text-size".')):cn.kind==="composite"&&(an=[af*ir.compositeTextSizes[0].evaluate(Te,{},_r),af*ir.compositeTextSizes[1].evaluate(Te,{},_r)],(an[0]>qf||an[1]>qf)&&O(L.layerIds[0]+': Value for "text-size" is >= '+Dh+'. Reduce your "text-size".')),L.addSymbols(L.text,Vr,an,Ne,xe,Te,gt,P,rt.lineStartIndex,rt.lineLength,lr,_r);for(var Rn=0,An=bt;Rn<An.length;Rn+=1){var Dn=An[Rn];Gt[Dn]=L.text.placedSymbolArray.length-1}return Vr.length*4}function Qd(L){for(var P in L)return L[P];return null}function Mm(L,P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr,ir,_r,Vr,cn,an,Rn,An,Dn,Un,Kn,ha,ua){var Ba,ka=L.addToLineVertexArray(P,N),Da,li,za,Na,mi=0,oi=0,Ni=0,ao=0,Bi=-1,Ui=-1,Ii={},co=Ie(""),go=0,zo=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ba=Ne.layout.get("text-offset").evaluate(Dn,{},ha).map(function(Fh){return Fh*Rs}),go=Ba[0],zo=Ba[1]):(go=Ne.layout.get("text-radial-offset").evaluate(Dn,{},ha)*Rs,zo=wp),L.allowVerticalPlacement&&$.vertical){var Go=Ne.layout.get("text-rotate").evaluate(Dn,{},ha),ms=Go+90,as=$.vertical;za=new Tv(rt,P,gt,bt,Gt,as,lr,ir,_r,ms),Te&&(Na=new Tv(rt,P,gt,bt,Gt,Te,cn,an,_r,ms))}if(he){var Qs=Ne.layout.get("icon-rotate").evaluate(Dn,{}),$s=Ne.layout.get("icon-text-fit")!=="none",xs=Xd(he,Qs,Kn,$s),sl=Te?Xd(Te,Qs,Kn,$s):void 0;li=new Tv(rt,P,gt,bt,Gt,he,cn,an,!1,Qs),mi=xs.length*4;var ll=L.iconSizeData,hs=null;ll.kind==="source"?(hs=[af*Ne.layout.get("icon-size").evaluate(Dn,{})],hs[0]>qf&&O(L.layerIds[0]+': Value for "icon-size" is >= '+Dh+'. Reduce your "icon-size".')):ll.kind==="composite"&&(hs=[af*Un.compositeIconSizes[0].evaluate(Dn,{},ha),af*Un.compositeIconSizes[1].evaluate(Dn,{},ha)],(hs[0]>qf||hs[1]>qf)&&O(L.layerIds[0]+': Value for "icon-size" is >= '+Dh+'. Reduce your "icon-size".')),L.addSymbols(L.icon,xs,hs,An,Rn,Dn,!1,P,ka.lineStartIndex,ka.lineLength,-1,ha),Bi=L.icon.placedSymbolArray.length-1,sl&&(oi=sl.length*4,L.addSymbols(L.icon,sl,hs,An,Rn,Dn,ql.vertical,P,ka.lineStartIndex,ka.lineLength,-1,ha),Ui=L.icon.placedSymbolArray.length-1)}for(var ul in $.horizontal){var eu=$.horizontal[ul];if(!Da){co=Ie(eu.text);var zf=Ne.layout.get("text-rotate").evaluate(Dn,{},ha);Da=new Tv(rt,P,gt,bt,Gt,eu,lr,ir,_r,zf)}var tc=eu.positionedLines.length===1;if(Ni+=Jd(L,P,eu,xe,Ne,_r,Dn,Vr,ka,$.vertical?ql.horizontal:ql.horizontalOnly,tc?Object.keys($.horizontal):[ul],Ii,Bi,Un,ha),tc)break}$.vertical&&(ao+=Jd(L,P,$.vertical,xe,Ne,_r,Dn,Vr,ka,ql.vertical,["vertical"],Ii,Ui,Un,ha));var rc=Da?Da.boxStartIndex:L.collisionBoxArray.length,nc=Da?Da.boxEndIndex:L.collisionBoxArray.length,Jc=za?za.boxStartIndex:L.collisionBoxArray.length,Iu=za?za.boxEndIndex:L.collisionBoxArray.length,kv=li?li.boxStartIndex:L.collisionBoxArray.length,Cp=li?li.boxEndIndex:L.collisionBoxArray.length,Cv=Na?Na.boxStartIndex:L.collisionBoxArray.length,Lp=Na?Na.boxEndIndex:L.collisionBoxArray.length,mu=-1,Qc=function(Fh,v0){return Fh&&Fh.circleDiameter?Math.max(Fh.circleDiameter,v0):v0};mu=Qc(Da,mu),mu=Qc(za,mu),mu=Qc(li,mu),mu=Qc(Na,mu);var Lv=mu>-1?1:0;Lv&&(mu*=ua/Rs),L.glyphOffsetArray.length>=no.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dn.sortKey!==void 0&&L.addToSortKeyRanges(L.symbolInstances.length,Dn.sortKey),L.symbolInstances.emplaceBack(P.x,P.y,Ii.right>=0?Ii.right:-1,Ii.center>=0?Ii.center:-1,Ii.left>=0?Ii.left:-1,Ii.vertical||-1,Bi,Ui,co,rc,nc,Jc,Iu,kv,Cp,Cv,Lp,gt,Ni,ao,mi,oi,Lv,0,lr,go,zo,mu)}function Sm(L,P,N,$){var he=L.compareText;if(!(P in he))he[P]=[];else for(var xe=he[P],Te=xe.length-1;Te>=0;Te--)if($.dist(xe[Te])<N)return!0;return he[P].push($),!1}var Em=Oc.VectorTileFeature.types,km=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Av(L,P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr){var ir=Ne?Math.min(qf,Math.round(Ne[0])):0,_r=Ne?Math.min(qf,Math.round(Ne[1])):0;L.emplaceBack(P,N,Math.round($*32),Math.round(he*32),xe,Te,(ir<<1)+(rt?1:0),_r,gt*16,bt*16,Gt*256,lr*256)}function Ap(L,P,N){L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N)}function Cm(L){for(var P=0,N=L.sections;P<N.length;P+=1){var $=N[P];if(la($.text))return!0}return!1}var jc=function(P){this.layoutVertexArray=new bf,this.indexArray=new ef,this.programConfigurations=P,this.segments=new W,this.dynamicLayoutVertexArray=new ph,this.opacityVertexArray=new dh,this.placedSymbolArray=new Kf};jc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},jc.prototype.upload=function(P,N,$,he){this.isEmpty()||($&&(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,gp.members),this.indexBuffer=P.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=P.createVertexBuffer(this.dynamicLayoutVertexArray,Ly.members,!0),this.opacityVertexBuffer=P.createVertexBuffer(this.opacityVertexArray,km,!0),this.opacityVertexBuffer.itemSize=1),($||he)&&this.programConfigurations.upload(P))},jc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",jc);var Rh=function(P,N,$){this.layoutVertexArray=new P,this.layoutAttributes=N,this.indexArray=new $,this.segments=new W,this.collisionVertexArray=new wl};Rh.prototype.upload=function(P){this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=P.createVertexBuffer(this.collisionVertexArray,Py.members,!0)},Rh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",Rh);var no=function(P){this.collisionBoxArray=P.collisionBoxArray,this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(rt){return rt.id}),this.index=P.index,this.pixelRatio=P.pixelRatio,this.sourceLayerIndex=P.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Dc([]),this.placementViewportMatrix=Dc([]);var N=this.layers[0],$=N._unevaluatedLayout._values;this.textSizeData=_p(this.zoom,$["text-size"]),this.iconSizeData=_p(this.zoom,$["icon-size"]);var he=this.layers[0].layout,xe=he.get("symbol-sort-key"),Te=he.get("symbol-z-order");this.sortFeaturesByKey=Te!=="viewport-y"&&xe.constantOr(1)!==void 0;var Ne=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement")),he.get("symbol-placement")==="point"&&(this.writingModes=he.get("text-writing-mode").map(function(rt){return ql[rt]})),this.stateDependentLayerIds=this.layers.filter(function(rt){return rt.isStateDependent()}).map(function(rt){return rt.id}),this.sourceID=P.sourceID};no.prototype.createArrays=function(){this.text=new jc(new ci(gp.members,this.layers,this.zoom,function(P){return/^text/.test(P)})),this.icon=new jc(new ci(gp.members,this.layers,this.zoom,function(P){return/^icon/.test(P)})),this.glyphOffsetArray=new gu,this.lineVertexArray=new ov,this.symbolInstances=new iv},no.prototype.calculateGlyphDependencies=function(P,N,$,he,xe){for(var Te=0;Te<P.length;Te++)if(N[P.charCodeAt(Te)]=!0,($||he)&&xe){var Ne=kh[P.charAt(Te)];Ne&&(N[Ne.charCodeAt(0)]=!0)}},no.prototype.populate=function(P,N,$){var he=this.layers[0],xe=he.layout,Te=xe.get("text-font"),Ne=xe.get("text-field"),rt=xe.get("icon-image"),gt=(Ne.value.kind!=="constant"||Ne.value.value instanceof qi&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Te.value.kind!=="constant"||Te.value.value.length>0),bt=rt.value.kind!=="constant"||!!rt.value.value||Object.keys(rt.parameters).length>0,Gt=xe.get("symbol-sort-key");if(this.features=[],!(!gt&&!bt)){for(var lr=N.iconDependencies,ir=N.glyphDependencies,_r=N.availableImages,Vr=new di(this.zoom),cn=0,an=P;cn<an.length;cn+=1){var Rn=an[cn],An=Rn.feature,Dn=Rn.id,Un=Rn.index,Kn=Rn.sourceLayerIndex,ha=he._featureFilter.needGeometry,ua={type:An.type,id:Dn,properties:An.properties,geometry:ha?$i(An):[]};if(!!he._featureFilter.filter(Vr,ua,$)){ha||(ua.geometry=$i(An));var Ba=void 0;if(gt){var ka=he.getValueAndResolveTokens("text-field",ua,$,_r),Da=qi.factory(ka);Cm(Da)&&(this.hasRTLText=!0),(!this.hasRTLText||Ao()==="unavailable"||this.hasRTLText&&qa.isParsed())&&(Ba=Iy(Da,he,ua))}var li=void 0;if(bt){var za=he.getValueAndResolveTokens("icon-image",ua,$,_r);za instanceof No?li=za:li=No.fromString(za)}if(!(!Ba&&!li)){var Na=this.sortFeaturesByKey?Gt.evaluate(ua,{},$):void 0,mi={id:Dn,text:Ba,icon:li,index:Un,sourceLayerIndex:Kn,geometry:$i(An),properties:An.properties,type:Em[An.type],sortKey:Na};if(this.features.push(mi),li&&(lr[li.name]=!0),Ba){var oi=Te.evaluate(ua,{},$).join(","),Ni=xe.get("text-rotation-alignment")==="map"&&xe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ql.vertical)>=0;for(var ao=0,Bi=Ba.sections;ao<Bi.length;ao+=1){var Ui=Bi[ao];if(Ui.image)lr[Ui.image.name]=!0;else{var Ii=Lr(Ba.toString()),co=Ui.fontStack||oi,go=ir[co]=ir[co]||{};this.calculateGlyphDependencies(Ui.text,go,Ni,this.allowVerticalPlacement,Ii)}}}}}}xe.get("symbol-placement")==="line"&&(this.features=Fy(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zo,Go){return zo.sortKey-Go.sortKey})}},no.prototype.update=function(P,N,$){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(P,N,this.layers,$),this.icon.programConfigurations.updatePaintArrays(P,N,this.layers,$))},no.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},no.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},no.prototype.upload=function(P){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(P),this.iconCollisionBox.upload(P)),this.text.upload(P,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(P,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},no.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},no.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},no.prototype.addToLineVertexArray=function(P,N){var $=this.lineVertexArray.length;if(P.segment!==void 0){for(var he=P.dist(N[P.segment+1]),xe=P.dist(N[P.segment]),Te={},Ne=P.segment+1;Ne<N.length;Ne++)Te[Ne]={x:N[Ne].x,y:N[Ne].y,tileUnitDistanceFromAnchor:he},Ne<N.length-1&&(he+=N[Ne+1].dist(N[Ne]));for(var rt=P.segment||0;rt>=0;rt--)Te[rt]={x:N[rt].x,y:N[rt].y,tileUnitDistanceFromAnchor:xe},rt>0&&(xe+=N[rt-1].dist(N[rt]));for(var gt=0;gt<N.length;gt++){var bt=Te[gt];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},no.prototype.addSymbols=function(P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt,lr){for(var ir=P.indexArray,_r=P.layoutVertexArray,Vr=P.segments.prepareSegment(4*N.length,_r,ir,Te.sortKey),cn=this.glyphOffsetArray.length,an=Vr.vertexLength,Rn=this.allowVerticalPlacement&&Ne===ql.vertical?Math.PI/2:0,An=Te.text&&Te.text.sections,Dn=0;Dn<N.length;Dn++){var Un=N[Dn],Kn=Un.tl,ha=Un.tr,ua=Un.bl,Ba=Un.br,ka=Un.tex,Da=Un.pixelOffsetTL,li=Un.pixelOffsetBR,za=Un.minFontScaleX,Na=Un.minFontScaleY,mi=Un.glyphOffset,oi=Un.isSDF,Ni=Un.sectionIndex,ao=Vr.vertexLength,Bi=mi[1];Av(_r,rt.x,rt.y,Kn.x,Bi+Kn.y,ka.x,ka.y,$,oi,Da.x,Da.y,za,Na),Av(_r,rt.x,rt.y,ha.x,Bi+ha.y,ka.x+ka.w,ka.y,$,oi,li.x,Da.y,za,Na),Av(_r,rt.x,rt.y,ua.x,Bi+ua.y,ka.x,ka.y+ka.h,$,oi,Da.x,li.y,za,Na),Av(_r,rt.x,rt.y,Ba.x,Bi+Ba.y,ka.x+ka.w,ka.y+ka.h,$,oi,li.x,li.y,za,Na),Ap(P.dynamicLayoutVertexArray,rt,Rn),ir.emplaceBack(ao,ao+1,ao+2),ir.emplaceBack(ao+1,ao+2,ao+3),Vr.vertexLength+=4,Vr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mi[0]),(Dn===N.length-1||Ni!==N[Dn+1].sectionIndex)&&P.programConfigurations.populatePaintArrays(_r.length,Te,Te.index,{},lr,An&&An[Ni])}P.placedSymbolArray.emplaceBack(rt.x,rt.y,cn,this.glyphOffsetArray.length-cn,an,gt,bt,rt.segment,$?$[0]:0,$?$[1]:0,he[0],he[1],Ne,0,!1,0,Gt)},no.prototype._addCollisionDebugVertex=function(P,N,$,he,xe,Te){return N.emplaceBack(0,0),P.emplaceBack($.x,$.y,he,xe,Math.round(Te.x),Math.round(Te.y))},no.prototype.addCollisionDebugVertices=function(P,N,$,he,xe,Te,Ne){var rt=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),gt=rt.vertexLength,bt=xe.layoutVertexArray,Gt=xe.collisionVertexArray,lr=Ne.anchorX,ir=Ne.anchorY;this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h(P,N)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h($,N)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h($,he)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h(P,he)),rt.vertexLength+=4;var _r=xe.indexArray;_r.emplaceBack(gt,gt+1),_r.emplaceBack(gt+1,gt+2),_r.emplaceBack(gt+2,gt+3),_r.emplaceBack(gt+3,gt),rt.primitiveLength+=4},no.prototype.addDebugCollisionBoxes=function(P,N,$,he){for(var xe=P;xe<N;xe++){var Te=this.collisionBoxArray.get(xe),Ne=Te.x1,rt=Te.y1,gt=Te.x2,bt=Te.y2;this.addCollisionDebugVertices(Ne,rt,gt,bt,he?this.textCollisionBox:this.iconCollisionBox,Te.anchorPoint,$)}},no.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Rh(Ec,Md.members,vc),this.iconCollisionBox=new Rh(Ec,Md.members,vc);for(var P=0;P<this.symbolInstances.length;P++){var N=this.symbolInstances.get(P);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},no.prototype._deserializeCollisionBoxesForSymbol=function(P,N,$,he,xe,Te,Ne,rt,gt){for(var bt={},Gt=N;Gt<$;Gt++){var lr=P.get(Gt);bt.textBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},bt.textFeatureIndex=lr.featureIndex;break}for(var ir=he;ir<xe;ir++){var _r=P.get(ir);bt.verticalTextBox={x1:_r.x1,y1:_r.y1,x2:_r.x2,y2:_r.y2,anchorPointX:_r.anchorPointX,anchorPointY:_r.anchorPointY},bt.verticalTextFeatureIndex=_r.featureIndex;break}for(var Vr=Te;Vr<Ne;Vr++){var cn=P.get(Vr);bt.iconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},bt.iconFeatureIndex=cn.featureIndex;break}for(var an=rt;an<gt;an++){var Rn=P.get(an);bt.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},bt.verticalIconFeatureIndex=Rn.featureIndex;break}return bt},no.prototype.deserializeCollisionBoxes=function(P){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var $=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(P,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},no.prototype.hasTextData=function(){return this.text.segments.get().length>0},no.prototype.hasIconData=function(){return this.icon.segments.get().length>0},no.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},no.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},no.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},no.prototype.addIndicesForPlacedSymbol=function(P,N){for(var $=P.placedSymbolArray.get(N),he=$.vertexStartIndex+$.numGlyphs*4,xe=$.vertexStartIndex;xe<he;xe+=4)P.indexArray.emplaceBack(xe,xe+1,xe+2),P.indexArray.emplaceBack(xe+1,xe+2,xe+3)},no.prototype.getSortedSymbolIndexes=function(P){if(this.sortedAngle===P&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(P),$=Math.cos(P),he=[],xe=[],Te=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Te.push(Ne);var rt=this.symbolInstances.get(Ne);he.push(Math.round(N*rt.anchorX+$*rt.anchorY)|0),xe.push(rt.featureIndex)}return Te.sort(function(gt,bt){return he[gt]-he[bt]||xe[bt]-xe[gt]}),Te},no.prototype.addToSortKeyRanges=function(P,N){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===N?$.symbolInstanceEnd=P+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:P,symbolInstanceEnd:P+1})},no.prototype.sortFeatures=function(P){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==P&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(P),this.sortedAngle=P,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,he=this.symbolInstanceIndexes;$<he.length;$+=1){var xe=he[$],Te=this.symbolInstances.get(xe);this.featureSortOrder.push(Te.featureIndex),[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(Ne,rt,gt){Ne>=0&&gt.indexOf(Ne)===rt&&N.addIndicesForPlacedSymbol(N.text,Ne)}),Te.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Te.verticalPlacedTextSymbolIndex),Te.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.placedIconSymbolIndex),Te.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",no,{omit:["layers","collisionBoxArray","features","compareText"]}),no.MAX_GLYPHS=65535,no.addDynamicAttributes=Ap;function Lm(L,P){return P.replace(/{([^{}]+)}/g,function(N,$){return $ in L?String(L[$]):""})}var Pm=new io({"symbol-placement":new Ua(Xt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ua(Xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ua(Xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(Xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ua(Xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ua(Xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ua(Xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ua(Xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ua(Xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(Xt.layout_symbol["icon-size"]),"icon-text-fit":new Ua(Xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(Xt.layout_symbol["icon-image"]),"icon-rotate":new ei(Xt.layout_symbol["icon-rotate"]),"icon-padding":new Ua(Xt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ua(Xt.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(Xt.layout_symbol["icon-offset"]),"icon-anchor":new ei(Xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ua(Xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ua(Xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ua(Xt.layout_symbol["text-rotation-alignment"]),"text-field":new ei(Xt.layout_symbol["text-field"]),"text-font":new ei(Xt.layout_symbol["text-font"]),"text-size":new ei(Xt.layout_symbol["text-size"]),"text-max-width":new ei(Xt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Xt.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(Xt.layout_symbol["text-letter-spacing"]),"text-justify":new ei(Xt.layout_symbol["text-justify"]),"text-radial-offset":new ei(Xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ua(Xt.layout_symbol["text-variable-anchor"]),"text-anchor":new ei(Xt.layout_symbol["text-anchor"]),"text-max-angle":new Ua(Xt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ua(Xt.layout_symbol["text-writing-mode"]),"text-rotate":new ei(Xt.layout_symbol["text-rotate"]),"text-padding":new Ua(Xt.layout_symbol["text-padding"]),"text-keep-upright":new Ua(Xt.layout_symbol["text-keep-upright"]),"text-transform":new ei(Xt.layout_symbol["text-transform"]),"text-offset":new ei(Xt.layout_symbol["text-offset"]),"text-allow-overlap":new Ua(Xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ua(Xt.layout_symbol["text-ignore-placement"]),"text-optional":new Ua(Xt.layout_symbol["text-optional"])}),Dm=new io({"icon-opacity":new ei(Xt.paint_symbol["icon-opacity"]),"icon-color":new ei(Xt.paint_symbol["icon-color"]),"icon-halo-color":new ei(Xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(Xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(Xt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ua(Xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ua(Xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(Xt.paint_symbol["text-opacity"]),"text-color":new ei(Xt.paint_symbol["text-color"],{runtimeType:Gn,getOverride:function(L){return L.textColor},hasOverride:function(L){return!!L.textColor}}),"text-halo-color":new ei(Xt.paint_symbol["text-halo-color"]),"text-halo-width":new ei(Xt.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(Xt.paint_symbol["text-halo-blur"]),"text-translate":new Ua(Xt.paint_symbol["text-translate"]),"text-translate-anchor":new Ua(Xt.paint_symbol["text-translate-anchor"])}),Mp={paint:Dm,layout:Pm},Xc=function(P){this.type=P.property.overrides?P.property.overrides.runtimeType:Tr,this.defaultValue=P};Xc.prototype.evaluate=function(P){if(P.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(P.formattedSection))return N.getOverride(P.formattedSection)}return P.feature&&P.featureState?this.defaultValue.evaluate(P.feature,P.featureState):this.defaultValue.property.specification.default},Xc.prototype.eachChild=function(P){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;P(N._styleExpression.expression)}},Xc.prototype.outputDefined=function(){return!1},Xc.prototype.serialize=function(){return null},Be("FormatSectionOverride",Xc,{omit:["defaultValue"]});var Rm=function(L){function P(N){L.call(this,N,Mp)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.recalculate=function($,he){if(L.prototype.recalculate.call(this,$,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var xe=this.layout.get("text-writing-mode");if(xe){for(var Te=[],Ne=0,rt=xe;Ne<rt.length;Ne+=1){var gt=rt[Ne];Te.indexOf(gt)<0&&Te.push(gt)}this.layout._values["text-writing-mode"]=Te}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function($,he,xe,Te){var Ne=this.layout.get($).evaluate(he,{},xe,Te),rt=this._unevaluatedLayout._values[$];return!rt.isDataDriven()&&!Po(rt.value)&&Ne?Lm(he.properties,Ne):Ne},P.prototype.createBucket=function($){return new no($)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var $=0,he=Mp.paint.overridableProperties;$<he.length;$+=1){var xe=he[$];if(!!P.hasPaintOverride(this.layout,xe)){var Te=this.paint.get(xe),Ne=new Xc(Te),rt=new Cs(Ne,Te.property.specification),gt=null;Te.value.kind==="constant"||Te.value.kind==="source"?gt=new ku("source",rt):gt=new Ls("composite",rt,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[xe]=new ro(Te.property,gt,Te.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function($,he,xe){return!this.layout||he.isDataDriven()||xe.isDataDriven()?!1:P.hasPaintOverride(this.layout,$)},P.hasPaintOverride=function($,he){var xe=$.get("text-field"),Te=Mp.paint.properties[he],Ne=!1,rt=function(Gt){for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var _r=ir[lr];if(Te.overrides&&Te.overrides.hasOverride(_r)){Ne=!0;return}}};if(xe.value.kind==="constant"&&xe.value.value instanceof qi)rt(xe.value.value.sections);else if(xe.value.kind==="source"){var gt=function(Gt){if(!Ne)if(Gt instanceof lo&&Gi(Gt.value)===_a){var lr=Gt.value;rt(lr.sections)}else Gt instanceof ws?rt(Gt.sections):Gt.eachChild(gt)},bt=xe.value;bt._styleExpression&&gt(bt._styleExpression.expression)}return Ne},P}(Us),Im=new io({"background-color":new Ua(Xt.paint_background["background-color"]),"background-pattern":new vo(Xt.paint_background["background-pattern"]),"background-opacity":new Ua(Xt.paint_background["background-opacity"])}),Fm={paint:Im},zm=function(L){function P(N){L.call(this,N,Fm)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Us),Om=new io({"raster-opacity":new Ua(Xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ua(Xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ua(Xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ua(Xt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ua(Xt.paint_raster["raster-saturation"]),"raster-contrast":new Ua(Xt.paint_raster["raster-contrast"]),"raster-resampling":new Ua(Xt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ua(Xt.paint_raster["raster-fade-duration"])}),Nm={paint:Om},Bm=function(L){function P(N){L.call(this,N,Nm)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Us);function Um(L){var P=[],N=L.id;return N===void 0&&P.push({message:"layers."+N+': missing required property "id"'}),L.render===void 0&&P.push({message:"layers."+N+': missing required method "render"'}),L.renderingMode&&L.renderingMode!=="2d"&&L.renderingMode!=="3d"&&P.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),P}var Hm=function(L){function P(N){L.call(this,N,{}),this.implementation=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},P.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},P.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},P}(Us),Vm={circle:yg,heatmap:_g,hillshade:Ag,fill:Kg,"fill-extrusion":dy,line:ky,symbol:Rm,background:zm,raster:Bm};function Gm(L){return L.type==="custom"?new Hm(L):new Vm[L.type](L)}var $d=self.HTMLImageElement,qd=self.HTMLCanvasElement,e0=self.HTMLVideoElement,t0=self.ImageData,Mv=self.ImageBitmap,mc=function(P,N,$,he){this.context=P,this.format=$,this.texture=P.gl.createTexture(),this.update(N,he)};mc.prototype.update=function(P,N,$){var he=P.width,xe=P.height,Te=(!this.size||this.size[0]!==he||this.size[1]!==xe)&&!$,Ne=this,rt=Ne.context,gt=rt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),gt.bindTexture(gt.TEXTURE_2D,this.texture),rt.pixelStoreUnpackFlipY.set(!1),rt.pixelStoreUnpack.set(1),rt.pixelStoreUnpackPremultiplyAlpha.set(this.format===gt.RGBA&&(!N||N.premultiply!==!1)),Te)this.size=[he,xe],P instanceof $d||P instanceof qd||P instanceof e0||P instanceof t0||Mv&&P instanceof Mv?gt.texImage2D(gt.TEXTURE_2D,0,this.format,this.format,gt.UNSIGNED_BYTE,P):gt.texImage2D(gt.TEXTURE_2D,0,this.format,he,xe,0,this.format,gt.UNSIGNED_BYTE,P.data);else{var bt=$||{x:0,y:0},Gt=bt.x,lr=bt.y;P instanceof $d||P instanceof qd||P instanceof e0||P instanceof t0||Mv&&P instanceof Mv?gt.texSubImage2D(gt.TEXTURE_2D,0,Gt,lr,gt.RGBA,gt.UNSIGNED_BYTE,P):gt.texSubImage2D(gt.TEXTURE_2D,0,Gt,lr,he,xe,gt.RGBA,gt.UNSIGNED_BYTE,P.data)}this.useMipmap&&this.isSizePowerOfTwo()&&gt.generateMipmap(gt.TEXTURE_2D)},mc.prototype.bind=function(P,N,$){var he=this,xe=he.context,Te=xe.gl;Te.bindTexture(Te.TEXTURE_2D,this.texture),$===Te.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&($=Te.LINEAR),P!==this.filter&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,P),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,$||P),this.filter=P),N!==this.wrap&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,N),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,N),this.wrap=N)},mc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},mc.prototype.destroy=function(){var P=this.context,N=P.gl;N.deleteTexture(this.texture),this.texture=null};var Sp=function(P){var N=this;this._callback=P,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};Sp.prototype.trigger=function(){var P=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){P._triggered=!1,P._callback()},0))},Sp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Zc=function(P,N,$){this.target=P,this.parent=N,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new Sp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Q()?P:self};Zc.prototype.send=function(P,N,$,he,xe){var Te=this;xe===void 0&&(xe=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);$&&(this.callbacks[Ne]=$);var rt=re(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:P,hasCallback:!!$,targetMapId:he,mustQueue:xe,sourceMapId:this.mapId,data:Ot(N,rt)},rt),{cancel:function(){$&&delete Te.callbacks[Ne],Te.target.postMessage({id:Ne,type:"<cancel>",targetMapId:he,sourceMapId:Te.mapId})}}},Zc.prototype.receive=function(P){var N=P.data,$=N.id;if(!!$&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[$];var he=this.cancelCallbacks[$];delete this.cancelCallbacks[$],he&&he()}else Q()||N.mustQueue?(this.tasks[$]=N,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,N)},Zc.prototype.process=function(){if(!!this.taskQueue.length){var P=this.taskQueue.shift(),N=this.tasks[P];delete this.tasks[P],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(P,N)}},Zc.prototype.processTask=function(P,N){var $=this;if(N.type==="<response>"){var he=this.callbacks[P];delete this.callbacks[P],he&&(N.error?he(er(N.error)):he(null,er(N.data)))}else{var xe=!1,Te=re(this.globalScope)?void 0:[],Ne=N.hasCallback?function(lr,ir){xe=!0,delete $.cancelCallbacks[P],$.target.postMessage({id:P,type:"<response>",sourceMapId:$.mapId,error:lr?Ot(lr):null,data:Ot(ir,Te)},Te)}:function(lr){xe=!0},rt=null,gt=er(N.data);if(this.parent[N.type])rt=this.parent[N.type](N.sourceMapId,gt,Ne);else if(this.parent.getWorkerSource){var bt=N.type.split("."),Gt=this.parent.getWorkerSource(N.sourceMapId,bt[0],gt.source);rt=Gt[bt[1]](gt,Ne)}else Ne(new Error("Could not find function "+N.type));!xe&&rt&&rt.cancel&&(this.cancelCallbacks[P]=rt.cancel)}},Zc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function Ym(L,P,N){P=Math.pow(2,N)-P-1;var $=r0(L*256,P*256,N),he=r0((L+1)*256,(P+1)*256,N);return $[0]+","+$[1]+","+he[0]+","+he[1]}function r0(L,P,N){var $=2*Math.PI*6378137/256/Math.pow(2,N),he=L*$-2*Math.PI*6378137/2,xe=P*$-2*Math.PI*6378137/2;return[he,xe]}var rs=function(P,N){P&&(N?this.setSouthWest(P).setNorthEast(N):P.length===4?this.setSouthWest([P[0],P[1]]).setNorthEast([P[2],P[3]]):this.setSouthWest(P[0]).setNorthEast(P[1]))};rs.prototype.setNorthEast=function(P){return this._ne=P instanceof Mo?new Mo(P.lng,P.lat):Mo.convert(P),this},rs.prototype.setSouthWest=function(P){return this._sw=P instanceof Mo?new Mo(P.lng,P.lat):Mo.convert(P),this},rs.prototype.extend=function(P){var N=this._sw,$=this._ne,he,xe;if(P instanceof Mo)he=P,xe=P;else if(P instanceof rs){if(he=P._sw,xe=P._ne,!he||!xe)return this}else{if(Array.isArray(P))if(P.length===4||P.every(Array.isArray)){var Te=P;return this.extend(rs.convert(Te))}else{var Ne=P;return this.extend(Mo.convert(Ne))}return this}return!N&&!$?(this._sw=new Mo(he.lng,he.lat),this._ne=new Mo(xe.lng,xe.lat)):(N.lng=Math.min(he.lng,N.lng),N.lat=Math.min(he.lat,N.lat),$.lng=Math.max(xe.lng,$.lng),$.lat=Math.max(xe.lat,$.lat)),this},rs.prototype.getCenter=function(){return new Mo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},rs.prototype.getSouthWest=function(){return this._sw},rs.prototype.getNorthEast=function(){return this._ne},rs.prototype.getNorthWest=function(){return new Mo(this.getWest(),this.getNorth())},rs.prototype.getSouthEast=function(){return new Mo(this.getEast(),this.getSouth())},rs.prototype.getWest=function(){return this._sw.lng},rs.prototype.getSouth=function(){return this._sw.lat},rs.prototype.getEast=function(){return this._ne.lng},rs.prototype.getNorth=function(){return this._ne.lat},rs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},rs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},rs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},rs.prototype.contains=function(P){var N=Mo.convert(P),$=N.lng,he=N.lat,xe=this._sw.lat<=he&&he<=this._ne.lat,Te=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Te=this._sw.lng>=$&&$>=this._ne.lng),xe&&Te},rs.convert=function(P){return!P||P instanceof rs?P:new rs(P)};var n0=63710088e-1,Mo=function(P,N){if(isNaN(P)||isNaN(N))throw new Error("Invalid LngLat object: ("+P+", "+N+")");if(this.lng=+P,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Mo.prototype.wrap=function(){return new Mo(m(this.lng,-180,180),this.lat)},Mo.prototype.toArray=function(){return[this.lng,this.lat]},Mo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Mo.prototype.distanceTo=function(P){var N=Math.PI/180,$=this.lat*N,he=P.lat*N,xe=Math.sin($)*Math.sin(he)+Math.cos($)*Math.cos(he)*Math.cos((P.lng-this.lng)*N),Te=n0*Math.acos(Math.min(xe,1));return Te},Mo.prototype.toBounds=function(P){P===void 0&&(P=0);var N=40075017,$=360*P/N,he=$/Math.cos(Math.PI/180*this.lat);return new rs(new Mo(this.lng-he,this.lat-$),new Mo(this.lng+he,this.lat+$))},Mo.convert=function(P){if(P instanceof Mo)return P;if(Array.isArray(P)&&(P.length===2||P.length===3))return new Mo(Number(P[0]),Number(P[1]));if(!Array.isArray(P)&&typeof P=="object"&&P!==null)return new Mo(Number("lng"in P?P.lng:P.lon),Number(P.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var a0=2*Math.PI*n0;function i0(L){return a0*Math.cos(L*Math.PI/180)}function o0(L){return(180+L)/360}function s0(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function l0(L,P){return L/i0(P)}function Wm(L){return L*360-180}function Ep(L){var P=180-L*360;return 360/Math.PI*Math.atan(Math.exp(P*Math.PI/180))-90}function jm(L,P){return L*i0(Ep(P))}function Xm(L){return 1/Math.cos(L*Math.PI/180)}var xc=function(P,N,$){$===void 0&&($=0),this.x=+P,this.y=+N,this.z=+$};xc.fromLngLat=function(P,N){N===void 0&&(N=0);var $=Mo.convert(P);return new xc(o0($.lng),s0($.lat),l0(N,$.lat))},xc.prototype.toLngLat=function(){return new Mo(Wm(this.x),Ep(this.y))},xc.prototype.toAltitude=function(){return jm(this.z,this.y)},xc.prototype.meterInMercatorCoordinateUnits=function(){return 1/a0*Xm(Ep(this.y))};var bc=function(P,N,$){this.z=P,this.x=N,this.y=$,this.key=Ih(0,P,P,N,$)};bc.prototype.equals=function(P){return this.z===P.z&&this.x===P.x&&this.y===P.y},bc.prototype.url=function(P,N){var $=Ym(this.x,this.y,this.z),he=Zm(this.z,this.x,this.y);return P[(this.x+this.y)%P.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",$)},bc.prototype.getTilePoint=function(P){var N=Math.pow(2,this.z);return new h((P.x*N-this.x)*Wa,(P.y*N-this.y)*Wa)},bc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var u0=function(P,N){this.wrap=P,this.canonical=N,this.key=Ih(P,N.z,N.z,N.x,N.y)},ns=function(P,N,$,he,xe){this.overscaledZ=P,this.wrap=N,this.canonical=new bc($,+he,+xe),this.key=Ih(N,P,$,he,xe)};ns.prototype.equals=function(P){return this.overscaledZ===P.overscaledZ&&this.wrap===P.wrap&&this.canonical.equals(P.canonical)},ns.prototype.scaledTo=function(P){var N=this.canonical.z-P;return P>this.canonical.z?new ns(P,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ns(P,this.wrap,P,this.canonical.x>>N,this.canonical.y>>N)},ns.prototype.calculateScaledKey=function(P,N){var $=this.canonical.z-P;return P>this.canonical.z?Ih(this.wrap*+N,P,this.canonical.z,this.canonical.x,this.canonical.y):Ih(this.wrap*+N,P,P,this.canonical.x>>$,this.canonical.y>>$)},ns.prototype.isChildOf=function(P){if(P.wrap!==this.wrap)return!1;var N=this.canonical.z-P.canonical.z;return P.overscaledZ===0||P.overscaledZ<this.overscaledZ&&P.canonical.x===this.canonical.x>>N&&P.canonical.y===this.canonical.y>>N},ns.prototype.children=function(P){if(this.overscaledZ>=P)return[new ns(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,$=this.canonical.x*2,he=this.canonical.y*2;return[new ns(N,this.wrap,N,$,he),new ns(N,this.wrap,N,$+1,he),new ns(N,this.wrap,N,$,he+1),new ns(N,this.wrap,N,$+1,he+1)]},ns.prototype.isLessThan=function(P){return this.wrap<P.wrap?!0:this.wrap>P.wrap?!1:this.overscaledZ<P.overscaledZ?!0:this.overscaledZ>P.overscaledZ?!1:this.canonical.x<P.canonical.x?!0:this.canonical.x>P.canonical.x?!1:this.canonical.y<P.canonical.y},ns.prototype.wrapped=function(){return new ns(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ns.prototype.unwrapTo=function(P){return new ns(this.overscaledZ,P,this.canonical.z,this.canonical.x,this.canonical.y)},ns.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ns.prototype.toUnwrapped=function(){return new u0(this.wrap,this.canonical)},ns.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ns.prototype.getTilePoint=function(P){return this.canonical.getTilePoint(new xc(P.x-this.wrap,P.y))};function Ih(L,P,N,$,he){L*=2,L<0&&(L=L*-1-1);var xe=1<<N;return(xe*xe*L+xe*he+$).toString(36)+N.toString(36)+P.toString(36)}function Zm(L,P,N){for(var $="",he,xe=L;xe>0;xe--)he=1<<xe-1,$+=(P&he?1:0)+(N&he?2:0);return $}Be("CanonicalTileID",bc),Be("OverscaledTileID",ns,{omit:["posMatrix"]});var If=function(P,N,$){if(this.uid=P,N.height!==N.width)throw new RangeError("DEM tiles must be square");if($&&$!=="mapbox"&&$!=="terrarium")return O('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var he=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=$||"mapbox";for(var xe=0;xe<he;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(he,xe)]=this.data[this._idx(he-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,he)]=this.data[this._idx(xe,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};If.prototype.get=function(P,N){var $=new Uint8Array(this.data.buffer),he=this._idx(P,N)*4,xe=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return xe($[he],$[he+1],$[he+2])},If.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},If.prototype._idx=function(P,N){if(P<-1||P>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(P+1)},If.prototype._unpackMapbox=function(P,N,$){return(P*256*256+N*256+$)/10-1e4},If.prototype._unpackTerrarium=function(P,N,$){return P*256+N+$/256-32768},If.prototype.getPixels=function(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},If.prototype.backfillBorder=function(P,N,$){if(this.dim!==P.dim)throw new Error("dem dimension mismatch");var he=N*this.dim,xe=N*this.dim+this.dim,Te=$*this.dim,Ne=$*this.dim+this.dim;switch(N){case-1:he=xe-1;break;case 1:xe=he+1;break}switch($){case-1:Te=Ne-1;break;case 1:Ne=Te+1;break}for(var rt=-N*this.dim,gt=-$*this.dim,bt=Te;bt<Ne;bt++)for(var Gt=he;Gt<xe;Gt++)this.data[this._idx(Gt,bt)]=P.data[this._idx(Gt+rt,bt+gt)]},Be("DEMData",If);function Km(L,P){var N={};if(!P)return N;for(var $=function(){var Te=xe[he],Ne=Te.layerIds.map(function(Gt){return P.getLayer(Gt)}).filter(Boolean);if(Ne.length!==0){Te.layers=Ne,Te.stateDependentLayerIds&&(Te.stateDependentLayers=Te.stateDependentLayerIds.map(function(Gt){return Ne.filter(function(lr){return lr.id===Gt})[0]}));for(var rt=0,gt=Ne;rt<gt.length;rt+=1){var bt=gt[rt];N[bt.id]=Te}}},he=0,xe=L;he<xe.length;he+=1)$();return N}var Sv=function(P){this._stringToNumber={},this._numberToString=[];for(var N=0;N<P.length;N++){var $=P[N];this._stringToNumber[$]=N,this._numberToString[N]=$}};Sv.prototype.encode=function(P){return this._stringToNumber[P]},Sv.prototype.decode=function(P){return this._numberToString[P]};var Ev=function(P,N,$,he,xe){this.type="Feature",this._vectorTileFeature=P,P._z=N,P._x=$,P._y=he,this.properties=P.properties,this.id=xe},kp={geometry:{configurable:!0}};kp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},kp.geometry.set=function(L){this._geometry=L},Ev.prototype.toJSON=function(){var P={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(P[N]=this[N]);return P},Object.defineProperties(Ev.prototype,kp);var Kc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Kc.prototype.updateState=function(P,N,$){var he=String(N);if(this.stateChanges[P]=this.stateChanges[P]||{},this.stateChanges[P][he]=this.stateChanges[P][he]||{},A(this.stateChanges[P][he],$),this.deletedStates[P]===null){this.deletedStates[P]={};for(var xe in this.state[P])xe!==he&&(this.deletedStates[P][xe]=null)}else{var Te=this.deletedStates[P]&&this.deletedStates[P][he]===null;if(Te){this.deletedStates[P][he]={};for(var Ne in this.state[P][he])$[Ne]||(this.deletedStates[P][he][Ne]=null)}else for(var rt in $){var gt=this.deletedStates[P]&&this.deletedStates[P][he]&&this.deletedStates[P][he][rt]===null;gt&&delete this.deletedStates[P][he][rt]}}},Kc.prototype.removeFeatureState=function(P,N,$){var he=this.deletedStates[P]===null;if(!he){var xe=String(N);if(this.deletedStates[P]=this.deletedStates[P]||{},$&&N!==void 0)this.deletedStates[P][xe]!==null&&(this.deletedStates[P][xe]=this.deletedStates[P][xe]||{},this.deletedStates[P][xe][$]=null);else if(N!==void 0){var Te=this.stateChanges[P]&&this.stateChanges[P][xe];if(Te){this.deletedStates[P][xe]={};for($ in this.stateChanges[P][xe])this.deletedStates[P][xe][$]=null}else this.deletedStates[P][xe]=null}else this.deletedStates[P]=null}},Kc.prototype.getState=function(P,N){var $=String(N),he=this.state[P]||{},xe=this.stateChanges[P]||{},Te=A({},he[$],xe[$]);if(this.deletedStates[P]===null)return{};if(this.deletedStates[P]){var Ne=this.deletedStates[P][N];if(Ne===null)return{};for(var rt in Ne)delete Te[rt]}return Te},Kc.prototype.initializeTileState=function(P,N){P.setFeatureState(this.state,N)},Kc.prototype.coalesceChanges=function(P,N){var $={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var xe={};for(var Te in this.stateChanges[he])this.state[he][Te]||(this.state[he][Te]={}),A(this.state[he][Te],this.stateChanges[he][Te]),xe[Te]=this.state[he][Te];$[he]=xe}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var rt={};if(this.deletedStates[Ne]===null)for(var gt in this.state[Ne])rt[gt]={},this.state[Ne][gt]={};else for(var bt in this.deletedStates[Ne]){var Gt=this.deletedStates[Ne][bt]===null;if(Gt)this.state[Ne][bt]={};else for(var lr=0,ir=Object.keys(this.deletedStates[Ne][bt]);lr<ir.length;lr+=1){var _r=ir[lr];delete this.state[Ne][bt][_r]}rt[bt]=this.state[Ne][bt]}$[Ne]=$[Ne]||{},A($[Ne],rt)}if(this.stateChanges={},this.deletedStates={},Object.keys($).length!==0)for(var Vr in P){var cn=P[Vr];cn.setFeatureState($,N)}};var Ff=function(P,N){this.tileID=P,this.x=P.canonical.x,this.y=P.canonical.y,this.z=P.canonical.z,this.grid=new Yo(Wa,16,0),this.grid3D=new Yo(Wa,16,0),this.featureIndexArray=new xh,this.promoteId=N};Ff.prototype.insert=function(P,N,$,he,xe,Te){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,he,xe);for(var rt=Te?this.grid3D:this.grid,gt=0;gt<N.length;gt++){for(var bt=N[gt],Gt=[1/0,1/0,-1/0,-1/0],lr=0;lr<bt.length;lr++){var ir=bt[lr];Gt[0]=Math.min(Gt[0],ir.x),Gt[1]=Math.min(Gt[1],ir.y),Gt[2]=Math.max(Gt[2],ir.x),Gt[3]=Math.max(Gt[3],ir.y)}Gt[0]<Wa&&Gt[1]<Wa&&Gt[2]>=0&&Gt[3]>=0&&rt.insert(Ne,Gt[0],Gt[1],Gt[2],Gt[3])}},Ff.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Oc.VectorTile(new gv(this.rawTileData)).layers,this.sourceLayerCoder=new Sv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ff.prototype.query=function(P,N,$,he){var xe=this;this.loadVTLayers();for(var Te=P.params||{},Ne=Wa/P.tileSize/P.scale,rt=mf(Te.filter),gt=P.queryGeometry,bt=P.queryPadding*Ne,Gt=c0(gt),lr=this.grid.query(Gt.minX-bt,Gt.minY-bt,Gt.maxX+bt,Gt.maxY+bt),ir=c0(P.cameraQueryGeometry),_r=this.grid3D.query(ir.minX-bt,ir.minY-bt,ir.maxX+bt,ir.maxY+bt,function(Kn,ha,ua,Ba){return Af(P.cameraQueryGeometry,Kn-bt,ha-bt,ua+bt,Ba+bt)}),Vr=0,cn=_r;Vr<cn.length;Vr+=1){var an=cn[Vr];lr.push(an)}lr.sort(Jm);for(var Rn={},An,Dn=function(Kn){var ha=lr[Kn];if(ha!==An){An=ha;var ua=xe.featureIndexArray.get(ha),Ba=null;xe.loadMatchingFeature(Rn,ua.bucketIndex,ua.sourceLayerIndex,ua.featureIndex,rt,Te.layers,Te.availableImages,N,$,he,function(ka,Da,li){return Ba||(Ba=$i(ka)),Da.queryIntersectsFeature(gt,ka,li,Ba,xe.z,P.transform,Ne,P.pixelPosMatrix)})}},Un=0;Un<lr.length;Un++)Dn(Un);return Rn},Ff.prototype.loadMatchingFeature=function(P,N,$,he,xe,Te,Ne,rt,gt,bt,Gt){var lr=this.bucketLayerIDs[N];if(!(Te&&!D(Te,lr))){var ir=this.sourceLayerCoder.decode($),_r=this.vtLayers[ir],Vr=_r.feature(he);if(!!xe.filter(new di(this.tileID.overscaledZ),Vr))for(var cn=this.getId(Vr,ir),an=0;an<lr.length;an++){var Rn=lr[an];if(!(Te&&Te.indexOf(Rn)<0)){var An=rt[Rn];if(!!An){var Dn={};cn!==void 0&&bt&&(Dn=bt.getState(An.sourceLayer||"_geojsonTileLayer",cn));var Un=gt[Rn];Un.paint=f0(Un.paint,An.paint,Vr,Dn,Ne),Un.layout=f0(Un.layout,An.layout,Vr,Dn,Ne);var Kn=!Gt||Gt(Vr,An,Dn);if(!!Kn){var ha=new Ev(Vr,this.z,this.x,this.y,cn);ha.layer=Un;var ua=P[Rn];ua===void 0&&(ua=P[Rn]=[]),ua.push({featureIndex:he,feature:ha,intersectionZ:Kn})}}}}}},Ff.prototype.lookupSymbolFeatures=function(P,N,$,he,xe,Te,Ne,rt){var gt={};this.loadVTLayers();for(var bt=mf(xe),Gt=0,lr=P;Gt<lr.length;Gt+=1){var ir=lr[Gt];this.loadMatchingFeature(gt,$,he,ir,bt,Te,Ne,rt,N)}return gt},Ff.prototype.hasLayer=function(P){for(var N=0,$=this.bucketLayerIDs;N<$.length;N+=1)for(var he=$[N],xe=0,Te=he;xe<Te.length;xe+=1){var Ne=Te[xe];if(P===Ne)return!0}return!1},Ff.prototype.getId=function(P,N){var $=P.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];$=P.properties[he],typeof $=="boolean"&&($=Number($))}return $},Be("FeatureIndex",Ff,{omit:["rawTileData","sourceLayerCoder"]});function f0(L,P,N,$,he){return E(L,function(xe,Te){var Ne=P instanceof Qi?P.get(Te):null;return Ne&&Ne.evaluate?Ne.evaluate(N,$,he):Ne})}function c0(L){for(var P=1/0,N=1/0,$=-1/0,he=-1/0,xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe];P=Math.min(P,Ne.x),N=Math.min(N,Ne.y),$=Math.max($,Ne.x),he=Math.max(he,Ne.y)}return{minX:P,minY:N,maxX:$,maxY:he}}function Jm(L,P){return P-L}var Qm=3e4,ys=function(P,N){this.tileID=P,this.uid=b(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ys.prototype.registerFadeDuration=function(P){var N=P+this.timeAdded;N<q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},ys.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ys.prototype.loadVectorData=function(P,N,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!P){this.collisionBoxArray=new Tf;return}P.featureIndex&&(this.latestFeatureIndex=P.featureIndex,P.rawTileData?(this.latestRawTileData=P.rawTileData,this.latestFeatureIndex.rawTileData=P.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=P.collisionBoxArray,this.buckets=Km(P.buckets,N.style),this.hasSymbolBuckets=!1;for(var he in this.buckets){var xe=this.buckets[he];if(xe instanceof no)if(this.hasSymbolBuckets=!0,$)xe.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Te in this.buckets){var Ne=this.buckets[Te];if(Ne instanceof no&&Ne.hasRTLText){this.hasRTLText=!0,Oi();break}}this.queryPadding=0;for(var rt in this.buckets){var gt=this.buckets[rt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(rt).queryRadius(gt))}P.imageAtlas&&(this.imageAtlas=P.imageAtlas),P.glyphAtlasImage&&(this.glyphAtlasImage=P.glyphAtlasImage)},ys.prototype.unloadVectorData=function(){for(var P in this.buckets)this.buckets[P].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ys.prototype.getBucket=function(P){return this.buckets[P.id]},ys.prototype.upload=function(P){for(var N in this.buckets){var $=this.buckets[N];$.uploadPending()&&$.upload(P)}var he=P.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mc(P,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mc(P,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},ys.prototype.prepare=function(P){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(P,this.imageAtlasTexture)},ys.prototype.queryRenderedFeatures=function(P,N,$,he,xe,Te,Ne,rt,gt,bt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:xe,scale:Te,tileSize:this.tileSize,pixelPosMatrix:bt,transform:rt,params:Ne,queryPadding:this.queryPadding*gt},P,N,$)},ys.prototype.querySourceFeatures=function(P,N){var $=this.latestFeatureIndex;if(!(!$||!$.rawTileData)){var he=$.loadVTLayers(),xe=N?N.sourceLayer:"",Te=he._geojsonTileLayer||he[xe];if(!!Te)for(var Ne=mf(N&&N.filter),rt=this.tileID.canonical,gt=rt.z,bt=rt.x,Gt=rt.y,lr={z:gt,x:bt,y:Gt},ir=0;ir<Te.length;ir++){var _r=Te.feature(ir);if(Ne.filter(new di(this.tileID.overscaledZ),_r)){var Vr=$.getId(_r,xe),cn=new Ev(_r,gt,bt,Gt,Vr);cn.tile=lr,P.push(cn)}}}},ys.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ys.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ys.prototype.setExpiryData=function(P){var N=this.expirationTime;if(P.cacheControl){var $=X(P.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+$["max-age"]*1e3)}else P.expires&&(this.expirationTime=new Date(P.expires).getTime());if(this.expirationTime){var he=Date.now(),xe=!1;if(this.expirationTime>he)xe=!1;else if(!N)xe=!0;else if(this.expirationTime<N)xe=!0;else{var Te=this.expirationTime-N;Te?this.expirationTime=he+Math.max(Te,Qm):xe=!0}xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ys.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ys.prototype.setFeatureState=function(P,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(P).length===0)){var $=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(!!N.style.hasLayer(he)){var xe=this.buckets[he],Te=xe.layers[0].sourceLayer||"_geojsonTileLayer",Ne=$[Te],rt=P[Te];if(!(!Ne||!rt||Object.keys(rt).length===0)){xe.update(rt,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var gt=N&&N.style&&N.style.getLayer(he);gt&&(this.queryPadding=Math.max(this.queryPadding,gt.queryRadius(xe)))}}}},ys.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ys.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()},ys.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ys.prototype.setHoldDuration=function(P){this.symbolFadeHoldUntil=q.now()+P},ys.prototype.setDependencies=function(P,N){for(var $={},he=0,xe=N;he<xe.length;he+=1){var Te=xe[he];$[Te]=!0}this.dependencies[P]=$},ys.prototype.hasDependency=function(P,N){for(var $=0,he=P;$<he.length;$+=1){var xe=he[$],Te=this.dependencies[xe];if(Te)for(var Ne=0,rt=N;Ne<rt.length;Ne+=1){var gt=rt[Ne];if(Te[gt])return!0}}return!1};var $m=["type","source","source-layer","minzoom","maxzoom","filter","layout"],ec=self.performance,h0=function(P){this._marks={start:[P.url,"start"].join("#"),end:[P.url,"end"].join("#"),measure:P.url.toString()},ec.mark(this._marks.start)};h0.prototype.finish=function(){ec.mark(this._marks.end);var P=ec.getEntriesByName(this._marks.measure);return P.length===0&&(ec.measure(this._marks.measure,this._marks.start,this._marks.end),P=ec.getEntriesByName(this._marks.measure),ec.clearMarks(this._marks.start),ec.clearMarks(this._marks.end),ec.clearMeasures(this._marks.measure)),P},e.Actor=Zc,e.AlphaImage=yc,e.CanonicalTileID=bc,e.CollisionBoxArray=Tf,e.Color=wi,e.DEMData=If,e.DataConstantProperty=Ua,e.DictionaryCoder=Sv,e.EXTENT=Wa,e.ErrorEvent=Sr,e.EvaluationParameters=di,e.Event=Rr,e.Evented=Pr,e.FeatureIndex=Ff,e.FillBucket=rf,e.FillExtrusionBucket=nf,e.ImageAtlas=Lh,e.ImagePosition=mv,e.LineBucket=Sl,e.LngLat=Mo,e.LngLatBounds=rs,e.MercatorCoordinate=xc,e.ONE_EM=Rs,e.OverscaledTileID=ns,e.Point=h,e.Point$1=h,e.Properties=io,e.Protobuf=gv,e.RGBAImage=Ml,e.RequestManager=Me,e.RequestPerformance=h0,e.ResourceType=ft,e.SegmentVector=W,e.SourceFeatureState=Kc,e.StructArrayLayout1ui2=Zf,e.StructArrayLayout2f1f2i16=qu,e.StructArrayLayout2i4=fc,e.StructArrayLayout3ui6=ef,e.StructArrayLayout4i8=xf,e.SymbolBucket=no,e.Texture=mc,e.Tile=ys,e.Transitionable=Co,e.Uniform1f=jr,e.Uniform1i=Qr,e.Uniform2f=rn,e.Uniform3f=mn,e.Uniform4f=Fn,e.UniformColor=Vn,e.UniformMatrix4f=ia,e.UnwrappedTileID=u0,e.ValidationError=mr,e.WritingMode=ql,e.ZoomHistory=or,e.add=Ic,e.addDynamicAttributes=Ap,e.asyncAll=l,e.bezier=d,e.bindAll=S,e.browser=q,e.cacheEntryPossiblyAdded=Qt,e.clamp=c,e.clearTileCache=cr,e.clipLine=jd,e.clone=uv,e.clone$1=I,e.clone$2=np,e.collisionCircleLayout=Dy,e.config=ie,e.create=Pc,e.create$1=dc,e.create$2=pc,e.createCommonjsModule=a,e.createExpression=vu,e.createLayout=jo,e.createStyleLayer=Gm,e.cross=lg,e.deepEqual=s,e.dot=sg,e.dot$1=vg,e.ease=p,e.emitValidationErrors=ko,e.endsWith=k,e.enforceCacheSizeLimit=Zt,e.evaluateSizeForFeature=Bd,e.evaluateSizeForZoom=Ud,e.evaluateVariableOffset=Kd,e.evented=Ei,e.extend=A,e.featureFilter=mf,e.filterObject=F,e.fromRotation=Lc,e.getAnchorAlignment=bp,e.getAnchorJustification=Tp,e.getArrayBuffer=pt,e.getImage=wt,e.getJSON=vt,e.getRTLTextPluginStatus=Ao,e.getReferrer=rr,e.getVideo=Dt,e.identity=Dc,e.invert=Jf,e.isChar=sr,e.isMapboxURL=Le,e.keysDifference=u,e.makeRequest=et,e.mapObject=E,e.mercatorXfromLng=o0,e.mercatorYfromLat=s0,e.mercatorZfromAltitude=l0,e.mul=rp,e.multiply=Qf,e.mvt=Oc,e.normalize=_h,e.number=bo,e.offscreenCanvasSupported=en,e.ortho=tp,e.parseGlyphPBF=im,e.pbf=gv,e.performSymbolLayout=Tm,e.perspective=bh,e.pick=_,e.plugin=qa,e.polygonIntersectsPolygon=vi,e.postMapLoadEvent=Lt,e.postTurnstileEvent=$t,e.potpack=Pd,e.refProperties=$m,e.register=Be,e.registerForPluginStateChange=ji,e.rotate=Ks,e.rotateX=Al,e.rotateZ=Rc,e.scale=Tl,e.scale$1=hg,e.scale$2=ip,e.setCacheLimits=Xr,e.setRTLTextPlugin=ga,e.sphericalToCartesian=G,e.sqrLen=gg,e.styleSpec=Xt,e.sub=fg,e.symbolSize=pm,e.transformMat3=ug,e.transformMat4=fv,e.translate=Vo,e.triggerPluginCompletionEvent=Oa,e.uniqueId=b,e.validateCustomStyleLayer=Um,e.validateLight=Li,e.validateStyle=Io,e.values=x,e.vectorTile=Oc,e.version=n,e.warnOnce=O,e.webpSupported=se,e.window=self,e.wrap=m}),T(["./shared"],function(e){function a(st){var et=typeof st;if(et==="number"||et==="boolean"||et==="string"||st===void 0||st===null)return JSON.stringify(st);if(Array.isArray(st)){for(var vt="[",pt=0,Ct=st;pt<Ct.length;pt+=1){var Ht=Ct[pt];vt+=a(Ht)+","}return vt+"]"}for(var Pe=Object.keys(st).sort(),ke="{",lt=0;lt<Pe.length;lt++)ke+=JSON.stringify(Pe[lt])+":"+a(st[Pe[lt]])+",";return ke+"}"}function n(st){for(var et="",vt=0,pt=e.refProperties;vt<pt.length;vt+=1){var Ct=pt[vt];et+="/"+a(st[Ct])}return et}function r(st,et){for(var vt={},pt=0;pt<st.length;pt++){var Ct=et&&et[st[pt].id]||n(st[pt]);et&&(et[st[pt].id]=Ct);var Ht=vt[Ct];Ht||(Ht=vt[Ct]=[]),Ht.push(st[pt])}var Pe=[];for(var ke in vt)Pe.push(vt[ke]);return Pe}var t=function(et){this.keyCache={},et&&this.replace(et)};t.prototype.replace=function(et){this._layerConfigs={},this._layers={},this.update(et,[])},t.prototype.update=function(et,vt){for(var pt=this,Ct=0,Ht=et;Ct<Ht.length;Ct+=1){var Pe=Ht[Ct];this._layerConfigs[Pe.id]=Pe;var ke=this._layers[Pe.id]=e.createStyleLayer(Pe);ke._featureFilter=e.featureFilter(ke.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var lt=0,ct=vt;lt<ct.length;lt+=1){var yt=ct[lt];delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt]}this.familiesBySource={};for(var Rt=r(e.values(this._layerConfigs),this.keyCache),wt=0,Dt=Rt;wt<Dt.length;wt+=1){var Jt=Dt[wt],fr=Jt.map(function(wr){return pt._layers[wr.id]}),Rr=fr[0];if(Rr.visibility!=="none"){var Sr=Rr.source||"",Pr=this.familiesBySource[Sr];Pr||(Pr=this.familiesBySource[Sr]={});var Jr=Rr.sourceLayer||"_geojsonTileLayer",ur=Pr[Jr];ur||(ur=Pr[Jr]=[]),ur.push(fr)}}};var h=1,i=function(et){var vt={},pt=[];for(var Ct in et){var Ht=et[Ct],Pe=vt[Ct]={};for(var ke in Ht){var lt=Ht[+ke];if(!(!lt||lt.bitmap.width===0||lt.bitmap.height===0)){var ct={x:0,y:0,w:lt.bitmap.width+2*h,h:lt.bitmap.height+2*h};pt.push(ct),Pe[ke]={rect:ct,metrics:lt.metrics}}}}var yt=e.potpack(pt),Rt=yt.w,wt=yt.h,Dt=new e.AlphaImage({width:Rt||1,height:wt||1});for(var Jt in et){var fr=et[Jt];for(var Rr in fr){var Sr=fr[+Rr];if(!(!Sr||Sr.bitmap.width===0||Sr.bitmap.height===0)){var Pr=vt[Jt][Rr].rect;e.AlphaImage.copy(Sr.bitmap,Dt,{x:0,y:0},{x:Pr.x+h,y:Pr.y+h},Sr.bitmap)}}}this.image=Dt,this.positions=vt};e.register("GlyphAtlas",i);var s=function(et){this.tileID=new e.OverscaledTileID(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.uid=et.uid,this.zoom=et.zoom,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId};s.prototype.parse=function(et,vt,pt,Ct,Ht){var Pe=this;this.status="parsing",this.data=et,this.collisionBoxArray=new e.CollisionBoxArray;var ke=new e.DictionaryCoder(Object.keys(et.layers).sort()),lt=new e.FeatureIndex(this.tileID,this.promoteId);lt.bucketLayerIDs=[];var ct={},yt={featureIndex:lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pt},Rt=vt.familiesBySource[this.source];for(var wt in Rt){var Dt=et.layers[wt];if(!!Dt){Dt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Jt=ke.encode(wt),fr=[],Rr=0;Rr<Dt.length;Rr++){var Sr=Dt.feature(Rr),Pr=lt.getId(Sr,wt);fr.push({feature:Sr,id:Pr,index:Rr,sourceLayerIndex:Jt})}for(var Jr=0,ur=Rt[wt];Jr<ur.length;Jr+=1){var wr=ur[Jr],Br=wr[0];if(!(Br.minzoom&&this.zoom<Math.floor(Br.minzoom))&&!(Br.maxzoom&&this.zoom>=Br.maxzoom)&&Br.visibility!=="none"){y(wr,this.zoom,pt);var Yr=ct[Br.id]=Br.createBucket({index:lt.bucketLayerIDs.length,layers:wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jt,sourceID:this.source});Yr.populate(fr,yt,this.tileID.canonical),lt.bucketLayerIDs.push(wr.map(function(kr){return kr.id}))}}}}var Dr,at,zt,qt,hr=e.mapObject(yt.glyphDependencies,function(kr){return Object.keys(kr).map(Number)});Object.keys(hr).length?Ct.send("getGlyphs",{uid:this.uid,stacks:hr},function(kr,Kr){Dr||(Dr=kr,at=Kr,Ir.call(Pe))}):at={};var Ur=Object.keys(yt.iconDependencies);Ur.length?Ct.send("getImages",{icons:Ur,source:this.source,tileID:this.tileID,type:"icons"},function(kr,Kr){Dr||(Dr=kr,zt=Kr,Ir.call(Pe))}):zt={};var Gr=Object.keys(yt.patternDependencies);Gr.length?Ct.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"patterns"},function(kr,Kr){Dr||(Dr=kr,qt=Kr,Ir.call(Pe))}):qt={},Ir.call(this);function Ir(){if(Dr)return Ht(Dr);if(at&&zt&&qt){var kr=new i(at),Kr=new e.ImageAtlas(zt,qt);for(var kn in ct){var yn=ct[kn];yn instanceof e.SymbolBucket?(y(yn.layers,this.zoom,pt),e.performSymbolLayout(yn,at,kr.positions,zt,Kr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):yn.hasPattern&&(yn instanceof e.LineBucket||yn instanceof e.FillBucket||yn instanceof e.FillExtrusionBucket)&&(y(yn.layers,this.zoom,pt),yn.addFeatures(yt,this.tileID.canonical,Kr.patternPositions))}this.status="done",Ht(null,{buckets:e.values(ct).filter(function(Yn){return!Yn.isEmpty()}),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kr.image,imageAtlas:Kr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?kr.positions:null})}}};function y(st,et,vt){for(var pt=new e.EvaluationParameters(et),Ct=0,Ht=st;Ct<Ht.length;Ct+=1){var Pe=Ht[Ct];Pe.recalculate(pt,vt)}}function d(st,et){var vt=e.getArrayBuffer(st.request,function(pt,Ct,Ht,Pe){pt?et(pt):Ct&&et(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ct)),rawData:Ct,cacheControl:Ht,expires:Pe})});return function(){vt.cancel(),et()}}var p=function(et,vt,pt,Ct){this.actor=et,this.layerIndex=vt,this.availableImages=pt,this.loadVectorData=Ct||d,this.loading={},this.loaded={}};p.prototype.loadTile=function(et,vt){var pt=this,Ct=et.uid;this.loading||(this.loading={});var Ht=et&&et.request&&et.request.collectResourceTiming?new e.RequestPerformance(et.request):!1,Pe=this.loading[Ct]=new s(et);Pe.abort=this.loadVectorData(et,function(ke,lt){if(delete pt.loading[Ct],ke||!lt)return Pe.status="done",pt.loaded[Ct]=Pe,vt(ke);var ct=lt.rawData,yt={};lt.expires&&(yt.expires=lt.expires),lt.cacheControl&&(yt.cacheControl=lt.cacheControl);var Rt={};if(Ht){var wt=Ht.finish();wt&&(Rt.resourceTiming=JSON.parse(JSON.stringify(wt)))}Pe.vectorTile=lt.vectorTile,Pe.parse(lt.vectorTile,pt.layerIndex,pt.availableImages,pt.actor,function(Dt,Jt){if(Dt||!Jt)return vt(Dt);vt(null,e.extend({rawTileData:ct.slice(0)},Jt,yt,Rt))}),pt.loaded=pt.loaded||{},pt.loaded[Ct]=Pe})},p.prototype.reloadTile=function(et,vt){var pt=this,Ct=this.loaded,Ht=et.uid,Pe=this;if(Ct&&Ct[Ht]){var ke=Ct[Ht];ke.showCollisionBoxes=et.showCollisionBoxes;var lt=function(ct,yt){var Rt=ke.reloadCallback;Rt&&(delete ke.reloadCallback,ke.parse(ke.vectorTile,Pe.layerIndex,pt.availableImages,Pe.actor,Rt)),vt(ct,yt)};ke.status==="parsing"?ke.reloadCallback=lt:ke.status==="done"&&(ke.vectorTile?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,lt):lt())}},p.prototype.abortTile=function(et,vt){var pt=this.loading,Ct=et.uid;pt&&pt[Ct]&&pt[Ct].abort&&(pt[Ct].abort(),delete pt[Ct]),vt()},p.prototype.removeTile=function(et,vt){var pt=this.loaded,Ct=et.uid;pt&&pt[Ct]&&delete pt[Ct],vt()};var c=e.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(et,vt){var pt=et.uid,Ct=et.encoding,Ht=et.rawImageData,Pe=c&&Ht instanceof c?this.getImageData(Ht):Ht,ke=new e.DEMData(pt,Pe,Ct);this.loaded=this.loaded||{},this.loaded[pt]=ke,vt(null,ke)},m.prototype.getImageData=function(et){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(et.width,et.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=et.width,this.offscreenCanvas.height=et.height,this.offscreenCanvasContext.drawImage(et,0,0,et.width,et.height);var vt=this.offscreenCanvasContext.getImageData(-1,-1,et.width+2,et.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:vt.width,height:vt.height},vt.data)},m.prototype.removeTile=function(et){var vt=this.loaded,pt=et.uid;vt&&vt[pt]&&delete vt[pt]};var l=x;function x(st,et){var vt=st&&st.type,pt;if(vt==="FeatureCollection")for(pt=0;pt<st.features.length;pt++)x(st.features[pt],et);else if(vt==="GeometryCollection")for(pt=0;pt<st.geometries.length;pt++)x(st.geometries[pt],et);else if(vt==="Feature")x(st.geometry,et);else if(vt==="Polygon")u(st.coordinates,et);else if(vt==="MultiPolygon")for(pt=0;pt<st.coordinates.length;pt++)u(st.coordinates[pt],et);return st}function u(st,et){if(st.length!==0){A(st[0],et);for(var vt=1;vt<st.length;vt++)A(st[vt],!et)}}function A(st,et){for(var vt=0,pt=0,Ct=st.length,Ht=Ct-1;pt<Ct;Ht=pt++)vt+=(st[pt][0]-st[Ht][0])*(st[Ht][1]+st[pt][1]);vt>=0!=!!et&&st.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(et){this._feature=et,this.extent=e.EXTENT,this.type=et.type,this.properties=et.tags,"id"in et&&!isNaN(et.id)&&(this.id=parseInt(et.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var et=[],vt=0,pt=this._feature.geometry;vt<pt.length;vt+=1){var Ct=pt[vt];et.push([new e.Point$1(Ct[0],Ct[1])])}return et}else{for(var Ht=[],Pe=0,ke=this._feature.geometry;Pe<ke.length;Pe+=1){for(var lt=ke[Pe],ct=[],yt=0,Rt=lt;yt<Rt.length;yt+=1){var wt=Rt[yt];ct.push(new e.Point$1(wt[0],wt[1]))}Ht.push(ct)}return Ht}},g.prototype.toGeoJSON=function(et,vt,pt){return _.call(this,et,vt,pt)};var b=function(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=et.length,this._features=et};b.prototype.feature=function(et){return new g(this._features[et])};var v=e.vectorTile.VectorTileFeature,C=S;function S(st,et){this.options=et||{},this.features=st,this.length=st.length}S.prototype.feature=function(st){return new k(this.features[st],this.options.extent)};function k(st,et){this.id=typeof st.id=="number"?st.id:void 0,this.type=st.type,this.rawGeometry=st.type===1?[st.geometry]:st.geometry,this.properties=st.tags,this.extent=et||4096}k.prototype.loadGeometry=function(){var st=this.rawGeometry;this.geometry=[];for(var et=0;et<st.length;et++){for(var vt=st[et],pt=[],Ct=0;Ct<vt.length;Ct++)pt.push(new e.Point$1(vt[Ct][0],vt[Ct][1]));this.geometry.push(pt)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var st=this.geometry,et=1/0,vt=-1/0,pt=1/0,Ct=-1/0,Ht=0;Ht<st.length;Ht++)for(var Pe=st[Ht],ke=0;ke<Pe.length;ke++){var lt=Pe[ke];et=Math.min(et,lt.x),vt=Math.max(vt,lt.x),pt=Math.min(pt,lt.y),Ct=Math.max(Ct,lt.y)}return[et,pt,vt,Ct]},k.prototype.toGeoJSON=v.prototype.toGeoJSON;var E=R,F=R,I=O,D=C;function R(st){var et=new e.pbf;return z(st,et),et.finish()}function O(st,et){et=et||{};var vt={};for(var pt in st)vt[pt]=new C(st[pt].features,et),vt[pt].name=pt,vt[pt].version=et.version,vt[pt].extent=et.extent;return R({layers:vt})}function z(st,et){for(var vt in st.layers)et.writeMessage(3,B,st.layers[vt])}function B(st,et){et.writeVarintField(15,st.version||1),et.writeStringField(1,st.name||""),et.writeVarintField(5,st.extent||4096);var vt,pt={keys:[],values:[],keycache:{},valuecache:{}};for(vt=0;vt<st.length;vt++)pt.feature=st.feature(vt),et.writeMessage(2,G,pt);var Ct=pt.keys;for(vt=0;vt<Ct.length;vt++)et.writeStringField(3,Ct[vt]);var Ht=pt.values;for(vt=0;vt<Ht.length;vt++)et.writeMessage(4,ue,Ht[vt])}function G(st,et){var vt=st.feature;vt.id!==void 0&&et.writeVarintField(1,vt.id),et.writeMessage(2,Q,st),et.writeVarintField(3,vt.type),et.writeMessage(4,re,vt)}function Q(st,et){var vt=st.feature,pt=st.keys,Ct=st.values,Ht=st.keycache,Pe=st.valuecache;for(var ke in vt.properties){var lt=Ht[ke];typeof lt>"u"&&(pt.push(ke),lt=pt.length-1,Ht[ke]=lt),et.writeVarint(lt);var ct=vt.properties[ke],yt=typeof ct;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(ct=JSON.stringify(ct));var Rt=yt+":"+ct,wt=Pe[Rt];typeof wt>"u"&&(Ct.push(ct),wt=Ct.length-1,Pe[Rt]=wt),et.writeVarint(wt)}}function X(st,et){return(et<<3)+(st&7)}function j(st){return st<<1^st>>31}function re(st,et){for(var vt=st.loadGeometry(),pt=st.type,Ct=0,Ht=0,Pe=vt.length,ke=0;ke<Pe;ke++){var lt=vt[ke],ct=1;pt===1&&(ct=lt.length),et.writeVarint(X(1,ct));for(var yt=pt===3?lt.length-1:lt.length,Rt=0;Rt<yt;Rt++){Rt===1&&pt!==1&&et.writeVarint(X(2,yt-1));var wt=lt[Rt].x-Ct,Dt=lt[Rt].y-Ht;et.writeVarint(j(wt)),et.writeVarint(j(Dt)),Ct+=wt,Ht+=Dt}pt===3&&et.writeVarint(X(7,1))}}function ue(st,et){var vt=typeof st;vt==="string"?et.writeStringField(1,st):vt==="boolean"?et.writeBooleanField(7,st):vt==="number"&&(st%1!==0?et.writeDoubleField(3,st):st<0?et.writeSVarintField(6,st):et.writeVarintField(5,st))}E.fromVectorTileJs=F,E.fromGeojsonVt=I,E.GeoJSONWrapper=D;function K(st,et,vt,pt,Ct,Ht){if(!(Ct-pt<=vt)){var Pe=pt+Ct>>1;te(st,et,Pe,pt,Ct,Ht%2),K(st,et,vt,pt,Pe-1,Ht+1),K(st,et,vt,Pe+1,Ct,Ht+1)}}function te(st,et,vt,pt,Ct,Ht){for(;Ct>pt;){if(Ct-pt>600){var Pe=Ct-pt+1,ke=vt-pt+1,lt=Math.log(Pe),ct=.5*Math.exp(2*lt/3),yt=.5*Math.sqrt(lt*ct*(Pe-ct)/Pe)*(ke-Pe/2<0?-1:1),Rt=Math.max(pt,Math.floor(vt-ke*ct/Pe+yt)),wt=Math.min(Ct,Math.floor(vt+(Pe-ke)*ct/Pe+yt));te(st,et,vt,Rt,wt,Ht)}var Dt=et[2*vt+Ht],Jt=pt,fr=Ct;for(Y(st,et,pt,vt),et[2*Ct+Ht]>Dt&&Y(st,et,pt,Ct);Jt<fr;){for(Y(st,et,Jt,fr),Jt++,fr--;et[2*Jt+Ht]<Dt;)Jt++;for(;et[2*fr+Ht]>Dt;)fr--}et[2*pt+Ht]===Dt?Y(st,et,pt,fr):(fr++,Y(st,et,fr,Ct)),fr<=vt&&(pt=fr+1),vt<=fr&&(Ct=fr-1)}}function Y(st,et,vt,pt){V(st,vt,pt),V(et,2*vt,2*pt),V(et,2*vt+1,2*pt+1)}function V(st,et,vt){var pt=st[et];st[et]=st[vt],st[vt]=pt}function ee(st,et,vt,pt,Ct,Ht,Pe){for(var ke=[0,st.length-1,0],lt=[],ct,yt;ke.length;){var Rt=ke.pop(),wt=ke.pop(),Dt=ke.pop();if(wt-Dt<=Pe){for(var Jt=Dt;Jt<=wt;Jt++)ct=et[2*Jt],yt=et[2*Jt+1],ct>=vt&&ct<=Ct&&yt>=pt&&yt<=Ht&&lt.push(st[Jt]);continue}var fr=Math.floor((Dt+wt)/2);ct=et[2*fr],yt=et[2*fr+1],ct>=vt&&ct<=Ct&&yt>=pt&&yt<=Ht&&lt.push(st[fr]);var Rr=(Rt+1)%2;(Rt===0?vt<=ct:pt<=yt)&&(ke.push(Dt),ke.push(fr-1),ke.push(Rr)),(Rt===0?Ct>=ct:Ht>=yt)&&(ke.push(fr+1),ke.push(wt),ke.push(Rr))}return lt}function ne(st,et,vt,pt,Ct,Ht){for(var Pe=[0,st.length-1,0],ke=[],lt=Ct*Ct;Pe.length;){var ct=Pe.pop(),yt=Pe.pop(),Rt=Pe.pop();if(yt-Rt<=Ht){for(var wt=Rt;wt<=yt;wt++)Z(et[2*wt],et[2*wt+1],vt,pt)<=lt&&ke.push(st[wt]);continue}var Dt=Math.floor((Rt+yt)/2),Jt=et[2*Dt],fr=et[2*Dt+1];Z(Jt,fr,vt,pt)<=lt&&ke.push(st[Dt]);var Rr=(ct+1)%2;(ct===0?vt-Ct<=Jt:pt-Ct<=fr)&&(Pe.push(Rt),Pe.push(Dt-1),Pe.push(Rr)),(ct===0?vt+Ct>=Jt:pt+Ct>=fr)&&(Pe.push(Dt+1),Pe.push(yt),Pe.push(Rr))}return ke}function Z(st,et,vt,pt){var Ct=st-vt,Ht=et-pt;return Ct*Ct+Ht*Ht}var q=function(st){return st[0]},ie=function(st){return st[1]},se=function(et,vt,pt,Ct,Ht){vt===void 0&&(vt=q),pt===void 0&&(pt=ie),Ct===void 0&&(Ct=64),Ht===void 0&&(Ht=Float64Array),this.nodeSize=Ct,this.points=et;for(var Pe=et.length<65536?Uint16Array:Uint32Array,ke=this.ids=new Pe(et.length),lt=this.coords=new Ht(et.length*2),ct=0;ct<et.length;ct++)ke[ct]=ct,lt[2*ct]=vt(et[ct]),lt[2*ct+1]=pt(et[ct]);K(ke,lt,Ct,0,ke.length-1,0)};se.prototype.range=function(et,vt,pt,Ct){return ee(this.ids,this.coords,et,vt,pt,Ct,this.nodeSize)},se.prototype.within=function(et,vt,pt){return ne(this.ids,this.coords,et,vt,pt,this.nodeSize)};var ae={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(st){return st}},oe=function(et){this.options=Oe(Object.create(ae),et),this.trees=new Array(this.options.maxZoom+1)};oe.prototype.load=function(et){var vt=this.options,pt=vt.log,Ct=vt.minZoom,Ht=vt.maxZoom,Pe=vt.nodeSize;pt&&console.time("total time");var ke="prepare "+et.length+" points";pt&&console.time(ke),this.points=et;for(var lt=[],ct=0;ct<et.length;ct++)!et[ct].geometry||lt.push(ce(et[ct],ct));this.trees[Ht+1]=new se(lt,_e,Ee,Pe,Float32Array),pt&&console.timeEnd(ke);for(var yt=Ht;yt>=Ct;yt--){var Rt=+Date.now();lt=this._cluster(lt,yt),this.trees[yt]=new se(lt,_e,Ee,Pe,Float32Array),pt&&console.log("z%d: %d clusters in %dms",yt,lt.length,+Date.now()-Rt)}return pt&&console.timeEnd("total time"),this},oe.prototype.getClusters=function(et,vt){var pt=((et[0]+180)%360+360)%360-180,Ct=Math.max(-90,Math.min(90,et[1])),Ht=et[2]===180?180:((et[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,et[3]));if(et[2]-et[0]>=360)pt=-180,Ht=180;else if(pt>Ht){var ke=this.getClusters([pt,Ct,180,Pe],vt),lt=this.getClusters([-180,Ct,Ht,Pe],vt);return ke.concat(lt)}for(var ct=this.trees[this._limitZoom(vt)],yt=ct.range(ge(pt),me(Pe),ge(Ht),me(Ct)),Rt=[],wt=0,Dt=yt;wt<Dt.length;wt+=1){var Jt=Dt[wt],fr=ct.points[Jt];Rt.push(fr.numPoints?de(fr):this.points[fr.index])}return Rt},oe.prototype.getChildren=function(et){var vt=this._getOriginId(et),pt=this._getOriginZoom(et),Ct="No cluster with the specified id.",Ht=this.trees[pt];if(!Ht)throw new Error(Ct);var Pe=Ht.points[vt];if(!Pe)throw new Error(Ct);for(var ke=this.options.radius/(this.options.extent*Math.pow(2,pt-1)),lt=Ht.within(Pe.x,Pe.y,ke),ct=[],yt=0,Rt=lt;yt<Rt.length;yt+=1){var wt=Rt[yt],Dt=Ht.points[wt];Dt.parentId===et&&ct.push(Dt.numPoints?de(Dt):this.points[Dt.index])}if(ct.length===0)throw new Error(Ct);return ct},oe.prototype.getLeaves=function(et,vt,pt){vt=vt||10,pt=pt||0;var Ct=[];return this._appendLeaves(Ct,et,vt,pt,0),Ct},oe.prototype.getTile=function(et,vt,pt){var Ct=this.trees[this._limitZoom(et)],Ht=Math.pow(2,et),Pe=this.options,ke=Pe.extent,lt=Pe.radius,ct=lt/ke,yt=(pt-ct)/Ht,Rt=(pt+1+ct)/Ht,wt={features:[]};return this._addTileFeatures(Ct.range((vt-ct)/Ht,yt,(vt+1+ct)/Ht,Rt),Ct.points,vt,pt,Ht,wt),vt===0&&this._addTileFeatures(Ct.range(1-ct/Ht,yt,1,Rt),Ct.points,Ht,pt,Ht,wt),vt===Ht-1&&this._addTileFeatures(Ct.range(0,yt,ct/Ht,Rt),Ct.points,-1,pt,Ht,wt),wt.features.length?wt:null},oe.prototype.getClusterExpansionZoom=function(et){for(var vt=this._getOriginZoom(et)-1;vt<=this.options.maxZoom;){var pt=this.getChildren(et);if(vt++,pt.length!==1)break;et=pt[0].properties.cluster_id}return vt},oe.prototype._appendLeaves=function(et,vt,pt,Ct,Ht){for(var Pe=this.getChildren(vt),ke=0,lt=Pe;ke<lt.length;ke+=1){var ct=lt[ke],yt=ct.properties;if(yt&&yt.cluster?Ht+yt.point_count<=Ct?Ht+=yt.point_count:Ht=this._appendLeaves(et,yt.cluster_id,pt,Ct,Ht):Ht<Ct?Ht++:et.push(ct),et.length===pt)break}return Ht},oe.prototype._addTileFeatures=function(et,vt,pt,Ct,Ht,Pe){for(var ke=0,lt=et;ke<lt.length;ke+=1){var ct=lt[ke],yt=vt[ct],Rt=yt.numPoints,wt={type:1,geometry:[[Math.round(this.options.extent*(yt.x*Ht-pt)),Math.round(this.options.extent*(yt.y*Ht-Ct))]],tags:Rt?ye(yt):this.points[yt.index].properties},Dt=void 0;Rt?Dt=yt.id:this.options.generateId?Dt=yt.index:this.points[yt.index].id&&(Dt=this.points[yt.index].id),Dt!==void 0&&(wt.id=Dt),Pe.features.push(wt)}},oe.prototype._limitZoom=function(et){return Math.max(this.options.minZoom,Math.min(et,this.options.maxZoom+1))},oe.prototype._cluster=function(et,vt){for(var pt=[],Ct=this.options,Ht=Ct.radius,Pe=Ct.extent,ke=Ct.reduce,lt=Ht/(Pe*Math.pow(2,vt)),ct=0;ct<et.length;ct++){var yt=et[ct];if(!(yt.zoom<=vt)){yt.zoom=vt;for(var Rt=this.trees[vt+1],wt=Rt.within(yt.x,yt.y,lt),Dt=yt.numPoints||1,Jt=yt.x*Dt,fr=yt.y*Dt,Rr=ke&&Dt>1?this._map(yt,!0):null,Sr=(ct<<5)+(vt+1)+this.points.length,Pr=0,Jr=wt;Pr<Jr.length;Pr+=1){var ur=Jr[Pr],wr=Rt.points[ur];if(!(wr.zoom<=vt)){wr.zoom=vt;var Br=wr.numPoints||1;Jt+=wr.x*Br,fr+=wr.y*Br,Dt+=Br,wr.parentId=Sr,ke&&(Rr||(Rr=this._map(yt,!0)),ke(Rr,this._map(wr)))}}Dt===1?pt.push(yt):(yt.parentId=Sr,pt.push(be(Jt/Dt,fr/Dt,Sr,Dt,Rr)))}}return pt},oe.prototype._getOriginId=function(et){return et-this.points.length>>5},oe.prototype._getOriginZoom=function(et){return(et-this.points.length)%32},oe.prototype._map=function(et,vt){if(et.numPoints)return vt?Oe({},et.properties):et.properties;var pt=this.points[et.index].properties,Ct=this.options.map(pt);return vt&&Ct===pt?Oe({},Ct):Ct};function be(st,et,vt,pt,Ct){return{x:st,y:et,zoom:1/0,id:vt,parentId:-1,numPoints:pt,properties:Ct}}function ce(st,et){var vt=st.geometry.coordinates,pt=vt[0],Ct=vt[1];return{x:ge(pt),y:me(Ct),zoom:1/0,index:et,parentId:-1}}function de(st){return{type:"Feature",id:st.id,properties:ye(st),geometry:{type:"Point",coordinates:[Me(st.x),Le(st.y)]}}}function ye(st){var et=st.numPoints,vt=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return Oe(Oe({},st.properties),{cluster:!0,cluster_id:st.id,point_count:et,point_count_abbreviated:vt})}function ge(st){return st/360+.5}function me(st){var et=Math.sin(st*Math.PI/180),vt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return vt<0?0:vt>1?1:vt}function Me(st){return(st-.5)*360}function Le(st){var et=(180-st*360)*Math.PI/180;return 360*Math.atan(Math.exp(et))/Math.PI-90}function Oe(st,et){for(var vt in et)st[vt]=et[vt];return st}function _e(st){return st.x}function Ee(st){return st.y}function Ze(st,et,vt,pt){for(var Ct=pt,Ht=vt-et>>1,Pe=vt-et,ke,lt=st[et],ct=st[et+1],yt=st[vt],Rt=st[vt+1],wt=et+3;wt<vt;wt+=3){var Dt=Ge(st[wt],st[wt+1],lt,ct,yt,Rt);if(Dt>Ct)ke=wt,Ct=Dt;else if(Dt===Ct){var Jt=Math.abs(wt-Ht);Jt<Pe&&(ke=wt,Pe=Jt)}}Ct>pt&&(ke-et>3&&Ze(st,et,ke,pt),st[ke+2]=Ct,vt-ke>3&&Ze(st,ke,vt,pt))}function Ge(st,et,vt,pt,Ct,Ht){var Pe=Ct-vt,ke=Ht-pt;if(Pe!==0||ke!==0){var lt=((st-vt)*Pe+(et-pt)*ke)/(Pe*Pe+ke*ke);lt>1?(vt=Ct,pt=Ht):lt>0&&(vt+=Pe*lt,pt+=ke*lt)}return Pe=st-vt,ke=et-pt,Pe*Pe+ke*ke}function Fe(st,et,vt,pt){var Ct={id:typeof st>"u"?null:st,type:et,geometry:vt,tags:pt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Re(Ct),Ct}function Re(st){var et=st.geometry,vt=st.type;if(vt==="Point"||vt==="MultiPoint"||vt==="LineString")We(st,et);else if(vt==="Polygon"||vt==="MultiLineString")for(var pt=0;pt<et.length;pt++)We(st,et[pt]);else if(vt==="MultiPolygon")for(pt=0;pt<et.length;pt++)for(var Ct=0;Ct<et[pt].length;Ct++)We(st,et[pt][Ct])}function We(st,et){for(var vt=0;vt<et.length;vt+=3)st.minX=Math.min(st.minX,et[vt]),st.minY=Math.min(st.minY,et[vt+1]),st.maxX=Math.max(st.maxX,et[vt]),st.maxY=Math.max(st.maxY,et[vt+1])}function xt(st,et){var vt=[];if(st.type==="FeatureCollection")for(var pt=0;pt<st.features.length;pt++)Nt(vt,st.features[pt],et,pt);else st.type==="Feature"?Nt(vt,st,et):Nt(vt,{geometry:st},et);return vt}function Nt(st,et,vt,pt){if(!!et.geometry){var Ct=et.geometry.coordinates,Ht=et.geometry.type,Pe=Math.pow(vt.tolerance/((1<<vt.maxZoom)*vt.extent),2),ke=[],lt=et.id;if(vt.promoteId?lt=et.properties[vt.promoteId]:vt.generateId&&(lt=pt||0),Ht==="Point")tr(Ct,ke);else if(Ht==="MultiPoint")for(var ct=0;ct<Ct.length;ct++)tr(Ct[ct],ke);else if(Ht==="LineString")Vt(Ct,ke,Pe,!1);else if(Ht==="MultiLineString")if(vt.lineMetrics){for(ct=0;ct<Ct.length;ct++)ke=[],Vt(Ct[ct],ke,Pe,!1),st.push(Fe(lt,"LineString",ke,et.properties));return}else Pt(Ct,ke,Pe,!1);else if(Ht==="Polygon")Pt(Ct,ke,Pe,!0);else if(Ht==="MultiPolygon")for(ct=0;ct<Ct.length;ct++){var yt=[];Pt(Ct[ct],yt,Pe,!0),ke.push(yt)}else if(Ht==="GeometryCollection"){for(ct=0;ct<et.geometry.geometries.length;ct++)Nt(st,{id:lt,geometry:et.geometry.geometries[ct],properties:et.properties},vt,pt);return}else throw new Error("Input data is not a valid GeoJSON object.");st.push(Fe(lt,Ht,ke,et.properties))}}function tr(st,et){et.push($t(st[0])),et.push(Ut(st[1])),et.push(0)}function Vt(st,et,vt,pt){for(var Ct,Ht,Pe=0,ke=0;ke<st.length;ke++){var lt=$t(st[ke][0]),ct=Ut(st[ke][1]);et.push(lt),et.push(ct),et.push(0),ke>0&&(pt?Pe+=(Ct*ct-lt*Ht)/2:Pe+=Math.sqrt(Math.pow(lt-Ct,2)+Math.pow(ct-Ht,2))),Ct=lt,Ht=ct}var yt=et.length-3;et[2]=1,Ze(et,0,yt,vt),et[yt+2]=1,et.size=Math.abs(Pe),et.start=0,et.end=et.size}function Pt(st,et,vt,pt){for(var Ct=0;Ct<st.length;Ct++){var Ht=[];Vt(st[Ct],Ht,vt,pt),et.push(Ht)}}function $t(st){return st/360+.5}function Ut(st){var et=Math.sin(st*Math.PI/180),vt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return vt<0?0:vt>1?1:vt}function Lt(st,et,vt,pt,Ct,Ht,Pe,ke){if(vt/=et,pt/=et,Ht>=vt&&Pe<pt)return st;if(Pe<vt||Ht>=pt)return null;for(var lt=[],ct=0;ct<st.length;ct++){var yt=st[ct],Rt=yt.geometry,wt=yt.type,Dt=Ct===0?yt.minX:yt.minY,Jt=Ct===0?yt.maxX:yt.maxY;if(Dt>=vt&&Jt<pt){lt.push(yt);continue}else if(Jt<vt||Dt>=pt)continue;var fr=[];if(wt==="Point"||wt==="MultiPoint")Ye(Rt,fr,vt,pt,Ct);else if(wt==="LineString")ot(Rt,fr,vt,pt,Ct,!1,ke.lineMetrics);else if(wt==="MultiLineString")Ae(Rt,fr,vt,pt,Ct,!1);else if(wt==="Polygon")Ae(Rt,fr,vt,pt,Ct,!0);else if(wt==="MultiPolygon")for(var Rr=0;Rr<Rt.length;Rr++){var Sr=[];Ae(Rt[Rr],Sr,vt,pt,Ct,!0),Sr.length&&fr.push(Sr)}if(fr.length){if(ke.lineMetrics&&wt==="LineString"){for(Rr=0;Rr<fr.length;Rr++)lt.push(Fe(yt.id,wt,fr[Rr],yt.tags));continue}(wt==="LineString"||wt==="MultiLineString")&&(fr.length===1?(wt="LineString",fr=fr[0]):wt="MultiLineString"),(wt==="Point"||wt==="MultiPoint")&&(wt=fr.length===3?"Point":"MultiPoint"),lt.push(Fe(yt.id,wt,fr,yt.tags))}}return lt.length?lt:null}function Ye(st,et,vt,pt,Ct){for(var Ht=0;Ht<st.length;Ht+=3){var Pe=st[Ht+Ct];Pe>=vt&&Pe<=pt&&(et.push(st[Ht]),et.push(st[Ht+1]),et.push(st[Ht+2]))}}function ot(st,et,vt,pt,Ct,Ht,Pe){for(var ke=Ve(st),lt=Ct===0?Je:tt,ct=st.start,yt,Rt,wt=0;wt<st.length-3;wt+=3){var Dt=st[wt],Jt=st[wt+1],fr=st[wt+2],Rr=st[wt+3],Sr=st[wt+4],Pr=Ct===0?Dt:Jt,Jr=Ct===0?Rr:Sr,ur=!1;Pe&&(yt=Math.sqrt(Math.pow(Dt-Rr,2)+Math.pow(Jt-Sr,2))),Pr<vt?Jr>vt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,vt),Pe&&(ke.start=ct+yt*Rt)):Pr>pt?Jr<pt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,pt),Pe&&(ke.start=ct+yt*Rt)):He(ke,Dt,Jt,fr),Jr<vt&&Pr>=vt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,vt),ur=!0),Jr>pt&&Pr<=pt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,pt),ur=!0),!Ht&&ur&&(Pe&&(ke.end=ct+yt*Rt),et.push(ke),ke=Ve(st)),Pe&&(ct+=yt)}var wr=st.length-3;Dt=st[wr],Jt=st[wr+1],fr=st[wr+2],Pr=Ct===0?Dt:Jt,Pr>=vt&&Pr<=pt&&He(ke,Dt,Jt,fr),wr=ke.length-3,Ht&&wr>=3&&(ke[wr]!==ke[0]||ke[wr+1]!==ke[1])&&He(ke,ke[0],ke[1],ke[2]),ke.length&&et.push(ke)}function Ve(st){var et=[];return et.size=st.size,et.start=st.start,et.end=st.end,et}function Ae(st,et,vt,pt,Ct,Ht){for(var Pe=0;Pe<st.length;Pe++)ot(st[Pe],et,vt,pt,Ct,Ht,!1)}function He(st,et,vt,pt){st.push(et),st.push(vt),st.push(pt)}function Je(st,et,vt,pt,Ct,Ht){var Pe=(Ht-et)/(pt-et);return st.push(Ht),st.push(vt+(Ct-vt)*Pe),st.push(1),Pe}function tt(st,et,vt,pt,Ct,Ht){var Pe=(Ht-vt)/(Ct-vt);return st.push(et+(pt-et)*Pe),st.push(Ht),st.push(1),Pe}function St(st,et){var vt=et.buffer/et.extent,pt=st,Ct=Lt(st,1,-1-vt,vt,0,-1,2,et),Ht=Lt(st,1,1-vt,2+vt,0,-1,2,et);return(Ct||Ht)&&(pt=Lt(st,1,-vt,1+vt,0,-1,2,et)||[],Ct&&(pt=_t(Ct,1).concat(pt)),Ht&&(pt=pt.concat(_t(Ht,-1)))),pt}function _t(st,et){for(var vt=[],pt=0;pt<st.length;pt++){var Ct=st[pt],Ht=Ct.type,Pe;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")Pe=kt(Ct.geometry,et);else if(Ht==="MultiLineString"||Ht==="Polygon"){Pe=[];for(var ke=0;ke<Ct.geometry.length;ke++)Pe.push(kt(Ct.geometry[ke],et))}else if(Ht==="MultiPolygon")for(Pe=[],ke=0;ke<Ct.geometry.length;ke++){for(var lt=[],ct=0;ct<Ct.geometry[ke].length;ct++)lt.push(kt(Ct.geometry[ke][ct],et));Pe.push(lt)}vt.push(Fe(Ct.id,Ht,Pe,Ct.tags))}return vt}function kt(st,et){var vt=[];vt.size=st.size,st.start!==void 0&&(vt.start=st.start,vt.end=st.end);for(var pt=0;pt<st.length;pt+=3)vt.push(st[pt]+et,st[pt+1],st[pt+2]);return vt}function jt(st,et){if(st.transformed)return st;var vt=1<<st.z,pt=st.x,Ct=st.y,Ht,Pe,ke;for(Ht=0;Ht<st.features.length;Ht++){var lt=st.features[Ht],ct=lt.geometry,yt=lt.type;if(lt.geometry=[],yt===1)for(Pe=0;Pe<ct.length;Pe+=2)lt.geometry.push(Bt(ct[Pe],ct[Pe+1],et,vt,pt,Ct));else for(Pe=0;Pe<ct.length;Pe++){var Rt=[];for(ke=0;ke<ct[Pe].length;ke+=2)Rt.push(Bt(ct[Pe][ke],ct[Pe][ke+1],et,vt,pt,Ct));lt.geometry.push(Rt)}}return st.transformed=!0,st}function Bt(st,et,vt,pt,Ct,Ht){return[Math.round(vt*(st*pt-Ct)),Math.round(vt*(et*pt-Ht))]}function Wt(st,et,vt,pt,Ct){for(var Ht=et===Ct.maxZoom?0:Ct.tolerance/((1<<et)*Ct.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:vt,y:pt,z:et,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<st.length;ke++){Pe.numFeatures++,Qt(Pe,st[ke],Ht,Ct);var lt=st[ke].minX,ct=st[ke].minY,yt=st[ke].maxX,Rt=st[ke].maxY;lt<Pe.minX&&(Pe.minX=lt),ct<Pe.minY&&(Pe.minY=ct),yt>Pe.maxX&&(Pe.maxX=yt),Rt>Pe.maxY&&(Pe.maxY=Rt)}return Pe}function Qt(st,et,vt,pt){var Ct=et.geometry,Ht=et.type,Pe=[];if(Ht==="Point"||Ht==="MultiPoint")for(var ke=0;ke<Ct.length;ke+=3)Pe.push(Ct[ke]),Pe.push(Ct[ke+1]),st.numPoints++,st.numSimplified++;else if(Ht==="LineString")Zt(Pe,Ct,st,vt,!1,!1);else if(Ht==="MultiLineString"||Ht==="Polygon")for(ke=0;ke<Ct.length;ke++)Zt(Pe,Ct[ke],st,vt,Ht==="Polygon",ke===0);else if(Ht==="MultiPolygon")for(var lt=0;lt<Ct.length;lt++){var ct=Ct[lt];for(ke=0;ke<ct.length;ke++)Zt(Pe,ct[ke],st,vt,!0,ke===0)}if(Pe.length){var yt=et.tags||null;if(Ht==="LineString"&&pt.lineMetrics){yt={};for(var Rt in et.tags)yt[Rt]=et.tags[Rt];yt.mapbox_clip_start=Ct.start/Ct.size,yt.mapbox_clip_end=Ct.end/Ct.size}var wt={geometry:Pe,type:Ht==="Polygon"||Ht==="MultiPolygon"?3:Ht==="LineString"||Ht==="MultiLineString"?2:1,tags:yt};et.id!==null&&(wt.id=et.id),st.features.push(wt)}}function Zt(st,et,vt,pt,Ct,Ht){var Pe=pt*pt;if(pt>0&&et.size<(Ct?Pe:pt)){vt.numPoints+=et.length/3;return}for(var ke=[],lt=0;lt<et.length;lt+=3)(pt===0||et[lt+2]>Pe)&&(vt.numSimplified++,ke.push(et[lt]),ke.push(et[lt+1])),vt.numPoints++;Ct&&cr(ke,Ht),st.push(ke)}function cr(st,et){for(var vt=0,pt=0,Ct=st.length,Ht=Ct-2;pt<Ct;Ht=pt,pt+=2)vt+=(st[pt]-st[Ht])*(st[pt+1]+st[Ht+1]);if(vt>0===et)for(pt=0,Ct=st.length;pt<Ct/2;pt+=2){var Pe=st[pt],ke=st[pt+1];st[pt]=st[Ct-2-pt],st[pt+1]=st[Ct-1-pt],st[Ct-2-pt]=Pe,st[Ct-1-pt]=ke}}function Xr(st,et){return new vn(st,et)}function vn(st,et){et=this.options=ft(Object.create(this.options),et);var vt=et.debug;if(vt&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");var pt=xt(st,et);this.tiles={},this.tileCoords=[],vt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pt=St(pt,et),pt.length&&this.splitTile(pt,0,0,0),vt&&(pt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(st,et,vt,pt,Ct,Ht,Pe){for(var ke=[st,et,vt,pt],lt=this.options,ct=lt.debug;ke.length;){pt=ke.pop(),vt=ke.pop(),et=ke.pop(),st=ke.pop();var yt=1<<et,Rt=en(et,vt,pt),wt=this.tiles[Rt];if(!wt&&(ct>1&&console.time("creation"),wt=this.tiles[Rt]=Wt(st,et,vt,pt,lt),this.tileCoords.push({z:et,x:vt,y:pt}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,vt,pt,wt.numFeatures,wt.numPoints,wt.numSimplified),console.timeEnd("creation"));var Dt="z"+et;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if(wt.source=st,Ct){if(et===lt.maxZoom||et===Ct)continue;var Jt=1<<Ct-et;if(vt!==Math.floor(Ht/Jt)||pt!==Math.floor(Pe/Jt))continue}else if(et===lt.indexMaxZoom||wt.numPoints<=lt.indexMaxPoints)continue;if(wt.source=null,st.length!==0){ct>1&&console.time("clipping");var fr=.5*lt.buffer/lt.extent,Rr=.5-fr,Sr=.5+fr,Pr=1+fr,Jr,ur,wr,Br,Yr,Dr;Jr=ur=wr=Br=null,Yr=Lt(st,yt,vt-fr,vt+Sr,0,wt.minX,wt.maxX,lt),Dr=Lt(st,yt,vt+Rr,vt+Pr,0,wt.minX,wt.maxX,lt),st=null,Yr&&(Jr=Lt(Yr,yt,pt-fr,pt+Sr,1,wt.minY,wt.maxY,lt),ur=Lt(Yr,yt,pt+Rr,pt+Pr,1,wt.minY,wt.maxY,lt),Yr=null),Dr&&(wr=Lt(Dr,yt,pt-fr,pt+Sr,1,wt.minY,wt.maxY,lt),Br=Lt(Dr,yt,pt+Rr,pt+Pr,1,wt.minY,wt.maxY,lt),Dr=null),ct>1&&console.timeEnd("clipping"),ke.push(Jr||[],et+1,vt*2,pt*2),ke.push(ur||[],et+1,vt*2,pt*2+1),ke.push(wr||[],et+1,vt*2+1,pt*2),ke.push(Br||[],et+1,vt*2+1,pt*2+1)}}},vn.prototype.getTile=function(st,et,vt){var pt=this.options,Ct=pt.extent,Ht=pt.debug;if(st<0||st>24)return null;var Pe=1<<st;et=(et%Pe+Pe)%Pe;var ke=en(st,et,vt);if(this.tiles[ke])return jt(this.tiles[ke],Ct);Ht>1&&console.log("drilling down to z%d-%d-%d",st,et,vt);for(var lt=st,ct=et,yt=vt,Rt;!Rt&&lt>0;)lt--,ct=Math.floor(ct/2),yt=Math.floor(yt/2),Rt=this.tiles[en(lt,ct,yt)];return!Rt||!Rt.source?null:(Ht>1&&console.log("found parent tile z%d-%d-%d",lt,ct,yt),Ht>1&&console.time("drilling down"),this.splitTile(Rt.source,lt,ct,yt,st,et,vt),Ht>1&&console.timeEnd("drilling down"),this.tiles[ke]?jt(this.tiles[ke],Ct):null)};function en(st,et,vt){return((1<<st)*vt+et)*32+st}function ft(st,et){for(var vt in et)st[vt]=et[vt];return st}function ar(st,et){var vt=st.tileID.canonical;if(!this._geoJSONIndex)return et(null,null);var pt=this._geoJSONIndex.getTile(vt.z,vt.x,vt.y);if(!pt)return et(null,null);var Ct=new b(pt.features),Ht=E(Ct);(Ht.byteOffset!==0||Ht.byteLength!==Ht.buffer.byteLength)&&(Ht=new Uint8Array(Ht)),et(null,{vectorTile:Ct,rawData:Ht.buffer})}var rr=function(st){function et(vt,pt,Ct,Ht){st.call(this,vt,pt,Ct,ar),Ht&&(this.loadGeoJSON=Ht)}return st&&(et.__proto__=st),et.prototype=Object.create(st&&st.prototype),et.prototype.constructor=et,et.prototype.loadData=function(pt,Ct){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ct,this._pendingLoadDataParams=pt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},et.prototype._loadData=function(){var pt=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ct=this._pendingCallback,Ht=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Ht&&Ht.request&&Ht.request.collectResourceTiming?new e.RequestPerformance(Ht.request):!1;this.loadGeoJSON(Ht,function(ke,lt){if(ke||!lt)return Ct(ke);if(typeof lt!="object")return Ct(new Error("Input data given to '"+Ht.source+"' is not a valid GeoJSON object."));l(lt,!0);try{pt._geoJSONIndex=Ht.cluster?new oe(Kt(Ht)).load(lt.features):Xr(lt,Ht.geojsonVtOptions)}catch(Rt){return Ct(Rt)}pt.loaded={};var ct={};if(Pe){var yt=Pe.finish();yt&&(ct.resourceTiming={},ct.resourceTiming[Ht.source]=JSON.parse(JSON.stringify(yt)))}Ct(null,ct)})}},et.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},et.prototype.reloadTile=function(pt,Ct){var Ht=this.loaded,Pe=pt.uid;return Ht&&Ht[Pe]?st.prototype.reloadTile.call(this,pt,Ct):this.loadTile(pt,Ct)},et.prototype.loadGeoJSON=function(pt,Ct){if(pt.request)e.getJSON(pt.request,Ct);else if(typeof pt.data=="string")try{return Ct(null,JSON.parse(pt.data))}catch{return Ct(new Error("Input data given to '"+pt.source+"' is not a valid GeoJSON object."))}else return Ct(new Error("Input data given to '"+pt.source+"' is not a valid GeoJSON object."))},et.prototype.removeSource=function(pt,Ct){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ct()},et.prototype.getClusterExpansionZoom=function(pt,Ct){try{Ct(null,this._geoJSONIndex.getClusterExpansionZoom(pt.clusterId))}catch(Ht){Ct(Ht)}},et.prototype.getClusterChildren=function(pt,Ct){try{Ct(null,this._geoJSONIndex.getChildren(pt.clusterId))}catch(Ht){Ct(Ht)}},et.prototype.getClusterLeaves=function(pt,Ct){try{Ct(null,this._geoJSONIndex.getLeaves(pt.clusterId,pt.limit,pt.offset))}catch(Ht){Ct(Ht)}},et}(p);function Kt(st){var et=st.superclusterOptions,vt=st.clusterProperties;if(!vt||!et)return et;for(var pt={},Ct={},Ht={accumulated:null,zoom:0},Pe={properties:null},ke=Object.keys(vt),lt=0,ct=ke;lt<ct.length;lt+=1){var yt=ct[lt],Rt=vt[yt],wt=Rt[0],Dt=Rt[1],Jt=e.createExpression(Dt),fr=e.createExpression(typeof wt=="string"?[wt,["accumulated"],["get",yt]]:wt);pt[yt]=Jt.value,Ct[yt]=fr.value}return et.map=function(Rr){Pe.properties=Rr;for(var Sr={},Pr=0,Jr=ke;Pr<Jr.length;Pr+=1){var ur=Jr[Pr];Sr[ur]=pt[ur].evaluate(Ht,Pe)}return Sr},et.reduce=function(Rr,Sr){Pe.properties=Sr;for(var Pr=0,Jr=ke;Pr<Jr.length;Pr+=1){var ur=Jr[Pr];Ht.accumulated=Rr[ur],Rr[ur]=Ct[ur].evaluate(Ht,Pe)}},et}var Er=function(et){var vt=this;this.self=et,this.actor=new e.Actor(et,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:rr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pt,Ct){if(vt.workerSourceTypes[pt])throw new Error('Worker source with name "'+pt+'" already registered.');vt.workerSourceTypes[pt]=Ct},this.self.registerRTLTextPlugin=function(pt){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=pt.applyArabicShaping,e.plugin.processBidirectionalText=pt.processBidirectionalText,e.plugin.processStyledBidirectionalText=pt.processStyledBidirectionalText}};return Er.prototype.setReferrer=function(et,vt){this.referrer=vt},Er.prototype.setImages=function(et,vt,pt){this.availableImages[et]=vt;for(var Ct in this.workerSources[et]){var Ht=this.workerSources[et][Ct];for(var Pe in Ht)Ht[Pe].availableImages=vt}pt()},Er.prototype.setLayers=function(et,vt,pt){this.getLayerIndex(et).replace(vt),pt()},Er.prototype.updateLayers=function(et,vt,pt){this.getLayerIndex(et).update(vt.layers,vt.removedIds),pt()},Er.prototype.loadTile=function(et,vt,pt){this.getWorkerSource(et,vt.type,vt.source).loadTile(vt,pt)},Er.prototype.loadDEMTile=function(et,vt,pt){this.getDEMWorkerSource(et,vt.source).loadTile(vt,pt)},Er.prototype.reloadTile=function(et,vt,pt){this.getWorkerSource(et,vt.type,vt.source).reloadTile(vt,pt)},Er.prototype.abortTile=function(et,vt,pt){this.getWorkerSource(et,vt.type,vt.source).abortTile(vt,pt)},Er.prototype.removeTile=function(et,vt,pt){this.getWorkerSource(et,vt.type,vt.source).removeTile(vt,pt)},Er.prototype.removeDEMTile=function(et,vt){this.getDEMWorkerSource(et,vt.source).removeTile(vt)},Er.prototype.removeSource=function(et,vt,pt){if(!(!this.workerSources[et]||!this.workerSources[et][vt.type]||!this.workerSources[et][vt.type][vt.source])){var Ct=this.workerSources[et][vt.type][vt.source];delete this.workerSources[et][vt.type][vt.source],Ct.removeSource!==void 0?Ct.removeSource(vt,pt):pt()}},Er.prototype.loadWorkerSource=function(et,vt,pt){try{this.self.importScripts(vt.url),pt()}catch(Ct){pt(Ct.toString())}},Er.prototype.syncRTLPluginState=function(et,vt,pt){try{e.plugin.setState(vt);var Ct=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Ct!=null){this.self.importScripts(Ct);var Ht=e.plugin.isParsed(),Pe=Ht?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ct);pt(Pe,Ht)}}catch(ke){pt(ke.toString())}},Er.prototype.getAvailableImages=function(et){var vt=this.availableImages[et];return vt||(vt=[]),vt},Er.prototype.getLayerIndex=function(et){var vt=this.layerIndexes[et];return vt||(vt=this.layerIndexes[et]=new t),vt},Er.prototype.getWorkerSource=function(et,vt,pt){var Ct=this;if(this.workerSources[et]||(this.workerSources[et]={}),this.workerSources[et][vt]||(this.workerSources[et][vt]={}),!this.workerSources[et][vt][pt]){var Ht={send:function(Pe,ke,lt){Ct.actor.send(Pe,ke,lt,et)}};this.workerSources[et][vt][pt]=new this.workerSourceTypes[vt](Ht,this.getLayerIndex(et),this.getAvailableImages(et))}return this.workerSources[et][vt][pt]},Er.prototype.getDEMWorkerSource=function(et,vt){return this.demWorkerSources[et]||(this.demWorkerSources[et]={}),this.demWorkerSources[et][vt]||(this.demWorkerSources[et][vt]=new m),this.demWorkerSources[et][vt]},Er.prototype.enforceCacheSizeLimit=function(et,vt){e.enforceCacheSizeLimit(vt)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Er(e.window)),Er}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(fe){fe.exports?fe.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=ve);function W(jr){return!ve(jr)}function ve(jr){if(!J())return"not a browser";if(!pe())return"insufficent Array support";if(!Se())return"insufficient Function support";if(!Ie())return"insufficient Object support";if(!Qe())return"insufficient JSON support";if(!dt())return"insufficient worker support";if(!Ft())return"insufficient Uint8ClampedArray support";if(!nr())return"insufficient ArrayBuffer support";if(!dr())return"insufficient Canvas/getImageData support";if(!Fr(jr&&jr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function J(){return typeof window<"u"&&typeof document<"u"}function pe(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Se(){return Function.prototype&&Function.prototype.bind}function Ie(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Qe(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function dt(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var jr=new Blob([""],{type:"text/javascript"}),rn=URL.createObjectURL(jr),mn,Fn;try{Fn=new Worker(rn),mn=!0}catch{mn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(rn),mn}function Ft(){return"Uint8ClampedArray"in window}function nr(){return ArrayBuffer.isView}function dr(){var jr=document.createElement("canvas");jr.width=jr.height=1;var rn=jr.getContext("2d");if(!rn)return!1;var mn=rn.getImageData(0,0,1,1);return mn&&mn.width===jr.width}var xr={};function Fr(jr){return xr[jr]===void 0&&(xr[jr]=Qr(jr)),xr[jr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Zr(jr){var rn=document.createElement("canvas"),mn=Object.create(W.webGLContextAttributes);return mn.failIfMajorPerformanceCaveat=jr,rn.probablySupportsContext?rn.probablySupportsContext("webgl",mn)||rn.probablySupportsContext("experimental-webgl",mn):rn.supportsContext?rn.supportsContext("webgl",mn)||rn.supportsContext("experimental-webgl",mn):rn.getContext("webgl",mn)||rn.getContext("experimental-webgl",mn)}function Qr(jr){var rn=Zr(jr);if(!rn)return!1;var mn=rn.createShader(rn.VERTEX_SHADER);return!mn||rn.isContextLost()?!1:(rn.shaderSource(mn,"void main() {}"),rn.compileShader(mn),rn.getShaderParameter(mn,rn.COMPILE_STATUS)===!0)}}),n={};n.create=function(fe,W,ve){var J=e.window.document.createElement(fe);return W!==void 0&&(J.className=W),ve&&ve.appendChild(J),J},n.createNS=function(fe,W){var ve=e.window.document.createElementNS(fe,W);return ve};var r=e.window.document.documentElement.style;function t(fe){if(!r)return fe[0];for(var W=0;W<fe.length;W++)if(fe[W]in r)return fe[W];return fe[0]}var h=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),i;n.disableDrag=function(){r&&h&&(i=r[h],r[h]="none")},n.enableDrag=function(){r&&h&&(r[h]=i)};var s=t(["transform","WebkitTransform"]);n.setTransform=function(fe,W){fe.style[s]=W};var y=!1;try{var d=Object.defineProperty({},"passive",{get:function(){y=!0}});e.window.addEventListener("test",d,d),e.window.removeEventListener("test",d,d)}catch{y=!1}n.addEventListener=function(fe,W,ve,J){J===void 0&&(J={}),"passive"in J&&y?fe.addEventListener(W,ve,J):fe.addEventListener(W,ve,J.capture)},n.removeEventListener=function(fe,W,ve,J){J===void 0&&(J={}),"passive"in J&&y?fe.removeEventListener(W,ve,J):fe.removeEventListener(W,ve,J.capture)};var p=function(fe){fe.preventDefault(),fe.stopPropagation(),e.window.removeEventListener("click",p,!0)};n.suppressClick=function(){e.window.addEventListener("click",p,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",p,!0)},0)},n.mousePos=function(fe,W){var ve=fe.getBoundingClientRect();return new e.Point(W.clientX-ve.left-fe.clientLeft,W.clientY-ve.top-fe.clientTop)},n.touchPos=function(fe,W){for(var ve=fe.getBoundingClientRect(),J=[],pe=0;pe<W.length;pe++)J.push(new e.Point(W[pe].clientX-ve.left-fe.clientLeft,W[pe].clientY-ve.top-fe.clientTop));return J},n.mouseButton=function(fe){return typeof e.window.InstallTrigger<"u"&&fe.button===2&&fe.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:fe.button},n.remove=function(fe){fe.parentNode&&fe.parentNode.removeChild(fe)};function c(fe,W,ve){var J,pe,Se,Ie=e.browser.devicePixelRatio>1?"@2x":"",Qe=e.getJSON(W.transformRequest(W.normalizeSpriteURL(fe,Ie,".json"),e.ResourceType.SpriteJSON),function(nr,dr){Qe=null,Se||(Se=nr,J=dr,Ft())}),dt=e.getImage(W.transformRequest(W.normalizeSpriteURL(fe,Ie,".png"),e.ResourceType.SpriteImage),function(nr,dr){dt=null,Se||(Se=nr,pe=dr,Ft())});function Ft(){if(Se)ve(Se);else if(J&&pe){var nr=e.browser.getImageData(pe),dr={};for(var xr in J){var Fr=J[xr],Zr=Fr.width,Qr=Fr.height,jr=Fr.x,rn=Fr.y,mn=Fr.sdf,Fn=Fr.pixelRatio,Vn=Fr.stretchX,ta=Fr.stretchY,ia=Fr.content,na=new e.RGBAImage({width:Zr,height:Qr});e.RGBAImage.copy(nr,na,{x:jr,y:rn},{x:0,y:0},{width:Zr,height:Qr}),dr[xr]={data:na,pixelRatio:Fn,sdf:mn,stretchX:Vn,stretchY:ta,content:ia}}ve(null,dr)}}return{cancel:function(){Qe&&(Qe.cancel(),Qe=null),dt&&(dt.cancel(),dt=null)}}}function m(fe){var W=fe.userImage;if(W&&W.render){var ve=W.render();if(ve)return fe.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,x=function(fe){function W(){fe.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var pe=0,Se=this.requestors;pe<Se.length;pe+=1){var Ie=Se[pe],Qe=Ie.ids,dt=Ie.callback;this._notify(Qe,dt)}this.requestors=[]}},W.prototype.getImage=function(J){return this.images[J]},W.prototype.addImage=function(J,pe){this._validate(J,pe)&&(this.images[J]=pe)},W.prototype._validate=function(J,pe){var Se=!0;return this._validateStretch(pe.stretchX,pe.data&&pe.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),Se=!1),this._validateStretch(pe.stretchY,pe.data&&pe.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),Se=!1),this._validateContent(pe.content,pe)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),Se=!1),Se},W.prototype._validateStretch=function(J,pe){if(!J)return!0;for(var Se=0,Ie=0,Qe=J;Ie<Qe.length;Ie+=1){var dt=Qe[Ie];if(dt[0]<Se||dt[1]<dt[0]||pe<dt[1])return!1;Se=dt[1]}return!0},W.prototype._validateContent=function(J,pe){return J?!(J.length!==4||J[0]<0||pe.data.width<J[0]||J[1]<0||pe.data.height<J[1]||J[2]<0||pe.data.width<J[2]||J[3]<0||pe.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},W.prototype.updateImage=function(J,pe){var Se=this.images[J];pe.version=Se.version+1,this.images[J]=pe,this.updatedImages[J]=!0},W.prototype.removeImage=function(J){var pe=this.images[J];delete this.images[J],delete this.patterns[J],pe.userImage&&pe.userImage.onRemove&&pe.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(J,pe){var Se=!0;if(!this.isLoaded())for(var Ie=0,Qe=J;Ie<Qe.length;Ie+=1){var dt=Qe[Ie];this.images[dt]||(Se=!1)}this.isLoaded()||Se?this._notify(J,pe):this.requestors.push({ids:J,callback:pe})},W.prototype._notify=function(J,pe){for(var Se={},Ie=0,Qe=J;Ie<Qe.length;Ie+=1){var dt=Qe[Ie];this.images[dt]||this.fire(new e.Event("styleimagemissing",{id:dt}));var Ft=this.images[dt];Ft?Se[dt]={data:Ft.data.clone(),pixelRatio:Ft.pixelRatio,sdf:Ft.sdf,version:Ft.version,stretchX:Ft.stretchX,stretchY:Ft.stretchY,content:Ft.content,hasRenderCallback:Boolean(Ft.userImage&&Ft.userImage.render)}:e.warnOnce('Image "'+dt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}pe(null,Se)},W.prototype.getPixelSize=function(){var J=this.atlasImage,pe=J.width,Se=J.height;return{width:pe,height:Se}},W.prototype.getPattern=function(J){var pe=this.patterns[J],Se=this.getImage(J);if(!Se)return null;if(pe&&pe.position.version===Se.version)return pe.position;if(pe)pe.position.version=Se.version;else{var Ie=Se.data.width+l*2,Qe=Se.data.height+l*2,dt={w:Ie,h:Qe,x:0,y:0},Ft=new e.ImagePosition(dt,Se);this.patterns[J]={bin:dt,position:Ft}}return this._updatePatternAtlas(),this.patterns[J].position},W.prototype.bind=function(J){var pe=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(J,this.atlasImage,pe.RGBA),this.atlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var J=[];for(var pe in this.patterns)J.push(this.patterns[pe].bin);var Se=e.potpack(J),Ie=Se.w,Qe=Se.h,dt=this.atlasImage;dt.resize({width:Ie||1,height:Qe||1});for(var Ft in this.patterns){var nr=this.patterns[Ft],dr=nr.bin,xr=dr.x+l,Fr=dr.y+l,Zr=this.images[Ft].data,Qr=Zr.width,jr=Zr.height;e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr,y:Fr},{width:Qr,height:jr}),e.RGBAImage.copy(Zr,dt,{x:0,y:jr-1},{x:xr,y:Fr-1},{width:Qr,height:1}),e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr,y:Fr+jr},{width:Qr,height:1}),e.RGBAImage.copy(Zr,dt,{x:Qr-1,y:0},{x:xr-1,y:Fr},{width:1,height:jr}),e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr+Qr,y:Fr},{width:1,height:jr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(J){for(var pe=0,Se=J;pe<Se.length;pe+=1){var Ie=Se[pe];if(!this.callbackDispatchedThisFrame[Ie]){this.callbackDispatchedThisFrame[Ie]=!0;var Qe=this.images[Ie],dt=m(Qe);dt&&this.updateImage(Ie,Qe)}}},W}(e.Evented);function u(fe,W,ve,J,pe){var Se=W*256,Ie=Se+255,Qe=J.transformRequest(J.normalizeGlyphsURL(ve).replace("{fontstack}",fe).replace("{range}",Se+"-"+Ie),e.ResourceType.Glyphs);e.getArrayBuffer(Qe,function(dt,Ft){if(dt)pe(dt);else if(Ft){for(var nr={},dr=0,xr=e.parseGlyphPBF(Ft);dr<xr.length;dr+=1){var Fr=xr[dr];nr[Fr.id]=Fr}pe(null,nr)}})}var A=b,_=b,g=1e20;function b(fe,W,ve,J,pe,Se){this.fontSize=fe||24,this.buffer=W===void 0?3:W,this.cutoff=J||.25,this.fontFamily=pe||"sans-serif",this.fontWeight=Se||"normal",this.radius=ve||8;var Ie=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ie,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ie*Ie),this.gridInner=new Float64Array(Ie*Ie),this.f=new Float64Array(Ie),this.d=new Float64Array(Ie),this.z=new Float64Array(Ie+1),this.v=new Int16Array(Ie),this.middle=Math.round(Ie/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}b.prototype.draw=function(fe){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(fe,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),ve=new Uint8ClampedArray(this.size*this.size),J=0;J<this.size*this.size;J++){var pe=W.data[J*4+3]/255;this.gridOuter[J]=pe===1?0:pe===0?g:Math.pow(Math.max(0,.5-pe),2),this.gridInner[J]=pe===1?g:pe===0?0:Math.pow(Math.max(0,pe-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),J=0;J<this.size*this.size;J++){var Se=this.gridOuter[J]-this.gridInner[J];ve[J]=Math.max(0,Math.min(255,Math.round(255-255*(Se/this.radius+this.cutoff))))}return ve};function v(fe,W,ve,J,pe,Se,Ie){for(var Qe=0;Qe<W;Qe++){for(var dt=0;dt<ve;dt++)J[dt]=fe[dt*W+Qe];for(C(J,pe,Se,Ie,ve),dt=0;dt<ve;dt++)fe[dt*W+Qe]=pe[dt]}for(dt=0;dt<ve;dt++){for(Qe=0;Qe<W;Qe++)J[Qe]=fe[dt*W+Qe];for(C(J,pe,Se,Ie,W),Qe=0;Qe<W;Qe++)fe[dt*W+Qe]=Math.sqrt(pe[Qe])}}function C(fe,W,ve,J,pe){ve[0]=0,J[0]=-g,J[1]=+g;for(var Se=1,Ie=0;Se<pe;Se++){for(var Qe=(fe[Se]+Se*Se-(fe[ve[Ie]]+ve[Ie]*ve[Ie]))/(2*Se-2*ve[Ie]);Qe<=J[Ie];)Ie--,Qe=(fe[Se]+Se*Se-(fe[ve[Ie]]+ve[Ie]*ve[Ie]))/(2*Se-2*ve[Ie]);Ie++,ve[Ie]=Se,J[Ie]=Qe,J[Ie+1]=+g}for(Se=0,Ie=0;Se<pe;Se++){for(;J[Ie+1]<Se;)Ie++;W[Se]=(Se-ve[Ie])*(Se-ve[Ie])+fe[ve[Ie]]}}A.default=_;var S=function(W,ve){this.requestManager=W,this.localIdeographFontFamily=ve,this.entries={}};S.prototype.setURL=function(W){this.url=W},S.prototype.getGlyphs=function(W,ve){var J=this,pe=[];for(var Se in W)for(var Ie=0,Qe=W[Se];Ie<Qe.length;Ie+=1){var dt=Qe[Ie];pe.push({stack:Se,id:dt})}e.asyncAll(pe,function(Ft,nr){var dr=Ft.stack,xr=Ft.id,Fr=J.entries[dr];Fr||(Fr=J.entries[dr]={glyphs:{},requests:{},ranges:{}});var Zr=Fr.glyphs[xr];if(Zr!==void 0){nr(null,{stack:dr,id:xr,glyph:Zr});return}if(Zr=J._tinySDF(Fr,dr,xr),Zr){Fr.glyphs[xr]=Zr,nr(null,{stack:dr,id:xr,glyph:Zr});return}var Qr=Math.floor(xr/256);if(Qr*256>65535){nr(new Error("glyphs > 65535 not supported"));return}if(Fr.ranges[Qr]){nr(null,{stack:dr,id:xr,glyph:Zr});return}var jr=Fr.requests[Qr];jr||(jr=Fr.requests[Qr]=[],S.loadGlyphRange(dr,Qr,J.url,J.requestManager,function(rn,mn){if(mn){for(var Fn in mn)J._doesCharSupportLocalGlyph(+Fn)||(Fr.glyphs[+Fn]=mn[+Fn]);Fr.ranges[Qr]=!0}for(var Vn=0,ta=jr;Vn<ta.length;Vn+=1){var ia=ta[Vn];ia(rn,mn)}delete Fr.requests[Qr]})),jr.push(function(rn,mn){rn?nr(rn):mn&&nr(null,{stack:dr,id:xr,glyph:mn[xr]||null})})},function(Ft,nr){if(Ft)ve(Ft);else if(nr){for(var dr={},xr=0,Fr=nr;xr<Fr.length;xr+=1){var Zr=Fr[xr],Qr=Zr.stack,jr=Zr.id,rn=Zr.glyph;(dr[Qr]||(dr[Qr]={}))[jr]=rn&&{id:rn.id,bitmap:rn.bitmap.clone(),metrics:rn.metrics}}ve(null,dr)}})},S.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},S.prototype._tinySDF=function(W,ve,J){var pe=this.localIdeographFontFamily;if(!!pe&&!!this._doesCharSupportLocalGlyph(J)){var Se=W.tinySDF;if(!Se){var Ie="400";/bold/i.test(ve)?Ie="900":/medium/i.test(ve)?Ie="500":/light/i.test(ve)&&(Ie="200"),Se=W.tinySDF=new S.TinySDF(24,3,8,.25,pe,Ie)}return{id:J,bitmap:new e.AlphaImage({width:30,height:30},Se.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=u,S.TinySDF=A;var k=function(){this.specification=e.styleSpec.light.position};k.prototype.possiblyEvaluate=function(W,ve){return e.sphericalToCartesian(W.expression.evaluate(ve))},k.prototype.interpolate=function(W,ve,J){return{x:e.number(W.x,ve.x,J),y:e.number(W.y,ve.y,J),z:e.number(W.z,ve.z,J)}};var E=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new k,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(fe){function W(ve){fe.call(this),this._transitionable=new e.Transitionable(E),this.setLight(ve),this._transitioning=this._transitionable.untransitioned()}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(J,pe){if(pe===void 0&&(pe={}),!this._validate(e.validateLight,J,pe))for(var Se in J){var Ie=J[Se];e.endsWith(Se,F)?this._transitionable.setTransition(Se.slice(0,-F.length),Ie):this._transitionable.setValue(Se,Ie)}},W.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},W.prototype._validate=function(J,pe,Se){return Se&&Se.validate===!1?!1:e.emitValidationErrors(this,J.call(e.validateStyle,e.extend({value:pe,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,ve){this.width=W,this.height=ve,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,ve){var J=W.join(",")+String(ve);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(W,ve)),this.dashEntry[J]},D.prototype.getDashRanges=function(W,ve,J){var pe=W.length%2===1,Se=[],Ie=pe?-W[W.length-1]*J:0,Qe=W[0]*J,dt=!0;Se.push({left:Ie,right:Qe,isDash:dt,zeroLength:W[0]===0});for(var Ft=W[0],nr=1;nr<W.length;nr++){dt=!dt;var dr=W[nr];Ie=Ft*J,Ft+=dr,Qe=Ft*J,Se.push({left:Ie,right:Qe,isDash:dt,zeroLength:dr===0})}return Se},D.prototype.addRoundDash=function(W,ve,J){for(var pe=ve/2,Se=-J;Se<=J;Se++)for(var Ie=this.nextRow+J+Se,Qe=this.width*Ie,dt=0,Ft=W[dt],nr=0;nr<this.width;nr++){nr/Ft.right>1&&(Ft=W[++dt]);var dr=Math.abs(nr-Ft.left),xr=Math.abs(nr-Ft.right),Fr=Math.min(dr,xr),Zr=void 0,Qr=Se/J*(pe+1);if(Ft.isDash){var jr=pe-Math.abs(Qr);Zr=Math.sqrt(Fr*Fr+jr*jr)}else Zr=pe-Math.sqrt(Fr*Fr+Qr*Qr);this.data[Qe+nr]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addRegularDash=function(W){for(var ve=W.length-1;ve>=0;--ve){var J=W[ve],pe=W[ve+1];J.zeroLength?W.splice(ve,1):pe&&pe.isDash===J.isDash&&(pe.left=J.left,W.splice(ve,1))}var Se=W[0],Ie=W[W.length-1];Se.isDash===Ie.isDash&&(Se.left=Ie.left-this.width,Ie.right=Se.right+this.width);for(var Qe=this.width*this.nextRow,dt=0,Ft=W[dt],nr=0;nr<this.width;nr++){nr/Ft.right>1&&(Ft=W[++dt]);var dr=Math.abs(nr-Ft.left),xr=Math.abs(nr-Ft.right),Fr=Math.min(dr,xr),Zr=Ft.isDash?Fr:-Fr;this.data[Qe+nr]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addDash=function(W,ve){var J=ve?7:0,pe=2*J+1;if(this.nextRow+pe>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Se=0,Ie=0;Ie<W.length;Ie++)Se+=W[Ie];if(Se!==0){var Qe=this.width/Se,dt=this.getDashRanges(W,this.width,Qe);ve?this.addRoundDash(dt,Qe,J):this.addRegularDash(dt)}var Ft={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:Se};return this.nextRow+=pe,this.dirty=!0,Ft},D.prototype.bind=function(W){var ve=W.gl;this.texture?(ve.bindTexture(ve.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,this.width,this.height,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))):(this.texture=ve.createTexture(),ve.bindTexture(ve.TEXTURE_2D,this.texture),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR),ve.texImage2D(ve.TEXTURE_2D,0,ve.ALPHA,this.width,this.height,0,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))};var R=function fe(W,ve){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var J=this.workerPool.acquire(this.id),pe=0;pe<J.length;pe++){var Se=J[pe],Ie=new fe.Actor(Se,ve,this.id);Ie.name="Worker "+pe,this.actors.push(Ie)}};R.prototype.broadcast=function(W,ve,J){J=J||function(){},e.asyncAll(this.actors,function(pe,Se){pe.send(W,ve,Se)},J)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(fe,W,ve){var J=function(pe,Se){if(pe)return ve(pe);if(Se){var Ie=e.pick(e.extend(Se,fe),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Se.vector_layers&&(Ie.vectorLayers=Se.vector_layers,Ie.vectorLayerIds=Ie.vectorLayers.map(function(Qe){return Qe.id})),Ie.tiles=W.canonicalizeTileset(Ie,fe.url),ve(null,Ie)}};return fe.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(fe.url),e.ResourceType.Source),J):e.browser.frame(function(){return J(null,fe)})}var z=function(W,ve,J){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=ve||0,this.maxzoom=J||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var ve=Math.pow(2,W.z),J={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*ve),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*ve),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*ve),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*ve)},pe=W.x>=J.minX&&W.x<J.maxX&&W.y>=J.minY&&W.y<J.maxY;return pe};var B=function(fe){function W(ve,J,pe,Se){if(fe.call(this),this.id=ve,this.dispatcher=pe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(J,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},J),this._collectResourceTiming=J.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Se)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(pe,Se){J._tileJSONRequest=null,J._loaded=!0,pe?J.fire(new e.ErrorEvent(pe)):Se&&(e.extend(J,Se),Se.bounds&&(J.tileBounds=new z(Se.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Se.tiles,J.map._requestManager._customAccessToken),e.postMapLoadEvent(Se.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function(J,pe){var Se=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Ie={request:this.map._requestManager.transformRequest(Se,e.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ie.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Ie,Qe.bind(this))):J.state==="loading"?J.reloadCallback=pe:J.request=J.actor.send("reloadTile",Ie,Qe.bind(this));function Qe(dt,Ft){if(delete J.request,J.aborted)return pe(null);if(dt&&dt.status!==404)return pe(dt);Ft&&Ft.resourceTiming&&(J.resourceTiming=Ft.resourceTiming),this.map._refreshExpiredTiles&&Ft&&J.setExpiryData(Ft),J.loadVectorData(Ft,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),pe(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),G=function(fe){function W(ve,J,pe,Se){fe.call(this),this.id=ve,this.dispatcher=pe,this.setEventedParent(Se),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},J),e.extend(this,e.pick(J,["url","scheme","tileSize"]))}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(pe,Se){J._tileJSONRequest=null,J._loaded=!0,pe?J.fire(new e.ErrorEvent(pe)):Se&&(e.extend(J,Se),Se.bounds&&(J.tileBounds=new z(Se.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Se.tiles),e.postMapLoadEvent(Se.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.loadTile=function(J,pe){var Se=this,Ie=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ie,e.ResourceType.Tile),function(Qe,dt){if(delete J.request,J.aborted)J.state="unloaded",pe(null);else if(Qe)J.state="errored",pe(Qe);else if(dt){Se.map._refreshExpiredTiles&&J.setExpiryData(dt),delete dt.cacheControl,delete dt.expires;var Ft=Se.map.painter.context,nr=Ft.gl;J.texture=Se.map.painter.getTileTexture(dt.width),J.texture?J.texture.update(dt,{useMipmap:!0}):(J.texture=new e.Texture(Ft,dt,nr.RGBA,{useMipmap:!0}),J.texture.bind(nr.LINEAR,nr.CLAMP_TO_EDGE,nr.LINEAR_MIPMAP_NEAREST),Ft.extTextureFilterAnisotropic&&nr.texParameterf(nr.TEXTURE_2D,Ft.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ft.extTextureFilterAnisotropicMax)),J.state="loaded",e.cacheEntryPossiblyAdded(Se.dispatcher),pe(null)}})},W.prototype.abortTile=function(J,pe){J.request&&(J.request.cancel(),delete J.request),pe()},W.prototype.unloadTile=function(J,pe){J.texture&&this.map.painter.saveTileTexture(J.texture),pe()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Q=function(fe){function W(ve,J,pe,Se){fe.call(this,ve,J,pe,Se),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},J),this.encoding=J.encoding||"mapbox"}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(J,pe){var Se=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Se,e.ResourceType.Tile),Ie.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Ie(dt,Ft){if(delete J.request,J.aborted)J.state="unloaded",pe(null);else if(dt)J.state="errored",pe(dt);else if(Ft){this.map._refreshExpiredTiles&&J.setExpiryData(Ft),delete Ft.cacheControl,delete Ft.expires;var nr=e.window.ImageBitmap&&Ft instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),dr=nr?Ft:e.browser.getImageData(Ft,1),xr={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:dr,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",xr,Qe.bind(this)))}}function Qe(dt,Ft){dt&&(J.state="errored",pe(dt)),Ft&&(J.dem=Ft,J.needsHillshadePrepare=!0,J.state="loaded",pe(null))}},W.prototype._getNeighboringTiles=function(J){var pe=J.canonical,Se=Math.pow(2,pe.z),Ie=(pe.x-1+Se)%Se,Qe=pe.x===0?J.wrap-1:J.wrap,dt=(pe.x+1+Se)%Se,Ft=pe.x+1===Se?J.wrap+1:J.wrap,nr={};return nr[new e.OverscaledTileID(J.overscaledZ,Qe,pe.z,Ie,pe.y).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y).key]={backfilled:!1},pe.y>0&&(nr[new e.OverscaledTileID(J.overscaledZ,Qe,pe.z,Ie,pe.y-1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,J.wrap,pe.z,pe.x,pe.y-1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y-1).key]={backfilled:!1}),pe.y+1<Se&&(nr[new e.OverscaledTileID(J.overscaledZ,Qe,pe.z,Ie,pe.y+1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,J.wrap,pe.z,pe.x,pe.y+1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y+1).key]={backfilled:!1}),nr},W.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},W}(G),X=function(fe){function W(ve,J,pe,Se){fe.call(this),this.id=ve,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=pe.getActor(),this.setEventedParent(Se),this._data=J.data,this._options=e.extend({},J),this._collectResourceTiming=J.collectResourceTiming,this._resourceTiming=[],J.maxzoom!==void 0&&(this.maxzoom=J.maxzoom),J.type&&(this.type=J.type),J.attribution&&(this.attribution=J.attribution),this.promoteId=J.promoteId;var Ie=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:J.cluster||!1,geojsonVtOptions:{buffer:(J.buffer!==void 0?J.buffer:128)*Ie,tolerance:(J.tolerance!==void 0?J.tolerance:.375)*Ie,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:J.lineMetrics||!1,generateId:J.generateId||!1},superclusterOptions:{maxZoom:J.clusterMaxZoom!==void 0?Math.min(J.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(J.clusterRadius||50)*Ie,log:!1,generateId:J.generateId||!1},clusterProperties:J.clusterProperties},J.workerOptions)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(pe){if(pe){J.fire(new e.ErrorEvent(pe));return}var Se={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(Se.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new e.Event("data",Se))})},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setData=function(J){var pe=this;return this._data=J,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Se){if(Se){pe.fire(new e.ErrorEvent(Se));return}var Ie={dataType:"source",sourceDataType:"content"};pe._collectResourceTiming&&pe._resourceTiming&&pe._resourceTiming.length>0&&(Ie.resourceTiming=pe._resourceTiming,pe._resourceTiming=[]),pe.fire(new e.Event("data",Ie))}),this},W.prototype.getClusterExpansionZoom=function(J,pe){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},pe),this},W.prototype.getClusterChildren=function(J,pe){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},pe),this},W.prototype.getClusterLeaves=function(J,pe,Se,Ie){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:pe,offset:Se},Ie),this},W.prototype._updateWorkerData=function(J){var pe=this;this._loaded=!1;var Se=e.extend({},this.workerOptions),Ie=this._data;typeof Ie=="string"?(Se.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Ie),e.ResourceType.Source),Se.request.collectResourceTiming=this._collectResourceTiming):Se.data=JSON.stringify(Ie),this.actor.send(this.type+".loadData",Se,function(Qe,dt){pe._removed||dt&&dt.abandoned||(pe._loaded=!0,dt&&dt.resourceTiming&&dt.resourceTiming[pe.id]&&(pe._resourceTiming=dt.resourceTiming[pe.id].slice(0)),pe.actor.send(pe.type+".coalesce",{source:Se.source},null),J(Qe))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(J,pe){var Se=this,Ie=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var Qe={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Ie,Qe,function(dt,Ft){return delete J.request,J.unloadVectorData(),J.aborted?pe(null):dt?pe(dt):(J.loadVectorData(Ft,Se.map.painter,Ie==="reloadTile"),pe(null))})},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},W.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),j=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),re=function(fe){function W(ve,J,pe,Se){fe.call(this),this.id=ve,this.dispatcher=pe,this.coordinates=J.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Se),this.options=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(J,pe){var Se=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Ie,Qe){Se._loaded=!0,Ie?Se.fire(new e.ErrorEvent(Ie)):Qe&&(Se.image=Qe,J&&(Se.coordinates=J),pe&&pe(),Se._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(J){var pe=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){pe.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setCoordinates=function(J){var pe=this;this.coordinates=J;var Se=J.map(e.MercatorCoordinate.fromLngLat);this.tileID=ue(Se),this.minzoom=this.maxzoom=this.tileID.z;var Ie=Se.map(function(Qe){return pe.tileID.getTilePoint(Qe)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ie[0].x,Ie[0].y,0,0),this._boundsArray.emplaceBack(Ie[1].x,Ie[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Ie[3].x,Ie[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Ie[2].x,Ie[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,pe=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(J,this.image,pe.RGBA),this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE));for(var Se in this.tiles){var Ie=this.tiles[Se];Ie.state!=="loaded"&&(Ie.state="loaded",Ie.texture=this.texture)}}},W.prototype.loadTile=function(J,pe){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},pe(null)):(J.state="errored",pe(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function ue(fe){for(var W=1/0,ve=1/0,J=-1/0,pe=-1/0,Se=0,Ie=fe;Se<Ie.length;Se+=1){var Qe=Ie[Se];W=Math.min(W,Qe.x),ve=Math.min(ve,Qe.y),J=Math.max(J,Qe.x),pe=Math.max(pe,Qe.y)}var dt=J-W,Ft=pe-ve,nr=Math.max(dt,Ft),dr=Math.max(0,Math.floor(-Math.log(nr)/Math.LN2)),xr=Math.pow(2,dr);return new e.CanonicalTileID(dr,Math.floor((W+J)/2*xr),Math.floor((ve+pe)/2*xr))}var K=function(fe){function W(ve,J,pe,Se){fe.call(this,ve,J,pe,Se),this.roundZoom=!0,this.type="video",this.options=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1;var pe=this.options;this.urls=[];for(var Se=0,Ie=pe.urls;Se<Ie.length;Se+=1){var Qe=Ie[Se];this.urls.push(this.map._requestManager.transformRequest(Qe,e.ResourceType.Source).url)}e.getVideo(this.urls,function(dt,Ft){J._loaded=!0,dt?J.fire(new e.ErrorEvent(dt)):Ft&&(J.video=Ft,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(J){if(this.video){var pe=this.video.seekable;J<pe.start(0)||J>pe.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+pe.start(0)+" and "+pe.end(0)+"-second mark."))):this.video.currentTime=J}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,pe=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),pe.texSubImage2D(pe.TEXTURE_2D,0,0,0,pe.RGBA,pe.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(J,this.video,pe.RGBA),this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE));for(var Se in this.tiles){var Ie=this.tiles[Se];Ie.state!=="loaded"&&(Ie.state="loaded",Ie.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(re),te=function(fe){function W(ve,J,pe,Se){fe.call(this,ve,J,pe,Se),J.coordinates?(!Array.isArray(J.coordinates)||J.coordinates.length!==4||J.coordinates.some(function(Ie){return!Array.isArray(Ie)||Ie.length!==2||Ie.some(function(Qe){return typeof Qe!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "coordinates"'))),J.animate&&typeof J.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'optional "animate" property must be a boolean value'))),J.canvas?typeof J.canvas!="string"&&!(J.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "canvas"'))),this.options=J,this.animate=J.animate!==void 0?J.animate:!0}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var pe=this.map.painter.context,Se=pe.gl;this.boundsBuffer||(this.boundsBuffer=pe.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(pe,this.canvas,Se.RGBA,{premultiply:!0});for(var Ie in this.tiles){var Qe=this.tiles[Ie];Qe.state!=="loaded"&&(Qe.state="loaded",Qe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var J=0,pe=[this.canvas.width,this.canvas.height];J<pe.length;J+=1){var Se=pe[J];if(isNaN(Se)||Se<=0)return!0}return!1},W}(re),Y={vector:B,raster:G,"raster-dem":Q,geojson:X,video:K,image:re,canvas:te},V=function(fe,W,ve,J){var pe=new Y[W.type](fe,W,ve,J);if(pe.id!==fe)throw new Error("Expected Source id to be "+fe+" instead of "+pe.id);return e.bindAll(["load","abort","unload","serialize","prepare"],pe),pe},ee=function(fe){return Y[fe]},ne=function(fe,W){Y[fe]=W};function Z(fe,W){var ve=e.identity([]);return e.translate(ve,ve,[1,1,0]),e.scale(ve,ve,[fe.width*.5,fe.height*.5,1]),e.multiply(ve,ve,fe.calculatePosMatrix(W.toUnwrapped()))}function q(fe,W,ve){if(fe)for(var J=0,pe=fe;J<pe.length;J+=1){var Se=pe[J],Ie=W[Se];if(Ie&&Ie.source===ve&&Ie.type==="fill-extrusion")return!0}else for(var Qe in W){var dt=W[Qe];if(dt.source===ve&&dt.type==="fill-extrusion")return!0}return!1}function ie(fe,W,ve,J,pe,Se){var Ie=q(pe&&pe.layers,W,fe.id),Qe=Se.maxPitchScaleFactor(),dt=fe.tilesIn(J,Qe,Ie);dt.sort(oe);for(var Ft=[],nr=0,dr=dt;nr<dr.length;nr+=1){var xr=dr[nr];Ft.push({wrappedTileID:xr.tileID.wrapped().key,queryResults:xr.tile.queryRenderedFeatures(W,ve,fe._state,xr.queryGeometry,xr.cameraQueryGeometry,xr.scale,pe,Se,Qe,Z(fe.transform,xr.tileID))})}var Fr=be(Ft);for(var Zr in Fr)Fr[Zr].forEach(function(Qr){var jr=Qr.feature,rn=fe.getFeatureState(jr.layer["source-layer"],jr.id);jr.source=jr.layer.source,jr.layer["source-layer"]&&(jr.sourceLayer=jr.layer["source-layer"]),jr.state=rn});return Fr}function se(fe,W,ve,J,pe,Se,Ie){for(var Qe={},dt=Se.queryRenderedSymbols(J),Ft=[],nr=0,dr=Object.keys(dt).map(Number);nr<dr.length;nr+=1){var xr=dr[nr];Ft.push(Ie[xr])}Ft.sort(oe);for(var Fr=function(){var mn=Qr[Zr],Fn=mn.featureIndex.lookupSymbolFeatures(dt[mn.bucketInstanceId],W,mn.bucketIndex,mn.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,fe);for(var Vn in Fn){var ta=Qe[Vn]=Qe[Vn]||[],ia=Fn[Vn];ia.sort(function(Ta,Ca){var Fa=mn.featureSortOrder;if(Fa){var Za=Fa.indexOf(Ta.featureIndex),ci=Fa.indexOf(Ca.featureIndex);return ci-Za}else return Ca.featureIndex-Ta.featureIndex});for(var na=0,ya=ia;na<ya.length;na+=1){var Sa=ya[na];ta.push(Sa)}}},Zr=0,Qr=Ft;Zr<Qr.length;Zr+=1)Fr();var jr=function(mn){Qe[mn].forEach(function(Fn){var Vn=Fn.feature,ta=fe[mn],ia=ve[ta.source],na=ia.getFeatureState(Vn.layer["source-layer"],Vn.id);Vn.source=Vn.layer.source,Vn.layer["source-layer"]&&(Vn.sourceLayer=Vn.layer["source-layer"]),Vn.state=na})};for(var rn in Qe)jr(rn);return Qe}function ae(fe,W){for(var ve=fe.getRenderableIds().map(function(dt){return fe.getTileByID(dt)}),J=[],pe={},Se=0;Se<ve.length;Se++){var Ie=ve[Se],Qe=Ie.tileID.canonical.key;pe[Qe]||(pe[Qe]=!0,Ie.querySourceFeatures(J,W))}return J}function oe(fe,W){var ve=fe.tileID,J=W.tileID;return ve.overscaledZ-J.overscaledZ||ve.canonical.y-J.canonical.y||ve.wrap-J.wrap||ve.canonical.x-J.canonical.x}function be(fe){for(var W={},ve={},J=0,pe=fe;J<pe.length;J+=1){var Se=pe[J],Ie=Se.queryResults,Qe=Se.wrappedTileID,dt=ve[Qe]=ve[Qe]||{};for(var Ft in Ie)for(var nr=Ie[Ft],dr=dt[Ft]=dt[Ft]||{},xr=W[Ft]=W[Ft]||[],Fr=0,Zr=nr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];dr[Qr.featureIndex]||(dr[Qr.featureIndex]=!0,xr.push(Qr))}}return W}var ce=function(W,ve){this.max=W,this.onRemove=ve,this.reset()};ce.prototype.reset=function(){for(var W in this.data)for(var ve=0,J=this.data[W];ve<J.length;ve+=1){var pe=J[ve];pe.timeout&&clearTimeout(pe.timeout),this.onRemove(pe.value)}return this.data={},this.order=[],this},ce.prototype.add=function(W,ve,J){var pe=this,Se=W.wrapped().key;this.data[Se]===void 0&&(this.data[Se]=[]);var Ie={value:ve,timeout:void 0};if(J!==void 0&&(Ie.timeout=setTimeout(function(){pe.remove(W,Ie)},J)),this.data[Se].push(Ie),this.order.push(Se),this.order.length>this.max){var Qe=this._getAndRemoveByKey(this.order[0]);Qe&&this.onRemove(Qe)}return this},ce.prototype.has=function(W){return W.wrapped().key in this.data},ce.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(W){var ve=this.data[W].shift();return ve.timeout&&clearTimeout(ve.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),ve.value},ce.prototype.getByKey=function(W){var ve=this.data[W];return ve?ve[0].value:null},ce.prototype.get=function(W){if(!this.has(W))return null;var ve=this.data[W.wrapped().key][0];return ve.value},ce.prototype.remove=function(W,ve){if(!this.has(W))return this;var J=W.wrapped().key,pe=ve===void 0?0:this.data[J].indexOf(ve),Se=this.data[J][pe];return this.data[J].splice(pe,1),Se.timeout&&clearTimeout(Se.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(Se.value),this.order.splice(this.order.indexOf(J),1),this},ce.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},ce.prototype.filter=function(W){var ve=[];for(var J in this.data)for(var pe=0,Se=this.data[J];pe<Se.length;pe+=1){var Ie=Se[pe];W(Ie.value)||ve.push(Ie)}for(var Qe=0,dt=ve;Qe<dt.length;Qe+=1){var Ft=dt[Qe];this.remove(Ft.value.tileID,Ft)}};var de=function(W,ve,J){this.context=W;var pe=W.gl;this.buffer=pe.createBuffer(),this.dynamicDraw=Boolean(J),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),pe.bufferData(pe.ELEMENT_ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?pe.DYNAMIC_DRAW:pe.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};de.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},de.prototype.updateData=function(W){var ve=this.context.gl;this.context.unbindVAO(),this.bind(),ve.bufferSubData(ve.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},de.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var ye={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ge=function(W,ve,J,pe){this.length=ve.length,this.attributes=J,this.itemSize=ve.bytesPerElement,this.dynamicDraw=pe,this.context=W;var Se=W.gl;this.buffer=Se.createBuffer(),W.bindVertexBuffer.set(this.buffer),Se.bufferData(Se.ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?Se.DYNAMIC_DRAW:Se.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};ge.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ge.prototype.updateData=function(W){var ve=this.context.gl;this.bind(),ve.bufferSubData(ve.ARRAY_BUFFER,0,W.arrayBuffer)},ge.prototype.enableAttributes=function(W,ve){for(var J=0;J<this.attributes.length;J++){var pe=this.attributes[J],Se=ve.attributes[pe.name];Se!==void 0&&W.enableVertexAttribArray(Se)}},ge.prototype.setVertexAttribPointers=function(W,ve,J){for(var pe=0;pe<this.attributes.length;pe++){var Se=this.attributes[pe],Ie=ve.attributes[Se.name];Ie!==void 0&&W.vertexAttribPointer(Ie,Se.components,W[ye[Se.type]],!1,this.itemSize,Se.offset+this.itemSize*(J||0))}},ge.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var me=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};me.prototype.get=function(){return this.current},me.prototype.set=function(W){},me.prototype.getDefault=function(){return this.default},me.prototype.setDefault=function(){this.set(this.default)};var Me=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var pe=this.current;J.r===pe.r&&J.g===pe.g&&J.b===pe.b&&J.a===pe.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(me),Le=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},W}(me),Oe=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},W}(me),_e=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&J[3]===pe[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(me),Ee=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},W}(me),Ze=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},W}(me),Ge=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(J){var pe=this.current;J.func===pe.func&&J.ref===pe.ref&&J.mask===pe.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},W}(me),Fe=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},W}(me),Re=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.STENCIL_TEST):pe.disable(pe.STENCIL_TEST),this.current=J,this.dirty=!1}},W}(me),We=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},W}(me),xt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.DEPTH_TEST):pe.disable(pe.DEPTH_TEST),this.current=J,this.dirty=!1}},W}(me),Nt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},W}(me),tr=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.BLEND):pe.disable(pe.BLEND),this.current=J,this.dirty=!1}},W}(me),Vt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},W}(me),Pt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var pe=this.current;J.r===pe.r&&J.g===pe.g&&J.b===pe.b&&J.a===pe.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(me),$t=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},W}(me),Ut=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.CULL_FACE):pe.disable(pe.CULL_FACE),this.current=J,this.dirty=!1}},W}(me),Lt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},W}(me),Ye=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},W}(me),ot=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},W}(me),Ve=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},W}(me),Ae=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&J[3]===pe[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(me),He=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindFramebuffer(pe.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},W}(me),Je=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindRenderbuffer(pe.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(me),tt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindTexture(pe.TEXTURE_2D,J),this.current=J,this.dirty=!1}},W}(me),St=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindBuffer(pe.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},W}(me),_t=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){var pe=this.gl;pe.bindBuffer(pe.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},W}(me),kt=function(fe){function W(ve){fe.call(this,ve),this.vao=ve.extVertexArrayObject}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},W}(me),jt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},W}(me),Bt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},W}(me),Wt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},W}(me),Qt=function(fe){function W(ve,J){fe.call(this,ve),this.context=ve,this.parent=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(me),Zt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var pe=this.gl;pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},W}(Qt),cr=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var pe=this.gl;pe.framebufferRenderbuffer(pe.FRAMEBUFFER,pe.DEPTH_ATTACHMENT,pe.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(Qt),Xr=function(W,ve,J,pe){this.context=W,this.width=ve,this.height=J;var Se=W.gl,Ie=this.framebuffer=Se.createFramebuffer();this.colorAttachment=new Zt(W,Ie),pe&&(this.depthAttachment=new cr(W,Ie))};Xr.prototype.destroy=function(){var W=this.context.gl,ve=this.colorAttachment.get();if(ve&&W.deleteTexture(ve),this.depthAttachment){var J=this.depthAttachment.get();J&&W.deleteRenderbuffer(J)}W.deleteFramebuffer(this.framebuffer)};var vn=519,en=function(W,ve,J){this.func=W,this.mask=ve,this.range=J};en.ReadOnly=!1,en.ReadWrite=!0,en.disabled=new en(vn,en.ReadOnly,[0,1]);var ft=519,ar=7680,rr=function(W,ve,J,pe,Se,Ie){this.test=W,this.ref=ve,this.mask=J,this.fail=pe,this.depthFail=Se,this.pass=Ie};rr.disabled=new rr({func:ft,mask:0},0,0,ar,ar,ar);var Kt=0,Er=1,st=771,et=function(W,ve,J){this.blendFunction=W,this.blendColor=ve,this.mask=J};et.Replace=[Er,Kt],et.disabled=new et(et.Replace,e.Color.transparent,[!1,!1,!1,!1]),et.unblended=new et(et.Replace,e.Color.transparent,[!0,!0,!0,!0]),et.alphaBlended=new et([Er,st],e.Color.transparent,[!0,!0,!0,!0]);var vt=1029,pt=2305,Ct=function(W,ve,J){this.enable=W,this.mode=ve,this.frontFace=J};Ct.disabled=new Ct(!1,vt,pt),Ct.backCCW=new Ct(!0,vt,pt);var Ht=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Me(this),this.clearDepth=new Le(this),this.clearStencil=new Oe(this),this.colorMask=new _e(this),this.depthMask=new Ee(this),this.stencilMask=new Ze(this),this.stencilFunc=new Ge(this),this.stencilOp=new Fe(this),this.stencilTest=new Re(this),this.depthRange=new We(this),this.depthTest=new xt(this),this.depthFunc=new Nt(this),this.blend=new tr(this),this.blendFunc=new Vt(this),this.blendColor=new Pt(this),this.blendEquation=new $t(this),this.cullFace=new Ut(this),this.cullFaceSide=new Lt(this),this.frontFace=new Ye(this),this.program=new ot(this),this.activeTexture=new Ve(this),this.viewport=new Ae(this),this.bindFramebuffer=new He(this),this.bindRenderbuffer=new Je(this),this.bindTexture=new tt(this),this.bindVertexBuffer=new St(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new kt(this),this.pixelStoreUnpack=new jt(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new Wt(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Ht.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ht.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ht.prototype.createIndexBuffer=function(W,ve){return new de(this,W,ve)},Ht.prototype.createVertexBuffer=function(W,ve,J){return new ge(this,W,ve,J)},Ht.prototype.createRenderbuffer=function(W,ve,J){var pe=this.gl,Se=pe.createRenderbuffer();return this.bindRenderbuffer.set(Se),pe.renderbufferStorage(pe.RENDERBUFFER,W,ve,J),this.bindRenderbuffer.set(null),Se},Ht.prototype.createFramebuffer=function(W,ve,J){return new Xr(this,W,ve,J)},Ht.prototype.clear=function(W){var ve=W.color,J=W.depth,pe=this.gl,Se=0;ve&&(Se|=pe.COLOR_BUFFER_BIT,this.clearColor.set(ve),this.colorMask.set([!0,!0,!0,!0])),typeof J<"u"&&(Se|=pe.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),pe.clear(Se)},Ht.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Ht.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Ht.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Ht.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Ht.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(fe){function W(ve,J,pe){var Se=this;fe.call(this),this.id=ve,this.dispatcher=pe,this.on("data",function(Ie){Ie.dataType==="source"&&Ie.sourceDataType==="metadata"&&(Se._sourceLoaded=!0),Se._sourceLoaded&&!Se._paused&&Ie.dataType==="source"&&Ie.sourceDataType==="content"&&(Se.reload(),Se.transform&&Se.update(Se.transform))}),this.on("error",function(){Se._sourceErrored=!0}),this._source=V(ve,J,pe,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},W.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var pe=this._tiles[J];if(pe.state!=="loaded"&&pe.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(J,pe){return this._source.loadTile(J,pe)},W.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},W.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var pe in this._tiles){var Se=this._tiles[pe];Se.upload(J),Se.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function(J){return J.tileID}).sort(ke).map(function(J){return J.key})},W.prototype.getRenderableIds=function(J){var pe=this,Se=[];for(var Ie in this._tiles)this._isIdRenderable(Ie,J)&&Se.push(this._tiles[Ie]);return J?Se.sort(function(Qe,dt){var Ft=Qe.tileID,nr=dt.tileID,dr=new e.Point(Ft.canonical.x,Ft.canonical.y)._rotate(pe.transform.angle),xr=new e.Point(nr.canonical.x,nr.canonical.y)._rotate(pe.transform.angle);return Ft.overscaledZ-nr.overscaledZ||xr.y-dr.y||xr.x-dr.x}).map(function(Qe){return Qe.tileID.key}):Se.map(function(Qe){return Qe.tileID}).sort(ke).map(function(Qe){return Qe.key})},W.prototype.hasRenderableParent=function(J){var pe=this.findLoadedParent(J,0);return pe?this._isIdRenderable(pe.tileID.key):!1},W.prototype._isIdRenderable=function(J,pe){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(pe||!this._tiles[J].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},W.prototype._reloadTile=function(J,pe){var Se=this._tiles[J];!Se||(Se.state!=="loading"&&(Se.state=pe),this._loadTile(Se,this._tileLoaded.bind(this,Se,J,pe)))},W.prototype._tileLoaded=function(J,pe,Se,Ie){if(Ie){J.state="errored",Ie.status!==404?this._source.fire(new e.ErrorEvent(Ie,{tile:J})):this.update(this.transform);return}J.timeAdded=e.browser.now(),Se==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(pe,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},W.prototype._backfillDEM=function(J){for(var pe=this.getRenderableIds(),Se=0;Se<pe.length;Se++){var Ie=pe[Se];if(J.neighboringTiles&&J.neighboringTiles[Ie]){var Qe=this.getTileByID(Ie);dt(J,Qe),dt(Qe,J)}}function dt(Ft,nr){Ft.needsHillshadePrepare=!0;var dr=nr.tileID.canonical.x-Ft.tileID.canonical.x,xr=nr.tileID.canonical.y-Ft.tileID.canonical.y,Fr=Math.pow(2,Ft.tileID.canonical.z),Zr=nr.tileID.key;dr===0&&xr===0||Math.abs(xr)>1||(Math.abs(dr)>1&&(Math.abs(dr+Fr)===1?dr+=Fr:Math.abs(dr-Fr)===1&&(dr-=Fr)),!(!nr.dem||!Ft.dem)&&(Ft.dem.backfillBorder(nr.dem,dr,xr),Ft.neighboringTiles&&Ft.neighboringTiles[Zr]&&(Ft.neighboringTiles[Zr].backfilled=!0)))}},W.prototype.getTile=function(J){return this.getTileByID(J.key)},W.prototype.getTileByID=function(J){return this._tiles[J]},W.prototype._retainLoadedChildren=function(J,pe,Se,Ie){for(var Qe in this._tiles){var dt=this._tiles[Qe];if(!(Ie[Qe]||!dt.hasData()||dt.tileID.overscaledZ<=pe||dt.tileID.overscaledZ>Se)){for(var Ft=dt.tileID;dt&&dt.tileID.overscaledZ>pe+1;){var nr=dt.tileID.scaledTo(dt.tileID.overscaledZ-1);dt=this._tiles[nr.key],dt&&dt.hasData()&&(Ft=nr)}for(var dr=Ft;dr.overscaledZ>pe;)if(dr=dr.scaledTo(dr.overscaledZ-1),J[dr.key]){Ie[Ft.key]=Ft;break}}}},W.prototype.findLoadedParent=function(J,pe){if(J.key in this._loadedParentTiles){var Se=this._loadedParentTiles[J.key];return Se&&Se.tileID.overscaledZ>=pe?Se:null}for(var Ie=J.overscaledZ-1;Ie>=pe;Ie--){var Qe=J.scaledTo(Ie),dt=this._getLoadedTile(Qe);if(dt)return dt}},W.prototype._getLoadedTile=function(J){var pe=this._tiles[J.key];if(pe&&pe.hasData())return pe;var Se=this._cache.getByKey(J.wrapped().key);return Se},W.prototype.updateCacheSize=function(J){var pe=Math.ceil(J.width/this._source.tileSize)+1,Se=Math.ceil(J.height/this._source.tileSize)+1,Ie=pe*Se,Qe=5,dt=Math.floor(Ie*Qe),Ft=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,dt):dt;this._cache.setMaxSize(Ft)},W.prototype.handleWrapJump=function(J){var pe=this._prevLng===void 0?J:this._prevLng,Se=J-pe,Ie=Se/360,Qe=Math.round(Ie);if(this._prevLng=J,Qe){var dt={};for(var Ft in this._tiles){var nr=this._tiles[Ft];nr.tileID=nr.tileID.unwrapTo(nr.tileID.wrap+Qe),dt[nr.tileID.key]=nr}this._tiles=dt;for(var dr in this._timers)clearTimeout(this._timers[dr]),delete this._timers[dr];for(var xr in this._tiles){var Fr=this._tiles[xr];this._setTileReloadTimer(xr,Fr)}}},W.prototype.update=function(J){var pe=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Se;this.used?this._source.tileID?Se=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ta){return new e.OverscaledTileID(Ta.canonical.z,Ta.wrap,Ta.canonical.z,Ta.canonical.x,Ta.canonical.y)}):(Se=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Se=Se.filter(function(Ta){return pe._source.hasTile(Ta)}))):Se=[];var Ie=J.coveringZoomLevel(this._source),Qe=Math.max(Ie-W.maxOverzooming,this._source.minzoom),dt=Math.max(Ie+W.maxUnderzooming,this._source.minzoom),Ft=this._updateRetainedTiles(Se,Ie);if(lt(this._source.type)){for(var nr={},dr={},xr=Object.keys(Ft),Fr=0,Zr=xr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr],jr=Ft[Qr],rn=this._tiles[Qr];if(!(!rn||rn.fadeEndTime&&rn.fadeEndTime<=e.browser.now())){var mn=this.findLoadedParent(jr,Qe);mn&&(this._addTile(mn.tileID),nr[mn.tileID.key]=mn.tileID),dr[Qr]=jr}}this._retainLoadedChildren(dr,Ie,dt,Ft);for(var Fn in nr)Ft[Fn]||(this._coveredTiles[Fn]=!0,Ft[Fn]=nr[Fn])}for(var Vn in Ft)this._tiles[Vn].clearFadeHold();for(var ta=e.keysDifference(this._tiles,Ft),ia=0,na=ta;ia<na.length;ia+=1){var ya=na[ia],Sa=this._tiles[ya];Sa.hasSymbolBuckets&&!Sa.holdingForFade()?Sa.setHoldDuration(this.map._fadeDuration):(!Sa.hasSymbolBuckets||Sa.symbolFadeFinished())&&this._removeTile(ya)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},W.prototype._updateRetainedTiles=function(J,pe){for(var Se={},Ie={},Qe=Math.max(pe-W.maxOverzooming,this._source.minzoom),dt=Math.max(pe+W.maxUnderzooming,this._source.minzoom),Ft={},nr=0,dr=J;nr<dr.length;nr+=1){var xr=dr[nr],Fr=this._addTile(xr);Se[xr.key]=xr,!Fr.hasData()&&pe<this._source.maxzoom&&(Ft[xr.key]=xr)}this._retainLoadedChildren(Ft,pe,dt,Se);for(var Zr=0,Qr=J;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=this._tiles[jr.key];if(!rn.hasData()){if(pe+1>this._source.maxzoom){var mn=jr.children(this._source.maxzoom)[0],Fn=this.getTile(mn);if(!!Fn&&Fn.hasData()){Se[mn.key]=mn;continue}}else{var Vn=jr.children(this._source.maxzoom);if(Se[Vn[0].key]&&Se[Vn[1].key]&&Se[Vn[2].key]&&Se[Vn[3].key])continue}for(var ta=rn.wasRequested(),ia=jr.overscaledZ-1;ia>=Qe;--ia){var na=jr.scaledTo(ia);if(Ie[na.key]||(Ie[na.key]=!0,rn=this.getTile(na),!rn&&ta&&(rn=this._addTile(na)),rn&&(Se[na.key]=na,ta=rn.wasRequested(),rn.hasData())))break}}}return Se},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var pe=[],Se=void 0,Ie=this._tiles[J].tileID;Ie.overscaledZ>0;){if(Ie.key in this._loadedParentTiles){Se=this._loadedParentTiles[Ie.key];break}pe.push(Ie.key);var Qe=Ie.scaledTo(Ie.overscaledZ-1);if(Se=this._getLoadedTile(Qe),Se)break;Ie=Qe}for(var dt=0,Ft=pe;dt<Ft.length;dt+=1){var nr=Ft[dt];this._loadedParentTiles[nr]=Se}}},W.prototype._addTile=function(J){var pe=this._tiles[J.key];if(pe)return pe;pe=this._cache.getAndRemove(J),pe&&(this._setTileReloadTimer(J.key,pe),pe.tileID=J,this._state.initializeTileState(pe,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,pe)));var Se=Boolean(pe);return Se||(pe=new e.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(pe,this._tileLoaded.bind(this,pe,J.key,pe.state))),pe?(pe.uses++,this._tiles[J.key]=pe,Se||this._source.fire(new e.Event("dataloading",{tile:pe,coord:pe.tileID,dataType:"source"})),pe):null},W.prototype._setTileReloadTimer=function(J,pe){var Se=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Ie=pe.getExpiryTimeout();Ie&&(this._timers[J]=setTimeout(function(){Se._reloadTile(J,"expired"),delete Se._timers[J]},Ie))},W.prototype._removeTile=function(J){var pe=this._tiles[J];!pe||(pe.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(pe.uses>0)&&(pe.hasData()&&pe.state!=="reloading"?this._cache.add(pe.tileID,pe,pe.getExpiryTimeout()):(pe.aborted=!0,this._abortTile(pe),this._unloadTile(pe))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},W.prototype.tilesIn=function(J,pe,Se){var Ie=this,Qe=[],dt=this.transform;if(!dt)return Qe;for(var Ft=Se?dt.getCameraQueryGeometry(J):J,nr=J.map(function(ia){return dt.pointCoordinate(ia)}),dr=Ft.map(function(ia){return dt.pointCoordinate(ia)}),xr=this.getIds(),Fr=1/0,Zr=1/0,Qr=-1/0,jr=-1/0,rn=0,mn=dr;rn<mn.length;rn+=1){var Fn=mn[rn];Fr=Math.min(Fr,Fn.x),Zr=Math.min(Zr,Fn.y),Qr=Math.max(Qr,Fn.x),jr=Math.max(jr,Fn.y)}for(var Vn=function(ia){var na=Ie._tiles[xr[ia]];if(!na.holdingForFade()){var ya=na.tileID,Sa=Math.pow(2,dt.zoom-na.tileID.overscaledZ),Ta=pe*na.queryPadding*e.EXTENT/na.tileSize/Sa,Ca=[ya.getTilePoint(new e.MercatorCoordinate(Fr,Zr)),ya.getTilePoint(new e.MercatorCoordinate(Qr,jr))];if(Ca[0].x-Ta<e.EXTENT&&Ca[0].y-Ta<e.EXTENT&&Ca[1].x+Ta>=0&&Ca[1].y+Ta>=0){var Fa=nr.map(function(ci){return ya.getTilePoint(ci)}),Za=dr.map(function(ci){return ya.getTilePoint(ci)});Qe.push({tile:na,tileID:ya,queryGeometry:Fa,cameraQueryGeometry:Za,scale:Sa})}}},ta=0;ta<xr.length;ta++)Vn(ta);return Qe},W.prototype.getVisibleCoordinates=function(J){for(var pe=this,Se=this.getRenderableIds(J).map(function(Ft){return pe._tiles[Ft].tileID}),Ie=0,Qe=Se;Ie<Qe.length;Ie+=1){var dt=Qe[Ie];dt.posMatrix=this.transform.calculatePosMatrix(dt.toUnwrapped())}return Se},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(lt(this._source.type))for(var J in this._tiles){var pe=this._tiles[J];if(pe.fadeEndTime!==void 0&&pe.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function(J,pe,Se){J=J||"_geojsonTileLayer",this._state.updateState(J,pe,Se)},W.prototype.removeFeatureState=function(J,pe,Se){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,pe,Se)},W.prototype.getFeatureState=function(J,pe){return J=J||"_geojsonTileLayer",this._state.getState(J,pe)},W.prototype.setDependencies=function(J,pe,Se){var Ie=this._tiles[J];Ie&&Ie.setDependencies(pe,Se)},W.prototype.reloadTilesForDependencies=function(J,pe){for(var Se in this._tiles){var Ie=this._tiles[Se];Ie.hasDependency(J,pe)&&this._reloadTile(Se,"reloading")}this._cache.filter(function(Qe){return!Qe.hasDependency(J,pe)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function ke(fe,W){var ve=Math.abs(fe.wrap*2)-+(fe.wrap<0),J=Math.abs(W.wrap*2)-+(W.wrap<0);return fe.overscaledZ-W.overscaledZ||J-ve||W.canonical.y-fe.canonical.y||W.canonical.x-fe.canonical.x}function lt(fe){return fe==="raster"||fe==="image"||fe==="video"}function ct(){return new e.window.Worker(lv.workerUrl)}var yt="mapboxgl_preloaded_worker_pool",Rt=function(){this.active={}};Rt.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<Rt.workerCount;)this.workers.push(new ct);return this.active[W]=!0,this.workers.slice()},Rt.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(ve){ve.terminate()}),this.workers=null)},Rt.prototype.isPreloaded=function(){return!!this.active[yt]},Rt.prototype.numActive=function(){return Object.keys(this.active).length};var wt=Math.floor(e.browser.hardwareConcurrency/2);Rt.workerCount=Math.max(Math.min(wt,6),1);var Dt;function Jt(){return Dt||(Dt=new Rt),Dt}function fr(){var fe=Jt();fe.acquire(yt)}function Rr(){var fe=Dt;fe&&(fe.isPreloaded()&&fe.numActive()===1?(fe.release(yt),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Sr(fe,W){var ve={};for(var J in fe)J!=="ref"&&(ve[J]=fe[J]);return e.refProperties.forEach(function(pe){pe in W&&(ve[pe]=W[pe])}),ve}function Pr(fe){fe=fe.slice();for(var W=Object.create(null),ve=0;ve<fe.length;ve++)W[fe[ve].id]=fe[ve];for(var J=0;J<fe.length;J++)"ref"in fe[J]&&(fe[J]=Sr(fe[J],W[fe[J].ref]));return fe}function Jr(){var fe={},W=e.styleSpec.$version;for(var ve in e.styleSpec.$root){var J=e.styleSpec.$root[ve];if(J.required){var pe=null;ve==="version"?pe=W:J.type==="array"?pe=[]:pe={},pe!=null&&(fe[ve]=pe)}}return fe}var ur={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wr(fe,W,ve){ve.push({command:ur.addSource,args:[fe,W[fe]]})}function Br(fe,W,ve){W.push({command:ur.removeSource,args:[fe]}),ve[fe]=!0}function Yr(fe,W,ve,J){Br(fe,ve,J),wr(fe,W,ve)}function Dr(fe,W,ve){var J;for(J in fe[ve])if(!!fe[ve].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(fe[ve][J],W[ve][J]))return!1;for(J in W[ve])if(!!W[ve].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(fe[ve][J],W[ve][J]))return!1;return!0}function at(fe,W,ve,J){fe=fe||{},W=W||{};var pe;for(pe in fe)!fe.hasOwnProperty(pe)||W.hasOwnProperty(pe)||Br(pe,ve,J);for(pe in W)!W.hasOwnProperty(pe)||(fe.hasOwnProperty(pe)?e.deepEqual(fe[pe],W[pe])||(fe[pe].type==="geojson"&&W[pe].type==="geojson"&&Dr(fe,W,pe)?ve.push({command:ur.setGeoJSONSourceData,args:[pe,W[pe].data]}):Yr(pe,W,ve,J)):wr(pe,W,ve))}function zt(fe,W,ve,J,pe,Se){fe=fe||{},W=W||{};var Ie;for(Ie in fe)!fe.hasOwnProperty(Ie)||e.deepEqual(fe[Ie],W[Ie])||ve.push({command:Se,args:[J,Ie,W[Ie],pe]});for(Ie in W)!W.hasOwnProperty(Ie)||fe.hasOwnProperty(Ie)||e.deepEqual(fe[Ie],W[Ie])||ve.push({command:Se,args:[J,Ie,W[Ie],pe]})}function qt(fe){return fe.id}function hr(fe,W){return fe[W.id]=W,fe}function Ur(fe,W,ve){fe=fe||[],W=W||[];var J=fe.map(qt),pe=W.map(qt),Se=fe.reduce(hr,{}),Ie=W.reduce(hr,{}),Qe=J.slice(),dt=Object.create(null),Ft,nr,dr,xr,Fr,Zr,Qr;for(Ft=0,nr=0;Ft<J.length;Ft++)dr=J[Ft],Ie.hasOwnProperty(dr)?nr++:(ve.push({command:ur.removeLayer,args:[dr]}),Qe.splice(Qe.indexOf(dr,nr),1));for(Ft=0,nr=0;Ft<pe.length;Ft++)dr=pe[pe.length-1-Ft],Qe[Qe.length-1-Ft]!==dr&&(Se.hasOwnProperty(dr)?(ve.push({command:ur.removeLayer,args:[dr]}),Qe.splice(Qe.lastIndexOf(dr,Qe.length-nr),1)):nr++,Zr=Qe[Qe.length-Ft],ve.push({command:ur.addLayer,args:[Ie[dr],Zr]}),Qe.splice(Qe.length-Ft,0,dr),dt[dr]=!0);for(Ft=0;Ft<pe.length;Ft++)if(dr=pe[Ft],xr=Se[dr],Fr=Ie[dr],!(dt[dr]||e.deepEqual(xr,Fr))){if(!e.deepEqual(xr.source,Fr.source)||!e.deepEqual(xr["source-layer"],Fr["source-layer"])||!e.deepEqual(xr.type,Fr.type)){ve.push({command:ur.removeLayer,args:[dr]}),Zr=Qe[Qe.lastIndexOf(dr)+1],ve.push({command:ur.addLayer,args:[Fr,Zr]});continue}zt(xr.layout,Fr.layout,ve,dr,null,ur.setLayoutProperty),zt(xr.paint,Fr.paint,ve,dr,null,ur.setPaintProperty),e.deepEqual(xr.filter,Fr.filter)||ve.push({command:ur.setFilter,args:[dr,Fr.filter]}),(!e.deepEqual(xr.minzoom,Fr.minzoom)||!e.deepEqual(xr.maxzoom,Fr.maxzoom))&&ve.push({command:ur.setLayerZoomRange,args:[dr,Fr.minzoom,Fr.maxzoom]});for(Qr in xr)!xr.hasOwnProperty(Qr)||Qr==="layout"||Qr==="paint"||Qr==="filter"||Qr==="metadata"||Qr==="minzoom"||Qr==="maxzoom"||(Qr.indexOf("paint.")===0?zt(xr[Qr],Fr[Qr],ve,dr,Qr.slice(6),ur.setPaintProperty):e.deepEqual(xr[Qr],Fr[Qr])||ve.push({command:ur.setLayerProperty,args:[dr,Qr,Fr[Qr]]}));for(Qr in Fr)!Fr.hasOwnProperty(Qr)||xr.hasOwnProperty(Qr)||Qr==="layout"||Qr==="paint"||Qr==="filter"||Qr==="metadata"||Qr==="minzoom"||Qr==="maxzoom"||(Qr.indexOf("paint.")===0?zt(xr[Qr],Fr[Qr],ve,dr,Qr.slice(6),ur.setPaintProperty):e.deepEqual(xr[Qr],Fr[Qr])||ve.push({command:ur.setLayerProperty,args:[dr,Qr,Fr[Qr]]}))}}function Gr(fe,W){if(!fe)return[{command:ur.setStyle,args:[W]}];var ve=[];try{if(!e.deepEqual(fe.version,W.version))return[{command:ur.setStyle,args:[W]}];e.deepEqual(fe.center,W.center)||ve.push({command:ur.setCenter,args:[W.center]}),e.deepEqual(fe.zoom,W.zoom)||ve.push({command:ur.setZoom,args:[W.zoom]}),e.deepEqual(fe.bearing,W.bearing)||ve.push({command:ur.setBearing,args:[W.bearing]}),e.deepEqual(fe.pitch,W.pitch)||ve.push({command:ur.setPitch,args:[W.pitch]}),e.deepEqual(fe.sprite,W.sprite)||ve.push({command:ur.setSprite,args:[W.sprite]}),e.deepEqual(fe.glyphs,W.glyphs)||ve.push({command:ur.setGlyphs,args:[W.glyphs]}),e.deepEqual(fe.transition,W.transition)||ve.push({command:ur.setTransition,args:[W.transition]}),e.deepEqual(fe.light,W.light)||ve.push({command:ur.setLight,args:[W.light]});var J={},pe=[];at(fe.sources,W.sources,pe,J);var Se=[];fe.layers&&fe.layers.forEach(function(Ie){J[Ie.source]?ve.push({command:ur.removeLayer,args:[Ie.id]}):Se.push(Ie)}),ve=ve.concat(pe),Ur(Se,W.layers,ve)}catch(Ie){console.warn("Unable to compute style diff:",Ie),ve=[{command:ur.setStyle,args:[W]}]}return ve}var Ir=function(W,ve){this.reset(W,ve)};Ir.prototype.reset=function(W,ve){this.points=W||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ve||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Ir.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var ve=1,J=this._distances[ve],pe=W*this.paddedLength+this.padding;J<pe&&ve<this._distances.length;)J=this._distances[++ve];var Se=ve-1,Ie=this._distances[Se],Qe=J-Ie,dt=Qe>0?(pe-Ie)/Qe:0;return this.points[Se].mult(1-dt).add(this.points[ve].mult(dt))};var kr=function(W,ve,J){var pe=this.boxCells=[],Se=this.circleCells=[];this.xCellCount=Math.ceil(W/J),this.yCellCount=Math.ceil(ve/J);for(var Ie=0;Ie<this.xCellCount*this.yCellCount;Ie++)pe.push([]),Se.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=ve,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/ve,this.boxUid=0,this.circleUid=0};kr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kr.prototype.insert=function(W,ve,J,pe,Se){this._forEachCell(ve,J,pe,Se,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(ve),this.bboxes.push(J),this.bboxes.push(pe),this.bboxes.push(Se)},kr.prototype.insertCircle=function(W,ve,J,pe){this._forEachCell(ve-pe,J-pe,ve+pe,J+pe,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(ve),this.circles.push(J),this.circles.push(pe)},kr.prototype._insertBoxCell=function(W,ve,J,pe,Se,Ie){this.boxCells[Se].push(Ie)},kr.prototype._insertCircleCell=function(W,ve,J,pe,Se,Ie){this.circleCells[Se].push(Ie)},kr.prototype._query=function(W,ve,J,pe,Se,Ie){if(J<0||W>this.width||pe<0||ve>this.height)return Se?!1:[];var Qe=[];if(W<=0&&ve<=0&&this.width<=J&&this.height<=pe){if(Se)return!0;for(var dt=0;dt<this.boxKeys.length;dt++)Qe.push({key:this.boxKeys[dt],x1:this.bboxes[dt*4],y1:this.bboxes[dt*4+1],x2:this.bboxes[dt*4+2],y2:this.bboxes[dt*4+3]});for(var Ft=0;Ft<this.circleKeys.length;Ft++){var nr=this.circles[Ft*3],dr=this.circles[Ft*3+1],xr=this.circles[Ft*3+2];Qe.push({key:this.circleKeys[Ft],x1:nr-xr,y1:dr-xr,x2:nr+xr,y2:dr+xr})}return Ie?Qe.filter(Ie):Qe}else{var Fr={hitTest:Se,seenUids:{box:{},circle:{}}};return this._forEachCell(W,ve,J,pe,this._queryCell,Qe,Fr,Ie),Se?Qe.length>0:Qe}},kr.prototype._queryCircle=function(W,ve,J,pe,Se){var Ie=W-J,Qe=W+J,dt=ve-J,Ft=ve+J;if(Qe<0||Ie>this.width||Ft<0||dt>this.height)return pe?!1:[];var nr=[],dr={hitTest:pe,circle:{x:W,y:ve,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Ie,dt,Qe,Ft,this._queryCellCircle,nr,dr,Se),pe?nr.length>0:nr},kr.prototype.query=function(W,ve,J,pe,Se){return this._query(W,ve,J,pe,!1,Se)},kr.prototype.hitTest=function(W,ve,J,pe,Se){return this._query(W,ve,J,pe,!0,Se)},kr.prototype.hitTestCircle=function(W,ve,J,pe){return this._queryCircle(W,ve,J,!0,pe)},kr.prototype._queryCell=function(W,ve,J,pe,Se,Ie,Qe,dt){var Ft=Qe.seenUids,nr=this.boxCells[Se];if(nr!==null)for(var dr=this.bboxes,xr=0,Fr=nr;xr<Fr.length;xr+=1){var Zr=Fr[xr];if(!Ft.box[Zr]){Ft.box[Zr]=!0;var Qr=Zr*4;if(W<=dr[Qr+2]&&ve<=dr[Qr+3]&&J>=dr[Qr+0]&&pe>=dr[Qr+1]&&(!dt||dt(this.boxKeys[Zr]))){if(Qe.hitTest)return Ie.push(!0),!0;Ie.push({key:this.boxKeys[Zr],x1:dr[Qr],y1:dr[Qr+1],x2:dr[Qr+2],y2:dr[Qr+3]})}}}var jr=this.circleCells[Se];if(jr!==null)for(var rn=this.circles,mn=0,Fn=jr;mn<Fn.length;mn+=1){var Vn=Fn[mn];if(!Ft.circle[Vn]){Ft.circle[Vn]=!0;var ta=Vn*3;if(this._circleAndRectCollide(rn[ta],rn[ta+1],rn[ta+2],W,ve,J,pe)&&(!dt||dt(this.circleKeys[Vn]))){if(Qe.hitTest)return Ie.push(!0),!0;var ia=rn[ta],na=rn[ta+1],ya=rn[ta+2];Ie.push({key:this.circleKeys[Vn],x1:ia-ya,y1:na-ya,x2:ia+ya,y2:na+ya})}}}},kr.prototype._queryCellCircle=function(W,ve,J,pe,Se,Ie,Qe,dt){var Ft=Qe.circle,nr=Qe.seenUids,dr=this.boxCells[Se];if(dr!==null)for(var xr=this.bboxes,Fr=0,Zr=dr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];if(!nr.box[Qr]){nr.box[Qr]=!0;var jr=Qr*4;if(this._circleAndRectCollide(Ft.x,Ft.y,Ft.radius,xr[jr+0],xr[jr+1],xr[jr+2],xr[jr+3])&&(!dt||dt(this.boxKeys[Qr])))return Ie.push(!0),!0}}var rn=this.circleCells[Se];if(rn!==null)for(var mn=this.circles,Fn=0,Vn=rn;Fn<Vn.length;Fn+=1){var ta=Vn[Fn];if(!nr.circle[ta]){nr.circle[ta]=!0;var ia=ta*3;if(this._circlesCollide(mn[ia],mn[ia+1],mn[ia+2],Ft.x,Ft.y,Ft.radius)&&(!dt||dt(this.circleKeys[ta])))return Ie.push(!0),!0}}},kr.prototype._forEachCell=function(W,ve,J,pe,Se,Ie,Qe,dt){for(var Ft=this._convertToXCellCoord(W),nr=this._convertToYCellCoord(ve),dr=this._convertToXCellCoord(J),xr=this._convertToYCellCoord(pe),Fr=Ft;Fr<=dr;Fr++)for(var Zr=nr;Zr<=xr;Zr++){var Qr=this.xCellCount*Zr+Fr;if(Se.call(this,W,ve,J,pe,Qr,Ie,Qe,dt))return}},kr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},kr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},kr.prototype._circlesCollide=function(W,ve,J,pe,Se,Ie){var Qe=pe-W,dt=Se-ve,Ft=J+Ie;return Ft*Ft>Qe*Qe+dt*dt},kr.prototype._circleAndRectCollide=function(W,ve,J,pe,Se,Ie,Qe){var dt=(Ie-pe)/2,Ft=Math.abs(W-(pe+dt));if(Ft>dt+J)return!1;var nr=(Qe-Se)/2,dr=Math.abs(ve-(Se+nr));if(dr>nr+J)return!1;if(Ft<=dt||dr<=nr)return!0;var xr=Ft-dt,Fr=dr-nr;return xr*xr+Fr*Fr<=J*J};function Kr(fe,W,ve,J,pe){var Se=e.create();return W?(e.scale(Se,Se,[1/pe,1/pe,1]),ve||e.rotateZ(Se,Se,J.angle)):e.multiply(Se,J.labelPlaneMatrix,fe),Se}function kn(fe,W,ve,J,pe){if(W){var Se=e.clone(fe);return e.scale(Se,Se,[pe,pe,1]),ve||e.rotateZ(Se,Se,-J.angle),Se}else return J.glCoordMatrix}function yn(fe,W){var ve=[fe.x,fe.y,0,1];Cr(ve,ve,W);var J=ve[3];return{point:new e.Point(ve[0]/J,ve[1]/J),signedDistanceFromCamera:J}}function Yn(fe,W){return .5+.5*(fe/W)}function In(fe,W){var ve=fe[0]/fe[3],J=fe[1]/fe[3],pe=ve>=-W[0]&&ve<=W[0]&&J>=-W[1]&&J<=W[1];return pe}function Jn(fe,W,ve,J,pe,Se,Ie,Qe){var dt=J?fe.textSizeData:fe.iconSizeData,Ft=e.evaluateSizeForZoom(dt,ve.transform.zoom),nr=[256/ve.width*2+1,256/ve.height*2+1],dr=J?fe.text.dynamicLayoutVertexArray:fe.icon.dynamicLayoutVertexArray;dr.clear();for(var xr=fe.lineVertexArray,Fr=J?fe.text.placedSymbolArray:fe.icon.placedSymbolArray,Zr=ve.transform.width/ve.transform.height,Qr=!1,jr=0;jr<Fr.length;jr++){var rn=Fr.get(jr);if(rn.hidden||rn.writingMode===e.WritingMode.vertical&&!Qr){$a(rn.numGlyphs,dr);continue}Qr=!1;var mn=[rn.anchorX,rn.anchorY,0,1];if(e.transformMat4(mn,mn,W),!In(mn,nr)){$a(rn.numGlyphs,dr);continue}var Fn=mn[3],Vn=Yn(ve.transform.cameraToCenterDistance,Fn),ta=e.evaluateSizeForFeature(dt,Ft,rn),ia=Ie?ta/Vn:ta*Vn,na=new e.Point(rn.anchorX,rn.anchorY),ya=yn(na,pe).point,Sa={},Ta=Pa(rn,ia,!1,Qe,W,pe,Se,fe.glyphOffsetArray,xr,dr,ya,na,Sa,Zr);Qr=Ta.useVertical,(Ta.notEnoughRoom||Qr||Ta.needsFlipping&&Pa(rn,ia,!0,Qe,W,pe,Se,fe.glyphOffsetArray,xr,dr,ya,na,Sa,Zr).notEnoughRoom)&&$a(rn.numGlyphs,dr)}J?fe.text.dynamicLayoutVertexBuffer.updateData(dr):fe.icon.dynamicLayoutVertexBuffer.updateData(dr)}function Zn(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr){var dr=Qe.glyphStartIndex+Qe.numGlyphs,xr=Qe.lineStartIndex,Fr=Qe.lineStartIndex+Qe.lineLength,Zr=W.getoffsetX(Qe.glyphStartIndex),Qr=W.getoffsetX(dr-1),jr=Ka(fe*Zr,ve,J,pe,Se,Ie,Qe.segment,xr,Fr,dt,Ft,nr);if(!jr)return null;var rn=Ka(fe*Qr,ve,J,pe,Se,Ie,Qe.segment,xr,Fr,dt,Ft,nr);return rn?{first:jr,last:rn}:null}function ba(fe,W,ve,J){if(fe===e.WritingMode.horizontal){var pe=Math.abs(ve.y-W.y),Se=Math.abs(ve.x-W.x)*J;if(pe>Se)return{useVertical:!0}}return(fe===e.WritingMode.vertical?W.y<ve.y:W.x>ve.x)?{needsFlipping:!0}:null}function Pa(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr,xr,Fr){var Zr=W/24,Qr=fe.lineOffsetX*Zr,jr=fe.lineOffsetY*Zr,rn;if(fe.numGlyphs>1){var mn=fe.glyphStartIndex+fe.numGlyphs,Fn=fe.lineStartIndex,Vn=fe.lineStartIndex+fe.lineLength,ta=Zn(Zr,Qe,Qr,jr,ve,nr,dr,fe,dt,Se,xr);if(!ta)return{notEnoughRoom:!0};var ia=yn(ta.first.point,Ie).point,na=yn(ta.last.point,Ie).point;if(J&&!ve){var ya=ba(fe.writingMode,ia,na,Fr);if(ya)return ya}rn=[ta.first];for(var Sa=fe.glyphStartIndex+1;Sa<mn-1;Sa++)rn.push(Ka(Zr*Qe.getoffsetX(Sa),Qr,jr,ve,nr,dr,fe.segment,Fn,Vn,dt,Se,xr));rn.push(ta.last)}else{if(J&&!ve){var Ta=yn(dr,pe).point,Ca=fe.lineStartIndex+fe.segment+1,Fa=new e.Point(dt.getx(Ca),dt.gety(Ca)),Za=yn(Fa,pe),ci=Za.signedDistanceFromCamera>0?Za.point:xi(dr,Fa,Ta,1,pe),Hi=ba(fe.writingMode,Ta,ci,Fr);if(Hi)return Hi}var yi=Ka(Zr*Qe.getoffsetX(fe.glyphStartIndex),Qr,jr,ve,nr,dr,fe.segment,fe.lineStartIndex,fe.lineStartIndex+fe.lineLength,dt,Se,xr);if(!yi)return{notEnoughRoom:!0};rn=[yi]}for(var Ti=0,Wa=rn;Ti<Wa.length;Ti+=1){var Vi=Wa[Ti];e.addDynamicAttributes(Ft,Vi.point,Vi.angle)}return{}}function xi(fe,W,ve,J,pe){var Se=yn(fe.add(fe.sub(W)._unit()),pe).point,Ie=ve.sub(Se);return ve.add(Ie._mult(J/Ie.mag()))}function Ka(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr){var xr=J?fe-W:fe+W,Fr=xr>0?1:-1,Zr=0;J&&(Fr*=-1,Zr=Math.PI),Fr<0&&(Zr+=Math.PI);for(var Qr=Fr>0?Qe+Ie:Qe+Ie+1,jr=pe,rn=pe,mn=0,Fn=0,Vn=Math.abs(xr),ta=[];mn+Fn<=Vn;){if(Qr+=Fr,Qr<Qe||Qr>=dt)return null;if(rn=jr,ta.push(jr),jr=dr[Qr],jr===void 0){var ia=new e.Point(Ft.getx(Qr),Ft.gety(Qr)),na=yn(ia,nr);if(na.signedDistanceFromCamera>0)jr=dr[Qr]=na.point;else{var ya=Qr-Fr,Sa=mn===0?Se:new e.Point(Ft.getx(ya),Ft.gety(ya));jr=xi(Sa,ia,rn,Vn-mn+1,nr)}}mn+=Fn,Fn=rn.dist(jr)}var Ta=(Vn-mn)/Fn,Ca=jr.sub(rn),Fa=Ca.mult(Ta)._add(rn);Fa._add(Ca._unit()._perp()._mult(ve*Fr));var Za=Zr+Math.atan2(jr.y-rn.y,jr.x-rn.x);return ta.push(Fa),{point:Fa,angle:Za,path:ta}}var ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $a(fe,W){for(var ve=0;ve<fe;ve++){var J=W.length;W.resize(J+4),W.float32.set(ti,J*3)}}function Cr(fe,W,ve){var J=W[0],pe=W[1];return fe[0]=ve[0]*J+ve[4]*pe+ve[12],fe[1]=ve[1]*J+ve[5]*pe+ve[13],fe[3]=ve[3]*J+ve[7]*pe+ve[15],fe}var bn=100,gn=function(W,ve,J){ve===void 0&&(ve=new kr(W.width+2*bn,W.height+2*bn,25)),J===void 0&&(J=new kr(W.width+2*bn,W.height+2*bn,25)),this.transform=W,this.grid=ve,this.ignoredGrid=J,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+bn,this.screenBottomBoundary=W.height+bn,this.gridRightBoundary=W.width+2*bn,this.gridBottomBoundary=W.height+2*bn};gn.prototype.placeCollisionBox=function(W,ve,J,pe,Se){var Ie=this.projectAndGetPerspectiveRatio(pe,W.anchorPointX,W.anchorPointY),Qe=J*Ie.perspectiveRatio,dt=W.x1*Qe+Ie.point.x,Ft=W.y1*Qe+Ie.point.y,nr=W.x2*Qe+Ie.point.x,dr=W.y2*Qe+Ie.point.y;return!this.isInsideGrid(dt,Ft,nr,dr)||!ve&&this.grid.hitTest(dt,Ft,nr,dr,Se)?{box:[],offscreen:!1}:{box:[dt,Ft,nr,dr],offscreen:this.isOffscreen(dt,Ft,nr,dr)}},gn.prototype.placeCollisionCircles=function(W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr,xr,Fr){var Zr=[],Qr=new e.Point(ve.anchorX,ve.anchorY),jr=yn(Qr,Ie),rn=Yn(this.transform.cameraToCenterDistance,jr.signedDistanceFromCamera),mn=nr?Se/rn:Se*rn,Fn=mn/e.ONE_EM,Vn=yn(Qr,Qe).point,ta={},ia=ve.lineOffsetX*Fn,na=ve.lineOffsetY*Fn,ya=Zn(Fn,pe,ia,na,!1,Vn,Qr,ve,J,Qe,ta),Sa=!1,Ta=!1,Ca=!0;if(ya){for(var Fa=xr*.5*rn+Fr,Za=new e.Point(-bn,-bn),ci=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Hi=new Ir,yi=ya.first,Ti=ya.last,Wa=[],Vi=yi.path.length-1;Vi>=1;Vi--)Wa.push(yi.path[Vi]);for(var Xi=1;Xi<Ti.path.length;Xi++)Wa.push(Ti.path[Xi]);var $i=Fa*2.5;if(dt){var Pi=Wa.map(function(Ru){return yn(Ru,dt)});Pi.some(function(Ru){return Ru.signedDistanceFromCamera<=0})?Wa=[]:Wa=Pi.map(function(Ru){return Ru.point})}var so=[];if(Wa.length>0){for(var vi=Wa[0].clone(),Ri=Wa[0].clone(),Fo=1;Fo<Wa.length;Fo++)vi.x=Math.min(vi.x,Wa[Fo].x),vi.y=Math.min(vi.y,Wa[Fo].y),Ri.x=Math.max(Ri.x,Wa[Fo].x),Ri.y=Math.max(Ri.y,Wa[Fo].y);vi.x>=Za.x&&Ri.x<=ci.x&&vi.y>=Za.y&&Ri.y<=ci.y?so=[Wa]:Ri.x<Za.x||vi.x>ci.x||Ri.y<Za.y||vi.y>ci.y?so=[]:so=e.clipLine([Wa],Za.x,Za.y,ci.x,ci.y)}for(var es=0,Ql=so;es<Ql.length;es+=1){var $l=Ql[es];Hi.reset($l,Fa*.25);var Cu=0;Hi.length<=.5*Fa?Cu=1:Cu=Math.ceil(Hi.paddedLength/$i)+1;for(var Lu=0;Lu<Cu;Lu++){var tf=Lu/Math.max(Cu-1,1),Pu=Hi.lerp(tf),ol=Pu.x+bn,Af=Pu.y+bn;Zr.push(ol,Af,Fa,0);var Hs=ol-Fa,zl=Af-Fa,Du=ol+Fa,yu=Af+Fa;if(Ca=Ca&&this.isOffscreen(Hs,zl,Du,yu),Ta=Ta||this.isInsideGrid(Hs,zl,Du,yu),!W&&this.grid.hitTestCircle(ol,Af,Fa,dr)&&(Sa=!0,!Ft))return{circles:[],offscreen:!1,collisionDetected:Sa}}}}return{circles:!Ft&&Sa||!Ta?[]:Zr,offscreen:Ca,collisionDetected:Sa}},gn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ve=[],J=1/0,pe=1/0,Se=-1/0,Ie=-1/0,Qe=0,dt=W;Qe<dt.length;Qe+=1){var Ft=dt[Qe],nr=new e.Point(Ft.x+bn,Ft.y+bn);J=Math.min(J,nr.x),pe=Math.min(pe,nr.y),Se=Math.max(Se,nr.x),Ie=Math.max(Ie,nr.y),ve.push(nr)}for(var dr=this.grid.query(J,pe,Se,Ie).concat(this.ignoredGrid.query(J,pe,Se,Ie)),xr={},Fr={},Zr=0,Qr=dr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=jr.key;if(xr[rn.bucketInstanceId]===void 0&&(xr[rn.bucketInstanceId]={}),!xr[rn.bucketInstanceId][rn.featureIndex]){var mn=[new e.Point(jr.x1,jr.y1),new e.Point(jr.x2,jr.y1),new e.Point(jr.x2,jr.y2),new e.Point(jr.x1,jr.y2)];!e.polygonIntersectsPolygon(ve,mn)||(xr[rn.bucketInstanceId][rn.featureIndex]=!0,Fr[rn.bucketInstanceId]===void 0&&(Fr[rn.bucketInstanceId]=[]),Fr[rn.bucketInstanceId].push(rn.featureIndex))}}return Fr},gn.prototype.insertCollisionBox=function(W,ve,J,pe,Se){var Ie=ve?this.ignoredGrid:this.grid,Qe={bucketInstanceId:J,featureIndex:pe,collisionGroupID:Se};Ie.insert(Qe,W[0],W[1],W[2],W[3])},gn.prototype.insertCollisionCircles=function(W,ve,J,pe,Se){for(var Ie=ve?this.ignoredGrid:this.grid,Qe={bucketInstanceId:J,featureIndex:pe,collisionGroupID:Se},dt=0;dt<W.length;dt+=4)Ie.insertCircle(Qe,W[dt],W[dt+1],W[dt+2])},gn.prototype.projectAndGetPerspectiveRatio=function(W,ve,J){var pe=[ve,J,0,1];Cr(pe,pe,W);var Se=new e.Point((pe[0]/pe[3]+1)/2*this.transform.width+bn,(-pe[1]/pe[3]+1)/2*this.transform.height+bn);return{point:Se,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/pe[3])}},gn.prototype.isOffscreen=function(W,ve,J,pe){return J<bn||W>=this.screenRightBoundary||pe<bn||ve>this.screenBottomBoundary},gn.prototype.isInsideGrid=function(W,ve,J,pe){return J>=0&&W<this.gridRightBoundary&&pe>=0&&ve<this.gridBottomBoundary},gn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-bn,-bn,0]),W};function Ln(fe,W,ve){return W*(e.EXTENT/(fe.tileSize*Math.pow(2,ve-fe.tileID.overscaledZ)))}var qn=function(W,ve,J,pe){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?ve:-ve))):this.opacity=pe&&J?1:0,this.placed=J};qn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var da=function(W,ve,J,pe,Se){this.text=new qn(W?W.text:null,ve,J,Se),this.icon=new qn(W?W.icon:null,ve,pe,Se)};da.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var oa=function(W,ve,J){this.text=W,this.icon=ve,this.skipFade=J},Bn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},$n=function(W,ve,J,pe,Se){this.bucketInstanceId=W,this.featureIndex=ve,this.sourceLayerIndex=J,this.bucketIndex=pe,this.tileID=Se},Xa=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Xa.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var ve=++this.maxGroupID;this.collisionGroups[W]={ID:ve,predicate:function(J){return J.collisionGroupID===ve}}}return this.collisionGroups[W]};function gi(fe,W,ve,J,pe){var Se=e.getAnchorAlignment(fe),Ie=Se.horizontalAlign,Qe=Se.verticalAlign,dt=-(Ie-.5)*W,Ft=-(Qe-.5)*ve,nr=e.evaluateVariableOffset(fe,J);return new e.Point(dt+nr[0]*pe,Ft+nr[1]*pe)}function Xt(fe,W,ve,J,pe,Se){var Ie=fe.x1,Qe=fe.x2,dt=fe.y1,Ft=fe.y2,nr=fe.anchorPointX,dr=fe.anchorPointY,xr=new e.Point(W,ve);return J&&xr._rotate(pe?Se:-Se),{x1:Ie+xr.x,y1:dt+xr.y,x2:Qe+xr.x,y2:Ft+xr.y,anchorPointX:nr,anchorPointY:dr}}var mr=function(W,ve,J,pe){this.transform=W.clone(),this.collisionIndex=new gn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ve,this.retainedQueryData={},this.collisionGroups=new Xa(J),this.collisionCircleArrays={},this.prevPlacement=pe,pe&&(pe.prevPlacement=void 0),this.placedOrientations={}};mr.prototype.getBucketParts=function(W,ve,J,pe){var Se=J.getBucket(ve),Ie=J.latestFeatureIndex;if(!(!Se||!Ie||ve.id!==Se.layerIds[0])){var Qe=J.collisionBoxArray,dt=Se.layers[0].layout,Ft=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),nr=J.tileSize/e.EXTENT,dr=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),xr=dt.get("text-pitch-alignment")==="map",Fr=dt.get("text-rotation-alignment")==="map",Zr=Ln(J,1,this.transform.zoom),Qr=Kr(dr,xr,Fr,this.transform,Zr),jr=null;if(xr){var rn=kn(dr,xr,Fr,this.transform,Zr);jr=e.multiply([],this.transform.labelPlaneMatrix,rn)}this.retainedQueryData[Se.bucketInstanceId]=new $n(Se.bucketInstanceId,Ie,Se.sourceLayerIndex,Se.index,J.tileID);var mn={bucket:Se,layout:dt,posMatrix:dr,textLabelPlaneMatrix:Qr,labelToScreenMatrix:jr,scale:Ft,textPixelRatio:nr,holdingForFade:J.holdingForFade(),collisionBoxArray:Qe,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Se.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Se.sourceID)};if(pe)for(var Fn=0,Vn=Se.sortKeyRanges;Fn<Vn.length;Fn+=1){var ta=Vn[Fn],ia=ta.sortKey,na=ta.symbolInstanceStart,ya=ta.symbolInstanceEnd;W.push({sortKey:ia,symbolInstanceStart:na,symbolInstanceEnd:ya,parameters:mn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Se.symbolInstances.length,parameters:mn})}},mr.prototype.attemptAnchorPlacement=function(W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr,xr,Fr,Zr,Qr){var jr=[xr.textOffset0,xr.textOffset1],rn=gi(W,J,pe,jr,Se),mn=this.collisionIndex.placeCollisionBox(Xt(ve,rn.x,rn.y,Ie,Qe,this.transform.angle),dr,dt,Ft,nr.predicate);if(Qr){var Fn=this.collisionIndex.placeCollisionBox(Xt(Qr,rn.x,rn.y,Ie,Qe,this.transform.angle),dr,dt,Ft,nr.predicate);if(Fn.box.length===0)return}if(mn.box.length>0){var Vn;return this.prevPlacement&&this.prevPlacement.variableOffsets[xr.crossTileID]&&this.prevPlacement.placements[xr.crossTileID]&&this.prevPlacement.placements[xr.crossTileID].text&&(Vn=this.prevPlacement.variableOffsets[xr.crossTileID].anchor),this.variableOffsets[xr.crossTileID]={textOffset:jr,width:J,height:pe,anchor:W,textBoxScale:Se,prevAnchor:Vn},this.markUsedJustification(Fr,W,xr,Zr),Fr.allowVerticalPlacement&&(this.markUsedOrientation(Fr,Zr,xr),this.placedOrientations[xr.crossTileID]=Zr),{shift:rn,placedGlyphBoxes:mn}}},mr.prototype.placeLayerBucketPart=function(W,ve,J){var pe=this,Se=W.parameters,Ie=Se.bucket,Qe=Se.layout,dt=Se.posMatrix,Ft=Se.textLabelPlaneMatrix,nr=Se.labelToScreenMatrix,dr=Se.textPixelRatio,xr=Se.holdingForFade,Fr=Se.collisionBoxArray,Zr=Se.partiallyEvaluatedTextSize,Qr=Se.collisionGroup,jr=Qe.get("text-optional"),rn=Qe.get("icon-optional"),mn=Qe.get("text-allow-overlap"),Fn=Qe.get("icon-allow-overlap"),Vn=Qe.get("text-rotation-alignment")==="map",ta=Qe.get("text-pitch-alignment")==="map",ia=Qe.get("icon-text-fit")!=="none",na=Qe.get("symbol-z-order")==="viewport-y",ya=mn&&(Fn||!Ie.hasIconData()||rn),Sa=Fn&&(mn||!Ie.hasTextData()||jr);!Ie.collisionArrays&&Fr&&Ie.deserializeCollisionBoxes(Fr);var Ta=function(yi,Ti){if(!ve[yi.crossTileID]){if(xr){pe.placements[yi.crossTileID]=new oa(!1,!1,!1);return}var Wa=!1,Vi=!1,Xi=!0,$i=null,Pi={box:null,offscreen:null},so={box:null,offscreen:null},vi=null,Ri=null,Fo=null,es=0,Ql=0,$l=0;Ti.textFeatureIndex?es=Ti.textFeatureIndex:yi.useRuntimeCollisionCircles&&(es=yi.featureIndex),Ti.verticalTextFeatureIndex&&(Ql=Ti.verticalTextFeatureIndex);var Cu=Ti.textBox;if(Cu){var Lu=function(Vo){var Tl=e.WritingMode.horizontal;if(Ie.allowVerticalPlacement&&!Vo&&pe.prevPlacement){var Al=pe.prevPlacement.placedOrientations[yi.crossTileID];Al&&(pe.placedOrientations[yi.crossTileID]=Al,Tl=Al,pe.markUsedOrientation(Ie,Tl,yi))}return Tl},tf=function(Vo,Tl){if(Ie.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&Ti.verticalTextBox)for(var Al=0,Rc=Ie.writingModes;Al<Rc.length;Al+=1){var bh=Rc[Al];if(bh===e.WritingMode.vertical?(Pi=Tl(),so=Pi):Pi=Vo(),Pi&&Pi.box&&Pi.box.length)break}else Pi=Vo()};if(Qe.get("text-variable-anchor")){var Hs=Qe.get("text-variable-anchor");if(pe.prevPlacement&&pe.prevPlacement.variableOffsets[yi.crossTileID]){var zl=pe.prevPlacement.variableOffsets[yi.crossTileID];Hs.indexOf(zl.anchor)>0&&(Hs=Hs.filter(function(Vo){return Vo!==zl.anchor}),Hs.unshift(zl.anchor))}var Du=function(Vo,Tl,Al){for(var Rc=Vo.x2-Vo.x1,bh=Vo.y2-Vo.y1,tp=yi.textBoxScale,rp=ia&&!Fn?Tl:null,gc={box:[],offscreen:!1},np=mn?Hs.length*2:Hs.length,Ic=0;Ic<np;++Ic){var ap=Hs[Ic%Hs.length],ip=Ic>=Hs.length,_h=pe.attemptAnchorPlacement(ap,Vo,Rc,bh,tp,Vn,ta,dr,dt,Qr,ip,yi,Ie,Al,rp);if(_h&&(gc=_h.placedGlyphBoxes,gc&&gc.box&&gc.box.length)){Wa=!0,$i=_h.shift;break}}return gc},yu=function(){return Du(Cu,Ti.iconBox,e.WritingMode.horizontal)},Ru=function(){var Vo=Ti.verticalTextBox,Tl=Pi&&Pi.box&&Pi.box.length;return Ie.allowVerticalPlacement&&!Tl&&yi.numVerticalGlyphVertices>0&&Vo?Du(Vo,Ti.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};tf(yu,Ru),Pi&&(Wa=Pi.box,Xi=Pi.offscreen);var Cc=Lu(Pi&&Pi.box);if(!Wa&&pe.prevPlacement){var Df=pe.prevPlacement.variableOffsets[yi.crossTileID];Df&&(pe.variableOffsets[yi.crossTileID]=Df,pe.markUsedJustification(Ie,Df.anchor,yi,Cc))}}else{var Pu=function(Vo,Tl){var Al=pe.collisionIndex.placeCollisionBox(Vo,mn,dr,dt,Qr.predicate);return Al&&Al.box&&Al.box.length&&(pe.markUsedOrientation(Ie,Tl,yi),pe.placedOrientations[yi.crossTileID]=Tl),Al},ol=function(){return Pu(Cu,e.WritingMode.horizontal)},Af=function(){var Vo=Ti.verticalTextBox;return Ie.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&Vo?Pu(Vo,e.WritingMode.vertical):{box:null,offscreen:null}};tf(ol,Af),Lu(Pi&&Pi.box&&Pi.box.length)}}if(vi=Pi,Wa=vi&&vi.box&&vi.box.length>0,Xi=vi&&vi.offscreen,yi.useRuntimeCollisionCircles){var Ds=Ie.text.placedSymbolArray.get(yi.centerJustifiedTextSymbolIndex),pc=e.evaluateSizeForFeature(Ie.textSizeData,Zr,Ds),Ks=Qe.get("text-padding"),dc=yi.collisionCircleDiameter;Ri=pe.collisionIndex.placeCollisionCircles(mn,Ds,Ie.lineVertexArray,Ie.glyphOffsetArray,pc,dt,Ft,nr,J,ta,Qr.predicate,dc,Ks),Wa=mn||Ri.circles.length>0&&!Ri.collisionDetected,Xi=Xi&&Ri.offscreen}if(Ti.iconFeatureIndex&&($l=Ti.iconFeatureIndex),Ti.iconBox){var Lc=function(Vo){var Tl=ia&&$i?Xt(Vo,$i.x,$i.y,Vn,ta,pe.transform.angle):Vo;return pe.collisionIndex.placeCollisionBox(Tl,Fn,dr,dt,Qr.predicate)};so&&so.box&&so.box.length&&Ti.verticalIconBox?(Fo=Lc(Ti.verticalIconBox),Vi=Fo.box.length>0):(Fo=Lc(Ti.iconBox),Vi=Fo.box.length>0),Xi=Xi&&Fo.offscreen}var Pc=jr||yi.numHorizontalGlyphVertices===0&&yi.numVerticalGlyphVertices===0,uv=rn||yi.numIconVertices===0;if(!Pc&&!uv?Vi=Wa=Vi&&Wa:uv?Pc||(Vi=Vi&&Wa):Wa=Vi&&Wa,Wa&&vi&&vi.box&&(so&&so.box&&Ql?pe.collisionIndex.insertCollisionBox(vi.box,Qe.get("text-ignore-placement"),Ie.bucketInstanceId,Ql,Qr.ID):pe.collisionIndex.insertCollisionBox(vi.box,Qe.get("text-ignore-placement"),Ie.bucketInstanceId,es,Qr.ID)),Vi&&Fo&&pe.collisionIndex.insertCollisionBox(Fo.box,Qe.get("icon-ignore-placement"),Ie.bucketInstanceId,$l,Qr.ID),Ri&&(Wa&&pe.collisionIndex.insertCollisionCircles(Ri.circles,Qe.get("text-ignore-placement"),Ie.bucketInstanceId,es,Qr.ID),J)){var Dc=Ie.bucketInstanceId,Jf=pe.collisionCircleArrays[Dc];Jf===void 0&&(Jf=pe.collisionCircleArrays[Dc]=new Bn);for(var Qf=0;Qf<Ri.circles.length;Qf+=4)Jf.circles.push(Ri.circles[Qf+0]),Jf.circles.push(Ri.circles[Qf+1]),Jf.circles.push(Ri.circles[Qf+2]),Jf.circles.push(Ri.collisionDetected?1:0)}pe.placements[yi.crossTileID]=new oa(Wa||ya,Vi||Sa,Xi||Ie.justReloaded),ve[yi.crossTileID]=!0}};if(na)for(var Ca=Ie.getSortedSymbolIndexes(this.transform.angle),Fa=Ca.length-1;Fa>=0;--Fa){var Za=Ca[Fa];Ta(Ie.symbolInstances.get(Za),Ie.collisionArrays[Za])}else for(var ci=W.symbolInstanceStart;ci<W.symbolInstanceEnd;ci++)Ta(Ie.symbolInstances.get(ci),Ie.collisionArrays[ci]);if(J&&Ie.bucketInstanceId in this.collisionCircleArrays){var Hi=this.collisionCircleArrays[Ie.bucketInstanceId];e.invert(Hi.invProjMatrix,dt),Hi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ie.justReloaded=!1},mr.prototype.markUsedJustification=function(W,ve,J,pe){var Se={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Ie;pe===e.WritingMode.vertical?Ie=J.verticalPlacedTextSymbolIndex:Ie=Se[e.getAnchorJustification(ve)];for(var Qe=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],dt=0,Ft=Qe;dt<Ft.length;dt+=1){var nr=Ft[dt];nr>=0&&(Ie>=0&&nr!==Ie?W.text.placedSymbolArray.get(nr).crossTileID=0:W.text.placedSymbolArray.get(nr).crossTileID=J.crossTileID)}},mr.prototype.markUsedOrientation=function(W,ve,J){for(var pe=ve===e.WritingMode.horizontal||ve===e.WritingMode.horizontalOnly?ve:0,Se=ve===e.WritingMode.vertical?ve:0,Ie=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],Qe=0,dt=Ie;Qe<dt.length;Qe+=1){var Ft=dt[Qe];W.text.placedSymbolArray.get(Ft).placedOrientation=pe}J.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=Se)},mr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var ve=this.prevPlacement,J=!1;this.prevZoomAdjustment=ve?ve.zoomAdjustment(this.transform.zoom):0;var pe=ve?ve.symbolFadeChange(W):1,Se=ve?ve.opacities:{},Ie=ve?ve.variableOffsets:{},Qe=ve?ve.placedOrientations:{};for(var dt in this.placements){var Ft=this.placements[dt],nr=Se[dt];nr?(this.opacities[dt]=new da(nr,pe,Ft.text,Ft.icon),J=J||Ft.text!==nr.text.placed||Ft.icon!==nr.icon.placed):(this.opacities[dt]=new da(null,pe,Ft.text,Ft.icon,Ft.skipFade),J=J||Ft.text||Ft.icon)}for(var dr in Se){var xr=Se[dr];if(!this.opacities[dr]){var Fr=new da(xr,pe,!1,!1);Fr.isHidden()||(this.opacities[dr]=Fr,J=J||xr.text.placed||xr.icon.placed)}}for(var Zr in Ie)!this.variableOffsets[Zr]&&this.opacities[Zr]&&!this.opacities[Zr].isHidden()&&(this.variableOffsets[Zr]=Ie[Zr]);for(var Qr in Qe)!this.placedOrientations[Qr]&&this.opacities[Qr]&&!this.opacities[Qr].isHidden()&&(this.placedOrientations[Qr]=Qe[Qr]);J?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ve?ve.lastPlacementChangeTime:W)},mr.prototype.updateLayerOpacities=function(W,ve){for(var J={},pe=0,Se=ve;pe<Se.length;pe+=1){var Ie=Se[pe],Qe=Ie.getBucket(W);Qe&&Ie.latestFeatureIndex&&W.id===Qe.layerIds[0]&&this.updateBucketOpacities(Qe,J,Ie.collisionBoxArray)}},mr.prototype.updateBucketOpacities=function(W,ve,J){var pe=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Se=W.layers[0].layout,Ie=new da(null,0,!1,!1,!0),Qe=Se.get("text-allow-overlap"),dt=Se.get("icon-allow-overlap"),Ft=Se.get("text-variable-anchor"),nr=Se.get("text-rotation-alignment")==="map",dr=Se.get("text-pitch-alignment")==="map",xr=Se.get("icon-text-fit")!=="none",Fr=new da(null,0,Qe&&(dt||!W.hasIconData()||Se.get("icon-optional")),dt&&(Qe||!W.hasTextData()||Se.get("text-optional")),!0);!W.collisionArrays&&J&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(J);for(var Zr=function(mn,Fn,Vn){for(var ta=0;ta<Fn/4;ta++)mn.opacityVertexArray.emplaceBack(Vn)},Qr=function(mn){var Fn=W.symbolInstances.get(mn),Vn=Fn.numHorizontalGlyphVertices,ta=Fn.numVerticalGlyphVertices,ia=Fn.crossTileID,na=ve[ia],ya=pe.opacities[ia];na?ya=Ie:ya||(ya=Fr,pe.opacities[ia]=ya),ve[ia]=!0;var Sa=Vn>0||ta>0,Ta=Fn.numIconVertices>0,Ca=pe.placedOrientations[Fn.crossTileID],Fa=Ca===e.WritingMode.vertical,Za=Ca===e.WritingMode.horizontal||Ca===e.WritingMode.horizontalOnly;if(Sa){var ci=Hr(ya.text),Hi=Fa?wn:ci;Zr(W.text,Vn,Hi);var yi=Za?wn:ci;Zr(W.text,ta,yi);var Ti=ya.text.isHidden();[Fn.rightJustifiedTextSymbolIndex,Fn.centerJustifiedTextSymbolIndex,Fn.leftJustifiedTextSymbolIndex].forEach(function($l){$l>=0&&(W.text.placedSymbolArray.get($l).hidden=Ti||Fa?1:0)}),Fn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Fn.verticalPlacedTextSymbolIndex).hidden=Ti||Za?1:0);var Wa=pe.variableOffsets[Fn.crossTileID];Wa&&pe.markUsedJustification(W,Wa.anchor,Fn,Ca);var Vi=pe.placedOrientations[Fn.crossTileID];Vi&&(pe.markUsedJustification(W,"left",Fn,Vi),pe.markUsedOrientation(W,Vi,Fn))}if(Ta){var Xi=Hr(ya.icon),$i=!(xr&&Fn.verticalPlacedIconSymbolIndex&&Fa);if(Fn.placedIconSymbolIndex>=0){var Pi=$i?Xi:wn;Zr(W.icon,Fn.numIconVertices,Pi),W.icon.placedSymbolArray.get(Fn.placedIconSymbolIndex).hidden=ya.icon.isHidden()}if(Fn.verticalPlacedIconSymbolIndex>=0){var so=$i?wn:Xi;Zr(W.icon,Fn.numVerticalIconVertices,so),W.icon.placedSymbolArray.get(Fn.verticalPlacedIconSymbolIndex).hidden=ya.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var vi=W.collisionArrays[mn];if(vi){var Ri=new e.Point(0,0);if(vi.textBox||vi.verticalTextBox){var Fo=!0;if(Ft){var es=pe.variableOffsets[ia];es?(Ri=gi(es.anchor,es.width,es.height,es.textOffset,es.textBoxScale),nr&&Ri._rotate(dr?pe.transform.angle:-pe.transform.angle)):Fo=!1}vi.textBox&&un(W.textCollisionBox.collisionVertexArray,ya.text.placed,!Fo||Fa,Ri.x,Ri.y),vi.verticalTextBox&&un(W.textCollisionBox.collisionVertexArray,ya.text.placed,!Fo||Za,Ri.x,Ri.y)}var Ql=Boolean(!Za&&vi.verticalIconBox);vi.iconBox&&un(W.iconCollisionBox.collisionVertexArray,ya.icon.placed,Ql,xr?Ri.x:0,xr?Ri.y:0),vi.verticalIconBox&&un(W.iconCollisionBox.collisionVertexArray,ya.icon.placed,!Ql,xr?Ri.x:0,xr?Ri.y:0)}}},jr=0;jr<W.symbolInstances.length;jr++)Qr(jr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var rn=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=rn.invProjMatrix,W.placementViewportMatrix=rn.viewportMatrix,W.collisionCircleArray=rn.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},mr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},mr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},mr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},mr.prototype.stillRecent=function(W,ve){var J=this.zoomAtLastRecencyCheck===ve?1-this.zoomAdjustment(ve):1;return this.zoomAtLastRecencyCheck=ve,this.commitTime+this.fadeDuration*J>W},mr.prototype.setStale=function(){this.stale=!0};function un(fe,W,ve,J,pe){fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0)}var xn=Math.pow(2,25),sn=Math.pow(2,24),Cn=Math.pow(2,17),Mn=Math.pow(2,16),dn=Math.pow(2,9),Tr=Math.pow(2,8),Ar=Math.pow(2,1);function Hr(fe){if(fe.opacity===0&&!fe.placed)return 0;if(fe.opacity===1&&fe.placed)return 4294967295;var W=fe.placed?1:0,ve=Math.floor(fe.opacity*127);return ve*xn+W*sn+ve*Cn+W*Mn+ve*dn+W*Tr+ve*Ar+W}var wn=0,Gn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Gn.prototype.continuePlacement=function(W,ve,J,pe,Se){for(var Ie=this._bucketParts;this._currentTileIndex<W.length;){var Qe=W[this._currentTileIndex];if(ve.getBucketParts(Ie,pe,Qe,this._sortAcrossTiles),this._currentTileIndex++,Se())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ie.sort(function(Ft,nr){return Ft.sortKey-nr.sortKey}));this._currentPartIndex<Ie.length;){var dt=Ie[this._currentPartIndex];if(ve.placeLayerBucketPart(dt,this._seenCrossTileIDs,J),this._currentPartIndex++,Se())return!0}return!1};var sa=function(W,ve,J,pe,Se,Ie,Qe){this.placement=new mr(W,Se,Ie,Qe),this._currentPlacementIndex=ve.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=pe,this._done=!1};sa.prototype.isDone=function(){return this._done},sa.prototype.continuePlacement=function(W,ve,J){for(var pe=this,Se=e.browser.now(),Ie=function(){var dr=e.browser.now()-Se;return pe._forceFullPlacement?!1:dr>2};this._currentPlacementIndex>=0;){var Qe=W[this._currentPlacementIndex],dt=ve[Qe],Ft=this.placement.collisionIndex.transform.zoom;if(dt.type==="symbol"&&(!dt.minzoom||dt.minzoom<=Ft)&&(!dt.maxzoom||dt.maxzoom>Ft)){this._inProgressLayer||(this._inProgressLayer=new Gn(dt));var nr=this._inProgressLayer.continuePlacement(J[dt.source],this.placement,this._showCollisionBoxes,dt,Ie);if(nr)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},sa.prototype.commit=function(W){return this.placement.commit(W),this.placement};var En=512/e.EXTENT/2,ea=function(W,ve,J){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var pe=0;pe<ve.length;pe++){var Se=ve.get(pe),Ie=Se.key;this.indexedSymbolInstances[Ie]||(this.indexedSymbolInstances[Ie]=[]),this.indexedSymbolInstances[Ie].push({crossTileID:Se.crossTileID,coord:this.getScaledCoordinates(Se,W)})}};ea.prototype.getScaledCoordinates=function(W,ve){var J=ve.canonical.z-this.tileID.canonical.z,pe=En/Math.pow(2,J);return{x:Math.floor((ve.canonical.x*e.EXTENT+W.anchorX)*pe),y:Math.floor((ve.canonical.y*e.EXTENT+W.anchorY)*pe)}},ea.prototype.findMatches=function(W,ve,J){for(var pe=this.tileID.canonical.z<ve.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ve.canonical.z),Se=0;Se<W.length;Se++){var Ie=W.get(Se);if(!Ie.crossTileID){var Qe=this.indexedSymbolInstances[Ie.key];if(!!Qe)for(var dt=this.getScaledCoordinates(Ie,ve),Ft=0,nr=Qe;Ft<nr.length;Ft+=1){var dr=nr[Ft];if(Math.abs(dr.coord.x-dt.x)<=pe&&Math.abs(dr.coord.y-dt.y)<=pe&&!J[dr.crossTileID]){J[dr.crossTileID]=!0,Ie.crossTileID=dr.crossTileID;break}}}}};var fa=function(){this.maxCrossTileID=0};fa.prototype.generate=function(){return++this.maxCrossTileID};var _a=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};_a.prototype.handleWrapJump=function(W){var ve=Math.round((W-this.lng)/360);if(ve!==0)for(var J in this.indexes){var pe=this.indexes[J],Se={};for(var Ie in pe){var Qe=pe[Ie];Qe.tileID=Qe.tileID.unwrapTo(Qe.tileID.wrap+ve),Se[Qe.tileID.key]=Qe}this.indexes[J]=Se}this.lng=W},_a.prototype.addBucket=function(W,ve,J){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===ve.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var pe=0;pe<ve.symbolInstances.length;pe++){var Se=ve.symbolInstances.get(pe);Se.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Ie=this.usedCrossTileIDs[W.overscaledZ];for(var Qe in this.indexes){var dt=this.indexes[Qe];if(Number(Qe)>W.overscaledZ)for(var Ft in dt){var nr=dt[Ft];nr.tileID.isChildOf(W)&&nr.findMatches(ve.symbolInstances,W,Ie)}else{var dr=W.scaledTo(Number(Qe)),xr=dt[dr.key];xr&&xr.findMatches(ve.symbolInstances,W,Ie)}}for(var Fr=0;Fr<ve.symbolInstances.length;Fr++){var Zr=ve.symbolInstances.get(Fr);Zr.crossTileID||(Zr.crossTileID=J.generate(),Ie[Zr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new ea(W,ve.symbolInstances,ve.bucketInstanceId),!0},_a.prototype.removeBucketCrossTileIDs=function(W,ve){for(var J in ve.indexedSymbolInstances)for(var pe=0,Se=ve.indexedSymbolInstances[J];pe<Se.length;pe+=1){var Ie=Se[pe];delete this.usedCrossTileIDs[W][Ie.crossTileID]}},_a.prototype.removeStaleBuckets=function(W){var ve=!1;for(var J in this.indexes){var pe=this.indexes[J];for(var Se in pe)W[pe[Se].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,pe[Se]),delete pe[Se],ve=!0)}return ve};var Aa=function(){this.layerIndexes={},this.crossTileIDs=new fa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Aa.prototype.addLayer=function(W,ve,J){var pe=this.layerIndexes[W.id];pe===void 0&&(pe=this.layerIndexes[W.id]=new _a);var Se=!1,Ie={};pe.handleWrapJump(J);for(var Qe=0,dt=ve;Qe<dt.length;Qe+=1){var Ft=dt[Qe],nr=Ft.getBucket(W);!nr||W.id!==nr.layerIds[0]||(nr.bucketInstanceId||(nr.bucketInstanceId=++this.maxBucketInstanceId),pe.addBucket(Ft.tileID,nr,this.crossTileIDs)&&(Se=!0),Ie[nr.bucketInstanceId]=!0)}return pe.removeStaleBuckets(Ie)&&(Se=!0),Se},Aa.prototype.pruneUnusedLayers=function(W){var ve={};W.forEach(function(pe){ve[pe]=!0});for(var J in this.layerIndexes)ve[J]||delete this.layerIndexes[J]};var va=function(fe,W){return e.emitValidationErrors(fe,W&&W.filter(function(ve){return ve.identifier!=="source.canvas"}))},La=e.pick(ur,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),So=e.pick(ur,["setCenter","setZoom","setBearing","setPitch"]),Jo=Jr(),vs=function(fe){function W(ve,J){var pe=this;J===void 0&&(J={}),fe.call(this),this.map=ve,this.dispatcher=new R(Jt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new S(ve._requestManager,J.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Aa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Se=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Ie){var Qe={pluginStatus:Ie.pluginStatus,pluginURL:Ie.pluginURL};Se.dispatcher.broadcast("syncRTLPluginState",Qe,function(dt,Ft){if(e.triggerPluginCompletionEvent(dt),Ft){var nr=Ft.every(function(xr){return xr});if(nr)for(var dr in Se.sourceCaches)Se.sourceCaches[dr].reload()}})}),this.on("data",function(Ie){if(!(Ie.dataType!=="source"||Ie.sourceDataType!=="metadata")){var Qe=pe.sourceCaches[Ie.sourceId];if(!!Qe){var dt=Qe.getSource();if(!(!dt||!dt.vectorLayerIds))for(var Ft in pe._layers){var nr=pe._layers[Ft];nr.source===dt.id&&pe._validateLayer(nr)}}}})}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(J,pe){var Se=this;pe===void 0&&(pe={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Ie=typeof pe.validate=="boolean"?pe.validate:!e.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,pe.accessToken);var Qe=this.map._requestManager.transformRequest(J,e.ResourceType.Style);this._request=e.getJSON(Qe,function(dt,Ft){Se._request=null,dt?Se.fire(new e.ErrorEvent(dt)):Ft&&Se._load(Ft,Ie)})},W.prototype.loadJSON=function(J,pe){var Se=this;pe===void 0&&(pe={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Se._request=null,Se._load(J,pe.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Jo,!1)},W.prototype._load=function(J,pe){if(!(pe&&va(this,e.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var Se in J.sources)this.addSource(Se,J.sources[Se],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Ie=Pr(this.stylesheet.layers);this._order=Ie.map(function(nr){return nr.id}),this._layers={},this._serializedLayers={};for(var Qe=0,dt=Ie;Qe<dt.length;Qe+=1){var Ft=dt[Qe];Ft=e.createStyleLayer(Ft),Ft.setEventedParent(this,{layer:{id:Ft.id}}),this._layers[Ft.id]=Ft,this._serializedLayers[Ft.id]=Ft.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function(J){var pe=this;this._spriteRequest=c(J,this.map._requestManager,function(Se,Ie){if(pe._spriteRequest=null,Se)pe.fire(new e.ErrorEvent(Se));else if(Ie)for(var Qe in Ie)pe.imageManager.addImage(Qe,Ie[Qe]);pe.imageManager.setLoaded(!0),pe._availableImages=pe.imageManager.listImages(),pe.dispatcher.broadcast("setImages",pe._availableImages),pe.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(J){var pe=this.sourceCaches[J.source];if(!!pe){var Se=J.sourceLayer;if(!!Se){var Ie=pe.getSource();(Ie.type==="geojson"||Ie.vectorLayerIds&&Ie.vectorLayerIds.indexOf(Se)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Se+'" does not exist on source "'+Ie.id+'" as specified by style layer "'+J.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(J){for(var pe=[],Se=0,Ie=J;Se<Ie.length;Se+=1){var Qe=Ie[Se],dt=this._layers[Qe];dt.type!=="custom"&&pe.push(dt.serialize())}return pe},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var pe in this._layers)if(this._layers[pe].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(J){if(!!this._loaded){var pe=this._changed;if(this._changed){var Se=Object.keys(this._updatedLayers),Ie=Object.keys(this._removedLayers);(Se.length||Ie.length)&&this._updateWorkerLayers(Se,Ie);for(var Qe in this._updatedSources){var dt=this._updatedSources[Qe];dt==="reload"?this._reloadSource(Qe):dt==="clear"&&this._clearSource(Qe)}this._updateTilesForChangedImages();for(var Ft in this._updatedPaintProps)this._layers[Ft].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var nr in this.sourceCaches)this.sourceCaches[nr].used=!1;for(var dr=0,xr=this._order;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=this._layers[Fr];Zr.recalculate(J,this._availableImages),!Zr.isHidden(J.zoom)&&Zr.source&&(this.sourceCaches[Zr.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,pe&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var pe in this.sourceCaches)this.sourceCaches[pe].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},W.prototype._updateWorkerLayers=function(J,pe){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:pe})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(J){var pe=this;if(this._checkLoaded(),va(this,e.validateStyle(J)))return!1;J=e.clone$1(J),J.layers=Pr(J.layers);var Se=Gr(this.serialize(),J).filter(function(Qe){return!(Qe.command in So)});if(Se.length===0)return!1;var Ie=Se.filter(function(Qe){return!(Qe.command in La)});if(Ie.length>0)throw new Error("Unimplemented: "+Ie.map(function(Qe){return Qe.command}).join(", ")+".");return Se.forEach(function(Qe){Qe.command!=="setTransition"&&pe[Qe.command].apply(pe,Qe.args)}),this.stylesheet=J,!0},W.prototype.addImage=function(J,pe){if(this.getImage(J))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,pe),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(J,pe){this.imageManager.updateImage(J,pe)},W.prototype.getImage=function(J){return this.imageManager.getImage(J)},W.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(J,pe,Se){var Ie=this;if(Se===void 0&&(Se={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!pe.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(pe).join(", ")+".");var Qe=["vector","raster","geojson","video","image"],dt=Qe.indexOf(pe.type)>=0;if(!(dt&&this._validate(e.validateStyle.source,"sources."+J,pe,null,Se))){this.map&&this.map._collectResourceTiming&&(pe.collectResourceTiming=!0);var Ft=this.sourceCaches[J]=new Pe(J,pe,this.dispatcher);Ft.style=this,Ft.setEventedParent(this,function(){return{isSourceLoaded:Ie.loaded(),source:Ft.serialize(),sourceId:J}}),Ft.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var pe in this._layers)if(this._layers[pe].source===J)return this.fire(new e.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+pe+'" is using it.')));var Se=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],Se.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),Se.setEventedParent(null),Se.clearTiles(),Se.onRemove&&Se.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(J,pe){this._checkLoaded();var Se=this.sourceCaches[J].getSource();Se.setData(pe),this._changed=!0},W.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},W.prototype.addLayer=function(J,pe,Se){Se===void 0&&(Se={}),this._checkLoaded();var Ie=J.id;if(this.getLayer(Ie)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Ie+'" already exists on this map')));return}var Qe;if(J.type==="custom"){if(va(this,e.validateCustomStyleLayer(J)))return;Qe=e.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Ie,J.source),J=e.clone$1(J),J=e.extend(J,{source:Ie})),this._validate(e.validateStyle.layer,"layers."+Ie,J,{arrayIndex:-1},Se))return;Qe=e.createStyleLayer(J),this._validateLayer(Qe),Qe.setEventedParent(this,{layer:{id:Ie}}),this._serializedLayers[Qe.id]=Qe.serialize()}var dt=pe?this._order.indexOf(pe):this._order.length;if(pe&&dt===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+pe+'" does not exist on this map.')));return}if(this._order.splice(dt,0,Ie),this._layerOrderChanged=!0,this._layers[Ie]=Qe,this._removedLayers[Ie]&&Qe.source&&Qe.type!=="custom"){var Ft=this._removedLayers[Ie];delete this._removedLayers[Ie],Ft.type!==Qe.type?this._updatedSources[Qe.source]="clear":(this._updatedSources[Qe.source]="reload",this.sourceCaches[Qe.source].pause())}this._updateLayer(Qe),Qe.onAdd&&Qe.onAdd(this.map)},W.prototype.moveLayer=function(J,pe){this._checkLoaded(),this._changed=!0;var Se=this._layers[J];if(!Se){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==pe){var Ie=this._order.indexOf(J);this._order.splice(Ie,1);var Qe=pe?this._order.indexOf(pe):this._order.length;if(pe&&Qe===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+pe+'" does not exist on this map.')));return}this._order.splice(Qe,0,J),this._layerOrderChanged=!0}},W.prototype.removeLayer=function(J){this._checkLoaded();var pe=this._layers[J];if(!pe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}pe.setEventedParent(null);var Se=this._order.indexOf(J);this._order.splice(Se,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=pe,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],pe.onRemove&&pe.onRemove(this.map)},W.prototype.getLayer=function(J){return this._layers[J]},W.prototype.hasLayer=function(J){return J in this._layers},W.prototype.setLayerZoomRange=function(J,pe,Se){this._checkLoaded();var Ie=this.getLayer(J);if(!Ie){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Ie.minzoom===pe&&Ie.maxzoom===Se||(pe!=null&&(Ie.minzoom=pe),Se!=null&&(Ie.maxzoom=Se),this._updateLayer(Ie))},W.prototype.setFilter=function(J,pe,Se){Se===void 0&&(Se={}),this._checkLoaded();var Ie=this.getLayer(J);if(!Ie){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Ie.filter,pe)){if(pe==null){Ie.filter=void 0,this._updateLayer(Ie);return}this._validate(e.validateStyle.filter,"layers."+Ie.id+".filter",pe,null,Se)||(Ie.filter=e.clone$1(pe),this._updateLayer(Ie))}},W.prototype.getFilter=function(J){return e.clone$1(this.getLayer(J).filter)},W.prototype.setLayoutProperty=function(J,pe,Se,Ie){Ie===void 0&&(Ie={}),this._checkLoaded();var Qe=this.getLayer(J);if(!Qe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Qe.getLayoutProperty(pe),Se)||(Qe.setLayoutProperty(pe,Se,Ie),this._updateLayer(Qe))},W.prototype.getLayoutProperty=function(J,pe){var Se=this.getLayer(J);if(!Se){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return Se.getLayoutProperty(pe)},W.prototype.setPaintProperty=function(J,pe,Se,Ie){Ie===void 0&&(Ie={}),this._checkLoaded();var Qe=this.getLayer(J);if(!Qe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Qe.getPaintProperty(pe),Se)){var dt=Qe.setPaintProperty(pe,Se,Ie);dt&&this._updateLayer(Qe),this._changed=!0,this._updatedPaintProps[J]=!0}},W.prototype.getPaintProperty=function(J,pe){return this.getLayer(J).getPaintProperty(pe)},W.prototype.setFeatureState=function(J,pe){this._checkLoaded();var Se=J.source,Ie=J.sourceLayer,Qe=this.sourceCaches[Se];if(Qe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")));return}var dt=Qe.getSource().type;if(dt==="geojson"&&Ie){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(dt==="vector"&&!Ie){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Qe.setFeatureState(Ie,J.id,pe)},W.prototype.removeFeatureState=function(J,pe){this._checkLoaded();var Se=J.source,Ie=this.sourceCaches[Se];if(Ie===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")));return}var Qe=Ie.getSource().type,dt=Qe==="vector"?J.sourceLayer:void 0;if(Qe==="vector"&&!dt){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(pe&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Ie.removeFeatureState(dt,J.id,pe)},W.prototype.getFeatureState=function(J){this._checkLoaded();var pe=J.source,Se=J.sourceLayer,Ie=this.sourceCaches[pe];if(Ie===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")));return}var Qe=Ie.getSource().type;if(Qe==="vector"&&!Se){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ie.getFeatureState(Se,J.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},W.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(J){for(var pe=this,Se=function(Za){return pe._layers[Za].type==="fill-extrusion"},Ie={},Qe=[],dt=this._order.length-1;dt>=0;dt--){var Ft=this._order[dt];if(Se(Ft)){Ie[Ft]=dt;for(var nr=0,dr=J;nr<dr.length;nr+=1){var xr=dr[nr],Fr=xr[Ft];if(Fr)for(var Zr=0,Qr=Fr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr];Qe.push(jr)}}}}Qe.sort(function(Za,ci){return ci.intersectionZ-Za.intersectionZ});for(var rn=[],mn=this._order.length-1;mn>=0;mn--){var Fn=this._order[mn];if(Se(Fn))for(var Vn=Qe.length-1;Vn>=0;Vn--){var ta=Qe[Vn].feature;if(Ie[ta.layer.id]<mn)break;rn.push(ta),Qe.pop()}else for(var ia=0,na=J;ia<na.length;ia+=1){var ya=na[ia],Sa=ya[Fn];if(Sa)for(var Ta=0,Ca=Sa;Ta<Ca.length;Ta+=1){var Fa=Ca[Ta];rn.push(Fa.feature)}}}return rn},W.prototype.queryRenderedFeatures=function(J,pe,Se){pe&&pe.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",pe.filter,null,pe);var Ie={};if(pe&&pe.layers){if(!Array.isArray(pe.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Qe=0,dt=pe.layers;Qe<dt.length;Qe+=1){var Ft=dt[Qe],nr=this._layers[Ft];if(!nr)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ft+"' does not exist in the map's style and cannot be queried for features."))),[];Ie[nr.source]=!0}}var dr=[];pe.availableImages=this._availableImages;for(var xr in this.sourceCaches)pe.layers&&!Ie[xr]||dr.push(ie(this.sourceCaches[xr],this._layers,this._serializedLayers,J,pe,Se));return this.placement&&dr.push(se(this._layers,this._serializedLayers,this.sourceCaches,J,pe,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(dr)},W.prototype.querySourceFeatures=function(J,pe){pe&&pe.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",pe.filter,null,pe);var Se=this.sourceCaches[J];return Se?ae(Se,pe):[]},W.prototype.addSourceType=function(J,pe,Se){if(W.getSourceType(J))return Se(new Error('A source type called "'+J+'" already exists.'));if(W.setSourceType(J,pe),!pe.workerSourceURL)return Se(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:pe.workerSourceURL},Se)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(J,pe){pe===void 0&&(pe={}),this._checkLoaded();var Se=this.light.getLight(),Ie=!1;for(var Qe in J)if(!e.deepEqual(J[Qe],Se[Qe])){Ie=!0;break}if(!!Ie){var dt={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,pe),this.light.updateTransitions(dt)}},W.prototype._validate=function(J,pe,Se,Ie,Qe){return Qe===void 0&&(Qe={}),Qe&&Qe.validate===!1?!1:va(this,J.call(e.validateStyle,e.extend({key:pe,style:this.serialize(),value:Se,styleSpec:e.styleSpec},Ie)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var pe=this._layers[J];pe.setEventedParent(null)}for(var Se in this.sourceCaches)this.sourceCaches[Se].clearTiles(),this.sourceCaches[Se].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},W.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},W.prototype._updateSources=function(J){for(var pe in this.sourceCaches)this.sourceCaches[pe].update(J)},W.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},W.prototype._updatePlacement=function(J,pe,Se,Ie,Qe){Qe===void 0&&(Qe=!1);for(var dt=!1,Ft=!1,nr={},dr=0,xr=this._order;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=this._layers[Fr];if(Zr.type==="symbol"){if(!nr[Zr.source]){var Qr=this.sourceCaches[Zr.source];nr[Zr.source]=Qr.getRenderableIds(!0).map(function(ia){return Qr.getTileByID(ia)}).sort(function(ia,na){return na.tileID.overscaledZ-ia.tileID.overscaledZ||(ia.tileID.isLessThan(na.tileID)?-1:1)})}var jr=this.crossTileSymbolIndex.addLayer(Zr,nr[Zr.source],J.center.lng);dt=dt||jr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Qe=Qe||this._layerOrderChanged||Se===0,(Qe||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),J.zoom))&&(this.pauseablePlacement=new sa(J,this._order,Qe,pe,Se,Ie,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,nr),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ft=!0),dt&&this.pauseablePlacement.placement.setStale()),Ft||dt)for(var rn=0,mn=this._order;rn<mn.length;rn+=1){var Fn=mn[rn],Vn=this._layers[Fn];Vn.type==="symbol"&&this.placement.updateLayerOpacities(Vn,nr[Vn.source])}var ta=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return ta},W.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},W.prototype.getImages=function(J,pe,Se){this.imageManager.getImages(pe.icons,Se),this._updateTilesForChangedImages();var Ie=this.sourceCaches[pe.source];Ie&&Ie.setDependencies(pe.tileID.key,pe.type,pe.icons)},W.prototype.getGlyphs=function(J,pe,Se){this.glyphManager.getGlyphs(pe.stacks,Se)},W.prototype.getResource=function(J,pe,Se){return e.makeRequest(pe,Se)},W}(e.Evented);vs.getSourceType=ee,vs.setSourceType=ne,vs.registerForPluginStateChange=e.registerForPluginStateChange;var kl=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ul=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,_u=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,wi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",el=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",No=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Is="void main() {gl_FragColor=vec4(1.0);}",Gi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Cl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Zi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,yo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",uo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",ws="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",vl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Nu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ps="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Bu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",tl=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,sf=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rl=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Vs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,lf=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,pl=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Gs=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ll=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tu="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Uu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",ff=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Au=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Fs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Mu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Vu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uu="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",cf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ds=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Dl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Su=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,zs=Yi(Ul,_u),Uo=Yi(wi,hl),fu=Yi(el,qi),Ys=Yi(No,Hl),Ws=Yi(Is,Gi),bo=Yi(Cl,lo),Gl=Yi(Zi,yo),Yl=Yi(uo,ws),yl=Yi(vl,Nu),Os=Yi(ps,Bu),Wl=Yi(tl,Bo),Rl=Yi(sf,rl),cu=Yi(Vs,iu),jl=Yi(lf,uf),ml=Yi(pl,ou),hf=Yi(Gs,wu),Ts=Yi(Ll,Tu),Cf=Yi(Uu,su),Eu=Yi(ff,dl),Il=Yi(Au,lu),Xl=Yi(Fs,Vl),xl=Yi(Mu,Hu),Zl=Yi(Vu,uu),Yu=Yi(cf,Gu),Wu=Yi(ds,Pl),Lf=Yi(Dl,Su);function Yi(fe,W){var ve=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,J={};return fe=fe.replace(ve,function(pe,Se,Ie,Qe,dt){return J[dt]=!0,Se==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
varying `+Ie+" "+Qe+" "+dt+`;
#else
uniform `+Ie+" "+Qe+" u_"+dt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+Qe+" "+dt+" = u_"+dt+`;
#endif
`}),W=W.replace(ve,function(pe,Se,Ie,Qe,dt){var Ft=Qe==="float"?"vec2":"vec4",nr=dt.match(/color/)?"color":Ft;return J[dt]?Se==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+Ie+" "+Ft+" a_"+dt+`;
varying `+Ie+" "+Qe+" "+dt+`;
#else
uniform `+Ie+" "+Qe+" u_"+dt+`;
#endif
`:nr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = a_"+dt+`;
#else
    `+Ie+" "+Qe+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = unpack_mix_"+nr+"(a_"+dt+", u_"+dt+`_t);
#else
    `+Ie+" "+Qe+" "+dt+" = u_"+dt+`;
#endif
`:Se==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+Ie+" "+Ft+" a_"+dt+`;
#else
uniform `+Ie+" "+Qe+" u_"+dt+`;
#endif
`:nr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+Qe+" "+dt+" = a_"+dt+`;
#else
    `+Ie+" "+Qe+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+Qe+" "+dt+" = unpack_mix_"+nr+"(a_"+dt+", u_"+dt+`_t);
#else
    `+Ie+" "+Qe+" "+dt+" = u_"+dt+`;
#endif
`}),{fragmentSource:fe,vertexSource:W}}var Fl=Object.freeze({__proto__:null,prelude:zs,background:Uo,backgroundPattern:fu,circle:Ys,clippingMask:Ws,heatmap:bo,heatmapTexture:Gl,collisionBox:Yl,collisionCircle:yl,debug:Os,fill:Wl,fillOutline:Rl,fillOutlinePattern:cu,fillPattern:jl,fillExtrusion:ml,fillExtrusionPattern:hf,hillshadePrepare:Ts,hillshade:Cf,line:Eu,lineGradient:Il,linePattern:Xl,lineSDF:xl,raster:Zl,symbolIcon:Yu,symbolSDF:Wu,symbolTextAndIcon:Lf}),bl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bl.prototype.bind=function(W,ve,J,pe,Se,Ie,Qe,dt){this.context=W;for(var Ft=this.boundPaintVertexBuffers.length!==pe.length,nr=0;!Ft&&nr<pe.length;nr++)this.boundPaintVertexBuffers[nr]!==pe[nr]&&(Ft=!0);var dr=!this.vao||this.boundProgram!==ve||this.boundLayoutVertexBuffer!==J||Ft||this.boundIndexBuffer!==Se||this.boundVertexOffset!==Ie||this.boundDynamicVertexBuffer!==Qe||this.boundDynamicVertexBuffer2!==dt;!W.extVertexArrayObject||dr?this.freshBind(ve,J,pe,Se,Ie,Qe,dt):(W.bindVertexArrayOES.set(this.vao),Qe&&Qe.bind(),Se&&Se.dynamicDraw&&Se.bind(),dt&&dt.bind())},bl.prototype.freshBind=function(W,ve,J,pe,Se,Ie,Qe){var dt,Ft=W.numAttributes,nr=this.context,dr=nr.gl;if(nr.extVertexArrayObject)this.vao&&this.destroy(),this.vao=nr.extVertexArrayObject.createVertexArrayOES(),nr.bindVertexArrayOES.set(this.vao),dt=0,this.boundProgram=W,this.boundLayoutVertexBuffer=ve,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=pe,this.boundVertexOffset=Se,this.boundDynamicVertexBuffer=Ie,this.boundDynamicVertexBuffer2=Qe;else{dt=nr.currentNumAttributes||0;for(var xr=Ft;xr<dt;xr++)dr.disableVertexAttribArray(xr)}ve.enableAttributes(dr,W);for(var Fr=0,Zr=J;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];Qr.enableAttributes(dr,W)}Ie&&Ie.enableAttributes(dr,W),Qe&&Qe.enableAttributes(dr,W),ve.bind(),ve.setVertexAttribPointers(dr,W,Se);for(var jr=0,rn=J;jr<rn.length;jr+=1){var mn=rn[jr];mn.bind(),mn.setVertexAttribPointers(dr,W,Se)}Ie&&(Ie.bind(),Ie.setVertexAttribPointers(dr,W,Se)),pe&&pe.bind(),Qe&&(Qe.bind(),Qe.setVertexAttribPointers(dr,W,Se)),nr.currentNumAttributes=Ft},bl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var gs=function(W,ve,J,pe,Se){var Ie=W.gl;this.program=Ie.createProgram();var Qe=J?J.defines():[];Se&&Qe.push("#define OVERDRAW_INSPECTOR;");var dt=Qe.concat(zs.fragmentSource,ve.fragmentSource).join(`
`),Ft=Qe.concat(zs.vertexSource,ve.vertexSource).join(`
`),nr=Ie.createShader(Ie.FRAGMENT_SHADER);if(Ie.isContextLost()){this.failedToCreate=!0;return}Ie.shaderSource(nr,dt),Ie.compileShader(nr),Ie.attachShader(this.program,nr);var dr=Ie.createShader(Ie.VERTEX_SHADER);if(Ie.isContextLost()){this.failedToCreate=!0;return}Ie.shaderSource(dr,Ft),Ie.compileShader(dr),Ie.attachShader(this.program,dr);for(var xr=J?J.layoutAttributes:[],Fr=0;Fr<xr.length;Fr++)Ie.bindAttribLocation(this.program,Fr,xr[Fr].name);Ie.linkProgram(this.program),Ie.deleteShader(dr),Ie.deleteShader(nr),this.numAttributes=Ie.getProgramParameter(this.program,Ie.ACTIVE_ATTRIBUTES),this.attributes={};for(var Zr={},Qr=0;Qr<this.numAttributes;Qr++){var jr=Ie.getActiveAttrib(this.program,Qr);jr&&(this.attributes[jr.name]=Ie.getAttribLocation(this.program,jr.name))}for(var rn=Ie.getProgramParameter(this.program,Ie.ACTIVE_UNIFORMS),mn=0;mn<rn;mn++){var Fn=Ie.getActiveUniform(this.program,mn);Fn&&(Zr[Fn.name]=Ie.getUniformLocation(this.program,Fn.name))}this.fixedUniforms=pe(W,Zr),this.binderUniforms=J?J.getUniforms(W,Zr):[]};gs.prototype.draw=function(W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr,xr,Fr,Zr,Qr,jr){var rn,mn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(J),W.setStencilMode(pe),W.setColorMode(Se),W.setCullFace(Ie);for(var Fn in this.fixedUniforms)this.fixedUniforms[Fn].set(Qe[Fn]);Zr&&Zr.setUniforms(W,this.binderUniforms,xr,{zoom:Fr});for(var Vn=(rn={},rn[mn.LINES]=2,rn[mn.TRIANGLES]=3,rn[mn.LINE_STRIP]=1,rn)[ve],ta=0,ia=dr.get();ta<ia.length;ta+=1){var na=ia[ta],ya=na.vaos||(na.vaos={}),Sa=ya[dt]||(ya[dt]=new bl);Sa.bind(W,this,Ft,Zr?Zr.getPaintVertexBuffers():[],nr,na.vertexOffset,Qr,jr),mn.drawElements(ve,na.primitiveLength*Vn,mn.UNSIGNED_SHORT,na.primitiveOffset*Vn*2)}}};function As(fe,W,ve){var J=1/Ln(ve,1,W.transform.tileZoom),pe=Math.pow(2,ve.tileID.overscaledZ),Se=ve.tileSize*Math.pow(2,W.transform.tileZoom)/pe,Ie=Se*(ve.tileID.canonical.x+ve.tileID.wrap*pe),Qe=Se*ve.tileID.canonical.y;return{u_image:0,u_texsize:ve.imageAtlasTexture.size,u_scale:[J,fe.fromScale,fe.toScale],u_fade:fe.t,u_pixel_coord_upper:[Ie>>16,Qe>>16],u_pixel_coord_lower:[Ie&65535,Qe&65535]}}function Kl(fe,W,ve,J){var pe=ve.imageManager.getPattern(fe.from.toString()),Se=ve.imageManager.getPattern(fe.to.toString()),Ie=ve.imageManager.getPixelSize(),Qe=Ie.width,dt=Ie.height,Ft=Math.pow(2,J.tileID.overscaledZ),nr=J.tileSize*Math.pow(2,ve.transform.tileZoom)/Ft,dr=nr*(J.tileID.canonical.x+J.tileID.wrap*Ft),xr=nr*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:pe.tl,u_pattern_br_a:pe.br,u_pattern_tl_b:Se.tl,u_pattern_br_b:Se.br,u_texsize:[Qe,dt],u_mix:W.t,u_pattern_size_a:pe.displaySize,u_pattern_size_b:Se.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ln(J,1,ve.transform.tileZoom),u_pixel_coord_upper:[dr>>16,xr>>16],u_pixel_coord_lower:[dr&65535,xr&65535]}}var _o=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_lightpos:new e.Uniform3f(fe,W.u_lightpos),u_lightintensity:new e.Uniform1f(fe,W.u_lightintensity),u_lightcolor:new e.Uniform3f(fe,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(fe,W.u_vertical_gradient),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},ju=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_lightpos:new e.Uniform3f(fe,W.u_lightpos),u_lightintensity:new e.Uniform1f(fe,W.u_lightintensity),u_lightcolor:new e.Uniform3f(fe,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(fe,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(fe,W.u_height_factor),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},Ms=function(fe,W,ve,J){var pe=W.style.light,Se=pe.properties.get("position"),Ie=[Se.x,Se.y,Se.z],Qe=e.create$1();pe.properties.get("anchor")==="viewport"&&e.fromRotation(Qe,-W.transform.angle),e.transformMat3(Ie,Ie,Qe);var dt=pe.properties.get("color");return{u_matrix:fe,u_lightpos:Ie,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[dt.r,dt.g,dt.b],u_vertical_gradient:+ve,u_opacity:J}},nl=function(fe,W,ve,J,pe,Se,Ie){return e.extend(Ms(fe,W,ve,J),As(Se,W,Ie),{u_height_factor:-Math.pow(2,pe.overscaledZ)/Ie.tileSize/8})},al=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},js=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Ss=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world)}},eo=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Ho=function(fe){return{u_matrix:fe}},Es=function(fe,W,ve,J){return e.extend(Ho(fe),As(ve,W,J))},Xu=function(fe,W){return{u_matrix:fe,u_world:W}},hu=function(fe,W,ve,J,pe){return e.extend(Es(fe,W,ve,J),{u_world:pe})},Zu=function(fe,W){return{u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(fe,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(fe,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},Tt=function(fe,W,ve,J){var pe=fe.transform,Se,Ie;if(J.paint.get("circle-pitch-alignment")==="map"){var Qe=Ln(ve,1,pe.zoom);Se=!0,Ie=[Qe,Qe]}else Se=!1,Ie=pe.pixelsToGLUnits;return{u_camera_to_center_distance:pe.cameraToCenterDistance,u_scale_with_map:+(J.paint.get("circle-pitch-scale")==="map"),u_matrix:fe.translatePosMatrix(W.posMatrix,ve,J.paint.get("circle-translate"),J.paint.get("circle-translate-anchor")),u_pitch_with_map:+Se,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Ie}},Yt=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(fe,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(fe,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(fe,W.u_overscale_factor)}},yr=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(fe,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(fe,W.u_viewport_size)}},vr=function(fe,W,ve){var J=Ln(ve,1,W.zoom),pe=Math.pow(2,W.zoom-ve.tileID.overscaledZ),Se=ve.tileID.overscaleFactor();return{u_matrix:fe,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:J,u_extrude_scale:[W.pixelsToGLUnits[0]/(J*pe),W.pixelsToGLUnits[1]/(J*pe)],u_overscale_factor:Se}},Nr=function(fe,W,ve){return{u_matrix:fe,u_inv_matrix:W,u_camera_to_center_distance:ve.cameraToCenterDistance,u_viewport_size:[ve.width,ve.height]}},ln=function(fe,W){return{u_color:new e.UniformColor(fe,W.u_color),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_overlay:new e.Uniform1i(fe,W.u_overlay),u_overlay_scale:new e.Uniform1f(fe,W.u_overlay_scale)}},_n=function(fe,W,ve){return ve===void 0&&(ve=1),{u_matrix:fe,u_color:W,u_overlay:0,u_overlay_scale:ve}},Pn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},zn=function(fe){return{u_matrix:fe}},Wn=function(fe,W){return{u_extrude_scale:new e.Uniform1f(fe,W.u_extrude_scale),u_intensity:new e.Uniform1f(fe,W.u_intensity),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},Tn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world),u_image:new e.Uniform1i(fe,W.u_image),u_color_ramp:new e.Uniform1i(fe,W.u_color_ramp),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},Hn=function(fe,W,ve,J){return{u_matrix:fe,u_extrude_scale:Ln(W,1,ve),u_intensity:J}},On=function(fe,W,ve,J){var pe=e.create();e.ortho(pe,0,fe.width,fe.height,0,0,1);var Se=fe.context.gl;return{u_matrix:pe,u_world:[Se.drawingBufferWidth,Se.drawingBufferHeight],u_image:ve,u_color_ramp:J,u_opacity:W.paint.get("heatmap-opacity")}},Xn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_latrange:new e.Uniform2f(fe,W.u_latrange),u_light:new e.Uniform2f(fe,W.u_light),u_shadow:new e.UniformColor(fe,W.u_shadow),u_highlight:new e.UniformColor(fe,W.u_highlight),u_accent:new e.UniformColor(fe,W.u_accent)}},aa=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_dimension:new e.Uniform2f(fe,W.u_dimension),u_zoom:new e.Uniform1f(fe,W.u_zoom),u_maxzoom:new e.Uniform1f(fe,W.u_maxzoom),u_unpack:new e.Uniform4f(fe,W.u_unpack)}},Va=function(fe,W,ve){var J=ve.paint.get("hillshade-shadow-color"),pe=ve.paint.get("hillshade-highlight-color"),Se=ve.paint.get("hillshade-accent-color"),Ie=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ie-=fe.transform.angle);var Qe=!fe.options.moving;return{u_matrix:fe.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Qe),u_image:0,u_latrange:Ga(fe,W.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Ie],u_shadow:J,u_highlight:pe,u_accent:Se}},Ia=function(fe,W,ve){var J=W.stride,pe=e.create();return e.ortho(pe,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(pe,pe,[0,-e.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[J,J],u_zoom:fe.overscaledZ,u_maxzoom:ve,u_unpack:W.getUnpackVector()}};function Ga(fe,W){var ve=Math.pow(2,W.canonical.z),J=W.canonical.y;return[new e.MercatorCoordinate(0,J/ve).toLngLat().lat,new e.MercatorCoordinate(0,(J+1)/ve).toLngLat().lat]}var Ya=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels)}},ra=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_image:new e.Uniform1i(fe,W.u_image)}},ma=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_image:new e.Uniform1i(fe,W.u_image),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Ja=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(fe,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(fe,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(fe,W.u_sdfgamma),u_image:new e.Uniform1i(fe,W.u_image),u_tex_y_a:new e.Uniform1f(fe,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(fe,W.u_tex_y_b),u_mix:new e.Uniform1f(fe,W.u_mix)}},ai=function(fe,W,ve){var J=fe.transform;return{u_matrix:pi(fe,W,ve),u_ratio:1/Ln(W,1,J.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}},Mi=function(fe,W,ve){return e.extend(ai(fe,W,ve),{u_image:0})},Si=function(fe,W,ve,J){var pe=fe.transform,Se=Fi(W,pe);return{u_matrix:pi(fe,W,ve),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Ln(W,1,pe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Se,J.fromScale,J.toScale],u_fade:J.t,u_units_to_pixels:[1/pe.pixelsToGLUnits[0],1/pe.pixelsToGLUnits[1]]}},ki=function(fe,W,ve,J,pe){var Se=fe.transform,Ie=fe.lineAtlas,Qe=Fi(W,Se),dt=ve.layout.get("line-cap")==="round",Ft=Ie.getDash(J.from,dt),nr=Ie.getDash(J.to,dt),dr=Ft.width*pe.fromScale,xr=nr.width*pe.toScale;return e.extend(ai(fe,W,ve),{u_patternscale_a:[Qe/dr,-Ft.height/2],u_patternscale_b:[Qe/xr,-nr.height/2],u_sdfgamma:Ie.width/(Math.min(dr,xr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ft.y,u_tex_y_b:nr.y,u_mix:pe.t})};function Fi(fe,W){return 1/Ln(fe,1,W.tileZoom)}function pi(fe,W,ve){return fe.translatePosMatrix(W.tileID.posMatrix,W,ve.paint.get("line-translate"),ve.paint.get("line-translate-anchor"))}var Lo=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_tl_parent:new e.Uniform2f(fe,W.u_tl_parent),u_scale_parent:new e.Uniform1f(fe,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(fe,W.u_buffer_scale),u_fade_t:new e.Uniform1f(fe,W.u_fade_t),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_image0:new e.Uniform1i(fe,W.u_image0),u_image1:new e.Uniform1i(fe,W.u_image1),u_brightness_low:new e.Uniform1f(fe,W.u_brightness_low),u_brightness_high:new e.Uniform1f(fe,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(fe,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(fe,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(fe,W.u_spin_weights)}},ho=function(fe,W,ve,J,pe){return{u_matrix:fe,u_tl_parent:W,u_scale_parent:ve,u_buffer_scale:1,u_fade_t:J.mix,u_opacity:J.opacity*pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:pe.paint.get("raster-brightness-min"),u_brightness_high:pe.paint.get("raster-brightness-max"),u_saturation_factor:Ci(pe.paint.get("raster-saturation")),u_contrast_factor:xa(pe.paint.get("raster-contrast")),u_spin_weights:ni(pe.paint.get("raster-hue-rotate"))}};function ni(fe){fe*=Math.PI/180;var W=Math.sin(fe),ve=Math.cos(fe);return[(2*ve+1)/3,(-Math.sqrt(3)*W-ve+1)/3,(Math.sqrt(3)*W-ve+1)/3]}function xa(fe){return fe>0?1/(1-fe):1+fe}function Ci(fe){return fe>0?1-1/(1.001-fe):-fe}var wo=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texture:new e.Uniform1i(fe,W.u_texture)}},Eo=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texture:new e.Uniform1i(fe,W.u_texture),u_gamma_scale:new e.Uniform1f(fe,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(fe,W.u_is_halo)}},ks=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texsize_icon:new e.Uniform2f(fe,W.u_texsize_icon),u_texture:new e.Uniform1i(fe,W.u_texture),u_texture_icon:new e.Uniform1i(fe,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(fe,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(fe,W.u_is_halo)}},Xs=function(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft){var nr=pe.transform;return{u_is_size_zoom_constant:+(fe==="constant"||fe==="source"),u_is_size_feature_constant:+(fe==="constant"||fe==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:nr.cameraToCenterDistance,u_pitch:nr.pitch/360*2*Math.PI,u_rotate_symbol:+ve,u_aspect_ratio:nr.width/nr.height,u_fade_change:pe.options.fadeDuration?pe.symbolFadeChange:1,u_matrix:Se,u_label_plane_matrix:Ie,u_coord_matrix:Qe,u_is_text:+dt,u_pitch_with_map:+J,u_texsize:Ft,u_texture:0}},Qo=function(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr){var dr=pe.transform;return e.extend(Xs(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft),{u_gamma_scale:J?Math.cos(dr._pitch)*dr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nr})},_l=function(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft){return e.extend(Qo(fe,W,ve,J,pe,Se,Ie,Qe,!0,dt,!0),{u_texsize_icon:Ft,u_texture_icon:1})},Ns=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_color:new e.UniformColor(fe,W.u_color)}},Cs=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_image:new e.Uniform1i(fe,W.u_image),u_pattern_tl_a:new e.Uniform2f(fe,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(fe,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(fe,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(fe,W.u_pattern_br_b),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_mix:new e.Uniform1f(fe,W.u_mix),u_pattern_size_a:new e.Uniform2f(fe,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(fe,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(fe,W.u_scale_a),u_scale_b:new e.Uniform1f(fe,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(fe,W.u_tile_units_to_pixels)}},Po=function(fe,W,ve){return{u_matrix:fe,u_opacity:W,u_color:ve}},vu=function(fe,W,ve,J,pe,Se){return e.extend(Kl(J,Se,ve,pe),{u_matrix:fe,u_opacity:W})},ku={fillExtrusion:_o,fillExtrusionPattern:ju,fill:al,fillPattern:js,fillOutline:Ss,fillOutlinePattern:eo,circle:Zu,collisionBox:Yt,collisionCircle:yr,debug:ln,clippingMask:Pn,heatmap:Wn,heatmapTexture:Tn,hillshade:Xn,hillshadePrepare:aa,line:Ya,lineGradient:ra,linePattern:ma,lineSDF:Ja,raster:Lo,symbolIcon:wo,symbolSDF:Eo,symbolTextAndIcon:ks,background:Ns,backgroundPattern:Cs},Ls;function Ku(fe,W,ve,J,pe,Se,Ie){for(var Qe=fe.context,dt=Qe.gl,Ft=fe.useProgram("collisionBox"),nr=[],dr=0,xr=0,Fr=0;Fr<J.length;Fr++){var Zr=J[Fr],Qr=W.getTile(Zr),jr=Qr.getBucket(ve);if(!!jr){var rn=Zr.posMatrix;(pe[0]!==0||pe[1]!==0)&&(rn=fe.translatePosMatrix(Zr.posMatrix,Qr,pe,Se));var mn=Ie?jr.textCollisionBox:jr.iconCollisionBox,Fn=jr.collisionCircleArray;if(Fn.length>0){var Vn=e.create(),ta=rn;e.mul(Vn,jr.placementInvProjMatrix,fe.transform.glCoordMatrix),e.mul(Vn,Vn,jr.placementViewportMatrix),nr.push({circleArray:Fn,circleOffset:xr,transform:ta,invTransform:Vn}),dr+=Fn.length/4,xr=dr}!mn||Ft.draw(Qe,dt.LINES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),Ct.disabled,vr(rn,fe.transform,Qr),ve.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,null,fe.transform.zoom,null,null,mn.collisionVertexBuffer)}}if(!(!Ie||!nr.length)){var ia=fe.useProgram("collisionCircle"),na=new e.StructArrayLayout2f1f2i16;na.resize(dr*4),na._trim();for(var ya=0,Sa=0,Ta=nr;Sa<Ta.length;Sa+=1)for(var Ca=Ta[Sa],Fa=0;Fa<Ca.circleArray.length/4;Fa++){var Za=Fa*4,ci=Ca.circleArray[Za+0],Hi=Ca.circleArray[Za+1],yi=Ca.circleArray[Za+2],Ti=Ca.circleArray[Za+3];na.emplace(ya++,ci,Hi,yi,Ti,0),na.emplace(ya++,ci,Hi,yi,Ti,1),na.emplace(ya++,ci,Hi,yi,Ti,2),na.emplace(ya++,ci,Hi,yi,Ti,3)}(!Ls||Ls.length<dr*2)&&(Ls=pu(dr));for(var Wa=Qe.createIndexBuffer(Ls,!0),Vi=Qe.createVertexBuffer(na,e.collisionCircleLayout.members,!0),Xi=0,$i=nr;Xi<$i.length;Xi+=1){var Pi=$i[Xi],so=Nr(Pi.transform,Pi.invTransform,fe.transform);ia.draw(Qe,dt.TRIANGLES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),Ct.disabled,so,ve.id,Vi,Wa,e.SegmentVector.simpleSegment(0,Pi.circleOffset*2,Pi.circleArray.length,Pi.circleArray.length/2),null,fe.transform.zoom,null,null,null)}Vi.destroy(),Wa.destroy()}}function pu(fe){var W=fe*2,ve=new e.StructArrayLayout3ui6;ve.resize(W),ve._trim();for(var J=0;J<W;J++){var pe=J*6;ve.uint16[pe+0]=J*4+0,ve.uint16[pe+1]=J*4+1,ve.uint16[pe+2]=J*4+2,ve.uint16[pe+3]=J*4+2,ve.uint16[pe+4]=J*4+3,ve.uint16[pe+5]=J*4+0}return ve}var uc=e.identity(new Float32Array(16));function vf(fe,W,ve,J,pe){if(fe.renderPass==="translucent"){var Se=rr.disabled,Ie=fe.colorModeForRenderPass(),Qe=ve.layout.get("text-variable-anchor");Qe&&pf(J,fe,ve,W,ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),pe),ve.paint.get("icon-opacity").constantOr(1)!==0&&df(fe,W,ve,J,!1,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),ve.layout.get("icon-rotation-alignment"),ve.layout.get("icon-pitch-alignment"),ve.layout.get("icon-keep-upright"),Se,Ie),ve.paint.get("text-opacity").constantOr(1)!==0&&df(fe,W,ve,J,!0,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.layout.get("text-keep-upright"),Se,Ie),W.map.showCollisionBoxes&&(Ku(fe,W,ve,J,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),!0),Ku(fe,W,ve,J,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),!1))}}function Ju(fe,W,ve,J,pe,Se){var Ie=e.getAnchorAlignment(fe),Qe=Ie.horizontalAlign,dt=Ie.verticalAlign,Ft=-(Qe-.5)*W,nr=-(dt-.5)*ve,dr=e.evaluateVariableOffset(fe,J);return new e.Point((Ft/pe+dr[0])*Se,(nr/pe+dr[1])*Se)}function pf(fe,W,ve,J,pe,Se,Ie){for(var Qe=W.transform,dt=pe==="map",Ft=Se==="map",nr=0,dr=fe;nr<dr.length;nr+=1){var xr=dr[nr],Fr=J.getTile(xr),Zr=Fr.getBucket(ve);if(!(!Zr||!Zr.text||!Zr.text.segments.get().length)){var Qr=Zr.textSizeData,jr=e.evaluateSizeForZoom(Qr,Qe.zoom),rn=Ln(Fr,1,W.transform.zoom),mn=Kr(xr.posMatrix,Ft,dt,W.transform,rn),Fn=ve.layout.get("icon-text-fit")!=="none"&&Zr.hasIconData();if(jr){var Vn=Math.pow(2,Qe.zoom-Fr.tileID.overscaledZ);Zs(Zr,dt,Ft,Ie,e.symbolSize,Qe,mn,xr.posMatrix,Vn,jr,Fn)}}}}function Zs(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr){var dr=fe.text.placedSymbolArray,xr=fe.text.dynamicLayoutVertexArray,Fr=fe.icon.dynamicLayoutVertexArray,Zr={};xr.clear();for(var Qr=0;Qr<dr.length;Qr++){var jr=dr.get(Qr),rn=fe.allowVerticalPlacement&&!jr.placedOrientation,mn=!jr.hidden&&jr.crossTileID&&!rn?J[jr.crossTileID]:null;if(!mn)$a(jr.numGlyphs,xr);else{var Fn=new e.Point(jr.anchorX,jr.anchorY),Vn=yn(Fn,ve?Qe:Ie),ta=Yn(Se.cameraToCenterDistance,Vn.signedDistanceFromCamera),ia=pe.evaluateSizeForFeature(fe.textSizeData,Ft,jr)*ta/e.ONE_EM;ve&&(ia*=fe.tilePixelRatio/dt);for(var na=mn.width,ya=mn.height,Sa=mn.anchor,Ta=mn.textOffset,Ca=mn.textBoxScale,Fa=Ju(Sa,na,ya,Ta,Ca,ia),Za=ve?yn(Fn.add(Fa),Ie).point:Vn.point.add(W?Fa.rotate(-Se.angle):Fa),ci=fe.allowVerticalPlacement&&jr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Hi=0;Hi<jr.numGlyphs;Hi++)e.addDynamicAttributes(xr,Za,ci);nr&&jr.associatedIconIndex>=0&&(Zr[jr.associatedIconIndex]={shiftedAnchor:Za,angle:ci})}}if(nr){Fr.clear();for(var yi=fe.icon.placedSymbolArray,Ti=0;Ti<yi.length;Ti++){var Wa=yi.get(Ti);if(Wa.hidden)$a(Wa.numGlyphs,Fr);else{var Vi=Zr[Ti];if(!Vi)$a(Wa.numGlyphs,Fr);else for(var Xi=0;Xi<Wa.numGlyphs;Xi++)e.addDynamicAttributes(Fr,Vi.shiftedAnchor,Vi.angle)}}fe.icon.dynamicLayoutVertexBuffer.updateData(Fr)}fe.text.dynamicLayoutVertexBuffer.updateData(xr)}function Pf(fe,W,ve){return ve.iconsInText&&W?"symbolTextAndIcon":fe?"symbolSDF":"symbolIcon"}function df(fe,W,ve,J,pe,Se,Ie,Qe,dt,Ft,nr,dr){for(var xr=fe.context,Fr=xr.gl,Zr=fe.transform,Qr=Qe==="map",jr=dt==="map",rn=Qr&&ve.layout.get("symbol-placement")!=="point",mn=Qr&&!jr&&!rn,Fn=ve.layout.get("symbol-sort-key").constantOr(1)!==void 0,Vn=fe.depthModeForSublayer(0,en.ReadOnly),ta=ve.layout.get("text-variable-anchor"),ia=[],na=0,ya=J;na<ya.length;na+=1){var Sa=ya[na],Ta=W.getTile(Sa),Ca=Ta.getBucket(ve);if(!!Ca){var Fa=pe?Ca.text:Ca.icon;if(!(!Fa||!Fa.segments.get().length)){var Za=Fa.programConfigurations.get(ve.id),ci=pe||Ca.sdfIcons,Hi=pe?Ca.textSizeData:Ca.iconSizeData,yi=jr||Zr.pitch!==0,Ti=fe.useProgram(Pf(ci,pe,Ca),Za),Wa=e.evaluateSizeForZoom(Hi,Zr.zoom),Vi=void 0,Xi=[0,0],$i=void 0,Pi=void 0,so=null,vi=void 0;if(pe){if($i=Ta.glyphAtlasTexture,Pi=Fr.LINEAR,Vi=Ta.glyphAtlasTexture.size,Ca.iconsInText){Xi=Ta.imageAtlasTexture.size,so=Ta.imageAtlasTexture;var Ri=Hi.kind==="composite"||Hi.kind==="camera";vi=yi||fe.options.rotating||fe.options.zooming||Ri?Fr.LINEAR:Fr.NEAREST}}else{var Fo=ve.layout.get("icon-size").constantOr(0)!==1||Ca.iconsNeedLinear;$i=Ta.imageAtlasTexture,Pi=ci||fe.options.rotating||fe.options.zooming||Fo||yi?Fr.LINEAR:Fr.NEAREST,Vi=Ta.imageAtlasTexture.size}var es=Ln(Ta,1,fe.transform.zoom),Ql=Kr(Sa.posMatrix,jr,Qr,fe.transform,es),$l=kn(Sa.posMatrix,jr,Qr,fe.transform,es),Cu=ta&&Ca.hasTextData(),Lu=ve.layout.get("icon-text-fit")!=="none"&&Cu&&Ca.hasIconData();rn&&Jn(Ca,Sa.posMatrix,fe,pe,Ql,$l,jr,Ft);var tf=fe.translatePosMatrix(Sa.posMatrix,Ta,Se,Ie),Pu=rn||pe&&ta||Lu?uc:Ql,ol=fe.translatePosMatrix($l,Ta,Se,Ie,!0),Af=ci&&ve.paint.get(pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Hs=void 0;ci?Ca.iconsInText?Hs=_l(Hi.kind,Wa,mn,jr,fe,tf,Pu,ol,Vi,Xi):Hs=Qo(Hi.kind,Wa,mn,jr,fe,tf,Pu,ol,pe,Vi,!0):Hs=Xs(Hi.kind,Wa,mn,jr,fe,tf,Pu,ol,pe,Vi);var zl={program:Ti,buffers:Fa,uniformValues:Hs,atlasTexture:$i,atlasTextureIcon:so,atlasInterpolation:Pi,atlasInterpolationIcon:vi,isSDF:ci,hasHalo:Af};if(Fn)for(var Du=Fa.segments.get(),yu=0,Ru=Du;yu<Ru.length;yu+=1){var Cc=Ru[yu];ia.push({segments:new e.SegmentVector([Cc]),sortKey:Cc.sortKey,state:zl})}else ia.push({segments:Fa.segments,sortKey:0,state:zl})}}}Fn&&ia.sort(function(Lc,Pc){return Lc.sortKey-Pc.sortKey});for(var Df=0,Ds=ia;Df<Ds.length;Df+=1){var pc=Ds[Df],Ks=pc.state;if(xr.activeTexture.set(Fr.TEXTURE0),Ks.atlasTexture.bind(Ks.atlasInterpolation,Fr.CLAMP_TO_EDGE),Ks.atlasTextureIcon&&(xr.activeTexture.set(Fr.TEXTURE1),Ks.atlasTextureIcon&&Ks.atlasTextureIcon.bind(Ks.atlasInterpolationIcon,Fr.CLAMP_TO_EDGE)),Ks.isSDF){var dc=Ks.uniformValues;Ks.hasHalo&&(dc.u_is_halo=1,gf(Ks.buffers,pc.segments,ve,fe,Ks.program,Vn,nr,dr,dc)),dc.u_is_halo=0}gf(Ks.buffers,pc.segments,ve,fe,Ks.program,Vn,nr,dr,Ks.uniformValues)}}function gf(fe,W,ve,J,pe,Se,Ie,Qe,dt){var Ft=J.context,nr=Ft.gl;pe.draw(Ft,nr.TRIANGLES,Se,Ie,Qe,Ct.disabled,dt,ve.id,fe.layoutVertexBuffer,fe.indexBuffer,W,ve.paint,J.transform.zoom,fe.programConfigurations.get(ve.id),fe.dynamicLayoutVertexBuffer,fe.opacityVertexBuffer)}function $o(fe,W,ve,J){if(fe.renderPass==="translucent"){var pe=ve.paint.get("circle-opacity"),Se=ve.paint.get("circle-stroke-width"),Ie=ve.paint.get("circle-stroke-opacity"),Qe=ve.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(pe.constantOr(1)===0&&(Se.constantOr(1)===0||Ie.constantOr(1)===0))){for(var dt=fe.context,Ft=dt.gl,nr=fe.depthModeForSublayer(0,en.ReadOnly),dr=rr.disabled,xr=fe.colorModeForRenderPass(),Fr=[],Zr=0;Zr<J.length;Zr++){var Qr=J[Zr],jr=W.getTile(Qr),rn=jr.getBucket(ve);if(!!rn){var mn=rn.programConfigurations.get(ve.id),Fn=fe.useProgram("circle",mn),Vn=rn.layoutVertexBuffer,ta=rn.indexBuffer,ia=Tt(fe,Qr,jr,ve),na={programConfiguration:mn,program:Fn,layoutVertexBuffer:Vn,indexBuffer:ta,uniformValues:ia};if(Qe)for(var ya=rn.segments.get(),Sa=0,Ta=ya;Sa<Ta.length;Sa+=1){var Ca=Ta[Sa];Fr.push({segments:new e.SegmentVector([Ca]),sortKey:Ca.sortKey,state:na})}else Fr.push({segments:rn.segments,sortKey:0,state:na})}}Qe&&Fr.sort(function(Pi,so){return Pi.sortKey-so.sortKey});for(var Fa=0,Za=Fr;Fa<Za.length;Fa+=1){var ci=Za[Fa],Hi=ci.state,yi=Hi.programConfiguration,Ti=Hi.program,Wa=Hi.layoutVertexBuffer,Vi=Hi.indexBuffer,Xi=Hi.uniformValues,$i=ci.segments;Ti.draw(dt,Ft.TRIANGLES,nr,dr,xr,Ct.disabled,Xi,ve.id,Wa,Vi,$i,ve.paint,fe.transform.zoom,yi)}}}}function yf(fe,W,ve,J){if(ve.paint.get("heatmap-opacity")!==0)if(fe.renderPass==="offscreen"){var pe=fe.context,Se=pe.gl,Ie=rr.disabled,Qe=new et([Se.ONE,Se.ONE],e.Color.transparent,[!0,!0,!0,!0]);Yf(pe,fe,ve),pe.clear({color:e.Color.transparent});for(var dt=0;dt<J.length;dt++){var Ft=J[dt];if(!W.hasRenderableParent(Ft)){var nr=W.getTile(Ft),dr=nr.getBucket(ve);if(!!dr){var xr=dr.programConfigurations.get(ve.id),Fr=fe.useProgram("heatmap",xr),Zr=fe.transform,Qr=Zr.zoom;Fr.draw(pe,Se.TRIANGLES,en.disabled,Ie,Qe,Ct.disabled,Hn(Ft.posMatrix,nr,Qr,ve.paint.get("heatmap-intensity")),ve.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,ve.paint,fe.transform.zoom,xr)}}}pe.viewport.set([0,0,fe.width,fe.height])}else fe.renderPass==="translucent"&&(fe.context.setColorMode(fe.colorModeForRenderPass()),Qu(fe,ve))}function Yf(fe,W,ve){var J=fe.gl;fe.activeTexture.set(J.TEXTURE1),fe.viewport.set([0,0,W.width/4,W.height/4]);var pe=ve.heatmapFbo;if(pe)J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),fe.bindFramebuffer.set(pe.framebuffer);else{var Se=J.createTexture();J.bindTexture(J.TEXTURE_2D,Se),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),pe=ve.heatmapFbo=fe.createFramebuffer(W.width/4,W.height/4,!1),Bs(fe,W,Se,pe)}}function Bs(fe,W,ve,J){var pe=fe.gl,Se=fe.extRenderToTextureHalfFloat?fe.extTextureHalfFloat.HALF_FLOAT_OES:pe.UNSIGNED_BYTE;pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,W.width/4,W.height/4,0,pe.RGBA,Se,null),J.colorAttachment.set(ve)}function Qu(fe,W){var ve=fe.context,J=ve.gl,pe=W.heatmapFbo;if(!!pe){ve.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),ve.activeTexture.set(J.TEXTURE1);var Se=W.colorRampTexture;Se||(Se=W.colorRampTexture=new e.Texture(ve,W.colorRamp,J.RGBA)),Se.bind(J.LINEAR,J.CLAMP_TO_EDGE),fe.useProgram("heatmapTexture").draw(ve,J.TRIANGLES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),Ct.disabled,On(fe,W,0,1),W.id,fe.viewportBuffer,fe.quadTriangleIndexBuffer,fe.viewportSegments,W.paint,fe.transform.zoom)}}function $u(fe,W,ve,J){if(fe.renderPass==="translucent"){var pe=ve.paint.get("line-opacity"),Se=ve.paint.get("line-width");if(!(pe.constantOr(1)===0||Se.constantOr(1)===0)){var Ie=fe.depthModeForSublayer(0,en.ReadOnly),Qe=fe.colorModeForRenderPass(),dt=ve.paint.get("line-dasharray"),Ft=ve.paint.get("line-pattern"),nr=Ft.constantOr(1),dr=ve.paint.get("line-gradient"),xr=ve.getCrossfadeParameters(),Fr=nr?"linePattern":dt?"lineSDF":dr?"lineGradient":"line",Zr=fe.context,Qr=Zr.gl,jr=!0;if(dr){Zr.activeTexture.set(Qr.TEXTURE0);var rn=ve.gradientTexture;if(!ve.gradient)return;rn||(rn=ve.gradientTexture=new e.Texture(Zr,ve.gradient,Qr.RGBA)),rn.bind(Qr.LINEAR,Qr.CLAMP_TO_EDGE)}for(var mn=0,Fn=J;mn<Fn.length;mn+=1){var Vn=Fn[mn],ta=W.getTile(Vn);if(!(nr&&!ta.patternsLoaded())){var ia=ta.getBucket(ve);if(!!ia){var na=ia.programConfigurations.get(ve.id),ya=fe.context.program.get(),Sa=fe.useProgram(Fr,na),Ta=jr||Sa.program!==ya,Ca=Ft.constantOr(null);if(Ca&&ta.imageAtlas){var Fa=ta.imageAtlas,Za=Fa.patternPositions[Ca.to.toString()],ci=Fa.patternPositions[Ca.from.toString()];Za&&ci&&na.setConstantPatternPositions(Za,ci)}var Hi=nr?Si(fe,ta,ve,xr):dt?ki(fe,ta,ve,dt,xr):dr?Mi(fe,ta,ve):ai(fe,ta,ve);nr?(Zr.activeTexture.set(Qr.TEXTURE0),ta.imageAtlasTexture.bind(Qr.LINEAR,Qr.CLAMP_TO_EDGE),na.updatePaintBuffers(xr)):dt&&(Ta||fe.lineAtlas.dirty)&&(Zr.activeTexture.set(Qr.TEXTURE0),fe.lineAtlas.bind(Zr)),Sa.draw(Zr,Qr.TRIANGLES,Ie,fe.stencilModeForClipping(Vn),Qe,Ct.disabled,Hi,ve.id,ia.layoutVertexBuffer,ia.indexBuffer,ia.segments,ve.paint,fe.transform.zoom,na),jr=!1}}}}}}function mf(fe,W,ve,J){var pe=ve.paint.get("fill-color"),Se=ve.paint.get("fill-opacity");if(Se.constantOr(1)!==0){var Ie=fe.colorModeForRenderPass(),Qe=ve.paint.get("fill-pattern"),dt=fe.opaquePassEnabledForLayer()&&!Qe.constantOr(1)&&pe.constantOr(e.Color.transparent).a===1&&Se.constantOr(0)===1?"opaque":"translucent";if(fe.renderPass===dt){var Ft=fe.depthModeForSublayer(1,fe.renderPass==="opaque"?en.ReadWrite:en.ReadOnly);ze(fe,W,ve,J,Ft,Ie,!1)}if(fe.renderPass==="translucent"&&ve.paint.get("fill-antialias")){var nr=fe.depthModeForSublayer(ve.getPaintProperty("fill-outline-color")?2:0,en.ReadOnly);ze(fe,W,ve,J,nr,Ie,!0)}}}function ze(fe,W,ve,J,pe,Se,Ie){var Qe=fe.context.gl,dt=ve.paint.get("fill-pattern"),Ft=dt&&dt.constantOr(1),nr=ve.getCrossfadeParameters(),dr,xr,Fr,Zr,Qr;Ie?(xr=Ft&&!ve.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dr=Qe.LINES):(xr=Ft?"fillPattern":"fill",dr=Qe.TRIANGLES);for(var jr=0,rn=J;jr<rn.length;jr+=1){var mn=rn[jr],Fn=W.getTile(mn);if(!(Ft&&!Fn.patternsLoaded())){var Vn=Fn.getBucket(ve);if(!!Vn){var ta=Vn.programConfigurations.get(ve.id),ia=fe.useProgram(xr,ta);Ft&&(fe.context.activeTexture.set(Qe.TEXTURE0),Fn.imageAtlasTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),ta.updatePaintBuffers(nr));var na=dt.constantOr(null);if(na&&Fn.imageAtlas){var ya=Fn.imageAtlas,Sa=ya.patternPositions[na.to.toString()],Ta=ya.patternPositions[na.from.toString()];Sa&&Ta&&ta.setConstantPatternPositions(Sa,Ta)}var Ca=fe.translatePosMatrix(mn.posMatrix,Fn,ve.paint.get("fill-translate"),ve.paint.get("fill-translate-anchor"));if(!Ie)Zr=Vn.indexBuffer,Qr=Vn.segments,Fr=Ft?Es(Ca,fe,nr,Fn):Ho(Ca);else{Zr=Vn.indexBuffer2,Qr=Vn.segments2;var Fa=[Qe.drawingBufferWidth,Qe.drawingBufferHeight];Fr=xr==="fillOutlinePattern"&&Ft?hu(Ca,fe,nr,Fn,Fa):Xu(Ca,Fa)}ia.draw(fe.context,dr,pe,fe.stencilModeForClipping(mn),Se,Ct.disabled,Fr,ve.id,Vn.layoutVertexBuffer,Zr,Qr,ve.paint,fe.transform.zoom,ta)}}}}function je(fe,W,ve,J){var pe=ve.paint.get("fill-extrusion-opacity");if(pe!==0&&fe.renderPass==="translucent"){var Se=new en(fe.context.gl.LEQUAL,en.ReadWrite,fe.depthRangeFor3D);if(pe===1&&!ve.paint.get("fill-extrusion-pattern").constantOr(1)){var Ie=fe.colorModeForRenderPass();nt(fe,W,ve,J,Se,rr.disabled,Ie)}else nt(fe,W,ve,J,Se,rr.disabled,et.disabled),nt(fe,W,ve,J,Se,fe.stencilModeFor3D(),fe.colorModeForRenderPass())}}function nt(fe,W,ve,J,pe,Se,Ie){for(var Qe=fe.context,dt=Qe.gl,Ft=ve.paint.get("fill-extrusion-pattern"),nr=Ft.constantOr(1),dr=ve.getCrossfadeParameters(),xr=ve.paint.get("fill-extrusion-opacity"),Fr=0,Zr=J;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr],jr=W.getTile(Qr),rn=jr.getBucket(ve);if(!!rn){var mn=rn.programConfigurations.get(ve.id),Fn=fe.useProgram(nr?"fillExtrusionPattern":"fillExtrusion",mn);nr&&(fe.context.activeTexture.set(dt.TEXTURE0),jr.imageAtlasTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),mn.updatePaintBuffers(dr));var Vn=Ft.constantOr(null);if(Vn&&jr.imageAtlas){var ta=jr.imageAtlas,ia=ta.patternPositions[Vn.to.toString()],na=ta.patternPositions[Vn.from.toString()];ia&&na&&mn.setConstantPatternPositions(ia,na)}var ya=fe.translatePosMatrix(Qr.posMatrix,jr,ve.paint.get("fill-extrusion-translate"),ve.paint.get("fill-extrusion-translate-anchor")),Sa=ve.paint.get("fill-extrusion-vertical-gradient"),Ta=nr?nl(ya,fe,Sa,xr,Qr,dr,jr):Ms(ya,fe,Sa,xr);Fn.draw(Qe,Qe.gl.TRIANGLES,pe,Se,Ie,Ct.backCCW,Ta,ve.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,ve.paint,fe.transform.zoom,mn)}}}function ht(fe,W,ve,J){if(!(fe.renderPass!=="offscreen"&&fe.renderPass!=="translucent")){for(var pe=fe.context,Se=W.getSource().maxzoom,Ie=fe.depthModeForSublayer(0,en.ReadOnly),Qe=fe.colorModeForRenderPass(),dt=fe.renderPass==="translucent"?fe.stencilConfigForOverlap(J):[{},J],Ft=dt[0],nr=dt[1],dr=0,xr=nr;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=W.getTile(Fr);Zr.needsHillshadePrepare&&fe.renderPass==="offscreen"?At(fe,Zr,ve,Se,Ie,rr.disabled,Qe):fe.renderPass==="translucent"&&Et(fe,Zr,ve,Ie,Ft[Fr.overscaledZ],Qe)}pe.viewport.set([0,0,fe.width,fe.height])}}function Et(fe,W,ve,J,pe,Se){var Ie=fe.context,Qe=Ie.gl,dt=W.fbo;if(!!dt){var Ft=fe.useProgram("hillshade");Ie.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,dt.colorAttachment.get());var nr=Va(fe,W,ve);Ft.draw(Ie,Qe.TRIANGLES,J,pe,Se,Ct.disabled,nr,ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function At(fe,W,ve,J,pe,Se,Ie){var Qe=fe.context,dt=Qe.gl,Ft=W.dem;if(Ft&&Ft.data){var nr=Ft.dim,dr=Ft.stride,xr=Ft.getPixels();if(Qe.activeTexture.set(dt.TEXTURE1),Qe.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||fe.getTileTexture(dr),W.demTexture){var Fr=W.demTexture;Fr.update(xr,{premultiply:!1}),Fr.bind(dt.NEAREST,dt.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture(Qe,xr,dt.RGBA,{premultiply:!1}),W.demTexture.bind(dt.NEAREST,dt.CLAMP_TO_EDGE);Qe.activeTexture.set(dt.TEXTURE0);var Zr=W.fbo;if(!Zr){var Qr=new e.Texture(Qe,{width:nr,height:nr,data:null},dt.RGBA);Qr.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),Zr=W.fbo=Qe.createFramebuffer(nr,nr,!0),Zr.colorAttachment.set(Qr.texture)}Qe.bindFramebuffer.set(Zr.framebuffer),Qe.viewport.set([0,0,nr,nr]),fe.useProgram("hillshadePrepare").draw(Qe,dt.TRIANGLES,pe,Se,Ie,Ct.disabled,Ia(W.tileID,Ft,J),ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function It(fe,W,ve,J){if(fe.renderPass==="translucent"&&ve.paint.get("raster-opacity")!==0&&!!J.length)for(var pe=fe.context,Se=pe.gl,Ie=W.getSource(),Qe=fe.useProgram("raster"),dt=fe.colorModeForRenderPass(),Ft=Ie instanceof re?[{},J]:fe.stencilConfigForOverlap(J),nr=Ft[0],dr=Ft[1],xr=dr[dr.length-1].overscaledZ,Fr=!fe.options.moving,Zr=0,Qr=dr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=fe.depthModeForSublayer(jr.overscaledZ-xr,ve.paint.get("raster-opacity")===1?en.ReadWrite:en.ReadOnly,Se.LESS),mn=W.getTile(jr),Fn=fe.transform.calculatePosMatrix(jr.toUnwrapped(),Fr);mn.registerFadeDuration(ve.paint.get("raster-fade-duration"));var Vn=W.findLoadedParent(jr,0),ta=gr(mn,Vn,W,ve,fe.transform),ia=void 0,na=void 0,ya=ve.paint.get("raster-resampling")==="nearest"?Se.NEAREST:Se.LINEAR;pe.activeTexture.set(Se.TEXTURE0),mn.texture.bind(ya,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST),pe.activeTexture.set(Se.TEXTURE1),Vn?(Vn.texture.bind(ya,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST),ia=Math.pow(2,Vn.tileID.overscaledZ-mn.tileID.overscaledZ),na=[mn.tileID.canonical.x*ia%1,mn.tileID.canonical.y*ia%1]):mn.texture.bind(ya,Se.CLAMP_TO_EDGE,Se.LINEAR_MIPMAP_NEAREST);var Sa=ho(Fn,na||[0,0],ia||1,ta,ve);Ie instanceof re?Qe.draw(pe,Se.TRIANGLES,rn,rr.disabled,dt,Ct.disabled,Sa,ve.id,Ie.boundsBuffer,fe.quadTriangleIndexBuffer,Ie.boundsSegments):Qe.draw(pe,Se.TRIANGLES,rn,nr[jr.overscaledZ],dt,Ct.disabled,Sa,ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function gr(fe,W,ve,J,pe){var Se=J.paint.get("raster-fade-duration");if(Se>0){var Ie=e.browser.now(),Qe=(Ie-fe.timeAdded)/Se,dt=W?(Ie-W.timeAdded)/Se:-1,Ft=ve.getSource(),nr=pe.coveringZoomLevel({tileSize:Ft.tileSize,roundZoom:Ft.roundZoom}),dr=!W||Math.abs(W.tileID.overscaledZ-nr)>Math.abs(fe.tileID.overscaledZ-nr),xr=dr&&fe.refreshedUponExpiration?1:e.clamp(dr?Qe:1-dt,0,1);return fe.refreshedUponExpiration&&Qe>=1&&(fe.refreshedUponExpiration=!1),W?{opacity:1,mix:1-xr}:{opacity:xr,mix:0}}else return{opacity:1,mix:0}}function br(fe,W,ve){var J=ve.paint.get("background-color"),pe=ve.paint.get("background-opacity");if(pe!==0){var Se=fe.context,Ie=Se.gl,Qe=fe.transform,dt=Qe.tileSize,Ft=ve.paint.get("background-pattern");if(!fe.isPatternMissing(Ft)){var nr=!Ft&&J.a===1&&pe===1&&fe.opaquePassEnabledForLayer()?"opaque":"translucent";if(fe.renderPass===nr){var dr=rr.disabled,xr=fe.depthModeForSublayer(0,nr==="opaque"?en.ReadWrite:en.ReadOnly),Fr=fe.colorModeForRenderPass(),Zr=fe.useProgram(Ft?"backgroundPattern":"background"),Qr=Qe.coveringTiles({tileSize:dt});Ft&&(Se.activeTexture.set(Ie.TEXTURE0),fe.imageManager.bind(fe.context));for(var jr=ve.getCrossfadeParameters(),rn=0,mn=Qr;rn<mn.length;rn+=1){var Fn=mn[rn],Vn=fe.transform.calculatePosMatrix(Fn.toUnwrapped()),ta=Ft?vu(Vn,pe,fe,Ft,{tileID:Fn,tileSize:dt},jr):Po(Vn,pe,J);Zr.draw(Se,Ie.TRIANGLES,xr,dr,Fr,Ct.disabled,ta,ve.id,fe.tileExtentBuffer,fe.quadTriangleIndexBuffer,fe.tileExtentSegments)}}}}}var pr=new e.Color(1,0,0,1),Mr=new e.Color(0,1,0,1),Or=new e.Color(0,0,1,1),$r=new e.Color(1,0,1,1),on=new e.Color(0,1,1,1);function Sn(fe){var W=fe.transform.padding,ve=3;Qn(fe,fe.transform.height-(W.top||0),ve,pr),Qn(fe,W.bottom||0,ve,Mr),wa(fe,W.left||0,ve,Or),wa(fe,fe.transform.width-(W.right||0),ve,$r);var J=fe.transform.centerPoint;Nn(fe,J.x,fe.transform.height-J.y,on)}function Nn(fe,W,ve,J){var pe=20,Se=2;Ma(fe,W-Se/2,ve-pe/2,Se,pe,J),Ma(fe,W-pe/2,ve-Se/2,pe,Se,J)}function Qn(fe,W,ve,J){Ma(fe,0,W+ve/2,fe.transform.width,ve,J)}function wa(fe,W,ve,J){Ma(fe,W-ve/2,0,ve,fe.transform.height,J)}function Ma(fe,W,ve,J,pe,Se){var Ie=fe.context,Qe=Ie.gl;Qe.enable(Qe.SCISSOR_TEST),Qe.scissor(W*e.browser.devicePixelRatio,ve*e.browser.devicePixelRatio,J*e.browser.devicePixelRatio,pe*e.browser.devicePixelRatio),Ie.clear({color:Se}),Qe.disable(Qe.SCISSOR_TEST)}function ri(fe,W,ve){for(var J=0;J<ve.length;J++)Qa(fe,W,ve[J])}function Qa(fe,W,ve){var J=fe.context,pe=J.gl,Se=ve.posMatrix,Ie=fe.useProgram("debug"),Qe=en.disabled,dt=rr.disabled,Ft=fe.colorModeForRenderPass(),nr="$debug";J.activeTexture.set(pe.TEXTURE0),fe.emptyTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ie.draw(J,pe.LINE_STRIP,Qe,dt,Ft,Ct.disabled,_n(Se,e.Color.red),nr,fe.debugBuffer,fe.tileBorderIndexBuffer,fe.debugSegments);var dr=W.getTileByID(ve.key).latestRawTileData,xr=dr&&dr.byteLength||0,Fr=Math.floor(xr/1024),Zr=W.getTile(ve).tileSize,Qr=512/Math.min(Zr,512)*(ve.overscaledZ/fe.transform.zoom)*.5,jr=ve.canonical.toString();ve.overscaledZ!==ve.canonical.z&&(jr+=" => "+ve.overscaledZ);var rn=jr+" "+Fr+"kb";si(fe,rn),Ie.draw(J,pe.TRIANGLES,Qe,dt,et.alphaBlended,Ct.disabled,_n(Se,e.Color.transparent,Qr),nr,fe.debugBuffer,fe.quadTriangleIndexBuffer,fe.debugSegments)}function si(fe,W){fe.initDebugOverlayCanvas();var ve=fe.debugOverlayCanvas,J=fe.context.gl,pe=fe.debugOverlayCanvas.getContext("2d");pe.clearRect(0,0,ve.width,ve.height),pe.shadowColor="white",pe.shadowBlur=2,pe.lineWidth=1.5,pe.strokeStyle="white",pe.textBaseline="top",pe.font="bold "+36+"px Open Sans, sans-serif",pe.fillText(W,5,5),pe.strokeText(W,5,5),fe.debugOverlayTexture.update(ve),fe.debugOverlayTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE)}function _i(fe,W,ve){var J=fe.context,pe=ve.implementation;if(fe.renderPass==="offscreen"){var Se=pe.prerender;Se&&(fe.setCustomLayerDefaults(),J.setColorMode(fe.colorModeForRenderPass()),Se.call(pe,J.gl,fe.transform.customLayerMatrix()),J.setDirty(),fe.setBaseState())}else if(fe.renderPass==="translucent"){fe.setCustomLayerDefaults(),J.setColorMode(fe.colorModeForRenderPass()),J.setStencilMode(rr.disabled);var Ie=pe.renderingMode==="3d"?new en(fe.context.gl.LEQUAL,en.ReadWrite,fe.depthRangeFor3D):fe.depthModeForSublayer(0,en.ReadOnly);J.setDepthMode(Ie),pe.render(J.gl,fe.transform.customLayerMatrix()),J.setDirty(),fe.setBaseState(),J.bindFramebuffer.set(null)}}var mo={symbol:vf,circle:$o,heatmap:yf,line:$u,fill:mf,"fill-extrusion":je,hillshade:ht,raster:It,background:br,debug:ri,custom:_i},fi=function(W,ve){this.context=new Ht(W),this.transform=ve,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Aa,this.gpuTimers={}};fi.prototype.resize=function(W,ve){if(this.width=W*e.browser.devicePixelRatio,this.height=ve*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,pe=this.style._order;J<pe.length;J+=1){var Se=pe[J];this.style._layers[Se].resize()}},fi.prototype.setup=function(){var W=this.context,ve=new e.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(e.EXTENT,0),ve.emplaceBack(0,e.EXTENT),ve.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(ve,kl.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var J=new e.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(e.EXTENT,0),J.emplaceBack(0,e.EXTENT),J.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer(J,kl.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var pe=new e.StructArrayLayout4i8;pe.emplaceBack(0,0,0,0),pe.emplaceBack(e.EXTENT,0,e.EXTENT,0),pe.emplaceBack(0,e.EXTENT,0,e.EXTENT),pe.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(pe,j.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Se=new e.StructArrayLayout2i4;Se.emplaceBack(0,0),Se.emplaceBack(1,0),Se.emplaceBack(0,1),Se.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Se,kl.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ie=new e.StructArrayLayout1ui2;Ie.emplaceBack(0),Ie.emplaceBack(1),Ie.emplaceBack(3),Ie.emplaceBack(2),Ie.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Ie);var Qe=new e.StructArrayLayout3ui6;Qe.emplaceBack(0,1,2),Qe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Qe),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var dt=this.context.gl;this.stencilClearMode=new rr({func:dt.ALWAYS,mask:0},0,255,dt.ZERO,dt.ZERO,dt.ZERO)},fi.prototype.clearStencil=function(){var W=this.context,ve=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=e.create();e.ortho(J,0,this.width,this.height,0,0,1),e.scale(J,J,[ve.drawingBufferWidth,ve.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,ve.TRIANGLES,en.disabled,this.stencilClearMode,et.disabled,Ct.disabled,zn(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},fi.prototype._renderTileClippingMasks=function(W,ve){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!ve||!ve.length)){this.currentStencilSource=W.source;var J=this.context,pe=J.gl;this.nextStencilID+ve.length>256&&this.clearStencil(),J.setColorMode(et.disabled),J.setDepthMode(en.disabled);var Se=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ie=0,Qe=ve;Ie<Qe.length;Ie+=1){var dt=Qe[Ie],Ft=this._tileClippingMaskIDs[dt.key]=this.nextStencilID++;Se.draw(J,pe.TRIANGLES,en.disabled,new rr({func:pe.ALWAYS,mask:0},Ft,255,pe.KEEP,pe.KEEP,pe.REPLACE),et.disabled,Ct.disabled,zn(dt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},fi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,ve=this.context.gl;return new rr({func:ve.NOTEQUAL,mask:255},W,255,ve.KEEP,ve.KEEP,ve.REPLACE)},fi.prototype.stencilModeForClipping=function(W){var ve=this.context.gl;return new rr({func:ve.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,ve.KEEP,ve.KEEP,ve.REPLACE)},fi.prototype.stencilConfigForOverlap=function(W){var ve,J=this.context.gl,pe=W.sort(function(Ft,nr){return nr.overscaledZ-Ft.overscaledZ}),Se=pe[pe.length-1].overscaledZ,Ie=pe[0].overscaledZ-Se+1;if(Ie>1){this.currentStencilSource=void 0,this.nextStencilID+Ie>256&&this.clearStencil();for(var Qe={},dt=0;dt<Ie;dt++)Qe[dt+Se]=new rr({func:J.GEQUAL,mask:255},dt+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Ie,[Qe,pe]}return[(ve={},ve[Se]=rr.disabled,ve),pe]},fi.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var ve=8,J=1/ve;return new et([W.CONSTANT_COLOR,W.ONE],new e.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?et.unblended:et.alphaBlended},fi.prototype.depthModeForSublayer=function(W,ve,J){if(!this.opaquePassEnabledForLayer())return en.disabled;var pe=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new en(J||this.context.gl.LEQUAL,ve,[pe,pe])},fi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},fi.prototype.render=function(W,ve){var J=this;this.style=W,this.options=ve,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var pe=this.style._order,Se=this.style.sourceCaches;for(var Ie in Se){var Qe=Se[Ie];Qe.used&&Qe.prepare(this.context)}var dt={},Ft={},nr={};for(var dr in Se){var xr=Se[dr];dt[dr]=xr.getVisibleCoordinates(),Ft[dr]=dt[dr].slice().reverse(),nr[dr]=xr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Fr=0;Fr<pe.length;Fr++){var Zr=pe[Fr];if(this.style._layers[Zr].is3D()){this.opaquePassCutoff=Fr;break}}this.renderPass="offscreen";for(var Qr=0,jr=pe;Qr<jr.length;Qr+=1){var rn=jr[Qr],mn=this.style._layers[rn];if(!(!mn.hasOffscreenPass()||mn.isHidden(this.transform.zoom))){var Fn=Ft[mn.source];mn.type!=="custom"&&!Fn.length||this.renderLayer(this,Se[mn.source],mn,Fn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ve.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ve.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=pe.length-1;this.currentLayer>=0;this.currentLayer--){var Vn=this.style._layers[pe[this.currentLayer]],ta=Se[Vn.source],ia=dt[Vn.source];this._renderTileClippingMasks(Vn,ia),this.renderLayer(this,ta,Vn,ia)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<pe.length;this.currentLayer++){var na=this.style._layers[pe[this.currentLayer]],ya=Se[na.source],Sa=(na.type==="symbol"?nr:Ft)[na.source];this._renderTileClippingMasks(na,dt[na.source]),this.renderLayer(this,ya,na,Sa)}if(this.options.showTileBoundaries){var Ta,Ca,Fa=e.values(this.style._layers);Fa.forEach(function(Za){Za.source&&!Za.isHidden(J.transform.zoom)&&(Za.source!==(Ca&&Ca.id)&&(Ca=J.style.sourceCaches[Za.source]),(!Ta||Ta.getSource().maxzoom<Ca.getSource().maxzoom)&&(Ta=Ca))}),Ta&&mo.debug(this,Ta,Ta.getVisibleCoordinates())}this.options.showPadding&&Sn(this),this.context.setDefault()},fi.prototype.renderLayer=function(W,ve,J,pe){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!pe.length||(this.id=J.id,this.gpuTimingStart(J),mo[J.type](W,ve,J,pe,this.style.placement.variableOffsets),this.gpuTimingEnd())},fi.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var ve=this.context.extTimerQuery,J=this.gpuTimers[W.id];J||(J=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:ve.createQueryEXT()}),J.calls++,ve.beginQueryEXT(ve.TIME_ELAPSED_EXT,J.query)}},fi.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},fi.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},fi.prototype.queryGpuTimers=function(W){var ve={};for(var J in W){var pe=W[J],Se=this.context.extTimerQuery,Ie=Se.getQueryObjectEXT(pe.query,Se.QUERY_RESULT_EXT)/(1e3*1e3);Se.deleteQueryEXT(pe.query),ve[J]=Ie}return ve},fi.prototype.translatePosMatrix=function(W,ve,J,pe,Se){if(!J[0]&&!J[1])return W;var Ie=Se?pe==="map"?this.transform.angle:0:pe==="viewport"?-this.transform.angle:0;if(Ie){var Qe=Math.sin(Ie),dt=Math.cos(Ie);J=[J[0]*dt-J[1]*Qe,J[0]*Qe+J[1]*dt]}var Ft=[Se?J[0]:Ln(ve,J[0],this.transform.zoom),Se?J[1]:Ln(ve,J[1],this.transform.zoom),0],nr=new Float32Array(16);return e.translate(nr,W,Ft),nr},fi.prototype.saveTileTexture=function(W){var ve=this._tileTextures[W.size[0]];ve?ve.push(W):this._tileTextures[W.size[0]]=[W]},fi.prototype.getTileTexture=function(W){var ve=this._tileTextures[W];return ve&&ve.length>0?ve.pop():null},fi.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var ve=this.imageManager.getPattern(W.from.toString()),J=this.imageManager.getPattern(W.to.toString());return!ve||!J},fi.prototype.useProgram=function(W,ve){this.cache=this.cache||{};var J=""+W+(ve?ve.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new gs(this.context,Fl[W],ve,ku[W],this._showOverdrawInspector)),this.cache[J]},fi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},fi.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},fi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},fi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var to=function(W,ve){this.points=W,this.planes=ve};to.fromInvProjectionMatrix=function(W,ve,J){var pe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Se=Math.pow(2,J),Ie=pe.map(function(Ft){return e.transformMat4([],Ft,W)}).map(function(Ft){return e.scale$1([],Ft,1/Ft[3]/ve*Se)}),Qe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],dt=Qe.map(function(Ft){var nr=e.sub([],Ie[Ft[0]],Ie[Ft[1]]),dr=e.sub([],Ie[Ft[2]],Ie[Ft[1]]),xr=e.normalize([],e.cross([],nr,dr)),Fr=-e.dot(xr,Ie[Ft[1]]);return xr.concat(Fr)});return new to(Ie,dt)};var To=function(W,ve){this.min=W,this.max=ve,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};To.prototype.quadrant=function(W){for(var ve=[W%2===0,W<2],J=e.clone$2(this.min),pe=e.clone$2(this.max),Se=0;Se<ve.length;Se++)J[Se]=ve[Se]?this.min[Se]:this.center[Se],pe[Se]=ve[Se]?this.center[Se]:this.max[Se];return pe[2]=this.max[2],new To(J,pe)},To.prototype.distanceX=function(W){var ve=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return ve-W[0]},To.prototype.distanceY=function(W){var ve=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return ve-W[1]},To.prototype.intersects=function(W){for(var ve=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,pe=0;pe<W.planes.length;pe++){for(var Se=W.planes[pe],Ie=0,Qe=0;Qe<ve.length;Qe++)Ie+=e.dot$1(Se,ve[Qe])>=0;if(Ie===0)return 0;Ie!==ve.length&&(J=!1)}if(J)return 2;for(var dt=0;dt<3;dt++){for(var Ft=Number.MAX_VALUE,nr=-Number.MAX_VALUE,dr=0;dr<W.points.length;dr++){var xr=W.points[dr][dt]-this.min[dt];Ft=Math.min(Ft,xr),nr=Math.max(nr,xr)}if(nr<0||Ft>this.max[dt]-this.min[dt])return 0}return 1};var Io=function(W,ve,J,pe){if(W===void 0&&(W=0),ve===void 0&&(ve=0),J===void 0&&(J=0),pe===void 0&&(pe=0),isNaN(W)||W<0||isNaN(ve)||ve<0||isNaN(J)||J<0||isNaN(pe)||pe<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=ve,this.left=J,this.right=pe};Io.prototype.interpolate=function(W,ve,J){return ve.top!=null&&W.top!=null&&(this.top=e.number(W.top,ve.top,J)),ve.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,ve.bottom,J)),ve.left!=null&&W.left!=null&&(this.left=e.number(W.left,ve.left,J)),ve.right!=null&&W.right!=null&&(this.right=e.number(W.right,ve.right,J)),this},Io.prototype.getCenter=function(W,ve){var J=e.clamp((this.left+W-this.right)/2,0,W),pe=e.clamp((this.top+ve-this.bottom)/2,0,ve);return new e.Point(J,pe)},Io.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Io.prototype.clone=function(){return new Io(this.top,this.bottom,this.left,this.right)},Io.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Li=function(W,ve,J,pe,Se){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Se===void 0?!0:Se,this._minZoom=W||0,this._maxZoom=ve||22,this._minPitch=J==null?0:J,this._maxPitch=pe==null?60:pe,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Io,this._posMatrixCache={},this._alignedPosMatrixCache={}},zi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Li.prototype.clone=function(){var W=new Li(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},zi.minZoom.get=function(){return this._minZoom},zi.minZoom.set=function(fe){this._minZoom!==fe&&(this._minZoom=fe,this.zoom=Math.max(this.zoom,fe))},zi.maxZoom.get=function(){return this._maxZoom},zi.maxZoom.set=function(fe){this._maxZoom!==fe&&(this._maxZoom=fe,this.zoom=Math.min(this.zoom,fe))},zi.minPitch.get=function(){return this._minPitch},zi.minPitch.set=function(fe){this._minPitch!==fe&&(this._minPitch=fe,this.pitch=Math.max(this.pitch,fe))},zi.maxPitch.get=function(){return this._maxPitch},zi.maxPitch.set=function(fe){this._maxPitch!==fe&&(this._maxPitch=fe,this.pitch=Math.min(this.pitch,fe))},zi.renderWorldCopies.get=function(){return this._renderWorldCopies},zi.renderWorldCopies.set=function(fe){fe===void 0?fe=!0:fe===null&&(fe=!1),this._renderWorldCopies=fe},zi.worldSize.get=function(){return this.tileSize*this.scale},zi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zi.size.get=function(){return new e.Point(this.width,this.height)},zi.bearing.get=function(){return-this.angle/Math.PI*180},zi.bearing.set=function(fe){var W=-e.wrap(fe,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zi.pitch.get=function(){return this._pitch/Math.PI*180},zi.pitch.set=function(fe){var W=e.clamp(fe,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},zi.fov.get=function(){return this._fov/Math.PI*180},zi.fov.set=function(fe){fe=Math.max(.01,Math.min(60,fe)),this._fov!==fe&&(this._unmodified=!1,this._fov=fe/180*Math.PI,this._calcMatrices())},zi.zoom.get=function(){return this._zoom},zi.zoom.set=function(fe){var W=Math.min(Math.max(fe,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},zi.center.get=function(){return this._center},zi.center.set=function(fe){fe.lat===this._center.lat&&fe.lng===this._center.lng||(this._unmodified=!1,this._center=fe,this._constrain(),this._calcMatrices())},zi.padding.get=function(){return this._edgeInsets.toJSON()},zi.padding.set=function(fe){this._edgeInsets.equals(fe)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,fe,1),this._calcMatrices())},zi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Li.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},Li.prototype.interpolatePadding=function(W,ve,J){this._unmodified=!1,this._edgeInsets.interpolate(W,ve,J),this._constrain(),this._calcMatrices()},Li.prototype.coveringZoomLevel=function(W){var ve=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,ve)},Li.prototype.getVisibleUnwrappedCoordinates=function(W){var ve=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new e.Point(0,0)),pe=this.pointCoordinate(new e.Point(this.width,0)),Se=this.pointCoordinate(new e.Point(this.width,this.height)),Ie=this.pointCoordinate(new e.Point(0,this.height)),Qe=Math.floor(Math.min(J.x,pe.x,Se.x,Ie.x)),dt=Math.floor(Math.max(J.x,pe.x,Se.x,Ie.x)),Ft=1,nr=Qe-Ft;nr<=dt+Ft;nr++)nr!==0&&ve.push(new e.UnwrappedTileID(nr,W));return ve},Li.prototype.coveringTiles=function(W){var ve=this.coveringZoomLevel(W),J=ve;if(W.minzoom!==void 0&&ve<W.minzoom)return[];W.maxzoom!==void 0&&ve>W.maxzoom&&(ve=W.maxzoom);var pe=e.MercatorCoordinate.fromLngLat(this.center),Se=Math.pow(2,ve),Ie=[Se*pe.x,Se*pe.y,0],Qe=to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ve),dt=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(dt=ve);var Ft=3,nr=function(Fa){return{aabb:new To([Fa*Se,0,0],[(Fa+1)*Se,Se,0]),zoom:0,x:0,y:0,wrap:Fa,fullyVisible:!1}},dr=[],xr=[],Fr=ve,Zr=W.reparseOverscaled?J:ve;if(this._renderWorldCopies)for(var Qr=1;Qr<=3;Qr++)dr.push(nr(-Qr)),dr.push(nr(Qr));for(dr.push(nr(0));dr.length>0;){var jr=dr.pop(),rn=jr.x,mn=jr.y,Fn=jr.fullyVisible;if(!Fn){var Vn=jr.aabb.intersects(Qe);if(Vn===0)continue;Fn=Vn===2}var ta=jr.aabb.distanceX(Ie),ia=jr.aabb.distanceY(Ie),na=Math.max(Math.abs(ta),Math.abs(ia)),ya=Ft+(1<<Fr-jr.zoom)-2;if(jr.zoom===Fr||na>ya&&jr.zoom>=dt){xr.push({tileID:new e.OverscaledTileID(jr.zoom===Fr?Zr:jr.zoom,jr.wrap,jr.zoom,rn,mn),distanceSq:e.sqrLen([Ie[0]-.5-rn,Ie[1]-.5-mn])});continue}for(var Sa=0;Sa<4;Sa++){var Ta=(rn<<1)+Sa%2,Ca=(mn<<1)+(Sa>>1);dr.push({aabb:jr.aabb.quadrant(Sa),zoom:jr.zoom+1,x:Ta,y:Ca,wrap:jr.wrap,fullyVisible:Fn})}}return xr.sort(function(Fa,Za){return Fa.distanceSq-Za.distanceSq}).map(function(Fa){return Fa.tileID})},Li.prototype.resize=function(W,ve){this.width=W,this.height=ve,this.pixelsToGLUnits=[2/W,-2/ve],this._constrain(),this._calcMatrices()},zi.unmodified.get=function(){return this._unmodified},Li.prototype.zoomScale=function(W){return Math.pow(2,W)},Li.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},Li.prototype.project=function(W){var ve=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(ve)*this.worldSize)},Li.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},zi.point.get=function(){return this.project(this.center)},Li.prototype.setLocationAtPoint=function(W,ve){var J=this.pointCoordinate(ve),pe=this.pointCoordinate(this.centerPoint),Se=this.locationCoordinate(W),Ie=new e.MercatorCoordinate(Se.x-(J.x-pe.x),Se.y-(J.y-pe.y));this.center=this.coordinateLocation(Ie),this._renderWorldCopies&&(this.center=this.center.wrap())},Li.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},Li.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},Li.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},Li.prototype.coordinateLocation=function(W){return W.toLngLat()},Li.prototype.pointCoordinate=function(W){var ve=0,J=[W.x,W.y,0,1],pe=[W.x,W.y,1,1];e.transformMat4(J,J,this.pixelMatrixInverse),e.transformMat4(pe,pe,this.pixelMatrixInverse);var Se=J[3],Ie=pe[3],Qe=J[0]/Se,dt=pe[0]/Ie,Ft=J[1]/Se,nr=pe[1]/Ie,dr=J[2]/Se,xr=pe[2]/Ie,Fr=dr===xr?0:(ve-dr)/(xr-dr);return new e.MercatorCoordinate(e.number(Qe,dt,Fr)/this.worldSize,e.number(Ft,nr,Fr)/this.worldSize)},Li.prototype.coordinatePoint=function(W){var ve=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(ve,ve,this.pixelMatrix),new e.Point(ve[0]/ve[3],ve[1]/ve[3])},Li.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Li.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Li.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Li.prototype.calculatePosMatrix=function(W,ve){ve===void 0&&(ve=!1);var J=W.key,pe=ve?this._alignedPosMatrixCache:this._posMatrixCache;if(pe[J])return pe[J];var Se=W.canonical,Ie=this.worldSize/this.zoomScale(Se.z),Qe=Se.x+Math.pow(2,Se.z)*W.wrap,dt=e.identity(new Float64Array(16));return e.translate(dt,dt,[Qe*Ie,Se.y*Ie,0]),e.scale(dt,dt,[Ie/e.EXTENT,Ie/e.EXTENT,1]),e.multiply(dt,ve?this.alignedProjMatrix:this.projMatrix,dt),pe[J]=new Float32Array(dt),pe[J]},Li.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Li.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,ve=90,J=-180,pe=180,Se,Ie,Qe,dt,Ft=this.size,nr=this._unmodified;if(this.latRange){var dr=this.latRange;W=e.mercatorYfromLat(dr[1])*this.worldSize,ve=e.mercatorYfromLat(dr[0])*this.worldSize,Se=ve-W<Ft.y?Ft.y/(ve-W):0}if(this.lngRange){var xr=this.lngRange;J=e.mercatorXfromLng(xr[0])*this.worldSize,pe=e.mercatorXfromLng(xr[1])*this.worldSize,Ie=pe-J<Ft.x?Ft.x/(pe-J):0}var Fr=this.point,Zr=Math.max(Ie||0,Se||0);if(Zr){this.center=this.unproject(new e.Point(Ie?(pe+J)/2:Fr.x,Se?(ve+W)/2:Fr.y)),this.zoom+=this.scaleZoom(Zr),this._unmodified=nr,this._constraining=!1;return}if(this.latRange){var Qr=Fr.y,jr=Ft.y/2;Qr-jr<W&&(dt=W+jr),Qr+jr>ve&&(dt=ve-jr)}if(this.lngRange){var rn=Fr.x,mn=Ft.x/2;rn-mn<J&&(Qe=J+mn),rn+mn>pe&&(Qe=pe-mn)}(Qe!==void 0||dt!==void 0)&&(this.center=this.unproject(new e.Point(Qe!==void 0?Qe:Fr.x,dt!==void 0?dt:Fr.y))),this._unmodified=nr,this._constraining=!1}},Li.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,ve=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var J=Math.PI/2+this._pitch,pe=this._fov*(.5+ve.y/this.height),Se=Math.sin(pe)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-J-pe,.01,Math.PI-.01)),Ie=this.point,Qe=Ie.x,dt=Ie.y,Ft=Math.cos(Math.PI/2-this._pitch)*Se+this.cameraToCenterDistance,nr=Ft*1.01,dr=this.height/50,xr=new Float64Array(16);e.perspective(xr,this._fov,this.width/this.height,dr,nr),xr[8]=-ve.x*2/this.width,xr[9]=ve.y*2/this.height,e.scale(xr,xr,[1,-1,1]),e.translate(xr,xr,[0,0,-this.cameraToCenterDistance]),e.rotateX(xr,xr,this._pitch),e.rotateZ(xr,xr,this.angle),e.translate(xr,xr,[-Qe,-dt,0]),this.mercatorMatrix=e.scale([],xr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(xr,xr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=xr,this.invProjMatrix=e.invert([],this.projMatrix);var Fr=this.width%2/2,Zr=this.height%2/2,Qr=Math.cos(this.angle),jr=Math.sin(this.angle),rn=Qe-Math.round(Qe)+Qr*Fr+jr*Zr,mn=dt-Math.round(dt)+Qr*Zr+jr*Fr,Fn=new Float64Array(xr);if(e.translate(Fn,Fn,[rn>.5?rn-1:rn,mn>.5?mn-1:mn,0]),this.alignedProjMatrix=Fn,xr=e.create(),e.scale(xr,xr,[this.width/2,-this.height/2,1]),e.translate(xr,xr,[1,-1,0]),this.labelPlaneMatrix=xr,xr=e.create(),e.scale(xr,xr,[1,-1,1]),e.translate(xr,xr,[-1,-1,0]),e.scale(xr,xr,[2/this.width,2/this.height,1]),this.glCoordMatrix=xr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),xr=e.invert(new Float64Array(16),this.pixelMatrix),!xr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=xr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Li.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),ve=[W.x*this.worldSize,W.y*this.worldSize,0,1],J=e.transformMat4(ve,ve,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},Li.prototype.getCameraPoint=function(){var W=this._pitch,ve=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,ve))},Li.prototype.getCameraQueryGeometry=function(W){var ve=this.getCameraPoint();if(W.length===1)return[W[0],ve];for(var J=ve.x,pe=ve.y,Se=ve.x,Ie=ve.y,Qe=0,dt=W;Qe<dt.length;Qe+=1){var Ft=dt[Qe];J=Math.min(J,Ft.x),pe=Math.min(pe,Ft.y),Se=Math.max(Se,Ft.x),Ie=Math.max(Ie,Ft.y)}return[new e.Point(J,pe),new e.Point(Se,pe),new e.Point(Se,Ie),new e.Point(J,Ie),new e.Point(J,pe)]},Object.defineProperties(Li.prototype,zi);function Ps(fe,W){var ve=!1,J=null,pe=function(){J=null,ve&&(fe(),J=setTimeout(pe,W),ve=!1)};return function(){return ve=!0,J||pe(),J}}var ko=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ps(this._updateHashUnthrottled.bind(this),30*1e3/100)};ko.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ko.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ko.prototype.getHashString=function(W){var ve=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,pe=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),Se=Math.pow(10,pe),Ie=Math.round(ve.lng*Se)/Se,Qe=Math.round(ve.lat*Se)/Se,dt=this._map.getBearing(),Ft=this._map.getPitch(),nr="";if(W?nr+="/"+Ie+"/"+Qe+"/"+J:nr+=J+"/"+Qe+"/"+Ie,(dt||Ft)&&(nr+="/"+Math.round(dt*10)/10),Ft&&(nr+="/"+Math.round(Ft)),this._hashName){var dr=this._hashName,xr=!1,Fr=e.window.location.hash.slice(1).split("&").map(function(Zr){var Qr=Zr.split("=")[0];return Qr===dr?(xr=!0,Qr+"="+nr):Zr}).filter(function(Zr){return Zr});return xr||Fr.push(dr+"="+nr),"#"+Fr.join("&")}return"#"+nr},ko.prototype._getCurrentHash=function(){var W=this,ve=e.window.location.hash.replace("#","");if(this._hashName){var J;return ve.split("&").map(function(pe){return pe.split("=")}).forEach(function(pe){pe[0]===W._hashName&&(J=pe)}),(J&&J[1]||"").split("/")}return ve.split("/")},ko.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(J){return isNaN(J)})){var ve=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:ve,pitch:+(W[4]||0)}),!0}return!1},ko.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Yo={linearity:.3,easing:e.bezier(0,0,.3,1)},ls=e.extend({deceleration:2500,maxSpeed:1400},Yo),le=e.extend({deceleration:20,maxSpeed:1400},Yo),we=e.extend({deceleration:1e3,maxSpeed:360},Yo),De=e.extend({deceleration:1e3,maxSpeed:90},Yo),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,ve=e.browser.now(),J=160;W.length>0&&ve-W[0].time>J;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ve={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},J=0,pe=this._inertiaBuffer;J<pe.length;J+=1){var Se=pe[J],Ie=Se.settings;ve.zoom+=Ie.zoomDelta||0,ve.bearing+=Ie.bearingDelta||0,ve.pitch+=Ie.pitchDelta||0,Ie.panDelta&&ve.pan._add(Ie.panDelta),Ie.around&&(ve.around=Ie.around),Ie.pinchAround&&(ve.pinchAround=Ie.pinchAround)}var Qe=this._inertiaBuffer[this._inertiaBuffer.length-1],dt=Qe.time-this._inertiaBuffer[0].time,Ft={};if(ve.pan.mag()){var nr=$e(ve.pan.mag(),dt,e.extend({},ls,W||{}));Ft.offset=ve.pan.mult(nr.amount/ve.pan.mag()),Ft.center=this._map.transform.center,Be(Ft,nr)}if(ve.zoom){var dr=$e(ve.zoom,dt,le);Ft.zoom=this._map.transform.zoom+dr.amount,Be(Ft,dr)}if(ve.bearing){var xr=$e(ve.bearing,dt,we);Ft.bearing=this._map.transform.bearing+e.clamp(xr.amount,-179,179),Be(Ft,xr)}if(ve.pitch){var Fr=$e(ve.pitch,dt,De);Ft.pitch=this._map.transform.pitch+Fr.amount,Be(Ft,Fr)}if(Ft.zoom||Ft.bearing){var Zr=ve.pinchAround===void 0?ve.around:ve.pinchAround;Ft.around=Zr?this._map.unproject(Zr):this._map.getCenter()}return this.clear(),e.extend(Ft,{noMoveStart:!0})}};function Be(fe,W){(!fe.duration||fe.duration<W.duration)&&(fe.duration=W.duration,fe.easing=W.easing)}function $e(fe,W,ve){var J=ve.maxSpeed,pe=ve.linearity,Se=ve.deceleration,Ie=e.clamp(fe*pe/(W/1e3),-J,J),Qe=Math.abs(Ie)/(Se*pe);return{easing:ve.easing,duration:Qe*1e3,amount:Ie*(Qe/2)}}var Mt=function(fe){function W(J,pe,Se,Ie){Ie===void 0&&(Ie={});var Qe=n.mousePos(pe.getCanvasContainer(),Se),dt=pe.unproject(Qe);fe.call(this,J,e.extend({point:Qe,lngLat:dt,originalEvent:Se},Ie)),this._defaultPrevented=!1,this.target=pe}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),mt=function(fe){function W(J,pe,Se){var Ie=J==="touchend"?Se.changedTouches:Se.touches,Qe=n.touchPos(pe.getCanvasContainer(),Ie),dt=Qe.map(function(dr){return pe.unproject(dr)}),Ft=Qe.reduce(function(dr,xr,Fr,Zr){return dr.add(xr.div(Zr.length))},new e.Point(0,0)),nr=pe.unproject(Ft);fe.call(this,J,{points:Qe,point:Ft,lngLats:dt,lngLat:nr,originalEvent:Se}),this._defaultPrevented=!1}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),Ot=function(fe){function W(J,pe,Se){fe.call(this,J,{originalEvent:Se}),this._defaultPrevented=!1}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),er=function(W,ve){this._map=W,this._clickTolerance=ve.clickTolerance};er.prototype.reset=function(){delete this._mousedownPos},er.prototype.wheel=function(W){return this._firePreventable(new Ot(W.type,this._map,W))},er.prototype.mousedown=function(W,ve){return this._mousedownPos=ve,this._firePreventable(new Mt(W.type,this._map,W))},er.prototype.mouseup=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.click=function(W,ve){this._mousedownPos&&this._mousedownPos.dist(ve)>=this._clickTolerance||this._map.fire(new Mt(W.type,this._map,W))},er.prototype.dblclick=function(W){return this._firePreventable(new Mt(W.type,this._map,W))},er.prototype.mouseover=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.mouseout=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.touchstart=function(W){return this._firePreventable(new mt(W.type,this._map,W))},er.prototype.touchmove=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype.touchend=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype.touchcancel=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},er.prototype.isEnabled=function(){return!0},er.prototype.isActive=function(){return!1},er.prototype.enable=function(){},er.prototype.disable=function(){};var or=function(W){this._map=W};or.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},or.prototype.mousemove=function(W){this._map.fire(new Mt(W.type,this._map,W))},or.prototype.mousedown=function(){this._delayContextMenu=!0},or.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},or.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new Mt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},or.prototype.isEnabled=function(){return!0},or.prototype.isActive=function(){return!1},or.prototype.enable=function(){},or.prototype.disable=function(){};var sr=function(W,ve){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=ve.clickTolerance||1};sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active},sr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},sr.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},sr.prototype.mousedown=function(W,ve){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(n.disableDrag(),this._startPos=this._lastPos=ve,this._active=!0)},sr.prototype.mousemoveWindow=function(W,ve){if(!!this._active){var J=ve;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var pe=this._startPos;this._lastPos=J,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Se=Math.min(pe.x,J.x),Ie=Math.max(pe.x,J.x),Qe=Math.min(pe.y,J.y),dt=Math.max(pe.y,J.y);n.setTransform(this._box,"translate("+Se+"px,"+Qe+"px)"),this._box.style.width=Ie-Se+"px",this._box.style.height=dt-Qe+"px"}}},sr.prototype.mouseupWindow=function(W,ve){var J=this;if(!!this._active&&W.button===0){var pe=this._startPos,Se=ve;if(this.reset(),n.suppressClick(),pe.x===Se.x&&pe.y===Se.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Ie){return Ie.fitScreenCoordinates(pe,Se,J._map.getBearing(),{linear:!0})}}}},sr.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},sr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},sr.prototype._fireEvent=function(W,ve){return this._map.fire(new e.Event(W,{originalEvent:ve}))};function Lr(fe,W){for(var ve={},J=0;J<fe.length;J++)ve[fe[J].identifier]=W[J];return ve}function nn(fe){for(var W=new e.Point(0,0),ve=0,J=fe;ve<J.length;ve+=1){var pe=J[ve];W._add(pe)}return W.div(fe.length)}var pn=500,zr=500,Wr=30,qr=function(W){this.reset(),this.numTouches=W.numTouches};qr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},qr.prototype.touchstart=function(W,ve,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),J.length===this.numTouches&&(this.centroid=nn(ve),this.touches=Lr(J,ve)))},qr.prototype.touchmove=function(W,ve,J){if(!(this.aborted||!this.centroid)){var pe=Lr(J,ve);for(var Se in this.touches){var Ie=this.touches[Se],Qe=pe[Se];(!Qe||Qe.dist(Ie)>Wr)&&(this.aborted=!0)}}},qr.prototype.touchend=function(W,ve,J){if((!this.centroid||W.timeStamp-this.startTime>zr)&&(this.aborted=!0),J.length===0){var pe=!this.aborted&&this.centroid;if(this.reset(),pe)return pe}};var fn=function(W){this.singleTap=new qr(W),this.numTaps=W.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(W,ve,J){this.singleTap.touchstart(W,ve,J)},fn.prototype.touchmove=function(W,ve,J){this.singleTap.touchmove(W,ve,J)},fn.prototype.touchend=function(W,ve,J){var pe=this.singleTap.touchend(W,ve,J);if(pe){var Se=W.timeStamp-this.lastTime<pn,Ie=!this.lastTap||this.lastTap.dist(pe)<Wr;if((!Se||!Ie)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=pe,this.count===this.numTaps)return this.reset(),pe}};var hn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};hn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},hn.prototype.touchstart=function(W,ve,J){this._zoomIn.touchstart(W,ve,J),this._zoomOut.touchstart(W,ve,J)},hn.prototype.touchmove=function(W,ve,J){this._zoomIn.touchmove(W,ve,J),this._zoomOut.touchmove(W,ve,J)},hn.prototype.touchend=function(W,ve,J){var pe=this,Se=this._zoomIn.touchend(W,ve,J),Ie=this._zoomOut.touchend(W,ve,J);if(Se)return this._active=!0,W.preventDefault(),setTimeout(function(){return pe.reset()},0),{cameraAnimation:function(Qe){return Qe.easeTo({duration:300,zoom:Qe.getZoom()+1,around:Qe.unproject(Se)},{originalEvent:W})}};if(Ie)return this._active=!0,W.preventDefault(),setTimeout(function(){return pe.reset()},0),{cameraAnimation:function(Qe){return Qe.easeTo({duration:300,zoom:Qe.getZoom()-1,around:Qe.unproject(Ie)},{originalEvent:W})}}},hn.prototype.touchcancel=function(){this.reset()},hn.prototype.enable=function(){this._enabled=!0},hn.prototype.disable=function(){this._enabled=!1,this.reset()},hn.prototype.isEnabled=function(){return this._enabled},hn.prototype.isActive=function(){return this._active};var tn=0,jn=2,la=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};la.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},la.prototype._correctButton=function(W,ve){return!1},la.prototype._move=function(W,ve){return{}},la.prototype.mousedown=function(W,ve){if(!this._lastPoint){var J=n.mouseButton(W);!this._correctButton(W,J)||(this._lastPoint=ve,this._eventButton=J)}},la.prototype.mousemoveWindow=function(W,ve){var J=this._lastPoint;if(!!J&&(W.preventDefault(),!(!this._moved&&ve.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ve,this._move(J,ve)},la.prototype.mouseupWindow=function(W){var ve=n.mouseButton(W);ve===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var Ea=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(J,pe){fe.prototype.mousedown.call(this,J,pe),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(J,pe){return pe===tn&&!J.ctrlKey},W.prototype._move=function(J,pe){return{around:pe,panDelta:pe.sub(J)}},W}(la),ca=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,pe){return pe===tn&&J.ctrlKey||pe===jn},W.prototype._move=function(J,pe){var Se=.8,Ie=(pe.x-J.x)*Se;if(Ie)return this._active=!0,{bearingDelta:Ie}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(la),Ra=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,pe){return pe===tn&&J.ctrlKey||pe===jn},W.prototype._move=function(J,pe){var Se=-.5,Ie=(pe.y-J.y)*Se;if(Ie)return this._active=!0,{pitchDelta:Ie}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(la),pa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};pa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},pa.prototype.touchstart=function(W,ve,J){return this._calculateTransform(W,ve,J)},pa.prototype.touchmove=function(W,ve,J){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,ve,J)},pa.prototype.touchend=function(W,ve,J){this._calculateTransform(W,ve,J),this._active&&J.length<this._minTouches&&this.reset()},pa.prototype.touchcancel=function(){this.reset()},pa.prototype._calculateTransform=function(W,ve,J){J.length>0&&(this._active=!0);var pe=Lr(J,ve),Se=new e.Point(0,0),Ie=new e.Point(0,0),Qe=0;for(var dt in pe){var Ft=pe[dt],nr=this._touches[dt];nr&&(Se._add(Ft),Ie._add(Ft.sub(nr)),Qe++,pe[dt]=Ft)}if(this._touches=pe,!(Qe<this._minTouches||!Ie.mag())){var dr=Ie.div(Qe);if(this._sum._add(dr),!(this._sum.mag()<this._clickTolerance)){var xr=Se.div(Qe);return{around:xr,panDelta:dr}}}},pa.prototype.enable=function(){this._enabled=!0},pa.prototype.disable=function(){this._enabled=!1,this.reset()},pa.prototype.isEnabled=function(){return this._enabled},pa.prototype.isActive=function(){return this._active};var ja=function(){this.reset()};ja.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ja.prototype._start=function(W){},ja.prototype._move=function(W,ve,J){return{}},ja.prototype.touchstart=function(W,ve,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([ve[0],ve[1]]))},ja.prototype.touchmove=function(W,ve,J){if(!!this._firstTwoTouches){W.preventDefault();var pe=this._firstTwoTouches,Se=pe[0],Ie=pe[1],Qe=Oa(J,ve,Se),dt=Oa(J,ve,Ie);if(!(!Qe||!dt)){var Ft=this._aroundCenter?null:Qe.add(dt).div(2);return this._move([Qe,dt],Ft,W)}}},ja.prototype.touchend=function(W,ve,J){if(!!this._firstTwoTouches){var pe=this._firstTwoTouches,Se=pe[0],Ie=pe[1],Qe=Oa(J,ve,Se),dt=Oa(J,ve,Ie);Qe&&dt||(this._active&&n.suppressClick(),this.reset())}},ja.prototype.touchcancel=function(){this.reset()},ja.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},ja.prototype.disable=function(){this._enabled=!1,this.reset()},ja.prototype.isEnabled=function(){return this._enabled},ja.prototype.isActive=function(){return this._active};function Oa(fe,W,ve){for(var J=0;J<fe.length;J++)if(fe[J].identifier===ve)return W[J]}var ii=.1;function Ei(fe,W){return Math.log(fe/W)/Math.LN2}var Ao=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},W.prototype._move=function(J,pe){var Se=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(Ei(this._distance,this._startDistance))<ii))return this._active=!0,{zoomDelta:Ei(this._distance,Se),pinchAround:pe}},W}(ja),ji=25;function ga(fe,W){return fe.angleWith(W)*180/Math.PI}var hi=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},W.prototype._move=function(J,pe){var Se=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ga(this._vector,Se),pinchAround:pe}},W.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var pe=Math.PI*this._minDiameter,Se=ji/pe*360,Ie=ga(J,this._startVector);return Math.abs(Ie)<Se},W}(ja);function qa(fe){return Math.abs(fe.y)>Math.abs(fe.x)}var Oi=100,di=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(J){this._lastPoints=J,qa(J[0].sub(J[1]))&&(this._valid=!1)},W.prototype._move=function(J,pe,Se){var Ie=J[0].sub(this._lastPoints[0]),Qe=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ie,Qe,Se.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var dt=(Ie.y+Qe.y)/2,Ft=-.5;return{pitchDelta:dt*Ft}}},W.prototype.gestureBeginsVertically=function(J,pe,Se){if(this._valid!==void 0)return this._valid;var Ie=2,Qe=J.mag()>=Ie,dt=pe.mag()>=Ie;if(!(!Qe&&!dt)){if(!Qe||!dt)return this._firstMove===void 0&&(this._firstMove=Se),Se-this._firstMove<Oi?void 0:!1;var Ft=J.y>0==pe.y>0;return qa(J)&&qa(pe)&&Ft}},W}(ja),xo={panStep:100,bearingStep:15,pitchStep:10},fo=function(){var W=xo;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};fo.prototype.reset=function(){this._active=!1},fo.prototype.keydown=function(W){var ve=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var J=0,pe=0,Se=0,Ie=0,Qe=0;switch(W.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:W.shiftKey?pe=-1:(W.preventDefault(),Ie=-1);break;case 39:W.shiftKey?pe=1:(W.preventDefault(),Ie=1);break;case 38:W.shiftKey?Se=1:(W.preventDefault(),Qe=-1);break;case 40:W.shiftKey?Se=-1:(W.preventDefault(),Qe=1);break;default:return}return{cameraAnimation:function(dt){var Ft=dt.getZoom();dt.easeTo({duration:300,easeId:"keyboardHandler",easing:Co,zoom:J?Math.round(Ft)+J*(W.shiftKey?2:1):Ft,bearing:dt.getBearing()+pe*ve._bearingStep,pitch:dt.getPitch()+Se*ve._pitchStep,offset:[-Ie*ve._panStep,-Qe*ve._panStep],center:dt.getCenter()},{originalEvent:W})}}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};function Co(fe){return fe*(2-fe)}var us=4.000244140625,qo=1/100,fs=1/450,ro=2,Qi=function(W,ve){this._map=W,this._el=W.getCanvasContainer(),this._handler=ve,this._delta=0,this._defaultZoomRate=qo,this._wheelZoomRate=fs,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Qi.prototype.setZoomRate=function(W){this._defaultZoomRate=W},Qi.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},Qi.prototype.isEnabled=function(){return!!this._enabled},Qi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Qi.prototype.isZooming=function(){return!!this._zooming},Qi.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},Qi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Qi.prototype.wheel=function(W){if(!!this.isEnabled()){var ve=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,J=e.browser.now(),pe=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,ve!==0&&ve%us===0?this._type="wheel":ve!==0&&Math.abs(ve)<4?this._type="trackpad":pe>400?(this._type=null,this._lastValue=ve,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(pe*ve)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ve+=this._lastValue)),W.shiftKey&&ve&&(ve=ve/4),this._type&&(this._lastWheelEvent=W,this._delta-=ve,this._active||this._start(W)),W.preventDefault()}},Qi.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},Qi.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ve=n.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ve)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qi.prototype.renderFrame=function(){return this._onScrollFrame()},Qi.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ve=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>us?this._wheelZoomRate:this._defaultZoomRate,pe=ro/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&pe!==0&&(pe=1/pe);var Se=typeof this._targetZoom=="number"?ve.zoomScale(this._targetZoom):ve.scale;this._targetZoom=Math.min(ve.maxZoom,Math.max(ve.minZoom,ve.scaleZoom(Se*pe))),this._type==="wheel"&&(this._startZoom=ve.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ie=typeof this._targetZoom=="number"?this._targetZoom:ve.zoom,Qe=this._startZoom,dt=this._easing,Ft=!1,nr;if(this._type==="wheel"&&Qe&&dt){var dr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),xr=dt(dr);nr=e.number(Qe,Ie,xr),dr<1?this._frameId||(this._frameId=!0):Ft=!0}else nr=Ie,Ft=!0;return this._active=!0,Ft&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ft,zoomDelta:nr-ve.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qi.prototype._smoothOutEasing=function(W){var ve=e.ease;if(this._prevEase){var J=this._prevEase,pe=(e.browser.now()-J.start)/J.duration,Se=J.easing(pe+.01)-J.easing(pe),Ie=.27/Math.sqrt(Se*Se+1e-4)*.01,Qe=Math.sqrt(.27*.27-Ie*Ie);ve=e.bezier(Ie,Qe,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:ve},ve},Qi.prototype.reset=function(){this._active=!1};var Ua=function(W,ve){this._clickZoom=W,this._tapZoom=ve};Ua.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ua.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ua.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ua.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ei=function(){this.reset()};ei.prototype.reset=function(){this._active=!1},ei.prototype.dblclick=function(W,ve){return W.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(W.shiftKey?-1:1),around:J.unproject(ve)},{originalEvent:W})}}},ei.prototype.enable=function(){this._enabled=!0},ei.prototype.disable=function(){this._enabled=!1,this.reset()},ei.prototype.isEnabled=function(){return this._enabled},ei.prototype.isActive=function(){return this._active};var Do=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Do.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Do.prototype.touchstart=function(W,ve,J){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=ve[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(W,ve,J))},Do.prototype.touchmove=function(W,ve,J){if(!this._tapTime)this._tap.touchmove(W,ve,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var pe=ve[0],Se=pe.y-this._swipePoint.y;return this._swipePoint=pe,W.preventDefault(),this._active=!0,{zoomDelta:Se/128}}},Do.prototype.touchend=function(W,ve,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var pe=this._tap.touchend(W,ve,J);pe&&(this._tapTime=W.timeStamp)}},Do.prototype.touchcancel=function(){this.reset()},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var vo=function(W,ve,J){this._el=W,this._mousePan=ve,this._touchPan=J};vo.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},vo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},vo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},vo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wo=function(W,ve,J){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=ve,this._mousePitch=J};Wo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var io=function(W,ve,J,pe){this._el=W,this._touchZoom=ve,this._touchRotate=J,this._tapDragZoom=pe,this._rotationDisabled=!1,this._enabled=!0};io.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},io.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},io.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},io.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},io.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},io.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var cs=function(fe){return fe.zoom||fe.drag||fe.pitch||fe.rotate},Us=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W}(e.Event);function du(fe){return fe.panDelta&&fe.panDelta.mag()||fe.zoomDelta||fe.bearingDelta||fe.pitchDelta}var oo=function(W,ve){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=ve.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ve),e.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[e.window,"blur",void 0]];for(var pe=0,Se=this._listeners;pe<Se.length;pe+=1){var Ie=Se[pe],Qe=Ie[0],dt=Ie[1],Ft=Ie[2];n.addEventListener(Qe,dt,Qe===e.window.document?this.handleWindowEvent:this.handleEvent,Ft)}};oo.prototype.destroy=function(){for(var W=0,ve=this._listeners;W<ve.length;W+=1){var J=ve[W],pe=J[0],Se=J[1],Ie=J[2];n.removeEventListener(pe,Se,pe===e.window.document?this.handleWindowEvent:this.handleEvent,Ie)}},oo.prototype._addDefaultHandlers=function(W){var ve=this._map,J=ve.getCanvasContainer();this._add("mapEvent",new er(ve,W));var pe=ve.boxZoom=new sr(ve,W);this._add("boxZoom",pe);var Se=new hn,Ie=new ei;ve.doubleClickZoom=new Ua(Ie,Se),this._add("tapZoom",Se),this._add("clickZoom",Ie);var Qe=new Do;this._add("tapDragZoom",Qe);var dt=ve.touchPitch=new di;this._add("touchPitch",dt);var Ft=new ca(W),nr=new Ra(W);ve.dragRotate=new Wo(W,Ft,nr),this._add("mouseRotate",Ft,["mousePitch"]),this._add("mousePitch",nr,["mouseRotate"]);var dr=new Ea(W),xr=new pa(W);ve.dragPan=new vo(J,dr,xr),this._add("mousePan",dr),this._add("touchPan",xr,["touchZoom","touchRotate"]);var Fr=new hi,Zr=new Ao;ve.touchZoomRotate=new io(J,Zr,Fr,Qe),this._add("touchRotate",Fr,["touchPan","touchZoom"]),this._add("touchZoom",Zr,["touchPan","touchRotate"]);var Qr=ve.scrollZoom=new Qi(ve,this);this._add("scrollZoom",Qr,["mousePan"]);var jr=ve.keyboard=new fo;this._add("keyboard",jr),this._add("blockableMapEvent",new or(ve));for(var rn=0,mn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rn<mn.length;rn+=1){var Fn=mn[rn];W.interactive&&W[Fn]&&ve[Fn].enable(W[Fn])}},oo.prototype._add=function(W,ve,J){this._handlers.push({handlerName:W,handler:ve,allowed:J}),this._handlersById[W]=ve},oo.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,ve=this._handlers;W<ve.length;W+=1){var J=ve[W],pe=J.handler;pe.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},oo.prototype.isActive=function(){for(var W=0,ve=this._handlers;W<ve.length;W+=1){var J=ve[W],pe=J.handler;if(pe.isActive())return!0}return!1},oo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},oo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},oo.prototype.isMoving=function(){return Boolean(cs(this._eventsInProgress))||this.isZooming()},oo.prototype._blockedByActive=function(W,ve,J){for(var pe in W)if(pe!==J&&(!ve||ve.indexOf(pe)<0))return!0;return!1},oo.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},oo.prototype._getMapTouches=function(W){for(var ve=[],J=0,pe=W;J<pe.length;J+=1){var Se=pe[J],Ie=Se.target;this._el.contains(Ie)&&ve.push(Se)}return ve},oo.prototype.handleEvent=function(W,ve){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=W.type==="renderFrame"?void 0:W,pe={needsRenderFrame:!1},Se={},Ie={},Qe=W.touches?this._getMapTouches(W.touches):void 0,dt=Qe?n.touchPos(this._el,Qe):n.mousePos(this._el,W),Ft=0,nr=this._handlers;Ft<nr.length;Ft+=1){var dr=nr[Ft],xr=dr.handlerName,Fr=dr.handler,Zr=dr.allowed;if(!!Fr.isEnabled()){var Qr=void 0;this._blockedByActive(Ie,Zr,xr)?Fr.reset():Fr[ve||W.type]&&(Qr=Fr[ve||W.type](W,dt,Qe),this.mergeHandlerResult(pe,Se,Qr,xr,J),Qr&&Qr.needsRenderFrame&&this._triggerRenderFrame()),(Qr||Fr.isActive())&&(Ie[xr]=Fr)}}var jr={};for(var rn in this._previousActiveHandlers)Ie[rn]||(jr[rn]=J);this._previousActiveHandlers=Ie,(Object.keys(jr).length||du(pe))&&(this._changes.push([pe,Se,jr]),this._triggerRenderFrame()),(Object.keys(Ie).length||du(pe))&&this._map._stop(!0),this._updatingCamera=!1;var mn=pe.cameraAnimation;mn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],mn(this._map))},oo.prototype.mergeHandlerResult=function(W,ve,J,pe,Se){if(!!J){e.extend(W,J);var Ie={handlerName:pe,originalEvent:J.originalEvent||Se};J.zoomDelta!==void 0&&(ve.zoom=Ie),J.panDelta!==void 0&&(ve.drag=Ie),J.pitchDelta!==void 0&&(ve.pitch=Ie),J.bearingDelta!==void 0&&(ve.rotate=Ie)}},oo.prototype._applyChanges=function(){for(var W={},ve={},J={},pe=0,Se=this._changes;pe<Se.length;pe+=1){var Ie=Se[pe],Qe=Ie[0],dt=Ie[1],Ft=Ie[2];Qe.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add(Qe.panDelta)),Qe.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Qe.zoomDelta),Qe.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Qe.bearingDelta),Qe.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Qe.pitchDelta),Qe.around!==void 0&&(W.around=Qe.around),Qe.pinchAround!==void 0&&(W.pinchAround=Qe.pinchAround),Qe.noInertia&&(W.noInertia=Qe.noInertia),e.extend(ve,dt),e.extend(J,Ft)}this._updateMapTransform(W,ve,J),this._changes=[]},oo.prototype._updateMapTransform=function(W,ve,J){var pe=this._map,Se=pe.transform;if(!du(W))return this._fireEvents(ve,J);var Ie=W.panDelta,Qe=W.zoomDelta,dt=W.bearingDelta,Ft=W.pitchDelta,nr=W.around,dr=W.pinchAround;dr!==void 0&&(nr=dr),pe._stop(!0),nr=nr||pe.transform.centerPoint;var xr=Se.pointLocation(Ie?nr.sub(Ie):nr);dt&&(Se.bearing+=dt),Ft&&(Se.pitch+=Ft),Qe&&(Se.zoom+=Qe),Se.setLocationAtPoint(xr,nr),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(ve,J)},oo.prototype._fireEvents=function(W,ve){var J=this,pe=cs(this._eventsInProgress),Se=cs(W),Ie={};for(var Qe in W){var dt=W[Qe],Ft=dt.originalEvent;this._eventsInProgress[Qe]||(Ie[Qe+"start"]=Ft),this._eventsInProgress[Qe]=W[Qe]}!pe&&Se&&this._fireEvent("movestart",Se.originalEvent);for(var nr in Ie)this._fireEvent(nr,Ie[nr]);W.rotate&&(this._bearingChanged=!0),Se&&this._fireEvent("move",Se.originalEvent);for(var dr in W){var xr=W[dr],Fr=xr.originalEvent;this._fireEvent(dr,Fr)}var Zr={},Qr;for(var jr in this._eventsInProgress){var rn=this._eventsInProgress[jr],mn=rn.handlerName,Fn=rn.originalEvent;this._handlersById[mn].isActive()||(delete this._eventsInProgress[jr],Qr=ve[mn]||Fn,Zr[jr+"end"]=Qr)}for(var Vn in Zr)this._fireEvent(Vn,Zr[Vn]);var ta=cs(this._eventsInProgress);if((pe||Se)&&!ta){this._updatingCamera=!0;var ia=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),na=function(ya){return ya!==0&&-J._bearingSnap<ya&&ya<J._bearingSnap};ia?(na(ia.bearing||this._map.getBearing())&&(ia.bearing=0),this._map.easeTo(ia,{originalEvent:Qr})):(this._map.fire(new e.Event("moveend",{originalEvent:Qr})),na(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},oo.prototype._fireEvent=function(W,ve){this._map.fire(new e.Event(W,ve?{originalEvent:ve}:{}))},oo.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ve){delete W._frameId,W.handleEvent(new Us("renderFrame",{timeStamp:ve})),W._applyChanges()}))};var Wf=function(fe){function W(ve,J){fe.call(this),this._moving=!1,this._zooming=!1,this.transform=ve,this._bearingSnap=J.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(J,pe){return this.jumpTo({center:J},pe)},W.prototype.panBy=function(J,pe,Se){return J=e.Point.convert(J).mult(-1),this.panTo(this.transform.center,e.extend({offset:J},pe),Se)},W.prototype.panTo=function(J,pe,Se){return this.easeTo(e.extend({center:J},pe),Se)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(J,pe){return this.jumpTo({zoom:J},pe),this},W.prototype.zoomTo=function(J,pe,Se){return this.easeTo(e.extend({zoom:J},pe),Se)},W.prototype.zoomIn=function(J,pe){return this.zoomTo(this.getZoom()+1,J,pe),this},W.prototype.zoomOut=function(J,pe){return this.zoomTo(this.getZoom()-1,J,pe),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(J,pe){return this.jumpTo({bearing:J},pe),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(J,pe){return this.jumpTo({padding:J},pe),this},W.prototype.rotateTo=function(J,pe,Se){return this.easeTo(e.extend({bearing:J},pe),Se)},W.prototype.resetNorth=function(J,pe){return this.rotateTo(0,e.extend({duration:1e3},J),pe),this},W.prototype.resetNorthPitch=function(J,pe){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},J),pe),this},W.prototype.snapToNorth=function(J,pe){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,pe):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(J,pe){return this.jumpTo({pitch:J},pe),this},W.prototype.cameraForBounds=function(J,pe){return J=e.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,pe)},W.prototype._cameraForBoxAndBearing=function(J,pe,Se,Ie){var Qe={top:0,bottom:0,right:0,left:0};if(Ie=e.extend({padding:Qe,offset:[0,0],maxZoom:this.transform.maxZoom},Ie),typeof Ie.padding=="number"){var dt=Ie.padding;Ie.padding={top:dt,bottom:dt,right:dt,left:dt}}Ie.padding=e.extend(Qe,Ie.padding);var Ft=this.transform,nr=Ft.padding,dr=Ft.project(e.LngLat.convert(J)),xr=Ft.project(e.LngLat.convert(pe)),Fr=dr.rotate(-Se*Math.PI/180),Zr=xr.rotate(-Se*Math.PI/180),Qr=new e.Point(Math.max(Fr.x,Zr.x),Math.max(Fr.y,Zr.y)),jr=new e.Point(Math.min(Fr.x,Zr.x),Math.min(Fr.y,Zr.y)),rn=Qr.sub(jr),mn=(Ft.width-(nr.left+nr.right+Ie.padding.left+Ie.padding.right))/rn.x,Fn=(Ft.height-(nr.top+nr.bottom+Ie.padding.top+Ie.padding.bottom))/rn.y;if(Fn<0||mn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Vn=Math.min(Ft.scaleZoom(Ft.scale*Math.min(mn,Fn)),Ie.maxZoom),ta=e.Point.convert(Ie.offset),ia=(Ie.padding.left-Ie.padding.right)/2,na=(Ie.padding.top-Ie.padding.bottom)/2,ya=new e.Point(ta.x+ia,ta.y+na),Sa=ya.mult(Ft.scale/Ft.zoomScale(Vn)),Ta=Ft.unproject(dr.add(xr).div(2).sub(Sa));return{center:Ta,zoom:Vn,bearing:Se}},W.prototype.fitBounds=function(J,pe,Se){return this._fitInternal(this.cameraForBounds(J,pe),pe,Se)},W.prototype.fitScreenCoordinates=function(J,pe,Se,Ie,Qe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(J)),this.transform.pointLocation(e.Point.convert(pe)),Se,Ie),Ie,Qe)},W.prototype._fitInternal=function(J,pe,Se){return J?(pe=e.extend(J,pe),delete pe.padding,pe.linear?this.easeTo(pe,Se):this.flyTo(pe,Se)):this},W.prototype.jumpTo=function(J,pe){this.stop();var Se=this.transform,Ie=!1,Qe=!1,dt=!1;return"zoom"in J&&Se.zoom!==+J.zoom&&(Ie=!0,Se.zoom=+J.zoom),J.center!==void 0&&(Se.center=e.LngLat.convert(J.center)),"bearing"in J&&Se.bearing!==+J.bearing&&(Qe=!0,Se.bearing=+J.bearing),"pitch"in J&&Se.pitch!==+J.pitch&&(dt=!0,Se.pitch=+J.pitch),J.padding!=null&&!Se.isPaddingEqual(J.padding)&&(Se.padding=J.padding),this.fire(new e.Event("movestart",pe)).fire(new e.Event("move",pe)),Ie&&this.fire(new e.Event("zoomstart",pe)).fire(new e.Event("zoom",pe)).fire(new e.Event("zoomend",pe)),Qe&&this.fire(new e.Event("rotatestart",pe)).fire(new e.Event("rotate",pe)).fire(new e.Event("rotateend",pe)),dt&&this.fire(new e.Event("pitchstart",pe)).fire(new e.Event("pitch",pe)).fire(new e.Event("pitchend",pe)),this.fire(new e.Event("moveend",pe))},W.prototype.easeTo=function(J,pe){var Se=this;this._stop(!1,J.easeId),J=e.extend({offset:[0,0],duration:500,easing:e.ease},J),(J.animate===!1||!J.essential&&e.browser.prefersReducedMotion)&&(J.duration=0);var Ie=this.transform,Qe=this.getZoom(),dt=this.getBearing(),Ft=this.getPitch(),nr=this.getPadding(),dr="zoom"in J?+J.zoom:Qe,xr="bearing"in J?this._normalizeBearing(J.bearing,dt):dt,Fr="pitch"in J?+J.pitch:Ft,Zr="padding"in J?J.padding:Ie.padding,Qr=e.Point.convert(J.offset),jr=Ie.centerPoint.add(Qr),rn=Ie.pointLocation(jr),mn=e.LngLat.convert(J.center||rn);this._normalizeCenter(mn);var Fn=Ie.project(rn),Vn=Ie.project(mn).sub(Fn),ta=Ie.zoomScale(dr-Qe),ia,na;J.around&&(ia=e.LngLat.convert(J.around),na=Ie.locationPoint(ia));var ya={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||dr!==Qe,this._rotating=this._rotating||dt!==xr,this._pitching=this._pitching||Fr!==Ft,this._padding=!Ie.isPaddingEqual(Zr),this._easeId=J.easeId,this._prepareEase(pe,J.noMoveStart,ya),clearTimeout(this._easeEndTimeoutID),this._ease(function(Sa){if(Se._zooming&&(Ie.zoom=e.number(Qe,dr,Sa)),Se._rotating&&(Ie.bearing=e.number(dt,xr,Sa)),Se._pitching&&(Ie.pitch=e.number(Ft,Fr,Sa)),Se._padding&&(Ie.interpolatePadding(nr,Zr,Sa),jr=Ie.centerPoint.add(Qr)),ia)Ie.setLocationAtPoint(ia,na);else{var Ta=Ie.zoomScale(Ie.zoom-Qe),Ca=dr>Qe?Math.min(2,ta):Math.max(.5,ta),Fa=Math.pow(Ca,1-Sa),Za=Ie.unproject(Fn.add(Vn.mult(Sa*Fa)).mult(Ta));Ie.setLocationAtPoint(Ie.renderWorldCopies?Za.wrap():Za,jr)}Se._fireMoveEvents(pe)},function(Sa){Se._afterEase(pe,Sa)},J),this},W.prototype._prepareEase=function(J,pe,Se){Se===void 0&&(Se={}),this._moving=!0,!pe&&!Se.moving&&this.fire(new e.Event("movestart",J)),this._zooming&&!Se.zooming&&this.fire(new e.Event("zoomstart",J)),this._rotating&&!Se.rotating&&this.fire(new e.Event("rotatestart",J)),this._pitching&&!Se.pitching&&this.fire(new e.Event("pitchstart",J))},W.prototype._fireMoveEvents=function(J){this.fire(new e.Event("move",J)),this._zooming&&this.fire(new e.Event("zoom",J)),this._rotating&&this.fire(new e.Event("rotate",J)),this._pitching&&this.fire(new e.Event("pitch",J))},W.prototype._afterEase=function(J,pe){if(!(this._easeId&&pe&&this._easeId===pe)){delete this._easeId;var Se=this._zooming,Ie=this._rotating,Qe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Se&&this.fire(new e.Event("zoomend",J)),Ie&&this.fire(new e.Event("rotateend",J)),Qe&&this.fire(new e.Event("pitchend",J)),this.fire(new e.Event("moveend",J))}},W.prototype.flyTo=function(J,pe){var Se=this;if(!J.essential&&e.browser.prefersReducedMotion){var Ie=e.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ie,pe)}this.stop(),J=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},J);var Qe=this.transform,dt=this.getZoom(),Ft=this.getBearing(),nr=this.getPitch(),dr=this.getPadding(),xr="zoom"in J?e.clamp(+J.zoom,Qe.minZoom,Qe.maxZoom):dt,Fr="bearing"in J?this._normalizeBearing(J.bearing,Ft):Ft,Zr="pitch"in J?+J.pitch:nr,Qr="padding"in J?J.padding:Qe.padding,jr=Qe.zoomScale(xr-dt),rn=e.Point.convert(J.offset),mn=Qe.centerPoint.add(rn),Fn=Qe.pointLocation(mn),Vn=e.LngLat.convert(J.center||Fn);this._normalizeCenter(Vn);var ta=Qe.project(Fn),ia=Qe.project(Vn).sub(ta),na=J.curve,ya=Math.max(Qe.width,Qe.height),Sa=ya/jr,Ta=ia.mag();if("minZoom"in J){var Ca=e.clamp(Math.min(J.minZoom,dt,xr),Qe.minZoom,Qe.maxZoom),Fa=ya/Qe.zoomScale(Ca-dt);na=Math.sqrt(Fa/Ta*2)}var Za=na*na;function ci(vi){var Ri=(Sa*Sa-ya*ya+(vi?-1:1)*Za*Za*Ta*Ta)/(2*(vi?Sa:ya)*Za*Ta);return Math.log(Math.sqrt(Ri*Ri+1)-Ri)}function Hi(vi){return(Math.exp(vi)-Math.exp(-vi))/2}function yi(vi){return(Math.exp(vi)+Math.exp(-vi))/2}function Ti(vi){return Hi(vi)/yi(vi)}var Wa=ci(0),Vi=function(vi){return yi(Wa)/yi(Wa+na*vi)},Xi=function(vi){return ya*((yi(Wa)*Ti(Wa+na*vi)-Hi(Wa))/Za)/Ta},$i=(ci(1)-Wa)/na;if(Math.abs(Ta)<1e-6||!isFinite($i)){if(Math.abs(ya-Sa)<1e-6)return this.easeTo(J,pe);var Pi=Sa<ya?-1:1;$i=Math.abs(Math.log(Sa/ya))/na,Xi=function(){return 0},Vi=function(vi){return Math.exp(Pi*na*vi)}}if("duration"in J)J.duration=+J.duration;else{var so="screenSpeed"in J?+J.screenSpeed/na:+J.speed;J.duration=1e3*$i/so}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=Ft!==Fr,this._pitching=Zr!==nr,this._padding=!Qe.isPaddingEqual(Qr),this._prepareEase(pe,!1),this._ease(function(vi){var Ri=vi*$i,Fo=1/Vi(Ri);Qe.zoom=vi===1?xr:dt+Qe.scaleZoom(Fo),Se._rotating&&(Qe.bearing=e.number(Ft,Fr,vi)),Se._pitching&&(Qe.pitch=e.number(nr,Zr,vi)),Se._padding&&(Qe.interpolatePadding(dr,Qr,vi),mn=Qe.centerPoint.add(rn));var es=vi===1?Vn:Qe.unproject(ta.add(ia.mult(Xi(Ri))).mult(Fo));Qe.setLocationAtPoint(Qe.renderWorldCopies?es.wrap():es,mn),Se._fireMoveEvents(pe)},function(){return Se._afterEase(pe)},J),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(J,pe){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Se=this._onEaseEnd;delete this._onEaseEnd,Se.call(this,pe)}if(!J){var Ie=this.handlers;Ie&&Ie.stop()}return this},W.prototype._ease=function(J,pe,Se){Se.animate===!1||Se.duration===0?(J(1),pe()):(this._easeStart=e.browser.now(),this._easeOptions=Se,this._onEaseFrame=J,this._onEaseEnd=pe,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var J=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(J,pe){J=e.wrap(J,-180,180);var Se=Math.abs(J-pe);return Math.abs(J-360-pe)<Se&&(J-=360),Math.abs(J+360-pe)<Se&&(J+=360),J},W.prototype._normalizeCenter=function(J){var pe=this.transform;if(!(!pe.renderWorldCopies||pe.lngRange)){var Se=J.lng-pe.center.lng;J.lng+=Se>180?-360:Se<-180?360:0}},W}(e.Evented),Jl=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Jl.prototype.getDefaultPosition=function(){return"bottom-right"},Jl.prototype.onAdd=function(W){var ve=this.options&&this.options.compact;return this._map=W,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ve&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ve===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Jl.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Jl.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ve=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var J=ve.reduce(function(pe,Se,Ie){return Se.value&&(pe+=Se.key+"="+Se.value+(Ie<ve.length-1?"&":"")),pe},"?");W.href=e.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},Jl.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Jl.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(dt){return typeof dt!="string"?"":dt})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var ve=this._map.style.stylesheet;this.styleOwner=ve.owner,this.styleId=ve.id}var J=this._map.style.sourceCaches;for(var pe in J){var Se=J[pe];if(Se.used){var Ie=Se.getSource();Ie.attribution&&W.indexOf(Ie.attribution)<0&&W.push(Ie.attribution)}}W.sort(function(dt,Ft){return dt.length-Ft.length}),W=W.filter(function(dt,Ft){for(var nr=Ft+1;nr<W.length;nr++)if(W[nr].indexOf(dt)>=0)return!1;return!0});var Qe=W.join(" | ");Qe!==this._attribHTML&&(this._attribHTML=Qe,W.length?(this._innerContainer.innerHTML=Qe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Jl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ki=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Ki.prototype.onAdd=function(W){this._map=W,this._container=n.create("div","mapboxgl-ctrl");var ve=n.create("a","mapboxgl-ctrl-logo");return ve.target="_blank",ve.rel="noopener nofollow",ve.href="https://www.mapbox.com/",ve.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ve.setAttribute("rel","noopener nofollow"),this._container.appendChild(ve),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ki.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ki.prototype.getDefaultPosition=function(){return"bottom-left"},Ki.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Ki.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var ve in W){var J=W[ve].getSource();if(J.mapbox_logo)return!0}return!1}},Ki.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var ve=W[0];this._map.getCanvasContainer().offsetWidth<250?ve.classList.add("mapboxgl-compact"):ve.classList.remove("mapboxgl-compact")}};var jo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};jo.prototype.add=function(W){var ve=++this._id,J=this._queue;return J.push({callback:W,id:ve,cancelled:!1}),ve},jo.prototype.remove=function(W){for(var ve=this._currentlyRunning,J=ve?this._queue.concat(ve):this._queue,pe=0,Se=J;pe<Se.length;pe+=1){var Ie=Se[pe];if(Ie.id===W){Ie.cancelled=!0;return}}},jo.prototype.run=function(W){W===void 0&&(W=0);var ve=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,pe=ve;J<pe.length;J+=1){var Se=pe[J];if(!Se.cancelled&&(Se.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},jo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ep={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mc=e.window.HTMLImageElement,fc=e.window.HTMLElement,xf=e.window.ImageBitmap,jf=-2,Sc=22,il=0,bf=60,ph={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:jf,maxZoom:Sc,minPitch:il,maxPitch:bf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},dh=function(fe){function W(J){var pe=this;if(J=e.extend({},ph,J),J.minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<il)throw new Error("minPitch must be greater than or equal to "+il);if(J.maxPitch!=null&&J.maxPitch>bf)throw new Error("maxPitch must be less than or equal to "+bf);var Se=new Li(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies);if(fe.call(this,Se,J),this._interactive=J.interactive,this._maxTileCacheSize=J.maxTileCacheSize,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new jo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ep,J.locale),this._requestManager=new e.RequestManager(J.transformRequest,J.accessToken),typeof J.container=="string"){if(this._container=e.window.document.getElementById(J.container),!this._container)throw new Error("Container '"+J.container+"' not found.")}else if(J.container instanceof fc)this._container=J.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(J.maxBounds&&this.setMaxBounds(J.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return pe._update(!1)}),this.on("moveend",function(){return pe._update(!1)}),this.on("zoom",function(){return pe._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new oo(this,J);var Ie=typeof J.hash=="string"&&J.hash||void 0;this._hash=J.hash&&new ko(Ie).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,e.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new Jl({customAttribution:J.customAttribution})),this.addControl(new Ki,J.logoPosition),this.on("style.load",function(){pe.transform.unmodified&&pe.jumpTo(pe.style.stylesheet)}),this.on("data",function(Qe){pe._update(Qe.dataType==="style"),pe.fire(new e.Event(Qe.dataType+"data",Qe))}),this.on("dataloading",function(Qe){pe.fire(new e.Event(Qe.dataType+"dataloading",Qe))})}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(pe,Se){if(Se===void 0&&pe.getDefaultPosition&&(Se=pe.getDefaultPosition()),Se===void 0&&(Se="top-right"),!pe||!pe.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ie=pe.onAdd(this);this._controls.push(pe);var Qe=this._controlPositions[Se];return Se.indexOf("bottom")!==-1?Qe.insertBefore(Ie,Qe.firstChild):Qe.appendChild(Ie),this},W.prototype.removeControl=function(pe){if(!pe||!pe.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Se=this._controls.indexOf(pe);return Se>-1&&this._controls.splice(Se,1),pe.onRemove(this),this},W.prototype.resize=function(pe){var Se=this._containerDimensions(),Ie=Se[0],Qe=Se[1];this._resizeCanvas(Ie,Qe),this.transform.resize(Ie,Qe),this.painter.resize(Ie,Qe);var dt=!this._moving;return dt&&(this.stop(),this.fire(new e.Event("movestart",pe)).fire(new e.Event("move",pe))),this.fire(new e.Event("resize",pe)),dt&&this.fire(new e.Event("moveend",pe)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(pe){return this.transform.setMaxBounds(e.LngLatBounds.convert(pe)),this._update()},W.prototype.setMinZoom=function(pe){if(pe=pe==null?jf:pe,pe>=jf&&pe<=this.transform.maxZoom)return this.transform.minZoom=pe,this._update(),this.getZoom()<pe&&this.setZoom(pe),this;throw new Error("minZoom must be between "+jf+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(pe){if(pe=pe==null?Sc:pe,pe>=this.transform.minZoom)return this.transform.maxZoom=pe,this._update(),this.getZoom()>pe&&this.setZoom(pe),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(pe){if(pe=pe==null?il:pe,pe<il)throw new Error("minPitch must be greater than or equal to "+il);if(pe>=il&&pe<=this.transform.maxPitch)return this.transform.minPitch=pe,this._update(),this.getPitch()<pe&&this.setPitch(pe),this;throw new Error("minPitch must be between "+il+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(pe){if(pe=pe==null?bf:pe,pe>bf)throw new Error("maxPitch must be less than or equal to "+bf);if(pe>=this.transform.minPitch)return this.transform.maxPitch=pe,this._update(),this.getPitch()>pe&&this.setPitch(pe),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(pe){return this.transform.renderWorldCopies=pe,this._update()},W.prototype.project=function(pe){return this.transform.locationPoint(e.LngLat.convert(pe))},W.prototype.unproject=function(pe){return this.transform.pointLocation(e.Point.convert(pe))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(pe,Se,Ie){var Qe=this,dt;if(pe==="mouseenter"||pe==="mouseover"){var Ft=!1,nr=function(jr){var rn=Qe.getLayer(Se)?Qe.queryRenderedFeatures(jr.point,{layers:[Se]}):[];rn.length?Ft||(Ft=!0,Ie.call(Qe,new Mt(pe,Qe,jr.originalEvent,{features:rn}))):Ft=!1},dr=function(){Ft=!1};return{layer:Se,listener:Ie,delegates:{mousemove:nr,mouseout:dr}}}else if(pe==="mouseleave"||pe==="mouseout"){var xr=!1,Fr=function(jr){var rn=Qe.getLayer(Se)?Qe.queryRenderedFeatures(jr.point,{layers:[Se]}):[];rn.length?xr=!0:xr&&(xr=!1,Ie.call(Qe,new Mt(pe,Qe,jr.originalEvent)))},Zr=function(jr){xr&&(xr=!1,Ie.call(Qe,new Mt(pe,Qe,jr.originalEvent)))};return{layer:Se,listener:Ie,delegates:{mousemove:Fr,mouseout:Zr}}}else{var Qr=function(jr){var rn=Qe.getLayer(Se)?Qe.queryRenderedFeatures(jr.point,{layers:[Se]}):[];rn.length&&(jr.features=rn,Ie.call(Qe,jr),delete jr.features)};return{layer:Se,listener:Ie,delegates:(dt={},dt[pe]=Qr,dt)}}},W.prototype.on=function(pe,Se,Ie){if(Ie===void 0)return fe.prototype.on.call(this,pe,Se);var Qe=this._createDelegatedListener(pe,Se,Ie);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[pe]=this._delegatedListeners[pe]||[],this._delegatedListeners[pe].push(Qe);for(var dt in Qe.delegates)this.on(dt,Qe.delegates[dt]);return this},W.prototype.once=function(pe,Se,Ie){if(Ie===void 0)return fe.prototype.once.call(this,pe,Se);var Qe=this._createDelegatedListener(pe,Se,Ie);for(var dt in Qe.delegates)this.once(dt,Qe.delegates[dt]);return this},W.prototype.off=function(pe,Se,Ie){var Qe=this;if(Ie===void 0)return fe.prototype.off.call(this,pe,Se);var dt=function(Ft){for(var nr=Ft[pe],dr=0;dr<nr.length;dr++){var xr=nr[dr];if(xr.layer===Se&&xr.listener===Ie){for(var Fr in xr.delegates)Qe.off(Fr,xr.delegates[Fr]);return nr.splice(dr,1),Qe}}};return this._delegatedListeners&&this._delegatedListeners[pe]&&dt(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(pe,Se){if(!this.style)return[];Se===void 0&&pe!==void 0&&!(pe instanceof e.Point)&&!Array.isArray(pe)&&(Se=pe,pe=void 0),Se=Se||{},pe=pe||[[0,0],[this.transform.width,this.transform.height]];var Ie;if(pe instanceof e.Point||typeof pe[0]=="number")Ie=[e.Point.convert(pe)];else{var Qe=e.Point.convert(pe[0]),dt=e.Point.convert(pe[1]);Ie=[Qe,new e.Point(dt.x,Qe.y),dt,new e.Point(Qe.x,dt.y),Qe]}return this.style.queryRenderedFeatures(Ie,Se,this.transform)},W.prototype.querySourceFeatures=function(pe,Se){return this.style.querySourceFeatures(pe,Se)},W.prototype.setStyle=function(pe,Se){return Se=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Se),Se.diff!==!1&&Se.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&pe?(this._diffStyle(pe,Se),this):(this._localIdeographFontFamily=Se.localIdeographFontFamily,this._updateStyle(pe,Se))},W.prototype._getUIString=function(pe){var Se=this._locale[pe];if(Se==null)throw new Error("Missing UI string '"+pe+"'");return Se},W.prototype._updateStyle=function(pe,Se){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),pe)this.style=new vs(this,Se||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof pe=="string"?this.style.loadURL(pe):this.style.loadJSON(pe),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new vs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(pe,Se){var Ie=this;if(typeof pe=="string"){var Qe=this._requestManager.normalizeStyleURL(pe),dt=this._requestManager.transformRequest(Qe,e.ResourceType.Style);e.getJSON(dt,function(Ft,nr){Ft?Ie.fire(new e.ErrorEvent(Ft)):nr&&Ie._updateDiff(nr,Se)})}else typeof pe=="object"&&this._updateDiff(pe,Se)},W.prototype._updateDiff=function(pe,Se){try{this.style.setState(pe)&&this._update(!0)}catch(Ie){e.warnOnce("Unable to perform style diff: "+(Ie.message||Ie.error||Ie)+".  Rebuilding the style from scratch."),this._updateStyle(pe,Se)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(pe,Se){return this._lazyInitEmptyStyle(),this.style.addSource(pe,Se),this._update(!0)},W.prototype.isSourceLoaded=function(pe){var Se=this.style&&this.style.sourceCaches[pe];if(Se===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+pe+"'")));return}return Se.loaded()},W.prototype.areTilesLoaded=function(){var pe=this.style&&this.style.sourceCaches;for(var Se in pe){var Ie=pe[Se],Qe=Ie._tiles;for(var dt in Qe){var Ft=Qe[dt];if(!(Ft.state==="loaded"||Ft.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(pe,Se,Ie){return this._lazyInitEmptyStyle(),this.style.addSourceType(pe,Se,Ie)},W.prototype.removeSource=function(pe){return this.style.removeSource(pe),this._update(!0)},W.prototype.getSource=function(pe){return this.style.getSource(pe)},W.prototype.addImage=function(pe,Se,Ie){Ie===void 0&&(Ie={});var Qe=Ie.pixelRatio;Qe===void 0&&(Qe=1);var dt=Ie.sdf;dt===void 0&&(dt=!1);var Ft=Ie.stretchX,nr=Ie.stretchY,dr=Ie.content;this._lazyInitEmptyStyle();var xr=0;if(Se instanceof Mc||xf&&Se instanceof xf){var Fr=e.browser.getImageData(Se),Zr=Fr.width,Qr=Fr.height,jr=Fr.data;this.style.addImage(pe,{data:new e.RGBAImage({width:Zr,height:Qr},jr),pixelRatio:Qe,stretchX:Ft,stretchY:nr,content:dr,sdf:dt,version:xr})}else{if(Se.width===void 0||Se.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=Se.width,mn=Se.height,Fn=Se.data,Vn=Se;this.style.addImage(pe,{data:new e.RGBAImage({width:rn,height:mn},new Uint8Array(Fn)),pixelRatio:Qe,stretchX:Ft,stretchY:nr,content:dr,sdf:dt,version:xr,userImage:Vn}),Vn.onAdd&&Vn.onAdd(this,pe)}},W.prototype.updateImage=function(pe,Se){var Ie=this.style.getImage(pe);if(!Ie)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qe=Se instanceof Mc||xf&&Se instanceof xf?e.browser.getImageData(Se):Se,dt=Qe.width,Ft=Qe.height,nr=Qe.data;if(dt===void 0||Ft===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(dt!==Ie.data.width||Ft!==Ie.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var dr=!(Se instanceof Mc||xf&&Se instanceof xf);Ie.data.replace(nr,dr),this.style.updateImage(pe,Ie)},W.prototype.hasImage=function(pe){return pe?!!this.style.getImage(pe):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(pe){this.style.removeImage(pe)},W.prototype.loadImage=function(pe,Se){e.getImage(this._requestManager.transformRequest(pe,e.ResourceType.Image),Se)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(pe,Se){return this._lazyInitEmptyStyle(),this.style.addLayer(pe,Se),this._update(!0)},W.prototype.moveLayer=function(pe,Se){return this.style.moveLayer(pe,Se),this._update(!0)},W.prototype.removeLayer=function(pe){return this.style.removeLayer(pe),this._update(!0)},W.prototype.getLayer=function(pe){return this.style.getLayer(pe)},W.prototype.setLayerZoomRange=function(pe,Se,Ie){return this.style.setLayerZoomRange(pe,Se,Ie),this._update(!0)},W.prototype.setFilter=function(pe,Se,Ie){return Ie===void 0&&(Ie={}),this.style.setFilter(pe,Se,Ie),this._update(!0)},W.prototype.getFilter=function(pe){return this.style.getFilter(pe)},W.prototype.setPaintProperty=function(pe,Se,Ie,Qe){return Qe===void 0&&(Qe={}),this.style.setPaintProperty(pe,Se,Ie,Qe),this._update(!0)},W.prototype.getPaintProperty=function(pe,Se){return this.style.getPaintProperty(pe,Se)},W.prototype.setLayoutProperty=function(pe,Se,Ie,Qe){return Qe===void 0&&(Qe={}),this.style.setLayoutProperty(pe,Se,Ie,Qe),this._update(!0)},W.prototype.getLayoutProperty=function(pe,Se){return this.style.getLayoutProperty(pe,Se)},W.prototype.setLight=function(pe,Se){return Se===void 0&&(Se={}),this._lazyInitEmptyStyle(),this.style.setLight(pe,Se),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(pe,Se){return this.style.setFeatureState(pe,Se),this._update()},W.prototype.removeFeatureState=function(pe,Se){return this.style.removeFeatureState(pe,Se),this._update()},W.prototype.getFeatureState=function(pe){return this.style.getFeatureState(pe)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var pe=0,Se=0;return this._container&&(pe=this._container.clientWidth||400,Se=this._container.clientHeight||300),[pe,Se]},W.prototype._detectMissingCSS=function(){var pe=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");pe!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var pe=this._container;pe.classList.add("mapboxgl-map");var Se=this._missingCSSCanary=n.create("div","mapboxgl-canary",pe);Se.style.visibility="hidden",this._detectMissingCSS();var Ie=this._canvasContainer=n.create("div","mapboxgl-canvas-container",pe);this._interactive&&Ie.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Ie),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Qe=this._containerDimensions();this._resizeCanvas(Qe[0],Qe[1]);var dt=this._controlContainer=n.create("div","mapboxgl-control-container",pe),Ft=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(nr){Ft[nr]=n.create("div","mapboxgl-ctrl-"+nr,dt)})},W.prototype._resizeCanvas=function(pe,Se){var Ie=e.browser.devicePixelRatio||1;this._canvas.width=Ie*pe,this._canvas.height=Ie*Se,this._canvas.style.width=pe+"px",this._canvas.style.height=Se+"px"},W.prototype._setupPainter=function(){var pe=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Se=this._canvas.getContext("webgl",pe)||this._canvas.getContext("experimental-webgl",pe);if(!Se){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new fi(Se,this.transform),e.webpSupported.testSupport(Se)},W.prototype._contextLost=function(pe){pe.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:pe}))},W.prototype._contextRestored=function(pe){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:pe}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(pe){return this.style?(this._styleDirty=this._styleDirty||pe,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(pe){return this._update(),this._renderTaskQueue.add(pe)},W.prototype._cancelRenderFrame=function(pe){this._renderTaskQueue.remove(pe)},W.prototype._render=function(pe){var Se=this,Ie,Qe=0,dt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ie=dt.createQueryEXT(),dt.beginQueryEXT(dt.TIME_ELAPSED_EXT,Ie),Qe=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(pe),!this._removed){var Ft=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var nr=this.transform.zoom,dr=e.browser.now();this.style.zoomHistory.update(nr,dr);var xr=new e.EvaluationParameters(nr,{now:dr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Fr=xr.crossFadingFactor();(Fr!==1||Fr!==this._crossFadingFactor)&&(Ft=!0,this._crossFadingFactor=Fr),this.style.update(xr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ft)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Zr=e.browser.now()-Qe;dt.endQueryEXT(dt.TIME_ELAPSED_EXT,Ie),setTimeout(function(){var rn=dt.getQueryObjectEXT(Ie,dt.QUERY_RESULT_EXT)/1e6;dt.deleteQueryEXT(Ie),Se.fire(new e.Event("gpu-timing-frame",{cpuTime:Zr,gpuTime:rn}))},50)}if(this.listens("gpu-timing-layer")){var Qr=this.painter.collectGpuTimers();setTimeout(function(){var rn=Se.painter.queryGpuTimers(Qr);Se.fire(new e.Event("gpu-timing-layer",{layerTimes:rn}))},50)}var jr=this._sourcesDirty||this._styleDirty||this._placementDirty;return jr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var pe=0,Se=this._controls;pe<Se.length;pe+=1){var Ie=Se[pe];Ie.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Qe=this.painter.context.gl.getExtension("WEBGL_lose_context");Qe&&Qe.loseContext(),cc(this._canvasContainer),cc(this._controlContainer),cc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var pe=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Se){pe._frame=null,pe._render(Se)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(pe){this._trackResize&&this.resize({originalEvent:pe})._update()},ve.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ve.showTileBoundaries.set=function(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())},ve.showPadding.get=function(){return!!this._showPadding},ve.showPadding.set=function(J){this._showPadding!==J&&(this._showPadding=J,this._update())},ve.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ve.showCollisionBoxes.set=function(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())},ve.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ve.showOverdrawInspector.set=function(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())},ve.repaint.get=function(){return!!this._repaint},ve.repaint.set=function(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())},ve.vertices.get=function(){return!!this._vertices},ve.vertices.set=function(J){this._vertices=J,this._update()},W.prototype._setCacheLimits=function(pe,Se){e.setCacheLimits(pe,Se)},ve.version.get=function(){return e.version},Object.defineProperties(W.prototype,ve),W}(Wf);function cc(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}var Ec={showCompass:!0,showZoom:!0,visualizePitch:!1},qu=function(W){var ve=this;this.options=e.extend({},Ec,W),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return ve._map.zoomIn({},{originalEvent:J})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return ve._map.zoomOut({},{originalEvent:J})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){ve.options.visualizePitch?ve._map.resetNorthPitch({},{originalEvent:J}):ve._map.resetNorth({},{originalEvent:J})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};qu.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},qu.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},qu.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wl(this._map,this._compass,this.options.visualizePitch)),this._container},qu.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},qu.prototype._createButton=function(W,ve){var J=n.create("button",W,this._container);return J.type="button",J.addEventListener("click",ve),J},qu.prototype._setButtonTitle=function(W,ve){var J=this._map._getUIString("NavigationControl."+ve);W.title=J,W.setAttribute("aria-label",J)};var wl=function(W,ve,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=ve,this.mouseRotate=new ca({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,J&&(this.mousePitch=new Ra({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ve,"mousedown",this.mousedown),n.addEventListener(ve,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ve,"touchmove",this.touchmove),n.addEventListener(ve,"touchend",this.touchend),n.addEventListener(ve,"touchcancel",this.reset)};wl.prototype.down=function(W,ve){this.mouseRotate.mousedown(W,ve),this.mousePitch&&this.mousePitch.mousedown(W,ve),n.disableDrag()},wl.prototype.move=function(W,ve){var J=this.map,pe=this.mouseRotate.mousemoveWindow(W,ve);if(pe&&pe.bearingDelta&&J.setBearing(J.getBearing()+pe.bearingDelta),this.mousePitch){var Se=this.mousePitch.mousemoveWindow(W,ve);Se&&Se.pitchDelta&&J.setPitch(J.getPitch()+Se.pitchDelta)}},wl.prototype.off=function(){var W=this.element;n.removeEventListener(W,"mousedown",this.mousedown),n.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(W,"touchmove",this.touchmove),n.removeEventListener(W,"touchend",this.touchend),n.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},wl.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},wl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),n.mousePos(this.element,W)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},wl.prototype.mousemove=function(W){this.move(W,n.mousePos(this.element,W))},wl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},wl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},wl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},wl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},wl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function ef(fe,W,ve){if(fe=new e.LngLat(fe.lng,fe.lat),W){var J=new e.LngLat(fe.lng-360,fe.lat),pe=new e.LngLat(fe.lng+360,fe.lat),Se=ve.locationPoint(fe).distSqr(W);ve.locationPoint(J).distSqr(W)<Se?fe=J:ve.locationPoint(pe).distSqr(W)<Se&&(fe=pe)}for(;Math.abs(fe.lng-ve.center.lng)>180;){var Ie=ve.locationPoint(fe);if(Ie.x>=0&&Ie.y>=0&&Ie.x<=ve.width&&Ie.y<=ve.height)break;fe.lng>ve.center.lng?fe.lng-=360:fe.lng+=360}return fe}var hc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kc(fe,W,ve){var J=fe.classList;for(var pe in hc)J.remove("mapboxgl-"+ve+"-anchor-"+pe);J.add("mapboxgl-"+ve+"-anchor-"+W)}var Xf=function(fe){function W(ve,J){var pe=this;if(fe.call(this),(ve instanceof e.window.HTMLElement||J)&&(ve=e.extend({element:ve},J)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ve&&ve.anchor||"center",this._color=ve&&ve.color||"#3FB1CE",this._draggable=ve&&ve.draggable||!1,this._state="inactive",this._rotation=ve&&ve.rotation||0,this._rotationAlignment=ve&&ve.rotationAlignment||"auto",this._pitchAlignment=ve&&ve.pitchAlignment&&ve.pitchAlignment!=="auto"?ve.pitchAlignment:this._rotationAlignment,!ve||!ve.element){this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Se=n.createNS("http://www.w3.org/2000/svg","svg");Se.setAttributeNS(null,"display","block"),Se.setAttributeNS(null,"height","41px"),Se.setAttributeNS(null,"width","27px"),Se.setAttributeNS(null,"viewBox","0 0 27 41");var Ie=n.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"stroke","none"),Ie.setAttributeNS(null,"stroke-width","1"),Ie.setAttributeNS(null,"fill","none"),Ie.setAttributeNS(null,"fill-rule","evenodd");var Qe=n.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"fill-rule","nonzero");var dt=n.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),dt.setAttributeNS(null,"fill","#000000");for(var Ft=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],nr=0,dr=Ft;nr<dr.length;nr+=1){var xr=dr[nr],Fr=n.createNS("http://www.w3.org/2000/svg","ellipse");Fr.setAttributeNS(null,"opacity","0.04"),Fr.setAttributeNS(null,"cx","10.5"),Fr.setAttributeNS(null,"cy","5.80029008"),Fr.setAttributeNS(null,"rx",xr.rx),Fr.setAttributeNS(null,"ry",xr.ry),dt.appendChild(Fr)}var Zr=n.createNS("http://www.w3.org/2000/svg","g");Zr.setAttributeNS(null,"fill",this._color);var Qr=n.createNS("http://www.w3.org/2000/svg","path");Qr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zr.appendChild(Qr);var jr=n.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"opacity","0.25"),jr.setAttributeNS(null,"fill","#000000");var rn=n.createNS("http://www.w3.org/2000/svg","path");rn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),jr.appendChild(rn);var mn=n.createNS("http://www.w3.org/2000/svg","g");mn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),mn.setAttributeNS(null,"fill","#FFFFFF");var Fn=n.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Vn=n.createNS("http://www.w3.org/2000/svg","circle");Vn.setAttributeNS(null,"fill","#000000"),Vn.setAttributeNS(null,"opacity","0.25"),Vn.setAttributeNS(null,"cx","5.5"),Vn.setAttributeNS(null,"cy","5.5"),Vn.setAttributeNS(null,"r","5.4999962");var ta=n.createNS("http://www.w3.org/2000/svg","circle");ta.setAttributeNS(null,"fill","#FFFFFF"),ta.setAttributeNS(null,"cx","5.5"),ta.setAttributeNS(null,"cy","5.5"),ta.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(Vn),Fn.appendChild(ta),Qe.appendChild(dt),Qe.appendChild(Zr),Qe.appendChild(jr),Qe.appendChild(mn),Qe.appendChild(Fn),Se.appendChild(Qe),this._element.appendChild(Se),this._offset=e.Point.convert(ve&&ve.offset||[0,-14])}else this._element=ve.element,this._offset=e.Point.convert(ve&&ve.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ia){ia.preventDefault()}),this._element.addEventListener("mousedown",function(ia){ia.preventDefault()}),this._element.addEventListener("focus",function(){var ia=pe._map.getContainer();ia.scrollTop=0,ia.scrollLeft=0}),kc(this._element,this._anchor,"marker"),this._popup=null}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var pe=38.1,Se=13.5,Ie=Math.sqrt(Math.pow(Se,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-pe],"bottom-left":[Ie,(pe-Se+Ie)*-1],"bottom-right":[-Ie,(pe-Se+Ie)*-1],left:[Se,(pe-Se)*-1],right:[-Se,(pe-Se)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(J){var pe=J.code,Se=J.charCode||J.keyCode;(pe==="Space"||pe==="Enter"||Se===32||Se===13)&&this.togglePopup()},W.prototype._onMapClick=function(J){var pe=J.originalEvent.target,Se=this._element;this._popup&&(pe===Se||Se.contains(pe))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},W.prototype._update=function(J){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ef(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var pe="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?pe="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(pe="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Se="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Se="rotateX(0deg)":this._pitchAlignment==="map"&&(Se="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),n.setTransform(this._element,hc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Se+" "+pe)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(J){return this._offset=e.Point.convert(J),this._update(),this},W.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),gh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},_f;function vc(fe){_f!==void 0?fe(_f):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){_f=W.state!=="denied",fe(_f)}):(_f=!!e.window.navigator.geolocation,fe(_f))}var Zf=0,wf=!1,yh=function(fe){function W(ve){fe.call(this),this.options=e.extend({},gh,ve),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){return this._map=J,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),vc(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zf=0,wf=!1},W.prototype._isOutOfMapMaxBounds=function(J){var pe=this._map.getMaxBounds(),Se=J.coords;return pe&&(Se.longitude<pe.getWest()||Se.longitude>pe.getEast()||Se.latitude<pe.getSouth()||Se.latitude>pe.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function(J){if(!!this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",J)),this._finish()}},W.prototype._updateCamera=function(J){var pe=new e.LngLat(J.coords.longitude,J.coords.latitude),Se=J.coords.accuracy,Ie=this._map.getBearing(),Qe=e.extend({bearing:Ie},this.options.fitBoundsOptions);this._map.fitBounds(pe.toBounds(Se),Qe,{geolocateSource:!0})},W.prototype._updateMarker=function(J){if(J){var pe=new e.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(pe).addTo(this._map),this._userLocationDotMarker.setLngLat(pe).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,pe=this._map.unproject([0,J]),Se=this._map.unproject([1,J]),Ie=pe.distanceTo(Se),Qe=Math.ceil(2*this._accuracy/Ie);this._circleElement.style.width=Qe+"px",this._circleElement.style.height=Qe+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(J){if(!!this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var pe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=pe,this._geolocateButton.setAttribute("aria-label",pe),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&wf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",J)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(J){var pe=this;if(this._container.addEventListener("contextmenu",function(Qe){return Qe.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Se=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Se,this._geolocateButton.setAttribute("aria-label",Se)}else{var Ie=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ie,this._geolocateButton.setAttribute("aria-label",Ie)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xf(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Qe){var dt=Qe.originalEvent&&Qe.originalEvent.type==="resize";!Qe.geolocateSource&&pe._watchState==="ACTIVE_LOCK"&&!dt&&(pe._watchState="BACKGROUND",pe._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),pe._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),pe.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zf--,wf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Zf++;var J;Zf>1?(J={maximumAge:6e5,timeout:0},wf=!0):(J=this.options.positionOptions,wf=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),nv={maxWidth:100,unit:"metric"},Tf=function(W){this.options=e.extend({},nv,W),e.bindAll(["_onMove","setUnit"],this)};Tf.prototype.getDefaultPosition=function(){return"bottom-left"},Tf.prototype._onMove=function(){mh(this._map,this._container,this.options)},Tf.prototype.onAdd=function(W){return this._map=W,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Tf.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Tf.prototype.setUnit=function(W){this.options.unit=W,mh(this._map,this._container,this.options)};function mh(fe,W,ve){var J=ve&&ve.maxWidth||100,pe=fe._container.clientHeight/2,Se=fe.unproject([0,pe]),Ie=fe.unproject([J,pe]),Qe=Se.distanceTo(Ie);if(ve&&ve.unit==="imperial"){var dt=3.2808*Qe;if(dt>5280){var Ft=dt/5280;Kf(W,J,Ft,fe._getUIString("ScaleControl.Miles"))}else Kf(W,J,dt,fe._getUIString("ScaleControl.Feet"))}else if(ve&&ve.unit==="nautical"){var nr=Qe/1852;Kf(W,J,nr,fe._getUIString("ScaleControl.NauticalMiles"))}else Qe>=1e3?Kf(W,J,Qe/1e3,fe._getUIString("ScaleControl.Kilometers")):Kf(W,J,Qe,fe._getUIString("ScaleControl.Meters"))}function Kf(fe,W,ve,J){var pe=iv(ve),Se=pe/ve;fe.style.width=W*Se+"px",fe.innerHTML=pe+"&nbsp;"+J}function av(fe){var W=Math.pow(10,Math.ceil(-Math.log(fe)/Math.LN10));return Math.round(fe*W)/W}function iv(fe){var W=Math.pow(10,(""+Math.floor(fe)).length-1),ve=fe/W;return ve=ve>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:av(ve),W*ve}var gu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};gu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},gu.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},gu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},gu.prototype._setupUI=function(){var W=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},gu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},gu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},gu.prototype._isFullscreen=function(){return this._fullscreen},gu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},gu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ov={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},sv=function(fe){function W(ve){fe.call(this),this.options=e.extend(Object.create(ov),ve),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(J){return this.setDOMContent(e.window.document.createTextNode(J))},W.prototype.setHTML=function(J){var pe=e.window.document.createDocumentFragment(),Se=e.window.document.createElement("body"),Ie;for(Se.innerHTML=J;Ie=Se.firstChild,!!Ie;)pe.appendChild(Ie);return this.setDOMContent(pe)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},W.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},W.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},W.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},W.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},W.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(J){this._update(J.point)},W.prototype._onMouseMove=function(J){this._update(J.point)},W.prototype._onDrag=function(J){this._update(J.point)},W.prototype._update=function(J){var pe=this,Se=this._lngLat||this._trackPointer;if(!(!this._map||!Se||!this._content)&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Fr){return pe._container.classList.add(Fr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ef(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Ie=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),Qe=this.options.anchor,dt=xh(this.options.offset);if(!Qe){var Ft=this._container.offsetWidth,nr=this._container.offsetHeight,dr;Ie.y+dt.bottom.y<nr?dr=["top"]:Ie.y>this._map.transform.height-nr?dr=["bottom"]:dr=[],Ie.x<Ft/2?dr.push("left"):Ie.x>this._map.transform.width-Ft/2&&dr.push("right"),dr.length===0?Qe="bottom":Qe=dr.join("-")}var xr=Ie.add(dt[Qe]).round();n.setTransform(this._container,hc[Qe]+" translate("+xr.x+"px,"+xr.y+"px)"),kc(this._container,Qe,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function xh(fe){if(fe)if(typeof fe=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(fe,2)));return{center:new e.Point(0,0),top:new e.Point(0,fe),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-fe),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(fe,0),right:new e.Point(-fe,0)}}else if(fe instanceof e.Point||Array.isArray(fe)){var ve=e.Point.convert(fe);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}else return{center:e.Point.convert(fe.center||[0,0]),top:e.Point.convert(fe.top||[0,0]),"top-left":e.Point.convert(fe["top-left"]||[0,0]),"top-right":e.Point.convert(fe["top-right"]||[0,0]),bottom:e.Point.convert(fe.bottom||[0,0]),"bottom-left":e.Point.convert(fe["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(fe["bottom-right"]||[0,0]),left:e.Point.convert(fe.left||[0,0]),right:e.Point.convert(fe.right||[0,0])};else return xh(new e.Point(0,0))}var lv={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:dh,NavigationControl:qu,GeolocateControl:yh,AttributionControl:Jl,ScaleControl:Tf,FullscreenControl:gu,Popup:sv,Marker:Xf,Style:vs,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:fr,clearPrewarmedResources:Rr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(fe){e.config.ACCESS_TOKEN=fe},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(fe){e.config.API_URL=fe},get workerCount(){return Rt.workerCount},set workerCount(fe){Rt.workerCount=fe},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(fe){e.config.MAX_PARALLEL_IMAGE_REQUESTS=fe},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return lv}),M})},{}],240:[function(o,U,H){U.exports=Math.log2||function(w){return Math.log(w)*Math.LOG2E}},{}],241:[function(o,U,H){U.exports=f;var w=o("mouse-event");function f(M,T){T||(T=M,M=window);var e=0,a=0,n=0,r={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function h(A){var _=!1;return"altKey"in A&&(_=_||A.altKey!==r.alt,r.alt=!!A.altKey),"shiftKey"in A&&(_=_||A.shiftKey!==r.shift,r.shift=!!A.shiftKey),"ctrlKey"in A&&(_=_||A.ctrlKey!==r.control,r.control=!!A.ctrlKey),"metaKey"in A&&(_=_||A.metaKey!==r.meta,r.meta=!!A.metaKey),_}function i(A,_){var g=w.x(_),b=w.y(_);"buttons"in _&&(A=_.buttons|0),(A!==e||g!==a||b!==n||h(_))&&(e=A|0,a=g||0,n=b||0,T&&T(e,a,n,r))}function s(A){i(0,A)}function y(){(e||a||n||r.shift||r.alt||r.meta||r.control)&&(a=n=0,e=0,r.shift=r.alt=r.control=r.meta=!1,T&&T(0,0,0,r))}function d(A){h(A)&&T&&T(e,a,n,r)}function p(A){w.buttons(A)===0?i(0,A):i(e,A)}function c(A){i(e|w.buttons(A),A)}function m(A){i(e&~w.buttons(A),A)}function l(){t||(t=!0,M.addEventListener("mousemove",p),M.addEventListener("mousedown",c),M.addEventListener("mouseup",m),M.addEventListener("mouseleave",s),M.addEventListener("mouseenter",s),M.addEventListener("mouseout",s),M.addEventListener("mouseover",s),M.addEventListener("blur",y),M.addEventListener("keyup",d),M.addEventListener("keydown",d),M.addEventListener("keypress",d),M!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function x(){!t||(t=!1,M.removeEventListener("mousemove",p),M.removeEventListener("mousedown",c),M.removeEventListener("mouseup",m),M.removeEventListener("mouseleave",s),M.removeEventListener("mouseenter",s),M.removeEventListener("mouseout",s),M.removeEventListener("mouseover",s),M.removeEventListener("blur",y),M.removeEventListener("keyup",d),M.removeEventListener("keydown",d),M.removeEventListener("keypress",d),M!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}l();var u={element:M};return Object.defineProperties(u,{enabled:{get:function(){return t},set:function(A){A?l():x()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),u}},{"mouse-event":243}],242:[function(o,U,H){var w={left:0,top:0};U.exports=f;function f(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var n=T.clientX||0,r=T.clientY||0,t=M(e);return a[0]=n-t.left,a[1]=r-t.top,a}function M(T){return T===window||T===document||T===document.body?w:T.getBoundingClientRect()}},{}],243:[function(o,U,H){function w(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}H.buttons=w;function f(e){return e.target||e.srcElement||window}H.element=f;function M(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=f(e),n=a.getBoundingClientRect();return e.clientX-n.left}return 0}H.x=M;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=f(e),n=a.getBoundingClientRect();return e.clientY-n.top}return 0}H.y=T},{}],244:[function(o,U,H){var w=o("to-px");U.exports=f;function f(M,T,e){typeof M=="function"&&(e=!!T,T=M,M=window);var a=w("ex",M),n=function(r){e&&r.preventDefault();var t=r.deltaX||0,h=r.deltaY||0,i=r.deltaZ||0,s=r.deltaMode,y=1;switch(s){case 1:y=a;break;case 2:y=window.innerHeight;break}if(t*=y,h*=y,i*=y,t||h||i)return T(t,h,i,r)};return M.addEventListener("wheel",n),n}},{"to-px":315}],245:[function(o,U,H){(function(w,f){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof U<"u"&&U.exports&&(U.exports=e[T])})("Promise",typeof w<"u"?w:this,function(){var T,e,a,n=Object.prototype.toString,r=typeof f<"u"?function(A){return f(A)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(A,_,g,b){return Object.defineProperty(A,_,{value:g,writable:!0,configurable:b!==!1})}}catch{T=function(_,g,b){return _[g]=b,_}}a=function(){var A,_,g;function b(v,C){this.fn=v,this.self=C,this.next=void 0}return{add:function(C,S){g=new b(C,S),_?_.next=g:A=g,_=g,g=void 0},drain:function(){var C=A;for(A=_=e=void 0;C;)C.fn.call(C.self),C=C.next}}}();function t(u,A){a.add(u,A),e||(e=r(a.drain))}function h(u){var A,_=typeof u;return u!=null&&(_=="object"||_=="function")&&(A=u.then),typeof A=="function"?A:!1}function i(){for(var u=0;u<this.chain.length;u++)s(this,this.state===1?this.chain[u].success:this.chain[u].failure,this.chain[u]);this.chain.length=0}function s(u,A,_){var g,b;try{A===!1?_.reject(u.msg):(A===!0?g=u.msg:g=A.call(void 0,u.msg),g===_.promise?_.reject(TypeError("Promise-chain cycle")):(b=h(g))?b.call(g,_.resolve,_.reject):_.resolve(g))}catch(v){_.reject(v)}}function y(u){var A,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(A=h(u))?t(function(){var g=new c(_);try{A.call(u,function(){y.apply(g,arguments)},function(){d.apply(g,arguments)})}catch(b){d.call(g,b)}}):(_.msg=u,_.state=1,_.chain.length>0&&t(i,_))}catch(g){d.call(new c(_),g)}}}function d(u){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=u,A.state=2,A.chain.length>0&&t(i,A))}function p(u,A,_,g){for(var b=0;b<A.length;b++)(function(C){u.resolve(A[C]).then(function(k){_(C,k)},g)})(b)}function c(u){this.def=u,this.triggered=!1}function m(u){this.promise=u,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(u){if(typeof u!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new m(this);this.then=function(g,b){var v={success:typeof g=="function"?g:!0,failure:typeof b=="function"?b:!1};return v.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");v.resolve=S,v.reject=k}),A.chain.push(v),A.state!==0&&t(i,A),v.promise},this.catch=function(g){return this.then(void 0,g)};try{u.call(void 0,function(g){y.call(A,g)},function(g){d.call(A,g)})}catch(_){d.call(A,_)}}var x=T({},"constructor",l,!1);return l.prototype=x,T(x,"__NPO__",0,!1),T(l,"resolve",function(A){var _=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");b(A)})}),T(l,"reject",function(A){return new this(function(g,b){if(typeof g!="function"||typeof b!="function")throw TypeError("Not a function");b(A)})}),T(l,"all",function(A){var _=this;return n.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):A.length===0?_.resolve([]):new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");var C=A.length,S=Array(C),k=0;p(_,A,function(F,I){S[F]=I,++k===C&&b(S)},v)})}),T(l,"race",function(A){var _=this;return n.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");p(_,A,function(S,k){b(k)},v)})}),l})}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{},o("timers").setImmediate)},{timers:312}],246:[function(o,U,H){var w=Math.PI,f=r(120);U.exports=M;function M(t){for(var h,i=[],s=0,y=0,d=0,p=0,c=null,m=null,l=0,x=0,u=0,A=t.length;u<A;u++){var _=t[u],g=_[0];switch(g){case"M":d=_[1],p=_[2];break;case"A":_=a(l,x,_[1],_[2],r(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(i.push(_.splice(0,7)),_.unshift("C"));break;case"S":var b=l,v=x;(h=="C"||h=="S")&&(b+=b-s,v+=v-y),_=["C",b,v,_[1],_[2],_[3],_[4]];break;case"T":h=="Q"||h=="T"?(c=l*2-c,m=x*2-m):(c=l,m=x),_=e(l,x,c,m,_[1],_[2]);break;case"Q":c=_[1],m=_[2],_=e(l,x,_[1],_[2],_[3],_[4]);break;case"L":_=T(l,x,_[1],_[2]);break;case"H":_=T(l,x,_[1],x);break;case"V":_=T(l,x,l,_[1]);break;case"Z":_=T(l,x,d,p);break}h=g,l=_[_.length-2],x=_[_.length-1],_.length>4?(s=_[_.length-4],y=_[_.length-3]):(s=l,y=x),i.push(_)}return i}function T(t,h,i,s){return["C",t,h,i,s,i,s]}function e(t,h,i,s,y,d){return["C",t/3+2/3*i,h/3+2/3*s,y/3+2/3*i,d/3+2/3*s,y,d]}function a(t,h,i,s,y,d,p,c,m,l){if(l)k=l[0],E=l[1],C=l[2],S=l[3];else{var x=n(t,h,-y);t=x.x,h=x.y,x=n(c,m,-y),c=x.x,m=x.y;var u=(t-c)/2,A=(h-m)/2,_=u*u/(i*i)+A*A/(s*s);_>1&&(_=Math.sqrt(_),i=_*i,s=_*s);var g=i*i,b=s*s,v=(d==p?-1:1)*Math.sqrt(Math.abs((g*b-g*A*A-b*u*u)/(g*A*A+b*u*u)));v==1/0&&(v=1);var C=v*i*A/s+(t+c)/2,S=v*-s*u/i+(h+m)/2,k=Math.asin(((h-S)/s).toFixed(9)),E=Math.asin(((m-S)/s).toFixed(9));k=t<C?w-k:k,E=c<C?w-E:E,k<0&&(k=w*2+k),E<0&&(E=w*2+E),p&&k>E&&(k=k-w*2),!p&&E>k&&(E=E-w*2)}if(Math.abs(E-k)>f){var F=E,I=c,D=m;E=k+f*(p&&E>k?1:-1),c=C+i*Math.cos(E),m=S+s*Math.sin(E);var R=a(c,m,i,s,y,0,p,I,D,[E,F,C,S])}var O=Math.tan((E-k)/4),z=4/3*i*O,B=4/3*s*O,G=[2*t-(t+z*Math.sin(k)),2*h-(h-B*Math.cos(k)),c+z*Math.sin(E),m-B*Math.cos(E),c,m];if(l)return G;R&&(G=G.concat(R));for(var Q=0;Q<G.length;){var X=n(G[Q],G[Q+1],y);G[Q++]=X.x,G[Q++]=X.y}return G}function n(t,h,i){return{x:t*Math.cos(i)-h*Math.sin(i),y:t*Math.sin(i)+h*Math.cos(i)}}function r(t){return t*(w/180)}},{}],247:[function(o,U,H){var w=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(n).map(function(i){return n[i]});if(t.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(i){h[i]=i}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}U.exports=e()?Object.assign:function(a,n){for(var r,t=T(a),h,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var s in r)f.call(r,s)&&(t[s]=r[s]);if(w){h=w(r);for(var y=0;y<h.length;y++)M.call(r,h[y])&&(t[h[y]]=r[h[y]])}}return t}},{}],248:[function(o,U,H){function w(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],r=e.escape||"___",t=!!e.flat;n.forEach(function(s){var y=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),d=[];function p(c,m,l){var x=a.push(c.slice(s[0].length,-s[1].length))-1;return d.push(x),r+x+r}a.forEach(function(c,m){for(var l,x=0;c!=l;)if(l=c,c=c.replace(y,p),x++>1e4)throw Error("References have circular dependency. Please, check them.");a[m]=c}),d=d.reverse(),a=a.map(function(c){return d.forEach(function(m){c=c.replace(new RegExp("(\\"+r+m+"\\"+r+")","g"),s[0]+"$1"+s[1])}),c})});var h=new RegExp("\\"+r+"([0-9]+)\\"+r);function i(s,y,d){for(var p=[],c,m=0;c=h.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");p.push(s.slice(0,c.index)),p.push(i(y[c[1]],y)),s=s.slice(c.index+c[0].length)}return p.push(s),p}return t?a:i(a[0],a)}function f(T,e){if(e&&e.flat){var a=e&&e.escape||"___",n=T[0],r;if(!n)return"";for(var t=new RegExp("\\"+a+"([0-9]+)\\"+a),h=0;n!=r;){if(h++>1e4)throw Error("Circular references in "+T);r=n,n=n.replace(t,i)}return n}return T.reduce(function s(y,d){return Array.isArray(d)&&(d=d.reduce(s,"")),y+d},"");function i(s,y){if(T[y]==null)throw Error("Reference "+y+"is undefined");return T[y]}}function M(T,e){return Array.isArray(T)?f(T,e):w(T,e)}M.parse=w,M.stringify=f,U.exports=M},{}],249:[function(o,U,H){var w=o("pick-by-alias");U.exports=f;function f(M){var T;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?M.length===1?T={width:M[0],height:M[0],x:0,y:0}:M.length===2?T={width:M[0],height:M[1],x:0,y:0}:T={x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(M=w(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:M.left||0,y:M.top||0},M.width==null?M.right?T.width=M.right-T.x:T.width=0:T.width=M.width,M.height==null?M.bottom?T.height=M.bottom-T.y:T.height=0:T.height=M.height),T}},{"pick-by-alias":253}],250:[function(o,U,H){U.exports=M;var w={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},f=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(a){var n=[];return a.replace(f,function(r,t,h){var i=t.toLowerCase();for(h=e(h),i=="m"&&h.length>2&&(n.push([t].concat(h.splice(0,2))),i="l",t=t=="m"?"l":"L");;){if(h.length==w[i])return h.unshift(t),n.push(h);if(h.length<w[i])throw new Error("malformed path data");n.push([t].concat(h.splice(0,w[i])))}}),n}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var n=a.match(T);return n?n.map(Number):[]}},{}],251:[function(o,U,H){U.exports=function(f,M){M||(M=[0,""]),f=String(f);var T=parseFloat(f,10);return M[0]=T,M[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},{}],252:[function(o,U,H){(function(w){(function(){(function(){var f,M,T,e,a,n;typeof performance<"u"&&performance!==null&&performance.now?U.exports=function(){return performance.now()}:typeof w<"u"&&w!==null&&w.hrtime?(U.exports=function(){return(f()-a)/1e6},M=w.hrtime,f=function(){var r;return r=M(),r[0]*1e9+r[1]},e=f(),n=w.uptime()*1e9,a=e-n):Date.now?(U.exports=function(){return Date.now()-T},T=Date.now()):(U.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,o("_process"))},{_process:278}],253:[function(o,U,H){U.exports=function(T,e,a){var n={},r,t;if(typeof e=="string"&&(e=f(e)),Array.isArray(e)){var h={};for(t=0;t<e.length;t++)h[e[t]]=!0;e=h}for(r in e)e[r]=f(e[r]);var i={};for(r in e){var s=e[r];if(Array.isArray(s))for(t=0;t<s.length;t++){var y=s[t];if(a&&(i[y]=!0),y in T){if(n[r]=T[y],a)for(var d=t;d<s.length;d++)i[s[d]]=!0;break}}else r in T&&(e[r]&&(n[r]=T[r]),a&&(i[r]=!0))}if(a)for(r in T)i[r]||(n[r]=T[r]);return n};var w={};function f(M){return w[M]?w[M]:(typeof M=="string"&&(M=w[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(o,U,H){U.exports=function(f,M,T,e){var a=f[0],n=f[1],r=!1;T===void 0&&(T=0),e===void 0&&(e=M.length);for(var t=e-T,h=0,i=t-1;h<t;i=h++){var s=M[h+T][0],y=M[h+T][1],d=M[i+T][0],p=M[i+T][1],c=y>n!=p>n&&a<(d-s)*(n-y)/(p-y)+s;c&&(r=!r)}return r}},{}],255:[function(o,U,H){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var w=o("./lib/build-log"),f=o("./lib/epsilon"),M=o("./lib/intersecter"),T=o("./lib/segment-chainer"),e=o("./lib/segment-selector"),a=o("./lib/geojson"),n=!1,r=f(),t;t={buildLog:function(i){return i===!0?n=w():i===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(i){return r.epsilon(i)},segments:function(i){var s=M(!0,r,n);return i.regions.forEach(s.addRegion),{segments:s.calculate(i.inverted),inverted:i.inverted}},combine:function(i,s){var y=M(!1,r,n);return{combined:y.calculate(i.segments,i.inverted,s.segments,s.inverted),inverted1:i.inverted,inverted2:s.inverted}},selectUnion:function(i){return{segments:e.union(i.combined,n),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:e.intersect(i.combined,n),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:e.difference(i.combined,n),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:e.differenceRev(i.combined,n),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:e.xor(i.combined,n),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:T(i.segments,r,n),inverted:i.inverted}},polygonFromGeoJSON:function(i){return a.toPolygon(t,i)},polygonToGeoJSON:function(i){return a.fromPolygon(t,r,i)},union:function(i,s){return h(i,s,t.selectUnion)},intersect:function(i,s){return h(i,s,t.selectIntersect)},difference:function(i,s){return h(i,s,t.selectDifference)},differenceRev:function(i,s){return h(i,s,t.selectDifferenceRev)},xor:function(i,s){return h(i,s,t.selectXor)}};function h(i,s,y){var d=t.segments(i),p=t.segments(s),c=t.combine(d,p),m=y(c);return t.polygon(m)}typeof window=="object"&&(window.PolyBool=t),U.exports=t},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(o,U,H){function w(){var f,M=0,T=!1;function e(a,n){return f.list.push({type:a,data:n?JSON.parse(JSON.stringify(n)):void 0}),f}return f={list:[],segmentId:function(){return M++},checkIntersection:function(a,n){return e("check",{seg1:a,seg2:n})},segmentChop:function(a,n){return e("div_seg",{seg:a,pt:n}),e("chop",{seg:a,pt:n})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,n){return e("new_seg",{seg:a,primary:n})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,n,r){return e("temp_status",{seg:a,above:n,below:r})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,n,r){return e("status",{seg:a,above:n,below:r})},vert:function(a){return a===T?f:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,n){return e("chain_rem_head",{index:a,pt:n})},chainRemoveTail:function(a,n){return e("chain_rem_tail",{index:a,pt:n})},chainNew:function(a,n){return e("chain_new",{pt1:a,pt2:n})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,n){return e("chain_add_head",{index:a,pt:n})},chainAddTail:function(a,n){return e("chain_add_tail",{index:a,pt:n})},chainConnect:function(a,n){return e("chain_con",{index1:a,index2:n})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,n){return e("chain_join",{index1:a,index2:n})},done:function(){return e("done")}},f}U.exports=w},{}],257:[function(o,U,H){function w(f){typeof f!="number"&&(f=1e-10);var M={epsilon:function(T){return typeof T=="number"&&(f=T),f},pointAboveOrOnLine:function(T,e,a){var n=e[0],r=e[1],t=a[0],h=a[1],i=T[0],s=T[1];return(t-n)*(s-r)-(h-r)*(i-n)>=-f},pointBetween:function(T,e,a){var n=T[1]-e[1],r=a[0]-e[0],t=T[0]-e[0],h=a[1]-e[1],i=t*r+n*h;if(i<f)return!1;var s=r*r+h*h;return!(i-s>-f)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<f},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<f},pointsSame:function(T,e){return M.pointsSameX(T,e)&&M.pointsSameY(T,e)},pointsCompare:function(T,e){return M.pointsSameX(T,e)?M.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var n=T[0]-e[0],r=T[1]-e[1],t=e[0]-a[0],h=e[1]-a[1];return Math.abs(n*h-t*r)<f},linesIntersect:function(T,e,a,n){var r=e[0]-T[0],t=e[1]-T[1],h=n[0]-a[0],i=n[1]-a[1],s=r*i-t*h;if(Math.abs(s)<f)return!1;var y=T[0]-a[0],d=T[1]-a[1],p=(h*d-i*y)/s,c=(r*d-t*y)/s,m={alongA:0,alongB:0,pt:[T[0]+p*r,T[1]+p*t]};return p<=-f?m.alongA=-2:p<f?m.alongA=-1:p-1<=-f?m.alongA=0:p-1<f?m.alongA=1:m.alongA=2,c<=-f?m.alongB=-2:c<f?m.alongB=-1:c-1<=-f?m.alongB=0:c-1<f?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(T,e){for(var a=T[0],n=T[1],r=e[e.length-1][0],t=e[e.length-1][1],h=!1,i=0;i<e.length;i++){var s=e[i][0],y=e[i][1];y-n>f!=t-n>f&&(r-s)*(n-y)/(t-y)+s-a>f&&(h=!h),r=s,t=y}return h}};return M}U.exports=w},{}],258:[function(o,U,H){var w={toPolygon:function(f,M){function T(n){if(n.length<=0)return f.segments({inverted:!1,regions:[]});function r(i){var s=i.slice(0,i.length-1);return f.segments({inverted:!1,regions:[s]})}for(var t=r(n[0]),h=1;h<n.length;h++)t=f.selectDifference(f.combine(t,r(n[h])));return t}if(M.type==="Polygon")return f.polygon(T(M.coordinates));if(M.type==="MultiPolygon"){for(var e=f.segments({inverted:!1,regions:[]}),a=0;a<M.coordinates.length;a++)e=f.selectUnion(f.combine(e,T(M.coordinates[a])));return f.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(f,M,T){T=f.polygon(f.segments(T));function e(p,c){return M.pointInsideRegion([(p[0][0]+p[1][0])*.5,(p[0][1]+p[1][1])*.5],c)}function a(p){return{region:p,children:[]}}var n=a(null);function r(p,c){for(var m=0;m<p.children.length;m++){var l=p.children[m];if(e(c,l.region)){r(l,c);return}}for(var x=a(c),m=0;m<p.children.length;m++){var l=p.children[m];e(l.region,c)&&(x.children.push(l),p.children.splice(m,1),m--)}p.children.push(x)}for(var t=0;t<T.regions.length;t++){var h=T.regions[t];h.length<3||r(n,h)}function i(p,c){for(var m=0,l=p[p.length-1][0],x=p[p.length-1][1],u=[],A=0;A<p.length;A++){var _=p[A][0],g=p[A][1];u.push([_,g]),m+=g*l-_*x,l=_,x=g}var b=m<0;return b!==c&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var s=[];function y(p){var c=[i(p.region,!1)];s.push(c);for(var m=0;m<p.children.length;m++)c.push(d(p.children[m]))}function d(p){for(var c=0;c<p.children.length;c++)y(p.children[c]);return i(p.region,!0)}for(var t=0;t<n.children.length;t++)y(n.children[t]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};U.exports=w},{}],259:[function(o,U,H){var w=o("./linked-list");function f(M,T,e){function a(m,l){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:null,below:null},otherFill:null}}function n(m,l,x){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var r=w.create();function t(m,l,x,u,A,_){var g=T.pointsCompare(l,A);return g!==0?g:T.pointsSame(x,_)?0:m!==u?m?1:-1:T.pointAboveOrOnLine(x,u?A:_,u?_:A)?1:-1}function h(m,l){r.insertBefore(m,function(x){var u=t(m.isStart,m.pt,l,x.isStart,x.pt,x.other.pt);return u<0})}function i(m,l){var x=w.node({isStart:!0,pt:m.start,seg:m,primary:l,other:null,status:null});return h(x,m.end),x}function s(m,l,x){var u=w.node({isStart:!1,pt:l.end,seg:l,primary:x,other:m,status:null});m.other=u,h(u,m.pt)}function y(m,l){var x=i(m,l);return s(x,m,l),x}function d(m,l){e&&e.segmentChop(m.seg,l),m.other.remove(),m.seg.end=l,m.other.pt=l,h(m.other,m.pt)}function p(m,l){var x=n(l,m.seg.end,m.seg);return d(m,l),y(x,m.primary)}function c(m,l){var x=w.create();function u(R,O){var z=R.seg.start,B=R.seg.end,G=O.seg.start,Q=O.seg.end;return T.pointsCollinear(z,G,Q)?T.pointsCollinear(B,G,Q)||T.pointAboveOrOnLine(B,G,Q)?1:-1:T.pointAboveOrOnLine(z,G,Q)?1:-1}function A(R){return x.findTransition(function(O){var z=u(R,O.ev);return z>0})}function _(R,O){var z=R.seg,B=O.seg,G=z.start,Q=z.end,X=B.start,j=B.end;e&&e.checkIntersection(z,B);var re=T.linesIntersect(G,Q,X,j);if(re===!1){if(!T.pointsCollinear(G,Q,X)||T.pointsSame(G,j)||T.pointsSame(Q,X))return!1;var ue=T.pointsSame(G,X),K=T.pointsSame(Q,j);if(ue&&K)return O;var te=!ue&&T.pointBetween(G,X,j),Y=!K&&T.pointBetween(Q,X,j);if(ue)return Y?p(O,Q):p(R,j),O;te&&(K||(Y?p(O,Q):p(R,j)),p(O,G))}else re.alongA===0&&(re.alongB===-1?p(R,X):re.alongB===0?p(R,re.pt):re.alongB===1&&p(R,j)),re.alongB===0&&(re.alongA===-1?p(O,G):re.alongA===0?p(O,re.pt):re.alongA===1&&p(O,Q));return!1}for(var g=[];!r.isEmpty();){var b=r.getHead();if(e&&e.vert(b.pt[0]),b.isStart){let R=function(){if(C){var O=_(b,C);if(O)return O}return S?_(b,S):!1};e&&e.segmentNew(b.seg,b.primary);var v=A(b),C=v.before?v.before.ev:null,S=v.after?v.after.ev:null;e&&e.tempStatus(b.seg,C?C.seg:!1,S?S.seg:!1);var k=R();if(k){if(M){var E;b.seg.myFill.below===null?E=!0:E=b.seg.myFill.above!==b.seg.myFill.below,E&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=b.seg.myFill;e&&e.segmentUpdate(k.seg),b.other.remove(),b.remove()}if(r.getHead()!==b){e&&e.rewind(b.seg);continue}if(M){var E;b.seg.myFill.below===null?E=!0:E=b.seg.myFill.above!==b.seg.myFill.below,S?b.seg.myFill.below=S.seg.myFill.above:b.seg.myFill.below=m,E?b.seg.myFill.above=!b.seg.myFill.below:b.seg.myFill.above=b.seg.myFill.below}else if(b.seg.otherFill===null){var F;S?b.primary===S.primary?F=S.seg.otherFill.above:F=S.seg.myFill.above:F=b.primary?l:m,b.seg.otherFill={above:F,below:F}}e&&e.status(b.seg,C?C.seg:!1,S?S.seg:!1),b.other.status=v.insert(w.node({ev:b}))}else{var I=b.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(x.exists(I.prev)&&x.exists(I.next)&&_(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!b.primary){var D=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=D}g.push(b.seg)}r.getHead().remove()}return e&&e.done(),g}return M?{addRegion:function(m){for(var l,x=m[m.length-1],u=0;u<m.length;u++){l=x,x=m[u];var A=T.pointsCompare(l,x);A!==0&&y(a(A<0?l:x,A<0?x:l),!0)}},calculate:function(m){return c(m,!1)}}:{calculate:function(m,l,x,u){return m.forEach(function(A){y(n(A.start,A.end,A),!0)}),x.forEach(function(A){y(n(A.start,A.end,A),!1)}),c(l,u)}}}U.exports=f},{"./linked-list":260}],260:[function(o,U,H){var w={create:function(){var f={root:{root:!0,next:null},exists:function(M){return!(M===null||M===f.root)},isEmpty:function(){return f.root.next===null},getHead:function(){return f.root.next},insertBefore:function(M,T){for(var e=f.root,a=f.root.next;a!==null;){if(T(a)){M.prev=a.prev,M.next=a,a.prev.next=M,a.prev=M;return}e=a,a=a.next}e.next=M,M.prev=e,M.next=null},findTransition:function(M){for(var T=f.root,e=f.root.next;e!==null&&!M(e);)T=e,e=e.next;return{before:T===f.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return f},node:function(f){return f.prev=null,f.next=null,f.remove=function(){f.prev.next=f.next,f.next&&(f.next.prev=f.prev),f.prev=null,f.next=null},f}};U.exports=w},{}],261:[function(o,U,H){function w(f,M,T){var e=[],a=[];return f.forEach(function(n){var r=n.start,t=n.end;if(M.pointsSame(r,t)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(n);var h={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},s=h;function y(F,I,D){return s.index=F,s.matches_head=I,s.matches_pt1=D,s===h?(s=i,!1):(s=null,!0)}for(var d=0;d<e.length;d++){var p=e[d],c=p[0];p[1];var m=p[p.length-1];if(p[p.length-2],M.pointsSame(c,r)){if(y(d,!0,!0))break}else if(M.pointsSame(c,t)){if(y(d,!0,!1))break}else if(M.pointsSame(m,r)){if(y(d,!1,!0))break}else if(M.pointsSame(m,t)&&y(d,!1,!1))break}if(s===h){e.push([r,t]),T&&T.chainNew(r,t);return}if(s===i){T&&T.chainMatch(h.index);var l=h.index,x=h.matches_pt1?t:r,u=h.matches_head,p=e[l],A=u?p[0]:p[p.length-1],_=u?p[1]:p[p.length-2],g=u?p[p.length-1]:p[0],b=u?p[p.length-2]:p[1];if(M.pointsCollinear(_,A,x)&&(u?(T&&T.chainRemoveHead(h.index,x),p.shift()):(T&&T.chainRemoveTail(h.index,x),p.pop()),A=_),M.pointsSame(g,x)){e.splice(l,1),M.pointsCollinear(b,g,A)&&(u?(T&&T.chainRemoveTail(h.index,A),p.pop()):(T&&T.chainRemoveHead(h.index,A),p.shift())),T&&T.chainClose(h.index),a.push(p);return}u?(T&&T.chainAddHead(h.index,x),p.unshift(x)):(T&&T.chainAddTail(h.index,x),p.push(x));return}function v(F){T&&T.chainReverse(F),e[F].reverse()}function C(F,I){var D=e[F],R=e[I],O=D[D.length-1],z=D[D.length-2],B=R[0],G=R[1];M.pointsCollinear(z,O,B)&&(T&&T.chainRemoveTail(F,O),D.pop(),O=z),M.pointsCollinear(O,B,G)&&(T&&T.chainRemoveHead(I,B),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var S=h.index,k=i.index;T&&T.chainConnect(S,k);var E=e[S].length<e[k].length;h.matches_head?i.matches_head?E?(v(S),C(S,k)):(v(k),C(k,S)):C(k,S):i.matches_head?C(S,k):E?(v(S),C(k,S)):(v(k),C(S,k))}),a}U.exports=w},{}],262:[function(o,U,H){function w(M,T,e){var a=[];return M.forEach(function(n){var r=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);T[r]!==0&&a.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:T[r]===1,below:T[r]===2},otherFill:null})}),e&&e.selected(a),a}var f={union:function(M,T){return w(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(M,T){return w(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(M,T){return w(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(M,T){return w(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(M,T){return w(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};U.exports=f},{}],263:[function(o,U,H){var w=o("stream").Transform,f=o("stream-parser");function M(){w.call(this,{readableObjectMode:!0})}M.prototype=Object.create(w.prototype),M.prototype.constructor=M,f(M.prototype),H.ParserStream=M,H.sliceEq=function(e,a,n){for(var r=a,t=0;t<n.length;)if(e[r++]!==n[t++])return!1;return!0},H.str2arr=function(e,a){var n=[],r=0;if(a&&a==="hex")for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},H.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},H.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},H.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},H.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),n&&(this.statusCode=n)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,H.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(o,U,H){function w(T,e){var a=new Error(T);return a.code=e,a}function f(T){try{return decodeURIComponent(escape(T))}catch{return T}}function M(T,e,a){this.input=T.subarray(e,a),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if(n!=="II*\0"&&n!=="MM\0*")throw w("invalid TIFF signature","EBADDATA");this.big_endian=n[0]==="M"}M.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},M.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},M.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},M.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},M.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(T,e,a){var n=this.read_uint16(e);e+=2;for(var r=0;r<n;r++){var t=this.read_uint16(e),h=this.read_uint16(e+2),i=this.read_uint32(e+4),s=this.exif_format_length(h),y=i*s,d=y<=4?e+8:this.read_uint32(e+8),p=!1;if(d+y>this.input.length)throw w("unexpected EOF","EBADDATA");for(var c=[],m=d,l=0;l<i;l++,m+=s){var x=this.exif_format_read(h,m);if(x===null){c=null;break}c.push(x)}Array.isArray(c)&&h===2&&(c=f(String.fromCharCode.apply(null,c)),c&&c[c.length-1]==="\0"&&(c=c.slice(0,-1))),this.is_subifd_link(T,t)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:t,offset:c[0]}),p=!0);var u={is_big_endian:this.big_endian,ifd:T,tag:t,format:h,count:i,entry_offset:e+this.start,data_length:y,data_offset:d+this.start,value:c,is_subifd_link:p};if(a(u)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},U.exports.ExifParser=M,U.exports.get_orientation=function(T){var e=0;try{return new M(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(o,U,H){var w=o("./common").readUInt16BE,f=o("./common").readUInt32BE;function M(i,s){if(i.length<4+s)return null;var y=f(i,s);return i.length<y+s||y<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(s+4,s+8)),data:i.slice(s+8,s+y),end:s+y}}U.exports.unbox=M;function T(i,s){for(var y=0;;){var d=M(i,y);if(!d)break;switch(d.boxtype){case"ispe":s.sizes.push({width:f(d.data,4),height:f(d.data,8)});break;case"irot":s.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":s.transforms.push({type:"imir",value:d.data[0]&1});break}y=d.end}}function e(i,s,y){for(var d=0,p=0;p<y;p++)d=d*256+(i[s+p]||0);return d}function a(i,s){for(var y=i[4]>>4&15,d=i[4]&15,p=i[5]>>4&15,c=w(i,6),m=8,l=0;l<c;l++){var x=w(i,m);m+=2;var u=w(i,m);m+=2;var A=e(i,m,p);m+=p;var _=w(i,m);if(m+=2,u===0&&_===1){var g=e(i,m,y),b=e(i,m+y,d);s.item_loc[x]={length:b,offset:g+A}}m+=_*(y+d)}}function n(i,s){for(var y=w(i,4),d=6,p=0;p<y;p++){var c=M(i,d);if(!c)break;if(c.boxtype==="infe"){for(var m=w(c.data,4),l="",x=8;x<c.data.length&&c.data[x];x++)l+=String.fromCharCode(c.data[x]);s.item_inf[l]=m}d=c.end}}function r(i,s){for(var y=0;;){var d=M(i,y);if(!d)break;d.boxtype==="ipco"&&T(d.data,s),y=d.end}}function t(i,s){for(var y=4;;){var d=M(i,y);if(!d)break;d.boxtype==="iprp"&&r(d.data,s),d.boxtype==="iloc"&&a(d.data,s),d.boxtype==="iinf"&&n(d.data,s),y=d.end}}function h(i){var s=i.reduce(function(p,c){return p.width>c.width||p.width===c.width&&p.height>c.height?p:c}),y=i.reduce(function(p,c){return p.height>c.height||p.height===c.height&&p.width>c.width?p:c}),d;return s.width>y.height||s.width===y.height&&s.height>y.width?d=s:d=y,d}U.exports.readSizeFromMeta=function(i){var s={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(t(i,s),!!s.sizes.length){var y=h(s.sizes),d=1;s.transforms.forEach(function(c){var m={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(c.type==="imir"&&(c.value===0?d=l[d]:(d=l[d],d=m[d],d=m[d])),c.type==="irot")for(var x=0;x<c.value;x++)d=m[d]});var p=null;return s.item_inf.Exif&&(p=s.item_loc[s.item_inf.Exif]),{width:y.width,height:y.height,orientation:s.transforms.length?d:null,variants:s.sizes,exif_location:p}}},U.exports.getMimeType=function(i){var s=String.fromCharCode.apply(null,i.slice(0,4)),y={};y[s]=!0;for(var d=8;d<i.length;d+=4)y[String.fromCharCode.apply(null,i.slice(d,d+4))]=!0;if(!(!y.mif1&&!y.msf1&&!y.miaf))return s==="avif"||s==="avis"||s==="avio"?{type:"avif",mime:"image/avif"}:s==="heic"||s==="heix"?{type:"heic",mime:"image/heic"}:s==="hevc"||s==="hevx"?{type:"heic",mime:"image/heic-sequence"}:y.avif||y.avis?{type:"avif",mime:"image/avif"}:y.heic||y.heix||y.hevc||y.hevx||y.heis?y.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt32BE,T=o("../miaf_utils"),e=o("../exif_utils"),a=w("ftyp");U.exports=function(n){if(!!f(n,4,a)){var r=T.unbox(n,0);if(!!r){var t=T.getMimeType(r.data);if(!!t){for(var h,i=r.end;;){var s=T.unbox(n,i);if(!s)break;if(i=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){h=s.data;break}}if(!!h){var y=T.readSizeFromMeta(h);if(!!y){var d={width:y.width,height:y.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(y.variants.length>1&&(d.variants=y.variants),y.orientation&&(d.orientation=y.orientation),y.exif_location&&y.exif_location.offset+y.exif_location.length<=n.length){var p=M(n,y.exif_location.offset),c=n.slice(y.exif_location.offset+p+4,y.exif_location.offset+y.exif_location.length),m=e.get_orientation(c);m>0&&(d.orientation=m)}return d}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt16LE,T=w("BM");U.exports=function(e){if(!(e.length<26)&&!!f(e,0,T))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt16LE,T=w("GIF87a"),e=w("GIF89a");U.exports=function(a){if(!(a.length<10)&&!(!f(a,0,T)&&!f(a,0,e)))return{width:M(a,6),height:M(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(o,U,H){var w=o("../common").readUInt16LE,f=0,M=1,T=16;U.exports=function(e){var a=w(e,0),n=w(e,2),r=w(e,4);if(!(a!==f||n!==M||!r)){for(var t=[],h={width:0,height:0},i=0;i<r;i++){var s=e[6+T*i]||256,y=e[6+T*i+1]||256,d={width:s,height:y};t.push(d),(s>h.width||y>h.height)&&(h=d)}return{width:h.width,height:h.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(o,U,H){var w=o("../common").readUInt16BE,f=o("../common").str2arr,M=o("../common").sliceEq,T=o("../exif_utils"),e=f("Exif\0\0");U.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var n=2;;){for(;;){if(a.length-n<2)return;if(a[n++]===255)break}for(var r=a[n++],t;r===255;)r=a[n++];if(208<=r&&r<=217||r===1)t=0;else if(192<=r&&r<=254){if(a.length-n<2)return;t=w(a,n)-2,n+=2}else return;if(r===217||r===218)return;var h;if(r===225&&t>=10&&M(a,n,e)&&(h=T.get_orientation(a.slice(n+6,n+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(a.length-n<t)return;var i={width:w(a,n+3),height:w(a,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return h>0&&(i.orientation=h),i}n+=t}}},{"../common":263,"../exif_utils":264}],271:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt32BE,T=w(`\x89PNG\r

`),e=w("IHDR");U.exports=function(a){if(!(a.length<24)&&!!f(a,0,T)&&!!f(a,12,e))return{width:M(a,16),height:M(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt32BE,T=w("8BPS\0");U.exports=function(e){if(!(e.length<6+16)&&!!f(e,0,T))return{width:M(e,6+12),height:M(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(o,U,H){function w(s){return s===32||s===9||s===13||s===10}function f(s){return typeof s=="number"&&isFinite(s)&&s>0}function M(s){var y=0,d=s.length;for(s[0]===239&&s[1]===187&&s[2]===191&&(y=3);y<d&&w(s[y]);)y++;return y===d?!1:s[y]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(s){var y=s.match(a),d=s.match(n),p=s.match(r);return{width:y&&(y[1]||y[2]),height:d&&(d[1]||d[2]),viewbox:p&&(p[1]||p[2])}}function i(s){return t.test(s)?s.match(t)[0]:"px"}U.exports=function(s){if(!!M(s)){for(var y="",d=0;d<s.length;d++)y+=String.fromCharCode(s[d]);var p=(y.match(T)||[""])[0];if(!!e.test(p)){var c=h(p),m=parseFloat(c.width),l=parseFloat(c.height);if(c.width&&c.height)return!f(m)||!f(l)?void 0:{width:m,height:l,type:"svg",mime:"image/svg+xml",wUnits:i(c.width),hUnits:i(c.height)};var x=(c.viewbox||"").split(" "),u={width:x[2],height:x[3]},A=parseFloat(u.width),_=parseFloat(u.height);if(!(!f(A)||!f(_))&&i(u.width)===i(u.height)){var g=A/_;return c.width?f(m)?{width:m,height:m/g,type:"svg",mime:"image/svg+xml",wUnits:i(c.width),hUnits:i(c.width)}:void 0:c.height?f(l)?{width:l*g,height:l,type:"svg",mime:"image/svg+xml",wUnits:i(c.height),hUnits:i(c.height)}:void 0:{width:A,height:_,type:"svg",mime:"image/svg+xml",wUnits:i(u.width),hUnits:i(u.height)}}}}}},{}],274:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt16LE,T=o("../common").readUInt16BE,e=o("../common").readUInt32LE,a=o("../common").readUInt32BE,n=w("II*\0"),r=w("MM\0*");function t(s,y,d){return d?T(s,y):M(s,y)}function h(s,y,d){return d?a(s,y):e(s,y)}function i(s,y,d){var p=t(s,y+2,d),c=h(s,y+4,d);return c!==1||p!==3&&p!==4?null:p===3?t(s,y+8,d):h(s,y+8,d)}U.exports=function(s){if(!(s.length<8)&&!(!f(s,0,n)&&!f(s,0,r))){var y=s[0]===77,d=h(s,4,y)-8;if(!(d<0)){var p=d+8;if(!(s.length-p<2)){var c=t(s,p+0,y)*12;if(!(c<=0)&&(p+=2,!(s.length-p<c))){var m,l,x,u;for(m=0;m<c;m+=12)u=t(s,p+m,y),u===256?l=i(s,p+m,y):u===257&&(x=i(s,p+m,y));if(l&&x)return{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(o,U,H){var w=o("../common").str2arr,f=o("../common").sliceEq,M=o("../common").readUInt16LE,T=o("../common").readUInt32LE,e=o("../exif_utils"),a=w("RIFF"),n=w("WEBP");function r(i,s){if(!(i[s+3]!==157||i[s+4]!==1||i[s+5]!==42))return{width:M(i,s+6)&16383,height:M(i,s+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(i,s){if(i[s]===47){var y=T(i,s+1);return{width:(y&16383)+1,height:(y>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function h(i,s){return{width:(i[s+6]<<16|i[s+5]<<8|i[s+4])+1,height:(i[s+9]<<s|i[s+8]<<8|i[s+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}U.exports=function(i){if(!(i.length<16)&&!(!f(i,0,a)&&!f(i,8,n))){var s=12,y=null,d=0,p=T(i,4)+8;if(!(p>i.length)){for(;s+8<p;){if(i[s]===0){s++;continue}var c=String.fromCharCode.apply(null,i.slice(s,s+4)),m=T(i,s+4);c==="VP8 "&&m>=10?y=y||r(i,s+8):c==="VP8L"&&m>=9?y=y||t(i,s+8):c==="VP8X"&&m>=10?y=y||h(i,s+8):c==="EXIF"&&(d=e.get_orientation(i.slice(s+8,s+8+m)),s=1/0),s+=8+m}if(!!y)return d>0&&(y.orientation=d),y}}}},{"../common":263,"../exif_utils":264}],276:[function(o,U,H){U.exports={avif:o("./parse_sync/avif"),bmp:o("./parse_sync/bmp"),gif:o("./parse_sync/gif"),ico:o("./parse_sync/ico"),jpeg:o("./parse_sync/jpeg"),png:o("./parse_sync/png"),psd:o("./parse_sync/psd"),svg:o("./parse_sync/svg"),tiff:o("./parse_sync/tiff"),webp:o("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(o,U,H){var w=o("./lib/parsers_sync");function f(M){for(var T=Object.keys(w),e=0;e<T.length;e++){var a=w[T[e]](M);if(a)return a}return null}U.exports=function(T){return f(T)},U.exports.parsers=w},{"./lib/parsers_sync":276}],278:[function(o,U,H){var w=U.exports={},f,M;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?f=setTimeout:f=T}catch{f=T}try{typeof clearTimeout=="function"?M=clearTimeout:M=e}catch{M=e}})();function a(c){if(f===setTimeout)return setTimeout(c,0);if((f===T||!f)&&setTimeout)return f=setTimeout,setTimeout(c,0);try{return f(c,0)}catch{try{return f.call(null,c,0)}catch{return f.call(this,c,0)}}}function n(c){if(M===clearTimeout)return clearTimeout(c);if((M===e||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(c);try{return M(c)}catch{try{return M.call(null,c)}catch{return M.call(this,c)}}}var r=[],t=!1,h,i=-1;function s(){!t||!h||(t=!1,h.length?r=h.concat(r):i=-1,r.length&&y())}function y(){if(!t){var c=a(s);t=!0;for(var m=r.length;m;){for(h=r,r=[];++i<m;)h&&h[i].run();i=-1,m=r.length}h=null,t=!1,n(c)}}w.nextTick=function(c){var m=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)m[l-1]=arguments[l];r.push(new d(c,m)),r.length===1&&!t&&a(y)};function d(c,m){this.fun=c,this.array=m}d.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function p(){}w.on=p,w.addListener=p,w.once=p,w.off=p,w.removeListener=p,w.removeAllListeners=p,w.emit=p,w.prependListener=p,w.prependOnceListener=p,w.listeners=function(c){return[]},w.binding=function(c){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(c){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],279:[function(o,U,H){(function(w){(function(){for(var f=o("performance-now"),M=typeof window>"u"?w:window,T=["moz","webkit"],e="AnimationFrame",a=M["request"+e],n=M["cancel"+e]||M["cancelRequest"+e],r=0;!a&&r<T.length;r++)a=M[T[r]+"Request"+e],n=M[T[r]+"Cancel"+e]||M[T[r]+"CancelRequest"+e];if(!a||!n){var t=0,h=0,i=[],s=1e3/60;a=function(y){if(i.length===0){var d=f(),p=Math.max(0,s-(d-t));t=p+d,setTimeout(function(){var c=i.slice(0);i.length=0;for(var m=0;m<c.length;m++)if(!c[m].cancelled)try{c[m].callback(t)}catch(l){setTimeout(function(){throw l},0)}},Math.round(p))}return i.push({handle:++h,callback:y,cancelled:!1}),h},n=function(y){for(var d=0;d<i.length;d++)i[d].handle===y&&(i[d].cancelled=!0)}}U.exports=function(y){return a.call(M,y)},U.exports.cancel=function(){n.apply(M,arguments)},U.exports.polyfill=function(y){y||(y=M),y.requestAnimationFrame=a,y.cancelAnimationFrame=n}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(o,U,H){var w=o("array-bounds"),f=o("color-normalize"),M=o("update-diff"),T=o("pick-by-alias"),e=o("object-assign"),a=o("flatten-vertex-data"),n=o("to-float32"),r=n.float32,t=n.fract32;U.exports=i;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function i(s,y){if(typeof s=="function"?(y||(y={}),y.regl=s):y=s,y.length&&(y.positions=y),s=y.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=s._gl,p,c,m,l,x,u,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return l=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=s.buffer({usage:"static",type:"float",data:h}),C(y),p=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(k,E){return[E.viewport.x,E.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:l,offset:function(k,E){return E.offset*4},divisor:1},position:{buffer:c,offset:function(k,E){return E.offset*8},divisor:1},positionFract:{buffer:m,offset:function(k,E){return E.offset*8},divisor:1},error:{buffer:x,offset:function(k,E){return E.offset*16},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:h.length}),e(g,{update:C,draw:b,destroy:S,regl:s,gl:d,canvas:d.canvas,groups:_}),g;function g(k){k?C(k):k===null&&S(),b()}function b(k){if(typeof k=="number")return v(k);k&&!Array.isArray(k)&&(k=[k]),s._refresh(),_.forEach(function(E,F){if(!!E){if(k&&(k[F]?E.draw=!0:E.draw=!1),!E.draw){E.draw=!0;return}v(F)}})}function v(k){typeof k=="number"&&(k=_[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],p(k),k.after&&k.after(k)))}function C(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var E=0,F=0;if(g.groups=_=k.map(function(G,Q){var X=_[Q];if(G)typeof G=="function"?G={after:G}:typeof G[0]=="number"&&(G={positions:G});else return X;return G=T(G,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(_[Q]=X={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},G=e({},A,G)),M(X,G,[{lineWidth:function(j){return+j*.5},capSize:function(j){return+j*.5},opacity:parseFloat,errors:function(j){return j=a(j),F+=j.length,j},positions:function(j,re){return j=a(j,"float64"),re.count=Math.floor(j.length/2),re.bounds=w(j,2),re.offset=E,E+=re.count,j}},{color:function(j,re){var ue=re.count;if(j||(j="transparent"),!Array.isArray(j)||typeof j[0]=="number"){var K=j;j=Array(ue);for(var te=0;te<ue;te++)j[te]=K}if(j.length<ue)throw Error("Not enough colors");for(var Y=new Uint8Array(ue*4),V=0;V<ue;V++){var ee=f(j[V],"uint8");Y.set(ee,V*4)}return Y},range:function(j,re,ue){var K=re.bounds;return j||(j=K),re.scale=[1/(j[2]-j[0]),1/(j[3]-j[1])],re.translate=[-j[0],-j[1]],re.scaleFract=t(re.scale),re.translateFract=t(re.translate),j},viewport:function(j){var re;return Array.isArray(j)?re={x:j[0],y:j[1],width:j[2]-j[0],height:j[3]-j[1]}:j?(re={x:j.x||j.left||0,y:j.y||j.top||0},j.right?re.width=j.right-re.x:re.width=j.w||j.width||0,j.bottom?re.height=j.bottom-re.y:re.height=j.h||j.height||0):re={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},re}}]),X}),E||F){var I=_.reduce(function(G,Q,X){return G+(Q?Q.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);_.forEach(function(G,Q){if(!!G){var X=G.positions,j=G.count,re=G.offset,ue=G.color,K=G.errors;!j||(R.set(ue,re*4),O.set(K,re*4),D.set(X,re*2))}});var z=r(D);c(z);var B=t(D,z);m(B),l(R),x(O)}}}function S(){c.destroy(),m.destroy(),l.destroy(),x.destroy(),u.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(o,U,H){var w=o("color-normalize"),f=o("array-bounds"),M=o("object-assign"),T=o("glslify"),e=o("pick-by-alias"),a=o("flatten-vertex-data"),n=o("earcut"),r=o("array-normalize"),t=o("to-float32"),h=t.float32,i=t.fract32,s=o("es6-weak-map"),y=o("parse-rect"),d=o("array-find-index");U.exports=p;function p(c,m){if(!(this instanceof p))return new p(c,m);if(typeof c=="function"?(m||(m={}),m.regl=c):m=c,m.length&&(m.positions=m),c=m.regl,!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(m)}p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new s,p.createShaders=function(c){var m=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,g){return g.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(_,g){return[g.viewport.x,g.viewport.y,_.viewportWidth,_.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,g){return!g.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},x=c(M({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),u;try{u=c(M({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{u=x}var A=c({primitive:"triangle",elements:function(_,g){return g.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(_,g){return[g.viewport.x,g.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:A,rect:x,miter:u}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,m=[],l=arguments.length;l--;)m[l]=arguments[l];m.length&&(c=this).update.apply(c,m),this.draw()},p.prototype.draw=function(){for(var c=this,m=[],l=arguments.length;l--;)m[l]=arguments[l];return(m.length?m:this.passes).forEach(function(x,u){var A;if(x&&Array.isArray(x))return(A=c).draw.apply(A,x);typeof x=="number"&&(x=c.passes[x]),x&&x.count>1&&x.opacity&&(c.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&c.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>p.precisionThreshold||x.scale[1]*x.viewport.height>p.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=p.maxPoints)?c.shaders.rect(x):c.shaders.miter(x)))}),this},p.prototype.update=function(c){var m=this;if(!!c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var l=this,x=l.regl,u=l.gl;if(c.forEach(function(v,C){var S=m.passes[C];if(v!==void 0){if(v===null){m.passes[C]=null;return}if(typeof v[0]=="number"&&(v={positions:v}),v=e(v,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(m.passes[C]=S={id:C,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},v=M({},p.defaults,v)),v.thickness!=null&&(S.thickness=parseFloat(v.thickness)),v.opacity!=null&&(S.opacity=parseFloat(v.opacity)),v.miterLimit!=null&&(S.miterLimit=parseFloat(v.miterLimit)),v.overlay!=null&&(S.overlay=!!v.overlay,C<p.maxLines&&(S.depth=2*(p.maxLines-1-C%p.maxLines)/p.maxLines-1)),v.join!=null&&(S.join=v.join),v.hole!=null&&(S.hole=v.hole),v.fill!=null&&(S.fill=v.fill?w(v.fill,"uint8"):null),v.viewport!=null&&(S.viewport=y(v.viewport)),S.viewport||(S.viewport=y([u.drawingBufferWidth,u.drawingBufferHeight])),v.close!=null&&(S.close=v.close),v.positions===null&&(v.positions=[]),v.positions){var k,E;if(v.positions.x&&v.positions.y){var F=v.positions.x,I=v.positions.y;E=S.count=Math.max(F.length,I.length),k=new Float64Array(E*2);for(var D=0;D<E;D++)k[D*2]=F[D],k[D*2+1]=I[D]}else k=a(v.positions,"float64"),E=S.count=Math.floor(k.length/2);var R=S.bounds=f(k,2);if(S.fill){for(var O=[],z={},B=0,G=0,Q=0,X=S.count;G<X;G++){var j=k[G*2],re=k[G*2+1];isNaN(j)||isNaN(re)||j==null||re==null?(j=k[B*2],re=k[B*2+1],z[G]=B):B=G,O[Q++]=j,O[Q++]=re}if(v.splitNull){S.count-1 in z||(z[S.count]=S.count-1);var ue=Object.keys(z).map(Number).sort(function(Ye,ot){return Ye-ot}),K=[],te=0,Y=S.hole!=null?S.hole[0]:null;if(Y!=null){var V=d(ue,function(Ye){return Ye>=Y});ue=ue.slice(0,V),ue.push(Y)}for(var ee=function(Ye){var ot=O.slice(te*2,ue[Ye]*2).concat(Y?O.slice(Y*2):[]),Ve=(S.hole||[]).map(function(He){return He-Y+(ue[Ye]-te)}),Ae=n(ot,Ve);Ae=Ae.map(function(He){return He+te+(He+te<ue[Ye]?0:Y-ue[Ye])}),K.push.apply(K,Ae),te=ue[Ye]+1},ne=0;ne<ue.length;ne++)ee(ne);for(var Z=0,q=K.length;Z<q;Z++)z[K[Z]]!=null&&(K[Z]=z[K[Z]]);S.triangles=K}else{for(var ie=n(O,S.hole||[]),se=0,ae=ie.length;se<ae;se++)z[ie[se]]!=null&&(ie[se]=z[ie[se]]);S.triangles=ie}}var oe=new Float64Array(k);r(oe,2,R);var be=new Float64Array(E*2+6);S.close?k[0]===k[E*2-2]&&k[1]===k[E*2-1]?(be[0]=oe[E*2-4],be[1]=oe[E*2-3]):(be[0]=oe[E*2-2],be[1]=oe[E*2-1]):(be[0]=oe[0],be[1]=oe[1]),be.set(oe,2),S.close?k[0]===k[E*2-2]&&k[1]===k[E*2-1]?(be[E*2+2]=oe[2],be[E*2+3]=oe[3],S.count-=1):(be[E*2+2]=oe[0],be[E*2+3]=oe[1],be[E*2+4]=oe[2],be[E*2+5]=oe[3]):(be[E*2+2]=oe[E*2-2],be[E*2+3]=oe[E*2-1],be[E*2+4]=oe[E*2-2],be[E*2+5]=oe[E*2-1]);var ce=h(be);S.positionBuffer(ce);var de=i(be,ce);S.positionFractBuffer(de)}if(v.range?S.range=v.range:S.range||(S.range=S.bounds),(v.range||v.positions)&&S.count){var ye=S.bounds,ge=ye[2]-ye[0],me=ye[3]-ye[1],Me=S.range[2]-S.range[0],Le=S.range[3]-S.range[1];S.scale=[ge/Me,me/Le],S.translate=[-S.range[0]/Me+ye[0]/Me||0,-S.range[1]/Le+ye[1]/Le||0],S.scaleFract=i(S.scale),S.translateFract=i(S.translate)}if(v.dashes){var Oe=0,_e;if(!v.dashes||v.dashes.length<2)Oe=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Oe=0;for(var Ee=0;Ee<v.dashes.length;++Ee)Oe+=v.dashes[Ee];_e=new Uint8Array(Oe*p.dashMult);for(var Ze=0,Ge=255,Fe=0;Fe<2;Fe++)for(var Re=0;Re<v.dashes.length;++Re){for(var We=0,xt=v.dashes[Re]*p.dashMult*.5;We<xt;++We)_e[Ze++]=Ge;Ge^=255}}S.dashLength=Oe,S.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(v.color){var Nt=S.count,tr=v.color;tr||(tr="transparent");var Vt=new Uint8Array(Nt*4+4);if(!Array.isArray(tr)||typeof tr[0]=="number")for(var Pt=w(tr,"uint8"),$t=0;$t<Nt+1;$t++)Vt.set(Pt,$t*4);else{for(var Ut=0;Ut<Nt;Ut++){var Lt=w(tr[Ut],"uint8");Vt.set(Lt,Ut*4)}Vt.set(w(tr[0],"uint8"),Nt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:Vt})}}}),c.length<this.passes.length){for(var A=c.length;A<this.passes.length;A++){var _=this.passes[A];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=c.length}for(var g=[],b=0;b<this.passes.length;b++)this.passes[b]!==null&&g.push(this.passes[b]);return this.passes=g,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(o,U,H){function w(S,k){return T(S)||a(S,k)||n(S,k)||h()}function f(S){return M(S)||e(S)||n(S)||t()}function M(S){if(Array.isArray(S))return r(S)}function T(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,k){var E=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(E!=null){var F=[],I=!0,D=!1,R,O;try{for(E=E.call(S);!(I=(R=E.next()).done)&&(F.push(R.value),!(k&&F.length===k));I=!0);}catch(z){D=!0,O=z}finally{try{!I&&E.return!=null&&E.return()}finally{if(D)throw O}}return F}}function n(S,k){if(!!S){if(typeof S=="string")return r(S,k);var E=Object.prototype.toString.call(S).slice(8,-1);if(E==="Object"&&S.constructor&&(E=S.constructor.name),E==="Map"||E==="Set")return Array.from(S);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return r(S,k)}}function r(S,k){(k==null||k>S.length)&&(k=S.length);for(var E=0,F=new Array(k);E<k;E++)F[E]=S[E];return F}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=o("color-normalize"),s=o("array-bounds"),y=o("color-id"),d=o("@plotly/point-cluster"),p=o("object-assign"),c=o("glslify"),m=o("pick-by-alias"),l=o("update-diff"),x=o("flatten-vertex-data"),u=o("is-iexplorer"),A=o("to-float32"),_=o("parse-rect"),g=b;function b(S,k){var E=this;if(!(this instanceof b))return new b(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var F=S._gl,I,D=[],R={},O=[],z=[null],B=[null],G=255,Q=100;this.tooManyColors=u,I=S.texture({data:new Uint8Array(G*4),width:G,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),p(this,{regl:S,gl:F,groups:O,markerCache:B,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:G,maxSize:Q,canvas:F.canvas}),this.update(k);var X={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(K,te){return[E.tooManyColors?0:G,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(K,te){return te.xAttr||{buffer:te.positionBuffer,stride:8,offset:0}},y:function(K,te){return te.yAttr||{buffer:te.positionBuffer,stride:8,offset:4}},xFract:function(K,te){return te.xAttr?{constant:[0,0]}:{buffer:te.positionFractBuffer,stride:8,offset:0}},yFract:function(K,te){return te.yAttr?{constant:[0,0]}:{buffer:te.positionFractBuffer,stride:8,offset:4}},size:function(K,te){return te.size.length?{buffer:te.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(te.size*255/E.maxSize)]}},borderSize:function(K,te){return te.borderSize.length?{buffer:te.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(te.borderSize*255/E.maxSize)]}},colorId:function(K,te){return te.color.length?{buffer:te.colorBuffer,stride:E.tooManyColors?8:4,offset:0}:{constant:E.tooManyColors?D.slice(te.color*4,te.color*4+4):[te.color]}},borderColorId:function(K,te){return te.borderColor.length?{buffer:te.colorBuffer,stride:E.tooManyColors?8:4,offset:E.tooManyColors?4:2}:{constant:E.tooManyColors?D.slice(te.borderColor*4,te.borderColor*4+4):[te.borderColor]}},isActive:function(K,te){return te.activation===!0?{constant:[1]}:te.activation?te.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},j=p({},X);j.frag=c([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),j.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(j);var re=p({},X);re.frag=c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),re.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(re.frag=re.frag.replace("smoothstep","smoothStep"),j.frag=j.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(re)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var S=this,k=arguments.length,E=new Array(k),F=0;F<k;F++)E[F]=arguments[F];var I=this.groups;if(E.length===1&&Array.isArray(E[0])&&(E[0][0]===null||Array.isArray(E[0][0]))&&(E=E[0]),this.regl._refresh(),E.length)for(var D=0;D<E.length;D++)this.drawItem(D,E[D]);else I.forEach(function(R,O){S.drawItem(O)});return this},b.prototype.drawItem=function(S,k){var E=this.groups,F=E[S];if(typeof k=="number"&&(S=k,F=E[k],k=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,k));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,f(this.getMarkerDrawOptions(D,F,k)));I.length&&this.drawMarker(I)}},b.prototype.getMarkerDrawOptions=function(S,k,E){var F=k.range,I=k.tree,D=k.viewport,R=k.activation,O=k.selectionBuffer,z=k.count;if(this.regl,!I)return E?[p({},k,{markerTexture:this.markerTextures[S],activation:R[S],count:E.length,elements:E,offset:0})]:[p({},k,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var B=[],G=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(E){for(var Q=R[S],X=Q.data,j=new Uint8Array(z),re=0;re<E.length;re++){var ue=E[re];j[ue]=X?X[ue]:1}O.subdata(j)}for(var K=G.length;K--;){var te=w(G[K],2),Y=te[0],V=te[1];B.push(p({},k,{markerTexture:this.markerTextures[S],activation:E?O:R[S],offset:Y,count:V-Y}))}return B},b.prototype.update=function(){for(var S=this,k=arguments.length,E=new Array(k),F=0;F<k;F++)E[F]=arguments[F];if(!!E.length){E.length===1&&Array.isArray(E[0])&&(E=E[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,z=this.maxColors,B=this.palette;this.groups=I=E.map(function(G,Q){var X=I[Q];if(G===void 0)return X;G===null?G={positions:null}:typeof G=="function"?G={ondraw:G}:typeof G[0]=="number"&&(G={positions:G}),G=m(G,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),G.positions===null&&(G.positions=[]),G.tooManyColors!=null&&(S.tooManyColors=G.tooManyColors),X||(I[Q]=X={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},G=p({},b.defaults,G)),G.positions&&!("marker"in G)&&(G.marker=X.marker,delete X.marker),G.marker&&!("positions"in G)&&(G.positions=X.positions,delete X.positions);var j=0,re=0;if(l(X,G,[{snap:!0,size:function(me,Me){return me==null&&(me=b.defaults.size),j+=me&&me.length?1:0,me},borderSize:function(me,Me){return me==null&&(me=b.defaults.borderSize),j+=me&&me.length?1:0,me},opacity:parseFloat,color:function(me,Me){return me==null&&(me=b.defaults.color),me=S.updateColor(me),re++,me},borderColor:function(me,Me){return me==null&&(me=b.defaults.borderColor),me=S.updateColor(me),re++,me},bounds:function(me,Me,Le){return"range"in Le||(Le.range=null),me},positions:function(me,Me,Le){var Oe=Me.snap,_e=Me.positionBuffer,Ee=Me.positionFractBuffer,Ze=Me.selectionBuffer;if(me.x||me.y)return me.x.length?Me.xAttr={buffer:R.buffer(me.x),offset:0,stride:4,count:me.x.length}:Me.xAttr={buffer:me.x.buffer,offset:me.x.offset*4||0,stride:(me.x.stride||1)*4,count:me.x.count},me.y.length?Me.yAttr={buffer:R.buffer(me.y),offset:0,stride:4,count:me.y.length}:Me.yAttr={buffer:me.y.buffer,offset:me.y.offset*4||0,stride:(me.y.stride||1)*4,count:me.y.count},Me.count=Math.max(Me.xAttr.count,Me.yAttr.count),me;me=x(me,"float64");var Ge=Me.count=Math.floor(me.length/2),Fe=Me.bounds=Ge?s(me,2):null;if(!Le.range&&!Me.range&&(delete Me.range,Le.range=Fe),!Le.marker&&!Me.marker&&(delete Me.marker,Le.marker=null),Oe&&(Oe===!0||Ge>Oe)?Me.tree=d(me,{bounds:Fe}):Oe&&Oe.length&&(Me.tree=Oe),Me.tree){var Re={primitive:"points",usage:"static",data:Me.tree,type:"uint32"};Me.elements?Me.elements(Re):Me.elements=R.elements(Re)}var We=A.float32(me);_e({data:We,usage:"dynamic"});var xt=A.fract32(me,We);return Ee({data:xt,usage:"dynamic"}),Ze({data:new Uint8Array(Ge),type:"uint8",usage:"stream"}),me}},{marker:function(me,Me,Le){var Oe=Me.activation;if(Oe.forEach(function(xt){return xt&&xt.destroy&&xt.destroy()}),Oe.length=0,!me||typeof me[0]=="number"){var _e=S.addMarker(me);Oe[_e]=!0}else{for(var Ee=[],Ze=0,Ge=Math.min(me.length,Me.count);Ze<Ge;Ze++){var Fe=S.addMarker(me[Ze]);Ee[Fe]||(Ee[Fe]=new Uint8Array(Me.count)),Ee[Fe][Ze]=1}for(var Re=0;Re<Ee.length;Re++)if(!!Ee[Re]){var We={data:Ee[Re],type:"uint8",usage:"static"};Oe[Re]?Oe[Re](We):Oe[Re]=R.buffer(We),Oe[Re].data=Ee[Re]}}return me},range:function(me,Me,Le){var Oe=Me.bounds;if(!!Oe)return me||(me=Oe),Me.scale=[1/(me[2]-me[0]),1/(me[3]-me[1])],Me.translate=[-me[0],-me[1]],Me.scaleFract=A.fract(Me.scale),Me.translateFract=A.fract(Me.translate),me},viewport:function(me){var Me=_(me||[D.drawingBufferWidth,D.drawingBufferHeight]);return Me}}]),j){var ue=X,K=ue.count,te=ue.size,Y=ue.borderSize,V=ue.sizeBuffer,ee=new Uint8Array(K*2);if(te.length||Y.length)for(var ne=0;ne<K;ne++)ee[ne*2]=Math.round((te[ne]==null?te:te[ne])*255/O),ee[ne*2+1]=Math.round((Y[ne]==null?Y:Y[ne])*255/O);V({data:ee,usage:"dynamic"})}if(re){var Z=X,q=Z.count,ie=Z.color,se=Z.borderColor,ae=Z.colorBuffer,oe;if(S.tooManyColors){if(ie.length||se.length){oe=new Uint8Array(q*8);for(var be=0;be<q;be++){var ce=ie[be];oe[be*8]=B[ce*4],oe[be*8+1]=B[ce*4+1],oe[be*8+2]=B[ce*4+2],oe[be*8+3]=B[ce*4+3];var de=se[be];oe[be*8+4]=B[de*4],oe[be*8+5]=B[de*4+1],oe[be*8+6]=B[de*4+2],oe[be*8+7]=B[de*4+3]}}}else if(ie.length||se.length){oe=new Uint8Array(q*4+2);for(var ye=0;ye<q;ye++)ie[ye]!=null&&(oe[ye*4]=ie[ye]%z,oe[ye*4+1]=Math.floor(ie[ye]/z)),se[ye]!=null&&(oe[ye*4+2]=se[ye]%z,oe[ye*4+3]=Math.floor(se[ye]/z))}ae({data:oe||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return X})}},b.prototype.addMarker=function(S){var k=this.markerTextures,E=this.regl,F=this.markerCache,I=S==null?0:F.indexOf(S);if(I>=0)return I;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,O=S.length;R<O;R++)D[R]=S[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=k.length,F.push(S),k.push(E.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},b.prototype.updateColor=function(S){var k=this.paletteIds,E=this.palette,F=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var O=0;O<S.length;O+=4)D.push(S.subarray(O,O+4));S=D}for(var z=0;z<S.length;z++){var B=S[z];B=i(B,"uint8");var G=y(B,!1);if(k[G]==null){var Q=E.length;k[G]=Math.floor(Q/4),E[Q]=B[0],E[Q+1]=B[1],E[Q+2]=B[2],E[Q+3]=B[3]}I[z]=k[G]}return!this.tooManyColors&&E.length>F*4&&(this.tooManyColors=!0),this.updatePalette(E),I.length===1?I[0]:I},b.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,E=this.paletteTexture,F=Math.ceil(S.length*.25/k);if(F>1){S=S.slice();for(var I=S.length*.25%k;I<F*k;I++)S.push(0,0,0,0)}E.height<F&&E.resize(k,F),E.subimage({width:Math.min(S.length*.25,k),height:F,data:S},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var v=o("object-assign"),C=function(k,E){var F=new g(k,E),I=F.render.bind(F);return v(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};U.exports=C},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(o,U,H){var w=o("regl-scatter2d"),f=o("pick-by-alias"),M=o("array-bounds"),T=o("raf"),e=o("array-range"),a=o("parse-rect"),n=o("flatten-vertex-data");U.exports=r;function r(s,y){if(!(this instanceof r))return new r(s);this.traces=[],this.passes={},this.regl=s,this.scatter=w(s),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var s=this,y,d=[],p=arguments.length;p--;)d[p]=arguments[p];return d.length&&(y=this).update.apply(y,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,T(function(){s.dirty=!1})),this)},r.prototype.update=function(){for(var s,y=[],d=arguments.length;d--;)y[d]=arguments[d];if(!!y.length){for(var p=0;p<y.length;p++)this.updateItem(p,y[p]);this.traces=this.traces.filter(Boolean);for(var c=[],m=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],u=this.traces[l].passes,A=0;A<u.length;A++)c.push(this.passes[u[A]]);x.passOffset=m,m+=x.passes.length}return(s=this.scatter).update.apply(s,c),this}},r.prototype.updateItem=function(s,y){var d=this,p=d.regl;if(y===null)return this.traces[s]=null,this;if(!y)return this;var c=f(y,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(m.color=c.color),c.size!=null&&(m.size=c.size),c.marker!=null&&(m.marker=c.marker),c.borderColor!=null&&(m.borderColor=c.borderColor),c.borderSize!=null&&(m.borderSize=c.borderSize),c.opacity!=null&&(m.opacity=c.opacity),c.viewport&&(m.viewport=a(c.viewport)),c.diagonal!=null&&(m.diagonal=c.diagonal),c.upper!=null&&(m.upper=c.upper),c.lower!=null&&(m.lower=c.lower),c.data){m.buffer(n(c.data)),m.columns=c.data.length,m.count=c.data[0].length,m.bounds=[];for(var l=0;l<m.columns;l++)m.bounds[l]=M(c.data[l],1)}var x;c.range&&(m.range=c.range,x=m.range&&typeof m.range[0]!="number"),c.domain&&(m.domain=c.domain);var u=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===m.columns&&typeof c.padding[c.padding.length-1]=="number"?(m.padding=c.padding.map(i),u=!0):m.padding=i(c.padding));var A=m.columns,_=m.count,g=m.viewport.width,b=m.viewport.height,v=m.viewport.x,C=m.viewport.y,S=g/A,k=b/A;m.passes=[];for(var E=0;E<A;E++)for(var F=0;F<A;F++)if(!(!m.diagonal&&F===E)&&!(!m.upper&&E>F)&&!(!m.lower&&E<F)){var I=t(m.id,E,F),D=this.passes[I]||(this.passes[I]={});if(c.data&&(c.transpose?D.positions={x:{buffer:m.buffer,offset:F,count:_,stride:A},y:{buffer:m.buffer,offset:E,count:_,stride:A}}:D.positions={x:{buffer:m.buffer,offset:F*_,count:_},y:{buffer:m.buffer,offset:E*_,count:_}},D.bounds=h(m.bounds,E,F)),c.domain||c.viewport||c.data){var R=u?h(m.padding,E,F):m.padding;if(m.domain){var O=h(m.domain,E,F),z=O[0],B=O[1],G=O[2],Q=O[3];D.viewport=[v+z*g+R[0],C+B*b+R[1],v+G*g-R[2],C+Q*b-R[3]]}else D.viewport=[v+F*S+S*R[0],C+E*k+k*R[1],v+(F+1)*S-S*R[2],C+(E+1)*k-k*R[3]]}c.color&&(D.color=m.color),c.size&&(D.size=m.size),c.marker&&(D.marker=m.marker),c.borderSize&&(D.borderSize=m.borderSize),c.borderColor&&(D.borderColor=m.borderColor),c.opacity&&(D.opacity=m.opacity),c.range&&(D.range=x?h(m.range,E,F):m.range||D.bounds),m.passes.push(I)}return this},r.prototype.draw=function(){for(var s,y=[],d=arguments.length;d--;)y[d]=arguments[d];if(!y.length)this.scatter.draw();else{for(var p=[],c=0;c<y.length;c++)if(typeof y[c]=="number"){var m=this.traces[y[c]],l=m.passes,x=m.passOffset;p.push.apply(p,e(x,x+l.length))}else if(y[c].length){var u=y[c],A=this.traces[c],_=A.passes,g=A.passOffset;_=_.map(function(b,v){p[g+v]=u})}(s=this.scatter).draw.apply(s,p)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function t(s,y,d){var p=s.id!=null?s.id:s,c=y,m=d,l=p<<16|(c&255)<<8|m&255;return l}function h(s,y,d){var p,c,m,l,x=s[y],u=s[d];return x.length>2?(x[0],x[2],p=x[1],c=x[3]):x.length?(p=x[0],c=x[1]):(x.x,p=x.y,x.x+x.width,c=x.y+x.height),u.length>2?(m=u[0],l=u[2],u[1],u[3]):u.length?(m=u[0],l=u[1]):(m=u.x,u.y,l=u.x+u.width,u.y+u.height),[m,p,l,c]}function i(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var y=a(s);return[y.x,y.y,y.x+y.width,y.y+y.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?U.exports=f():w.createREGL=f()})(this,function(){function w(ft,ar){this.id=be++,this.type=ft,this.data=ar}function f(ft){if(ft.length===0)return[];var ar=ft.charAt(0),rr=ft.charAt(ft.length-1);if(1<ft.length&&ar===rr&&(ar==='"'||ar==="'"))return['"'+ft.substr(1,ft.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ft))return f(ft.substr(0,ar.index)).concat(f(ar[1])).concat(f(ft.substr(ar.index+ar[0].length)));if(ar=ft.split("."),ar.length===1)return['"'+ft.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ft=[],rr=0;rr<ar.length;++rr)ft=ft.concat(f(ar[rr]));return ft}function M(ft){return"["+f(ft).join("][")+"]"}function T(ft,ar){if(typeof ft=="function")return new w(0,ft);if(typeof ft=="number"||typeof ft=="boolean")return new w(5,ft);if(Array.isArray(ft))return new w(6,ft.map(function(rr,Kt){return T(rr)}));if(ft instanceof w)return ft}function e(){var ft={"":0},ar=[""];return{id:function(rr){var Kt=ft[rr];return Kt||(Kt=ft[rr]=ar.length,ar.push(rr),Kt)},str:function(rr){return ar[rr]}}}function a(ft,ar,rr){function Kt(){var et=window.innerWidth,vt=window.innerHeight;ft!==document.body&&(vt=Er.getBoundingClientRect(),et=vt.right-vt.left,vt=vt.bottom-vt.top),Er.width=rr*et,Er.height=rr*vt}var Er=document.createElement("canvas");oe(Er.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ft.appendChild(Er),ft===document.body&&(Er.style.position="absolute",oe(ft.style,{margin:0,padding:0}));var st;return ft!==document.body&&typeof ResizeObserver=="function"?(st=new ResizeObserver(function(){setTimeout(Kt)}),st.observe(ft)):window.addEventListener("resize",Kt,!1),Kt(),{canvas:Er,onDestroy:function(){st?st.disconnect():window.removeEventListener("resize",Kt),ft.removeChild(Er)}}}function n(ft,ar){function rr(Kt){try{return ft.getContext(Kt,ar)}catch{return null}}return rr("webgl")||rr("experimental-webgl")||rr("webgl-experimental")}function r(ft){return typeof ft=="string"?ft.split():ft}function t(ft){return typeof ft=="string"?document.querySelector(ft):ft}function h(ft){var ar=ft||{},rr,Kt,Er,st;ft={};var et=[],vt=[],pt=typeof window>"u"?1:window.devicePixelRatio,Ct=!1,Ht={},Pe=function(lt){},ke=function(){};if(typeof ar=="string"?rr=document.querySelector(ar):typeof ar=="object"&&(typeof ar.nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rr=ar:typeof ar.drawArrays=="function"||typeof ar.drawElements=="function"?(st=ar,Er=st.canvas):("gl"in ar?st=ar.gl:"canvas"in ar?Er=t(ar.canvas):"container"in ar&&(Kt=t(ar.container)),"attributes"in ar&&(ft=ar.attributes),"extensions"in ar&&(et=r(ar.extensions)),"optionalExtensions"in ar&&(vt=r(ar.optionalExtensions)),"onDone"in ar&&(Pe=ar.onDone),"profile"in ar&&(Ct=!!ar.profile),"pixelRatio"in ar&&(pt=+ar.pixelRatio),"cachedCode"in ar&&(Ht=ar.cachedCode))),rr&&(rr.nodeName.toLowerCase()==="canvas"?Er=rr:Kt=rr),!st){if(!Er){if(rr=a(Kt||document.body,Pe,pt),!rr)return null;Er=rr.canvas,ke=rr.onDestroy}ft.premultipliedAlpha===void 0&&(ft.premultipliedAlpha=!0),st=n(Er,ft)}return st?{gl:st,canvas:Er,container:Kt,extensions:et,optionalExtensions:vt,pixelRatio:pt,profile:Ct,cachedCode:Ht,onDone:Pe,onDestroy:ke}:(ke(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function i(ft,ar){function rr(et){et=et.toLowerCase();var vt;try{vt=Kt[et]=ft.getExtension(et)}catch{}return!!vt}for(var Kt={},Er=0;Er<ar.extensions.length;++Er){var st=ar.extensions[Er];if(!rr(st))return ar.onDestroy(),ar.onDone('"'+st+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ar.optionalExtensions.forEach(rr),{extensions:Kt,restore:function(){Object.keys(Kt).forEach(function(et){if(Kt[et]&&!rr(et))throw Error("(regl): error restoring extension "+et)})}}}function s(ft,ar){for(var rr=Array(ft),Kt=0;Kt<ft;++Kt)rr[Kt]=ar(Kt);return rr}function y(ft){var ar,rr;return ar=(65535<ft)<<4,ft>>>=ar,rr=(255<ft)<<3,ft>>>=rr,ar|=rr,rr=(15<ft)<<2,ft>>>=rr,ar|=rr,rr=(3<ft)<<1,ar|rr|ft>>>rr>>1}function d(){function ft(Kt){e:{for(var Er=16;268435456>=Er;Er*=16)if(Kt<=Er){Kt=Er;break e}Kt=0}return Er=rr[y(Kt)>>2],0<Er.length?Er.pop():new ArrayBuffer(Kt)}function ar(Kt){rr[y(Kt.byteLength)>>2].push(Kt)}var rr=s(8,function(){return[]});return{alloc:ft,free:ar,allocType:function(Kt,Er){var st=null;switch(Kt){case 5120:st=new Int8Array(ft(Er),0,Er);break;case 5121:st=new Uint8Array(ft(Er),0,Er);break;case 5122:st=new Int16Array(ft(2*Er),0,Er);break;case 5123:st=new Uint16Array(ft(2*Er),0,Er);break;case 5124:st=new Int32Array(ft(4*Er),0,Er);break;case 5125:st=new Uint32Array(ft(4*Er),0,Er);break;case 5126:st=new Float32Array(ft(4*Er),0,Er);break;default:return null}return st.length!==Er?st.subarray(0,Er):st},freeType:function(Kt){ar(Kt.buffer)}}}function p(ft){return!!ft&&typeof ft=="object"&&Array.isArray(ft.shape)&&Array.isArray(ft.stride)&&typeof ft.offset=="number"&&ft.shape.length===ft.stride.length&&(Array.isArray(ft.data)||Me(ft.data))}function c(ft,ar,rr,Kt,Er,st){for(var et=0;et<ar;++et)for(var vt=ft[et],pt=0;pt<rr;++pt)for(var Ct=vt[pt],Ht=0;Ht<Kt;++Ht)Er[st++]=Ct[Ht]}function m(ft,ar,rr,Kt,Er){for(var st=1,et=rr+1;et<ar.length;++et)st*=ar[et];var vt=ar[rr];if(ar.length-rr===4){var pt=ar[rr+1],Ct=ar[rr+2];for(ar=ar[rr+3],et=0;et<vt;++et)c(ft[et],pt,Ct,ar,Kt,Er),Er+=st}else for(et=0;et<vt;++et)m(ft[et],ar,rr+1,Kt,Er),Er+=st}function l(ft){return _e[Object.prototype.toString.call(ft)]|0}function x(ft,ar){for(var rr=0;rr<ar.length;++rr)ft[rr]=ar[rr]}function u(ft,ar,rr,Kt,Er,st,et){for(var vt=0,pt=0;pt<rr;++pt)for(var Ct=0;Ct<Kt;++Ct)ft[vt++]=ar[Er*pt+st*Ct+et]}function A(ft,ar,rr,Kt){function Er(Pe){this.id=pt++,this.buffer=ft.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,rr.profile&&(this.stats={size:0})}function st(Pe,ke,lt){Pe.byteLength=ke.byteLength,ft.bufferData(Pe.type,ke,lt)}function et(Pe,ke,lt,ct,yt,Rt){if(Pe.usage=lt,Array.isArray(ke)){if(Pe.dtype=ct||5126,0<ke.length)if(Array.isArray(ke[0])){yt=Fe(ke);for(var wt=ct=1;wt<yt.length;++wt)ct*=yt[wt];Pe.dimension=ct,ke=Ge(ke,yt,Pe.dtype),st(Pe,ke,lt),Rt?Pe.persistentData=ke:ge.freeType(ke)}else typeof ke[0]=="number"?(Pe.dimension=yt,yt=ge.allocType(Pe.dtype,ke.length),x(yt,ke),st(Pe,yt,lt),Rt?Pe.persistentData=yt:ge.freeType(yt)):Me(ke[0])&&(Pe.dimension=ke[0].length,Pe.dtype=ct||l(ke[0])||5126,ke=Ge(ke,[ke.length,ke[0].length],Pe.dtype),st(Pe,ke,lt),Rt?Pe.persistentData=ke:ge.freeType(ke))}else if(Me(ke))Pe.dtype=ct||l(ke),Pe.dimension=yt,st(Pe,ke,lt),Rt&&(Pe.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(p(ke)){yt=ke.shape;var Dt=ke.stride,wt=ke.offset,Jt=0,fr=0,Rr=0,Sr=0;yt.length===1?(Jt=yt[0],fr=1,Rr=Dt[0],Sr=0):yt.length===2&&(Jt=yt[0],fr=yt[1],Rr=Dt[0],Sr=Dt[1]),Pe.dtype=ct||l(ke.data)||5126,Pe.dimension=fr,yt=ge.allocType(Pe.dtype,Jt*fr),u(yt,ke.data,Jt,fr,Rr,Sr,wt),st(Pe,yt,lt),Rt?Pe.persistentData=yt:ge.freeType(yt)}else ke instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=yt,st(Pe,ke,lt),Rt&&(Pe.persistentData=new Uint8Array(new Uint8Array(ke))))}function vt(Pe){ar.bufferCount--,Kt(Pe),ft.deleteBuffer(Pe.buffer),Pe.buffer=null,delete Ct[Pe.id]}var pt=0,Ct={};Er.prototype.bind=function(){ft.bindBuffer(this.type,this.buffer)},Er.prototype.destroy=function(){vt(this)};var Ht=[];return rr.profile&&(ar.getTotalBufferSize=function(){var Pe=0;return Object.keys(Ct).forEach(function(ke){Pe+=Ct[ke].stats.size}),Pe}),{create:function(Pe,ke,lt,ct){function yt(wt){var Dt=35044,Jt=null,fr=0,Rr=0,Sr=1;return Array.isArray(wt)||Me(wt)||p(wt)||wt instanceof ArrayBuffer?Jt=wt:typeof wt=="number"?fr=wt|0:wt&&("data"in wt&&(Jt=wt.data),"usage"in wt&&(Dt=Ze[wt.usage]),"type"in wt&&(Rr=Ee[wt.type]),"dimension"in wt&&(Sr=wt.dimension|0),"length"in wt&&(fr=wt.length|0)),Rt.bind(),Jt?et(Rt,Jt,Dt,Rr,Sr,ct):(fr&&ft.bufferData(Rt.type,fr,Dt),Rt.dtype=Rr||5121,Rt.usage=Dt,Rt.dimension=Sr,Rt.byteLength=fr),rr.profile&&(Rt.stats.size=Rt.byteLength*Re[Rt.dtype]),yt}ar.bufferCount++;var Rt=new Er(ke);return Ct[Rt.id]=Rt,lt||yt(Pe),yt._reglType="buffer",yt._buffer=Rt,yt.subdata=function(wt,Dt){var Jt=(Dt||0)|0,fr;if(Rt.bind(),Me(wt)||wt instanceof ArrayBuffer)ft.bufferSubData(Rt.type,Jt,wt);else if(Array.isArray(wt)){if(0<wt.length)if(typeof wt[0]=="number"){var Rr=ge.allocType(Rt.dtype,wt.length);x(Rr,wt),ft.bufferSubData(Rt.type,Jt,Rr),ge.freeType(Rr)}else(Array.isArray(wt[0])||Me(wt[0]))&&(fr=Fe(wt),Rr=Ge(wt,fr,Rt.dtype),ft.bufferSubData(Rt.type,Jt,Rr),ge.freeType(Rr))}else if(p(wt)){fr=wt.shape;var Sr=wt.stride,Pr=Rr=0,Jr=0,ur=0;fr.length===1?(Rr=fr[0],Pr=1,Jr=Sr[0],ur=0):fr.length===2&&(Rr=fr[0],Pr=fr[1],Jr=Sr[0],ur=Sr[1]),fr=Array.isArray(wt.data)?Rt.dtype:l(wt.data),fr=ge.allocType(fr,Rr*Pr),u(fr,wt.data,Rr,Pr,Jr,ur,wt.offset),ft.bufferSubData(Rt.type,Jt,fr),ge.freeType(fr)}return yt},rr.profile&&(yt.stats=Rt.stats),yt.destroy=function(){vt(Rt)},yt},createStream:function(Pe,ke){var lt=Ht.pop();return lt||(lt=new Er(Pe)),lt.bind(),et(lt,ke,35040,0,1,!1),lt},destroyStream:function(Pe){Ht.push(Pe)},clear:function(){Le(Ct).forEach(vt),Ht.forEach(vt)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Er?Pe._buffer:null},restore:function(){Le(Ct).forEach(function(Pe){Pe.buffer=ft.createBuffer(),ft.bindBuffer(Pe.type,Pe.buffer),ft.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:et}}function _(ft,ar,rr,Kt){function Er(Pe){this.id=pt++,vt[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function st(Pe,ke,lt,ct,yt,Rt,wt){Pe.buffer.bind();var Dt;if(ke?((Dt=wt)||Me(ke)&&(!p(ke)||Me(ke.data))||(Dt=ar.oes_element_index_uint?5125:5123),rr._initBuffer(Pe.buffer,ke,lt,Dt,3)):(ft.bufferData(34963,Rt,lt),Pe.buffer.dtype=Dt||5121,Pe.buffer.usage=lt,Pe.buffer.dimension=3,Pe.buffer.byteLength=Rt),Dt=wt,!wt){switch(Pe.buffer.dtype){case 5121:case 5120:Dt=5121;break;case 5123:case 5122:Dt=5123;break;case 5125:case 5124:Dt=5125}Pe.buffer.dtype=Dt}Pe.type=Dt,ke=yt,0>ke&&(ke=Pe.buffer.byteLength,Dt===5123?ke>>=1:Dt===5125&&(ke>>=2)),Pe.vertCount=ke,ke=ct,0>ct&&(ke=4,ct=Pe.buffer.dimension,ct===1&&(ke=0),ct===2&&(ke=1),ct===3&&(ke=4)),Pe.primType=ke}function et(Pe){Kt.elementsCount--,delete vt[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var vt={},pt=0,Ct={uint8:5121,uint16:5123};ar.oes_element_index_uint&&(Ct.uint32=5125),Er.prototype.bind=function(){this.buffer.bind()};var Ht=[];return{create:function(Pe,ke){function lt(Rt){if(Rt)if(typeof Rt=="number")ct(Rt),yt.primType=4,yt.vertCount=Rt|0,yt.type=5121;else{var wt=null,Dt=35044,Jt=-1,fr=-1,Rr=0,Sr=0;Array.isArray(Rt)||Me(Rt)||p(Rt)?wt=Rt:("data"in Rt&&(wt=Rt.data),"usage"in Rt&&(Dt=Ze[Rt.usage]),"primitive"in Rt&&(Jt=We[Rt.primitive]),"count"in Rt&&(fr=Rt.count|0),"type"in Rt&&(Sr=Ct[Rt.type]),"length"in Rt?Rr=Rt.length|0:(Rr=fr,Sr===5123||Sr===5122?Rr*=2:(Sr===5125||Sr===5124)&&(Rr*=4))),st(yt,wt,Dt,Jt,fr,Rr,Sr)}else ct(),yt.primType=4,yt.vertCount=0,yt.type=5121;return lt}var ct=rr.create(null,34963,!0),yt=new Er(ct._buffer);return Kt.elementsCount++,lt(Pe),lt._reglType="elements",lt._elements=yt,lt.subdata=function(Rt,wt){return ct.subdata(Rt,wt),lt},lt.destroy=function(){et(yt)},lt},createStream:function(Pe){var ke=Ht.pop();return ke||(ke=new Er(rr.create(null,34963,!0,!1)._buffer)),st(ke,Pe,35040,-1,-1,0,0),ke},destroyStream:function(Pe){Ht.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Er?Pe._elements:null},clear:function(){Le(vt).forEach(et)}}}function g(ft){for(var ar=ge.allocType(5123,ft.length),rr=0;rr<ft.length;++rr)if(isNaN(ft[rr]))ar[rr]=65535;else if(ft[rr]===1/0)ar[rr]=31744;else if(ft[rr]===-1/0)ar[rr]=64512;else{xt[0]=ft[rr];var st=Nt[0],Kt=st>>>31<<15,Er=(st<<1>>>24)-127,st=st>>13&1023;ar[rr]=-24>Er?Kt:-14>Er?Kt+(st+1024>>-14-Er):15<Er?Kt+31744:Kt+(Er+15<<10)+st}return ar}function b(ft){return Array.isArray(ft)||Me(ft)}function v(ft){return"[object "+ft+"]"}function C(ft){return Array.isArray(ft)&&(ft.length===0||typeof ft[0]=="number")}function S(ft){return!!(Array.isArray(ft)&&ft.length!==0&&b(ft[0]))}function k(ft){return Object.prototype.toString.call(ft)}function E(ft){if(!ft)return!1;var ar=k(ft);return 0<=Ae.indexOf(ar)?!0:C(ft)||S(ft)||p(ft)}function F(ft,ar){ft.type===36193?(ft.data=g(ar),ge.freeType(ar)):ft.data=ar}function I(ft,ar,rr,Kt,Er,st){if(ft=typeof Je[ft]<"u"?Je[ft]:Pt[ft]*He[ar],st&&(ft*=6),Er){for(Kt=0;1<=rr;)Kt+=ft*rr*rr,rr/=2;return Kt}return ft*rr*Kt}function D(ft,ar,rr,Kt,Er,st,et){function vt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function pt(Cr,bn){Cr.internalformat=bn.internalformat,Cr.format=bn.format,Cr.type=bn.type,Cr.compressed=bn.compressed,Cr.premultiplyAlpha=bn.premultiplyAlpha,Cr.flipY=bn.flipY,Cr.unpackAlignment=bn.unpackAlignment,Cr.colorSpace=bn.colorSpace,Cr.width=bn.width,Cr.height=bn.height,Cr.channels=bn.channels}function Ct(Cr,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(Cr.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(Cr.flipY=bn.flipY),"alignment"in bn&&(Cr.unpackAlignment=bn.alignment),"colorSpace"in bn&&(Cr.colorSpace=hr[bn.colorSpace]),"type"in bn&&(Cr.type=Ur[bn.type]);var gn=Cr.width,Ln=Cr.height,qn=Cr.channels,da=!1;"shape"in bn?(gn=bn.shape[0],Ln=bn.shape[1],bn.shape.length===3&&(qn=bn.shape[2],da=!0)):("radius"in bn&&(gn=Ln=bn.radius),"width"in bn&&(gn=bn.width),"height"in bn&&(Ln=bn.height),"channels"in bn&&(qn=bn.channels,da=!0)),Cr.width=gn|0,Cr.height=Ln|0,Cr.channels=qn|0,gn=!1,"format"in bn&&(gn=bn.format,Ln=Cr.internalformat=Gr[gn],Cr.format=Zn[Ln],gn in Ur&&!("type"in bn)&&(Cr.type=Ur[gn]),gn in Ir&&(Cr.compressed=!0),gn=!0),!da&&gn?Cr.channels=Pt[Cr.format]:da&&!gn&&Cr.channels!==Vt[Cr.format]&&(Cr.format=Cr.internalformat=Vt[Cr.channels])}}function Ht(Cr){ft.pixelStorei(37440,Cr.flipY),ft.pixelStorei(37441,Cr.premultiplyAlpha),ft.pixelStorei(37443,Cr.colorSpace),ft.pixelStorei(3317,Cr.unpackAlignment)}function Pe(){vt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ke(Cr,bn){var gn=null;if(E(bn)?gn=bn:bn&&(Ct(Cr,bn),"x"in bn&&(Cr.xOffset=bn.x|0),"y"in bn&&(Cr.yOffset=bn.y|0),E(bn.data)&&(gn=bn.data)),bn.copy){var Ln=Er.viewportWidth,qn=Er.viewportHeight;Cr.width=Cr.width||Ln-Cr.xOffset,Cr.height=Cr.height||qn-Cr.yOffset,Cr.needsCopy=!0}else if(!gn)Cr.width=Cr.width||1,Cr.height=Cr.height||1,Cr.channels=Cr.channels||4;else if(Me(gn))Cr.channels=Cr.channels||4,Cr.data=gn,"type"in bn||Cr.type!==5121||(Cr.type=_e[Object.prototype.toString.call(gn)]|0);else if(C(gn)){switch(Cr.channels=Cr.channels||4,Ln=gn,qn=Ln.length,Cr.type){case 5121:case 5123:case 5125:case 5126:qn=ge.allocType(Cr.type,qn),qn.set(Ln),Cr.data=qn;break;case 36193:Cr.data=g(Ln)}Cr.alignment=1,Cr.needsFree=!0}else if(p(gn)){Ln=gn.data,Array.isArray(Ln)||Cr.type!==5121||(Cr.type=_e[Object.prototype.toString.call(Ln)]|0);var qn=gn.shape,da=gn.stride,oa,Bn,$n,Xa;qn.length===3?($n=qn[2],Xa=da[2]):Xa=$n=1,oa=qn[0],Bn=qn[1],qn=da[0],da=da[1],Cr.alignment=1,Cr.width=oa,Cr.height=Bn,Cr.channels=$n,Cr.format=Cr.internalformat=Vt[$n],Cr.needsFree=!0,oa=Xa,gn=gn.offset,$n=Cr.width,Xa=Cr.height,Bn=Cr.channels;for(var gi=ge.allocType(Cr.type===36193?5126:Cr.type,$n*Xa*Bn),Xt=0,mr=0;mr<Xa;++mr)for(var un=0;un<$n;++un)for(var xn=0;xn<Bn;++xn)gi[Xt++]=Ln[qn*un+da*mr+oa*xn+gn];F(Cr,gi)}else if(k(gn)===$t||k(gn)===Ut||k(gn)===Lt)k(gn)===$t||k(gn)===Ut?Cr.element=gn:Cr.element=gn.canvas,Cr.width=Cr.element.width,Cr.height=Cr.element.height,Cr.channels=4;else if(k(gn)===Ye)Cr.element=gn,Cr.width=gn.width,Cr.height=gn.height,Cr.channels=4;else if(k(gn)===ot)Cr.element=gn,Cr.width=gn.naturalWidth,Cr.height=gn.naturalHeight,Cr.channels=4;else if(k(gn)===Ve)Cr.element=gn,Cr.width=gn.videoWidth,Cr.height=gn.videoHeight,Cr.channels=4;else if(S(gn)){for(Ln=Cr.width||gn[0].length,qn=Cr.height||gn.length,da=Cr.channels,da=b(gn[0][0])?da||gn[0][0].length:da||1,oa=Oe.shape(gn),$n=1,Xa=0;Xa<oa.length;++Xa)$n*=oa[Xa];$n=ge.allocType(Cr.type===36193?5126:Cr.type,$n),Oe.flatten(gn,oa,"",$n),F(Cr,$n),Cr.alignment=1,Cr.width=Ln,Cr.height=qn,Cr.channels=da,Cr.format=Cr.internalformat=Vt[da],Cr.needsFree=!0}}function lt(Cr,bn,gn,Ln,qn){var da=Cr.element,oa=Cr.data,Bn=Cr.internalformat,$n=Cr.format,Xa=Cr.type,gi=Cr.width,Xt=Cr.height;Ht(Cr),da?ft.texSubImage2D(bn,qn,gn,Ln,$n,Xa,da):Cr.compressed?ft.compressedTexSubImage2D(bn,qn,gn,Ln,Bn,gi,Xt,oa):Cr.needsCopy?(Kt(),ft.copyTexSubImage2D(bn,qn,gn,Ln,Cr.xOffset,Cr.yOffset,gi,Xt)):ft.texSubImage2D(bn,qn,gn,Ln,gi,Xt,$n,Xa,oa)}function ct(){return ba.pop()||new Pe}function yt(Cr){Cr.needsFree&&ge.freeType(Cr.data),Pe.call(Cr),ba.push(Cr)}function Rt(){vt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function wt(Cr,bn,gn){var Ln=Cr.images[0]=ct();Cr.mipmask=1,Ln.width=Cr.width=bn,Ln.height=Cr.height=gn,Ln.channels=Cr.channels=4}function Dt(Cr,bn){var gn=null;if(E(bn))gn=Cr.images[0]=ct(),pt(gn,Cr),ke(gn,bn),Cr.mipmask=1;else if(Ct(Cr,bn),Array.isArray(bn.mipmap))for(var Ln=bn.mipmap,qn=0;qn<Ln.length;++qn)gn=Cr.images[qn]=ct(),pt(gn,Cr),gn.width>>=qn,gn.height>>=qn,ke(gn,Ln[qn]),Cr.mipmask|=1<<qn;else gn=Cr.images[0]=ct(),pt(gn,Cr),ke(gn,bn),Cr.mipmask=1;pt(Cr,Cr.images[0])}function Jt(Cr,bn){for(var gn=Cr.images,Ln=0;Ln<gn.length&&gn[Ln];++Ln){var qn=gn[Ln],da=bn,oa=Ln,Bn=qn.element,$n=qn.data,Xa=qn.internalformat,gi=qn.format,Xt=qn.type,mr=qn.width,un=qn.height;Ht(qn),Bn?ft.texImage2D(da,oa,gi,gi,Xt,Bn):qn.compressed?ft.compressedTexImage2D(da,oa,Xa,mr,un,0,$n):qn.needsCopy?(Kt(),ft.copyTexImage2D(da,oa,gi,qn.xOffset,qn.yOffset,mr,un,0)):ft.texImage2D(da,oa,gi,mr,un,0,gi,Xt,$n||null)}}function fr(){var Cr=Pa.pop()||new Rt;vt.call(Cr);for(var bn=Cr.mipmask=0;16>bn;++bn)Cr.images[bn]=null;return Cr}function Rr(Cr){for(var bn=Cr.images,gn=0;gn<bn.length;++gn)bn[gn]&&yt(bn[gn]),bn[gn]=null;Pa.push(Cr)}function Sr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Pr(Cr,bn){"min"in bn&&(Cr.minFilter=qt[bn.min],0<=tr.indexOf(Cr.minFilter)&&!("faces"in bn)&&(Cr.genMipmaps=!0)),"mag"in bn&&(Cr.magFilter=zt[bn.mag]);var gn=Cr.wrapS,Ln=Cr.wrapT;if("wrap"in bn){var qn=bn.wrap;typeof qn=="string"?gn=Ln=at[qn]:Array.isArray(qn)&&(gn=at[qn[0]],Ln=at[qn[1]])}else"wrapS"in bn&&(gn=at[bn.wrapS]),"wrapT"in bn&&(Ln=at[bn.wrapT]);if(Cr.wrapS=gn,Cr.wrapT=Ln,"anisotropic"in bn&&(Cr.anisotropic=bn.anisotropic),"mipmap"in bn){switch(gn=!1,typeof bn.mipmap){case"string":Cr.mipmapHint=Dr[bn.mipmap],gn=Cr.genMipmaps=!0;break;case"boolean":gn=Cr.genMipmaps=bn.mipmap;break;case"object":Cr.genMipmaps=!1,gn=!0}!gn||"min"in bn||(Cr.minFilter=9984)}}function Jr(Cr,bn){ft.texParameteri(bn,10241,Cr.minFilter),ft.texParameteri(bn,10240,Cr.magFilter),ft.texParameteri(bn,10242,Cr.wrapS),ft.texParameteri(bn,10243,Cr.wrapT),ar.ext_texture_filter_anisotropic&&ft.texParameteri(bn,34046,Cr.anisotropic),Cr.genMipmaps&&(ft.hint(33170,Cr.mipmapHint),ft.generateMipmap(bn))}function ur(Cr){vt.call(this),this.mipmask=0,this.internalformat=6408,this.id=xi++,this.refCount=1,this.target=Cr,this.texture=ft.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Sr,et.profile&&(this.stats={size:0})}function wr(Cr){ft.activeTexture(33984),ft.bindTexture(Cr.target,Cr.texture)}function Br(){var Cr=$a[0];Cr?ft.bindTexture(Cr.target,Cr.texture):ft.bindTexture(3553,null)}function Yr(Cr){var bn=Cr.texture,gn=Cr.unit,Ln=Cr.target;0<=gn&&(ft.activeTexture(33984+gn),ft.bindTexture(Ln,null),$a[gn]=null),ft.deleteTexture(bn),Cr.texture=null,Cr.params=null,Cr.pixels=null,Cr.refCount=0,delete Ka[Cr.id],st.textureCount--}var Dr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},at={repeat:10497,clamp:33071,mirror:33648},zt={nearest:9728,linear:9729},qt=oe({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},zt),hr={none:0,browser:37444},Ur={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Gr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Ir={};ar.ext_srgb&&(Gr.srgb=35904,Gr.srgba=35906),ar.oes_texture_float&&(Ur.float32=Ur.float=5126),ar.oes_texture_half_float&&(Ur.float16=Ur["half float"]=36193),ar.webgl_depth_texture&&(oe(Gr,{depth:6402,"depth stencil":34041}),oe(Ur,{uint16:5123,uint32:5125,"depth stencil":34042})),ar.webgl_compressed_texture_s3tc&&oe(Ir,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ar.webgl_compressed_texture_atc&&oe(Ir,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ar.webgl_compressed_texture_pvrtc&&oe(Ir,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ar.webgl_compressed_texture_etc1&&(Ir["rgb etc1"]=36196);var kr=Array.prototype.slice.call(ft.getParameter(34467));Object.keys(Ir).forEach(function(Cr){var bn=Ir[Cr];0<=kr.indexOf(bn)&&(Gr[Cr]=bn)});var Kr=Object.keys(Gr);rr.textureFormats=Kr;var kn=[];Object.keys(Gr).forEach(function(Cr){kn[Gr[Cr]]=Cr});var yn=[];Object.keys(Ur).forEach(function(Cr){yn[Ur[Cr]]=Cr});var Yn=[];Object.keys(zt).forEach(function(Cr){Yn[zt[Cr]]=Cr});var In=[];Object.keys(qt).forEach(function(Cr){In[qt[Cr]]=Cr});var Jn=[];Object.keys(at).forEach(function(Cr){Jn[at[Cr]]=Cr});var Zn=Kr.reduce(function(Cr,bn){var gn=Gr[bn];return gn===6409||gn===6406||gn===6409||gn===6410||gn===6402||gn===34041||ar.ext_srgb&&(gn===35904||gn===35906)?Cr[gn]=gn:gn===32855||0<=bn.indexOf("rgba")?Cr[gn]=6408:Cr[gn]=6407,Cr},{}),ba=[],Pa=[],xi=0,Ka={},ti=rr.maxTextureUnits,$a=Array(ti).map(function(){return null});return oe(ur.prototype,{bind:function(){this.bindCount+=1;var Cr=this.unit;if(0>Cr){for(var bn=0;bn<ti;++bn){var gn=$a[bn];if(gn){if(0<gn.bindCount)continue;gn.unit=-1}$a[bn]=this,Cr=bn;break}et.profile&&st.maxTextureUnits<Cr+1&&(st.maxTextureUnits=Cr+1),this.unit=Cr,ft.activeTexture(33984+Cr),ft.bindTexture(this.target,this.texture)}return Cr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Yr(this)}}),et.profile&&(st.getTotalTextureSize=function(){var Cr=0;return Object.keys(Ka).forEach(function(bn){Cr+=Ka[bn].stats.size}),Cr}),{create2D:function(Cr,bn){function gn(qn,da){var oa=Ln.texInfo;Sr.call(oa);var Bn=fr();return typeof qn=="number"?typeof da=="number"?wt(Bn,qn|0,da|0):wt(Bn,qn|0,qn|0):qn?(Pr(oa,qn),Dt(Bn,qn)):wt(Bn,1,1),oa.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),Ln.mipmask=Bn.mipmask,pt(Ln,Bn),Ln.internalformat=Bn.internalformat,gn.width=Bn.width,gn.height=Bn.height,wr(Ln),Jt(Bn,3553),Jr(oa,3553),Br(),Rr(Bn),et.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,Bn.width,Bn.height,oa.genMipmaps,!1)),gn.format=kn[Ln.internalformat],gn.type=yn[Ln.type],gn.mag=Yn[oa.magFilter],gn.min=In[oa.minFilter],gn.wrapS=Jn[oa.wrapS],gn.wrapT=Jn[oa.wrapT],gn}var Ln=new ur(3553);return Ka[Ln.id]=Ln,st.textureCount++,gn(Cr,bn),gn.subimage=function(qn,da,oa,Bn){da|=0,oa|=0,Bn|=0;var $n=ct();return pt($n,Ln),$n.width=0,$n.height=0,ke($n,qn),$n.width=$n.width||(Ln.width>>Bn)-da,$n.height=$n.height||(Ln.height>>Bn)-oa,wr(Ln),lt($n,3553,da,oa,Bn),Br(),yt($n),gn},gn.resize=function(qn,da){var oa=qn|0,Bn=da|0||oa;if(oa===Ln.width&&Bn===Ln.height)return gn;gn.width=Ln.width=oa,gn.height=Ln.height=Bn,wr(Ln);for(var $n=0;Ln.mipmask>>$n;++$n){var Xa=oa>>$n,gi=Bn>>$n;if(!Xa||!gi)break;ft.texImage2D(3553,$n,Ln.format,Xa,gi,0,Ln.format,Ln.type,null)}return Br(),et.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,oa,Bn,!1,!1)),gn},gn._reglType="texture2d",gn._texture=Ln,et.profile&&(gn.stats=Ln.stats),gn.destroy=function(){Ln.decRef()},gn},createCube:function(Cr,bn,gn,Ln,qn,da){function oa(Xa,gi,Xt,mr,un,xn){var sn,Cn=Bn.texInfo;for(Sr.call(Cn),sn=0;6>sn;++sn)$n[sn]=fr();if(typeof Xa=="number"||!Xa)for(Xa=Xa|0||1,sn=0;6>sn;++sn)wt($n[sn],Xa,Xa);else if(typeof Xa=="object")if(gi)Dt($n[0],Xa),Dt($n[1],gi),Dt($n[2],Xt),Dt($n[3],mr),Dt($n[4],un),Dt($n[5],xn);else if(Pr(Cn,Xa),Ct(Bn,Xa),"faces"in Xa)for(Xa=Xa.faces,sn=0;6>sn;++sn)pt($n[sn],Bn),Dt($n[sn],Xa[sn]);else for(sn=0;6>sn;++sn)Dt($n[sn],Xa);for(pt(Bn,$n[0]),Bn.mipmask=Cn.genMipmaps?($n[0].width<<1)-1:$n[0].mipmask,Bn.internalformat=$n[0].internalformat,oa.width=$n[0].width,oa.height=$n[0].height,wr(Bn),sn=0;6>sn;++sn)Jt($n[sn],34069+sn);for(Jr(Cn,34067),Br(),et.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,oa.width,oa.height,Cn.genMipmaps,!0)),oa.format=kn[Bn.internalformat],oa.type=yn[Bn.type],oa.mag=Yn[Cn.magFilter],oa.min=In[Cn.minFilter],oa.wrapS=Jn[Cn.wrapS],oa.wrapT=Jn[Cn.wrapT],sn=0;6>sn;++sn)Rr($n[sn]);return oa}var Bn=new ur(34067);Ka[Bn.id]=Bn,st.cubeCount++;var $n=Array(6);return oa(Cr,bn,gn,Ln,qn,da),oa.subimage=function(Xa,gi,Xt,mr,un){Xt|=0,mr|=0,un|=0;var xn=ct();return pt(xn,Bn),xn.width=0,xn.height=0,ke(xn,gi),xn.width=xn.width||(Bn.width>>un)-Xt,xn.height=xn.height||(Bn.height>>un)-mr,wr(Bn),lt(xn,34069+Xa,Xt,mr,un),Br(),yt(xn),oa},oa.resize=function(Xa){if(Xa|=0,Xa!==Bn.width){oa.width=Bn.width=Xa,oa.height=Bn.height=Xa,wr(Bn);for(var gi=0;6>gi;++gi)for(var Xt=0;Bn.mipmask>>Xt;++Xt)ft.texImage2D(34069+gi,Xt,Bn.format,Xa>>Xt,Xa>>Xt,0,Bn.format,Bn.type,null);return Br(),et.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,oa.width,oa.height,!1,!0)),oa}},oa._reglType="textureCube",oa._texture=Bn,et.profile&&(oa.stats=Bn.stats),oa.destroy=function(){Bn.decRef()},oa},clear:function(){for(var Cr=0;Cr<ti;++Cr)ft.activeTexture(33984+Cr),ft.bindTexture(3553,null),$a[Cr]=null;Le(Ka).forEach(Yr),st.cubeCount=0,st.textureCount=0},getTexture:function(Cr){return null},restore:function(){for(var Cr=0;Cr<ti;++Cr){var bn=$a[Cr];bn&&(bn.bindCount=0,bn.unit=-1,$a[Cr]=null)}Le(Ka).forEach(function(gn){gn.texture=ft.createTexture(),ft.bindTexture(gn.target,gn.texture);for(var Ln=0;32>Ln;++Ln)if((gn.mipmask&1<<Ln)!==0)if(gn.target===3553)ft.texImage2D(3553,Ln,gn.internalformat,gn.width>>Ln,gn.height>>Ln,0,gn.internalformat,gn.type,null);else for(var qn=0;6>qn;++qn)ft.texImage2D(34069+qn,Ln,gn.internalformat,gn.width>>Ln,gn.height>>Ln,0,gn.internalformat,gn.type,null);Jr(gn.texInfo,gn.target)})},refresh:function(){for(var Cr=0;Cr<ti;++Cr){var bn=$a[Cr];bn&&(bn.bindCount=0,bn.unit=-1,$a[Cr]=null),ft.activeTexture(33984+Cr),ft.bindTexture(3553,null),ft.bindTexture(34067,null)}}}}function R(ft,ar,rr,Kt,Er,st){function et(ur,wr,Br){this.target=ur,this.texture=wr,this.renderbuffer=Br;var Yr=ur=0;wr?(ur=wr.width,Yr=wr.height):Br&&(ur=Br.width,Yr=Br.height),this.width=ur,this.height=Yr}function vt(ur){ur&&(ur.texture&&ur.texture._texture.decRef(),ur.renderbuffer&&ur.renderbuffer._renderbuffer.decRef())}function pt(ur,wr,Br){ur&&(ur.texture?ur.texture._texture.refCount+=1:ur.renderbuffer._renderbuffer.refCount+=1)}function Ct(ur,wr){wr&&(wr.texture?ft.framebufferTexture2D(36160,ur,wr.target,wr.texture._texture.texture,0):ft.framebufferRenderbuffer(36160,ur,36161,wr.renderbuffer._renderbuffer.renderbuffer))}function Ht(ur){var wr=3553,Br=null,Yr=null,Dr=ur;return typeof ur=="object"&&(Dr=ur.data,"target"in ur&&(wr=ur.target|0)),ur=Dr._reglType,ur==="texture2d"||ur==="textureCube"?Br=Dr:ur==="renderbuffer"&&(Yr=Dr,wr=36161),new et(wr,Br,Yr)}function Pe(ur,wr,Br,Yr,Dr){return Br?(ur=Kt.create2D({width:ur,height:wr,format:Yr,type:Dr}),ur._texture.refCount=0,new et(3553,ur,null)):(ur=Er.create({width:ur,height:wr,format:Yr}),ur._renderbuffer.refCount=0,new et(36161,null,ur))}function ke(ur){return ur&&(ur.texture||ur.renderbuffer)}function lt(ur,wr,Br){ur&&(ur.texture?ur.texture.resize(wr,Br):ur.renderbuffer&&ur.renderbuffer.resize(wr,Br),ur.width=wr,ur.height=Br)}function ct(){this.id=Pr++,Jr[this.id]=this,this.framebuffer=ft.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function yt(ur){ur.colorAttachments.forEach(vt),vt(ur.depthAttachment),vt(ur.stencilAttachment),vt(ur.depthStencilAttachment)}function Rt(ur){ft.deleteFramebuffer(ur.framebuffer),ur.framebuffer=null,st.framebufferCount--,delete Jr[ur.id]}function wt(ur){var wr;ft.bindFramebuffer(36160,ur.framebuffer);var Br=ur.colorAttachments;for(wr=0;wr<Br.length;++wr)Ct(36064+wr,Br[wr]);for(wr=Br.length;wr<rr.maxColorAttachments;++wr)ft.framebufferTexture2D(36160,36064+wr,3553,null,0);ft.framebufferTexture2D(36160,33306,3553,null,0),ft.framebufferTexture2D(36160,36096,3553,null,0),ft.framebufferTexture2D(36160,36128,3553,null,0),Ct(36096,ur.depthAttachment),Ct(36128,ur.stencilAttachment),Ct(33306,ur.depthStencilAttachment),ft.checkFramebufferStatus(36160),ft.isContextLost(),ft.bindFramebuffer(36160,Jt.next?Jt.next.framebuffer:null),Jt.cur=Jt.next,ft.getError()}function Dt(ur,wr){function Br(Dr,at){var zt,qt=0,hr=0,Ur=!0,Gr=!0;zt=null;var Ir=!0,kr="rgba",Kr="uint8",kn=1,yn=null,Yn=null,In=null,Jn=!1;typeof Dr=="number"?(qt=Dr|0,hr=at|0||qt):Dr?("shape"in Dr?(hr=Dr.shape,qt=hr[0],hr=hr[1]):("radius"in Dr&&(qt=hr=Dr.radius),"width"in Dr&&(qt=Dr.width),"height"in Dr&&(hr=Dr.height)),("color"in Dr||"colors"in Dr)&&(zt=Dr.color||Dr.colors),zt||("colorCount"in Dr&&(kn=Dr.colorCount|0),"colorTexture"in Dr&&(Ir=!!Dr.colorTexture,kr="rgba4"),"colorType"in Dr&&(Kr=Dr.colorType,!Ir)&&(Kr==="half float"||Kr==="float16"?kr="rgba16f":(Kr==="float"||Kr==="float32")&&(kr="rgba32f")),"colorFormat"in Dr&&(kr=Dr.colorFormat,0<=fr.indexOf(kr)?Ir=!0:0<=Rr.indexOf(kr)&&(Ir=!1))),("depthTexture"in Dr||"depthStencilTexture"in Dr)&&(Jn=!(!Dr.depthTexture&&!Dr.depthStencilTexture)),"depth"in Dr&&(typeof Dr.depth=="boolean"?Ur=Dr.depth:(yn=Dr.depth,Gr=!1)),"stencil"in Dr&&(typeof Dr.stencil=="boolean"?Gr=Dr.stencil:(Yn=Dr.stencil,Ur=!1)),"depthStencil"in Dr&&(typeof Dr.depthStencil=="boolean"?Ur=Gr=Dr.depthStencil:(In=Dr.depthStencil,Gr=Ur=!1))):qt=hr=1;var Zn=null,ba=null,Pa=null,xi=null;if(Array.isArray(zt))Zn=zt.map(Ht);else if(zt)Zn=[Ht(zt)];else for(Zn=Array(kn),zt=0;zt<kn;++zt)Zn[zt]=Pe(qt,hr,Ir,kr,Kr);for(qt=qt||Zn[0].width,hr=hr||Zn[0].height,yn?ba=Ht(yn):Ur&&!Gr&&(ba=Pe(qt,hr,Jn,"depth","uint32")),Yn?Pa=Ht(Yn):Gr&&!Ur&&(Pa=Pe(qt,hr,!1,"stencil","uint8")),In?xi=Ht(In):!yn&&!Yn&&Gr&&Ur&&(xi=Pe(qt,hr,Jn,"depth stencil","depth stencil")),Ur=null,zt=0;zt<Zn.length;++zt)pt(Zn[zt]),Zn[zt]&&Zn[zt].texture&&(Gr=_t[Zn[zt].texture._texture.format]*kt[Zn[zt].texture._texture.type],Ur===null&&(Ur=Gr));return pt(ba),pt(Pa),pt(xi),yt(Yr),Yr.width=qt,Yr.height=hr,Yr.colorAttachments=Zn,Yr.depthAttachment=ba,Yr.stencilAttachment=Pa,Yr.depthStencilAttachment=xi,Br.color=Zn.map(ke),Br.depth=ke(ba),Br.stencil=ke(Pa),Br.depthStencil=ke(xi),Br.width=Yr.width,Br.height=Yr.height,wt(Yr),Br}var Yr=new ct;return st.framebufferCount++,Br(ur,wr),oe(Br,{resize:function(Dr,at){var zt=Math.max(Dr|0,1),qt=Math.max(at|0||zt,1);if(zt===Yr.width&&qt===Yr.height)return Br;for(var hr=Yr.colorAttachments,Ur=0;Ur<hr.length;++Ur)lt(hr[Ur],zt,qt);return lt(Yr.depthAttachment,zt,qt),lt(Yr.stencilAttachment,zt,qt),lt(Yr.depthStencilAttachment,zt,qt),Yr.width=Br.width=zt,Yr.height=Br.height=qt,wt(Yr),Br},_reglType:"framebuffer",_framebuffer:Yr,destroy:function(){Rt(Yr),yt(Yr)},use:function(Dr){Jt.setFBO({framebuffer:Br},Dr)}})}var Jt={cur:null,next:null,dirty:!1,setFBO:null},fr=["rgba"],Rr=["rgba4","rgb565","rgb5 a1"];ar.ext_srgb&&Rr.push("srgba"),ar.ext_color_buffer_half_float&&Rr.push("rgba16f","rgb16f"),ar.webgl_color_buffer_float&&Rr.push("rgba32f");var Sr=["uint8"];ar.oes_texture_half_float&&Sr.push("half float","float16"),ar.oes_texture_float&&Sr.push("float","float32");var Pr=0,Jr={};return oe(Jt,{getFramebuffer:function(ur){return typeof ur=="function"&&ur._reglType==="framebuffer"&&(ur=ur._framebuffer,ur instanceof ct)?ur:null},create:Dt,createCube:function(ur){function wr(Yr){var Dr,at={color:null},zt=0,qt=null;Dr="rgba";var hr="uint8",Ur=1;if(typeof Yr=="number"?zt=Yr|0:Yr?("shape"in Yr?zt=Yr.shape[0]:("radius"in Yr&&(zt=Yr.radius|0),"width"in Yr?zt=Yr.width|0:"height"in Yr&&(zt=Yr.height|0)),("color"in Yr||"colors"in Yr)&&(qt=Yr.color||Yr.colors),qt||("colorCount"in Yr&&(Ur=Yr.colorCount|0),"colorType"in Yr&&(hr=Yr.colorType),"colorFormat"in Yr&&(Dr=Yr.colorFormat)),"depth"in Yr&&(at.depth=Yr.depth),"stencil"in Yr&&(at.stencil=Yr.stencil),"depthStencil"in Yr&&(at.depthStencil=Yr.depthStencil)):zt=1,qt)if(Array.isArray(qt))for(Yr=[],Dr=0;Dr<qt.length;++Dr)Yr[Dr]=qt[Dr];else Yr=[qt];else for(Yr=Array(Ur),qt={radius:zt,format:Dr,type:hr},Dr=0;Dr<Ur;++Dr)Yr[Dr]=Kt.createCube(qt);for(at.color=Array(Yr.length),Dr=0;Dr<Yr.length;++Dr)Ur=Yr[Dr],zt=zt||Ur.width,at.color[Dr]={target:34069,data:Yr[Dr]};for(Dr=0;6>Dr;++Dr){for(Ur=0;Ur<Yr.length;++Ur)at.color[Ur].target=34069+Dr;0<Dr&&(at.depth=Br[0].depth,at.stencil=Br[0].stencil,at.depthStencil=Br[0].depthStencil),Br[Dr]?Br[Dr](at):Br[Dr]=Dt(at)}return oe(wr,{width:zt,height:zt,color:Yr})}var Br=Array(6);return wr(ur),oe(wr,{faces:Br,resize:function(Yr){var Dr=Yr|0;if(Dr===wr.width)return wr;var at=wr.color;for(Yr=0;Yr<at.length;++Yr)at[Yr].resize(Dr);for(Yr=0;6>Yr;++Yr)Br[Yr].resize(Dr);return wr.width=wr.height=Dr,wr},_reglType:"framebufferCube",destroy:function(){Br.forEach(function(Yr){Yr.destroy()})}})},clear:function(){Le(Jr).forEach(Rt)},restore:function(){Jt.cur=null,Jt.next=null,Jt.dirty=!0,Le(Jr).forEach(function(ur){ur.framebuffer=ft.createFramebuffer(),wt(ur)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(ft,ar,rr,Kt,Er,st,et){function vt(wt){if(wt!==Rt.currentVAO){var Dt=ar.oes_vertex_array_object;wt?Dt.bindVertexArrayOES(wt.vao):Dt.bindVertexArrayOES(null),Rt.currentVAO=wt}}function pt(wt){if(wt!==Rt.currentVAO){if(wt)wt.bindAttrs();else{for(var Dt=ar.angle_instanced_arrays,Jt=0;Jt<lt.length;++Jt){var fr=lt[Jt];fr.buffer?(ft.enableVertexAttribArray(Jt),fr.buffer.bind(),ft.vertexAttribPointer(Jt,fr.size,fr.type,fr.normalized,fr.stride,fr.offfset),Dt&&fr.divisor&&Dt.vertexAttribDivisorANGLE(Jt,fr.divisor)):(ft.disableVertexAttribArray(Jt),ft.vertexAttrib4f(Jt,fr.x,fr.y,fr.z,fr.w))}et.elements?ft.bindBuffer(34963,et.elements.buffer.buffer):ft.bindBuffer(34963,null)}Rt.currentVAO=wt}}function Ct(){Le(yt).forEach(function(wt){wt.destroy()})}function Ht(){this.id=++ct,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var wt=ar.oes_vertex_array_object;this.vao=wt?wt.createVertexArrayOES():null,yt[this.id]=this,this.buffers=[]}function Pe(){ar.oes_vertex_array_object&&Le(yt).forEach(function(wt){wt.refresh()})}var ke=rr.maxAttributes,lt=Array(ke);for(rr=0;rr<ke;++rr)lt[rr]=new O;var ct=0,yt={},Rt={Record:O,scope:{},state:lt,currentVAO:null,targetVAO:null,restore:ar.oes_vertex_array_object?Pe:function(){},createVAO:function(wt){function Dt(fr){var Rr;Array.isArray(fr)?(Rr=fr,Jt.elements&&Jt.ownsElements&&Jt.elements.destroy(),Jt.elements=null,Jt.ownsElements=!1,Jt.offset=0,Jt.count=0,Jt.instances=-1,Jt.primitive=4):(fr.elements?(Rr=fr.elements,Jt.ownsElements?(typeof Rr=="function"&&Rr._reglType==="elements"?Jt.elements.destroy():Jt.elements(Rr),Jt.ownsElements=!1):st.getElements(fr.elements)?(Jt.elements=fr.elements,Jt.ownsElements=!1):(Jt.elements=st.create(fr.elements),Jt.ownsElements=!0)):(Jt.elements=null,Jt.ownsElements=!1),Rr=fr.attributes,Jt.offset=0,Jt.count=-1,Jt.instances=-1,Jt.primitive=4,Jt.elements&&(Jt.count=Jt.elements._elements.vertCount,Jt.primitive=Jt.elements._elements.primType),"offset"in fr&&(Jt.offset=fr.offset|0),"count"in fr&&(Jt.count=fr.count|0),"instances"in fr&&(Jt.instances=fr.instances|0),"primitive"in fr&&(Jt.primitive=We[fr.primitive])),fr={};var Sr=Jt.attributes;Sr.length=Rr.length;for(var Pr=0;Pr<Rr.length;++Pr){var Jr=Rr[Pr],ur=Sr[Pr]=new O,wr=Jr.data||Jr;if(Array.isArray(wr)||Me(wr)||p(wr)){var Br;Jt.buffers[Pr]&&(Br=Jt.buffers[Pr],Me(wr)&&Br._buffer.byteLength>=wr.byteLength?Br.subdata(wr):(Br.destroy(),Jt.buffers[Pr]=null)),Jt.buffers[Pr]||(Br=Jt.buffers[Pr]=Er.create(Jr,34962,!1,!0)),ur.buffer=Er.getBuffer(Br),ur.size=ur.buffer.dimension|0,ur.normalized=!1,ur.type=ur.buffer.dtype,ur.offset=0,ur.stride=0,ur.divisor=0,ur.state=1,fr[Pr]=1}else Er.getBuffer(Jr)?(ur.buffer=Er.getBuffer(Jr),ur.size=ur.buffer.dimension|0,ur.normalized=!1,ur.type=ur.buffer.dtype,ur.offset=0,ur.stride=0,ur.divisor=0,ur.state=1):Er.getBuffer(Jr.buffer)?(ur.buffer=Er.getBuffer(Jr.buffer),ur.size=(+Jr.size||ur.buffer.dimension)|0,ur.normalized=!!Jr.normalized||!1,ur.type="type"in Jr?Ee[Jr.type]:ur.buffer.dtype,ur.offset=(Jr.offset||0)|0,ur.stride=(Jr.stride||0)|0,ur.divisor=(Jr.divisor||0)|0,ur.state=1):"x"in Jr&&(ur.x=+Jr.x||0,ur.y=+Jr.y||0,ur.z=+Jr.z||0,ur.w=+Jr.w||0,ur.state=2)}for(Br=0;Br<Jt.buffers.length;++Br)!fr[Br]&&Jt.buffers[Br]&&(Jt.buffers[Br].destroy(),Jt.buffers[Br]=null);return Jt.refresh(),Dt}var Jt=new Ht;return Kt.vaoCount+=1,Dt.destroy=function(){for(var fr=0;fr<Jt.buffers.length;++fr)Jt.buffers[fr]&&Jt.buffers[fr].destroy();Jt.buffers.length=0,Jt.ownsElements&&(Jt.elements.destroy(),Jt.elements=null,Jt.ownsElements=!1),Jt.destroy()},Dt._vao=Jt,Dt._reglType="vao",Dt(wt)},getVAO:function(wt){return typeof wt=="function"&&wt._vao?wt._vao:null},destroyBuffer:function(wt){for(var Dt=0;Dt<lt.length;++Dt){var Jt=lt[Dt];Jt.buffer===wt&&(ft.disableVertexAttribArray(Dt),Jt.buffer=null)}},setVAO:ar.oes_vertex_array_object?vt:pt,clear:ar.oes_vertex_array_object?Ct:function(){}};return Ht.prototype.bindAttrs=function(){for(var wt=ar.angle_instanced_arrays,Dt=this.attributes,Jt=0;Jt<Dt.length;++Jt){var fr=Dt[Jt];fr.buffer?(ft.enableVertexAttribArray(Jt),ft.bindBuffer(34962,fr.buffer.buffer),ft.vertexAttribPointer(Jt,fr.size,fr.type,fr.normalized,fr.stride,fr.offset),wt&&fr.divisor&&wt.vertexAttribDivisorANGLE(Jt,fr.divisor)):(ft.disableVertexAttribArray(Jt),ft.vertexAttrib4f(Jt,fr.x,fr.y,fr.z,fr.w))}for(wt=Dt.length;wt<ke;++wt)ft.disableVertexAttribArray(wt);(wt=st.getElements(this.elements))?ft.bindBuffer(34963,wt.buffer.buffer):ft.bindBuffer(34963,null)},Ht.prototype.refresh=function(){var wt=ar.oes_vertex_array_object;wt&&(wt.bindVertexArrayOES(this.vao),this.bindAttrs(),Rt.currentVAO=null,wt.bindVertexArrayOES(null))},Ht.prototype.destroy=function(){if(this.vao){var wt=ar.oes_vertex_array_object;this===Rt.currentVAO&&(Rt.currentVAO=null,wt.bindVertexArrayOES(null)),wt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),yt[this.id]&&(delete yt[this.id],--Kt.vaoCount)},Rt}function B(ft,ar,rr,Kt){function Er(ct,yt,Rt,wt){this.name=ct,this.id=yt,this.location=Rt,this.info=wt}function st(ct,yt){for(var Rt=0;Rt<ct.length;++Rt)if(ct[Rt].id===yt.id){ct[Rt].location=yt.location;return}ct.push(yt)}function et(ct,yt,Rt){Rt=ct===35632?Ct:Ht;var wt=Rt[yt];if(!wt){var Dt=ar.str(yt),wt=ft.createShader(ct);ft.shaderSource(wt,Dt),ft.compileShader(wt),Rt[yt]=wt}return wt}function vt(ct,yt){this.id=lt++,this.fragId=ct,this.vertId=yt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Kt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pt(ct,yt,Rt){var wt;wt=et(35632,ct.fragId);var Dt=et(35633,ct.vertId);if(yt=ct.program=ft.createProgram(),ft.attachShader(yt,wt),ft.attachShader(yt,Dt),Rt)for(wt=0;wt<Rt.length;++wt)Dt=Rt[wt],ft.bindAttribLocation(yt,Dt[0],Dt[1]);ft.linkProgram(yt),Dt=ft.getProgramParameter(yt,35718),Kt.profile&&(ct.stats.uniformsCount=Dt);var Jt=ct.uniforms;for(wt=0;wt<Dt;++wt)if(Rt=ft.getActiveUniform(yt,wt))if(1<Rt.size)for(var fr=0;fr<Rt.size;++fr){var Rr=Rt.name.replace("[0]","["+fr+"]");st(Jt,new Er(Rr,ar.id(Rr),ft.getUniformLocation(yt,Rr),Rt))}else st(Jt,new Er(Rt.name,ar.id(Rt.name),ft.getUniformLocation(yt,Rt.name),Rt));for(Dt=ft.getProgramParameter(yt,35721),Kt.profile&&(ct.stats.attributesCount=Dt),ct=ct.attributes,wt=0;wt<Dt;++wt)(Rt=ft.getActiveAttrib(yt,wt))&&st(ct,new Er(Rt.name,ar.id(Rt.name),ft.getAttribLocation(yt,Rt.name),Rt))}var Ct={},Ht={},Pe={},ke=[],lt=0;return Kt.profile&&(rr.getMaxUniformsCount=function(){var ct=0;return ke.forEach(function(yt){yt.stats.uniformsCount>ct&&(ct=yt.stats.uniformsCount)}),ct},rr.getMaxAttributesCount=function(){var ct=0;return ke.forEach(function(yt){yt.stats.attributesCount>ct&&(ct=yt.stats.attributesCount)}),ct}),{clear:function(){var ct=ft.deleteShader.bind(ft);Le(Ct).forEach(ct),Ct={},Le(Ht).forEach(ct),Ht={},ke.forEach(function(yt){ft.deleteProgram(yt.program)}),ke.length=0,Pe={},rr.shaderCount=0},program:function(ct,yt,Rt,wt){var Dt=Pe[yt];Dt||(Dt=Pe[yt]={});var Jt=Dt[ct];if(Jt&&(Jt.refCount++,!wt))return Jt;var fr=new vt(yt,ct);return rr.shaderCount++,pt(fr,Rt,wt),Jt||(Dt[ct]=fr),ke.push(fr),oe(fr,{destroy:function(){if(fr.refCount--,0>=fr.refCount){ft.deleteProgram(fr.program);var Rr=ke.indexOf(fr);ke.splice(Rr,1),rr.shaderCount--}0>=Dt[fr.vertId].refCount&&(ft.deleteShader(Ht[fr.vertId]),delete Ht[fr.vertId],delete Pe[fr.fragId][fr.vertId]),Object.keys(Pe[fr.fragId]).length||(ft.deleteShader(Ct[fr.fragId]),delete Ct[fr.fragId],delete Pe[fr.fragId])}})},restore:function(){Ct={},Ht={};for(var ct=0;ct<ke.length;++ct)pt(ke[ct],null,ke[ct].attributes.map(function(yt){return[yt.location,yt.name]}))},shader:et,frag:-1,vert:-1}}function G(ft,ar,rr,Kt,Er,st,et){function vt(Ct){var Ht;Ht=ar.next===null?5121:ar.next.colorAttachments[0].texture._texture.type;var Pe=0,ke=0,lt=Kt.framebufferWidth,ct=Kt.framebufferHeight,yt=null;return Me(Ct)?yt=Ct:Ct&&(Pe=Ct.x|0,ke=Ct.y|0,lt=(Ct.width||Kt.framebufferWidth-Pe)|0,ct=(Ct.height||Kt.framebufferHeight-ke)|0,yt=Ct.data||null),rr(),Ct=lt*ct*4,yt||(Ht===5121?yt=new Uint8Array(Ct):Ht===5126&&(yt=yt||new Float32Array(Ct))),ft.pixelStorei(3333,4),ft.readPixels(Pe,ke,lt,ct,6408,Ht,yt),yt}function pt(Ct){var Ht;return ar.setFBO({framebuffer:Ct.framebuffer},function(){Ht=vt(Ct)}),Ht}return function(Ct){return Ct&&"framebuffer"in Ct?pt(Ct):vt(Ct)}}function Q(ft){for(var ar=Array(ft.length>>2),Kt=0;Kt<ar.length;Kt++)ar[Kt]=0;for(Kt=0;Kt<8*ft.length;Kt+=8)ar[Kt>>5]|=(ft.charCodeAt(Kt/8)&255)<<24-Kt%32;var rr=8*ft.length;ft=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Kt=Array(64),Er,st,et,vt,pt,Ct,Ht,Pe,ke,lt,ct;for(ar[rr>>5]|=128<<24-rr%32,ar[(rr+64>>9<<4)+15]=rr,Pe=0;Pe<ar.length;Pe+=16){for(rr=ft[0],Er=ft[1],st=ft[2],et=ft[3],vt=ft[4],pt=ft[5],Ct=ft[6],Ht=ft[7],ke=0;64>ke;ke++){if(16>ke)Kt[ke]=ar[ke+Pe];else{lt=ke,ct=Kt[ke-2],ct=re(ct,17)^re(ct,19)^ct>>>10,ct=ue(ct,Kt[ke-7]);var yt;yt=Kt[ke-15],yt=re(yt,7)^re(yt,18)^yt>>>3,Kt[lt]=ue(ue(ct,yt),Kt[ke-16])}lt=vt,lt=re(lt,6)^re(lt,11)^re(lt,25),lt=ue(ue(ue(ue(Ht,lt),vt&pt^~vt&Ct),jt[ke]),Kt[ke]),Ht=rr,Ht=re(Ht,2)^re(Ht,13)^re(Ht,22),ct=ue(Ht,rr&Er^rr&st^Er&st),Ht=Ct,Ct=pt,pt=vt,vt=ue(et,lt),et=st,st=Er,Er=rr,rr=ue(lt,ct)}ft[0]=ue(rr,ft[0]),ft[1]=ue(Er,ft[1]),ft[2]=ue(st,ft[2]),ft[3]=ue(et,ft[3]),ft[4]=ue(vt,ft[4]),ft[5]=ue(pt,ft[5]),ft[6]=ue(Ct,ft[6]),ft[7]=ue(Ht,ft[7])}for(ar="",Kt=0;Kt<32*ft.length;Kt+=8)ar+=String.fromCharCode(ft[Kt>>5]>>>24-Kt%32&255);return ar}function X(ft){for(var ar="",rr,Kt=0;Kt<ft.length;Kt++)rr=ft.charCodeAt(Kt),ar+="0123456789abcdef".charAt(rr>>>4&15)+"0123456789abcdef".charAt(rr&15);return ar}function j(ft){for(var ar="",rr=-1,Kt,Er;++rr<ft.length;)Kt=ft.charCodeAt(rr),Er=rr+1<ft.length?ft.charCodeAt(rr+1):0,55296<=Kt&&56319>=Kt&&56320<=Er&&57343>=Er&&(Kt=65536+((Kt&1023)<<10)+(Er&1023),rr++),127>=Kt?ar+=String.fromCharCode(Kt):2047>=Kt?ar+=String.fromCharCode(192|Kt>>>6&31,128|Kt&63):65535>=Kt?ar+=String.fromCharCode(224|Kt>>>12&15,128|Kt>>>6&63,128|Kt&63):2097151>=Kt&&(ar+=String.fromCharCode(240|Kt>>>18&7,128|Kt>>>12&63,128|Kt>>>6&63,128|Kt&63));return ar}function re(ft,ar){return ft>>>ar|ft<<32-ar}function ue(ft,ar){var rr=(ft&65535)+(ar&65535);return(ft>>16)+(ar>>16)+(rr>>16)<<16|rr&65535}function K(ft){return Array.prototype.slice.call(ft)}function te(ft){return K(ft).join("")}function Y(ft){function ar(){var Ht=[],Pe=[];return oe(function(){Ht.push.apply(Ht,K(arguments))},{def:function(){var ke="v"+Er++;return Pe.push(ke),0<arguments.length&&(Ht.push(ke,"="),Ht.push.apply(Ht,K(arguments)),Ht.push(";")),ke},toString:function(){return te([0<Pe.length?"var "+Pe.join(",")+";":"",te(Ht)])}})}function rr(){function Ht(yt,Rt){ke(yt,Rt,"=",Pe.def(yt,Rt),";")}var Pe=ar(),ke=ar(),lt=Pe.toString,ct=ke.toString;return oe(function(){Pe.apply(Pe,K(arguments))},{def:Pe.def,entry:Pe,exit:ke,save:Ht,set:function(yt,Rt,wt){Ht(yt,Rt),Pe(yt,Rt,"=",wt,";")},toString:function(){return lt()+ct()}})}var Kt=ft&&ft.cache,Er=0,st=[],et=[],vt=[],pt=ar(),Ct={};return{global:pt,link:function(Ht,Pe){var ke=Pe&&Pe.stable;if(!ke){for(var lt=0;lt<et.length;++lt)if(et[lt]===Ht&&!vt[lt])return st[lt]}return lt="g"+Er++,st.push(lt),et.push(Ht),vt.push(ke),lt},block:ar,proc:function(Ht,Pe){function ke(){var Rt="a"+lt.length;return lt.push(Rt),Rt}var lt=[];Pe=Pe||0;for(var ct=0;ct<Pe;++ct)ke();var ct=rr(),yt=ct.toString;return Ct[Ht]=oe(ct,{arg:ke,toString:function(){return te(["function(",lt.join(),"){",yt(),"}"])}})},scope:rr,cond:function(){var Ht=te(arguments),Pe=rr(),ke=rr(),lt=Pe.toString,ct=ke.toString;return oe(Pe,{then:function(){return Pe.apply(Pe,K(arguments)),this},else:function(){return ke.apply(ke,K(arguments)),this},toString:function(){var yt=ct();return yt&&(yt="else{"+yt+"}"),te(["if(",Ht,"){",lt(),"}",yt])}})},compile:function(){var Ht=['"use strict";',pt,"return {"];Object.keys(Ct).forEach(function(lt){Ht.push('"',lt,'":',Ct[lt].toString(),",")}),Ht.push("}");var Pe=te(Ht).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ke;return Kt&&(ke=X(Q(j(Pe))),Kt[ke])?Kt[ke].apply(null,et):(Pe=Function.apply(null,st.concat(Pe)),Kt&&(Kt[ke]=Pe),Pe.apply(null,et))}}}function V(ft){return Array.isArray(ft)||Me(ft)||p(ft)}function ee(ft){return ft.sort(function(ar,rr){return ar==="viewport"?-1:rr==="viewport"?1:ar<rr?-1:1})}function ne(ft,ar,rr,Kt){this.thisDep=ft,this.contextDep=ar,this.propDep=rr,this.append=Kt}function Z(ft){return ft&&!(ft.thisDep||ft.contextDep||ft.propDep)}function q(ft){return new ne(!1,!1,!1,ft)}function ie(ft,ar){var rr=ft.type;if(rr===0)return rr=ft.data.length,new ne(!0,1<=rr,2<=rr,ar);if(rr===4)return rr=ft.data,new ne(rr.thisDep,rr.contextDep,rr.propDep,ar);if(rr===5)return new ne(!1,!1,!1,ar);if(rr===6){for(var Kt=rr=!1,Er=!1,st=0;st<ft.data.length;++st){var et=ft.data[st];et.type===1?Er=!0:et.type===2?Kt=!0:et.type===3?rr=!0:et.type===0?(rr=!0,et=et.data,1<=et&&(Kt=!0),2<=et&&(Er=!0)):et.type===4&&(rr=rr||et.data.thisDep,Kt=Kt||et.data.contextDep,Er=Er||et.data.propDep)}return new ne(rr,Kt,Er,ar)}return new ne(rr===3,rr===2,rr===1,ar)}function se(ft,ar,rr,Kt,Er,st,et,vt,pt,Ct,Ht,Pe,ke,lt,ct,yt){function Rt(Xt){return Xt.replace(".","_")}function wt(Xt,mr,un){var xn=Rt(Xt);da.push(Xt),qn[xn]=Ln[xn]=!!un,oa[xn]=mr}function Dt(Xt,mr,un){var xn=Rt(Xt);da.push(Xt),Array.isArray(un)?(Ln[xn]=un.slice(),qn[xn]=un.slice()):Ln[xn]=qn[xn]=un,Bn[xn]=mr}function Jt(){var Xt=Y({cache:ct}),mr=Xt.link,un=Xt.global;Xt.id=gi++,Xt.batchId="0";var xn=mr($n),sn=Xt.shared={props:"a0"};Object.keys($n).forEach(function(Ar){sn[Ar]=un.def(xn,".",Ar)});var Cn=Xt.next={},Mn=Xt.current={};Object.keys(Bn).forEach(function(Ar){Array.isArray(Ln[Ar])&&(Cn[Ar]=un.def(sn.next,".",Ar),Mn[Ar]=un.def(sn.current,".",Ar))});var dn=Xt.constants={};Object.keys(Xa).forEach(function(Ar){dn[Ar]=un.def(JSON.stringify(Xa[Ar]))}),Xt.invoke=function(Ar,Hr){switch(Hr.type){case 0:var wn=["this",sn.context,sn.props,Xt.batchId];return Ar.def(mr(Hr.data),".call(",wn.slice(0,Math.max(Hr.data.length+1,4)),")");case 1:return Ar.def(sn.props,Hr.data);case 2:return Ar.def(sn.context,Hr.data);case 3:return Ar.def("this",Hr.data);case 4:return Hr.data.append(Xt,Ar),Hr.data.ref;case 5:return Hr.data.toString();case 6:return Hr.data.map(function(Gn){return Xt.invoke(Ar,Gn)})}},Xt.attribCache={};var Tr={};return Xt.scopeAttrib=function(Ar){if(Ar=ar.id(Ar),Ar in Tr)return Tr[Ar];var Hr=Ct.scope[Ar];return Hr||(Hr=Ct.scope[Ar]=new ti),Tr[Ar]=mr(Hr)},Xt}function fr(Xt){var mr=Xt.static;Xt=Xt.dynamic;var un;if("profile"in mr){var xn=!!mr.profile;un=q(function(Cn,Mn){return xn}),un.enable=xn}else if("profile"in Xt){var sn=Xt.profile;un=ie(sn,function(Cn,Mn){return Cn.invoke(Mn,sn)})}return un}function Rr(Xt,mr){var un=Xt.static,xn=Xt.dynamic;if("framebuffer"in un){var sn=un.framebuffer;return sn?(sn=vt.getFramebuffer(sn),q(function(Mn,dn){var Tr=Mn.link(sn),Ar=Mn.shared;return dn.set(Ar.framebuffer,".next",Tr),Ar=Ar.context,dn.set(Ar,".framebufferWidth",Tr+".width"),dn.set(Ar,".framebufferHeight",Tr+".height"),Tr})):q(function(Mn,dn){var Tr=Mn.shared;return dn.set(Tr.framebuffer,".next","null"),Tr=Tr.context,dn.set(Tr,".framebufferWidth",Tr+".drawingBufferWidth"),dn.set(Tr,".framebufferHeight",Tr+".drawingBufferHeight"),"null"})}if("framebuffer"in xn){var Cn=xn.framebuffer;return ie(Cn,function(Mn,dn){var Hr=Mn.invoke(dn,Cn),Tr=Mn.shared,Ar=Tr.framebuffer,Hr=dn.def(Ar,".getFramebuffer(",Hr,")");return dn.set(Ar,".next",Hr),Tr=Tr.context,dn.set(Tr,".framebufferWidth",Hr+"?"+Hr+".width:"+Tr+".drawingBufferWidth"),dn.set(Tr,".framebufferHeight",Hr+"?"+Hr+".height:"+Tr+".drawingBufferHeight"),Hr})}return null}function Sr(Xt,mr,un){function xn(dn){if(dn in sn){var Tr=sn[dn];dn=!0;var Ar=Tr.x|0,Hr=Tr.y|0,wn,Gn;return"width"in Tr?wn=Tr.width|0:dn=!1,"height"in Tr?Gn=Tr.height|0:dn=!1,new ne(!dn&&mr&&mr.thisDep,!dn&&mr&&mr.contextDep,!dn&&mr&&mr.propDep,function(En,ea){var fa=En.shared.context,_a=wn;"width"in Tr||(_a=ea.def(fa,".","framebufferWidth","-",Ar));var Aa=Gn;return"height"in Tr||(Aa=ea.def(fa,".","framebufferHeight","-",Hr)),[Ar,Hr,_a,Aa]})}if(dn in Cn){var sa=Cn[dn];return dn=ie(sa,function(En,ea){var La=En.invoke(ea,sa),fa=En.shared.context,_a=ea.def(La,".x|0"),Aa=ea.def(La,".y|0"),va=ea.def('"width" in ',La,"?",La,".width|0:","(",fa,".","framebufferWidth","-",_a,")"),La=ea.def('"height" in ',La,"?",La,".height|0:","(",fa,".","framebufferHeight","-",Aa,")");return[_a,Aa,va,La]}),mr&&(dn.thisDep=dn.thisDep||mr.thisDep,dn.contextDep=dn.contextDep||mr.contextDep,dn.propDep=dn.propDep||mr.propDep),dn}return mr?new ne(mr.thisDep,mr.contextDep,mr.propDep,function(En,ea){var fa=En.shared.context;return[0,0,ea.def(fa,".","framebufferWidth"),ea.def(fa,".","framebufferHeight")]}):null}var sn=Xt.static,Cn=Xt.dynamic;if(Xt=xn("viewport")){var Mn=Xt;Xt=new ne(Xt.thisDep,Xt.contextDep,Xt.propDep,function(dn,Tr){var Ar=Mn.append(dn,Tr),Hr=dn.shared.context;return Tr.set(Hr,".viewportWidth",Ar[2]),Tr.set(Hr,".viewportHeight",Ar[3]),Ar})}return{viewport:Xt,scissor_box:xn("scissor.box")}}function Pr(Xt,mr){var un=Xt.static;if(typeof un.frag=="string"&&typeof un.vert=="string"){if(0<Object.keys(mr.dynamic).length)return null;var un=mr.static,xn=Object.keys(un);if(0<xn.length&&typeof un[xn[0]]=="number"){for(var sn=[],Cn=0;Cn<xn.length;++Cn)sn.push([un[xn[Cn]]|0,xn[Cn]]);return sn}}return null}function Jr(Xt,mr,un){function xn(Ar){if(Ar in sn){var Hr=ar.id(sn[Ar]);return Ar=q(function(){return Hr}),Ar.id=Hr,Ar}if(Ar in Cn){var wn=Cn[Ar];return ie(wn,function(Gn,sa){var En=Gn.invoke(sa,wn);return sa.def(Gn.shared.strings,".id(",En,")")})}return null}var sn=Xt.static,Cn=Xt.dynamic,Mn=xn("frag"),dn=xn("vert"),Tr=null;return Z(Mn)&&Z(dn)?(Tr=Ht.program(dn.id,Mn.id,null,un),Xt=q(function(Ar,Hr){return Ar.link(Tr)})):Xt=new ne(Mn&&Mn.thisDep||dn&&dn.thisDep,Mn&&Mn.contextDep||dn&&dn.contextDep,Mn&&Mn.propDep||dn&&dn.propDep,function(Ar,Hr){var wn=Ar.shared.shader,Gn;Gn=Mn?Mn.append(Ar,Hr):Hr.def(wn,".","frag");var sa;return sa=dn?dn.append(Ar,Hr):Hr.def(wn,".","vert"),Hr.def(wn+".program("+sa+","+Gn+")")}),{frag:Mn,vert:dn,progVar:Xt,program:Tr}}function ur(Xt,mr){function un(En,ea){if(En in xn){var fa=xn[En]|0;return ea?Cn.offset=fa:Cn.instances=fa,q(function(Aa,va){return ea&&(Aa.OFFSET=fa),fa})}if(En in sn){var _a=sn[En];return ie(_a,function(Aa,va){var La=Aa.invoke(va,_a);return ea&&(Aa.OFFSET=La),La})}if(ea){if(Tr)return q(function(Aa,va){return Aa.OFFSET=0});if(Mn)return new ne(dn.thisDep,dn.contextDep,dn.propDep,function(Aa,va){return va.def(Aa.shared.vao+".currentVAO?"+Aa.shared.vao+".currentVAO.offset:0")})}else if(Mn)return new ne(dn.thisDep,dn.contextDep,dn.propDep,function(Aa,va){return va.def(Aa.shared.vao+".currentVAO?"+Aa.shared.vao+".currentVAO.instances:-1")});return null}var xn=Xt.static,sn=Xt.dynamic,Cn={},Mn=!1,dn=function(){if("vao"in xn){var En=xn.vao;return En!==null&&Ct.getVAO(En)===null&&(En=Ct.createVAO(En)),Mn=!0,Cn.vao=En,q(function(fa){var _a=Ct.getVAO(En);return _a?fa.link(_a):"null"})}if("vao"in sn){Mn=!0;var ea=sn.vao;return ie(ea,function(fa,_a){var Aa=fa.invoke(_a,ea);return _a.def(fa.shared.vao+".getVAO("+Aa+")")})}return null}(),Tr=!1,Ar=function(){if("elements"in xn){var En=xn.elements;if(Cn.elements=En,V(En)){var ea=Cn.elements=st.create(En,!0),En=st.getElements(ea);Tr=!0}else En&&(En=st.getElements(En),Tr=!0);return ea=q(function(_a,Aa){if(En){var va=_a.link(En);return _a.ELEMENTS=va}return _a.ELEMENTS=null}),ea.value=En,ea}if("elements"in sn){Tr=!0;var fa=sn.elements;return ie(fa,function(_a,Aa){var va=_a.shared,So=va.isBufferArgs,va=va.elements,Jo=_a.invoke(Aa,fa),La=Aa.def("null"),So=Aa.def(So,"(",Jo,")"),Jo=_a.cond(So).then(La,"=",va,".createStream(",Jo,");").else(La,"=",va,".getElements(",Jo,");");return Aa.entry(Jo),Aa.exit(_a.cond(So).then(va,".destroyStream(",La,");")),_a.ELEMENTS=La})}return Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(_a,Aa){return Aa.def(_a.shared.vao+".currentVAO?"+_a.shared.elements+".getElements("+_a.shared.vao+".currentVAO.elements):null")}):null}(),Hr=un("offset",!0),wn=function(){if("primitive"in xn){var En=xn.primitive;return Cn.primitive=En,q(function(fa,_a){return We[En]})}if("primitive"in sn){var ea=sn.primitive;return ie(ea,function(fa,_a){var Aa=fa.constants.primTypes,va=fa.invoke(_a,ea);return _a.def(Aa,"[",va,"]")})}return Tr?Z(Ar)?Ar.value?q(function(fa,_a){return _a.def(fa.ELEMENTS,".primType")}):q(function(){return 4}):new ne(Ar.thisDep,Ar.contextDep,Ar.propDep,function(fa,_a){var Aa=fa.ELEMENTS;return _a.def(Aa,"?",Aa,".primType:",4)}):Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(fa,_a){return _a.def(fa.shared.vao+".currentVAO?"+fa.shared.vao+".currentVAO.primitive:4")}):null}(),Gn=function(){if("count"in xn){var En=xn.count|0;return Cn.count=En,q(function(){return En})}if("count"in sn){var ea=sn.count;return ie(ea,function(fa,_a){return fa.invoke(_a,ea)})}return Tr?Z(Ar)?Ar?Hr?new ne(Hr.thisDep,Hr.contextDep,Hr.propDep,function(fa,_a){return _a.def(fa.ELEMENTS,".vertCount-",fa.OFFSET)}):q(function(fa,_a){return _a.def(fa.ELEMENTS,".vertCount")}):q(function(){return-1}):new ne(Ar.thisDep||Hr.thisDep,Ar.contextDep||Hr.contextDep,Ar.propDep||Hr.propDep,function(fa,_a){var Aa=fa.ELEMENTS;return fa.OFFSET?_a.def(Aa,"?",Aa,".vertCount-",fa.OFFSET,":-1"):_a.def(Aa,"?",Aa,".vertCount:-1")}):Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(fa,_a){return _a.def(fa.shared.vao,".currentVAO?",fa.shared.vao,".currentVAO.count:-1")}):null}(),sa=un("instances",!1);return{elements:Ar,primitive:wn,count:Gn,instances:sa,offset:Hr,vao:dn,vaoActive:Mn,elementsActive:Tr,static:Cn}}function wr(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return da.forEach(function(Cn){function Mn(Tr,Ar){if(Cn in un){var Hr=Tr(un[Cn]);sn[dn]=q(function(){return Hr})}else if(Cn in xn){var wn=xn[Cn];sn[dn]=ie(wn,function(Gn,sa){return Ar(Gn,sa,Gn.invoke(sa,wn))})}}var dn=Rt(Cn);switch(Cn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Mn(function(Tr){return Tr},function(Tr,Ar,Hr){return Hr});case"depth.func":return Mn(function(Tr){return Zt[Tr]},function(Tr,Ar,Hr){return Ar.def(Tr.constants.compareFuncs,"[",Hr,"]")});case"depth.range":return Mn(function(Tr){return Tr},function(Tr,Ar,Hr){return Tr=Ar.def("+",Hr,"[0]"),Ar=Ar.def("+",Hr,"[1]"),[Tr,Ar]});case"blend.func":return Mn(function(Tr){return[Qt["srcRGB"in Tr?Tr.srcRGB:Tr.src],Qt["dstRGB"in Tr?Tr.dstRGB:Tr.dst],Qt["srcAlpha"in Tr?Tr.srcAlpha:Tr.src],Qt["dstAlpha"in Tr?Tr.dstAlpha:Tr.dst]]},function(Tr,Ar,Hr){function wn(ea,fa){return Ar.def('"',ea,fa,'" in ',Hr,"?",Hr,".",ea,fa,":",Hr,".",ea)}Tr=Tr.constants.blendFuncs;var Gn=wn("src","RGB"),En=wn("dst","RGB"),Gn=Ar.def(Tr,"[",Gn,"]"),sa=Ar.def(Tr,"[",wn("src","Alpha"),"]"),En=Ar.def(Tr,"[",En,"]");return Tr=Ar.def(Tr,"[",wn("dst","Alpha"),"]"),[Gn,En,sa,Tr]});case"blend.equation":return Mn(function(Tr){if(typeof Tr=="string")return[$a[Tr],$a[Tr]];if(typeof Tr=="object")return[$a[Tr.rgb],$a[Tr.alpha]]},function(Tr,Ar,Hr){var wn=Tr.constants.blendEquations,Gn=Ar.def(),sa=Ar.def();return Tr=Tr.cond("typeof ",Hr,'==="string"'),Tr.then(Gn,"=",sa,"=",wn,"[",Hr,"];"),Tr.else(Gn,"=",wn,"[",Hr,".rgb];",sa,"=",wn,"[",Hr,".alpha];"),Ar(Tr),[Gn,sa]});case"blend.color":return Mn(function(Tr){return s(4,function(Ar){return+Tr[Ar]})},function(Tr,Ar,Hr){return s(4,function(wn){return Ar.def("+",Hr,"[",wn,"]")})});case"stencil.mask":return Mn(function(Tr){return Tr|0},function(Tr,Ar,Hr){return Ar.def(Hr,"|0")});case"stencil.func":return Mn(function(Tr){return[Zt[Tr.cmp||"keep"],Tr.ref||0,"mask"in Tr?Tr.mask:-1]},function(Tr,Ar,Hr){Tr=Ar.def('"cmp" in ',Hr,"?",Tr.constants.compareFuncs,"[",Hr,".cmp]",":",7680);var wn=Ar.def(Hr,".ref|0");return Ar=Ar.def('"mask" in ',Hr,"?",Hr,".mask|0:-1"),[Tr,wn,Ar]});case"stencil.opFront":case"stencil.opBack":return Mn(function(Tr){return[Cn==="stencil.opBack"?1029:1028,cr[Tr.fail||"keep"],cr[Tr.zfail||"keep"],cr[Tr.zpass||"keep"]]},function(Tr,Ar,Hr){function wn(sa){return Ar.def('"',sa,'" in ',Hr,"?",Gn,"[",Hr,".",sa,"]:",7680)}var Gn=Tr.constants.stencilOps;return[Cn==="stencil.opBack"?1029:1028,wn("fail"),wn("zfail"),wn("zpass")]});case"polygonOffset.offset":return Mn(function(Tr){return[Tr.factor|0,Tr.units|0]},function(Tr,Ar,Hr){return Tr=Ar.def(Hr,".factor|0"),Ar=Ar.def(Hr,".units|0"),[Tr,Ar]});case"cull.face":return Mn(function(Tr){var Ar=0;return Tr==="front"?Ar=1028:Tr==="back"&&(Ar=1029),Ar},function(Tr,Ar,Hr){return Ar.def(Hr,'==="front"?',1028,":",1029)});case"lineWidth":return Mn(function(Tr){return Tr},function(Tr,Ar,Hr){return Hr});case"frontFace":return Mn(function(Tr){return Xr[Tr]},function(Tr,Ar,Hr){return Ar.def(Hr+'==="cw"?2304:2305')});case"colorMask":return Mn(function(Tr){return Tr.map(function(Ar){return!!Ar})},function(Tr,Ar,Hr){return s(4,function(wn){return"!!"+Hr+"["+wn+"]"})});case"sample.coverage":return Mn(function(Tr){return["value"in Tr?Tr.value:1,!!Tr.invert]},function(Tr,Ar,Hr){return Tr=Ar.def('"value" in ',Hr,"?+",Hr,".value:1"),Ar=Ar.def("!!",Hr,".invert"),[Tr,Ar]})}}),sn}function Br(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Mn=un[Cn],dn;if(typeof Mn=="number"||typeof Mn=="boolean")dn=q(function(){return Mn});else if(typeof Mn=="function"){var Tr=Mn._reglType;Tr==="texture2d"||Tr==="textureCube"?dn=q(function(Ar){return Ar.link(Mn)}):(Tr==="framebuffer"||Tr==="framebufferCube")&&(dn=q(function(Ar){return Ar.link(Mn.color[0])}))}else b(Mn)&&(dn=q(function(Ar){return Ar.global.def("[",s(Mn.length,function(Hr){return Mn[Hr]}),"]")}));dn.value=Mn,sn[Cn]=dn}),Object.keys(xn).forEach(function(Cn){var Mn=xn[Cn];sn[Cn]=ie(Mn,function(dn,Tr){return dn.invoke(Tr,Mn)})}),sn}function Yr(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Mn=un[Cn],dn=ar.id(Cn),Tr=new ti;if(V(Mn))Tr.state=1,Tr.buffer=Er.getBuffer(Er.create(Mn,34962,!1,!0)),Tr.type=0;else{var Ar=Er.getBuffer(Mn);if(Ar)Tr.state=1,Tr.buffer=Ar,Tr.type=0;else if("constant"in Mn){var Hr=Mn.constant;Tr.buffer="null",Tr.state=2,typeof Hr=="number"?Tr.x=Hr:Bt.forEach(function(fa,_a){_a<Hr.length&&(Tr[fa]=Hr[_a])})}else{var Ar=V(Mn.buffer)?Er.getBuffer(Er.create(Mn.buffer,34962,!1,!0)):Er.getBuffer(Mn.buffer),wn=Mn.offset|0,Gn=Mn.stride|0,sa=Mn.size|0,En=!!Mn.normalized,ea=0;"type"in Mn&&(ea=Ee[Mn.type]),Mn=Mn.divisor|0,Tr.buffer=Ar,Tr.state=1,Tr.size=sa,Tr.normalized=En,Tr.type=ea||Ar.dtype,Tr.offset=wn,Tr.stride=Gn,Tr.divisor=Mn}}sn[Cn]=q(function(fa,_a){var Aa=fa.attribCache;if(dn in Aa)return Aa[dn];var va={isStream:!1};return Object.keys(Tr).forEach(function(La){va[La]=Tr[La]}),Tr.buffer&&(va.buffer=fa.link(Tr.buffer),va.type=va.type||va.buffer+".dtype"),Aa[dn]=va})}),Object.keys(xn).forEach(function(Cn){var Mn=xn[Cn];sn[Cn]=ie(Mn,function(dn,Tr){function Ar(Aa){Tr(En[Aa],"=",Hr,".",Aa,"|0;")}var Hr=dn.invoke(Tr,Mn),sa=dn.shared,wn=dn.constants,Gn=sa.isBufferArgs,sa=sa.buffer,En={isStream:Tr.def(!1)},ea=new ti;ea.state=1,Object.keys(ea).forEach(function(Aa){En[Aa]=Tr.def(""+ea[Aa])});var fa=En.buffer,_a=En.type;return Tr("if(",Gn,"(",Hr,")){",En.isStream,"=true;",fa,"=",sa,".createStream(",34962,",",Hr,");",_a,"=",fa,".dtype;","}else{",fa,"=",sa,".getBuffer(",Hr,");","if(",fa,"){",_a,"=",fa,".dtype;",'}else if("constant" in ',Hr,"){",En.state,"=",2,";","if(typeof "+Hr+'.constant === "number"){',En[Bt[0]],"=",Hr,".constant;",Bt.slice(1).map(function(Aa){return En[Aa]}).join("="),"=0;","}else{",Bt.map(function(Aa,va){return En[Aa]+"="+Hr+".constant.length>"+va+"?"+Hr+".constant["+va+"]:0;"}).join(""),"}}else{","if(",Gn,"(",Hr,".buffer)){",fa,"=",sa,".createStream(",34962,",",Hr,".buffer);","}else{",fa,"=",sa,".getBuffer(",Hr,".buffer);","}",_a,'="type" in ',Hr,"?",wn.glTypes,"[",Hr,".type]:",fa,".dtype;",En.normalized,"=!!",Hr,".normalized;"),Ar("size"),Ar("offset"),Ar("stride"),Ar("divisor"),Tr("}}"),Tr.exit("if(",En.isStream,"){",sa,".destroyStream(",fa,");","}"),En})}),sn}function Dr(Xt){var mr=Xt.static,un=Xt.dynamic,xn={};return Object.keys(mr).forEach(function(sn){var Cn=mr[sn];xn[sn]=q(function(Mn,dn){return typeof Cn=="number"||typeof Cn=="boolean"?""+Cn:Mn.link(Cn)})}),Object.keys(un).forEach(function(sn){var Cn=un[sn];xn[sn]=ie(Cn,function(Mn,dn){return Mn.invoke(dn,Cn)})}),xn}function at(Xt,mr,un,xn,sn){function Cn(ea){var fa=dn[ea];fa&&(Ar[ea]=fa)}var Mn=Pr(Xt,mr),Gn=Rr(Xt),dn=Sr(Xt,Gn),Tr=ur(Xt),Ar=wr(Xt),Hr=Jr(Xt,sn,Mn);Cn("viewport"),Cn(Rt("scissor.box"));var wn=0<Object.keys(Ar).length,Gn={framebuffer:Gn,draw:Tr,shader:Hr,state:Ar,dirty:wn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Gn.profile=fr(Xt),Gn.uniforms=Br(un),Gn.drawVAO=Gn.scopeVAO=Tr.vao,!Gn.drawVAO&&Hr.program&&!Mn&&rr.angle_instanced_arrays&&Tr.static.elements){var sa=!0;if(Xt=Hr.program.attributes.map(function(ea){return ea=mr.static[ea],sa=sa&&!!ea,ea}),sa&&0<Xt.length){var En=Ct.getVAO(Ct.createVAO({attributes:Xt,elements:Tr.static.elements}));Gn.drawVAO=new ne(null,null,null,function(ea,fa){return ea.link(En)}),Gn.useVAO=!0}}return Mn?Gn.useVAO=!0:Gn.attributes=Yr(mr),Gn.context=Dr(xn),Gn}function zt(Xt,mr,un){var xn=Xt.shared.context,sn=Xt.scope();Object.keys(un).forEach(function(Cn){mr.save(xn,"."+Cn);var Mn=un[Cn].append(Xt,mr);Array.isArray(Mn)?sn(xn,".",Cn,"=[",Mn.join(),"];"):sn(xn,".",Cn,"=",Mn,";")}),mr(sn)}function qt(Xt,mr,un,xn){var dn=Xt.shared,sn=dn.gl,Cn=dn.framebuffer,Mn;bn&&(Mn=mr.def(dn.extensions,".webgl_draw_buffers"));var Tr=Xt.constants,dn=Tr.drawBuffer,Tr=Tr.backBuffer;Xt=un?un.append(Xt,mr):mr.def(Cn,".next"),xn||mr("if(",Xt,"!==",Cn,".cur){"),mr("if(",Xt,"){",sn,".bindFramebuffer(",36160,",",Xt,".framebuffer);"),bn&&mr(Mn,".drawBuffersWEBGL(",dn,"[",Xt,".colorAttachments.length]);"),mr("}else{",sn,".bindFramebuffer(",36160,",null);"),bn&&mr(Mn,".drawBuffersWEBGL(",Tr,");"),mr("}",Cn,".cur=",Xt,";"),xn||mr("}")}function hr(Xt,mr,un){var xn=Xt.shared,sn=xn.gl,Cn=Xt.current,Mn=Xt.next,dn=xn.current,Tr=xn.next,Ar=Xt.cond(dn,".dirty");da.forEach(function(Hr){if(Hr=Rt(Hr),!(Hr in un.state)){var wn,Gn;if(Hr in Mn){wn=Mn[Hr],Gn=Cn[Hr];var sa=s(Ln[Hr].length,function(En){return Ar.def(wn,"[",En,"]")});Ar(Xt.cond(sa.map(function(En,ea){return En+"!=="+Gn+"["+ea+"]"}).join("||")).then(sn,".",Bn[Hr],"(",sa,");",sa.map(function(En,ea){return Gn+"["+ea+"]="+En}).join(";"),";"))}else wn=Ar.def(Tr,".",Hr),sa=Xt.cond(wn,"!==",dn,".",Hr),Ar(sa),Hr in oa?sa(Xt.cond(wn).then(sn,".enable(",oa[Hr],");").else(sn,".disable(",oa[Hr],");"),dn,".",Hr,"=",wn,";"):sa(sn,".",Bn[Hr],"(",wn,");",dn,".",Hr,"=",wn,";")}}),Object.keys(un.state).length===0&&Ar(dn,".dirty=false;"),mr(Ar)}function Ur(Xt,mr,un,xn){var sn=Xt.shared,Cn=Xt.current,Mn=sn.current,dn=sn.gl,Tr;ee(Object.keys(un)).forEach(function(Ar){var Hr=un[Ar];if(!xn||xn(Hr)){var wn=Hr.append(Xt,mr);if(oa[Ar]){var Gn=oa[Ar];Z(Hr)?(Tr=Xt.link(wn,{stable:!0}),mr(Xt.cond(Tr).then(dn,".enable(",Gn,");").else(dn,".disable(",Gn,");")),mr(Mn,".",Ar,"=",Tr,";")):(mr(Xt.cond(wn).then(dn,".enable(",Gn,");").else(dn,".disable(",Gn,");")),mr(Mn,".",Ar,"=",wn,";"))}else if(b(wn)){var sa=Cn[Ar];mr(dn,".",Bn[Ar],"(",wn,");",wn.map(function(En,ea){return sa+"["+ea+"]="+En}).join(";"),";")}else Z(Hr)?(Tr=Xt.link(wn,{stable:!0}),mr(dn,".",Bn[Ar],"(",Tr,");",Mn,".",Ar,"=",Tr,";")):mr(dn,".",Bn[Ar],"(",wn,");",Mn,".",Ar,"=",wn,";")}})}function Gr(Xt,mr){Cr&&(Xt.instancing=mr.def(Xt.shared.extensions,".angle_instanced_arrays"))}function Ir(Xt,mr,un,xn,sn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Mn(ea){sa=mr.def(),ea(sa,"=",Cn(),";"),typeof sn=="string"?ea(Hr,".count+=",sn,";"):ea(Hr,".count++;"),lt&&(xn?(En=mr.def(),ea(En,"=",Gn,".getNumPendingQueries();")):ea(Gn,".beginQuery(",Hr,");"))}function dn(ea){ea(Hr,".cpuTime+=",Cn(),"-",sa,";"),lt&&(xn?ea(Gn,".pushScopeStats(",En,",",Gn,".getNumPendingQueries(),",Hr,");"):ea(Gn,".endQuery();"))}function Tr(ea){var fa=mr.def(wn,".profile");mr(wn,".profile=",ea,";"),mr.exit(wn,".profile=",fa,";")}var Ar=Xt.shared,Hr=Xt.stats,wn=Ar.current,Gn=Ar.timer;un=un.profile;var sa,En;if(un){if(Z(un)){un.enable?(Mn(mr),dn(mr.exit),Tr("true")):Tr("false");return}un=un.append(Xt,mr),Tr(un)}else un=mr.def(wn,".profile");Ar=Xt.block(),Mn(Ar),mr("if(",un,"){",Ar,"}"),Xt=Xt.block(),dn(Xt),mr.exit("if(",un,"){",Xt,"}")}function kr(Xt,mr,un,xn,sn){function Cn(Tr){switch(Tr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Mn(Tr,Ar,Hr){function wn(){mr("if(!",ea,".buffer){",sa,".enableVertexAttribArray(",En,");}");var va=Hr.type,La;La=Hr.size?mr.def(Hr.size,"||",Ar):Ar,mr("if(",ea,".type!==",va,"||",ea,".size!==",La,"||",Aa.map(function(So){return ea+"."+So+"!=="+Hr[So]}).join("||"),"){",sa,".bindBuffer(",34962,",",fa,".buffer);",sa,".vertexAttribPointer(",[En,La,va,Hr.normalized,Hr.stride,Hr.offset],");",ea,".type=",va,";",ea,".size=",La,";",Aa.map(function(So){return ea+"."+So+"="+Hr[So]+";"}).join(""),"}"),Cr&&(va=Hr.divisor,mr("if(",ea,".divisor!==",va,"){",Xt.instancing,".vertexAttribDivisorANGLE(",[En,va],");",ea,".divisor=",va,";}"))}function Gn(){mr("if(",ea,".buffer){",sa,".disableVertexAttribArray(",En,");",ea,".buffer=null;","}if(",Bt.map(function(va,La){return ea+"."+va+"!=="+_a[La]}).join("||"),"){",sa,".vertexAttrib4f(",En,",",_a,");",Bt.map(function(va,La){return ea+"."+va+"="+_a[La]+";"}).join(""),"}")}var sa=dn.gl,En=mr.def(Tr,".location"),ea=mr.def(dn.attributes,"[",En,"]");Tr=Hr.state;var fa=Hr.buffer,_a=[Hr.x,Hr.y,Hr.z,Hr.w],Aa=["buffer","normalized","offset","stride"];Tr===1?wn():Tr===2?Gn():(mr("if(",Tr,"===",1,"){"),wn(),mr("}else{"),Gn(),mr("}"))}var dn=Xt.shared;xn.forEach(function(Tr){var Ar=Tr.name,Hr=un.attributes[Ar],wn;if(Hr){if(!sn(Hr))return;wn=Hr.append(Xt,mr)}else{if(!sn(vn))return;var Gn=Xt.scopeAttrib(Ar);wn={},Object.keys(new ti).forEach(function(sa){wn[sa]=mr.def(Gn,".",sa)})}Mn(Xt.link(Tr),Cn(Tr.info.type),wn)})}function Kr(Xt,mr,un,xn,sn,Cn){for(var Mn=Xt.shared,dn=Mn.gl,Tr,Ar=0;Ar<xn.length;++Ar){var sa=xn[Ar],Hr=sa.name,wn=sa.info.type,Gn=un.uniforms[Hr],sa=Xt.link(sa)+".location",En;if(Gn){if(!sn(Gn))continue;if(Z(Gn)){if(Hr=Gn.value,wn===35678||wn===35680)wn=Xt.link(Hr._texture||Hr.color[0]._texture),mr(dn,".uniform1i(",sa,",",wn+".bind());"),mr.exit(wn,".unbind();");else if(wn===35674||wn===35675||wn===35676)Hr=Xt.global.def("new Float32Array(["+Array.prototype.slice.call(Hr)+"])"),Gn=2,wn===35675?Gn=3:wn===35676&&(Gn=4),mr(dn,".uniformMatrix",Gn,"fv(",sa,",false,",Hr,");");else{switch(wn){case 5126:Tr="1f";break;case 35664:Tr="2f";break;case 35665:Tr="3f";break;case 35666:Tr="4f";break;case 35670:Tr="1i";break;case 5124:Tr="1i";break;case 35671:Tr="2i";break;case 35667:Tr="2i";break;case 35672:Tr="3i";break;case 35668:Tr="3i";break;case 35673:Tr="4i";break;case 35669:Tr="4i"}mr(dn,".uniform",Tr,"(",sa,",",b(Hr)?Array.prototype.slice.call(Hr):Hr,");")}continue}else En=Gn.append(Xt,mr)}else{if(!sn(vn))continue;En=mr.def(Mn.uniforms,"[",ar.id(Hr),"]")}switch(wn===35678?mr("if(",En,"&&",En,'._reglType==="framebuffer"){',En,"=",En,".color[0];","}"):wn===35680&&mr("if(",En,"&&",En,'._reglType==="framebufferCube"){',En,"=",En,".color[0];","}"),Hr=1,wn){case 35678:case 35680:wn=mr.def(En,"._texture"),mr(dn,".uniform1i(",sa,",",wn,".bind());"),mr.exit(wn,".unbind();");continue;case 5124:case 35670:Tr="1i";break;case 35667:case 35671:Tr="2i",Hr=2;break;case 35668:case 35672:Tr="3i",Hr=3;break;case 35669:case 35673:Tr="4i",Hr=4;break;case 5126:Tr="1f";break;case 35664:Tr="2f",Hr=2;break;case 35665:Tr="3f",Hr=3;break;case 35666:Tr="4f",Hr=4;break;case 35674:Tr="Matrix2fv";break;case 35675:Tr="Matrix3fv";break;case 35676:Tr="Matrix4fv"}if(Tr.charAt(0)==="M"){mr(dn,".uniform",Tr,"(",sa,",");var sa=Math.pow(wn-35674+2,2),ea=Xt.global.def("new Float32Array(",sa,")");Array.isArray(En)?mr("false,(",s(sa,function(Aa){return ea+"["+Aa+"]="+En[Aa]}),",",ea,")"):mr("false,(Array.isArray(",En,")||",En," instanceof Float32Array)?",En,":(",s(sa,function(Aa){return ea+"["+Aa+"]="+En+"["+Aa+"]"}),",",ea,")"),mr(");")}else{if(1<Hr){for(var wn=[],fa=[],Gn=0;Gn<Hr;++Gn)Array.isArray(En)?fa.push(En[Gn]):fa.push(mr.def(En+"["+Gn+"]")),Cn&&wn.push(mr.def());Cn&&mr("if(!",Xt.batchId,"||",wn.map(function(_a,Aa){return _a+"!=="+fa[Aa]}).join("||"),"){",wn.map(function(_a,Aa){return _a+"="+fa[Aa]+";"}).join("")),mr(dn,".uniform",Tr,"(",sa,",",fa.join(","),");")}else Cn&&(wn=mr.def(),mr("if(!",Xt.batchId,"||",wn,"!==",En,"){",wn,"=",En,";")),mr(dn,".uniform",Tr,"(",sa,",",En,");");Cn&&mr("}")}}}function kn(Xt,mr,un,xn){function sn(va){var La=Hr[va];return La?La.contextDep&&xn.contextDynamic||La.propDep?La.append(Xt,un):La.append(Xt,mr):mr.def(Ar,".",va)}function Cn(){function va(){un(fa,".drawElementsInstancedANGLE(",[Gn,En,_a,sa+"<<(("+_a+"-5121)>>1)",ea],");")}function La(){un(fa,".drawArraysInstancedANGLE(",[Gn,sa,En,ea],");")}wn&&wn!=="null"?Aa?va():(un("if(",wn,"){"),va(),un("}else{"),La(),un("}")):La()}function Mn(){function va(){un(Tr+".drawElements("+[Gn,En,_a,sa+"<<(("+_a+"-5121)>>1)"]+");")}function La(){un(Tr+".drawArrays("+[Gn,sa,En]+");")}wn&&wn!=="null"?Aa?va():(un("if(",wn,"){"),va(),un("}else{"),La(),un("}")):La()}var dn=Xt.shared,Tr=dn.gl,Ar=dn.draw,Hr=xn.draw,wn=function(){var va=Hr.elements,La=mr;return va?((va.contextDep&&xn.contextDynamic||va.propDep)&&(La=un),va=va.append(Xt,La),Hr.elementsActive&&La("if("+va+")"+Tr+".bindBuffer(34963,"+va+".buffer.buffer);")):(va=La.def(),La(va,"=",Ar,".","elements",";","if(",va,"){",Tr,".bindBuffer(",34963,",",va,".buffer.buffer);}","else if(",dn.vao,".currentVAO){",va,"=",Xt.shared.elements+".getElements("+dn.vao,".currentVAO.elements);",gn?"":"if("+va+")"+Tr+".bindBuffer(34963,"+va+".buffer.buffer);","}")),va}(),Gn=sn("primitive"),sa=sn("offset"),En=function(){var va=Hr.count,La=mr;return va?((va.contextDep&&xn.contextDynamic||va.propDep)&&(La=un),va=va.append(Xt,La)):va=La.def(Ar,".","count"),va}();if(typeof En=="number"){if(En===0)return}else un("if(",En,"){"),un.exit("}");var ea,fa;Cr&&(ea=sn("instances"),fa=Xt.instancing);var _a=wn+".type",Aa=Hr.elements&&Z(Hr.elements)&&!Hr.vaoActive;Cr&&(typeof ea!="number"||0<=ea)?typeof ea=="string"?(un("if(",ea,">0){"),Cn(),un("}else if(",ea,"<0){"),Mn(),un("}")):Cn():Mn()}function yn(Xt,mr,un,xn,sn){return mr=Jt(),sn=mr.proc("body",sn),Cr&&(mr.instancing=sn.def(mr.shared.extensions,".angle_instanced_arrays")),Xt(mr,sn,un,xn),mr.compile().body}function Yn(Xt,mr,un,xn){Gr(Xt,mr),un.useVAO?un.drawVAO?mr(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,mr),");"):mr(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(mr(Xt.shared.vao,".setVAO(null);"),kr(Xt,mr,un,xn.attributes,function(){return!0})),Kr(Xt,mr,un,xn.uniforms,function(){return!0},!1),kn(Xt,mr,mr,un)}function In(Xt,mr){var un=Xt.proc("draw",1);Gr(Xt,un),zt(Xt,un,mr.context),qt(Xt,un,mr.framebuffer),hr(Xt,un,mr),Ur(Xt,un,mr.state),Ir(Xt,un,mr,!1,!0);var xn=mr.shader.progVar.append(Xt,un);if(un(Xt.shared.gl,".useProgram(",xn,".program);"),mr.shader.program)Yn(Xt,un,mr,mr.shader.program);else{un(Xt.shared.vao,".setVAO(null);");var sn=Xt.global.def("{}"),Cn=un.def(xn,".id"),Mn=un.def(sn,"[",Cn,"]");un(Xt.cond(Mn).then(Mn,".call(this,a0);").else(Mn,"=",sn,"[",Cn,"]=",Xt.link(function(dn){return yn(Yn,Xt,mr,dn,1)}),"(",xn,");",Mn,".call(this,a0);"))}0<Object.keys(mr.state).length&&un(Xt.shared.current,".dirty=true;"),Xt.shared.vao&&un(Xt.shared.vao,".setVAO(null);")}function Jn(Xt,mr,un,xn){function sn(){return!0}Xt.batchId="a1",Gr(Xt,mr),kr(Xt,mr,un,xn.attributes,sn),Kr(Xt,mr,un,xn.uniforms,sn,!1),kn(Xt,mr,mr,un)}function Zn(Xt,mr,un,xn){function sn(wn){return wn.contextDep&&Mn||wn.propDep}function Cn(wn){return!sn(wn)}Gr(Xt,mr);var Mn=un.contextDep,dn=mr.def(),Tr=mr.def();Xt.shared.props=Tr,Xt.batchId=dn;var Ar=Xt.scope(),Hr=Xt.scope();mr(Ar.entry,"for(",dn,"=0;",dn,"<","a1",";++",dn,"){",Tr,"=","a0","[",dn,"];",Hr,"}",Ar.exit),un.needsContext&&zt(Xt,Hr,un.context),un.needsFramebuffer&&qt(Xt,Hr,un.framebuffer),Ur(Xt,Hr,un.state,sn),un.profile&&sn(un.profile)&&Ir(Xt,Hr,un,!1,!0),xn?(un.useVAO?un.drawVAO?sn(un.drawVAO)?Hr(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,Hr),");"):Ar(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,Ar),");"):Ar(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(Ar(Xt.shared.vao,".setVAO(null);"),kr(Xt,Ar,un,xn.attributes,Cn),kr(Xt,Hr,un,xn.attributes,sn)),Kr(Xt,Ar,un,xn.uniforms,Cn,!1),Kr(Xt,Hr,un,xn.uniforms,sn,!0),kn(Xt,Ar,Hr,un)):(mr=Xt.global.def("{}"),xn=un.shader.progVar.append(Xt,Hr),Tr=Hr.def(xn,".id"),Ar=Hr.def(mr,"[",Tr,"]"),Hr(Xt.shared.gl,".useProgram(",xn,".program);","if(!",Ar,"){",Ar,"=",mr,"[",Tr,"]=",Xt.link(function(wn){return yn(Jn,Xt,un,wn,2)}),"(",xn,");}",Ar,".call(this,a0[",dn,"],",dn,");"))}function ba(Xt,mr){function un(Ar){return Ar.contextDep&&sn||Ar.propDep}var xn=Xt.proc("batch",2);Xt.batchId="0",Gr(Xt,xn);var sn=!1,Cn=!0;Object.keys(mr.context).forEach(function(Ar){sn=sn||mr.context[Ar].propDep}),sn||(zt(Xt,xn,mr.context),Cn=!1);var Mn=mr.framebuffer,dn=!1;if(Mn?(Mn.propDep?sn=dn=!0:Mn.contextDep&&sn&&(dn=!0),dn||qt(Xt,xn,Mn)):qt(Xt,xn,null),mr.state.viewport&&mr.state.viewport.propDep&&(sn=!0),hr(Xt,xn,mr),Ur(Xt,xn,mr.state,function(Ar){return!un(Ar)}),mr.profile&&un(mr.profile)||Ir(Xt,xn,mr,!1,"a1"),mr.contextDep=sn,mr.needsContext=Cn,mr.needsFramebuffer=dn,Cn=mr.shader.progVar,Cn.contextDep&&sn||Cn.propDep)Zn(Xt,xn,mr,null);else if(Cn=Cn.append(Xt,xn),xn(Xt.shared.gl,".useProgram(",Cn,".program);"),mr.shader.program)Zn(Xt,xn,mr,mr.shader.program);else{xn(Xt.shared.vao,".setVAO(null);");var Mn=Xt.global.def("{}"),dn=xn.def(Cn,".id"),Tr=xn.def(Mn,"[",dn,"]");xn(Xt.cond(Tr).then(Tr,".call(this,a0,a1);").else(Tr,"=",Mn,"[",dn,"]=",Xt.link(function(wn){return yn(Zn,Xt,mr,wn,2)}),"(",Cn,");",Tr,".call(this,a0,a1);"))}0<Object.keys(mr.state).length&&xn(Xt.shared.current,".dirty=true;"),Xt.shared.vao&&xn(Xt.shared.vao,".setVAO(null);")}function Pa(Xt,mr){function un(dn){var Tr=mr.shader[dn];Tr&&(Tr=Tr.append(Xt,xn),isNaN(Tr)?xn.set(sn.shader,"."+dn,Tr):xn.set(sn.shader,"."+dn,Xt.link(Tr,{stable:!0})))}var xn=Xt.proc("scope",3);Xt.batchId="a2";var sn=Xt.shared,Cn=sn.current;if(zt(Xt,xn,mr.context),mr.framebuffer&&mr.framebuffer.append(Xt,xn),ee(Object.keys(mr.state)).forEach(function(dn){var Tr=mr.state[dn],Ar=Tr.append(Xt,xn);b(Ar)?Ar.forEach(function(Hr,wn){isNaN(Hr)?xn.set(Xt.next[dn],"["+wn+"]",Hr):xn.set(Xt.next[dn],"["+wn+"]",Xt.link(Hr,{stable:!0}))}):Z(Tr)?xn.set(sn.next,"."+dn,Xt.link(Ar,{stable:!0})):xn.set(sn.next,"."+dn,Ar)}),Ir(Xt,xn,mr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(dn){var Tr=mr.draw[dn];Tr&&(Tr=Tr.append(Xt,xn),isNaN(Tr)?xn.set(sn.draw,"."+dn,Tr):xn.set(sn.draw,"."+dn,Xt.link(Tr),{stable:!0}))}),Object.keys(mr.uniforms).forEach(function(dn){var Tr=mr.uniforms[dn].append(Xt,xn);Array.isArray(Tr)&&(Tr="["+Tr.map(function(Ar){return isNaN(Ar)?Ar:Xt.link(Ar,{stable:!0})})+"]"),xn.set(sn.uniforms,"["+Xt.link(ar.id(dn),{stable:!0})+"]",Tr)}),Object.keys(mr.attributes).forEach(function(dn){var Tr=mr.attributes[dn].append(Xt,xn),Ar=Xt.scopeAttrib(dn);Object.keys(new ti).forEach(function(Hr){xn.set(Ar,"."+Hr,Tr[Hr])})}),mr.scopeVAO){var Mn=mr.scopeVAO.append(Xt,xn);isNaN(Mn)?xn.set(sn.vao,".targetVAO",Mn):xn.set(sn.vao,".targetVAO",Xt.link(Mn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(mr.state).length&&(xn(Cn,".dirty=true;"),xn.exit(Cn,".dirty=true;")),xn("a1(",Xt.shared.context,",a0,",Xt.batchId,");")}function xi(Xt){if(typeof Xt=="object"&&!b(Xt)){for(var mr=Object.keys(Xt),un=0;un<mr.length;++un)if(ce.isDynamic(Xt[mr[un]]))return!0;return!1}}function Ka(Xt,mr,un){function xn(wn,Gn){Mn.forEach(function(sa){var En=sn[sa];ce.isDynamic(En)&&(En=wn.invoke(Gn,En),Gn(Hr,".",sa,"=",En,";"))})}var sn=mr.static[un];if(sn&&xi(sn)){var Cn=Xt.global,Mn=Object.keys(sn),dn=!1,Tr=!1,Ar=!1,Hr=Xt.global.def("{}");Mn.forEach(function(wn){var Gn=sn[wn];if(ce.isDynamic(Gn))typeof Gn=="function"&&(Gn=sn[wn]=ce.unbox(Gn)),wn=ie(Gn,null),dn=dn||wn.thisDep,Ar=Ar||wn.propDep,Tr=Tr||wn.contextDep;else{switch(Cn(Hr,".",wn,"="),typeof Gn){case"number":Cn(Gn);break;case"string":Cn('"',Gn,'"');break;case"object":Array.isArray(Gn)&&Cn("[",Gn.join(),"]");break;default:Cn(Xt.link(Gn))}Cn(";")}}),mr.dynamic[un]=new ce.DynamicVariable(4,{thisDep:dn,contextDep:Tr,propDep:Ar,ref:Hr,append:xn}),delete mr.static[un]}}var ti=Ct.Record,$a={add:32774,subtract:32778,"reverse subtract":32779};rr.ext_blend_minmax&&($a.min=32775,$a.max=32776);var Cr=rr.angle_instanced_arrays,bn=rr.webgl_draw_buffers,gn=rr.oes_vertex_array_object,Ln={dirty:!0,profile:yt.profile},qn={},da=[],oa={},Bn={};wt("dither",3024),wt("blend.enable",3042),Dt("blend.color","blendColor",[0,0,0,0]),Dt("blend.equation","blendEquationSeparate",[32774,32774]),Dt("blend.func","blendFuncSeparate",[1,0,1,0]),wt("depth.enable",2929,!0),Dt("depth.func","depthFunc",513),Dt("depth.range","depthRange",[0,1]),Dt("depth.mask","depthMask",!0),Dt("colorMask","colorMask",[!0,!0,!0,!0]),wt("cull.enable",2884),Dt("cull.face","cullFace",1029),Dt("frontFace","frontFace",2305),Dt("lineWidth","lineWidth",1),wt("polygonOffset.enable",32823),Dt("polygonOffset.offset","polygonOffset",[0,0]),wt("sample.alpha",32926),wt("sample.enable",32928),Dt("sample.coverage","sampleCoverage",[1,!1]),wt("stencil.enable",2960),Dt("stencil.mask","stencilMask",-1),Dt("stencil.func","stencilFunc",[519,0,-1]),Dt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Dt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),wt("scissor.enable",3089),Dt("scissor.box","scissor",[0,0,ft.drawingBufferWidth,ft.drawingBufferHeight]),Dt("viewport","viewport",[0,0,ft.drawingBufferWidth,ft.drawingBufferHeight]);var $n={gl:ft,context:ke,strings:ar,next:qn,current:Ln,draw:Pe,elements:st,buffer:Er,shader:Ht,attributes:Ct.state,vao:Ct,uniforms:pt,framebuffer:vt,extensions:rr,timer:lt,isBufferArgs:V},Xa={primTypes:We,compareFuncs:Zt,blendFuncs:Qt,blendEquations:$a,stencilOps:cr,glTypes:Ee,orientationType:Xr};bn&&(Xa.backBuffer=[1029],Xa.drawBuffer=s(Kt.maxDrawbuffers,function(Xt){return Xt===0?[0]:s(Xt,function(mr){return 36064+mr})}));var gi=0;return{next:qn,current:Ln,procs:function(){var Xt=Jt(),mr=Xt.proc("poll"),un=Xt.proc("refresh"),xn=Xt.block();mr(xn),un(xn);var Tr=Xt.shared,sn=Tr.gl,Cn=Tr.next,Mn=Tr.current;xn(Mn,".dirty=false;"),qt(Xt,mr),qt(Xt,un,null,!0);var dn;Cr&&(dn=Xt.link(Cr)),rr.oes_vertex_array_object&&un(Xt.link(rr.oes_vertex_array_object),".bindVertexArrayOES(null);");var Tr=un.def(Tr.attributes),Ar=un.def(0),Hr=Xt.cond(Ar,".buffer");Hr.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",Ar,".buffer.buffer);",sn,".vertexAttribPointer(i,",Ar,".size,",Ar,".type,",Ar,".normalized,",Ar,".stride,",Ar,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",Ar,".x,",Ar,".y,",Ar,".z,",Ar,".w);",Ar,".buffer=null;");var wn=Xt.link(Kt.maxAttributes,{stable:!0});return un("for(var i=0;i<",wn,";++i){",Ar,"=",Tr,"[i];",Hr,"}"),Cr&&un("for(var i=0;i<",wn,";++i){",dn,".vertexAttribDivisorANGLE(i,",Tr,"[i].divisor);","}"),un(Xt.shared.vao,".currentVAO=null;",Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"),Object.keys(oa).forEach(function(Gn){var sa=oa[Gn],En=xn.def(Cn,".",Gn),ea=Xt.block();ea("if(",En,"){",sn,".enable(",sa,")}else{",sn,".disable(",sa,")}",Mn,".",Gn,"=",En,";"),un(ea),mr("if(",En,"!==",Mn,".",Gn,"){",ea,"}")}),Object.keys(Bn).forEach(function(Gn){var sa=Bn[Gn],En=Ln[Gn],ea,fa,_a=Xt.block();_a(sn,".",sa,"("),b(En)?(sa=En.length,ea=Xt.global.def(Cn,".",Gn),fa=Xt.global.def(Mn,".",Gn),_a(s(sa,function(Aa){return ea+"["+Aa+"]"}),");",s(sa,function(Aa){return fa+"["+Aa+"]="+ea+"["+Aa+"];"}).join("")),mr("if(",s(sa,function(Aa){return ea+"["+Aa+"]!=="+fa+"["+Aa+"]"}).join("||"),"){",_a,"}")):(ea=xn.def(Cn,".",Gn),fa=xn.def(Mn,".",Gn),_a(ea,");",Mn,".",Gn,"=",ea,";"),mr("if(",ea,"!==",fa,"){",_a,"}")),un(_a)}),Xt.compile()}(),compile:function(Xt,mr,un,xn,sn){var Cn=Jt();Cn.stats=Cn.link(sn),Object.keys(mr.static).forEach(function(dn){Ka(Cn,mr,dn)}),Wt.forEach(function(dn){Ka(Cn,Xt,dn)});var Mn=at(Xt,mr,un,xn,Cn);return Mn.shader.program&&(Mn.shader.program.attributes.sort(function(dn,Tr){return dn.name<Tr.name?-1:1}),Mn.shader.program.uniforms.sort(function(dn,Tr){return dn.name<Tr.name?-1:1})),In(Cn,Mn),Pa(Cn,Mn),ba(Cn,Mn),oe(Cn.compile(),{destroy:function(){Mn.shader.program.destroy()}})}}}function ae(ft,ar){for(var rr=0;rr<ft.length;++rr)if(ft[rr]===ar)return rr;return-1}var oe=function(ft,ar){for(var rr=Object.keys(ar),Kt=0;Kt<rr.length;++Kt)ft[rr[Kt]]=ar[rr[Kt]];return ft},be=0,ce={DynamicVariable:w,define:function(ft,ar){return new w(ft,M(ar+""))},isDynamic:function(ft){return typeof ft=="function"&&!ft._reglType||ft instanceof w},unbox:T,accessor:M},de={next:typeof requestAnimationFrame=="function"?function(ft){return requestAnimationFrame(ft)}:function(ft){return setTimeout(ft,16)},cancel:typeof cancelAnimationFrame=="function"?function(ft){return cancelAnimationFrame(ft)}:clearTimeout},ye=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ge=d();ge.zero=d();var me=function(ft,ar){var rr=1;ar.ext_texture_filter_anisotropic&&(rr=ft.getParameter(34047));var Kt=1,Er=1;ar.webgl_draw_buffers&&(Kt=ft.getParameter(34852),Er=ft.getParameter(36063));var st=!!ar.oes_texture_float;if(st){st=ft.createTexture(),ft.bindTexture(3553,st),ft.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var et=ft.createFramebuffer();if(ft.bindFramebuffer(36160,et),ft.framebufferTexture2D(36160,36064,3553,st,0),ft.bindTexture(3553,null),ft.checkFramebufferStatus(36160)!==36053)st=!1;else{ft.viewport(0,0,1,1),ft.clearColor(1,0,0,1),ft.clear(16384);var vt=ge.allocType(5126,4);ft.readPixels(0,0,1,1,6408,5126,vt),ft.getError()?st=!1:(ft.deleteFramebuffer(et),ft.deleteTexture(st),st=vt[0]===1),ge.freeType(vt)}}return vt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(vt=ft.createTexture(),et=ge.allocType(5121,36),ft.activeTexture(33984),ft.bindTexture(34067,vt),ft.texImage2D(34069,0,6408,3,3,0,6408,5121,et),ge.freeType(et),ft.bindTexture(34067,null),ft.deleteTexture(vt),vt=!ft.getError()),{colorBits:[ft.getParameter(3410),ft.getParameter(3411),ft.getParameter(3412),ft.getParameter(3413)],depthBits:ft.getParameter(3414),stencilBits:ft.getParameter(3415),subpixelBits:ft.getParameter(3408),extensions:Object.keys(ar).filter(function(pt){return!!ar[pt]}),maxAnisotropic:rr,maxDrawbuffers:Kt,maxColorAttachments:Er,pointSizeDims:ft.getParameter(33901),lineWidthDims:ft.getParameter(33902),maxViewportDims:ft.getParameter(3386),maxCombinedTextureUnits:ft.getParameter(35661),maxCubeMapSize:ft.getParameter(34076),maxRenderbufferSize:ft.getParameter(34024),maxTextureUnits:ft.getParameter(34930),maxTextureSize:ft.getParameter(3379),maxAttributes:ft.getParameter(34921),maxVertexUniforms:ft.getParameter(36347),maxVertexTextureUnits:ft.getParameter(35660),maxVaryingVectors:ft.getParameter(36348),maxFragmentUniforms:ft.getParameter(36349),glsl:ft.getParameter(35724),renderer:ft.getParameter(7937),vendor:ft.getParameter(7936),version:ft.getParameter(7938),readFloat:st,npotTextureCube:vt}},Me=function(ft){return ft instanceof Uint8Array||ft instanceof Uint16Array||ft instanceof Uint32Array||ft instanceof Int8Array||ft instanceof Int16Array||ft instanceof Int32Array||ft instanceof Float32Array||ft instanceof Float64Array||ft instanceof Uint8ClampedArray},Le=function(ft){return Object.keys(ft).map(function(ar){return ft[ar]})},Oe={shape:function(ft){for(var ar=[];ft.length;ft=ft[0])ar.push(ft.length);return ar},flatten:function(ft,ar,rr,Kt){var Er=1;if(ar.length)for(var st=0;st<ar.length;++st)Er*=ar[st];else Er=0;switch(rr=Kt||ge.allocType(rr,Er),ar.length){case 0:break;case 1:for(Kt=ar[0],ar=0;ar<Kt;++ar)rr[ar]=ft[ar];break;case 2:for(Kt=ar[0],ar=ar[1],st=Er=0;st<Kt;++st)for(var et=ft[st],vt=0;vt<ar;++vt)rr[Er++]=et[vt];break;case 3:c(ft,ar[0],ar[1],ar[2],rr,0);break;default:m(ft,ar,0,rr,0)}return rr}},_e={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ze={dynamic:35048,stream:35040,static:35044},Ge=Oe.flatten,Fe=Oe.shape,Re=[];Re[5120]=1,Re[5122]=2,Re[5124]=4,Re[5121]=1,Re[5123]=2,Re[5125]=4,Re[5126]=4;var We={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},xt=new Float32Array(1),Nt=new Uint32Array(xt.buffer),tr=[9984,9986,9985,9987],Vt=[0,6409,6410,6407,6408],Pt={};Pt[6409]=Pt[6406]=Pt[6402]=1,Pt[34041]=Pt[6410]=2,Pt[6407]=Pt[35904]=3,Pt[6408]=Pt[35906]=4;var $t=v("HTMLCanvasElement"),Ut=v("OffscreenCanvas"),Lt=v("CanvasRenderingContext2D"),Ye=v("ImageBitmap"),ot=v("HTMLImageElement"),Ve=v("HTMLVideoElement"),Ae=Object.keys(_e).concat([$t,Ut,Lt,Ye,ot,Ve]),He=[];He[5121]=1,He[5126]=4,He[36193]=2,He[5123]=2,He[5125]=4;var Je=[];Je[32854]=2,Je[32855]=2,Je[36194]=2,Je[34041]=4,Je[33776]=.5,Je[33777]=.5,Je[33778]=1,Je[33779]=1,Je[35986]=.5,Je[35987]=1,Je[34798]=1,Je[35840]=.5,Je[35841]=.25,Je[35842]=.5,Je[35843]=.25,Je[36196]=.5;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[33189]=2,tt[36168]=1,tt[34041]=4,tt[35907]=4,tt[34836]=16,tt[34842]=8,tt[34843]=6;var St=function(ft,ar,rr,Kt,Er){function st(Pe){this.id=Ct++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Er.profile&&(this.stats={size:0})}function et(Pe){var ke=Pe.renderbuffer;ft.bindRenderbuffer(36161,null),ft.deleteRenderbuffer(ke),Pe.renderbuffer=null,Pe.refCount=0,delete Ht[Pe.id],Kt.renderbufferCount--}var vt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ar.ext_srgb&&(vt.srgba=35907),ar.ext_color_buffer_half_float&&(vt.rgba16f=34842,vt.rgb16f=34843),ar.webgl_color_buffer_float&&(vt.rgba32f=34836);var pt=[];Object.keys(vt).forEach(function(Pe){pt[vt[Pe]]=Pe});var Ct=0,Ht={};return st.prototype.decRef=function(){0>=--this.refCount&&et(this)},Er.profile&&(Kt.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Ht).forEach(function(ke){Pe+=Ht[ke].stats.size}),Pe}),{create:function(Pe,ke){function lt(yt,Rt){var wt=0,Dt=0,Jt=32854;if(typeof yt=="object"&&yt?("shape"in yt?(Dt=yt.shape,wt=Dt[0]|0,Dt=Dt[1]|0):("radius"in yt&&(wt=Dt=yt.radius|0),"width"in yt&&(wt=yt.width|0),"height"in yt&&(Dt=yt.height|0)),"format"in yt&&(Jt=vt[yt.format])):typeof yt=="number"?(wt=yt|0,Dt=typeof Rt=="number"?Rt|0:wt):yt||(wt=Dt=1),wt!==ct.width||Dt!==ct.height||Jt!==ct.format)return lt.width=ct.width=wt,lt.height=ct.height=Dt,ct.format=Jt,ft.bindRenderbuffer(36161,ct.renderbuffer),ft.renderbufferStorage(36161,Jt,wt,Dt),Er.profile&&(ct.stats.size=tt[ct.format]*ct.width*ct.height),lt.format=pt[ct.format],lt}var ct=new st(ft.createRenderbuffer());return Ht[ct.id]=ct,Kt.renderbufferCount++,lt(Pe,ke),lt.resize=function(yt,Rt){var wt=yt|0,Dt=Rt|0||wt;return wt===ct.width&&Dt===ct.height||(lt.width=ct.width=wt,lt.height=ct.height=Dt,ft.bindRenderbuffer(36161,ct.renderbuffer),ft.renderbufferStorage(36161,ct.format,wt,Dt),Er.profile&&(ct.stats.size=tt[ct.format]*ct.width*ct.height)),lt},lt._reglType="renderbuffer",lt._renderbuffer=ct,Er.profile&&(lt.stats=ct.stats),lt.destroy=function(){ct.decRef()},lt},clear:function(){Le(Ht).forEach(et)},restore:function(){Le(Ht).forEach(function(Pe){Pe.renderbuffer=ft.createRenderbuffer(),ft.bindRenderbuffer(36161,Pe.renderbuffer),ft.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),ft.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var kt=[];kt[5121]=1,kt[5126]=4,kt[36193]=2;var jt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Bt=["x","y","z","w"],Wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xr={cw:2304,ccw:2305},vn=new ne(!1,!1,!1,function(){}),en=function(ft,ar){function rr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Kt(Ht,Pe,ke){var lt=et.pop()||new rr;lt.startQueryIndex=Ht,lt.endQueryIndex=Pe,lt.sum=0,lt.stats=ke,vt.push(lt)}if(!ar.ext_disjoint_timer_query)return null;var Er=[],st=[],et=[],vt=[],pt=[],Ct=[];return{beginQuery:function(Ht){var Pe=Er.pop()||ar.ext_disjoint_timer_query.createQueryEXT();ar.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),st.push(Pe),Kt(st.length-1,st.length,Ht)},endQuery:function(){ar.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Kt,update:function(){var Ht,Pe;if(Ht=st.length,Ht!==0){Ct.length=Math.max(Ct.length,Ht+1),pt.length=Math.max(pt.length,Ht+1),pt[0]=0;var ke=Ct[0]=0;for(Pe=Ht=0;Pe<st.length;++Pe){var lt=st[Pe];ar.ext_disjoint_timer_query.getQueryObjectEXT(lt,34919)?(ke+=ar.ext_disjoint_timer_query.getQueryObjectEXT(lt,34918),Er.push(lt)):st[Ht++]=lt,pt[Pe+1]=ke,Ct[Pe+1]=Ht}for(st.length=Ht,Pe=Ht=0;Pe<vt.length;++Pe){var ke=vt[Pe],ct=ke.startQueryIndex,lt=ke.endQueryIndex;ke.sum+=pt[lt]-pt[ct],ct=Ct[ct],lt=Ct[lt],lt===ct?(ke.stats.gpuTime+=ke.sum/1e6,et.push(ke)):(ke.startQueryIndex=ct,ke.endQueryIndex=lt,vt[Ht++]=ke)}vt.length=Ht}},getNumPendingQueries:function(){return st.length},clear:function(){Er.push.apply(Er,st);for(var Ht=0;Ht<Er.length;Ht++)ar.ext_disjoint_timer_query.deleteQueryEXT(Er[Ht]);st.length=0,Er.length=0},restore:function(){st.length=0,Er.length=0}}};return function(ft){function ar(){if(Ir.length===0)Jt&&Jt.update(),yn=null;else{yn=de.next(ar),Ht();for(var In=Ir.length-1;0<=In;--In){var Jn=Ir[In];Jn&&Jn(Sr,null,0)}lt.flush(),Jt&&Jt.update()}}function rr(){!yn&&0<Ir.length&&(yn=de.next(ar))}function Kt(){yn&&(de.cancel(ar),yn=null)}function Er(In){In.preventDefault(),Kt(),kr.forEach(function(Jn){Jn()})}function st(In){lt.getError(),yt.restore(),Yr.restore(),ur.restore(),Dr.restore(),at.restore(),zt.restore(),Br.restore(),Jt&&Jt.restore(),qt.procs.refresh(),rr(),Kr.forEach(function(Jn){Jn()})}function et(In){function Jn(Ln,qn){var da={},oa={};return Object.keys(Ln).forEach(function(Bn){var $n=Ln[Bn];if(ce.isDynamic($n))oa[Bn]=ce.unbox($n,Bn);else{if(qn&&Array.isArray($n)){for(var Xa=0;Xa<$n.length;++Xa)if(ce.isDynamic($n[Xa])){oa[Bn]=ce.unbox($n,Bn);return}}da[Bn]=$n}}),{dynamic:oa,static:da}}function Zn(Ln){for(;gn.length<Ln;)gn.push(null);return gn}var ba=Jn(In.context||{},!0),Pa=Jn(In.uniforms||{},!0),xi=Jn(In.attributes||{},!1);In=Jn(function(Ln){function qn(oa){if(oa in da){var Bn=da[oa];delete da[oa],Object.keys(Bn).forEach(function($n){da[oa+"."+$n]=Bn[$n]})}}var da=oe({},Ln);return delete da.uniforms,delete da.attributes,delete da.context,delete da.vao,"stencil"in da&&da.stencil.op&&(da.stencil.opBack=da.stencil.opFront=da.stencil.op,delete da.stencil.op),qn("blend"),qn("depth"),qn("cull"),qn("stencil"),qn("polygonOffset"),qn("scissor"),qn("sample"),"vao"in Ln&&(da.vao=Ln.vao),da}(In),!1);var Ka={gpuTime:0,cpuTime:0,count:0},ti=qt.compile(In,xi,Pa,ba,Ka),$a=ti.draw,Cr=ti.batch,bn=ti.scope,gn=[];return oe(function(Ln,qn){var da;if(typeof Ln=="function")return bn.call(this,null,Ln,0);if(typeof qn=="function")if(typeof Ln=="number")for(da=0;da<Ln;++da)bn.call(this,null,qn,da);else if(Array.isArray(Ln))for(da=0;da<Ln.length;++da)bn.call(this,Ln[da],qn,da);else return bn.call(this,Ln,qn,0);else if(typeof Ln=="number"){if(0<Ln)return Cr.call(this,Zn(Ln|0),Ln|0)}else if(Array.isArray(Ln)){if(Ln.length)return Cr.call(this,Ln,Ln.length)}else return $a.call(this,Ln)},{stats:Ka,destroy:function(){ti.destroy()}})}function vt(In,Jn){var Zn=0;qt.procs.poll();var ba=Jn.color;ba&&(lt.clearColor(+ba[0]||0,+ba[1]||0,+ba[2]||0,+ba[3]||0),Zn|=16384),"depth"in Jn&&(lt.clearDepth(+Jn.depth),Zn|=256),"stencil"in Jn&&(lt.clearStencil(Jn.stencil|0),Zn|=1024),lt.clear(Zn)}function pt(In){return Ir.push(In),rr(),{cancel:function(){function Jn(){var ba=ae(Ir,Jn);Ir[ba]=Ir[Ir.length-1],--Ir.length,0>=Ir.length&&Kt()}var Zn=ae(Ir,In);Ir[Zn]=Jn}}}function Ct(){var In=Ur.viewport,Jn=Ur.scissor_box;In[0]=In[1]=Jn[0]=Jn[1]=0,Sr.viewportWidth=Sr.framebufferWidth=Sr.drawingBufferWidth=In[2]=Jn[2]=lt.drawingBufferWidth,Sr.viewportHeight=Sr.framebufferHeight=Sr.drawingBufferHeight=In[3]=Jn[3]=lt.drawingBufferHeight}function Ht(){Sr.tick+=1,Sr.time=ke(),Ct(),qt.procs.poll()}function Pe(){Dr.refresh(),Ct(),qt.procs.refresh(),Jt&&Jt.update()}function ke(){return(ye()-fr)/1e3}if(ft=h(ft),!ft)return null;var lt=ft.gl,ct=lt.getContextAttributes();lt.isContextLost();var yt=i(lt,ft);if(!yt)return null;var hr=e(),Rt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},wt=ft.cachedCode||{},Dt=yt.extensions,Jt=en(lt,Dt),fr=ye(),Pr=lt.drawingBufferWidth,Rr=lt.drawingBufferHeight,Sr={tick:0,time:0,viewportWidth:Pr,viewportHeight:Rr,framebufferWidth:Pr,framebufferHeight:Rr,drawingBufferWidth:Pr,drawingBufferHeight:Rr,pixelRatio:ft.pixelRatio},Pr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Jr=me(lt,Dt),ur=A(lt,Rt,ft,function(In){return Br.destroyBuffer(In)}),wr=_(lt,Dt,ur,Rt),Br=z(lt,Dt,Jr,Rt,ur,wr,Pr),Yr=B(lt,hr,Rt,ft),Dr=D(lt,Dt,Jr,function(){qt.procs.poll()},Sr,Rt,ft),at=St(lt,Dt,Jr,Rt,ft),zt=R(lt,Dt,Jr,Dr,at,Rt),qt=se(lt,hr,Dt,Jr,ur,wr,Dr,zt,{},Br,Yr,Pr,Sr,Jt,wt,ft),hr=G(lt,zt,qt.procs.poll,Sr),Ur=qt.next,Gr=lt.canvas,Ir=[],kr=[],Kr=[],kn=[ft.onDestroy],yn=null;Gr&&(Gr.addEventListener("webglcontextlost",Er,!1),Gr.addEventListener("webglcontextrestored",st,!1));var Yn=zt.setFBO=et({framebuffer:ce.define.call(null,1,"framebuffer")});return Pe(),ct=oe(et,{clear:function(In){if("framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var Jn=0;6>Jn;++Jn)Yn(oe({framebuffer:In.framebuffer.faces[Jn]},In),vt);else Yn(In,vt);else vt(null,In)},prop:ce.define.bind(null,1),context:ce.define.bind(null,2),this:ce.define.bind(null,3),draw:et({}),buffer:function(In){return ur.create(In,34962,!1,!1)},elements:function(In){return wr.create(In,!1)},texture:Dr.create2D,cube:Dr.createCube,renderbuffer:at.create,framebuffer:zt.create,framebufferCube:zt.createCube,vao:Br.createVAO,attributes:ct,frame:pt,on:function(In,Jn){var Zn;switch(In){case"frame":return pt(Jn);case"lost":Zn=kr;break;case"restore":Zn=Kr;break;case"destroy":Zn=kn}return Zn.push(Jn),{cancel:function(){for(var ba=0;ba<Zn.length;++ba)if(Zn[ba]===Jn){Zn[ba]=Zn[Zn.length-1],Zn.pop();break}}}},limits:Jr,hasExtension:function(In){return 0<=Jr.extensions.indexOf(In.toLowerCase())},read:hr,destroy:function(){Ir.length=0,Kt(),Gr&&(Gr.removeEventListener("webglcontextlost",Er),Gr.removeEventListener("webglcontextrestored",st)),Yr.clear(),zt.clear(),at.clear(),Br.clear(),Dr.clear(),wr.clear(),ur.clear(),Jt&&Jt.clear(),kn.forEach(function(In){In()})},_gl:lt,_refresh:Pe,poll:function(){Ht(),Jt&&Jt.update()},now:ke,stats:Rt,getCachedCode:function(){return wt},preloadCachedCode:function(In){Object.entries(In).forEach(function(Jn){wt[Jn[0]]=Jn[1]})}}),ft.onDone(null,ct),ct}})},{}],285:[function(o,U,H){var w=o("buffer"),f=w.Buffer;function M(e,a){for(var n in e)a[n]=e[n]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?U.exports=w:(M(w,H),H.Buffer=T);function T(e,a,n){return f(e,a,n)}T.prototype=Object.create(f.prototype),M(f,T),T.from=function(e,a,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return f(e,a,n)},T.alloc=function(e,a,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=f(e);return a!==void 0?typeof n=="string"?r.fill(a,n):r.fill(a):r.fill(0),r},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return f(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(e)}},{buffer:85}],286:[function(o,U,H){U.exports=M;var w=o("events").EventEmitter,f=o("inherits");f(M,w),M.Readable=o("readable-stream/lib/_stream_readable.js"),M.Writable=o("readable-stream/lib/_stream_writable.js"),M.Duplex=o("readable-stream/lib/_stream_duplex.js"),M.Transform=o("readable-stream/lib/_stream_transform.js"),M.PassThrough=o("readable-stream/lib/_stream_passthrough.js"),M.finished=o("readable-stream/lib/internal/streams/end-of-stream.js"),M.pipeline=o("readable-stream/lib/internal/streams/pipeline.js"),M.Stream=M;function M(){w.call(this)}M.prototype.pipe=function(T,e){var a=this;function n(d){T.writable&&T.write(d)===!1&&a.pause&&a.pause()}a.on("data",n);function r(){a.readable&&a.resume&&a.resume()}T.on("drain",r),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",h),a.on("close",i));var t=!1;function h(){t||(t=!0,T.end())}function i(){t||(t=!0,typeof T.destroy=="function"&&T.destroy())}function s(d){if(y(),w.listenerCount(this,"error")===0)throw d}a.on("error",s),T.on("error",s);function y(){a.removeListener("data",n),T.removeListener("drain",r),a.removeListener("end",h),a.removeListener("close",i),a.removeListener("error",s),T.removeListener("error",s),a.removeListener("end",y),a.removeListener("close",y),T.removeListener("close",y)}return a.on("end",y),a.on("close",y),T.on("close",y),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(o,U,H){function w(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var f={};function M(r,t,h){h||(h=Error);function i(y,d,p){return typeof t=="string"?t:t(y,d,p)}var s=function(y){w(d,y);function d(p,c,m){return y.call(this,i(p,c,m))||this}return d}(h);s.prototype.name=h.name,s.prototype.code=r,f[r]=s}function T(r,t){if(Array.isArray(r)){var h=r.length;return r=r.map(function(i){return String(i)}),h>2?"one of ".concat(t," ").concat(r.slice(0,h-1).join(", "),", or ")+r[h-1]:h===2?"one of ".concat(t," ").concat(r[0]," or ").concat(r[1]):"of ".concat(t," ").concat(r[0])}else return"of ".concat(t," ").concat(String(r))}function e(r,t,h){return r.substr(!h||h<0?0:+h,t.length)===t}function a(r,t,h){return(h===void 0||h>r.length)&&(h=r.length),r.substring(h-t.length,h)===t}function n(r,t,h){return typeof h!="number"&&(h=0),h+t.length>r.length?!1:r.indexOf(t,h)!==-1}M("ERR_INVALID_OPT_VALUE",function(r,t){return'The value "'+t+'" is invalid for option "'+r+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(r,t,h){var i;typeof t=="string"&&e(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var s;if(a(r," argument"))s="The ".concat(r," ").concat(i," ").concat(T(t,"type"));else{var y=n(r,".")?"property":"argument";s='The "'.concat(r,'" ').concat(y," ").concat(i," ").concat(T(t,"type"))}return s+=". Received type ".concat(typeof h),s},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),U.exports.codes=f},{}],288:[function(o,U,H){(function(w){(function(){var f=Object.keys||function(i){var s=[];for(var y in i)s.push(y);return s};U.exports=r;var M=o("./_stream_readable"),T=o("./_stream_writable");o("inherits")(r,M);for(var e=f(T.prototype),a=0;a<e.length;a++){var n=e[a];r.prototype[n]||(r.prototype[n]=T.prototype[n])}function r(i){if(!(this instanceof r))return new r(i);M.call(this,i),T.call(this,i),this.allowHalfOpen=!0,i&&(i.readable===!1&&(this.readable=!1),i.writable===!1&&(this.writable=!1),i.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(){this._writableState.ended||w.nextTick(h,this)}function h(i){i.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(s){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,o("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(o,U,H){U.exports=f;var w=o("./_stream_transform");o("inherits")(f,w);function f(M){if(!(this instanceof f))return new f(M);w.call(this,M)}f.prototype._transform=function(M,T,e){e(null,M)}},{"./_stream_transform":291,inherits:231}],290:[function(o,U,H){(function(w,f){(function(){U.exports=k;var M;k.ReadableState=S,o("events").EventEmitter;var T=function(ie,se){return ie.listeners(se).length},e=o("./internal/streams/stream"),a=o("buffer").Buffer,n=f.Uint8Array||function(){};function r(q){return a.from(q)}function t(q){return a.isBuffer(q)||q instanceof n}var h=o("util"),i;h&&h.debuglog?i=h.debuglog("stream"):i=function(){};var s=o("./internal/streams/buffer_list"),y=o("./internal/streams/destroy"),d=o("./internal/streams/state"),p=d.getHighWaterMark,c=o("../errors").codes,m=c.ERR_INVALID_ARG_TYPE,l=c.ERR_STREAM_PUSH_AFTER_EOF,x=c.ERR_METHOD_NOT_IMPLEMENTED,u=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,_,g;o("inherits")(k,e);var b=y.errorOrDestroy,v=["error","close","destroy","pause","resume"];function C(q,ie,se){if(typeof q.prependListener=="function")return q.prependListener(ie,se);!q._events||!q._events[ie]?q.on(ie,se):Array.isArray(q._events[ie])?q._events[ie].unshift(se):q._events[ie]=[se,q._events[ie]]}function S(q,ie,se){M=M||o("./_stream_duplex"),q=q||{},typeof se!="boolean"&&(se=ie instanceof M),this.objectMode=!!q.objectMode,se&&(this.objectMode=this.objectMode||!!q.readableObjectMode),this.highWaterMark=p(this,q,"readableHighWaterMark",se),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=q.emitClose!==!1,this.autoDestroy=!!q.autoDestroy,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(A||(A=o("string_decoder/").StringDecoder),this.decoder=new A(q.encoding),this.encoding=q.encoding)}function k(q){if(M=M||o("./_stream_duplex"),!(this instanceof k))return new k(q);var ie=this instanceof M;this._readableState=new S(q,this,ie),this.readable=!0,q&&(typeof q.read=="function"&&(this._read=q.read),typeof q.destroy=="function"&&(this._destroy=q.destroy)),e.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),k.prototype.destroy=y.destroy,k.prototype._undestroy=y.undestroy,k.prototype._destroy=function(q,ie){ie(q)},k.prototype.push=function(q,ie){var se=this._readableState,ae;return se.objectMode?ae=!0:typeof q=="string"&&(ie=ie||se.defaultEncoding,ie!==se.encoding&&(q=a.from(q,ie),ie=""),ae=!0),E(this,q,ie,!1,ae)},k.prototype.unshift=function(q){return E(this,q,null,!0,!1)};function E(q,ie,se,ae,oe){i("readableAddChunk",ie);var be=q._readableState;if(ie===null)be.reading=!1,z(q,be);else{var ce;if(oe||(ce=I(be,ie)),ce)b(q,ce);else if(be.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!be.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=r(ie)),ae)be.endEmitted?b(q,new u):F(q,be,ie,!0);else if(be.ended)b(q,new l);else{if(be.destroyed)return!1;be.reading=!1,be.decoder&&!se?(ie=be.decoder.write(ie),be.objectMode||ie.length!==0?F(q,be,ie,!1):Q(q,be)):F(q,be,ie,!1)}else ae||(be.reading=!1,Q(q,be))}return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function F(q,ie,se,ae){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,q.emit("data",se)):(ie.length+=ie.objectMode?1:se.length,ae?ie.buffer.unshift(se):ie.buffer.push(se),ie.needReadable&&B(q)),Q(q,ie)}function I(q,ie){var se;return!t(ie)&&typeof ie!="string"&&ie!==void 0&&!q.objectMode&&(se=new m("chunk",["string","Buffer","Uint8Array"],ie)),se}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(q){A||(A=o("string_decoder/").StringDecoder);var ie=new A(q);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ae="";se!==null;)ae+=ie.write(se.data),se=se.next;return this._readableState.buffer.clear(),ae!==""&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this};var D=1073741824;function R(q){return q>=D?q=D:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}function O(q,ie){return q<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:q!==q?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(q>ie.highWaterMark&&(ie.highWaterMark=R(q)),q<=ie.length?q:ie.ended?ie.length:(ie.needReadable=!0,0))}k.prototype.read=function(q){i("read",q),q=parseInt(q,10);var ie=this._readableState,se=q;if(q!==0&&(ie.emittedReadable=!1),q===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return i("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?ee(this):B(this),null;if(q=O(q,ie),q===0&&ie.ended)return ie.length===0&&ee(this),null;var ae=ie.needReadable;i("need readable",ae),(ie.length===0||ie.length-q<ie.highWaterMark)&&(ae=!0,i("length less than watermark",ae)),ie.ended||ie.reading?(ae=!1,i("reading or ended",ae)):ae&&(i("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(q=O(se,ie)));var oe;return q>0?oe=V(q,ie):oe=null,oe===null?(ie.needReadable=ie.length<=ie.highWaterMark,q=0):(ie.length-=q,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),se!==q&&ie.ended&&ee(this)),oe!==null&&this.emit("data",oe),oe};function z(q,ie){if(i("onEofChunk"),!ie.ended){if(ie.decoder){var se=ie.decoder.end();se&&se.length&&(ie.buffer.push(se),ie.length+=ie.objectMode?1:se.length)}ie.ended=!0,ie.sync?B(q):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,G(q)))}}function B(q){var ie=q._readableState;i("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(i("emitReadable",ie.flowing),ie.emittedReadable=!0,w.nextTick(G,q))}function G(q){var ie=q._readableState;i("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&(q.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,Y(q)}function Q(q,ie){ie.readingMore||(ie.readingMore=!0,w.nextTick(X,q,ie))}function X(q,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var se=ie.length;if(i("maybeReadMore read 0"),q.read(0),se===ie.length)break}ie.readingMore=!1}k.prototype._read=function(q){b(this,new x("_read()"))},k.prototype.pipe=function(q,ie){var se=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=q;break;case 1:ae.pipes=[ae.pipes,q];break;default:ae.pipes.push(q);break}ae.pipesCount+=1,i("pipe count=%d opts=%j",ae.pipesCount,ie);var oe=(!ie||ie.end!==!1)&&q!==w.stdout&&q!==w.stderr,be=oe?de:Ee;ae.endEmitted?w.nextTick(be):se.once("end",be),q.on("unpipe",ce);function ce(Ze,Ge){i("onunpipe"),Ze===se&&Ge&&Ge.hasUnpiped===!1&&(Ge.hasUnpiped=!0,me())}function de(){i("onend"),q.end()}var ye=j(se);q.on("drain",ye);var ge=!1;function me(){i("cleanup"),q.removeListener("close",Oe),q.removeListener("finish",_e),q.removeListener("drain",ye),q.removeListener("error",Le),q.removeListener("unpipe",ce),se.removeListener("end",de),se.removeListener("end",Ee),se.removeListener("data",Me),ge=!0,ae.awaitDrain&&(!q._writableState||q._writableState.needDrain)&&ye()}se.on("data",Me);function Me(Ze){i("ondata");var Ge=q.write(Ze);i("dest.write",Ge),Ge===!1&&((ae.pipesCount===1&&ae.pipes===q||ae.pipesCount>1&&Z(ae.pipes,q)!==-1)&&!ge&&(i("false write response, pause",ae.awaitDrain),ae.awaitDrain++),se.pause())}function Le(Ze){i("onerror",Ze),Ee(),q.removeListener("error",Le),T(q,"error")===0&&b(q,Ze)}C(q,"error",Le);function Oe(){q.removeListener("finish",_e),Ee()}q.once("close",Oe);function _e(){i("onfinish"),q.removeListener("close",Oe),Ee()}q.once("finish",_e);function Ee(){i("unpipe"),se.unpipe(q)}return q.emit("pipe",se),ae.flowing||(i("pipe resume"),se.resume()),q};function j(q){return function(){var se=q._readableState;i("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&T(q,"data")&&(se.flowing=!0,Y(q))}}k.prototype.unpipe=function(q){var ie=this._readableState,se={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return q&&q!==ie.pipes?this:(q||(q=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,q&&q.emit("unpipe",this,se),this);if(!q){var ae=ie.pipes,oe=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var be=0;be<oe;be++)ae[be].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=Z(ie.pipes,q);return ce===-1?this:(ie.pipes.splice(ce,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),q.emit("unpipe",this,se),this)},k.prototype.on=function(q,ie){var se=e.prototype.on.call(this,q,ie),ae=this._readableState;return q==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):q==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,i("on readable",ae.length,ae.reading),ae.length?B(this):ae.reading||w.nextTick(ue,this)),se},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(q,ie){var se=e.prototype.removeListener.call(this,q,ie);return q==="readable"&&w.nextTick(re,this),se},k.prototype.removeAllListeners=function(q){var ie=e.prototype.removeAllListeners.apply(this,arguments);return(q==="readable"||q===void 0)&&w.nextTick(re,this),ie};function re(q){var ie=q._readableState;ie.readableListening=q.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:q.listenerCount("data")>0&&q.resume()}function ue(q){i("readable nexttick read 0"),q.read(0)}k.prototype.resume=function(){var q=this._readableState;return q.flowing||(i("resume"),q.flowing=!q.readableListening,K(this,q)),q.paused=!1,this};function K(q,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,w.nextTick(te,q,ie))}function te(q,ie){i("resume",ie.reading),ie.reading||q.read(0),ie.resumeScheduled=!1,q.emit("resume"),Y(q),ie.flowing&&!ie.reading&&q.read(0)}k.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Y(q){var ie=q._readableState;for(i("flow",ie.flowing);ie.flowing&&q.read()!==null;);}k.prototype.wrap=function(q){var ie=this,se=this._readableState,ae=!1;q.on("end",function(){if(i("wrapped end"),se.decoder&&!se.ended){var ce=se.decoder.end();ce&&ce.length&&ie.push(ce)}ie.push(null)}),q.on("data",function(ce){if(i("wrapped data"),se.decoder&&(ce=se.decoder.write(ce)),!(se.objectMode&&ce==null)&&!(!se.objectMode&&(!ce||!ce.length))){var de=ie.push(ce);de||(ae=!0,q.pause())}});for(var oe in q)this[oe]===void 0&&typeof q[oe]=="function"&&(this[oe]=function(de){return function(){return q[de].apply(q,arguments)}}(oe));for(var be=0;be<v.length;be++)q.on(v[be],this.emit.bind(this,v[be]));return this._read=function(ce){i("wrapped _read",ce),ae&&(ae=!1,q.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=o("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),k._fromList=V,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function V(q,ie){if(ie.length===0)return null;var se;return ie.objectMode?se=ie.buffer.shift():!q||q>=ie.length?(ie.decoder?se=ie.buffer.join(""):ie.buffer.length===1?se=ie.buffer.first():se=ie.buffer.concat(ie.length),ie.buffer.clear()):se=ie.buffer.consume(q,ie.decoder),se}function ee(q){var ie=q._readableState;i("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,w.nextTick(ne,ie,q))}function ne(q,ie){if(i("endReadableNT",q.endEmitted,q.length),!q.endEmitted&&q.length===0&&(q.endEmitted=!0,ie.readable=!1,ie.emit("end"),q.autoDestroy)){var se=ie._writableState;(!se||se.autoDestroy&&se.finished)&&ie.destroy()}}typeof Symbol=="function"&&(k.from=function(q,ie){return g===void 0&&(g=o("./internal/streams/from")),g(k,q,ie)});function Z(q,ie){for(var se=0,ae=q.length;se<ae;se++)if(q[se]===ie)return se;return-1}}).call(this)}).call(this,o("_process"),typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(o,U,H){U.exports=r;var w=o("../errors").codes,f=w.ERR_METHOD_NOT_IMPLEMENTED,M=w.ERR_MULTIPLE_CALLBACK,T=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=w.ERR_TRANSFORM_WITH_LENGTH_0,a=o("./_stream_duplex");o("inherits")(r,a);function n(i,s){var y=this._transformState;y.transforming=!1;var d=y.writecb;if(d===null)return this.emit("error",new M);y.writechunk=null,y.writecb=null,s!=null&&this.push(s),d(i);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function r(i){if(!(this instanceof r))return new r(i);a.call(this,i),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",t)}function t(){var i=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(s,y){h(i,s,y)}):h(this,null,null)}r.prototype.push=function(i,s){return this._transformState.needTransform=!1,a.prototype.push.call(this,i,s)},r.prototype._transform=function(i,s,y){y(new f("_transform()"))},r.prototype._write=function(i,s,y){var d=this._transformState;if(d.writecb=y,d.writechunk=i,d.writeencoding=s,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},r.prototype._read=function(i){var s=this._transformState;s.writechunk!==null&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},r.prototype._destroy=function(i,s){a.prototype._destroy.call(this,i,function(y){s(y)})};function h(i,s,y){if(s)return i.emit("error",s);if(y!=null&&i.push(y),i._writableState.length)throw new e;if(i._transformState.transforming)throw new T;return i.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(o,U,H){(function(w,f){(function(){U.exports=S;function M(Y){var V=this;this.next=null,this.entry=null,this.finish=function(){te(V,Y)}}var T;S.WritableState=v;var e={deprecate:o("util-deprecate")},a=o("./internal/streams/stream"),n=o("buffer").Buffer,r=f.Uint8Array||function(){};function t(Y){return n.from(Y)}function h(Y){return n.isBuffer(Y)||Y instanceof r}var i=o("./internal/streams/destroy"),s=o("./internal/streams/state"),y=s.getHighWaterMark,d=o("../errors").codes,p=d.ERR_INVALID_ARG_TYPE,c=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,l=d.ERR_STREAM_CANNOT_PIPE,x=d.ERR_STREAM_DESTROYED,u=d.ERR_STREAM_NULL_VALUES,A=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;o("inherits")(S,a);function b(){}function v(Y,V,ee){T=T||o("./_stream_duplex"),Y=Y||{},typeof ee!="boolean"&&(ee=V instanceof T),this.objectMode=!!Y.objectMode,ee&&(this.objectMode=this.objectMode||!!Y.writableObjectMode),this.highWaterMark=y(this,Y,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=Y.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=Y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){z(V,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}v.prototype.getBuffer=function(){for(var V=this.bufferedRequest,ee=[];V;)ee.push(V),V=V.next;return ee},function(){try{Object.defineProperty(v.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(V){return C.call(this,V)?!0:this!==S?!1:V&&V._writableState instanceof v}})):C=function(V){return V instanceof this};function S(Y){T=T||o("./_stream_duplex");var V=this instanceof T;if(!V&&!C.call(S,this))return new S(Y);this._writableState=new v(Y,this,V),this.writable=!0,Y&&(typeof Y.write=="function"&&(this._write=Y.write),typeof Y.writev=="function"&&(this._writev=Y.writev),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.final=="function"&&(this._final=Y.final)),a.call(this)}S.prototype.pipe=function(){g(this,new l)};function k(Y,V){var ee=new A;g(Y,ee),w.nextTick(V,ee)}function E(Y,V,ee,ne){var Z;return ee===null?Z=new u:typeof ee!="string"&&!V.objectMode&&(Z=new p("chunk",["string","Buffer"],ee)),Z?(g(Y,Z),w.nextTick(ne,Z),!1):!0}S.prototype.write=function(Y,V,ee){var ne=this._writableState,Z=!1,q=!ne.objectMode&&h(Y);return q&&!n.isBuffer(Y)&&(Y=t(Y)),typeof V=="function"&&(ee=V,V=null),q?V="buffer":V||(V=ne.defaultEncoding),typeof ee!="function"&&(ee=b),ne.ending?k(this,ee):(q||E(this,ne,Y,ee))&&(ne.pendingcb++,Z=I(this,ne,q,Y,V,ee)),Z},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var Y=this._writableState;Y.corked&&(Y.corked--,!Y.writing&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&Q(this,Y))},S.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new _(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(Y,V,ee){return!Y.objectMode&&Y.decodeStrings!==!1&&typeof V=="string"&&(V=n.from(V,ee)),V}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(Y,V,ee,ne,Z,q){if(!ee){var ie=F(V,ne,Z);ne!==ie&&(ee=!0,Z="buffer",ne=ie)}var se=V.objectMode?1:ne.length;V.length+=se;var ae=V.length<V.highWaterMark;if(ae||(V.needDrain=!0),V.writing||V.corked){var oe=V.lastBufferedRequest;V.lastBufferedRequest={chunk:ne,encoding:Z,isBuf:ee,callback:q,next:null},oe?oe.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else D(Y,V,!1,se,ne,Z,q);return ae}function D(Y,V,ee,ne,Z,q,ie){V.writelen=ne,V.writecb=ie,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new x("write")):ee?Y._writev(Z,V.onwrite):Y._write(Z,q,V.onwrite),V.sync=!1}function R(Y,V,ee,ne,Z){--V.pendingcb,ee?(w.nextTick(Z,ne),w.nextTick(ue,Y,V),Y._writableState.errorEmitted=!0,g(Y,ne)):(Z(ne),Y._writableState.errorEmitted=!0,g(Y,ne),ue(Y,V))}function O(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}function z(Y,V){var ee=Y._writableState,ne=ee.sync,Z=ee.writecb;if(typeof Z!="function")throw new m;if(O(ee),V)R(Y,ee,ne,V,Z);else{var q=X(ee)||Y.destroyed;!q&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&Q(Y,ee),ne?w.nextTick(B,Y,ee,q,Z):B(Y,ee,q,Z)}}function B(Y,V,ee,ne){ee||G(Y,V),V.pendingcb--,ne(),ue(Y,V)}function G(Y,V){V.length===0&&V.needDrain&&(V.needDrain=!1,Y.emit("drain"))}function Q(Y,V){V.bufferProcessing=!0;var ee=V.bufferedRequest;if(Y._writev&&ee&&ee.next){var ne=V.bufferedRequestCount,Z=new Array(ne),q=V.corkedRequestsFree;q.entry=ee;for(var ie=0,se=!0;ee;)Z[ie]=ee,ee.isBuf||(se=!1),ee=ee.next,ie+=1;Z.allBuffers=se,D(Y,V,!0,V.length,Z,"",q.finish),V.pendingcb++,V.lastBufferedRequest=null,q.next?(V.corkedRequestsFree=q.next,q.next=null):V.corkedRequestsFree=new M(V),V.bufferedRequestCount=0}else{for(;ee;){var ae=ee.chunk,oe=ee.encoding,be=ee.callback,ce=V.objectMode?1:ae.length;if(D(Y,V,!1,ce,ae,oe,be),ee=ee.next,V.bufferedRequestCount--,V.writing)break}ee===null&&(V.lastBufferedRequest=null)}V.bufferedRequest=ee,V.bufferProcessing=!1}S.prototype._write=function(Y,V,ee){ee(new c("_write()"))},S.prototype._writev=null,S.prototype.end=function(Y,V,ee){var ne=this._writableState;return typeof Y=="function"?(ee=Y,Y=null,V=null):typeof V=="function"&&(ee=V,V=null),Y!=null&&this.write(Y,V),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||K(this,ne,ee),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function X(Y){return Y.ending&&Y.length===0&&Y.bufferedRequest===null&&!Y.finished&&!Y.writing}function j(Y,V){Y._final(function(ee){V.pendingcb--,ee&&g(Y,ee),V.prefinished=!0,Y.emit("prefinish"),ue(Y,V)})}function re(Y,V){!V.prefinished&&!V.finalCalled&&(typeof Y._final=="function"&&!V.destroyed?(V.pendingcb++,V.finalCalled=!0,w.nextTick(j,Y,V)):(V.prefinished=!0,Y.emit("prefinish")))}function ue(Y,V){var ee=X(V);if(ee&&(re(Y,V),V.pendingcb===0&&(V.finished=!0,Y.emit("finish"),V.autoDestroy))){var ne=Y._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&Y.destroy()}return ee}function K(Y,V,ee){V.ending=!0,ue(Y,V),ee&&(V.finished?w.nextTick(ee):Y.once("finish",ee)),V.ended=!0,Y.writable=!1}function te(Y,V,ee){var ne=Y.entry;for(Y.entry=null;ne;){var Z=ne.callback;V.pendingcb--,Z(ee),ne=ne.next}V.corkedRequestsFree.next=Y}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(V){!this._writableState||(this._writableState.destroyed=V)}}),S.prototype.destroy=i.destroy,S.prototype._undestroy=i.undestroy,S.prototype._destroy=function(Y,V){V(Y)}}).call(this)}).call(this,o("_process"),typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(o,U,H){(function(w){(function(){var f;function M(x,u,A){return u in x?Object.defineProperty(x,u,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[u]=A,x}var T=o("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),n=Symbol("error"),r=Symbol("ended"),t=Symbol("lastPromise"),h=Symbol("handlePromise"),i=Symbol("stream");function s(x,u){return{value:x,done:u}}function y(x){var u=x[e];if(u!==null){var A=x[i].read();A!==null&&(x[t]=null,x[e]=null,x[a]=null,u(s(A,!1)))}}function d(x){w.nextTick(y,x)}function p(x,u){return function(A,_){x.then(function(){if(u[r]){A(s(void 0,!0));return}u[h](A,_)},_)}}var c=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((f={get stream(){return this[i]},next:function(){var u=this,A=this[n];if(A!==null)return Promise.reject(A);if(this[r])return Promise.resolve(s(void 0,!0));if(this[i].destroyed)return new Promise(function(v,C){w.nextTick(function(){u[n]?C(u[n]):v(s(void 0,!0))})});var _=this[t],g;if(_)g=new Promise(p(_,this));else{var b=this[i].read();if(b!==null)return Promise.resolve(s(b,!1));g=new Promise(this[h])}return this[t]=g,g}},M(f,Symbol.asyncIterator,function(){return this}),M(f,"return",function(){var u=this;return new Promise(function(A,_){u[i].destroy(null,function(g){if(g){_(g);return}A(s(void 0,!0))})})}),f),c),l=function(u){var A,_=Object.create(m,(A={},M(A,i,{value:u,writable:!0}),M(A,e,{value:null,writable:!0}),M(A,a,{value:null,writable:!0}),M(A,n,{value:null,writable:!0}),M(A,r,{value:u._readableState.endEmitted,writable:!0}),M(A,h,{value:function(b,v){var C=_[i].read();C?(_[t]=null,_[e]=null,_[a]=null,b(s(C,!1))):(_[e]=b,_[a]=v)},writable:!0}),A));return _[t]=null,T(u,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=_[a];b!==null&&(_[t]=null,_[e]=null,_[a]=null,b(g)),_[n]=g;return}var v=_[e];v!==null&&(_[t]=null,_[e]=null,_[a]=null,v(s(void 0,!0))),_[r]=!0}),u.on("readable",d.bind(null,_)),_};U.exports=l}).call(this)}).call(this,o("_process"))},{"./end-of-stream":296,_process:278}],294:[function(o,U,H){function w(y,d){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(y);d&&(c=c.filter(function(m){return Object.getOwnPropertyDescriptor(y,m).enumerable})),p.push.apply(p,c)}return p}function f(y){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?arguments[d]:{};d%2?w(Object(p),!0).forEach(function(c){M(y,c,p[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(p)):w(Object(p)).forEach(function(c){Object.defineProperty(y,c,Object.getOwnPropertyDescriptor(p,c))})}return y}function M(y,d,p){return d in y?Object.defineProperty(y,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[d]=p,y}function T(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function e(y,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(y,c.key,c)}}function a(y,d,p){return d&&e(y.prototype,d),p&&e(y,p),y}var n=o("buffer"),r=n.Buffer,t=o("util"),h=t.inspect,i=h&&h.custom||"inspect";function s(y,d,p){r.prototype.copy.call(y,d,p)}U.exports=function(){function y(){T(this,y),this.head=null,this.tail=null,this.length=0}return a(y,[{key:"push",value:function(p){var c={data:p,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(p){var c={data:p,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=p+c.data;return m}},{key:"concat",value:function(p){if(this.length===0)return r.alloc(0);for(var c=r.allocUnsafe(p>>>0),m=this.head,l=0;m;)s(m.data,c,l),l+=m.data.length,m=m.next;return c}},{key:"consume",value:function(p,c){var m;return p<this.head.data.length?(m=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?m=this.shift():m=c?this._getString(p):this._getBuffer(p),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var c=this.head,m=1,l=c.data;for(p-=l.length;c=c.next;){var x=c.data,u=p>x.length?x.length:p;if(u===x.length?l+=x:l+=x.slice(0,p),p-=u,p===0){u===x.length?(++m,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=x.slice(u));break}++m}return this.length-=m,l}},{key:"_getBuffer",value:function(p){var c=r.allocUnsafe(p),m=this.head,l=1;for(m.data.copy(c),p-=m.data.length;m=m.next;){var x=m.data,u=p>x.length?x.length:p;if(x.copy(c,c.length-p,0,u),p-=u,p===0){u===x.length?(++l,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=x.slice(u));break}++l}return this.length-=l,c}},{key:i,value:function(p,c){return h(this,f({},c,{depth:0,customInspect:!1}))}}]),y}()},{buffer:85,util:83}],295:[function(o,U,H){(function(w){(function(){function f(r,t){var h=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(a,this,r)):w.nextTick(a,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(y){!t&&y?h._writableState?h._writableState.errorEmitted?w.nextTick(T,h):(h._writableState.errorEmitted=!0,w.nextTick(M,h,y)):w.nextTick(M,h,y):t?(w.nextTick(T,h),t(y)):w.nextTick(T,h)}),this)}function M(r,t){a(r,t),T(r)}function T(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(r,t){r.emit("error",t)}function n(r,t){var h=r._readableState,i=r._writableState;h&&h.autoDestroy||i&&i.autoDestroy?r.destroy(t):r.emit("error",t)}U.exports={destroy:f,undestroy:e,errorOrDestroy:n}}).call(this)}).call(this,o("_process"))},{_process:278}],296:[function(o,U,H){var w=o("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function f(a){var n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,t=new Array(r),h=0;h<r;h++)t[h]=arguments[h];a.apply(this,t)}}}function M(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,n,r){if(typeof n=="function")return e(a,null,n);n||(n={}),r=f(r||M);var t=n.readable||n.readable!==!1&&a.readable,h=n.writable||n.writable!==!1&&a.writable,i=function(){a.writable||y()},s=a._writableState&&a._writableState.finished,y=function(){h=!1,s=!0,t||r.call(a)},d=a._readableState&&a._readableState.endEmitted,p=function(){t=!1,d=!0,h||r.call(a)},c=function(u){r.call(a,u)},m=function(){var u;if(t&&!d)return(!a._readableState||!a._readableState.ended)&&(u=new w),r.call(a,u);if(h&&!s)return(!a._writableState||!a._writableState.ended)&&(u=new w),r.call(a,u)},l=function(){a.req.on("finish",y)};return T(a)?(a.on("complete",y),a.on("abort",m),a.req?l():a.on("request",l)):h&&!a._writableState&&(a.on("end",i),a.on("close",i)),a.on("end",p),a.on("finish",y),n.error!==!1&&a.on("error",c),a.on("close",m),function(){a.removeListener("complete",y),a.removeListener("abort",m),a.removeListener("request",l),a.req&&a.req.removeListener("finish",y),a.removeListener("end",i),a.removeListener("close",i),a.removeListener("finish",y),a.removeListener("end",p),a.removeListener("error",c),a.removeListener("close",m)}}U.exports=e},{"../../../errors":287}],297:[function(o,U,H){U.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(o,U,H){var w;function f(y){var d=!1;return function(){d||(d=!0,y.apply(void 0,arguments))}}var M=o("../../../errors").codes,T=M.ERR_MISSING_ARGS,e=M.ERR_STREAM_DESTROYED;function a(y){if(y)throw y}function n(y){return y.setHeader&&typeof y.abort=="function"}function r(y,d,p,c){c=f(c);var m=!1;y.on("close",function(){m=!0}),w===void 0&&(w=o("./end-of-stream")),w(y,{readable:d,writable:p},function(x){if(x)return c(x);m=!0,c()});var l=!1;return function(x){if(!m&&!l){if(l=!0,n(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();c(x||new e("pipe"))}}}function t(y){y()}function h(y,d){return y.pipe(d)}function i(y){return!y.length||typeof y[y.length-1]!="function"?a:y.pop()}function s(){for(var y=arguments.length,d=new Array(y),p=0;p<y;p++)d[p]=arguments[p];var c=i(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new T("streams");var m,l=d.map(function(x,u){var A=u<d.length-1,_=u>0;return r(x,A,_,function(g){m||(m=g),g&&l.forEach(t),!A&&(l.forEach(t),c(m))})});return d.reduce(h)}U.exports=s},{"../../../errors":287,"./end-of-stream":296}],299:[function(o,U,H){var w=o("../../../errors").codes.ERR_INVALID_OPT_VALUE;function f(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function M(T,e,a,n){var r=f(e,n,a);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var t=n?a:"highWaterMark";throw new w(t,r)}return Math.floor(r)}return T.objectMode?16:16*1024}U.exports={getHighWaterMark:M}},{"../../../errors":287}],300:[function(o,U,H){U.exports=o("events").EventEmitter},{events:84}],301:[function(o,U,H){var w=o("safe-buffer").Buffer,f=w.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(l){if(!l)return"utf8";for(var x;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(x)return;l=(""+l).toLowerCase(),x=!0}}function T(l){var x=M(l);if(typeof x!="string"&&(w.isEncoding===f||!f(l)))throw new Error("Unknown encoding: "+l);return x||l}H.StringDecoder=e;function e(l){this.encoding=T(l);var x;switch(this.encoding){case"utf16le":this.text=s,this.end=y,x=4;break;case"utf8":this.fillLast=t,x=4;break;case"base64":this.text=d,this.end=p,x=3;break;default:this.write=c,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(x)}e.prototype.write=function(l){if(l.length===0)return"";var x,u;if(this.lastNeed){if(x=this.fillLast(l),x===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?x?x+this.text(l,u):this.text(l,u):x||""},e.prototype.end=i,e.prototype.text=h,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function n(l,x,u){var A=x.length-1;if(A<u)return 0;var _=a(x[A]);return _>=0?(_>0&&(l.lastNeed=_-1),_):--A<u||_===-2?0:(_=a(x[A]),_>=0?(_>0&&(l.lastNeed=_-2),_):--A<u||_===-2?0:(_=a(x[A]),_>=0?(_>0&&(_===2?_=0:l.lastNeed=_-3),_):0))}function r(l,x,u){if((x[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function t(l){var x=this.lastTotal-this.lastNeed,u=r(this,l);if(u!==void 0)return u;if(this.lastNeed<=l.length)return l.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,x,0,l.length),this.lastNeed-=l.length}function h(l,x){var u=n(this,l,x);if(!this.lastNeed)return l.toString("utf8",x);this.lastTotal=u;var A=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,A),l.toString("utf8",x,A)}function i(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+"\uFFFD":x}function s(l,x){if((l.length-x)%2===0){var u=l.toString("utf16le",x);if(u){var A=u.charCodeAt(u.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",x,l.length-1)}function y(l){var x=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,u)}return x}function d(l,x){var u=(l.length-x)%3;return u===0?l.toString("base64",x):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",x,l.length-u))}function p(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function c(l){return l.toString(this.encoding)}function m(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(o,U,H){(function(w,f){(function(){var M=o("assert"),T=o("debug")("stream-parser");U.exports=t;var e=-1,a=0,n=1,r=2;function t(u){var A=u&&typeof u._transform=="function",_=u&&typeof u._write=="function";if(!A&&!_)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),u._bytes=i,u._skipBytes=s,A&&(u._passthrough=y),A?u._transform=p:u._write=d}function h(u){T("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=e,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function i(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||h(this),T("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=a}function s(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||h(this),T("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=n}function y(u,A){M(!this._parserCallback,'There is already a "callback" set!'),M(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||h(this),T("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=r}function d(u,A,_){this._parserInit||h(this),T("write(%o bytes)",u.length),typeof A=="function"&&(_=A),l(this,u,null,_)}function p(u,A,_){this._parserInit||h(this),T("transform(%o bytes)",u.length),typeof A!="function"&&(A=this._parserOutput),l(this,u,A,_)}function c(u,A,_,g){return u._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):A.length<=u._parserBytesLeft?function(){return m(u,A,_,g)}:function(){var b=A.slice(0,u._parserBytesLeft);return m(u,b,_,function(v){if(v)return g(v);if(A.length>b.length)return function(){return c(u,A.slice(b.length),_,g)}})}}function m(u,A,_,g){if(u._parserBytesLeft-=A.length,T("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===a?(u._parserBuffers.push(A),u._parserBuffered+=A.length):u._parserState===r&&_(A),u._parserBytesLeft===0){var b=u._parserCallback;if(b&&u._parserState===a&&u._parserBuffers.length>1&&(A=f.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==a&&(A=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=e,u._parserBuffers.splice(0),b){var v=[];A&&v.push(A),_&&v.push(_);var C=b.length>v.length;C&&v.push(x(g));var S=b.apply(u,v);if(!C||g===S)return g}}else return g}var l=x(c);function x(u){return function(){for(var A=u.apply(this,arguments);typeof A=="function";)A=A();return A}}}).call(this)}).call(this,o("_process"),o("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(o,U,H){(function(w){(function(){H=U.exports=o("./debug"),H.log=T,H.formatArgs=M,H.save=e,H.load=a,H.useColors=f,H.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:n(),H.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function f(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}H.formatters.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function M(r){var t=this.useColors;if(r[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+r[0]+(t?"%c ":" ")+"+"+H.humanize(this.diff),!!t){var h="color: "+this.color;r.splice(1,0,h,"color: inherit");var i=0,s=0;r[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(i++,y==="%c"&&(s=i))}),r.splice(s,0,h)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(r){try{r==null?H.storage.removeItem("debug"):H.storage.debug=r}catch{}}function a(){var r;try{r=H.storage.debug}catch{}return!r&&typeof w<"u"&&"env"in w&&(r=w.env.DEBUG),r}H.enable(a());function n(){try{return window.localStorage}catch{}}}).call(this)}).call(this,o("_process"))},{"./debug":304,_process:278}],304:[function(o,U,H){H=U.exports=M.debug=M.default=M,H.coerce=n,H.disable=e,H.enable=T,H.enabled=a,H.humanize=o("ms"),H.names=[],H.skips=[],H.formatters={};var w;function f(r){var t=0,h;for(h in r)t=(t<<5)-t+r.charCodeAt(h),t|=0;return H.colors[Math.abs(t)%H.colors.length]}function M(r){function t(){if(!!t.enabled){var h=t,i=+new Date,s=i-(w||i);h.diff=s,h.prev=w,h.curr=i,w=i;for(var y=new Array(arguments.length),d=0;d<y.length;d++)y[d]=arguments[d];y[0]=H.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var p=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(m,l){if(m==="%%")return m;p++;var x=H.formatters[l];if(typeof x=="function"){var u=y[p];m=x.call(h,u),y.splice(p,1),p--}return m}),H.formatArgs.call(h,y);var c=t.log||H.log||console.log.bind(console);c.apply(h,y)}}return t.namespace=r,t.enabled=H.enabled(r),t.useColors=H.useColors(),t.color=f(r),typeof H.init=="function"&&H.init(t),t}function T(r){H.save(r),H.names=[],H.skips=[];for(var t=(typeof r=="string"?r:"").split(/[\s,]+/),h=t.length,i=0;i<h;i++)!t[i]||(r=t[i].replace(/\*/g,".*?"),r[0]==="-"?H.skips.push(new RegExp("^"+r.substr(1)+"$")):H.names.push(new RegExp("^"+r+"$")))}function e(){H.enable("")}function a(r){var t,h;for(t=0,h=H.skips.length;t<h;t++)if(H.skips[t].test(r))return!1;for(t=0,h=H.names.length;t<h;t++)if(H.names[t].test(r))return!0;return!1}function n(r){return r instanceof Error?r.stack||r.message:r}},{ms:305}],305:[function(o,U,H){var w=1e3,f=w*60,M=f*60,T=M*24,e=T*365.25;U.exports=function(h,i){i=i||{};var s=typeof h;if(s==="string"&&h.length>0)return a(h);if(s==="number"&&isNaN(h)===!1)return i.long?r(h):n(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function a(h){if(h=String(h),!(h.length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(h);if(!!i){var s=parseFloat(i[1]),y=(i[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return s*e;case"days":case"day":case"d":return s*T;case"hours":case"hour":case"hrs":case"hr":case"h":return s*M;case"minutes":case"minute":case"mins":case"min":case"m":return s*f;case"seconds":case"second":case"secs":case"sec":case"s":return s*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function n(h){return h>=T?Math.round(h/T)+"d":h>=M?Math.round(h/M)+"h":h>=f?Math.round(h/f)+"m":h>=w?Math.round(h/w)+"s":h+"ms"}function r(h){return t(h,T,"day")||t(h,M,"hour")||t(h,f,"minute")||t(h,w,"second")||h+" ms"}function t(h,i,s){if(!(h<i))return h<i*1.5?Math.floor(h/i)+" "+s:Math.ceil(h/i)+" "+s+"s"}},{}],306:[function(o,U,H){var w=o("parenthesis");U.exports=function(M,T,e){if(M==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(y){return y.length===1&&(y=y+y),y}));var a=w.parse(M,{flat:!0,brackets:e.ignore}),n=a[0],r=n.split(T);if(e.escape){for(var t=[],h=0;h<r.length;h++){var i=r[h],s=r[h+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(t.push(i+T+s),h++):t.push(i)}r=t}for(var h=0;h<r.length;h++)a[0]=r[h],r[h]=w.stringify(a,{flat:!0});return r}},{parenthesis:248}],307:[function(o,U,H){U.exports=w;function w(f){for(var M=f.length,T=new Array(M),e=new Array(M),a=new Array(M),n=new Array(M),r=new Array(M),t=new Array(M),h=0;h<M;++h)T[h]=-1,e[h]=0,a[h]=!1,n[h]=0,r[h]=-1,t[h]=[];var i=0,s=[],y=[];function d(l){var x=[l],u=[l];for(T[l]=e[l]=i,a[l]=!0,i+=1;u.length>0;){l=u[u.length-1];var A=f[l];if(n[l]<A.length){for(var _=n[l];_<A.length;++_){var g=A[_];if(T[g]<0){T[g]=e[g]=i,a[g]=!0,i+=1,x.push(g),u.push(g);break}else a[g]&&(e[l]=Math.min(e[l],e[g])|0);r[g]>=0&&t[l].push(r[g])}n[l]=_}else{if(e[l]===T[l]){for(var b=[],v=[],C=0,_=x.length-1;_>=0;--_){var S=x[_];if(a[S]=!1,b.push(S),v.push(t[S]),C+=t[S].length,r[S]=s.length,S===l){x.length=_;break}}s.push(b);for(var k=new Array(C),_=0;_<v.length;_++)for(var E=0;E<v[_].length;E++)k[--C]=v[_][E];y.push(k)}u.pop()}}}for(var h=0;h<M;++h)T[h]<0&&d(h);for(var p,h=0;h<y.length;h++){var c=y[h];if(c.length!==0){c.sort(function(x,u){return x-u}),p=[c[0]];for(var m=1;m<c.length;m++)c[m]!==c[m-1]&&p.push(c[m]);y[h]=p}}return{components:s,adjacencyList:y}}},{}],308:[function(o,U,H){Object.defineProperty(H,"__esModule",{value:!0});var w=function(){function r(t,h){var i=[],s=!0,y=!1,d=void 0;try{for(var p=t[Symbol.iterator](),c;!(s=(c=p.next()).done)&&(i.push(c.value),!(h&&i.length===h));s=!0);}catch(m){y=!0,d=m}finally{try{!s&&p.return&&p.return()}finally{if(y)throw d}}return i}return function(t,h){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Math.PI*2,M=function(t,h,i,s,y,d,p){var c=t.x,m=t.y;c*=h,m*=i;var l=s*c-y*m,x=y*c+s*m;return{x:l+d,y:x+p}},T=function(t,h){var i=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),s=Math.cos(t),y=Math.sin(t),d=Math.cos(t+h),p=Math.sin(t+h);return[{x:s-y*i,y:y+s*i},{x:d+p*i,y:p-d*i},{x:d,y:p}]},e=function(t,h,i,s){var y=t*s-h*i<0?-1:1,d=t*i+h*s;return d>1&&(d=1),d<-1&&(d=-1),y*Math.acos(d)},a=function(t,h,i,s,y,d,p,c,m,l,x,u){var A=Math.pow(y,2),_=Math.pow(d,2),g=Math.pow(x,2),b=Math.pow(u,2),v=A*_-A*b-_*g;v<0&&(v=0),v/=A*b+_*g,v=Math.sqrt(v)*(p===c?-1:1);var C=v*y/d*u,S=v*-d/y*x,k=l*C-m*S+(t+i)/2,E=m*C+l*S+(h+s)/2,F=(x-C)/y,I=(u-S)/d,D=(-x-C)/y,R=(-u-S)/d,O=e(1,0,F,I),z=e(F,I,D,R);return c===0&&z>0&&(z-=f),c===1&&z<0&&(z+=f),[k,E,O,z]},n=function(t){var h=t.px,i=t.py,s=t.cx,y=t.cy,d=t.rx,p=t.ry,c=t.xAxisRotation,m=c===void 0?0:c,l=t.largeArcFlag,x=l===void 0?0:l,u=t.sweepFlag,A=u===void 0?0:u,_=[];if(d===0||p===0)return[];var g=Math.sin(m*f/360),b=Math.cos(m*f/360),v=b*(h-s)/2+g*(i-y)/2,C=-g*(h-s)/2+b*(i-y)/2;if(v===0&&C===0)return[];d=Math.abs(d),p=Math.abs(p);var S=Math.pow(v,2)/Math.pow(d,2)+Math.pow(C,2)/Math.pow(p,2);S>1&&(d*=Math.sqrt(S),p*=Math.sqrt(S));var k=a(h,i,s,y,d,p,x,A,g,b,v,C),E=w(k,4),F=E[0],I=E[1],D=E[2],R=E[3],O=Math.abs(R)/(f/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);R/=z;for(var B=0;B<z;B++)_.push(T(D,R)),D+=R;return _.map(function(G){var Q=M(G[0],d,p,b,g,F,I),X=Q.x,j=Q.y,re=M(G[1],d,p,b,g,F,I),ue=re.x,K=re.y,te=M(G[2],d,p,b,g,F,I),Y=te.x,V=te.y;return{x1:X,y1:j,x2:ue,y2:K,x:Y,y:V}})};H.default=n,U.exports=H.default},{}],309:[function(o,U,H){var w=o("parse-svg-path"),f=o("abs-svg-path"),M=o("normalize-svg-path"),T=o("is-svg-path"),e=o("assert");U.exports=a;function a(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(e(T(n),"String is not an SVG path."),n=w(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=f(n),n=M(n),!n.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],t=0,h=n.length;t<h;t++)for(var i=n[t].slice(1),s=0;s<i.length;s+=2)i[s+0]<r[0]&&(r[0]=i[s+0]),i[s+1]<r[1]&&(r[1]=i[s+1]),i[s+0]>r[2]&&(r[2]=i[s+0]),i[s+1]>r[3]&&(r[3]=i[s+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(o,U,H){U.exports=f;var w=o("svg-arc-to-cubic-bezier");function f(e){for(var a,n=[],r=0,t=0,h=0,i=0,s=null,y=null,d=0,p=0,c=0,m=e.length;c<m;c++){var l=e[c],x=l[0];switch(x){case"M":h=l[1],i=l[2];break;case"A":var u=w({px:d,py:p,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!u.length)continue;for(var A=0,_;A<u.length;A++)_=u[A],l=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],A<u.length-1&&n.push(l);break;case"S":var g=d,b=p;(a=="C"||a=="S")&&(g+=g-r,b+=b-t),l=["C",g,b,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(s=d*2-s,y=p*2-y):(s=d,y=p),l=T(d,p,s,y,l[1],l[2]);break;case"Q":s=l[1],y=l[2],l=T(d,p,l[1],l[2],l[3],l[4]);break;case"L":l=M(d,p,l[1],l[2]);break;case"H":l=M(d,p,l[1],p);break;case"V":l=M(d,p,d,l[1]);break;case"Z":l=M(d,p,h,i);break}a=x,d=l[l.length-2],p=l[l.length-1],l.length>4?(r=l[l.length-4],t=l[l.length-3]):(r=d,t=p),n.push(l)}return n}function M(e,a,n,r){return["C",e,a,n,r,n,r]}function T(e,a,n,r,t,h){return["C",e/3+2/3*n,a/3+2/3*r,t/3+2/3*n,h/3+2/3*r,t,h]}},{"svg-arc-to-cubic-bezier":308}],311:[function(o,U,H){var w=o("svg-path-bounds"),f=o("parse-svg-path"),M=o("draw-svg-path"),T=o("is-svg-path"),e=o("bitmap-sdf"),a=document.createElement("canvas"),n=a.getContext("2d");U.exports=r;function r(i,s){if(!T(i))throw Error("Argument should be valid svg path string");s||(s={});var y,d;s.shape?(y=s.shape[0],d=s.shape[1]):(y=a.width=s.w||s.width||200,d=a.height=s.h||s.height||200);var p=Math.min(y,d),c=s.stroke||0,m=s.viewbox||s.viewBox||w(i),l=[y/(m[2]-m[0]),d/(m[3]-m[1])],x=Math.min(l[0]||0,l[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,y,d),n.fillStyle="white",c&&(typeof c!="number"&&(c=1),c>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(c)),n.translate(y*.5,d*.5),n.scale(x,x),h()){var u=new Path2D(i);n.fill(u),c&&n.stroke(u)}else{var A=f(i);M(n,A),n.fill(),c&&n.stroke()}n.setTransform(1,0,0,1,0,0);var _=e(n,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:p*.5});return _}var t;function h(){if(t!=null)return t;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return t=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(s);var y=i.getImageData(0,0,1,1);return t=y&&y.data&&y.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(o,U,H){(function(w,f){(function(){var M=o("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},n=0;H.setTimeout=function(){return new r(T.call(setTimeout,window,arguments),clearTimeout)},H.setInterval=function(){return new r(T.call(setInterval,window,arguments),clearInterval)},H.clearTimeout=H.clearInterval=function(t){t.close()};function r(t,h){this._id=t,this._clearFn=h}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},H.enroll=function(t,h){clearTimeout(t._idleTimeoutId),t._idleTimeout=h},H.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},H._unrefActive=H.active=function(t){clearTimeout(t._idleTimeoutId);var h=t._idleTimeout;h>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},h))},H.setImmediate=typeof w=="function"?w:function(t){var h=n++,i=arguments.length<2?!1:e.call(arguments,1);return a[h]=!0,M(function(){a[h]&&(i?t.apply(null,i):t.call(null),H.clearImmediate(h))}),h},H.clearImmediate=typeof f=="function"?f:function(t){delete a[t]}}).call(this)}).call(this,o("timers").setImmediate,o("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(o,U,H){(function(w){var f=/^\s+/,M=/\s+$/,T=0,e=w.round,a=w.min,n=w.max,r=w.random;function t(Z,q){if(Z=Z||"",q=q||{},Z instanceof t)return Z;if(!(this instanceof t))return new t(Z,q);var ie=h(Z);this._originalInput=Z,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=e(100*this._a)/100,this._format=q.format||ie.format,this._gradientType=q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ie.ok,this._tc_id=T++}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),q,ie,se,ae,oe,be;return q=Z.r/255,ie=Z.g/255,se=Z.b/255,q<=.03928?ae=q/12.92:ae=w.pow((q+.055)/1.055,2.4),ie<=.03928?oe=ie/12.92:oe=w.pow((ie+.055)/1.055,2.4),se<=.03928?be=se/12.92:be=w.pow((se+.055)/1.055,2.4),.2126*ae+.7152*oe+.0722*be},setAlpha:function(Z){return this._a=z(Z),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Z=d(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=d(this._r,this._g,this._b),q=e(Z.h*360),ie=e(Z.s*100),se=e(Z.v*100);return this._a==1?"hsv("+q+", "+ie+"%, "+se+"%)":"hsva("+q+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var Z=s(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=s(this._r,this._g,this._b),q=e(Z.h*360),ie=e(Z.s*100),se=e(Z.l*100);return this._a==1?"hsl("+q+", "+ie+"%, "+se+"%)":"hsla("+q+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHex:function(Z){return c(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return m(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(B(this._r,255)*100)+"%",g:e(B(this._g,255)*100)+"%",b:e(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(B(this._r,255)*100)+"%, "+e(B(this._g,255)*100)+"%, "+e(B(this._b,255)*100)+"%)":"rgba("+e(B(this._r,255)*100)+"%, "+e(B(this._g,255)*100)+"%, "+e(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[c(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var q="#"+l(this._r,this._g,this._b,this._a),ie=q,se=this._gradientType?"GradientType = 1, ":"";if(Z){var ae=t(Z);ie="#"+l(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+q+",endColorstr="+ie+")"},toString:function(Z){var q=!!Z;Z=Z||this._format;var ie=!1,se=this._a<1&&this._a>=0,ae=!q&&se&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return ae?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(ie=this.toRgbString()),Z==="prgb"&&(ie=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(ie=this.toHexString()),Z==="hex3"&&(ie=this.toHexString(!0)),Z==="hex4"&&(ie=this.toHex8String(!0)),Z==="hex8"&&(ie=this.toHex8String()),Z==="name"&&(ie=this.toName()),Z==="hsl"&&(ie=this.toHslString()),Z==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(Z,q){var ie=Z.apply(null,[this].concat([].slice.call(q)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(Z,q){return Z.apply(null,[this].concat([].slice.call(q)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},t.fromRatio=function(Z,q){if(typeof Z=="object"){var ie={};for(var se in Z)Z.hasOwnProperty(se)&&(se==="a"?ie[se]=Z[se]:ie[se]=ue(Z[se]));Z=ie}return t(Z,q)};function h(Z){var q={r:0,g:0,b:0},ie=1,se=null,ae=null,oe=null,be=!1,ce=!1;return typeof Z=="string"&&(Z=ee(Z)),typeof Z=="object"&&(V(Z.r)&&V(Z.g)&&V(Z.b)?(q=i(Z.r,Z.g,Z.b),be=!0,ce=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):V(Z.h)&&V(Z.s)&&V(Z.v)?(se=ue(Z.s),ae=ue(Z.v),q=p(Z.h,se,ae),be=!0,ce="hsv"):V(Z.h)&&V(Z.s)&&V(Z.l)&&(se=ue(Z.s),oe=ue(Z.l),q=y(Z.h,se,oe),be=!0,ce="hsl"),Z.hasOwnProperty("a")&&(ie=Z.a)),ie=z(ie),{ok:be,format:Z.format||ce,r:a(255,n(q.r,0)),g:a(255,n(q.g,0)),b:a(255,n(q.b,0)),a:ie}}function i(Z,q,ie){return{r:B(Z,255)*255,g:B(q,255)*255,b:B(ie,255)*255}}function s(Z,q,ie){Z=B(Z,255),q=B(q,255),ie=B(ie,255);var se=n(Z,q,ie),ae=a(Z,q,ie),oe,be,ce=(se+ae)/2;if(se==ae)oe=be=0;else{var de=se-ae;switch(be=ce>.5?de/(2-se-ae):de/(se+ae),se){case Z:oe=(q-ie)/de+(q<ie?6:0);break;case q:oe=(ie-Z)/de+2;break;case ie:oe=(Z-q)/de+4;break}oe/=6}return{h:oe,s:be,l:ce}}function y(Z,q,ie){var se,ae,oe;Z=B(Z,360),q=B(q,100),ie=B(ie,100);function be(ye,ge,me){return me<0&&(me+=1),me>1&&(me-=1),me<1/6?ye+(ge-ye)*6*me:me<1/2?ge:me<2/3?ye+(ge-ye)*(2/3-me)*6:ye}if(q===0)se=ae=oe=ie;else{var ce=ie<.5?ie*(1+q):ie+q-ie*q,de=2*ie-ce;se=be(de,ce,Z+1/3),ae=be(de,ce,Z),oe=be(de,ce,Z-1/3)}return{r:se*255,g:ae*255,b:oe*255}}function d(Z,q,ie){Z=B(Z,255),q=B(q,255),ie=B(ie,255);var se=n(Z,q,ie),ae=a(Z,q,ie),oe,be,ce=se,de=se-ae;if(be=se===0?0:de/se,se==ae)oe=0;else{switch(se){case Z:oe=(q-ie)/de+(q<ie?6:0);break;case q:oe=(ie-Z)/de+2;break;case ie:oe=(Z-q)/de+4;break}oe/=6}return{h:oe,s:be,v:ce}}function p(Z,q,ie){Z=B(Z,360)*6,q=B(q,100),ie=B(ie,100);var se=w.floor(Z),ae=Z-se,oe=ie*(1-q),be=ie*(1-ae*q),ce=ie*(1-(1-ae)*q),de=se%6,ye=[ie,be,oe,oe,ce,ie][de],ge=[ce,ie,ie,be,oe,oe][de],me=[oe,oe,ce,ie,ie,be][de];return{r:ye*255,g:ge*255,b:me*255}}function c(Z,q,ie,se){var ae=[re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function m(Z,q,ie,se,ae){var oe=[re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16)),re(K(se))];return ae&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)&&oe[3].charAt(0)==oe[3].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0)+oe[3].charAt(0):oe.join("")}function l(Z,q,ie,se){var ae=[re(K(se)),re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16))];return ae.join("")}t.equals=function(Z,q){return!Z||!q?!1:t(Z).toRgbString()==t(q).toRgbString()},t.random=function(){return t.fromRatio({r:r(),g:r(),b:r()})};function x(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.s-=q/100,ie.s=G(ie.s),t(ie)}function u(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.s+=q/100,ie.s=G(ie.s),t(ie)}function A(Z){return t(Z).desaturate(100)}function _(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.l+=q/100,ie.l=G(ie.l),t(ie)}function g(Z,q){q=q===0?0:q||10;var ie=t(Z).toRgb();return ie.r=n(0,a(255,ie.r-e(255*-(q/100)))),ie.g=n(0,a(255,ie.g-e(255*-(q/100)))),ie.b=n(0,a(255,ie.b-e(255*-(q/100)))),t(ie)}function b(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.l-=q/100,ie.l=G(ie.l),t(ie)}function v(Z,q){var ie=t(Z).toHsl(),se=(ie.h+q)%360;return ie.h=se<0?360+se:se,t(ie)}function C(Z){var q=t(Z).toHsl();return q.h=(q.h+180)%360,t(q)}function S(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+120)%360,s:q.s,l:q.l}),t({h:(ie+240)%360,s:q.s,l:q.l})]}function k(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+90)%360,s:q.s,l:q.l}),t({h:(ie+180)%360,s:q.s,l:q.l}),t({h:(ie+270)%360,s:q.s,l:q.l})]}function E(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+72)%360,s:q.s,l:q.l}),t({h:(ie+216)%360,s:q.s,l:q.l})]}function F(Z,q,ie){q=q||6,ie=ie||30;var se=t(Z).toHsl(),ae=360/ie,oe=[t(Z)];for(se.h=(se.h-(ae*q>>1)+720)%360;--q;)se.h=(se.h+ae)%360,oe.push(t(se));return oe}function I(Z,q){q=q||6;for(var ie=t(Z).toHsv(),se=ie.h,ae=ie.s,oe=ie.v,be=[],ce=1/q;q--;)be.push(t({h:se,s:ae,v:oe})),oe=(oe+ce)%1;return be}t.mix=function(Z,q,ie){ie=ie===0?0:ie||50;var se=t(Z).toRgb(),ae=t(q).toRgb(),oe=ie/100,be={r:(ae.r-se.r)*oe+se.r,g:(ae.g-se.g)*oe+se.g,b:(ae.b-se.b)*oe+se.b,a:(ae.a-se.a)*oe+se.a};return t(be)},t.readability=function(Z,q){var ie=t(Z),se=t(q);return(w.max(ie.getLuminance(),se.getLuminance())+.05)/(w.min(ie.getLuminance(),se.getLuminance())+.05)},t.isReadable=function(Z,q,ie){var se=t.readability(Z,q),ae,oe;switch(oe=!1,ae=ne(ie),ae.level+ae.size){case"AAsmall":case"AAAlarge":oe=se>=4.5;break;case"AAlarge":oe=se>=3;break;case"AAAsmall":oe=se>=7;break}return oe},t.mostReadable=function(Z,q,ie){var se=null,ae=0,oe,be,ce,de;ie=ie||{},be=ie.includeFallbackColors,ce=ie.level,de=ie.size;for(var ye=0;ye<q.length;ye++)oe=t.readability(Z,q[ye]),oe>ae&&(ae=oe,se=t(q[ye]));return t.isReadable(Z,se,{level:ce,size:de})||!be?se:(ie.includeFallbackColors=!1,t.mostReadable(Z,["#fff","#000"],ie))};var D=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=t.hexNames=O(D);function O(Z){var q={};for(var ie in Z)Z.hasOwnProperty(ie)&&(q[Z[ie]]=ie);return q}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function B(Z,q){X(Z)&&(Z="100%");var ie=j(Z);return Z=a(q,n(0,parseFloat(Z))),ie&&(Z=parseInt(Z*q,10)/100),w.abs(Z-q)<1e-6?1:Z%q/parseFloat(q)}function G(Z){return a(1,n(0,Z))}function Q(Z){return parseInt(Z,16)}function X(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function j(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function re(Z){return Z.length==1?"0"+Z:""+Z}function ue(Z){return Z<=1&&(Z=Z*100+"%"),Z}function K(Z){return w.round(parseFloat(Z)*255).toString(16)}function te(Z){return Q(Z)/255}var Y=function(){var Z="[-\\+]?\\d+%?",q="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+q+")|(?:"+Z+")",se="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",ae="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+se),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+se),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+se),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(Z){return!!Y.CSS_UNIT.exec(Z)}function ee(Z){Z=Z.replace(f,"").replace(M,"").toLowerCase();var q=!1;if(D[Z])Z=D[Z],q=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=Y.rgb.exec(Z))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=Y.rgba.exec(Z))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=Y.hsl.exec(Z))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=Y.hsla.exec(Z))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=Y.hsv.exec(Z))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=Y.hsva.exec(Z))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=Y.hex8.exec(Z))?{r:Q(ie[1]),g:Q(ie[2]),b:Q(ie[3]),a:te(ie[4]),format:q?"name":"hex8"}:(ie=Y.hex6.exec(Z))?{r:Q(ie[1]),g:Q(ie[2]),b:Q(ie[3]),format:q?"name":"hex"}:(ie=Y.hex4.exec(Z))?{r:Q(ie[1]+""+ie[1]),g:Q(ie[2]+""+ie[2]),b:Q(ie[3]+""+ie[3]),a:te(ie[4]+""+ie[4]),format:q?"name":"hex8"}:(ie=Y.hex3.exec(Z))?{r:Q(ie[1]+""+ie[1]),g:Q(ie[2]+""+ie[2]),b:Q(ie[3]+""+ie[3]),format:q?"name":"hex"}:!1}function ne(Z){var q,ie;return Z=Z||{level:"AA",size:"small"},q=(Z.level||"AA").toUpperCase(),ie=(Z.size||"small").toLowerCase(),q!=="AA"&&q!=="AAA"&&(q="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:q,size:ie}}typeof U<"u"&&U.exports?U.exports=t:window.tinycolor=t})(Math)},{}],314:[function(o,U,H){U.exports=M,U.exports.float32=U.exports.float=M,U.exports.fract32=U.exports.fract=f;var w=new Float32Array(1);function f(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=M(T));for(var a=0,n=e.length;a<n;a++)e[a]=T[a]-e[a];return e}return M(T-M(T))}function M(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(w[0]=T,w[0])}},{}],315:[function(o,U,H){var w=o("parse-unit");U.exports=e;var f=96;function M(a,n){var r=w(getComputedStyle(a).getPropertyValue(n));return r[0]*e(r[1],a)}function T(a,n){var r=document.createElement("div");r.style["font-size"]="128"+a,n.appendChild(r);var t=M(r,"font-size")/128;return n.removeChild(r),t}function e(a,n){switch(n=n||document.body,a=(a||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),a){case"%":return n.clientHeight/100;case"ch":case"ex":return T(a,n);case"em":return M(n,"font-size");case"rem":return M(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f;case"cm":return f/2.54;case"mm":return f/25.4;case"pt":return f/72;case"pc":return f/6}return 1}},{"parse-unit":251}],316:[function(o,U,H){(function(w,f){typeof H=="object"&&typeof U<"u"?f(H):(w=w||self,f(w.topojson=w.topojson||{}))})(this,function(w){function f(u){return u}function M(u){if(u==null)return f;var A,_,g=u.scale[0],b=u.scale[1],v=u.translate[0],C=u.translate[1];return function(S,k){k||(A=_=0);var E=2,F=S.length,I=new Array(F);for(I[0]=(A+=S[0])*g+v,I[1]=(_+=S[1])*b+C;E<F;)I[E]=S[E],++E;return I}}function T(u){var A=M(u.transform),_,g=1/0,b=g,v=-g,C=-g;function S(E){E=A(E),E[0]<g&&(g=E[0]),E[0]>v&&(v=E[0]),E[1]<b&&(b=E[1]),E[1]>C&&(C=E[1])}function k(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(k);break;case"Point":S(E.coordinates);break;case"MultiPoint":E.coordinates.forEach(S);break}}u.arcs.forEach(function(E){for(var F=-1,I=E.length,D;++F<I;)D=A(E[F],F),D[0]<g&&(g=D[0]),D[0]>v&&(v=D[0]),D[1]<b&&(b=D[1]),D[1]>C&&(C=D[1])});for(_ in u.objects)k(u.objects[_]);return[g,b,v,C]}function e(u,A){for(var _,g=u.length,b=g-A;b<--g;)_=u[b],u[b++]=u[g],u[g]=_}function a(u,A){return typeof A=="string"&&(A=u.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(_){return n(u,_)})}:n(u,A)}function n(u,A){var _=A.id,g=A.bbox,b=A.properties==null?{}:A.properties,v=r(u,A);return _==null&&g==null?{type:"Feature",properties:b,geometry:v}:g==null?{type:"Feature",id:_,properties:b,geometry:v}:{type:"Feature",id:_,bbox:g,properties:b,geometry:v}}function r(u,A){var _=M(u.transform),g=u.arcs;function b(F,I){I.length&&I.pop();for(var D=g[F<0?~F:F],R=0,O=D.length;R<O;++R)I.push(_(D[R],R));F<0&&e(I,O)}function v(F){return _(F)}function C(F){for(var I=[],D=0,R=F.length;D<R;++D)b(F[D],I);return I.length<2&&I.push(I[0]),I}function S(F){for(var I=C(F);I.length<4;)I.push(I[0]);return I}function k(F){return F.map(S)}function E(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(E)};case"Point":D=v(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(v);break;case"LineString":D=C(F.arcs);break;case"MultiLineString":D=F.arcs.map(C);break;case"Polygon":D=k(F.arcs);break;case"MultiPolygon":D=F.arcs.map(k);break;default:return null}return{type:I,coordinates:D}}return E(A)}function t(u,A){var _={},g={},b={},v=[],C=-1;A.forEach(function(E,F){var I=u.arcs[E<0?~E:E],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=A[++C],A[C]=E,A[F]=D)}),A.forEach(function(E){var F=S(E),I=F[0],D=F[1],R,O;if(R=b[I])if(delete b[R.end],R.push(E),R.end=D,O=g[D]){delete g[O.start];var z=O===R?R:R.concat(O);g[z.start=R.start]=b[z.end=O.end]=z}else g[R.start]=b[R.end]=R;else if(R=g[D])if(delete g[R.start],R.unshift(E),R.start=I,O=b[I]){delete b[O.end];var B=O===R?R:O.concat(R);g[B.start=O.start]=b[B.end=R.end]=B}else g[R.start]=b[R.end]=R;else R=[E],g[R.start=I]=b[R.end=D]=R});function S(E){var F=u.arcs[E<0?~E:E],I=F[0],D;return u.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],E<0?[D,I]:[I,D]}function k(E,F){for(var I in E){var D=E[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){_[R<0?~R:R]=1}),v.push(D)}}return k(b,g),k(g,b),A.forEach(function(E){_[E<0?~E:E]||v.push([E])}),v}function h(u){return r(u,i.apply(this,arguments))}function i(u,A,_){var g,b,v;if(arguments.length>1)g=s(u,A,_);else for(b=0,g=new Array(v=u.arcs.length);b<v;++b)g[b]=b;return{type:"MultiLineString",arcs:t(u,g)}}function s(u,A,_){var g=[],b=[],v;function C(I){var D=I<0?~I:I;(b[D]||(b[D]=[])).push({i:I,g:v})}function S(I){I.forEach(C)}function k(I){I.forEach(S)}function E(I){I.forEach(k)}function F(I){switch(v=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":k(I.arcs);break;case"MultiPolygon":E(I.arcs);break}}return F(A),b.forEach(_==null?function(I){g.push(I[0].i)}:function(I){_(I[0].g,I[I.length-1].g)&&g.push(I[0].i)}),g}function y(u){for(var A=-1,_=u.length,g,b=u[_-1],v=0;++A<_;)g=b,b=u[A],v+=g[0]*b[1]-g[1]*b[0];return Math.abs(v)}function d(u){return r(u,p.apply(this,arguments))}function p(u,A){var _={},g=[],b=[];A.forEach(v);function v(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(v);break;case"Polygon":C(k.arcs);break;case"MultiPolygon":k.arcs.forEach(C);break}}function C(k){k.forEach(function(E){E.forEach(function(F){(_[F=F<0?~F:F]||(_[F]=[])).push(k)})}),g.push(k)}function S(k){return y(r(u,{type:"Polygon",arcs:[k]}).coordinates[0])}return g.forEach(function(k){if(!k._){var E=[],F=[k];for(k._=1,b.push(E);k=F.pop();)E.push(k),k.forEach(function(I){I.forEach(function(D){_[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),g.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:b.map(function(k){var E=[],F;if(k.forEach(function(z){z.forEach(function(B){B.forEach(function(G){_[G<0?~G:G].length<2&&E.push(G)})})}),E=t(u,E),(F=E.length)>1)for(var I=1,D=S(E[0]),R,O;I<F;++I)(R=S(E[I]))>D&&(O=E[0],E[0]=E[I],E[I]=O,D=R);return E}).filter(function(k){return k.length>0})}}function c(u,A){for(var _=0,g=u.length;_<g;){var b=_+g>>>1;u[b]<A?_=b+1:g=b}return _}function m(u){var A={},_=u.map(function(){return[]});function g(z,B){z.forEach(function(G){G<0&&(G=~G);var Q=A[G];Q?Q.push(B):A[G]=[B]})}function b(z,B){z.forEach(function(G){g(G,B)})}function v(z,B){z.type==="GeometryCollection"?z.geometries.forEach(function(G){v(G,B)}):z.type in C&&C[z.type](z.arcs,B)}var C={LineString:g,MultiLineString:b,Polygon:b,MultiPolygon:function(z,B){z.forEach(function(G){b(G,B)})}};u.forEach(v);for(var S in A)for(var k=A[S],E=k.length,F=0;F<E;++F)for(var I=F+1;I<E;++I){var D=k[F],R=k[I],O;(O=_[D])[S=c(O,R)]!==R&&O.splice(S,0,R),(O=_[R])[S=c(O,D)]!==D&&O.splice(S,0,D)}return _}function l(u){if(u==null)return f;var A,_,g=u.scale[0],b=u.scale[1],v=u.translate[0],C=u.translate[1];return function(S,k){k||(A=_=0);var E=2,F=S.length,I=new Array(F),D=Math.round((S[0]-v)/g),R=Math.round((S[1]-C)/b);for(I[0]=D-A,A=D,I[1]=R-_,_=R;E<F;)I[E]=S[E],++E;return I}}function x(u,A){if(u.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((C=Math.floor(A))>=2))throw new Error("n must be \u22652");k=u.bbox||T(u);var _=k[0],g=k[1],b=k[2],v=k[3],C;A={scale:[b-_?(b-_)/(C-1):1,v-g?(v-g)/(C-1):1],translate:[_,g]}}else k=u.bbox;var S=l(A),k,E,F=u.objects,I={};function D(z){return S(z)}function R(z){var B;switch(z.type){case"GeometryCollection":B={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":B={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":B={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(B.id=z.id),z.bbox!=null&&(B.bbox=z.bbox),z.properties!=null&&(B.properties=z.properties),B}function O(z){var B=0,G=1,Q=z.length,X,j=new Array(Q);for(j[0]=S(z[0],0);++B<Q;)((X=S(z[B],B))[0]||X[1])&&(j[G++]=X);return G===1&&(j[G++]=[0,0]),j.length=G,j}for(E in F)I[E]=R(F[E]);return{type:"Topology",bbox:k,transform:A,objects:I,arcs:u.arcs.map(O)}}w.bbox=T,w.feature=a,w.merge=d,w.mergeArcs=p,w.mesh=h,w.meshArcs=i,w.neighbors=m,w.quantize=x,w.transform=M,w.untransform=l,Object.defineProperty(w,"__esModule",{value:!0})})},{}],317:[function(o,U,H){var w=o("../prototype/is");U.exports=function(f){if(typeof f!="function"||!hasOwnProperty.call(f,"length"))return!1;try{if(typeof f.length!="number"||typeof f.call!="function"||typeof f.apply!="function")return!1}catch{return!1}return!w(f)}},{"../prototype/is":324}],318:[function(o,U,H){var w=o("../value/is"),f=o("../object/is"),M=o("../string/coerce"),T=o("./to-short-string"),e=function(a,n){return a.replace("%v",T(n))};U.exports=function(a,n,r){if(!f(r))throw new TypeError(e(n,a));if(!w(a)){if("default"in r)return r.default;if(r.isOptional)return null}var t=M(r.errorMessage);throw w(t)||(t=n),new TypeError(e(t,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(o,U,H){U.exports=function(w){try{return w.toString()}catch{try{return String(w)}catch{return null}}}},{}],320:[function(o,U,H){var w=o("./safe-to-string"),f=/[\n\r\u2028\u2029]/g;U.exports=function(M){var T=w(M);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(f,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(o,U,H){var w=o("../value/is"),f={object:!0,function:!0,undefined:!0};U.exports=function(M){return w(M)?hasOwnProperty.call(f,typeof M):!1}},{"../value/is":327}],322:[function(o,U,H){var w=o("../lib/resolve-exception"),f=o("./is");U.exports=function(M){return f(M)?M:w(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(o,U,H){var w=o("../function/is"),f=/^\s*class[\s{/}]/,M=Function.prototype.toString;U.exports=function(T){return!(!w(T)||f.test(M.call(T)))}},{"../function/is":317}],324:[function(o,U,H){var w=o("../object/is");U.exports=function(f){if(!w(f))return!1;try{return f.constructor?f.constructor.prototype===f:!1}catch{return!1}}},{"../object/is":321}],325:[function(o,U,H){var w=o("../value/is"),f=o("../object/is"),M=Object.prototype.toString;U.exports=function(T){if(!w(T))return null;if(f(T)){var e=T.toString;if(typeof e!="function"||e===M)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(o,U,H){var w=o("../lib/resolve-exception"),f=o("./is");U.exports=function(M){return f(M)?M:w(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(o,U,H){var w=void 0;U.exports=function(f){return f!==w&&f!==null}},{}],328:[function(o,U,H){(function(w){(function(){var f=o("bit-twiddle"),M=o("dup"),T=o("buffer").Buffer;w.__TYPEDARRAY_POOL||(w.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",r=w.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=M([32,0])),r.BIGUINT64||(r.BIGUINT64=M([32,0])),r.BIGINT64||(r.BIGINT64=M([32,0])),r.BUFFER||(r.BUFFER=M([32,0]));var t=r.DATA,h=r.BUFFER;H.free=function(k){if(T.isBuffer(k))h[f.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var E=k.length||k.byteLength,F=f.log2(E)|0;t[F].push(k)}};function i(S){if(!!S){var k=S.length||S.byteLength,E=f.log2(k);t[E].push(S)}}function s(S){i(S.buffer)}H.freeUint8=H.freeUint16=H.freeUint32=H.freeBigUint64=H.freeInt8=H.freeInt16=H.freeInt32=H.freeBigInt64=H.freeFloat32=H.freeFloat=H.freeFloat64=H.freeDouble=H.freeUint8Clamped=H.freeDataView=s,H.freeArrayBuffer=i,H.freeBuffer=function(k){h[f.log2(k.length)].push(k)},H.malloc=function(k,E){if(E===void 0||E==="arraybuffer")return y(k);switch(E){case"uint8":return d(k);case"uint16":return p(k);case"uint32":return c(k);case"int8":return m(k);case"int16":return l(k);case"int32":return x(k);case"float":case"float32":return u(k);case"double":case"float64":return A(k);case"uint8_clamped":return _(k);case"bigint64":return b(k);case"biguint64":return g(k);case"buffer":return C(k);case"data":case"dataview":return v(k);default:return null}return null};function y(k){var k=f.nextPow2(k),E=f.log2(k),F=t[E];return F.length>0?F.pop():new ArrayBuffer(k)}H.mallocArrayBuffer=y;function d(S){return new Uint8Array(y(S),0,S)}H.mallocUint8=d;function p(S){return new Uint16Array(y(2*S),0,S)}H.mallocUint16=p;function c(S){return new Uint32Array(y(4*S),0,S)}H.mallocUint32=c;function m(S){return new Int8Array(y(S),0,S)}H.mallocInt8=m;function l(S){return new Int16Array(y(2*S),0,S)}H.mallocInt16=l;function x(S){return new Int32Array(y(4*S),0,S)}H.mallocInt32=x;function u(S){return new Float32Array(y(4*S),0,S)}H.mallocFloat32=H.mallocFloat=u;function A(S){return new Float64Array(y(8*S),0,S)}H.mallocFloat64=H.mallocDouble=A;function _(S){return e?new Uint8ClampedArray(y(S),0,S):d(S)}H.mallocUint8Clamped=_;function g(S){return a?new BigUint64Array(y(8*S),0,S):null}H.mallocBigUint64=g;function b(S){return n?new BigInt64Array(y(8*S),0,S):null}H.mallocBigInt64=b;function v(S){return new DataView(y(S),0,S)}H.mallocDataView=v;function C(S){S=f.nextPow2(S);var k=f.log2(S),E=h[k];return E.length>0?E.pop():new T(S)}H.mallocBuffer=C,H.clearCache=function(){for(var k=0;k<32;++k)r.UINT8[k].length=0,r.UINT16[k].length=0,r.UINT32[k].length=0,r.INT8[k].length=0,r.INT16[k].length=0,r.INT32[k].length=0,r.FLOAT[k].length=0,r.DOUBLE[k].length=0,r.BIGUINT64[k].length=0,r.BIGINT64[k].length=0,r.UINT8C[k].length=0,t[k].length=0,h[k].length=0}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(o,U,H){var w=/[\'\"]/;U.exports=function(M){return M?(w.test(M.charAt(0))&&(M=M.substr(1)),w.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},{}],330:[function(o,U,H){U.exports=function(f,M,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var n=T[e];for(var r in n)if(!(M[r]!==void 0&&!Array.isArray(M[r])&&f[r]===M[r])&&r in M){var t;if(n[r]===!0)t=M[r];else{if(n[r]===!1)continue;if(typeof n[r]=="function"&&(t=n[r](M[r],f,M),t===void 0))continue}f[r]=t}}return f}},{}],331:[function(o,U,H){(function(w){(function(){U.exports=f;function f(T,e){if(M("noDeprecation"))return T;var a=!1;function n(){if(!a){if(M("throwDeprecation"))throw new Error(e);M("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return n}function M(T){try{if(!w.localStorage)return!1}catch{return!1}var e=w.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(o,U,H){var w=o("get-canvas-context");U.exports=function(M){return w("webgl",M)}},{"get-canvas-context":194}],333:[function(o,U,H){var w=o("../main"),f=o("object-assign"),M=w.instance();function T(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(y,d){if(typeof y=="string"){var p=y.match(a);return p?p[0]:""}var c=this._validateYear(y),m=y.month(),l=""+this.toChineseMonth(c,m);return d&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(c,m)&&(l+="i"),l},monthNames:function(y){if(typeof y=="string"){var d=y.match(n);return d?d[0]:""}var p=this._validateYear(y),c=y.month(),m=this.toChineseMonth(p,c),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][m-1];return this.isIntercalaryMonth(p,c)&&(l="\u95F0"+l),l},monthNamesShort:function(y){if(typeof y=="string"){var d=y.match(r);return d?d[0]:""}var p=this._validateYear(y),c=y.month(),m=this.toChineseMonth(p,c),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][m-1];return this.isIntercalaryMonth(p,c)&&(l="\u95F0"+l),l},parseMonth:function(y,d){y=this._validateYear(y);var p=parseInt(d),c;if(isNaN(p))d[0]==="\u95F0"&&(c=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),p=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var m=d[d.length-1];c=m==="i"||m==="I"}var l=this.toMonthIndex(y,p,c);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(y,d){if(y.year&&(y=y.year()),typeof y!="number"||y<1888||y>2111)throw d.replace(/\{0\}/,this.local.name);return y},toMonthIndex:function(y,d,p){var c=this.intercalaryMonth(y),m=p&&d!==c;if(m||d<1||d>12)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return c?!p&&d<=c?l=d-1:l=d:l=d-1,l},toChineseMonth:function(y,d){y.year&&(y=y.year(),d=y.month());var p=this.intercalaryMonth(y),c=p?12:11;if(d<0||d>c)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return p?d<p?m=d+1:m=d:m=d+1,m},intercalaryMonth:function(y){y=this._validateYear(y);var d=t[y-t[0]],p=d>>13;return p},isIntercalaryMonth:function(y,d){y.year&&(y=y.year(),d=y.month());var p=this.intercalaryMonth(y);return!!p&&p===d},leapYear:function(y){return this.intercalaryMonth(y)!==0},weekOfYear:function(y,d,p){var c=this._validateYear(y,w.local.invalidyear),m=h[c-h[0]],l=m>>9&4095,x=m>>5&15,u=m&31,A;A=M.newDate(l,x,u),A.add(4-(A.dayOfWeek()||7),"d");var _=this.toJD(y,d,p)-A.toJD();return 1+Math.floor(_/7)},monthsInYear:function(y){return this.leapYear(y)?13:12},daysInMonth:function(y,d){y.year&&(d=y.month(),y=y.year()),y=this._validateYear(y);var p=t[y-t[0]],c=p>>13,m=c?12:11;if(d>m)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=p&1<<12-d?30:29;return l},weekDay:function(y,d,p){return(this.dayOfWeek(y,d,p)||7)<6},toJD:function(y,d,p){var c=this._validate(y,l,p,w.local.invalidDate);y=this._validateYear(c.year()),d=c.month(),p=c.day();var m=this.isIntercalaryMonth(y,d),l=this.toChineseMonth(y,d),x=s(y,l,p,m);return M.toJD(x.year,x.month,x.day)},fromJD:function(y){var d=M.fromJD(y),p=i(d.year(),d.month(),d.day()),c=this.toMonthIndex(p.year,p.month,p.isIntercalary);return this.newDate(p.year,c,p.day)},fromString:function(y){var d=y.match(e),p=this._validateYear(+d[1]),c=+d[2],m=!!d[3],l=this.toMonthIndex(p,c,m),x=+d[4];return this.newDate(p,l,x)},add:function(y,d,p){var c=y.year(),m=y.month(),l=this.isIntercalaryMonth(c,m),x=this.toChineseMonth(c,m),u=Object.getPrototypeOf(T.prototype).add.call(this,y,d,p);if(p==="y"){var A=u.year(),_=u.month(),g=this.isIntercalaryMonth(A,x),b=l&&g?this.toMonthIndex(A,x,!0):this.toMonthIndex(A,x,!1);b!==_&&u.month(b)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,n=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;w.calendars.chinese=T;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function i(y,d,p,c){var m,l;if(typeof y=="object")m=y,l=d||{};else{var x=typeof y=="number"&&y>=1888&&y<=2111;if(!x)throw new Error("Solar year outside range 1888-2111");var u=typeof d=="number"&&d>=1&&d<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var A=typeof p=="number"&&p>=1&&p<=31;if(!A)throw new Error("Solar day outside range 1 - 31");m={year:y,month:d,day:p},l=c||{}}var _=h[m.year-h[0]],g=m.year<<9|m.month<<5|m.day;l.year=g>=_?m.year:m.year-1,_=h[l.year-h[0]];var b=_>>9&4095,v=_>>5&15,C=_&31,S,k=new Date(b,v-1,C),E=new Date(m.year,m.month-1,m.day);S=Math.round((E-k)/(24*3600*1e3));var F=t[l.year-t[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(S<D)break;S-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+S,l}function s(y,d,p,c,m){var l,x;if(typeof y=="object")x=y,l=d||{};else{var u=typeof y=="number"&&y>=1888&&y<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var A=typeof d=="number"&&d>=1&&d<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var _=typeof p=="number"&&p>=1&&p<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var g;typeof c=="object"?(g=!1,l=c):(g=!!c,l=m||{}),x={year:y,month:d,day:p,isIntercalary:g}}var b;b=x.day-1;var v=t[x.year-t[0]],C=v>>13,S;C&&(x.month>C||x.isIntercalary)?S=x.month:S=x.month-1;for(var k=0;k<S;k++){var E=v&1<<12-k?30:29;b+=E}var F=h[x.year-h[0]],I=F>>9&4095,D=F>>5&15,R=F&31,O=new Date(I,D-1,R+b);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.coptic=M},{"../main":347,"object-assign":247}],335:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),400},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return(r.day()+1)%8},weekDay:function(e,a,n){var r=this.dayOfWeek(e,a,n);return r>=2&&r<=6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{century:T[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return e=r.year()+(r.year()<0?1:0),a=r.month(),n=r.day(),n+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-(n-1)*32+1;return this.newDate(a<=0?a-1:a,n,r)}});var T={20:"Fruitbat",21:"Anchovy"};w.calendars.discworld=M},{"../main":347,"object-assign":247}],336:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.ethiopian=M},{"../main":347,"object-assign":247}],337:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,w.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e<=0?e+1:e,h=this.jdEpoch+this._delay1(t)+this._delay2(t)+n+1;if(a<7){for(var i=7;i<=this.monthsInYear(e);i++)h+=this.daysInMonth(e,i);for(var i=1;i<a;i++)h+=this.daysInMonth(e,i)}else for(var i=7;i<a;i++)h+=this.daysInMonth(e,i);return h},_delay1:function(e){var a=Math.floor((235*e-234)/19),n=12084+13753*a,r=a*29+Math.floor(n/25920);return T(3*(r+1),7)<3&&r++,r},_delay2:function(e){var a=this._delay1(e-1),n=this._delay1(e),r=this._delay1(e+1);return r-n===356?2:n-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var n=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,n,this.daysInMonth(a,n));)n++;var r=e-this.toJD(a,n,1)+1;return this.newDate(a,n,r)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.hebrew=M},{"../main":347,"object-assign":247}],338:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),n=T-this.toJD(e,a,1)+1;return this.newDate(e,a,n)}}),w.calendars.islamic=M},{"../main":347,"object-assign":247}],339:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,n=Math.floor((a-122.1)/365.25),r=Math.floor(365.25*n),t=Math.floor((a-r)/30.6001),h=t-Math.floor(t<14?1:13),i=n-Math.floor(h>2?4716:4715),s=a-r-Math.floor(30.6001*t);return i<=0&&i--,this.newDate(i,h,s)}}),w.calendars.julian=M},{"../main":347,"object-assign":247}],340:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),!1},formatYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear);a=n.year();var r=Math.floor(a/400);a=a%400,a+=a<0?400:0;var t=Math.floor(a/20);return r+"."+t+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var n=0,r=0;r<a.length;r++){var t=parseInt(a[r],10);if(Math.abs(t)>19||r>0&&t<0)throw"Invalid Mayan year";n=n*20+t}return n},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),18},weekOfYear:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),360},daysInMonth:function(a,n){return this._validate(a,n,this.minDay,w.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()},weekDay:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),!0},extraInfo:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate),h=t.toJD(),i=this._toHaab(h),s=this._toTzolkin(h);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(a){a-=this.jdEpoch;var n=T(a+8+(18-1)*20,365);return[Math.floor(n/20)+1,T(n,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()+t.month()*20+t.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var n=Math.floor(a/360);a=a%360,a+=a<0?360:0;var r=Math.floor(a/20),t=a%20;return this.newDate(n,r,t)}});function T(a,n){return a-n*Math.floor(a/n)}function e(a,n){return T(a-1,n)+1}w.calendars.mayan=M},{"../main":347,"object-assign":247}],341:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar;var T=w.instance("gregorian");f(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidMonth),t=r.year();t<0&&t++;for(var h=r.day(),i=1;i<r.month();i++)h+=this.daysPerMonth[i-1];return h+T.toJD(t+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var n=e-Math.floor(this.toJD(a,1,1)+.5)+1,r=1;n>this.daysInMonth(a,r);)n-=this.daysInMonth(a,r),r++;return this.newDate(a,r,n)}}),w.calendars.nanakshahi=M},{"../main":347,"object-assign":247}],342:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,n=this.minMonth;n<=12;n++)a+=this.NEPALI_CALENDAR_DATA[T][n];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,w.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);T=n.year(),e=n.month(),a=n.day();var r=w.instance(),t=0,h=e,i=T;this._createMissingCalendarData(T);var s=T-(h>9||h===9&&a>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(e!==9&&(t=a,h--);h!==9;)h<=0&&(h=12,i--),t+=this.NEPALI_CALENDAR_DATA[i][h],h--;return e===9?(t+=a-this.NEPALI_CALENDAR_DATA[i][0],t<0&&(t+=r.daysInYear(s))):t+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],r.newDate(s,1,1).add(t,"d").toJD()},fromJD:function(T){var e=w.instance(),a=e.fromJD(T),n=a.year(),r=a.dayOfYear(),t=n+56;this._createMissingCalendarData(t);for(var h=9,i=this.NEPALI_CALENDAR_DATA[t][0],s=this.NEPALI_CALENDAR_DATA[t][h]-i+1;r>s;)h++,h>12&&(h=1,t++),s+=this.NEPALI_CALENDAR_DATA[t][h];var y=this.NEPALI_CALENDAR_DATA[t][h]-(s-r);return this.newDate(t,h,y)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),w.calendars.nepali=M},{"../main":347,"object-assign":247}],343:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e-(e>=0?474:473),h=474+T(t,2820);return n+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((h*682-110)/2816)+(h-1)*365+Math.floor(t/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),n=Math.floor(a/1029983),r=T(a,1029983),t=2820;if(r!==1029982){var h=Math.floor(r/366),i=T(r,366);t=Math.floor((2134*h+2816*i+2815)/1028522)+h+1}var s=t+2820*n+474;s=s<=0?s-1:s;var y=e-this.toJD(s,1,1)+1,d=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),p=e-this.toJD(s,d,1)+1;return this.newDate(s,d,p)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.persian=M,w.calendars.jalali=M},{"../main":347,"object-assign":247}],344:[function(o,U,H){var w=o("../main"),f=o("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),w.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(o,U,H){var w=o("../main"),f=o("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),w.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(o,U,H){var w=o("../main"),f=o("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,n=1;n<=12;n++)a+=this.daysInMonth(e,n);return a},daysInMonth:function(e,a){for(var n=this._validate(e,a,this.minDay,w.local.invalidMonth),r=n.toJD()-24e5+.5,t=0,h=0;h<T.length;h++){if(T[h]>r)return T[t]-T[t-1];t++}return 30},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate),t=12*(r.year()-1)+r.month()-15292,h=r.day()+T[t-1]-1;return h+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,n=0,r=0;r<T.length&&!(T[r]>a);r++)n++;var t=n+15292,h=Math.floor((t-1)/12),i=h+1,s=t-12*h,y=a-T[n-1]+1;return this.newDate(i,s,y)},isValid:function(e,a,n){var r=w.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=e.year!=null?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,a,n,r){var t=w.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw r.replace(/\{0\}/,this.local.name);return t}}),w.calendars.ummalqura=M;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(o,U,H){var w=o("object-assign");function f(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}w(f.prototype,{instance:function(r,t){r=(r||"gregorian").toLowerCase(),t=t||"";var h=this._localCals[r+"-"+t];if(!h&&this.calendars[r]&&(h=new this.calendars[r](t),this._localCals[r+"-"+t]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return h},newDate:function(r,t,h,i,s){return i=(r!=null&&r.year?r.calendar():typeof i=="string"?this.instance(i,s):i)||this.instance(),i.newDate(r,t,h)},substituteDigits:function(r){return function(t){return(t+"").replace(/[0-9]/g,function(h){return r[h]})}},substituteChineseDigits:function(r,t){return function(h){for(var i="",s=0;h>0;){var y=h%10;i=(y===0?"":r[y]+t[s])+i,s++,h=Math.floor(h/10)}return i.indexOf(r[1]+t[1])===0&&(i=i.substr(1)),i||r[0]}}});function M(r,t,h,i){if(this._calendar=r,this._year=t,this._month=h,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(r,t){return r=""+r,"000000".substring(0,t-r.length)+r}w(M.prototype,{newDate:function(r,t,h){return this._calendar.newDate(r==null?this:r,t,h)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,t,h){if(!this._calendar.isValid(r,t,h))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=t,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,t){return this._calendar.add(this,r,t)},set:function(r,t){return this._calendar.set(this,r,t)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var t=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}w(e.prototype,{_validateLevel:0,newDate:function(r,t,h){return r==null?this.today():(r.year&&(this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),h=r.day(),t=r.month(),r=r.year()),new M(this,r,t,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+T(Math.abs(t.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(r,t){var h=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(r,t){var h=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,h,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),h},daysInYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(r,t,h){var i=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,t,h){var i=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(r,t,h){return this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(r,t,h){return this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,t,h),t,h)},_add:function(r,t,h){if(this._validateLevel++,h==="d"||h==="w"){var i=r.toJD()+t*(h==="w"?this.daysInWeek():1),s=r.calendar().fromJD(i);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var y=r.year()+(h==="y"?t:0),d=r.monthOfYear()+(h==="m"?t:0),s=r.day(),p=function(l){for(;d<l.minMonth;)y--,d+=l.monthsInYear(y);for(var x=l.monthsInYear(y);d>x-1+l.minMonth;)y++,d-=x,x=l.monthsInYear(y)};h==="y"?(r.month()!==this.fromMonthOfYear(y,d)&&(d=this.newDate(y,r.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(y)),s=Math.min(s,this.daysInMonth(y,this.fromMonthOfYear(y,d)))):h==="m"&&(p(this),s=Math.min(s,this.daysInMonth(y,this.fromMonthOfYear(y,d))));var c=[y,this.fromMonthOfYear(y,d),s];return this._validateLevel--,c}catch(m){throw this._validateLevel--,m}},_correctAdd:function(r,t,h,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||r.year()>0!=t[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],y=h<0?-1:1;t=this._add(r,h*s[0]+y*s[1],s[2])}return r.date(t[0],t[1],t[2])},set:function(r,t,h){this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var i=h==="y"?t:r.year(),s=h==="m"?t:r.month(),y=h==="d"?t:r.day();return(h==="y"||h==="m")&&(y=Math.min(y,this.daysInMonth(i,s))),r.date(i,s,y)},isValid:function(r,t,h){this._validateLevel++;var i=this.hasYearZero||r!==0;if(i){var s=this.newDate(r,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(s)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(s)}return this._validateLevel--,i},toJSDate:function(r,t,h){var i=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(r){return this.fromJD(n.instance().fromJSDate(r).toJD())},_validate:function(r,t,h,i){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,t,h))throw i.replace(/\{0\}/,this.local.name);var s=this.newDate(r,t,h);return this._validateLevel--,s}catch(y){throw this._validateLevel--,y}}});function a(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a.prototype=new e,w(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var t=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),h=t.year()+(t.year()<0?1:0);return h%4===0&&(h%100!==0||h%400===0)},weekOfYear:function(r,t,h){var i=this.newDate(r,t,h);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(r,t){var h=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(r,t,h){return(this.dayOfWeek(r,t,h)||7)<6},toJD:function(r,t,h){var i=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);r=i.year(),t=i.month(),h=i.day(),r<0&&r++,t<3&&(t+=12,r--);var s=Math.floor(r/100),y=2-s+Math.floor(s/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(t+1))+h+y-1524.5},fromJD:function(r){var t=Math.floor(r+.5),h=Math.floor((t-186721625e-2)/36524.25);h=t+1+h-Math.floor(h/4);var i=h+1524,s=Math.floor((i-122.1)/365.25),y=Math.floor(365.25*s),d=Math.floor((i-y)/30.6001),p=i-y-Math.floor(d*30.6001),c=d-(d>13.5?13:1),m=s-(c>2.5?4716:4715);return m<=0&&m--,this.newDate(m,c,p)},toJSDate:function(r,t,h){var i=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),s=new Date(i.year(),i.month()-1,i.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var n=U.exports=new f;n.cdate=M,n.baseCalendar=e,n.calendars.gregorian=a},{"object-assign":247}],348:[function(o,U,H){var w=o("object-assign"),f=o("./main");w(f.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),f.local=f.regionalOptions[""],w(f.cdate.prototype,{formatDate:function(M,T){return typeof M!="string"&&(T=M,M=""),this._calendar.formatDate(M||"",this,T)}}),w(f.baseCalendar.prototype,{UNIX_EPOCH:f.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:f.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,T,e){if(typeof M!="string"&&(e=T,T=M,M=""),!T)return"";if(T.calendar()!==this)throw f.local.invalidFormat||f.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.monthNumbers||this.local.monthNumbers,t=e.monthNamesShort||this.local.monthNamesShort,h=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var i=function(_,g){for(var b=1;A+b<M.length&&M.charAt(A+b)===_;)b++;return A+=b-1,Math.floor(b/(g||1))>1},s=function(_,g,b,v){var C=""+g;if(i(_,v))for(;C.length<b;)C="0"+C;return C},y=function(_,g,b,v){return i(_)?v[g]:b[g]},d=this,p=function(_){return typeof r=="function"?r.call(d,_,i("m")):l(s("m",_.month(),2))},c=function(_,g){return g?typeof h=="function"?h.call(d,_):h[_.month()-d.minMonth]:typeof t=="function"?t.call(d,_):t[_.month()-d.minMonth]},m=this.local.digits,l=function(_){return e.localNumbers&&m?m(_):_},x="",u=!1,A=0;A<M.length;A++)if(u)M.charAt(A)==="'"&&!i("'")?u=!1:x+=M.charAt(A);else switch(M.charAt(A)){case"d":x+=l(s("d",T.day(),2));break;case"D":x+=y("D",T.dayOfWeek(),a,n);break;case"o":x+=s("o",T.dayOfYear(),3);break;case"w":x+=s("w",T.weekOfYear(),2);break;case"m":x+=p(T);break;case"M":x+=c(T,i("M"));break;case"y":x+=i("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":i("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?x+="'":u=!0;break;default:x+=M.charAt(A)}return x},parseDate:function(M,T,e){if(T==null)throw f.local.invalidArguments||f.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;M=M||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,r=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,h=e.monthNumbers||this.local.monthNumbers,i=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,y=-1,d=-1,p=-1,c=-1,m=-1,l=!1,x=!1,u=function(I,D){for(var R=1;k+R<M.length&&M.charAt(k+R)===I;)R++;return k+=R-1,Math.floor(R/(D||1))>1},A=function(I,D){var R=u(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+O+"}"),B=T.substring(S).match(z);if(!B)throw(f.local.missingNumberAt||f.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=B[0].length,parseInt(B[0],10)},_=this,g=function(){if(typeof h=="function"){u("m");var I=h.call(_,T.substring(S));return S+=I.length,I}return A("m")},b=function(I,D,R,O){for(var z=u(I,O)?R:D,B=0;B<z.length;B++)if(T.substr(S,z[B].length).toLowerCase()===z[B].toLowerCase())return S+=z[B].length,B+_.minMonth;throw(f.local.unknownNameAt||f.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},v=function(){if(typeof s=="function"){var I=u("M")?s.call(_,T.substring(S)):i.call(_,T.substring(S));return S+=I.length,I}return b("M",i,s)},C=function(){if(T.charAt(S)!==M.charAt(k))throw(f.local.unexpectedLiteralAt||f.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<M.length;k++)if(x)M.charAt(k)==="'"&&!u("'")?x=!1:C();else switch(M.charAt(k)){case"d":c=A("d");break;case"D":b("D",n,r);break;case"o":m=A("o");break;case"w":A("w");break;case"m":p=g();break;case"M":p=v();break;case"y":var E=k;l=!u("y",2),k=E,d=A("y",2);break;case"Y":d=A("Y",2);break;case"J":y=A("J")+.5,T.charAt(S)==="."&&(S++,A("J"));break;case"@":y=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":y=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=T.length;break;case"'":u("'")?C():x=!0;break;default:C()}if(S<T.length)throw f.local.unexpectedText||f.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&l&&(d+=a===-1?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),typeof p=="string"&&(p=t.call(this,d,p)),m>-1){p=1,c=m;for(var F=this.daysInMonth(d,p);c>F;F=this.daysInMonth(d,p))p++,c-=F}return y>-1?this.fromJD(y):this.newDate(d,p,c)},determineDate:function(M,T,e,a,n){e&&typeof e!="object"&&(n=a,a=e,e=null),typeof a!="string"&&(n=a,a="");var r=this,t=function(h){try{return r.parseDate(a,h,n)}catch{}h=h.toLowerCase();for(var i=(h.match(/^c/)&&e?e.newDate():null)||r.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,y=s.exec(h);y;)i.add(parseInt(y[1],10),y[2]||"d"),y=s.exec(h);return i};return T=T?T.newDate():null,M=M==null?T:typeof M=="string"?t(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?T:r.today().add(M,"d"):r.newDate(M),M}})},{"./main":347,"object-assign":247}],349:[function(o,U,H){U.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(o,U,H){var w=o("./arrow_paths"),f=o("../../plots/font_attributes"),M=o("../../plots/cartesian/constants"),T=o("../../plot_api/plot_template").templatedArray;o("../../constants/axis_placeable_objects"),U.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:f({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:f({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("./draw").draw;U.exports=function(n){var r=n._fullLayout,t=w.filterVisible(r.annotations);if(t.length&&n._fullData.length)return w.syncOrAsync([M,T],n)};function T(a){var n=a._fullLayout;w.filterVisible(n.annotations).forEach(function(r){var t=f.getFromId(a,r.xref),h=f.getFromId(a,r.yref),i=f.getRefType(r.xref),s=f.getRefType(r.yref);r._extremes={},i==="range"&&e(r,t),s==="range"&&e(r,h)})}function e(a,n){var r=n._id,t=r.charAt(0),h=a[t],i=a["a"+t],s=a[t+"ref"],y=a["a"+t+"ref"],d=a["_"+t+"padplus"],p=a["_"+t+"padminus"],c={x:1,y:-1}[t]*a[t+"shift"],m=3*a.arrowsize*a.arrowwidth||0,l=m+c,x=m-c,u=3*a.startarrowsize*a.arrowwidth||0,A=u+c,_=u-c,g;if(y===s){var b=f.findExtremes(n,[n.r2c(h)],{ppadplus:l,ppadminus:x}),v=f.findExtremes(n,[n.r2c(i)],{ppadplus:Math.max(d,A),ppadminus:Math.max(p,_)});g={min:[b.min[0],v.min[0]],max:[b.max[0],v.max[0]]}}else A=i?A+i:A,_=i?_-i:_,g=f.findExtremes(n,[n.r2c(h)],{ppadplus:Math.max(d,l,A),ppadminus:Math.max(p,x,_)});a._extremes[r]=g}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=o("../../plot_api/plot_template").arrayEditor;U.exports={hasClickToShow:T,onClick:e};function T(r,t){var h=a(r,t);return h.on.length>0||h.explicitOff.length>0}function e(r,t){var h=a(r,t),i=h.on,s=h.off.concat(h.explicitOff),y={},d=r._fullLayout.annotations,p,c;if(!!(i.length||s.length)){for(p=0;p<i.length;p++)c=M(r.layout,"annotations",d[i[p]]),c.modifyItem("visible",!0),w.extendFlat(y,c.getUpdateObj());for(p=0;p<s.length;p++)c=M(r.layout,"annotations",d[s[p]]),c.modifyItem("visible",!1),w.extendFlat(y,c.getUpdateObj());return f.call("update",r,{},y)}}function a(r,t){var h=r._fullLayout.annotations,i=[],s=[],y=[],d=(t||[]).length,p,c,m,l,x,u,A,_;for(p=0;p<h.length;p++)if(m=h[p],l=m.clicktoshow,l){for(c=0;c<d;c++)if(x=t[c],u=x.xaxis,A=x.yaxis,u._id===m.xref&&A._id===m.yref&&u.d2r(x.x)===n(m._xclick,u)&&A.d2r(x.y)===n(m._yclick,A)){m.visible?l==="onout"?_=s:_=y:_=i,_.push(p);break}c===d&&m.visible&&l==="onout"&&s.push(p)}return{on:i,off:s,explicitOff:y}}function n(r,t){return t.type==="log"?t.l2r(r):t.d2r(r)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(o,U,H){var w=o("../../lib"),f=o("../color");U.exports=function(T,e,a,n){n("opacity");var r=n("bgcolor"),t=n("bordercolor"),h=f.opacity(t);n("borderpad");var i=n("borderwidth"),s=n("showarrow");n("text",s?" ":a._dfltTitle.annotation),n("textangle"),w.coerceFont(n,"font",a.font),n("width"),n("align");var y=n("height");if(y&&n("valign"),s){var d=n("arrowside"),p,c;d.indexOf("end")!==-1&&(p=n("arrowhead"),c=n("arrowsize")),d.indexOf("start")!==-1&&(n("startarrowhead",p),n("startarrowsize",c)),n("arrowcolor",h?e.bordercolor:f.defaultLine),n("arrowwidth",(h&&i||1)*2),n("standoff"),n("startstandoff")}var m=n("hovertext"),l=a.hoverlabel||{};if(m){var x=n("hoverlabel.bgcolor",l.bgcolor||(f.opacity(r)?f.rgb(r):f.defaultLine)),u=n("hoverlabel.bordercolor",l.bordercolor||f.contrast(x));w.coerceFont(n,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||u})}n("captureevents",!!m)}},{"../../lib":515,"../color":367}],354:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib/to_log_range");U.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!(r||t))return;var h=T._fullLayout.annotations,i=e._id.charAt(0),s,y;function d(c){var m=s[c],l=null;r?l=f(m,e.range):l=Math.pow(10,m),w(l)||(l=null),n(y+c,l)}for(var p=0;p<h.length;p++)s=h[p],y="annotations["+p+"].",s[i+"ref"]===e._id&&d(i),s["a"+i+"ref"]===e._id&&d("a"+i)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/array_container_defaults"),T=o("./common_defaults"),e=o("./attributes");U.exports=function(r,t){M(r,t,{name:"annotations",handleItemDefaults:a})};function a(n,r,t){function h(C,S){return w.coerce(n,r,e,C,S)}var i=h("visible"),s=h("clicktoshow");if(!!(i||s)){T(n,r,t,h);for(var y=r.showarrow,d=["x","y"],p=[-10,-30],c={_fullLayout:t},m=0;m<2;m++){var l=d[m],x=f.coerceRef(n,r,c,l,"","paper");if(x!=="paper"){var u=f.getFromId(c,x);u._annIndices.push(r._index)}if(f.coercePosition(r,c,h,x,l,.5),y){var A="a"+l,_=f.coerceRef(n,r,c,A,"pixel",["pixel","paper"]);_!=="pixel"&&_!==x&&(_=r[A]="pixel");var g=_==="pixel"?p[m]:.4;f.coercePosition(r,c,h,_,A,g)}h(l+"anchor"),h(l+"shift")}if(w.noneOrAll(n,r,["x","y"]),y&&w.noneOrAll(n,r,["ax","ay"]),s){var b=h("xclick"),v=h("yclick");r._xclick=b===void 0?r.x:f.cleanPosition(b,c,r.xref),r._yclick=v===void 0?r.y:f.cleanPosition(v,c,r.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../plots/plots"),T=o("../../lib"),e=T.strTranslate,a=o("../../plots/cartesian/axes"),n=o("../color"),r=o("../drawing"),t=o("../fx"),h=o("../../lib/svg_text_utils"),i=o("../../lib/setcursor"),s=o("../dragelement"),y=o("../../plot_api/plot_template").arrayEditor,d=o("./draw_arrow_head");U.exports={draw:p,drawOne:c,drawRaw:l};function p(x){var u=x._fullLayout;u._infolayer.selectAll(".annotation").remove();for(var A=0;A<u.annotations.length;A++)u.annotations[A].visible&&c(x,A);return M.previousPromises(x)}function c(x,u){var A=x._fullLayout,_=A.annotations[u]||{},g=a.getFromId(x,_.xref),b=a.getFromId(x,_.yref);g&&g.setScale(),b&&b.setScale(),l(x,_,u,!1,g,b)}function m(x,u,A,_,g){var b=g[A],v=g[A+"ref"],C=A.indexOf("y")!==-1,S=a.getRefType(v)==="domain",k=C?_.h:_.w;return x?S?b+(C?-u:u)/x._length:x.p2r(x.r2p(b)+u):b+(C?-u:u)/k}function l(x,u,A,_,g,b){var v=x._fullLayout,C=x._fullLayout._size,S=x._context.edits,k,E;_?(k="annotation-"+_,E=_+".annotations"):(k="annotation",E="annotations");var F=y(x.layout,E,u),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;v._infolayer.selectAll("."+k+'[data-index="'+A+'"]').remove();var O="clip"+v._uid+"_ann"+A;if(!u._input||u.visible===!1){w.selectAll("#"+O).remove();return}var z={x:{},y:{}},B=+u.textangle||0,G=v._infolayer.append("g").classed(k,!0).attr("data-index",String(A)).style("opacity",u.opacity),Q=G.append("g").classed("annotation-text-g",!0),X=S[u.showarrow?"annotationTail":"annotationPosition"],j=u.captureevents||S.annotationText||X;function re(oe){var be={index:A,annotation:u._input,fullAnnotation:u,event:oe};return _&&(be.subplotId=_),be}var ue=Q.append("g").style("pointer-events",j?"all":null).call(i,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",re(w.event))});u.hovertext&&ue.on("mouseover",function(){var oe=u.hoverlabel,be=oe.font,ce=this.getBoundingClientRect(),de=x.getBoundingClientRect();t.loneHover({x0:ce.left-de.left,x1:ce.right-de.left,y:(ce.top+ce.bottom)/2-de.top,text:u.hovertext,color:oe.bgcolor,borderColor:oe.bordercolor,fontFamily:be.family,fontSize:be.size,fontColor:be.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:x})}).on("mouseout",function(){t.loneUnhover(v._hoverlayer.node())});var K=u.borderwidth,te=u.borderpad,Y=K+te,V=ue.append("rect").attr("class","bg").style("stroke-width",K+"px").call(n.stroke,u.bordercolor).call(n.fill,u.bgcolor),ee=u.width||u.height,ne=v._topclips.selectAll("#"+O).data(ee?[0]:[]);ne.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),ne.exit().remove();var Z=u.font,q=v._meta?T.templateString(u.text,v._meta):u.text,ie=ue.append("text").classed("annotation-text",!0).text(q);function se(oe){return oe.call(r.font,Z).attr({"text-anchor":{left:"start",right:"end"}[u.align]||"middle"}),h.convertToTspans(oe,x,ae),oe}function ae(){var oe=ie.selectAll("a");if(oe.size()===1&&oe.text()===ie.text()){var be=ue.insert("a",":first-child").attr({"xlink:xlink:href":oe.attr("xlink:href"),"xlink:xlink:show":oe.attr("xlink:show")}).style({cursor:"pointer"});be.node().appendChild(V.node())}var ce=ue.select(".annotation-text-math-group"),de=!ce.empty(),ye=r.bBox((de?ce:ie).node()),ge=ye.width,me=ye.height,Me=u.width||ge,Le=u.height||me,Oe=Math.round(Me+2*Y),_e=Math.round(Le+2*Y);function Ee(ar,rr){return rr==="auto"&&(ar<1/3?rr="left":ar>2/3?rr="right":rr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[rr]}for(var Ze=!1,Ge=["x","y"],Fe=0;Fe<Ge.length;Fe++){var Re=Ge[Fe],We=u[Re+"ref"]||Re,xt=u["a"+Re+"ref"],Nt={x:g,y:b}[Re],tr=(B+(Re==="x"?0:-90))*Math.PI/180,Vt=Oe*Math.cos(tr),Pt=_e*Math.sin(tr),$t=Math.abs(Vt)+Math.abs(Pt),Ut=u[Re+"anchor"],Lt=u[Re+"shift"]*(Re==="x"?1:-1),Ye=z[Re],ot,Ve,Ae,He,Je,tt=a.getRefType(We);if(Nt&&tt!=="domain"){var St=Nt.r2fraction(u[Re]);(St<0||St>1)&&(xt===We?(St=Nt.r2fraction(u["a"+Re]),(St<0||St>1)&&(Ze=!0)):Ze=!0),ot=Nt._offset+Nt.r2p(u[Re]),He=.5}else{var _t=tt==="domain";Re==="x"?(Ae=u[Re],ot=_t?Nt._offset+Nt._length*Ae:ot=C.l+C.w*Ae):(Ae=1-u[Re],ot=_t?Nt._offset+Nt._length*Ae:ot=C.t+C.h*Ae),He=u.showarrow?.5:Ae}if(u.showarrow){Ye.head=ot;var kt=u["a"+Re];if(Je=Vt*Ee(.5,u.xanchor)-Pt*Ee(.5,u.yanchor),xt===We){var jt=a.getRefType(xt);jt==="domain"?(Re==="y"&&(kt=1-kt),Ye.tail=Nt._offset+Nt._length*kt):jt==="paper"?Re==="y"?(kt=1-kt,Ye.tail=C.t+C.h*kt):Ye.tail=C.l+C.w*kt:Ye.tail=Nt._offset+Nt.r2p(kt),Ve=Je}else Ye.tail=ot+kt,Ve=Je+kt;Ye.text=Ye.tail+Je;var Bt=v[Re==="x"?"width":"height"];if(We==="paper"&&(Ye.head=T.constrain(Ye.head,1,Bt-1)),xt==="pixel"){var Wt=-Math.max(Ye.tail-3,Ye.text),Qt=Math.min(Ye.tail+3,Ye.text)-Bt;Wt>0?(Ye.tail+=Wt,Ye.text+=Wt):Qt>0&&(Ye.tail-=Qt,Ye.text-=Qt)}Ye.tail+=Lt,Ye.head+=Lt}else Je=$t*Ee(He,Ut),Ve=Je,Ye.text=ot+Je;Ye.text+=Lt,Je+=Lt,Ve+=Lt,u["_"+Re+"padplus"]=$t/2+Ve,u["_"+Re+"padminus"]=$t/2-Ve,u["_"+Re+"size"]=$t,u["_"+Re+"shift"]=Je}if(Ze){ue.remove();return}var Zt=0,cr=0;if(u.align!=="left"&&(Zt=(Me-ge)*(u.align==="center"?.5:1)),u.valign!=="top"&&(cr=(Le-me)*(u.valign==="middle"?.5:1)),de)ce.select("svg").attr({x:Y+Zt-1,y:Y+cr}).call(r.setClipUrl,ee?O:null,x);else{var Xr=Y+cr-ye.top,vn=Y+Zt-ye.left;ie.call(h.positionText,vn,Xr).call(r.setClipUrl,ee?O:null,x)}ne.select("rect").call(r.setRect,Y,Y,Me,Le),V.call(r.setRect,K/2,K/2,Oe-K,_e-K),ue.call(r.setTranslate,Math.round(z.x.text-Oe/2),Math.round(z.y.text-_e/2)),Q.attr({transform:"rotate("+B+","+z.x.text+","+z.y.text+")"});var en=function(ar,rr){G.selectAll(".annotation-arrow-g").remove();var Kt=z.x.head,Er=z.y.head,st=z.x.tail+ar,et=z.y.tail+rr,vt=z.x.text+ar,pt=z.y.text+rr,Ct=T.rotationXYMatrix(B,vt,pt),Ht=T.apply2DTransform(Ct),Pe=T.apply2DTransform2(Ct),ke=+V.attr("width"),lt=+V.attr("height"),ct=vt-.5*ke,yt=ct+ke,Rt=pt-.5*lt,wt=Rt+lt,Dt=[[ct,Rt,ct,wt],[ct,wt,yt,wt],[yt,wt,yt,Rt],[yt,Rt,ct,Rt]].map(Pe);if(!Dt.reduce(function(at,zt){return at^!!T.segmentsIntersect(Kt,Er,Kt+1e6,Er+1e6,zt[0],zt[1],zt[2],zt[3])},!1)){Dt.forEach(function(at){var zt=T.segmentsIntersect(st,et,Kt,Er,at[0],at[1],at[2],at[3]);zt&&(st=zt.x,et=zt.y)});var Jt=u.arrowwidth,fr=u.arrowcolor,Rr=u.arrowside,Sr=G.append("g").style({opacity:n.opacity(fr)}).classed("annotation-arrow-g",!0),Pr=Sr.append("path").attr("d","M"+st+","+et+"L"+Kt+","+Er).style("stroke-width",Jt+"px").call(n.stroke,n.rgb(fr));if(d(Pr,Rr,u),S.annotationPosition&&Pr.node().parentNode&&!_){var Jr=Kt,ur=Er;if(u.standoff){var wr=Math.sqrt(Math.pow(Kt-st,2)+Math.pow(Er-et,2));Jr+=u.standoff*(st-Kt)/wr,ur+=u.standoff*(et-Er)/wr}var Br=Sr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(st-Jr)+","+(et-ur),transform:e(Jr,ur)}).style("stroke-width",Jt+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),Yr,Dr;s.init({element:Br.node(),gd:x,prepFn:function(){var at=r.getTranslate(ue);Yr=at.x,Dr=at.y,g&&g.autorange&&I(g._name+".autorange",!0),b&&b.autorange&&I(b._name+".autorange",!0)},moveFn:function(at,zt){var qt=Ht(Yr,Dr),hr=qt[0]+at,Ur=qt[1]+zt;ue.call(r.setTranslate,hr,Ur),D("x",m(g,at,"x",C,u)),D("y",m(b,zt,"y",C,u)),u.axref===u.xref&&D("ax",m(g,at,"ax",C,u)),u.ayref===u.yref&&D("ay",m(b,zt,"ay",C,u)),Sr.attr("transform",e(at,zt)),Q.attr({transform:"rotate("+B+","+hr+","+Ur+")"})},doneFn:function(){f.call("_guiRelayout",x,R());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(u.showarrow&&en(0,0),X){var ft;s.init({element:ue.node(),gd:x,prepFn:function(){ft=Q.attr("transform")},moveFn:function(ar,rr){var Kt="pointer";if(u.showarrow)u.axref===u.xref?D("ax",m(g,ar,"ax",C,u)):D("ax",u.ax+ar),u.ayref===u.yref?D("ay",m(b,rr,"ay",C.w,u)):D("ay",u.ay+rr),en(ar,rr);else{if(_)return;var Er,st;if(g)Er=m(g,ar,"x",C,u);else{var et=u._xsize/C.w,vt=u.x+(u._xshift-u.xshift)/C.w-et/2;Er=s.align(vt+ar/C.w,et,0,1,u.xanchor)}if(b)st=m(b,rr,"y",C,u);else{var pt=u._ysize/C.h,Ct=u.y-(u._yshift+u.yshift)/C.h-pt/2;st=s.align(Ct-rr/C.h,pt,0,1,u.yanchor)}D("x",Er),D("y",st),(!g||!b)&&(Kt=s.getCursor(g?.5:Er,b?.5:st,u.xanchor,u.yanchor))}Q.attr({transform:e(ar,rr)+ft}),i(ue,Kt)},clickFn:function(ar,rr){u.captureevents&&x.emit("plotly_clickannotation",re(rr))},doneFn:function(){i(ue),f.call("_guiRelayout",x,R());var ar=document.querySelector(".js-notes-box-panel");ar&&ar.redraw(ar.selectedObj)}})}}S.annotationText?ie.call(h.makeEditable,{delegate:ue,gd:x}).call(se).on("edit",function(oe){u.text=oe,this.call(se),D("text",oe),g&&g.autorange&&I(g._name+".autorange",!0),b&&b.autorange&&I(b._name+".autorange",!0),f.call("_guiRelayout",x,R())}):ie.call(se)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(o,U,H){var w=o("@plotly/d3"),f=o("../color"),M=o("./arrow_paths"),T=o("../../lib"),e=T.strScale,a=T.strRotate,n=T.strTranslate;U.exports=function(t,h,i){var s=t.node(),y=M[i.arrowhead||0],d=M[i.startarrowhead||0],p=(i.arrowwidth||1)*(i.arrowsize||1),c=(i.arrowwidth||1)*(i.startarrowsize||1),m=h.indexOf("start")>=0,l=h.indexOf("end")>=0,x=y.backoff*p+i.standoff,u=d.backoff*c+i.startstandoff,A,_,g,b;if(s.nodeName==="line"){A={x:+t.attr("x1"),y:+t.attr("y1")},_={x:+t.attr("x2"),y:+t.attr("y2")};var v=A.x-_.x,C=A.y-_.y;if(g=Math.atan2(C,v),b=g+Math.PI,x&&u&&x+u>Math.sqrt(v*v+C*C)){Q();return}if(x){if(x*x>v*v+C*C){Q();return}var S=x*Math.cos(g),k=x*Math.sin(g);_.x+=S,_.y+=k,t.attr({x2:_.x,y2:_.y})}if(u){if(u*u>v*v+C*C){Q();return}var E=u*Math.cos(g),F=u*Math.sin(g);A.x-=E,A.y-=F,t.attr({x1:A.x,y1:A.y})}}else if(s.nodeName==="path"){var I=s.getTotalLength(),D="";if(I<x+u){Q();return}var R=s.getPointAtLength(0),O=s.getPointAtLength(.1);g=Math.atan2(R.y-O.y,R.x-O.x),A=s.getPointAtLength(Math.min(u,I)),D="0px,"+u+"px,";var z=s.getPointAtLength(I),B=s.getPointAtLength(I-.1);b=Math.atan2(z.y-B.y,z.x-B.x),_=s.getPointAtLength(Math.max(0,I-x));var G=D?u+x:x;D+=I-G+"px,"+I+"px",t.style("stroke-dasharray",D)}function Q(){t.style("stroke-dasharray","0px,100px")}function X(j,re,ue,K){!j.path||(j.noRotate&&(ue=0),w.select(s.parentNode).append("path").attr({class:t.attr("class"),d:j.path,transform:n(re.x,re.y)+a(ue*180/Math.PI)+e(K)}).style({fill:f.rgb(i.arrowcolor),"stroke-width":0}))}m&&X(d,A,g,c),l&&X(y,_,b,p)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(o,U,H){var w=o("./draw"),f=o("./click");U.exports={moduleType:"component",name:"annotations",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),includeBasePlot:o("../../plots/cartesian/include_components")("annotations"),calcAutorange:o("./calc_autorange"),draw:w.draw,drawOne:w.drawOne,drawRaw:w.drawRaw,hasClickToShow:f.hasClickToShow,onClick:f.onClick,convertCoords:o("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(o,U,H){var w=o("../annotations/attributes"),f=o("../../plot_api/edit_types").overrideAll,M=o("../../plot_api/plot_template").templatedArray;U.exports=f(M("annotation",{visible:w.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:w.xanchor,xshift:w.xshift,yanchor:w.yanchor,yshift:w.yshift,text:w.text,textangle:w.textangle,font:w.font,width:w.width,height:w.height,opacity:w.opacity,align:w.align,valign:w.valign,bgcolor:w.bgcolor,bordercolor:w.bordercolor,borderpad:w.borderpad,borderwidth:w.borderwidth,showarrow:w.showarrow,arrowcolor:w.arrowcolor,arrowhead:w.arrowhead,startarrowhead:w.startarrowhead,arrowside:w.arrowside,arrowsize:w.arrowsize,startarrowsize:w.startarrowsize,arrowwidth:w.arrowwidth,standoff:w.standoff,startstandoff:w.startstandoff,hovertext:w.hovertext,hoverlabel:w.hoverlabel,captureevents:w.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes");U.exports=function(e){for(var a=e.fullSceneLayout,n=a.annotations,r=0;r<n.length;r++)M(n[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function M(T,e){var a=e.fullSceneLayout,n=a.domain,r=e.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},w.extendFlat(T._xa,t),f.setConvert(T._xa),T._xa._offset=r.l+n.x[0]*r.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*r.w*(n.x[1]-n.x[0])},T._ya={},w.extendFlat(T._ya,t),f.setConvert(T._ya),T._ya._offset=r.t+(1-n.y[1])*r.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*r.h*(n.y[1]-n.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/array_container_defaults"),T=o("../annotations/common_defaults"),e=o("./attributes");U.exports=function(r,t,h){M(r,t,{name:"annotations",handleItemDefaults:a,fullLayout:h.fullLayout})};function a(n,r,t,h){function i(d,p){return w.coerce(n,r,e,d,p)}function s(d){var p=d+"axis",c={_fullLayout:{}};return c._fullLayout[p]=t[p],f.coercePosition(r,c,i,d,d,.5)}var y=i("visible");!y||(T(n,r,h.fullLayout,i),s("x"),s("y"),s("z"),w.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",i("ax",-10),i("ay",-30),w.noneOrAll(n,r,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(o,U,H){var w=o("../annotations/draw").drawRaw,f=o("../../plots/gl3d/project"),M=["x","y","z"];U.exports=function(e){for(var a=e.fullSceneLayout,n=e.dataScale,r=a.annotations,t=0;t<r.length;t++){for(var h=r[t],i=!1,s=0;s<3;s++){var y=M[s],d=h[y],p=a[y+"axis"],c=p.r2fraction(d);if(c<0||c>1){i=!0;break}}i?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+t+'"]').remove():(h._pdata=f(e.glplot.cameraParams,[a.xaxis.r2l(h.x)*n[0],a.yaxis.r2l(h.y)*n[1],a.zaxis.r2l(h.z)*n[2]]),w(e.graphDiv,h,t,e.id,h._xa,h._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(o,U,H){var w=o("../../registry"),f=o("../../lib");U.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:o("./attributes")}}},layoutAttributes:o("./attributes"),handleDefaults:o("./defaults"),includeBasePlot:M,convert:o("./convert"),draw:o("./draw")};function M(T,e){var a=w.subplotsRegistry.gl3d;if(!!a)for(var n=a.attrRegex,r=Object.keys(T),t=0;t<r.length;t++){var h=r[t];n.test(h)&&(T[h].annotations||[]).length&&(f.pushUnique(e._basePlotModules,a),f.pushUnique(e._subplots.gl3d,h))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(o,U,H){U.exports=o("world-calendars/dist/main"),o("world-calendars/dist/plus"),o("world-calendars/dist/calendars/chinese"),o("world-calendars/dist/calendars/coptic"),o("world-calendars/dist/calendars/discworld"),o("world-calendars/dist/calendars/ethiopian"),o("world-calendars/dist/calendars/hebrew"),o("world-calendars/dist/calendars/islamic"),o("world-calendars/dist/calendars/julian"),o("world-calendars/dist/calendars/mayan"),o("world-calendars/dist/calendars/nanakshahi"),o("world-calendars/dist/calendars/nepali"),o("world-calendars/dist/calendars/persian"),o("world-calendars/dist/calendars/taiwan"),o("world-calendars/dist/calendars/thai"),o("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(o,U,H){var w=o("./calendars"),f=o("../../lib"),M=o("../../constants/numerical"),T=M.EPOCHJD,e=M.ONEDAY,a={valType:"enumerated",values:f.sortObjectKeys(w.calendars),editType:"calc",dflt:"gregorian"},n=function(g,b,v,C){var S={};return S[v]=a,f.coerce(g,b,S,v,C)},r=function(g,b,v,C){for(var S=0;S<v.length;S++)n(g,b,v[S]+"calendar",C.calendar)},t={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},h={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},i={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",y={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(g,b,v){for(var C=Math.floor((b+.05)/e)+T,S=c(v).fromJD(C),k=0,E,F,I,D,R;(k=g.indexOf("%",k))!==-1;)E=g.charAt(k+1),E==="0"||E==="-"||E==="_"?(I=3,F=g.charAt(k+2),E==="_"&&(E="-")):(F=E,E="0",I=2),D=y[F],D?(D===s?R=s:R=S.formatDate(D[E]),g=g.substr(0,k)+R+g.substr(k+I),k+=R.length):k+=I;return g}var p={};function c(g){var b=p[g];return b||(b=p[g]=w.instance(g),b)}function m(g){return f.extendFlat({},a,{description:g})}function l(g){return"Sets the calendar system to use with `"+g+"` date data."}var x={xcalendar:m(l("x"))},u=f.extendFlat({},x,{ycalendar:m(l("y"))}),A=f.extendFlat({},u,{zcalendar:m(l("z"))}),_=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));U.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:A,surface:A,mesh3d:A,scattergl:u,ohlc:x,candlestick:x},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:n,handleTraceDefaults:r,CANONICAL_SUNDAY:h,CANONICAL_TICK:t,DFLTRANGE:i,getCal:c,worldCalFmt:d}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(o,U,H){H.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],H.defaultLine="#444",H.lightLine="#eee",H.background="#fff",H.borderLine="#BEC8D9",H.lightFraction=100*(14-4)/(15-4)},{}],367:[function(o,U,H){var w=o("tinycolor2"),f=o("fast-isnumeric"),M=o("../../lib/array").isTypedArray,T=U.exports={},e=o("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var n=T.background=e.background;T.tinyRGB=function(t){var h=t.toRgb();return"rgb("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+")"},T.rgb=function(t){return T.tinyRGB(w(t))},T.opacity=function(t){return t?w(t).getAlpha():0},T.addOpacity=function(t,h){var i=w(t).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+h+")"},T.combine=function(t,h){var i=w(t).toRgb();if(i.a===1)return w(t).toRgbString();var s=w(h||n).toRgb(),y=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},d={r:y.r*(1-i.a)+i.r*i.a,g:y.g*(1-i.a)+i.g*i.a,b:y.b*(1-i.a)+i.b*i.a};return w(d).toRgbString()},T.contrast=function(t,h,i){var s=w(t);s.getAlpha()!==1&&(s=w(T.combine(t,n)));var y=s.isDark()?h?s.lighten(h):n:i?s.darken(i):a;return y.toString()},T.stroke=function(t,h){var i=w(h);t.style({stroke:T.tinyRGB(i),"stroke-opacity":i.getAlpha()})},T.fill=function(t,h){var i=w(h);t.style({fill:T.tinyRGB(i),"fill-opacity":i.getAlpha()})},T.clean=function(t){if(!(!t||typeof t!="object")){var h=Object.keys(t),i,s,y,d;for(i=0;i<h.length;i++)if(y=h[i],d=t[y],y.substr(y.length-5)==="color")if(Array.isArray(d))for(s=0;s<d.length;s++)d[s]=r(d[s]);else t[y]=r(d);else if(y.substr(y.length-10)==="colorscale"&&Array.isArray(d))for(s=0;s<d.length;s++)Array.isArray(d[s])&&(d[s][1]=r(d[s][1]));else if(Array.isArray(d)){var p=d[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(s=0;s<d.length;s++)T.clean(d[s])}else d&&typeof d=="object"&&!M(d)&&T.clean(d)}};function r(t){if(f(t)||typeof t!="string")return t;var h=t.trim();if(h.substr(0,3)!=="rgb")return t;var i=h.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return t;var s=i[1].trim().split(/\s*[\s,]\s*/),y=h.charAt(3)==="a"&&s.length===4;if(!y&&s.length!==3)return t;for(var d=0;d<s.length;d++){if(!s[d].length||(s[d]=Number(s[d]),!(s[d]>=0)))return t;if(d===3)s[d]>1&&(s[d]=1);else if(s[d]>=1)return t}var p=Math.round(s[0]*255)+", "+Math.round(s[1]*255)+", "+Math.round(s[2]*255);return y?"rgba("+p+", "+s[3]+")":"rgb("+p+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(o,U,H){var w=o("../../plots/cartesian/layout_attributes"),f=o("../../plots/font_attributes"),M=o("../../lib/extend").extendFlat,T=o("../../plot_api/edit_types").overrideAll;U.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:w.linecolor,outlinewidth:w.linewidth,bordercolor:w.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:w.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:M({},w.ticks,{dflt:""}),ticklabeloverflow:M({},w.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,tickfont:f({}),tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,tickprefix:w.tickprefix,showtickprefix:w.showtickprefix,ticksuffix:w.ticksuffix,showticksuffix:w.showticksuffix,separatethousands:w.separatethousands,exponentformat:w.exponentformat,minexponent:w.minexponent,showexponent:w.showexponent,title:{text:{valType:"string"},font:f({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:f({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(o,U,H){U.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(o,U,H){var w=o("../../lib"),f=o("../../plot_api/plot_template"),M=o("../../plots/cartesian/tick_value_defaults"),T=o("../../plots/cartesian/tick_mark_defaults"),e=o("../../plots/cartesian/tick_label_defaults"),a=o("../../plots/cartesian/prefix_suffix_defaults"),n=o("./attributes");U.exports=function(t,h,i){var s=f.newContainer(h,"colorbar"),y=t.colorbar||{};function d(S,k){return w.coerce(y,s,n,S,k)}var p=i.margin||{t:0,b:0,l:0,r:0},c=i.width-p.l-p.r,m=i.height-p.t-p.b,l=d("orientation"),x=l==="v",u=d("thicknessmode");d("thickness",u==="fraction"?30/(x?c:m):30);var A=d("lenmode");d("len",A==="fraction"?1:x?m:c),d("x",x?1.02:.5),d("xanchor",x?"left":"center"),d("xpad"),d("y",x?.5:1.02),d("yanchor",x?"middle":"bottom"),d("ypad"),w.noneOrAll(y,s,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var _=w.coerce(y,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),M(y,s,d,"linear");var g=i.font,b={outerTicks:!1,font:g};_.indexOf("inside")!==-1&&(b.bgColor="black"),a(y,s,d,"linear",b),e(y,s,d,"linear",b),T(y,s,d,"linear",b),d("title.text",i._dfltTitle.colorbar);var v=s.tickfont,C=w.extendFlat({},v,{color:g.color,size:w.bigFont(v.size)});w.coerceFont(d,"title.font",C),d("title.side",x?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(o,U,H){var w=o("@plotly/d3"),f=o("tinycolor2"),M=o("../../plots/plots"),T=o("../../registry"),e=o("../../plots/cartesian/axes"),a=o("../dragelement"),n=o("../../lib"),r=n.strTranslate,t=o("../../lib/extend").extendFlat,h=o("../../lib/setcursor"),i=o("../drawing"),s=o("../color"),y=o("../titles"),d=o("../../lib/svg_text_utils"),p=o("../colorscale/helpers").flipScale,c=o("../../plots/cartesian/axis_defaults"),m=o("../../plots/cartesian/position_defaults"),l=o("../../plots/cartesian/layout_attributes"),x=o("../../constants/alignment"),u=x.LINE_SPACING,A=x.FROM_TL,_=x.FROM_BR,g=o("./constants").cn;function b(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+g.colorbar).data(v(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(g.colorbar,!0),D.each(function(R){var O=w.select(this);n.ensureSingle(O,"rect",g.cbbg),n.ensureSingle(O,"g",g.cbfills),n.ensureSingle(O,"g",g.cblines),n.ensureSingle(O,"g",g.cbaxis,function(B){B.classed(g.crisp,!0)}),n.ensureSingle(O,"g",g.cbtitleunshift,function(B){B.append("g").classed(g.cbtitle,!0)}),n.ensureSingle(O,"rect",g.cboutline);var z=C(O,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&S(O,R,F)}),D.exit().each(function(R){M.autoMargin(F,R._id)}).remove(),D.order()}function v(F){var I=F._fullLayout,D=F.calcdata,R=[],O,z,B,G;function Q(Z){return t(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){typeof G.calc=="function"?G.calc(F,B,O):(O._fillgradient=z.reversescale?p(z.colorscale):z.colorscale,O._zrange=[z[G.min],z[G.max]])}for(var j=0;j<D.length;j++){var re=D[j];B=re[0].trace;var ue=B._module.colorbar;if(B.visible===!0&&ue)for(var K=Array.isArray(ue),te=K?ue:[ue],Y=0;Y<te.length;Y++){G=te[Y];var V=G.container;z=V?B[V]:B,z&&z.showscale&&(O=Q(z.colorbar),O._id="cb"+B.uid+(K&&V?"-"+V:""),O._traceIndex=B.index,O._propPrefix=(V?V+".":"")+"colorbar.",O._meta=B._meta,X(),R.push(O))}}for(var ee in I._colorAxes)if(z=I[ee],z.showscale){var ne=I._colorAxes[ee];O=Q(z.colorbar),O._id="cb"+ee,O._propPrefix=ee+".colorbar.",O._meta=I._meta,G={min:"cmin",max:"cmax"},ne[0]!=="heatmap"&&(B=ne[1],G.calc=B._module.colorbar.calc),X(),R.push(O)}return R}function C(F,I,D){var R=I.orientation==="v",O=I.len,z=I.lenmode,B=I.thickness,G=I.thicknessmode,Q=I.outlinewidth,X=I.borderwidth,j=I.bgcolor,re=I.xanchor,ue=I.yanchor,K=I.xpad,te=I.ypad,Y=I.x,V=R?I.y:1-I.y,ee=D._fullLayout,ne=ee._size,Z=I._fillcolor,q=I._line,ie=I.title,se=ie.side,ae=I._zrange||w.extent((typeof Z=="function"?Z:q.color).domain()),oe=typeof q.color=="function"?q.color:function(){return q.color},be=typeof Z=="function"?Z:function(){return Z},ce=I._levels,de=k(D,I,ae),ye=de.fill,ge=de.line,me=Math.round(B*(G==="fraction"?R?ne.w:ne.h:1)),Me=me/(R?ne.w:ne.h),Le=Math.round(O*(z==="fraction"?R?ne.h:ne.w:1)),Oe=Le/(R?ne.h:ne.w),_e=Math.round(R?Y*ne.w+K:V*ne.h+te),Ee={center:.5,right:1}[re]||0,Ze={top:1,middle:.5}[ue]||0,Ge=R?Y-Ee*Me:V-Ze*Me,Fe=R?V-Ze*Oe:Y-Ee*Oe,Re=Math.round(R?ne.h*(1-Fe):ne.w*Fe);I._lenFrac=Oe,I._thickFrac=Me,I._uFrac=Ge,I._vFrac=Fe;var We=I._axis=E(D,I,ae);We.position=Me+(R?Y+K/ne.w:V+te/ne.h);var xt=["top","bottom"].indexOf(se)!==-1;if(R&&xt&&(We.title.side=se,We.titlex=Y+K/ne.w,We.titley=Fe+(ie.side==="top"?Oe-te/ne.h:te/ne.h)),!R&&!xt&&(We.title.side=se,We.titley=V+te/ne.h,We.titlex=Fe+K/ne.w),q.color&&I.tickmode==="auto"){We.tickmode="linear",We.tick0=ce.start;var Nt=ce.size,tr=n.constrain(Le/50,4,15)+1,Vt=(ae[1]-ae[0])/((I.nticks||tr)*Nt);if(Vt>1){var Pt=Math.pow(10,Math.floor(Math.log(Vt)/Math.LN10));Nt*=Pt*n.roundUp(Vt/Pt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(We.tick0=0)}We.dtick=Nt}We.domain=R?[Fe+te/ne.h,Fe+Oe-te/ne.h]:[Fe+K/ne.w,Fe+Oe-K/ne.w],We.setScale(),F.attr("transform",r(Math.round(ne.l),Math.round(ne.t)));var $t=F.select("."+g.cbtitleunshift).attr("transform",r(-Math.round(ne.l),-Math.round(ne.t))),Ut=We.ticklabelposition,Lt=We.title.font.size,Ye=F.select("."+g.cbaxis),ot,Ve=0,Ae=0;function He(kt,jt){var Bt={propContainer:We,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:ee._dfltTitle.colorbar,containerGroup:F.select("."+g.cbtitle)},Wt=kt.charAt(0)==="h"?kt.substr(1):"h"+kt;F.selectAll("."+Wt+",."+Wt+"-math-group").remove(),y.draw(D,kt,t(Bt,jt||{}))}function Je(){if(R&&xt||!R&&!xt){var kt,jt;se==="top"&&(kt=K+ne.l+ne.w*Y,jt=te+ne.t+ne.h*(1-Fe-Oe)+3+Lt*.75),se==="bottom"&&(kt=K+ne.l+ne.w*Y,jt=te+ne.t+ne.h*(1-Fe)-3-Lt*.25),se==="right"&&(jt=te+ne.t+ne.h*V+3+Lt*.75,kt=K+ne.l+ne.w*Fe),He(We._id+"title",{attributes:{x:kt,y:jt,"text-anchor":R?"start":"middle"}})}}function tt(){if(R&&!xt||!R&&xt){var kt=We.position||0,jt=We._offset+We._length/2,Bt,Wt;if(se==="right")Wt=jt,Bt=ne.l+ne.w*kt+10+Lt*(We.showticklabels?1:.5);else if(Bt=jt,se==="bottom"&&(Wt=ne.t+ne.h*kt+10+(Ut.indexOf("inside")===-1?We.tickfont.size:0)+(We.ticks!=="intside"&&I.ticklen||0)),se==="top"){var Qt=ie.text.split("<br>").length;Wt=ne.t+ne.h*kt+10-me-u*Lt*Qt}He((R?"h":"v")+We._id+"title",{avoid:{selection:w.select(D).selectAll("g."+We._id+"tick"),side:se,offsetTop:R?0:ne.t,offsetLeft:R?ne.l:0,maxShift:R?ee.width:ee.height},attributes:{x:Bt,y:Wt,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function St(){if(!R&&!xt||R&&xt){var kt=F.select("."+g.cbtitle),jt=kt.select("text"),Bt=[-Q/2,Q/2],Wt=kt.select(".h"+We._id+"title-math-group").node(),Qt=15.6;jt.node()&&(Qt=parseInt(jt.node().style.fontSize,10)*u);var Zt;if(Wt?(Zt=i.bBox(Wt),Ae=Zt.width,Ve=Zt.height,Ve>Qt&&(Bt[1]-=(Ve-Qt)/2)):jt.node()&&!jt.classed(g.jsPlaceholder)&&(Zt=i.bBox(jt.node()),Ae=Zt.width,Ve=Zt.height),R){if(Ve){if(Ve+=5,se==="top")We.domain[1]-=Ve/ne.h,Bt[1]*=-1;else{We.domain[0]+=Ve/ne.h;var cr=d.lineCount(jt);Bt[1]+=(1-cr)*Qt}kt.attr("transform",r(Bt[0],Bt[1])),We.setScale()}}else Ae&&(se==="right"&&(We.domain[0]+=(Ae+Lt/2)/ne.w),kt.attr("transform",r(Bt[0],Bt[1])),We.setScale())}F.selectAll("."+g.cbfills+",."+g.cblines).attr("transform",R?r(0,Math.round(ne.h*(1-We.domain[1]))):r(Math.round(ne.w*We.domain[0]),0)),Ye.attr("transform",R?r(0,Math.round(-ne.t)):r(Math.round(-ne.l),0));var Xr=F.select("."+g.cbfills).selectAll("rect."+g.cbfill).attr("style","").data(ye);Xr.enter().append("rect").classed(g.cbfill,!0).style("stroke","none"),Xr.exit().remove();var vn=ae.map(We.c2p).map(Math.round).sort(function(Kt,Er){return Kt-Er});Xr.each(function(Kt,Er){var st=[Er===0?ae[0]:(ye[Er]+ye[Er-1])/2,Er===ye.length-1?ae[1]:(ye[Er]+ye[Er+1])/2].map(We.c2p).map(Math.round);R&&(st[1]=n.constrain(st[1]+(st[1]>st[0])?1:-1,vn[0],vn[1]));var et=w.select(this).attr(R?"x":"y",_e).attr(R?"y":"x",w.min(st)).attr(R?"width":"height",Math.max(me,2)).attr(R?"height":"width",Math.max(w.max(st)-w.min(st),2));if(I._fillgradient)i.gradient(et,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var vt=be(Kt).replace("e-","");et.attr("fill",f(vt).toHexString())}});var en=F.select("."+g.cblines).selectAll("path."+g.cbline).data(q.color&&q.width?ge:[]);en.enter().append("path").classed(g.cbline,!0),en.exit().remove(),en.each(function(Kt){var Er=_e,st=Math.round(We.c2p(Kt))+q.width/2%1;w.select(this).attr("d","M"+(R?Er+","+st:st+","+Er)+(R?"h":"v")+me).call(i.lineGroupStyle,q.width,oe(Kt),q.dash)}),Ye.selectAll("g."+We._id+"tick,path").remove();var ft=_e+me+(Q||0)/2-(I.ticks==="outside"?1:0),ar=e.calcTicks(We),rr=e.getTickSigns(We)[2];return e.drawTicks(D,We,{vals:We.ticks==="inside"?e.clipEnds(We,ar):ar,layer:Ye,path:e.makeTickPath(We,ft,rr),transFn:e.makeTransTickFn(We)}),e.drawLabels(D,We,{vals:ar,layer:Ye,transFn:e.makeTransTickLabelFn(We),labelFns:e.makeLabelFns(We,ft)})}function _t(){var kt,jt=me+Q/2;Ut.indexOf("inside")===-1&&(kt=i.bBox(Ye.node()),jt+=R?kt.width:kt.height),ot=$t.select("text");var Bt=0,Wt=R&&se==="top",Qt=!R&&se==="right",Zt=0;if(ot.node()&&!ot.classed(g.jsPlaceholder)){var cr,Xr=$t.select(".h"+We._id+"title-math-group").node();Xr&&(R&&xt||!R&&!xt)?(kt=i.bBox(Xr),Bt=kt.width,cr=kt.height):(kt=i.bBox($t.node()),Bt=kt.right-ne.l-(R?_e:Re),cr=kt.bottom-ne.t-(R?Re:_e),!R&&se==="top"&&(jt+=kt.height,Zt=kt.height)),Qt&&(ot.attr("transform",r(Bt/2+Lt/2,0)),Bt*=2),jt=Math.max(jt,R?Bt:cr)}var vn=(R?K:te)*2+jt+X+Q/2,en=0;!R&&ie.text&&ue==="bottom"&&V<=0&&(en=vn/2,vn+=en,Zt+=en),ee._hColorbarMoveTitle=en,ee._hColorbarMoveCBTitle=Zt;var ft=X+Q;F.select("."+g.cbbg).attr("x",(R?_e:Re)-ft/2-(R?K:0)).attr("y",(R?Re:_e)-(R?Le:te+Zt-en)).attr(R?"width":"height",Math.max(vn-en,2)).attr(R?"height":"width",Math.max(Le+ft,2)).call(s.fill,j).call(s.stroke,I.bordercolor).style("stroke-width",X);var ar=Qt?Math.max(Bt-10,0):0;if(F.selectAll("."+g.cboutline).attr("x",(R?_e:Re+K)+ar).attr("y",(R?Re+te-Le:_e)+(Wt?Ve:0)).attr(R?"width":"height",Math.max(me,2)).attr(R?"height":"width",Math.max(Le-(R?2*te+Ve:2*K+ar),2)).call(s.stroke,I.outlinecolor).style({fill:"none","stroke-width":Q}),F.attr("transform",r(ne.l-(R?Ee*vn:0),ne.t-(R?0:(1-Ze)*vn-Zt))),!R&&(X||f(j).getAlpha()&&!f.equals(ee.paper_bgcolor,j))){var rr=Ye.selectAll("text"),Kt=rr[0].length,Er=F.select("."+g.cbbg).node(),st=i.bBox(Er),et=i.getTranslate(F),vt=2;rr.each(function(ct,yt){var Rt=0,wt=Kt-1;if(yt===Rt||yt===wt){var Dt=i.bBox(this),Jt=i.getTranslate(this),fr;if(yt===wt){var Rr=Dt.right+Jt.x,Sr=st.right+et.x+Re-X-vt+Y;fr=Sr-Rr,fr>0&&(fr=0)}else if(yt===Rt){var Pr=Dt.left+Jt.x,Jr=st.left+et.x+Re+X+vt;fr=Jr-Pr,fr<0&&(fr=0)}fr&&(Kt<3?this.setAttribute("transform","translate("+fr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var pt={},Ct=A[re],Ht=_[re],Pe=A[ue],ke=_[ue],lt=vn-me;R?(z==="pixels"?(pt.y=V,pt.t=Le*Pe,pt.b=Le*ke):(pt.t=pt.b=0,pt.yt=V+O*Pe,pt.yb=V-O*ke),G==="pixels"?(pt.x=Y,pt.l=vn*Ct,pt.r=vn*Ht):(pt.l=lt*Ct,pt.r=lt*Ht,pt.xl=Y-B*Ct,pt.xr=Y+B*Ht)):(z==="pixels"?(pt.x=Y,pt.l=Le*Ct,pt.r=Le*Ht):(pt.l=pt.r=0,pt.xl=Y+O*Ct,pt.xr=Y-O*Ht),G==="pixels"?(pt.y=1-V,pt.t=vn*Pe,pt.b=vn*ke):(pt.t=lt*Pe,pt.b=lt*ke,pt.yt=V-B*Pe,pt.yb=V+B*ke)),M.autoMargin(D,I._id,pt)}return n.syncOrAsync([M.previousPromises,Je,St,tt,M.previousPromises,_t],D)}function S(F,I,D){var R=I.orientation==="v",O=D._fullLayout,z=O._size,B,G,Q;a.init({element:F.node(),gd:D,prepFn:function(){B=F.attr("transform"),h(F)},moveFn:function(X,j){F.attr("transform",B+r(X,j)),G=a.align((R?I._uFrac:I._vFrac)+X/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),Q=a.align((R?I._vFrac:1-I._uFrac)-j/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var re=a.getCursor(G,Q,I.xanchor,I.yanchor);h(F,re)},doneFn:function(){if(h(F),G!==void 0&&Q!==void 0){var X={};X[I._propPrefix+"x"]=G,X[I._propPrefix+"y"]=Q,I._traceIndex!==void 0?T.call("_guiRestyle",D,X,I._traceIndex):T.call("_guiRelayout",D,X)}}})}function k(F,I,D){var R=I._levels,O=[],z=[],B,G,Q=R.end+R.size/100,X=R.size,j=1.001*D[0]-.001*D[1],re=1.001*D[1]-.001*D[0];for(G=0;G<1e5&&(B=R.start+G*X,!(X>0?B>=Q:B<=Q));G++)B>j&&B<re&&O.push(B);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var ue=I._filllevels;if(ue)for(Q=ue.end+ue.size/100,X=ue.size,G=0;G<1e5&&(B=ue.start+G*X,!(X>0?B>=Q:B<=Q));G++)B>D[0]&&B<D[1]&&z.push(B);else z=O.map(function(K){return K-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(O.reverse(),z.reverse()),{line:O,fill:z}}function E(F,I,D){var R=F._fullLayout,O=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},B=O?"y":"x",G={type:"linear",_id:B+I._id},Q={letter:B,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function X(j,re){return n.coerce(z,G,l,j,re)}return c(z,G,X,Q,R),m(z,G,X,Q),G}U.exports={draw:b}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(o,U,H){var w=o("../../lib");U.exports=function(M){return w.isPlainObject(M.colorbar)}},{"../../lib":515}],373:[function(o,U,H){U.exports={moduleType:"component",name:"colorbar",attributes:o("./attributes"),supplyDefaults:o("./defaults"),draw:o("./draw").draw,hasColorbar:o("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(o,U,H){var w=o("../colorbar/attributes"),f=o("../../lib/regex").counter,M=o("../../lib/sort_object_keys"),T=o("./scales.js").scales;M(T),U.exports=function(a,n){a=a||"",n=n||{};var r=n.cLetter||"c";"onlyIfNumerical"in n?n.onlyIfNumerical:Boolean(a);var t="noScale"in n?n.noScale:a==="marker.line",h="showScaleDflt"in n?n.showScaleDflt:r==="z",i=typeof n.colorscaleDflt=="string"?T[n.colorscaleDflt]:null,s=n.editTypeOverride||"",y;"colorAttr"in n?(y=n.colorAttr,n.colorAttr):y={z:"z",c:"color"}[r];var d=r+"auto",p=r+"min",c=r+"max",m=r+"mid",l={};l[p]=l[c]=void 0;var x={};x[d]=!1;var u={};return y==="color"&&(u.color={valType:"color",arrayOk:!0,editType:s||"style"},n.anim&&(u.color.anim=!0)),u[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},u[p]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:x},u[c]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:x},u[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},u.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:n.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},t||(u.showscale={valType:"boolean",dflt:h,editType:"calc"},u.colorbar=w),n.noColorAxis||(u.coloraxis={valType:"subplotid",regex:f("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("./helpers").extractOpts;U.exports=function(e,a,n){var r=e._fullLayout,t=n.vals,h=n.containerStr,i=h?f.nestedProperty(a,h).get():a,s=M(i),y=s.auto!==!1,d=s.min,p=s.max,c=s.mid,m=function(){return f.aggNums(Math.min,null,t)},l=function(){return f.aggNums(Math.max,null,t)};if(d===void 0?d=m():y&&(i._colorAx&&w(d)?d=Math.min(d,m()):d=m()),p===void 0?p=l():y&&(i._colorAx&&w(p)?p=Math.max(p,l()):p=l()),y&&c!==void 0&&(p-c>c-d?d=c-(p-c):p-c<c-d&&(p=c+(c-d))),d===p&&(d-=.5,p+=.5),s._sync("min",d),s._sync("max",p),s.autocolorscale){var x;d*p<0?x=r.colorscale.diverging:d>=0?x=r.colorscale.sequential:x=r.colorscale.sequentialminus,s._sync("colorscale",x)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(o,U,H){var w=o("../../lib"),f=o("./helpers").hasColorscale,M=o("./helpers").extractOpts;U.exports=function(e,a){function n(d,p){var c=d["_"+p];c!==void 0&&(d[p]=c)}function r(d,p){var c=p.container?w.nestedProperty(d,p.container).get():d;if(c)if(c.coloraxis)c._colorAx=a[c.coloraxis];else{var m=M(c),l=m.auto;(l||m.min===void 0)&&n(c,p.min),(l||m.max===void 0)&&n(c,p.max),m.autocolorscale&&n(c,"colorscale")}}for(var t=0;t<e.length;t++){var h=e[t],i=h._module.colorbar;if(i)if(Array.isArray(i))for(var s=0;s<i.length;s++)r(h,i[s]);else r(h,i);f(h,"marker.line")&&r(h,{container:"marker.line",min:"cmin",max:"cmax"})}for(var y in a._colorAxes)r(a[y],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../colorbar/has_colorbar"),T=o("../colorbar/defaults"),e=o("./scales").isValid,a=o("../../registry").traceIs;function n(r,t){var h=t.slice(0,t.length-1);return t?f.nestedProperty(r,h).get()||{}:r}U.exports=function r(t,h,i,s,y){var d=y.prefix,p=y.cLetter,c="_module"in h,m=n(t,d),l=n(h,d),x=n(h._template||{},d)||{},u=function(){return delete t.coloraxis,delete h.coloraxis,r(t,h,i,s,y)};if(c){var A=i._colorAxes||{},_=s(d+"coloraxis");if(_){var g=a(h,"contour")&&f.nestedProperty(h,"contours.coloring").get()||"heatmap",b=A[_];b?(b[2].push(u),b[0]!==g&&(b[0]=!1,f.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[_]=[g,h,[u]];return}}var v=m[p+"min"],C=m[p+"max"],S=w(v)&&w(C)&&v<C,k=s(d+p+"auto",!S);k?s(d+p+"mid"):(s(d+p+"min"),s(d+p+"max"));var E=m.colorscale,F=x.colorscale,I;if(E!==void 0&&(I=!e(E)),F!==void 0&&(I=!e(F)),s(d+"autocolorscale",I),s(d+"colorscale"),s(d+"reversescale"),d!=="marker.line."){var D;d&&c&&(D=M(m));var R=s(d+"showscale",D);R&&(d&&x&&(l._template=x),T(m,l,i))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(o,U,H){var w=o("@plotly/d3"),f=o("tinycolor2"),M=o("fast-isnumeric"),T=o("../../lib"),e=o("../color"),a=o("./scales").isValid;function n(c,m,l){var x=m?T.nestedProperty(c,m).get()||{}:c,u=x[l||"color"],A=!1;if(T.isArrayOrTypedArray(u)){for(var _=0;_<u.length;_++)if(M(u[_])){A=!0;break}}return T.isPlainObject(x)&&(A||x.showscale===!0||M(x.cmin)&&M(x.cmax)||a(x.colorscale)||T.isPlainObject(x.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function h(c){var m=c._colorAx,l=m||c,x={},u,A,_;for(A=0;A<r.length;A++)_=r[A],x[_]=l[_];if(m)for(u="c",A=0;A<t.length;A++)_=t[A],x[_]=l["c"+_];else{var g;for(A=0;A<t.length;A++){if(_=t[A],g="c"+_,g in l){x[_]=l[g];continue}g="z"+_,g in l&&(x[_]=l[g])}u=g.charAt(0)}return x._sync=function(b,v){var C=t.indexOf(b)!==-1?u+b:b;l[C]=l["_"+C]=v},x}function i(c){for(var m=h(c),l=m.min,x=m.max,u=m.reversescale?s(m.colorscale):m.colorscale,A=u.length,_=new Array(A),g=new Array(A),b=0;b<A;b++){var v=u[b];_[b]=l+v[0]*(x-l),g[b]=v[1]}return{domain:_,range:g}}function s(c){for(var m=c.length,l=new Array(m),x=m-1,u=0;x>=0;x--,u++){var A=c[x];l[u]=[1-A[0],A[1]]}return l}function y(c,m){m=m||{};for(var l=c.domain,x=c.range,u=x.length,A=new Array(u),_=0;_<u;_++){var g=f(x[_]).toRgb();A[_]=[g.r,g.g,g.b,g.a]}var b=w.scale.linear().domain(l).range(A).clamp(!0),v=m.noNumericCheck,C=m.returnArray,S;return v&&C?S=b:v?S=function(k){return p(b(k))}:C?S=function(k){return M(k)?b(k):f(k).isValid()?k:e.defaultLine}:S=function(k){return M(k)?p(b(k)):f(k).isValid()?k:e.defaultLine},S.domain=b.domain,S.range=function(){return x},S}function d(c,m){return y(i(c),m)}function p(c){var m={r:c[0],g:c[1],b:c[2],a:c[3]};return f(m).toRgbString()}U.exports={hasColorscale:n,extractOpts:h,extractScale:i,flipScale:s,makeColorScaleFunc:y,makeColorScaleFuncFromTrace:d}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(o,U,H){var w=o("./scales"),f=o("./helpers");U.exports={moduleType:"component",name:"colorscale",attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyLayoutDefaults:o("./layout_defaults"),handleDefaults:o("./defaults"),crossTraceDefaults:o("./cross_trace_defaults"),calc:o("./calc"),scales:w.scales,defaultScale:w.defaultScale,getScale:w.get,isValidScale:w.isValid,hasColorscale:f.hasColorscale,extractOpts:f.extractOpts,extractScale:f.extractScale,flipScale:f.flipScale,makeColorScaleFunc:f.makeColorScaleFunc,makeColorScaleFuncFromTrace:f.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(o,U,H){var w=o("../../lib/extend").extendFlat,f=o("./attributes"),M=o("./scales").scales;U.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:w({_isSubplotObj:!0,editType:"calc"},f("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(o,U,H){var w=o("../../lib"),f=o("../../plot_api/plot_template"),M=o("./layout_attributes"),T=o("./defaults");U.exports=function(a,n){function r(c,m){return w.coerce(a,n,M,c,m)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var t=n._colorAxes,h,i;function s(c,m){return w.coerce(h,i,M.coloraxis,c,m)}for(var y in t){var d=t[y];if(d[0])h=a[y]||{},i=f.newContainer(n,y,"coloraxis"),i._name=y,T(h,i,n,s,{prefix:"",cLetter:"c"});else{for(var p=0;p<d[2].length;p++)d[2][p]();delete n._colorAxes[y]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(o,U,H){var w=o("tinycolor2"),f={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=f.RdBu;function T(n,r){if(r||(r=M),!n)return r;function t(){try{n=f[n]||JSON.parse(n)}catch{n=r}}return typeof n=="string"&&(t(),typeof n=="string"&&t()),e(n)?n:r}function e(n){var r=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var t=0;t<n.length;t++){var h=n[t];if(h.length!==2||+h[0]<r||!w(h[1]).isValid())return!1;r=+h[0]}return!0}function a(n){return f[n]!==void 0?!0:e(n)}U.exports={scales:f,defaultScale:M,get:T,isValid:a}},{tinycolor2:313}],383:[function(o,U,H){U.exports=function(f,M,T,e,a){var n=(f-T)/(e-T),r=n+M/(e-T),t=(n+r)/2;return a==="left"||a==="bottom"?n:a==="center"||a==="middle"?t:a==="right"||a==="top"?r:n<2/3-t?n:r>4/3-t?r:t}},{}],384:[function(o,U,H){var w=o("../../lib"),f=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];U.exports=function(T,e,a,n){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=w.constrain(Math.floor(T*3),0,2),n==="bottom"?e=0:n==="middle"?e=1:n==="top"?e=2:e=w.constrain(Math.floor(e*3),0,2),f[e][T]}},{"../../lib":515}],385:[function(o,U,H){H.selectMode=function(w){return w==="lasso"||w==="select"},H.drawMode=function(w){return w==="drawclosedpath"||w==="drawopenpath"||w==="drawline"||w==="drawrect"||w==="drawcircle"},H.openMode=function(w){return w==="drawline"||w==="drawopenpath"},H.rectMode=function(w){return w==="select"||w==="drawline"||w==="drawrect"||w==="drawcircle"},H.freeMode=function(w){return w==="lasso"||w==="drawclosedpath"||w==="drawopenpath"},H.selectingOrDrawing=function(w){return H.freeMode(w)||H.rectMode(w)}},{}],386:[function(o,U,H){var w=o("mouse-event-offset"),f=o("has-hover"),M=o("has-passive-events"),T=o("../../lib").removeElement,e=o("../../plots/cartesian/constants"),a=U.exports={};a.align=o("./align"),a.getCursor=o("./cursor");var n=o("./unhover");a.unhover=n.wrapped,a.unhoverRaw=n.raw,a.init=function(i){var s=i.gd,y=1,d=s._context.doubleClickDelay,p=i.element,c,m,l,x,u,A,_,g;s._mouseDownTime||(s._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=C,M?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=C,p.addEventListener("touchstart",C,{passive:!1})):p.ontouchstart=C;function b(E,F,I){return Math.abs(E)<I&&(E=0),Math.abs(F)<I&&(F=0),[E,F]}var v=i.clampFn||b;function C(E){s._dragged=!1,s._dragging=!0;var F=t(E);c=F[0],m=F[1],_=E.target,A=E,g=E.buttons===2||E.ctrlKey,typeof E.clientX>"u"&&typeof E.clientY>"u"&&(E.clientX=c,E.clientY=m),l=new Date().getTime(),l-s._mouseDownTime<d?y+=1:(y=1,s._mouseDownTime=l),i.prepFn&&i.prepFn(E,c,m),f&&!g?(u=r(),u.style.cursor=window.getComputedStyle(p).cursor):f||(u=document,x=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),i.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var F=t(E),I=i.minDrag||e.MINDRAG,D=v(F[0]-c,F[1]-m,I),R=D[0],O=D[1];(R||O)&&(s._dragged=!0,a.unhover(s,E)),s._dragged&&i.moveFn&&!g&&(s._dragdata={element:p,dx:R,dy:O},i.moveFn(R,O))}function k(E){if(delete s._dragdata,i.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),f?T(u):x&&(u.documentElement.style.cursor=x,x=null),!s._dragging){s._dragged=!1;return}if(s._dragging=!1,new Date().getTime()-s._mouseDownTime>d&&(y=Math.max(y-1,1)),s._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(y,A),!g){var F;try{F=new MouseEvent("click",E)}catch{var I=t(E);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,I[0],I[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}_.dispatchEvent(F)}s._dragging=!1,s._dragged=!1}};function r(){var h=document.createElement("div");h.className="dragcover";var i=h.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(h),h}a.coverSlip=r;function t(h){return w(h.changedTouches?h.changedTouches[0]:h,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(o,U,H){var w=o("../../lib/events"),f=o("../../lib/throttle"),M=o("../../lib/dom").getGraphDiv,T=o("../fx/constants"),e=U.exports={};e.wrapped=function(a,n,r){a=M(a),a._fullLayout&&f.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,n,r)},e.raw=function(n,r){var t=n._fullLayout,h=n._hoverdata;r||(r={}),!(r.target&&!n._dragged&&w.triggerHandler(n,"plotly_beforehover",r)===!1)&&(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,r.target&&h&&n.emit("plotly_unhover",{event:r,points:h}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(o,U,H){H.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},H.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=f.numberFormat,T=o("fast-isnumeric"),e=o("tinycolor2"),a=o("../../registry"),n=o("../color"),r=o("../colorscale"),t=f.strTranslate,h=o("../../lib/svg_text_utils"),i=o("../../constants/xmlns_namespaces"),s=o("../../constants/alignment"),y=s.LINE_SPACING,d=o("../../constants/interactions").DESELECTDIM,p=o("../../traces/scatter/subtypes"),c=o("../../traces/scatter/make_bubble_size_func"),m=o("../../components/fx/helpers").appendArrayPointValue,l=U.exports={};l.font=function(ge,me,Me,Le){f.isPlainObject(me)&&(Le=me.color,Me=me.size,me=me.family),me&&ge.style("font-family",me),Me+1&&ge.style("font-size",Me+"px"),Le&&ge.call(n.fill,Le)},l.setPosition=function(ge,me,Me){ge.attr("x",me).attr("y",Me)},l.setSize=function(ge,me,Me){ge.attr("width",me).attr("height",Me)},l.setRect=function(ge,me,Me,Le,Oe){ge.call(l.setPosition,me,Me).call(l.setSize,Le,Oe)},l.translatePoint=function(ge,me,Me,Le){var Oe=Me.c2p(ge.x),_e=Le.c2p(ge.y);if(T(Oe)&&T(_e)&&me.node())me.node().nodeName==="text"?me.attr("x",Oe).attr("y",_e):me.attr("transform",t(Oe,_e));else return!1;return!0},l.translatePoints=function(ge,me,Me){ge.each(function(Le){var Oe=w.select(this);l.translatePoint(Le,Oe,me,Me)})},l.hideOutsideRangePoint=function(ge,me,Me,Le,Oe,_e){me.attr("display",Me.isPtWithinRange(ge,Oe)&&Le.isPtWithinRange(ge,_e)?null:"none")},l.hideOutsideRangePoints=function(ge,me){if(!!me._hasClipOnAxisFalse){var Me=me.xaxis,Le=me.yaxis;ge.each(function(Oe){var _e=Oe[0].trace,Ee=_e.xcalendar,Ze=_e.ycalendar,Ge=a.traceIs(_e,"bar-like")?".bartext":".point,.textpoint";ge.selectAll(Ge).each(function(Fe){l.hideOutsideRangePoint(Fe,w.select(this),Me,Le,Ee,Ze)})})}},l.crispRound=function(ge,me,Me){return!me||!T(me)?Me||0:ge._context.staticPlot?me:me<1?1:Math.round(me)},l.singleLineStyle=function(ge,me,Me,Le,Oe){me.style("fill","none");var _e=(((ge||[])[0]||{}).trace||{}).line||{},Ee=Me||_e.width||0,Ze=Oe||_e.dash||"";n.stroke(me,Le||_e.color),l.dashLine(me,Ze,Ee)},l.lineGroupStyle=function(ge,me,Me,Le){ge.style("fill","none").each(function(Oe){var _e=(((Oe||[])[0]||{}).trace||{}).line||{},Ee=me||_e.width||0,Ze=Le||_e.dash||"";w.select(this).call(n.stroke,Me||_e.color).call(l.dashLine,Ze,Ee)})},l.dashLine=function(ge,me,Me){Me=+Me||0,me=l.dashStyle(me,Me),ge.style({"stroke-dasharray":me,"stroke-width":Me+"px"})},l.dashStyle=function(ge,me){me=+me||1;var Me=Math.max(me,3);return ge==="solid"?ge="":ge==="dot"?ge=Me+"px,"+Me+"px":ge==="dash"?ge=3*Me+"px,"+3*Me+"px":ge==="longdash"?ge=5*Me+"px,"+5*Me+"px":ge==="dashdot"?ge=3*Me+"px,"+Me+"px,"+Me+"px,"+Me+"px":ge==="longdashdot"&&(ge=5*Me+"px,"+2*Me+"px,"+Me+"px,"+2*Me+"px"),ge};function x(ge,me,Me){var Le=me.fillpattern,Oe=Le&&l.getPatternAttr(Le.shape,0,"");if(Oe){var _e=l.getPatternAttr(Le.bgcolor,0,null),Ee=l.getPatternAttr(Le.fgcolor,0,null),Ze=Le.fgopacity,Ge=l.getPatternAttr(Le.size,0,8),Fe=l.getPatternAttr(Le.solidity,0,.3),Re=me.uid;l.pattern(ge,"point",Me,Re,Oe,Ge,Fe,void 0,Le.fillmode,_e,Ee,Ze)}else me.fillcolor&&ge.call(n.fill,me.fillcolor)}l.singleFillStyle=function(ge,me){var Me=w.select(ge.node()),Le=Me.data(),Oe=((Le[0]||[])[0]||{}).trace||{};x(ge,Oe,me)},l.fillGroupStyle=function(ge,me){ge.style("stroke-width",0).each(function(Me){var Le=w.select(this);Me[0].trace&&x(Le,Me[0].trace,me)})};var u=o("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(u).forEach(function(ge){var me=u[ge],Me=me.n;l.symbolList.push(Me,String(Me),ge,Me+100,String(Me+100),ge+"-open"),l.symbolNames[Me]=ge,l.symbolFuncs[Me]=me.f,l.symbolBackOffs[Me]=me.backoff||0,me.needLine&&(l.symbolNeedLines[Me]=!0),me.noDot?l.symbolNoDot[Me]=!0:l.symbolList.push(Me+200,String(Me+200),ge+"-dot",Me+300,String(Me+300),ge+"-open-dot"),me.noFill&&(l.symbolNoFill[Me]=!0)});var A=l.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(ge){if(T(ge))ge=+ge;else if(typeof ge=="string"){var me=0;ge.indexOf("-open")>0&&(me=100,ge=ge.replace("-open","")),ge.indexOf("-dot")>0&&(me+=200,ge=ge.replace("-dot","")),ge=l.symbolNames.indexOf(ge),ge>=0&&(ge+=me)}return ge%100>=A||ge>=400?0:Math.floor(Math.max(ge,0))};function g(ge,me,Me,Le){var Oe=ge%100;return l.symbolFuncs[Oe](me,Me,Le)+(ge>=200?_:"")}var b={x1:1,x2:0,y1:0,y2:0},v={x1:0,x2:0,y1:1,y2:0},C=M("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:v},verticalreversed:{node:"linearGradient",attrs:v,reversed:!0}};l.gradient=function(ge,me,Me,Le,Oe,_e){for(var Ee=Oe.length,Ze=S[Le],Ge=new Array(Ee),Fe=0;Fe<Ee;Fe++)Ze.reversed?Ge[Ee-1-Fe]=[C((1-Oe[Fe][0])*100),Oe[Fe][1]]:Ge[Fe]=[C(Oe[Fe][0]*100),Oe[Fe][1]];var Re=me._fullLayout,We="g"+Re._uid+"-"+Me,xt=Re._defs.select(".gradients").selectAll("#"+We).data([Le+Ge.join(";")],f.identity);xt.exit().remove(),xt.enter().append(Ze.node).each(function(){var Nt=w.select(this);Ze.attrs&&Nt.attr(Ze.attrs),Nt.attr("id",We);var tr=Nt.selectAll("stop").data(Ge);tr.exit().remove(),tr.enter().append("stop"),tr.each(function(Vt){var Pt=e(Vt[1]);w.select(this).attr({offset:Vt[0]+"%","stop-color":n.tinyRGB(Pt),"stop-opacity":Pt.getAlpha()})})}),ge.style(_e,te(We,me)).style(_e+"-opacity",null),ge.classed("gradient_filled",!0)},l.pattern=function(ge,me,Me,Le,Oe,_e,Ee,Ze,Ge,Fe,Re,We){var xt=me==="legend";Ze&&(Ge==="overlay"?(Fe=Ze,Re=n.contrast(Fe)):(Fe=void 0,Re=Ze));var Nt=Me._fullLayout,tr="p"+Nt._uid+"-"+Le,Vt,Pt,$t=function(kt,jt,Bt,Wt,Qt){return Wt+(Qt-Wt)*(kt-jt)/(Bt-jt)},Ut,Lt,Ye,ot,Ve={},Ae=e(Re),He=n.tinyRGB(Ae),Je=Ae.getAlpha(),tt=We*Je;switch(Oe){case"/":Vt=_e*Math.sqrt(2),Pt=_e*Math.sqrt(2),Ut="M-"+Vt/4+","+Pt/4+"l"+Vt/2+",-"+Pt/2+"M0,"+Pt+"L"+Vt+",0M"+Vt/4*3+","+Pt/4*5+"l"+Vt/2+",-"+Pt/2,Lt=Ee*_e,ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case"\\":Vt=_e*Math.sqrt(2),Pt=_e*Math.sqrt(2),Ut="M"+Vt/4*3+",-"+Pt/4+"l"+Vt/2+","+Pt/2+"M0,0L"+Vt+","+Pt+"M-"+Vt/4+","+Pt/4*3+"l"+Vt/2+","+Pt/2,Lt=Ee*_e,ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case"x":Vt=_e*Math.sqrt(2),Pt=_e*Math.sqrt(2),Ut="M-"+Vt/4+","+Pt/4+"l"+Vt/2+",-"+Pt/2+"M0,"+Pt+"L"+Vt+",0M"+Vt/4*3+","+Pt/4*5+"l"+Vt/2+",-"+Pt/2+"M"+Vt/4*3+",-"+Pt/4+"l"+Vt/2+","+Pt/2+"M0,0L"+Vt+","+Pt+"M-"+Vt/4+","+Pt/4*3+"l"+Vt/2+","+Pt/2,Lt=_e-_e*Math.sqrt(1-Ee),ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case"|":Vt=_e,Pt=_e,ot="path",Ut="M"+Vt/2+",0L"+Vt/2+","+Pt,Lt=Ee*_e,ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case"-":Vt=_e,Pt=_e,ot="path",Ut="M0,"+Pt/2+"L"+Vt+","+Pt/2,Lt=Ee*_e,ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case"+":Vt=_e,Pt=_e,ot="path",Ut="M"+Vt/2+",0L"+Vt/2+","+Pt+"M0,"+Pt/2+"L"+Vt+","+Pt/2,Lt=_e-_e*Math.sqrt(1-Ee),ot="path",Ve={d:Ut,opacity:tt,stroke:He,"stroke-width":Lt+"px"};break;case".":Vt=_e,Pt=_e,Ee<Math.PI/4?Ye=Math.sqrt(Ee*_e*_e/Math.PI):Ye=$t(Ee,Math.PI/4,1,_e/2,_e/Math.sqrt(2)),ot="circle",Ve={cx:Vt/2,cy:Pt/2,r:Ye,opacity:tt,fill:He};break}var St=[Oe||"noSh",Fe||"noBg",Re||"noFg",_e,Ee].join(";"),_t=Nt._defs.select(".patterns").selectAll("#"+tr).data([St],f.identity);_t.exit().remove(),_t.enter().append("pattern").each(function(){var kt=w.select(this);if(kt.attr({id:tr,width:Vt+"px",height:Pt+"px",patternUnits:"userSpaceOnUse",patternTransform:xt?"scale(0.8)":""}),Fe){var jt=e(Fe),Bt=n.tinyRGB(jt),Wt=jt.getAlpha(),Qt=kt.selectAll("rect").data([0]);Qt.exit().remove(),Qt.enter().append("rect").attr({width:Vt+"px",height:Pt+"px",fill:Bt,"fill-opacity":Wt})}var Zt=kt.selectAll(ot).data([0]);Zt.exit().remove(),Zt.enter().append(ot).attr(Ve)}),ge.style("fill",te(tr,Me)).style("fill-opacity",null),ge.classed("pattern_filled",!0)},l.initGradients=function(ge){var me=ge._fullLayout,Me=f.ensureSingle(me._defs,"g","gradients");Me.selectAll("linearGradient,radialGradient").remove(),w.select(ge).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(ge){var me=ge._fullLayout,Me=f.ensureSingle(me._defs,"g","patterns");Me.selectAll("pattern").remove(),w.select(ge).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(ge,me,Me){return ge&&f.isArrayOrTypedArray(ge)?me<ge.length?ge[me]:Me:ge},l.pointStyle=function(ge,me,Me){if(!!ge.size()){var Le=l.makePointStyleFns(me);ge.each(function(Oe){l.singlePointStyle(Oe,w.select(this),me,Le,Me)})}},l.singlePointStyle=function(ge,me,Me,Le,Oe){var _e=Me.marker,Ee=_e.line;if(me.style("opacity",Le.selectedOpacityFn?Le.selectedOpacityFn(ge):ge.mo===void 0?_e.opacity:ge.mo),Le.ms2mrc){var Ze;ge.ms==="various"||_e.size==="various"?Ze=3:Ze=Le.ms2mrc(ge.ms),ge.mrc=Ze,Le.selectedSizeFn&&(Ze=ge.mrc=Le.selectedSizeFn(ge));var Ge=l.symbolNumber(ge.mx||_e.symbol)||0;ge.om=Ge%200>=100;var Fe=ye(ge,Me),Re=ee(ge,Me);me.attr("d",g(Ge,Ze,Fe,Re))}var We=!1,xt,Nt,tr;if(ge.so)tr=Ee.outlierwidth,Nt=Ee.outliercolor,xt=_e.outliercolor;else{var Vt=(Ee||{}).width;tr=(ge.mlw+1||Vt+1||(ge.trace?(ge.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in ge?Nt=ge.mlcc=Le.lineScale(ge.mlc):f.isArrayOrTypedArray(Ee.color)?Nt=n.defaultLine:Nt=Ee.color,f.isArrayOrTypedArray(_e.color)&&(xt=n.defaultLine,We=!0),"mc"in ge?xt=ge.mcc=Le.markerScale(ge.mc):xt=_e.color||"rgba(0,0,0,0)",Le.selectedColorFn&&(xt=Le.selectedColorFn(ge))}if(ge.om)me.call(n.stroke,xt).style({"stroke-width":(tr||1)+"px",fill:"none"});else{me.style("stroke-width",(ge.isBlank?0:tr)+"px");var Pt=_e.gradient,$t=ge.mgt;$t?We=!0:$t=Pt&&Pt.type,f.isArrayOrTypedArray($t)&&($t=$t[0],S[$t]||($t=0));var Ut=_e.pattern,Lt=Ut&&l.getPatternAttr(Ut.shape,ge.i,"");if($t&&$t!=="none"){var Ye=ge.mgc;Ye?We=!0:Ye=Pt.color;var ot=Me.uid;We&&(ot+="-"+ge.i),l.gradient(me,Oe,ot,$t,[[0,Ye],[1,xt]],"fill")}else if(Lt){var Ve=l.getPatternAttr(Ut.bgcolor,ge.i,null),Ae=l.getPatternAttr(Ut.fgcolor,ge.i,null),He=Ut.fgopacity,Je=l.getPatternAttr(Ut.size,ge.i,8),tt=l.getPatternAttr(Ut.solidity,ge.i,.3),St=ge.mcc||f.isArrayOrTypedArray(Ut.shape)||f.isArrayOrTypedArray(Ut.bgcolor)||f.isArrayOrTypedArray(Ut.size)||f.isArrayOrTypedArray(Ut.solidity),_t=Me.uid;St&&(_t+="-"+ge.i),l.pattern(me,"point",Oe,_t,Lt,Je,tt,ge.mcc,Ut.fillmode,Ve,Ae,He)}else n.fill(me,xt);tr&&n.stroke(me,Nt)}},l.makePointStyleFns=function(ge){var me={},Me=ge.marker;return me.markerScale=l.tryColorscale(Me,""),me.lineScale=l.tryColorscale(Me,"line"),a.traceIs(ge,"symbols")&&(me.ms2mrc=p.isBubble(ge)?c(ge):function(){return(Me.size||6)/2}),ge.selectedpoints&&f.extendFlat(me,l.makeSelectedPointStyleFns(ge)),me},l.makeSelectedPointStyleFns=function(ge){var me={},Me=ge.selected||{},Le=ge.unselected||{},Oe=ge.marker||{},_e=Me.marker||{},Ee=Le.marker||{},Ze=Oe.opacity,Ge=_e.opacity,Fe=Ee.opacity,Re=Ge!==void 0,We=Fe!==void 0;(f.isArrayOrTypedArray(Ze)||Re||We)&&(me.selectedOpacityFn=function(Ye){var ot=Ye.mo===void 0?Oe.opacity:Ye.mo;return Ye.selected?Re?Ge:ot:We?Fe:d*ot});var xt=Oe.color,Nt=_e.color,tr=Ee.color;(Nt||tr)&&(me.selectedColorFn=function(Ye){var ot=Ye.mcc||xt;return Ye.selected?Nt||ot:tr||ot});var Vt=Oe.size,Pt=_e.size,$t=Ee.size,Ut=Pt!==void 0,Lt=$t!==void 0;return a.traceIs(ge,"symbols")&&(Ut||Lt)&&(me.selectedSizeFn=function(Ye){var ot=Ye.mrc||Vt/2;return Ye.selected?Ut?Pt/2:ot:Lt?$t/2:ot}),me},l.makeSelectedTextStyleFns=function(ge){var me={},Me=ge.selected||{},Le=ge.unselected||{},Oe=ge.textfont||{},_e=Me.textfont||{},Ee=Le.textfont||{},Ze=Oe.color,Ge=_e.color,Fe=Ee.color;return me.selectedTextColorFn=function(Re){var We=Re.tc||Ze;return Re.selected?Ge||We:Fe||(Ge?We:n.addOpacity(We,d))},me},l.selectedPointStyle=function(ge,me){if(!(!ge.size()||!me.selectedpoints)){var Me=l.makeSelectedPointStyleFns(me),Le=me.marker||{},Oe=[];Me.selectedOpacityFn&&Oe.push(function(_e,Ee){_e.style("opacity",Me.selectedOpacityFn(Ee))}),Me.selectedColorFn&&Oe.push(function(_e,Ee){n.fill(_e,Me.selectedColorFn(Ee))}),Me.selectedSizeFn&&Oe.push(function(_e,Ee){var Ze=Ee.mx||Le.symbol||0,Ge=Me.selectedSizeFn(Ee);_e.attr("d",g(l.symbolNumber(Ze),Ge,ye(Ee,me),ee(Ee,me))),Ee.mrc2=Ge}),Oe.length&&ge.each(function(_e){for(var Ee=w.select(this),Ze=0;Ze<Oe.length;Ze++)Oe[Ze](Ee,_e)})}},l.tryColorscale=function(ge,me){var Me=me?f.nestedProperty(ge,me).get():ge;if(Me){var Le=Me.color;if((Me.colorscale||Me._colorAx)&&f.isArrayOrTypedArray(Le))return r.makeColorScaleFuncFromTrace(Me)}return f.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function E(ge,me,Me,Le,Oe){var _e=w.select(ge.node().parentNode),Ee=me.indexOf("top")!==-1?"top":me.indexOf("bottom")!==-1?"bottom":"middle",Ze=me.indexOf("left")!==-1?"end":me.indexOf("right")!==-1?"start":"middle",Ge=Le?Le/.8+1:0,Fe=(h.lineCount(ge)-1)*y+1,Re=k[Ze]*Ge,We=Me*.75+k[Ee]*Ge+(k[Ee]-1)*Fe*Me/2;ge.attr("text-anchor",Ze),Oe||_e.attr("transform",t(Re,We))}function F(ge,me){var Me=ge.ts||me.textfont.size;return T(Me)&&Me>0?Me:0}l.textPointStyle=function(ge,me,Me){if(!!ge.size()){var Le;if(me.selectedpoints){var Oe=l.makeSelectedTextStyleFns(me);Le=Oe.selectedTextColorFn}var _e=me.texttemplate,Ee=Me._fullLayout;ge.each(function(Ze){var Ge=w.select(this),Fe=_e?f.extractOption(Ze,me,"txt","texttemplate"):f.extractOption(Ze,me,"tx","text");if(!Fe&&Fe!==0){Ge.remove();return}if(_e){var Re=me._module.formatLabels,We=Re?Re(Ze,me,Ee):{},xt={};m(xt,me,Ze.i);var Nt=me._meta||{};Fe=f.texttemplateString(Fe,We,Ee._d3locale,xt,Ze,Nt)}var tr=Ze.tp||me.textposition,Vt=F(Ze,me),Pt=Le?Le(Ze):Ze.tc||me.textfont.color;Ge.call(l.font,Ze.tf||me.textfont.family,Vt,Pt).text(Fe).call(h.convertToTspans,Me).call(E,tr,Vt,Ze.mrc)})}},l.selectedTextStyle=function(ge,me){if(!(!ge.size()||!me.selectedpoints)){var Me=l.makeSelectedTextStyleFns(me);ge.each(function(Le){var Oe=w.select(this),_e=Me.selectedTextColorFn(Le),Ee=Le.tp||me.textposition,Ze=F(Le,me);n.fill(Oe,_e);var Ge=a.traceIs(me,"bar-like");E(Oe,Ee,Ze,Le.mrc2||Le.mrc,Ge)})}};var I=.5;l.smoothopen=function(ge,me){if(ge.length<3)return"M"+ge.join("L");var Me="M"+ge[0],Le=[],Oe;for(Oe=1;Oe<ge.length-1;Oe++)Le.push(G(ge[Oe-1],ge[Oe],ge[Oe+1],me));for(Me+="Q"+Le[0][0]+" "+ge[1],Oe=2;Oe<ge.length-1;Oe++)Me+="C"+Le[Oe-2][1]+" "+Le[Oe-1][0]+" "+ge[Oe];return Me+="Q"+Le[ge.length-3][1]+" "+ge[ge.length-1],Me},l.smoothclosed=function(ge,me){if(ge.length<3)return"M"+ge.join("L")+"Z";var Me="M"+ge[0],Le=ge.length-1,Oe=[G(ge[Le],ge[0],ge[1],me)],_e;for(_e=1;_e<Le;_e++)Oe.push(G(ge[_e-1],ge[_e],ge[_e+1],me));for(Oe.push(G(ge[Le-1],ge[Le],ge[0],me)),_e=1;_e<=Le;_e++)Me+="C"+Oe[_e-1][1]+" "+Oe[_e][0]+" "+ge[_e];return Me+="C"+Oe[Le][1]+" "+Oe[0][0]+" "+ge[0]+"Z",Me};var D,R;function O(ge,me,Me){return Me&&(ge=j(ge)),me?B(ge[1]):z(ge[0])}function z(ge){var me=w.round(ge,2);return D=me,me}function B(ge){var me=w.round(ge,2);return R=me,me}function G(ge,me,Me,Le){var Oe=ge[0]-me[0],_e=ge[1]-me[1],Ee=Me[0]-me[0],Ze=Me[1]-me[1],Ge=Math.pow(Oe*Oe+_e*_e,I/2),Fe=Math.pow(Ee*Ee+Ze*Ze,I/2),Re=(Fe*Fe*Oe-Ge*Ge*Ee)*Le,We=(Fe*Fe*_e-Ge*Ge*Ze)*Le,xt=3*Fe*(Ge+Fe),Nt=3*Ge*(Ge+Fe);return[[z(me[0]+(xt&&Re/xt)),B(me[1]+(xt&&We/xt))],[z(me[0]-(Nt&&Re/Nt)),B(me[1]-(Nt&&We/Nt))]]}var Q={hv:function(ge,me,Me){return"H"+z(me[0])+"V"+O(me,1,Me)},vh:function(ge,me,Me){return"V"+B(me[1])+"H"+O(me,0,Me)},hvh:function(ge,me,Me){return"H"+z((ge[0]+me[0])/2)+"V"+B(me[1])+"H"+O(me,0,Me)},vhv:function(ge,me,Me){return"V"+B((ge[1]+me[1])/2)+"H"+z(me[0])+"V"+O(me,1,Me)}},X=function(ge,me,Me){return"L"+O(me,0,Me)+","+O(me,1,Me)};l.steps=function(ge){var me=Q[ge]||X;return function(Me){for(var Le="M"+z(Me[0][0])+","+B(Me[0][1]),Oe=Me.length,_e=1;_e<Oe;_e++)Le+=me(Me[_e-1],Me[_e],_e===Oe-1);return Le}};function j(ge,me){var Me=ge.backoff,Le=ge.trace,Oe=ge.d,_e=ge.i;if(Me&&Le&&Le.marker&&Le.marker.angle%360===0&&Le.line&&Le.line.shape!=="spline"){var Ee=f.isArrayOrTypedArray(Me),Ze=ge,Ge=me?me[0]:D||0,Fe=me?me[1]:R||0,Re=Ze[0],We=Ze[1],xt=Re-Ge,Nt=We-Fe,tr=Math.atan2(Nt,xt),Vt=Ee?Me[_e]:Me;if(Vt==="auto"){var Pt=Ze.i;Le.type==="scatter"&&Pt--;var $t=Ze.marker;Vt=$t?l.symbolBackOffs[l.symbolNumber($t.symbol)]*$t.size:0,Vt+=l.getMarkerStandoff(Oe[Pt],Le)||0}var Ut=Re-Vt*Math.cos(tr),Lt=We-Vt*Math.sin(tr);(Ut<=Re&&Ut>=Ge||Ut>=Re&&Ut<=Ge)&&(Lt<=We&&Lt>=Fe||Lt>=We&&Lt<=Fe)&&(ge=[Ut,Lt])}return ge}l.applyBackoff=j,l.makeTester=function(){var ge=f.ensureSingleById(w.select("body"),"svg","js-plotly-tester",function(Me){Me.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),me=f.ensureSingle(ge,"path","js-reference-point",function(Me){Me.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=ge,l.testref=me},l.savedBBoxes={};var re=0,ue=1e4;l.bBox=function(ge,me,Me){Me||(Me=K(ge));var Le;if(Me){if(Le=l.savedBBoxes[Me],Le)return f.extendFlat({},Le)}else if(ge.childNodes.length===1){var Oe=ge.childNodes[0];if(Me=K(Oe),Me){var _e=+Oe.getAttribute("x")||0,Ee=+Oe.getAttribute("y")||0,Ze=Oe.getAttribute("transform");if(!Ze){var Ge=l.bBox(Oe,!1,Me);return _e&&(Ge.left+=_e,Ge.right+=_e),Ee&&(Ge.top+=Ee,Ge.bottom+=Ee),Ge}if(Me+="~"+_e+"~"+Ee+"~"+Ze,Le=l.savedBBoxes[Me],Le)return f.extendFlat({},Le)}}var Fe,Re;me?Fe=ge:(Re=l.tester.node(),Fe=ge.cloneNode(!0),Re.appendChild(Fe)),w.select(Fe).attr("transform",null).call(h.positionText,0,0);var We=Fe.getBoundingClientRect(),xt=l.testref.node().getBoundingClientRect();me||Re.removeChild(Fe);var Nt={height:We.height,width:We.width,left:We.left-xt.left,top:We.top-xt.top,right:We.right-xt.left,bottom:We.bottom-xt.top};return re>=ue&&(l.savedBBoxes={},re=0),Me&&(l.savedBBoxes[Me]=Nt),re++,f.extendFlat({},Nt)};function K(ge){var me=ge.getAttribute("data-unformatted");if(me!==null)return me+ge.getAttribute("data-math")+ge.getAttribute("text-anchor")+ge.getAttribute("style")}l.setClipUrl=function(ge,me,Me){ge.attr("clip-path",te(me,Me))};function te(ge,me){if(!ge)return null;var Me=me._context,Le=Me._exportedPlot?"":Me._baseUrl||"";return Le?"url('"+Le+"#"+ge+"')":"url(#"+ge+")"}l.getTranslate=function(ge){var me=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Me=ge.attr?"attr":"getAttribute",Le=ge[Me]("transform")||"",Oe=Le.replace(me,function(_e,Ee,Ze){return[Ee,Ze].join(" ")}).split(" ");return{x:+Oe[0]||0,y:+Oe[1]||0}},l.setTranslate=function(ge,me,Me){var Le=/(\btranslate\(.*?\);?)/,Oe=ge.attr?"attr":"getAttribute",_e=ge.attr?"attr":"setAttribute",Ee=ge[Oe]("transform")||"";return me=me||0,Me=Me||0,Ee=Ee.replace(Le,"").trim(),Ee+=t(me,Me),Ee=Ee.trim(),ge[_e]("transform",Ee),Ee},l.getScale=function(ge){var me=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Me=ge.attr?"attr":"getAttribute",Le=ge[Me]("transform")||"",Oe=Le.replace(me,function(_e,Ee,Ze){return[Ee,Ze].join(" ")}).split(" ");return{x:+Oe[0]||1,y:+Oe[1]||1}},l.setScale=function(ge,me,Me){var Le=/(\bscale\(.*?\);?)/,Oe=ge.attr?"attr":"getAttribute",_e=ge.attr?"attr":"setAttribute",Ee=ge[Oe]("transform")||"";return me=me||1,Me=Me||1,Ee=Ee.replace(Le,"").trim(),Ee+="scale("+me+","+Me+")",Ee=Ee.trim(),ge[_e]("transform",Ee),Ee};var Y=/\s*sc.*/;l.setPointGroupScale=function(ge,me,Me){if(me=me||1,Me=Me||1,!!ge){var Le=me===1&&Me===1?"":"scale("+me+","+Me+")";ge.each(function(){var Oe=(this.getAttribute("transform")||"").replace(Y,"");Oe+=Le,Oe=Oe.trim(),this.setAttribute("transform",Oe)})}};var V=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(ge,me,Me){!ge||ge.each(function(){var Le,Oe=w.select(this),_e=Oe.select("text");if(!!_e.node()){var Ee=parseFloat(_e.attr("x")||0),Ze=parseFloat(_e.attr("y")||0),Ge=(Oe.attr("transform")||"").match(V);me===1&&Me===1?Le=[]:Le=[t(Ee,Ze),"scale("+me+","+Me+")",t(-Ee,-Ze)],Ge&&Le.push(Ge),Oe.attr("transform",Le.join(""))}})};function ee(ge,me){var Me;return ge&&(Me=ge.mf),Me===void 0&&(Me=me.marker&&me.marker.standoff||0),!me._geo&&!me._xA?-Me:Me}l.getMarkerStandoff=ee;var ne=Math.atan2,Z=Math.cos,q=Math.sin;function ie(ge,me){var Me=me[0],Le=me[1];return[Me*Z(ge)-Le*q(ge),Me*q(ge)+Le*Z(ge)]}var se,ae,oe,be,ce,de;function ye(ge,me){var Me=ge.ma;Me===void 0&&(Me=me.marker.angle||0);var Le,Oe,_e=me.marker.angleref;if(_e==="previous"||_e==="north"){if(me._geo){var Ee=me._geo.project(ge.lonlat);Le=Ee[0],Oe=Ee[1]}else{var Ze=me._xA,Ge=me._yA;if(Ze&&Ge)Le=Ze.c2p(ge.x),Oe=Ge.c2p(ge.y);else return 90}if(me._geo){var Fe=ge.lonlat[0],Re=ge.lonlat[1],We=me._geo.project([Fe,Re+1e-5]),xt=me._geo.project([Fe+1e-5,Re]),Nt=ne(xt[1]-Oe,xt[0]-Le),tr=ne(We[1]-Oe,We[0]-Le),Vt;if(_e==="north")Vt=Me/180*Math.PI;else if(_e==="previous"){var Pt=Fe/180*Math.PI,$t=Re/180*Math.PI,Ut=se/180*Math.PI,Lt=ae/180*Math.PI,Ye=Ut-Pt,ot=Z(Lt)*q(Ye),Ve=q(Lt)*Z($t)-Z(Lt)*q($t)*Z(Ye);Vt=-ne(ot,Ve)-Math.PI,se=Fe,ae=Re}var Ae=ie(Nt,[Z(Vt),0]),He=ie(tr,[q(Vt),0]);Me=ne(Ae[1]+He[1],Ae[0]+He[0])/Math.PI*180,_e==="previous"&&!(de===me.uid&&ge.i===ce+1)&&(Me=null)}if(_e==="previous"&&!me._geo)if(de===me.uid&&ge.i===ce+1&&T(Le)&&T(Oe)){var Je=Le-oe,tt=Oe-be,St=me.line&&me.line.shape||"",_t=St.slice(St.length-1);_t==="h"&&(tt=0),_t==="v"&&(Je=0),Me+=ne(tt,Je)/Math.PI*180+90}else Me=null}return oe=Le,be=Oe,ce=ge.i,de=me.uid,Me}l.getMarkerAngle=ye},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(o,U,H){var w=o("parse-svg-path"),f=o("@plotly/d3").round,M="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,n=Math.cos,r=Math.sin;U.exports={circle:{n:0,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return m?d(c,m,x):x}},square:{n:1,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(p,c,m){if(t(c))return M;var l=f(p*.4,2),x=f(p*1.2,2);return d(c,m,"M"+x+","+l+"H"+l+"V"+x+"H-"+l+"V"+l+"H-"+x+"V-"+l+"H-"+l+"V-"+x+"H"+l+"V-"+l+"H"+x+"Z")}},x:{n:4,f:function(p,c,m){if(t(c))return M;var l=f(p*.8/T,2),x="l"+l+","+l,u="l"+l+",-"+l,A="l-"+l+",-"+l,_="l-"+l+","+l;return d(c,m,"M0,"+l+x+u+A+u+A+_+A+_+x+_+x+"Z")}},"triangle-up":{n:5,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+l+","+x+"H"+l+"L0,-"+u+"Z")}},"triangle-down":{n:6,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+l+",-"+x+"H"+l+"L0,"+u+"Z")}},"triangle-left":{n:7,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M"+x+",-"+l+"V"+l+"L-"+u+",0Z")}},"triangle-right":{n:8,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+x+",-"+l+"V"+l+"L"+u+",0Z")}},"triangle-ne":{n:9,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M-"+x+",-"+l+"H"+l+"V"+x+"Z")}},"triangle-se":{n:10,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M"+l+",-"+x+"V"+l+"H-"+x+"Z")}},"triangle-sw":{n:11,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M"+x+","+l+"H-"+l+"V-"+x+"Z")}},"triangle-nw":{n:12,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M-"+l+","+x+"V-"+l+"H"+x+"Z")}},pentagon:{n:13,f:function(p,c,m){if(t(c))return M;var l=f(p*.951,2),x=f(p*.588,2),u=f(-p,2),A=f(p*-.309,2),_=f(p*.809,2);return d(c,m,"M"+l+","+A+"L"+x+","+_+"H-"+x+"L-"+l+","+A+"L0,"+u+"Z")}},hexagon:{n:14,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/2,2),u=f(p*e/2,2);return d(c,m,"M"+u+",-"+x+"V"+x+"L0,"+l+"L-"+u+","+x+"V-"+x+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/2,2),u=f(p*e/2,2);return d(c,m,"M-"+x+","+u+"H"+x+"L"+l+",0L"+x+",-"+u+"H-"+x+"L-"+l+",0Z")}},octagon:{n:16,f:function(p,c,m){if(t(c))return M;var l=f(p*.924,2),x=f(p*.383,2);return d(c,m,"M-"+x+",-"+l+"H"+x+"L"+l+",-"+x+"V"+x+"L"+x+","+l+"H-"+x+"L-"+l+","+x+"V-"+x+"Z")}},star:{n:17,f:function(p,c,m){if(t(c))return M;var l=p*1.4,x=f(l*.225,2),u=f(l*.951,2),A=f(l*.363,2),_=f(l*.588,2),g=f(-l,2),b=f(l*-.309,2),v=f(l*.118,2),C=f(l*.809,2),S=f(l*.382,2);return d(c,m,"M"+x+","+b+"H"+u+"L"+A+","+v+"L"+_+","+C+"L0,"+S+"L-"+_+","+C+"L-"+A+","+v+"L-"+u+","+b+"H-"+x+"L0,"+g+"Z")}},hexagram:{n:18,f:function(p,c,m){if(t(c))return M;var l=f(p*.66,2),x=f(p*.38,2),u=f(p*.76,2);return d(c,m,"M-"+u+",0l-"+x+",-"+l+"h"+u+"l"+x+",-"+l+"l"+x+","+l+"h"+u+"l-"+x+","+l+"l"+x+","+l+"h-"+u+"l-"+x+","+l+"l-"+x+",-"+l+"h-"+u+"Z")}},"star-triangle-up":{n:19,f:function(p,c,m){if(t(c))return M;var l=f(p*e*.8,2),x=f(p*.8,2),u=f(p*1.6,2),A=f(p*4,2),_="A "+A+","+A+" 0 0 1 ";return d(c,m,"M-"+l+","+x+_+l+","+x+_+"0,-"+u+_+"-"+l+","+x+"Z")}},"star-triangle-down":{n:20,f:function(p,c,m){if(t(c))return M;var l=f(p*e*.8,2),x=f(p*.8,2),u=f(p*1.6,2),A=f(p*4,2),_="A "+A+","+A+" 0 0 1 ";return d(c,m,"M"+l+",-"+x+_+"-"+l+",-"+x+_+"0,"+u+_+l+",-"+x+"Z")}},"star-square":{n:21,f:function(p,c,m){if(t(c))return M;var l=f(p*1.1,2),x=f(p*2,2),u="A "+x+","+x+" 0 0 1 ";return d(c,m,"M-"+l+",-"+l+u+"-"+l+","+l+u+l+","+l+u+l+",-"+l+u+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2),x=f(p*1.9,2),u="A "+x+","+x+" 0 0 1 ";return d(c,m,"M-"+l+",0"+u+"0,"+l+u+l+",0"+u+"0,-"+l+u+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(p,c,m){if(t(c))return M;var l=f(p*.7,2),x=f(p*1.4,2);return d(c,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2),x=f(p*.7,2);return d(c,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},hourglass:{n:25,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/T,2);return d(c,m,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2),x=f(p*.65,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*.85,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,m){if(t(c))return M;var l=f(p/2,2),x=f(p,2);return d(c,m,"M"+l+","+x+"V-"+x+"M"+(l-x)+",-"+x+"V"+x+"M"+x+","+l+"H-"+x+"M-"+x+","+(l-x)+"H"+x)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+l+","+u+"L0,0M"+l+","+u+"L0,0M0,-"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+l+",-"+u+"L0,0M"+l+",-"+u+"L0,0M0,"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M"+u+","+l+"L0,0M"+u+",-"+l+"L0,0M-"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+u+","+l+"L0,0M-"+u+",-"+l+"L0,0M"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M0,0L-"+l+",-"+x+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,0L"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,0L-"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+x+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,-"+x+"V"+x+"M0,0L"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,-"+x+"V"+x+"M0,0L-"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,m){if(t(c))return M;var l=a/2.5,x=2*p*n(l),u=2*p*r(l);return d(c,m,"M0,0L"+-x+","+u+"L"+x+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,m){if(t(c))return M;var l=a/4,x=2*p*n(l),u=2*p*r(l);return d(c,m,"M0,0L"+-x+","+u+"A "+2*p+","+2*p+" 0 0 1 "+x+","+u+"Z")},backoff:.4,noDot:!0}};function t(p){return p===null}var h,i,s,y;function d(p,c,m){if((!p||p%360===0)&&!c)return m;if(s===p&&y===c&&h===m)return i;s=p,y=c,h=m;function l(I,D){var R=n(I),O=r(I),z=D[0],B=D[1]+(c||0);return[z*R-B*O,z*O+B*R]}for(var x=p/180*a,u=0,A=0,_=w(m),g="",b=0;b<_.length;b++){var v=_[b],C=v[0],S=u,k=A;if(C==="M"||C==="L")u=+v[1],A=+v[2];else if(C==="m"||C==="l")u+=+v[1],A+=+v[2];else if(C==="H")u=+v[1];else if(C==="h")u+=+v[1];else if(C==="V")A=+v[1];else if(C==="v")A+=+v[1];else if(C==="A"){u=+v[1],A=+v[2];var E=l(x,[+v[6],+v[7]]);v[6]=E[0],v[7]=E[1],v[3]=+v[3]+p}(C==="H"||C==="V")&&(C="L"),(C==="h"||C==="v")&&(C="l"),(C==="m"||C==="l")&&(u-=S,A-=k);var F=l(x,[u,A]);(C==="H"||C==="V")&&(C="L"),(C==="M"||C==="L"||C==="m"||C==="l")&&(v[1]=F[0],v[2]=F[1]),v[0]=C,g+=v[0]+v.slice(1).join(",")}return i=g,g}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(o,U,H){U.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../registry"),M=o("../../plots/cartesian/axes"),T=o("../../lib"),e=o("./compute_error");U.exports=function(r){for(var t=r.calcdata,h=0;h<t.length;h++){var i=t[h],s=i[0].trace;if(s.visible===!0&&f.traceIs(s,"errorBarsOK")){var y=M.getFromId(r,s.xaxis),d=M.getFromId(r,s.yaxis);a(i,s,y,"x"),a(i,s,d,"y")}}};function a(n,r,t,h){var i=r["error_"+h]||{},s=i.visible&&["linear","log"].indexOf(t.type)!==-1,y=[];if(!!s){for(var d=e(i),p=0;p<n.length;p++){var c=n[p],m=c.i;if(m===void 0)m=p;else if(m===null)continue;var l=c[h];if(!!w(t.c2l(l))){var x=d(l,m);if(w(x[0])&&w(x[1])){var u=c[h+"s"]=l-x[0],A=c[h+"h"]=l+x[1];y.push(u,A)}}}var _=t._id,g=r._extremes[_],b=M.findExtremes(t,y,T.extendFlat({tozero:g.opts.tozero},{padded:!0}));g.min=g.min.concat(b.min),g.max=g.max.concat(b.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(o,U,H){U.exports=function(M){var T=M.type,e=M.symmetric;if(T==="data"){var a=M.array||[];if(e)return function(i,s){var y=+a[s];return[y,y]};var n=M.arrayminus||[];return function(i,s){var y=+a[s],d=+n[s];return!isNaN(y)||!isNaN(d)?[d||0,y||0]:[NaN,NaN]}}else{var r=w(T,M.value),t=w(T,M.valueminus);return e||M.valueminus===void 0?function(i){var s=r(i);return[s,s]}:function(i){return[t(i),r(i)]}}};function w(f,M){if(f==="percent")return function(T){return Math.abs(T*M/100)};if(f==="constant")return function(){return Math.abs(M)};if(f==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../registry"),M=o("../../lib"),T=o("../../plot_api/plot_template"),e=o("./attributes");U.exports=function(a,n,r,t){var h="error_"+t.axis,i=T.newContainer(n,h),s=a[h]||{};function y(u,A){return M.coerce(s,i,e,u,A)}var d=s.array!==void 0||s.value!==void 0||s.type==="sqrt",p=y("visible",d);if(p!==!1){var c=y("type","array"in s?"data":"percent"),m=!0;c!=="sqrt"&&(m=y("symmetric",!((c==="data"?"arrayminus":"valueminus")in s))),c==="data"?(y("array"),y("traceref"),m||(y("arrayminus"),y("tracerefminus"))):(c==="percent"||c==="constant")&&(y("value"),m||y("valueminus"));var l="copy_"+t.inherit+"style";if(t.inherit){var x=n["error_"+t.inherit];(x||{}).visible&&y(l,!(s.color||w(s.thickness)||w(s.width)))}(!t.inherit||!i[l])&&(y("color",r),y("thickness"),y("width",f.traceIs(n,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(o,U,H){var w=o("../../lib"),f=o("../../plot_api/edit_types").overrideAll,M=o("./attributes"),T={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M),error_z:w.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,U.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:f(e,"calc","nested"),scattergl:f(T,"calc","nested")}},supplyDefaults:o("./defaults"),calc:o("./calc"),makeComputeError:o("./compute_error"),plot:o("./plot"),style:o("./style"),hoverInfo:a};function a(n,r,t){(r.error_y||{}).visible&&(t.yerr=n.yh-n.y,r.error_y.symmetric||(t.yerrneg=n.y-n.ys)),(r.error_x||{}).visible&&(t.xerr=n.xh-n.x,r.error_x.symmetric||(t.xerrneg=n.x-n.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../drawing"),T=o("../../traces/scatter/subtypes");U.exports=function(n,r,t,h){var i,s=t.xaxis,y=t.yaxis,d=h&&h.duration>0;r.each(function(p){var c=p[0].trace,m=c.error_x||{},l=c.error_y||{},x;c.ids&&(x=function(g){return g.id});var u=T.hasMarkers(c)&&c.marker.maxdisplayed>0;!l.visible&&!m.visible&&(p=[]);var A=w.select(this).selectAll("g.errorbar").data(p,x);if(A.exit().remove(),!!p.length){m.visible||A.selectAll("path.xerror").remove(),l.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var _=A.enter().append("g").classed("errorbar",!0);d&&_.style("opacity",0).transition().duration(h.duration).style("opacity",1),M.setClipUrl(A,t.layerClipId,n),A.each(function(g){var b=w.select(this),v=e(g,s,y);if(!(u&&!g.vis)){var C,S=b.select("path.yerror");if(l.visible&&f(v.x)&&f(v.yh)&&f(v.ys)){var k=l.width;C="M"+(v.x-k)+","+v.yh+"h"+2*k+"m-"+k+",0V"+v.ys,v.noYS||(C+="m-"+k+",0h"+2*k),i=!S.size(),i?S=b.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(S=S.transition().duration(h.duration).ease(h.easing)),S.attr("d",C)}else S.remove();var E=b.select("path.xerror");if(m.visible&&f(v.y)&&f(v.xh)&&f(v.xs)){var F=(m.copy_ystyle?l:m).width;C="M"+v.xh+","+(v.y-F)+"v"+2*F+"m0,-"+F+"H"+v.xs,v.noXS||(C+="m0,-"+F+"v"+2*F),i=!E.size(),i?E=b.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(E=E.transition().duration(h.duration).ease(h.easing)),E.attr("d",C)}else E.remove()}})}})};function e(a,n,r){var t={x:n.c2p(a.x),y:r.c2p(a.y)};return a.yh!==void 0&&(t.yh=r.c2p(a.yh),t.ys=r.c2p(a.ys),f(t.ys)||(t.noYS=!0,t.ys=r.c2p(a.ys,!0))),a.xh!==void 0&&(t.xh=n.c2p(a.xh),t.xs=n.c2p(a.xs),f(t.xs)||(t.noXS=!0,t.xs=n.c2p(a.xs,!0))),t}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(o,U,H){var w=o("@plotly/d3"),f=o("../color");U.exports=function(T){T.each(function(e){var a=e[0].trace,n=a.error_y||{},r=a.error_x||{},t=w.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(f.stroke,n.color),r.copy_ystyle&&(r=n),t.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(f.stroke,r.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("./layout_attributes").hoverlabel,M=o("../../lib/extend").extendFlat;U.exports={hoverlabel:{bgcolor:M({},f.bgcolor,{arrayOk:!0}),bordercolor:M({},f.bordercolor,{arrayOk:!0}),font:w({arrayOk:!0,editType:"none"}),align:M({},f.align,{arrayOk:!0}),namelength:M({},f.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(o,U,H){var w=o("../../lib"),f=o("../../registry");U.exports=function(e){var a=e.calcdata,n=e._fullLayout;function r(y){return function(d){return w.coerceHoverinfo({hoverinfo:d},{_module:y._module},n)}}for(var t=0;t<a.length;t++){var h=a[t],i=h[0].trace;if(!f.traceIs(i,"pie-like")){var s=f.traceIs(i,"2dMap")?M:w.fillArray;s(i.hoverinfo,h,"hi",r(i)),i.hovertemplate&&s(i.hovertemplate,h,"ht"),i.hoverlabel&&(s(i.hoverlabel.bgcolor,h,"hbg"),s(i.hoverlabel.bordercolor,h,"hbc"),s(i.hoverlabel.font.size,h,"hts"),s(i.hoverlabel.font.color,h,"htc"),s(i.hoverlabel.font.family,h,"htf"),s(i.hoverlabel.namelength,h,"hnl"),s(i.hoverlabel.align,h,"hta"))}}};function M(T,e,a,n){n=n||w.identity,Array.isArray(T)&&(e[0][a]=n(T))}},{"../../lib":515,"../../registry":647}],400:[function(o,U,H){var w=o("../../registry"),f=o("./hover").hover;U.exports=function(T,e,a){var n=w.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&f(T,e,a,!0);function r(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(n&&n.then?n.then(r):r(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(o,U,H){U.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("./hoverlabel_defaults");U.exports=function(e,a,n,r){function t(i,s){return w.coerce(e,a,f,i,s)}var h=w.extendFlat({},r.hoverlabel);a.hovertemplate&&(h.namelength=-1),M(e,a,t,h)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(o,U,H){var w=o("../../lib");H.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},H.isTraceInSubplots=function(n,r){if(n.type==="splom"){for(var t=n.xaxes||[],h=n.yaxes||[],i=0;i<t.length;i++)for(var s=0;s<h.length;s++)if(r.indexOf(t[i]+h[s])!==-1)return!0;return!1}return r.indexOf(H.getSubplot(n))!==-1},H.flat=function(n,r){for(var t=new Array(n.length),h=0;h<n.length;h++)t[h]=r;return t},H.p2c=function(n,r){for(var t=new Array(n.length),h=0;h<n.length;h++)t[h]=n[h].p2c(r);return t},H.getDistanceFunction=function(n,r,t,h){return n==="closest"?h||H.quadrature(r,t):n.charAt(0)==="x"?r:t},H.getClosest=function(n,r,t){if(t.index!==!1)t.index>=0&&t.index<n.length?t.distance=0:t.index=!1;else for(var h=0;h<n.length;h++){var i=r(n[h]);i<=t.distance&&(t.index=h,t.distance=i)}return t},H.inbox=function(n,r,t){return n*r<0||n===0?t:1/0},H.quadrature=function(n,r){return function(t){var h=n(t),i=r(t);return Math.sqrt(h*h+i*i)}},H.makeEventData=function(n,r,t){var h="index"in n?n.index:n.pointNumber,i={data:r._input,fullData:r,curveNumber:r.index,pointNumber:h};if(r._indexToPoints){var s=r._indexToPoints[h];s.length===1?i.pointIndex=s[0]:i.pointIndices=s}else i.pointIndex=h;return r._module.eventData?i=r._module.eventData(i,n,r,t,h):("xVal"in n?i.x=n.xVal:"x"in n&&(i.x=n.x),"yVal"in n?i.y=n.yVal:"y"in n&&(i.y=n.y),n.xa&&(i.xaxis=n.xa),n.ya&&(i.yaxis=n.ya),n.zLabelVal!==void 0&&(i.z=n.zLabelVal)),H.appendArrayPointValue(i,r,h),i},H.appendArrayPointValue=function(n,r,t){var h=r._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],y=M(s);if(n[y]===void 0){var d=w.nestedProperty(r,s).get(),p=T(d,t);p!==void 0&&(n[y]=p)}}},H.appendArrayMultiPointValues=function(n,r,t){var h=r._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],y=M(s);if(n[y]===void 0){for(var d=w.nestedProperty(r,s).get(),p=new Array(t.length),c=0;c<t.length;c++)p[c]=T(d,t[c]);n[y]=p}}};var f={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(n){return f[n]||n}function T(n,r){if(Array.isArray(r)){if(Array.isArray(n)&&Array.isArray(n[r[0]]))return n[r[0]][r[1]]}else return n[r]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};H.isUnifiedHover=function(n){return typeof n!="string"?!1:!!a[n]},H.isXYhover=function(n){return typeof n!="string"?!1:!!e[n]}},{"../../lib":515}],404:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("tinycolor2"),T=o("../../lib"),e=T.strTranslate,a=T.strRotate,n=o("../../lib/events"),r=o("../../lib/svg_text_utils"),t=o("../../lib/override_cursor"),h=o("../drawing"),i=o("../color"),s=o("../dragelement"),y=o("../../plots/cartesian/axes"),d=o("../../registry"),p=o("./helpers"),c=o("./constants"),m=o("../legend/defaults"),l=o("../legend/draw"),x=c.YANGLE,u=Math.PI*x/180,A=1/Math.sin(u),_=Math.cos(u),g=Math.sin(u),b=c.HOVERARROWSIZE,v=c.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};H.hover=function(V,ee,ne,Z){V=T.getGraphDiv(V);var q=ee.target;T.throttle(V._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){k(V,ee,ne,Z,q)})},H.loneHover=function(V,ee){var ne=!0;Array.isArray(V)||(ne=!1,V=[V]);var Z=ee.gd,q=ue(Z),ie=K(Z),se=V.map(function(me){var Me=me._x0||me.x0||me.x||0,Le=me._x1||me.x1||me.x||0,Oe=me._y0||me.y0||me.y||0,_e=me._y1||me.y1||me.y||0,Ee=me.eventData;if(Ee){var Ze=Math.min(Me,Le),Ge=Math.max(Me,Le),Fe=Math.min(Oe,_e),Re=Math.max(Oe,_e),We=me.trace;if(d.traceIs(We,"gl3d")){var xt=Z._fullLayout[We.scene]._scene.container,Nt=xt.offsetLeft,tr=xt.offsetTop;Ze+=Nt,Ge+=Nt,Fe+=tr,Re+=tr}Ee.bbox={x0:Ze+ie,x1:Ge+ie,y0:Fe+q,y1:Re+q},ee.inOut_bbox&&ee.inOut_bbox.push(Ee.bbox)}else Ee=!1;return{color:me.color||i.defaultLine,x0:me.x0||me.x||0,x1:me.x1||me.x||0,y0:me.y0||me.y||0,y1:me.y1||me.y||0,xLabel:me.xLabel,yLabel:me.yLabel,zLabel:me.zLabel,text:me.text,name:me.name,idealAlign:me.idealAlign,borderColor:me.borderColor,fontFamily:me.fontFamily,fontSize:me.fontSize,fontColor:me.fontColor,nameLength:me.nameLength,textAlign:me.textAlign,trace:me.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:me.hovertemplate||!1,hovertemplateLabels:me.hovertemplateLabels||!1,eventData:Ee}}),ae=!1,oe=I(se,{gd:Z,hovermode:"closest",rotateLabels:ae,bgColor:ee.bgColor||i.background,container:w.select(ee.container),outerContainer:ee.outerContainer||ee.container}),be=5,ce=0,de=0;oe.sort(function(me,Me){return me.y0-Me.y0}).each(function(me,Me){var Le=me.y0-me.by/2;Le-be<ce?me.offset=ce-Le+be:me.offset=0,ce=Le+me.by+me.offset,Me===ee.anchorIndex&&(de=me.offset)}).each(function(me){me.offset-=de});var ye=Z._fullLayout._invScaleX,ge=Z._fullLayout._invScaleY;return O(oe,ae,ye,ge),ne?oe:oe.node()};function k(Y,V,ee,ne,Z){ee||(ee="xy");var q=Array.isArray(ee)?ee:[ee],ie=Y._fullLayout,se=ie._plots||[],ae=se[ee],oe=ie._has("cartesian");if(ae){var be=ae.overlays.map(function(hr){return hr.id});q=q.concat(be)}for(var ce=q.length,de=new Array(ce),ye=new Array(ce),ge=!1,me=0;me<ce;me++){var Me=q[me];if(se[Me])ge=!0,de[me]=se[Me].xaxis,ye[me]=se[Me].yaxis;else if(ie[Me]&&ie[Me]._subplot){var Le=ie[Me]._subplot;de[me]=Le.xaxis,ye[me]=Le.yaxis}else{T.warn("Unrecognized subplot: "+Me);return}}var Oe=V.hovermode||ie.hovermode;if(Oe&&!ge&&(Oe="closest"),["x","y","closest","x unified","y unified"].indexOf(Oe)===-1||!Y.calcdata||Y.querySelector(".zoombox")||Y._dragging)return s.unhoverRaw(Y,V);var _e=ie.hoverdistance;_e===-1&&(_e=1/0);var Ee=ie.spikedistance;Ee===-1&&(Ee=1/0);var Ze=[],Ge=[],Fe,Re,We,xt,Nt,tr,Vt,Pt,$t,Ut,Lt,Ye,ot,Ve={hLinePoint:null,vLinePoint:null},Ae=!1;if(Array.isArray(V))for(Oe="array",We=0;We<V.length;We++)Nt=Y.calcdata[V[We].curveNumber||0],Nt&&(tr=Nt[0].trace,Nt[0].trace.hoverinfo!=="skip"&&(Ge.push(Nt),tr.orientation==="h"&&(Ae=!0)));else{for(xt=0;xt<Y.calcdata.length;xt++)Nt=Y.calcdata[xt],tr=Nt[0].trace,tr.hoverinfo!=="skip"&&p.isTraceInSubplots(tr,q)&&(Ge.push(Nt),tr.orientation==="h"&&(Ae=!0));var He=!Z,Je,tt;if(He)"xpx"in V?Je=V.xpx:Je=de[0]._length/2,"ypx"in V?tt=V.ypx:tt=ye[0]._length/2;else{if(n.triggerHandler(Y,"plotly_beforehover",V)===!1)return;var St=Z.getBoundingClientRect();Je=V.clientX-St.left,tt=V.clientY-St.top,ie._calcInverseTransform(Y);var _t=T.apply3DTransform(ie._invTransform)(Je,tt);if(Je=_t[0],tt=_t[1],Je<0||Je>de[0]._length||tt<0||tt>ye[0]._length)return s.unhoverRaw(Y,V)}if(V.pointerX=Je+de[0]._offset,V.pointerY=tt+ye[0]._offset,"xval"in V?Fe=p.flat(q,V.xval):Fe=p.p2c(de,Je),"yval"in V?Re=p.flat(q,V.yval):Re=p.p2c(ye,tt),!f(Fe[0])||!f(Re[0]))return T.warn("Fx.hover failed",V,Y),s.unhoverRaw(Y,V)}var kt=1/0;function jt(hr,Ur){for(xt=0;xt<Ge.length;xt++)if(Nt=Ge[xt],!(!Nt||!Nt[0]||!Nt[0].trace)&&(tr=Nt[0].trace,!(tr.visible!==!0||tr._length===0)&&["carpet","contourcarpet"].indexOf(tr._module.name)===-1)){if(tr.type==="splom"?(Pt=0,Vt=q[Pt]):(Vt=p.getSubplot(tr),Pt=q.indexOf(Vt)),$t=Oe,p.isUnifiedHover($t)&&($t=$t.charAt(0)),Ye={cd:Nt,trace:tr,xa:de[Pt],ya:ye[Pt],maxHoverDistance:_e,maxSpikeDistance:Ee,index:!1,distance:Math.min(kt,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:tr.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[Vt]&&(Ye.subplot=ie[Vt]._subplot),ie._splomScenes&&ie._splomScenes[tr.uid]&&(Ye.scene=ie._splomScenes[tr.uid]),ot=Ze.length,$t==="array"){var Gr=V[xt];"pointNumber"in Gr?(Ye.index=Gr.pointNumber,$t="closest"):($t="","xval"in Gr&&(Ut=Gr.xval,$t="x"),"yval"in Gr&&(Lt=Gr.yval,$t=$t?"closest":"y"))}else hr!==void 0&&Ur!==void 0?(Ut=hr,Lt=Ur):(Ut=Fe[Pt],Lt=Re[Pt]);if(_e!==0)if(tr._module&&tr._module.hoverPoints){var Ir=tr._module.hoverPoints(Ye,Ut,Lt,$t,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Ir)for(var kr,Kr=0;Kr<Ir.length;Kr++)kr=Ir[Kr],f(kr.x0)&&f(kr.y0)&&Ze.push(z(kr,Oe))}else T.log("Unrecognized trace type in hover:",tr);if(Oe==="closest"&&Ze.length>ot&&(Ze.splice(0,ot),kt=Ze[0].distance),oe&&Ee!==0&&Ze.length===0){Ye.distance=Ee,Ye.index=!1;var kn=tr._module.hoverPoints(Ye,Ut,Lt,"closest",{hoverLayer:ie._hoverlayer});if(kn&&(kn=kn.filter(function(ba){return ba.spikeDistance<=Ee})),kn&&kn.length){var yn,Yn=kn.filter(function(ba){return ba.xa.showspikes&&ba.xa.spikesnap!=="hovered data"});if(Yn.length){var In=Yn[0];f(In.x0)&&f(In.y0)&&(yn=Wt(In),(!Ve.vLinePoint||Ve.vLinePoint.spikeDistance>yn.spikeDistance)&&(Ve.vLinePoint=yn))}var Jn=kn.filter(function(ba){return ba.ya.showspikes&&ba.ya.spikesnap!=="hovered data"});if(Jn.length){var Zn=Jn[0];f(Zn.x0)&&f(Zn.y0)&&(yn=Wt(Zn),(!Ve.hLinePoint||Ve.hLinePoint.spikeDistance>yn.spikeDistance)&&(Ve.hLinePoint=yn))}}}}}jt();function Bt(hr,Ur,Gr){for(var Ir=null,kr=1/0,Kr,kn=0;kn<hr.length;kn++)Kr=hr[kn].spikeDistance,Gr&&kn===0&&(Kr=-1/0),Kr<=kr&&Kr<=Ur&&(Ir=hr[kn],kr=Kr);return Ir}function Wt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var Qt={fullLayout:ie,container:ie._hoverlayer,event:V},Zt=Y._spikepoints,cr={vLinePoint:Ve.vLinePoint,hLinePoint:Ve.hLinePoint};Y._spikepoints=cr;var Xr=function(){Ze.sort(function(hr,Ur){return hr.distance-Ur.distance}),Ze=j(Ze,Oe)};Xr();var vn=Oe.charAt(0),en=(vn==="x"||vn==="y")&&Ze[0]&&S[Ze[0].trace.type];if(oe&&Ee!==0&&Ze.length!==0){var ft=Ze.filter(function(hr){return hr.ya.showspikes}),ar=Bt(ft,Ee,en);Ve.hLinePoint=Wt(ar);var rr=Ze.filter(function(hr){return hr.xa.showspikes}),Kt=Bt(rr,Ee,en);Ve.vLinePoint=Wt(Kt)}if(Ze.length===0){var Er=s.unhoverRaw(Y,V);return oe&&(Ve.hLinePoint!==null||Ve.vLinePoint!==null)&&Q(Zt)&&B(Y,Ve,Qt),Er}if(oe&&Q(Zt)&&B(Y,Ve,Qt),p.isXYhover($t)&&Ze[0].length!==0&&Ze[0].trace.type!=="splom"){var st=Ze[0];C[st.trace.type]?Ze=Ze.filter(function(hr){return hr.trace.index===st.trace.index}):Ze=[st];var et=Ze.length,vt=re("x",st,ie),pt=re("y",st,ie);jt(vt,pt);var Ct=[],Ht={},Pe=0,ke=function(hr){var Ur=C[hr.trace.type]?E(hr):hr.trace.index;if(!Ht[Ur])Pe++,Ht[Ur]=Pe,Ct.push(hr);else{var Gr=Ht[Ur]-1,Ir=Ct[Gr];Gr>0&&Math.abs(hr.distance)<Math.abs(Ir.distance)&&(Ct[Gr]=hr)}},lt;for(lt=0;lt<et;lt++)ke(Ze[lt]);for(lt=Ze.length-1;lt>et-1;lt--)ke(Ze[lt]);Ze=Ct,Xr()}var ct=Y._hoverdata,yt=[],Rt=ue(Y),wt=K(Y);for(We=0;We<Ze.length;We++){var Dt=Ze[We],Jt=p.makeEventData(Dt,Dt.trace,Dt.cd);if(Dt.hovertemplate!==!1){var fr=!1;Dt.cd[Dt.index]&&Dt.cd[Dt.index].ht&&(fr=Dt.cd[Dt.index].ht),Dt.hovertemplate=fr||Dt.trace.hovertemplate||!1}if(Dt.xa&&Dt.ya){var Rr=Dt.x0+Dt.xa._offset,Sr=Dt.x1+Dt.xa._offset,Pr=Dt.y0+Dt.ya._offset,Jr=Dt.y1+Dt.ya._offset,ur=Math.min(Rr,Sr),wr=Math.max(Rr,Sr),Br=Math.min(Pr,Jr),Yr=Math.max(Pr,Jr);Jt.bbox={x0:ur+wt,x1:wr+wt,y0:Br+Rt,y1:Yr+Rt}}Dt.eventData=[Jt],yt.push(Jt)}Y._hoverdata=yt;var Dr=Oe==="y"&&(Ge.length>1||Ze.length>1)||Oe==="closest"&&Ae&&Ze.length>1,at=i.combine(ie.plot_bgcolor||i.background,ie.paper_bgcolor),zt=I(Ze,{gd:Y,hovermode:Oe,rotateLabels:Dr,bgColor:at,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(p.isUnifiedHover(Oe)||(R(zt,Dr?"xa":"ya",ie),O(zt,Dr,ie._invScaleX,ie._invScaleY)),Z&&Z.tagName){var qt=d.getComponentMethod("annotations","hasClickToShow")(Y,yt);t(w.select(Z),qt?"pointer":"")}!Z||ne||!G(Y,V,ct)||(ct&&Y.emit("plotly_unhover",{event:V,points:ct}),Y.emit("plotly_hover",{event:V,points:Y._hoverdata,xaxes:de,yaxes:ye,xvals:Fe,yvals:Re}))}function E(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(Y,V){var ee=V.gd,ne=ee._fullLayout,Z=V.hovermode,q=V.rotateLabels,ie=V.bgColor,se=V.container,ae=V.outerContainer,oe=V.commonLabelOpts||{};if(Y.length===0)return[[]];var be=V.fontFamily||c.HOVERFONT,ce=V.fontSize||c.HOVERFONTSIZE,de=Y[0],ye=de.xa,ge=de.ya,me=Z.charAt(0),Me=de[me+"Label"],Le=te(ee,ae),Oe=Le.top,_e=Le.width,Ee=Le.height,Ze=Me!==void 0&&de.distance<=V.hoverdistance&&(Z==="x"||Z==="y");if(Ze){var Ge=!0,Fe,Re;for(Fe=0;Fe<Y.length;Fe++)if(Ge&&Y[Fe].zLabel===void 0&&(Ge=!1),Re=Y[Fe].hoverinfo||Y[Fe].trace.hoverinfo,Re){var We=Array.isArray(Re)?Re:Re.split("+");if(We.indexOf("all")===-1&&We.indexOf(Z)===-1){Ze=!1;break}}Ge&&(Ze=!1)}var xt=se.selectAll("g.axistext").data(Ze?[0]:[]);if(xt.enter().append("g").classed("axistext",!0),xt.exit().remove(),xt.each(function(){var Kt=w.select(this),Er=T.ensureSingle(Kt,"path","",function(Jr){Jr.style({"stroke-width":"1px"})}),st=T.ensureSingle(Kt,"text","",function(Jr){Jr.attr("data-notex",1)}),et=oe.bgcolor||i.defaultLine,vt=oe.bordercolor||i.contrast(et),pt=i.contrast(et),Ct={family:oe.font.family||be,size:oe.font.size||ce,color:oe.font.color||pt};Er.style({fill:et,stroke:vt}),st.text(Me).call(h.font,Ct).call(r.positionText,0,0).call(r.convertToTspans,ee),Kt.attr("transform","");var Ht=te(ee,st.node()),Pe,ke;if(Z==="x"){var lt=ye.side==="top"?"-":"";st.attr("text-anchor","middle").call(r.positionText,0,ye.side==="top"?Oe-Ht.bottom-b-v:Oe-Ht.top+b+v),Pe=ye._offset+(de.x0+de.x1)/2,ke=ge._offset+(ye.side==="top"?0:ge._length);var ct=Ht.width/2+v;Pe<ct?(Pe=ct,Er.attr("d","M-"+(ct-b)+",0L-"+(ct-b*2)+","+lt+b+"H"+(v+Ht.width/2)+"v"+lt+(v*2+Ht.height)+"H-"+ct+"V"+lt+b+"Z")):Pe>ne.width-ct?(Pe=ne.width-ct,Er.attr("d","M"+(ct-b)+",0L"+ct+","+lt+b+"v"+lt+(v*2+Ht.height)+"H-"+ct+"V"+lt+b+"H"+(ct-b*2)+"Z")):Er.attr("d","M0,0L"+b+","+lt+b+"H"+(v+Ht.width/2)+"v"+lt+(v*2+Ht.height)+"H-"+(v+Ht.width/2)+"V"+lt+b+"H-"+b+"Z")}else{var yt,Rt,wt;ge.side==="right"?(yt="start",Rt=1,wt="",Pe=ye._offset+ye._length):(yt="end",Rt=-1,wt="-",Pe=ye._offset),ke=ge._offset+(de.y0+de.y1)/2,st.attr("text-anchor",yt),Er.attr("d","M0,0L"+wt+b+","+b+"V"+(v+Ht.height/2)+"h"+wt+(v*2+Ht.width)+"V-"+(v+Ht.height/2)+"H"+wt+b+"V-"+b+"Z");var Dt=Ht.height/2,Jt=Oe-Ht.top-Dt,fr="clip"+ne._uid+"commonlabel"+ge._id,Rr;if(Pe<Ht.width+2*v+b){Rr="M-"+(b+v)+"-"+Dt+"h-"+(Ht.width-v)+"V"+Dt+"h"+(Ht.width-v)+"Z";var Sr=Ht.width-Pe+v;r.positionText(st,Sr,Jt),yt==="end"&&st.selectAll("tspan").each(function(){var Jr=w.select(this),ur=h.tester.append("text").text(Jr.text()).call(h.font,Ct),wr=te(ee,ur.node());Math.round(wr.width)<Math.round(Ht.width)&&Jr.attr("x",Sr-wr.width),ur.remove()})}else r.positionText(st,Rt*(v+b),Jt),Rr=null;var Pr=ne._topclips.selectAll("#"+fr).data(Rr?[0]:[]);Pr.enter().append("clipPath").attr("id",fr).append("path"),Pr.exit().remove(),Pr.select("path").attr("d",Rr),h.setClipUrl(st,Rr?fr:null,ee)}Kt.attr("transform",e(Pe,ke))}),p.isUnifiedHover(Z)){se.selectAll("g.hovertext").remove();var Nt=Y.filter(function(Kt){return Kt.hoverinfo!=="none"});if(Nt.length===0)return;var tr=ne.hoverlabel,Vt=tr.font,Pt={showlegend:!0,legend:{title:{text:Me,font:Vt},font:Vt,bgcolor:tr.bgcolor,bordercolor:tr.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},$t={font:Vt};m(Pt,$t,ee._fullData);var Ut=$t.legend;Ut.entries=[];for(var Lt=0;Lt<Nt.length;Lt++){var Ye=Nt[Lt];if(Ye.hoverinfo!=="none"){var ot=D(Ye,!0,Z,ne,Me),Ve=ot[0],Ae=ot[1];Ye.name=Ae,Ae!==""?Ye.text=Ae+" : "+Ve:Ye.text=Ve;var He=Ye.cd[Ye.index];He&&(He.mc&&(Ye.mc=He.mc),He.mcc&&(Ye.mc=He.mcc),He.mlc&&(Ye.mlc=He.mlc),He.mlcc&&(Ye.mlc=He.mlcc),He.mlw&&(Ye.mlw=He.mlw),He.mrc&&(Ye.mrc=He.mrc),He.dir&&(Ye.dir=He.dir)),Ye._distinct=!0,Ut.entries.push([Ye])}}Ut.entries.sort(function(Kt,Er){return Kt[0].trace.index-Er[0].trace.index}),Ut.layer=se,Ut._inHover=!0,Ut._groupTitleFont=tr.grouptitlefont,l(ee,Ut);var Je=se.select("g.legend"),tt=te(ee,Je.node()),St=tt.width+2*v,_t=tt.height+2*v,kt=Nt[0],jt=(kt.x0+kt.x1)/2,Bt=(kt.y0+kt.y1)/2,Wt=!(d.traceIs(kt.trace,"bar-like")||d.traceIs(kt.trace,"box-violin")),Qt,Zt;me==="y"?Wt?(Zt=Bt-v,Qt=Bt+v):(Zt=Math.min.apply(null,Nt.map(function(Kt){return Math.min(Kt.y0,Kt.y1)})),Qt=Math.max.apply(null,Nt.map(function(Kt){return Math.max(Kt.y0,Kt.y1)}))):Zt=Qt=T.mean(Nt.map(function(Kt){return(Kt.y0+Kt.y1)/2}))-_t/2;var cr,Xr;me==="x"?Wt?(cr=jt+v,Xr=jt-v):(cr=Math.max.apply(null,Nt.map(function(Kt){return Math.max(Kt.x0,Kt.x1)})),Xr=Math.min.apply(null,Nt.map(function(Kt){return Math.min(Kt.x0,Kt.x1)}))):cr=Xr=T.mean(Nt.map(function(Kt){return(Kt.x0+Kt.x1)/2}))-St/2;var vn=ye._offset,en=ge._offset;Qt+=en,cr+=vn,Xr+=vn-St,Zt+=en-_t;var ft,ar;return cr+St<_e&&cr>=0?ft=cr:Xr+St<_e&&Xr>=0?ft=Xr:vn+St<_e?ft=vn:cr-jt<jt-Xr+St?ft=_e-St:ft=0,ft+=v,Qt+_t<Ee&&Qt>=0?ar=Qt:Zt+_t<Ee&&Zt>=0?ar=Zt:en+_t<Ee?ar=en:Qt-Bt<Bt-Zt+_t?ar=Ee-_t:ar=0,ar+=v,Je.attr("transform",e(ft-1,ar-1)),Je}var rr=se.selectAll("g.hovertext").data(Y,function(Kt){return E(Kt)});return rr.enter().append("g").classed("hovertext",!0).each(function(){var Kt=w.select(this);Kt.append("rect").call(i.fill,i.addOpacity(ie,.8)),Kt.append("text").classed("name",!0),Kt.append("path").style("stroke-width","1px"),Kt.append("text").classed("nums",!0).call(h.font,be,ce)}),rr.exit().remove(),rr.each(function(Kt){var Er=w.select(this).attr("transform",""),st=Kt.color;Array.isArray(st)&&(st=st[Kt.eventData[0].pointNumber]);var et=Kt.bgcolor||st,vt=i.combine(i.opacity(et)?et:i.defaultLine,ie),pt=i.combine(i.opacity(st)?st:i.defaultLine,ie),Ct=Kt.borderColor||i.contrast(vt),Ht=D(Kt,Ze,Z,ne,Me,Er),Pe=Ht[0],ke=Ht[1],lt=Er.select("text.nums").call(h.font,Kt.fontFamily||be,Kt.fontSize||ce,Kt.fontColor||Ct).text(Pe).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ee),ct=Er.select("text.name"),yt=0,Rt=0;if(ke&&ke!==Pe){ct.call(h.font,Kt.fontFamily||be,Kt.fontSize||ce,pt).text(ke).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ee);var wt=te(ee,ct.node());yt=wt.width+2*v,Rt=wt.height+2*v}else ct.remove(),Er.select("rect").remove();Er.select("path").style({fill:vt,stroke:Ct});var Dt=Kt.xa._offset+(Kt.x0+Kt.x1)/2,Jt=Kt.ya._offset+(Kt.y0+Kt.y1)/2,fr=Math.abs(Kt.x1-Kt.x0),Rr=Math.abs(Kt.y1-Kt.y0),Sr=te(ee,lt.node()),Pr=Sr.width/ne._invScaleX,Jr=Sr.height/ne._invScaleY;Kt.ty0=(Oe-Sr.top)/ne._invScaleY,Kt.bx=Pr+2*v,Kt.by=Math.max(Jr+2*v,Rt),Kt.anchor="start",Kt.txwidth=Pr,Kt.tx2width=yt,Kt.offset=0;var ur=(Pr+b+v+yt)*ne._invScaleX,wr,Br;if(q)Kt.pos=Dt,wr=Jt+Rr/2+ur<=Ee,Br=Jt-Rr/2-ur>=0,(Kt.idealAlign==="top"||!wr)&&Br?(Jt-=Rr/2,Kt.anchor="end"):wr?(Jt+=Rr/2,Kt.anchor="start"):Kt.anchor="middle";else if(Kt.pos=Jt,wr=Dt+fr/2+ur<=_e,Br=Dt-fr/2-ur>=0,(Kt.idealAlign==="left"||!wr)&&Br)Dt-=fr/2,Kt.anchor="end";else if(wr)Dt+=fr/2,Kt.anchor="start";else{Kt.anchor="middle";var Yr=ur/2,Dr=Dt+Yr-_e,at=Dt-Yr;Dr>0&&(Dt-=Dr),at<0&&(Dt+=-at)}lt.attr("text-anchor",Kt.anchor),yt&&ct.attr("text-anchor",Kt.anchor),Er.attr("transform",e(Dt,Jt)+(q?a(x):""))}),rr}function D(Y,V,ee,ne,Z,q){var ie="",se="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),ie=X(Y.name,Y.nameLength));var ae=ee.charAt(0),oe=ae==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(se+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(se+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(se+=(se?"z: ":"")+Y.zLabel)):V&&Y[ae+"Label"]===Z?se=Y[oe+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(se=Y.yLabel):Y.yLabel===void 0?se=Y.xLabel:se="("+Y.xLabel+", "+Y.yLabel+")",(Y.text||Y.text===0)&&!Array.isArray(Y.text)&&(se+=(se?"<br>":"")+Y.text),Y.extraText!==void 0&&(se+=(se?"<br>":"")+Y.extraText),q&&se===""&&!Y.hovertemplate&&(ie===""&&q.remove(),se=ie);var be=Y.hovertemplate||!1;if(be){var ce=Y.hovertemplateLabels||Y;Y[ae+"Label"]!==Z&&(ce[ae+"other"]=ce[ae+"Val"],ce[ae+"otherLabel"]=ce[ae+"Label"]),se=T.hovertemplateString(be,ce,ne._d3locale,Y.eventData[0]||{},Y.trace._meta),se=se.replace(F,function(de,ye){return ie=X(ye,Y.nameLength),""})}return[se,ie]}function R(Y,V,ee){var ne=0,Z=1,q=Y.size(),ie=new Array(q),se=0;Y.each(function(Fe){var Re=Fe[V],We=Re._id.charAt(0)==="x",xt=Re.range;se===0&&xt&&xt[0]>xt[1]!==We&&(Z=-1),ie[se++]=[{datum:Fe,traceIndex:Fe.trace.index,dp:0,pos:Fe.pos,posref:Fe.posref,size:Fe.by*(We?A:1)/2,pmin:0,pmax:We?ee.width:ee.height}]}),ie.sort(function(Fe,Re){return Fe[0].posref-Re[0].posref||Z*(Re[0].traceIndex-Fe[0].traceIndex)});var ae,oe,be,ce,de,ye,ge;function me(Fe){var Re=Fe[0],We=Fe[Fe.length-1];if(oe=Re.pmin-Re.pos-Re.dp+Re.size,be=We.pos+We.dp+We.size-Re.pmax,oe>.01){for(de=Fe.length-1;de>=0;de--)Fe[de].dp+=oe;ae=!1}if(!(be<.01)){if(oe<-.01){for(de=Fe.length-1;de>=0;de--)Fe[de].dp-=be;ae=!1}if(!!ae){var xt=0;for(ce=0;ce<Fe.length;ce++)ye=Fe[ce],ye.pos+ye.dp+ye.size>Re.pmax&&xt++;for(ce=Fe.length-1;ce>=0&&!(xt<=0);ce--)ye=Fe[ce],ye.pos>Re.pmax-1&&(ye.del=!0,xt--);for(ce=0;ce<Fe.length&&!(xt<=0);ce++)if(ye=Fe[ce],ye.pos<Re.pmin+1)for(ye.del=!0,xt--,be=ye.size*2,de=Fe.length-1;de>=0;de--)Fe[de].dp-=be;for(ce=Fe.length-1;ce>=0&&!(xt<=0);ce--)ye=Fe[ce],ye.pos+ye.dp+ye.size>Re.pmax&&(ye.del=!0,xt--)}}}for(;!ae&&ne<=q;){for(ne++,ae=!0,ce=0;ce<ie.length-1;){var Me=ie[ce],Le=ie[ce+1],Oe=Me[Me.length-1],_e=Le[0];if(oe=Oe.pos+Oe.dp+Oe.size-_e.pos-_e.dp+_e.size,oe>.01&&Oe.pmin===_e.pmin&&Oe.pmax===_e.pmax){for(de=Le.length-1;de>=0;de--)Le[de].dp+=oe;for(Me.push.apply(Me,Le),ie.splice(ce+1,1),ge=0,de=Me.length-1;de>=0;de--)ge+=Me[de].dp;for(be=ge/Me.length,de=Me.length-1;de>=0;de--)Me[de].dp-=be;ae=!1}else ce++}ie.forEach(me)}for(ce=ie.length-1;ce>=0;ce--){var Ee=ie[ce];for(de=Ee.length-1;de>=0;de--){var Ze=Ee[de],Ge=Ze.datum;Ge.offset=Ze.dp,Ge.del=Ze.del}}}function O(Y,V,ee,ne){var Z=function(ie){return ie*ee},q=function(ie){return ie*ne};Y.each(function(ie){var se=w.select(this);if(ie.del)return se.remove();var ae=se.select("text.nums"),oe=ie.anchor,be=oe==="end"?-1:1,ce={start:1,end:-1,middle:0}[oe],de=ce*(b+v),ye=de+ce*(ie.txwidth+v),ge=0,me=ie.offset,Me=oe==="middle";Me&&(de-=ie.tx2width/2,ye+=ie.txwidth/2+v),V&&(me*=-g,ge=ie.offset*_),se.select("path").attr("d",Me?"M-"+Z(ie.bx/2+ie.tx2width/2)+","+q(me-ie.by/2)+"h"+Z(ie.bx)+"v"+q(ie.by)+"h-"+Z(ie.bx)+"Z":"M0,0L"+Z(be*b+ge)+","+q(b+me)+"v"+q(ie.by/2-b)+"h"+Z(be*ie.bx)+"v-"+q(ie.by)+"H"+Z(be*b+ge)+"V"+q(me-b)+"Z");var Le=ge+de,Oe=me+ie.ty0-ie.by/2+v,_e=ie.textAlign||"auto";_e!=="auto"&&(_e==="left"&&oe!=="start"?(ae.attr("text-anchor","start"),Le=Me?-ie.bx/2-ie.tx2width/2+v:-ie.bx-v):_e==="right"&&oe!=="end"&&(ae.attr("text-anchor","end"),Le=Me?ie.bx/2-ie.tx2width/2-v:ie.bx+v)),ae.call(r.positionText,Z(Le),q(Oe)),ie.tx2width&&(se.select("text.name").call(r.positionText,Z(ye+ce*v+ge),q(me+ie.ty0-ie.by/2+v)),se.select("rect").call(h.setRect,Z(ye+(ce-1)*ie.tx2width/2+ge),q(me-ie.by/2-1),Z(ie.tx2width),q(ie.by+2)))})}function z(Y,V){var ee=Y.index,ne=Y.trace||{},Z=Y.cd[0],q=Y.cd[ee]||{};function ie(de){return de||f(de)&&de===0}var se=Array.isArray(ee)?function(de,ye){var ge=T.castOption(Z,ee,de);return ie(ge)?ge:T.extractOption({},ne,"",ye)}:function(de,ye){return T.extractOption(q,ne,de,ye)};function ae(de,ye,ge){var me=se(ye,ge);ie(me)&&(Y[de]=me)}if(ae("hoverinfo","hi","hoverinfo"),ae("bgcolor","hbg","hoverlabel.bgcolor"),ae("borderColor","hbc","hoverlabel.bordercolor"),ae("fontFamily","htf","hoverlabel.font.family"),ae("fontSize","hts","hoverlabel.font.size"),ae("fontColor","htc","hoverlabel.font.color"),ae("nameLength","hnl","hoverlabel.namelength"),ae("textAlign","hta","hoverlabel.align"),Y.posref=V==="y"||V==="closest"&&ne.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:y.hoverLabelText(Y.xa,Y.xLabelVal,ne.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:y.hoverLabelText(Y.ya,Y.yLabelVal,ne.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!isNaN(Y.xerr)&&!(Y.xa.type==="log"&&Y.xerr<=0)){var oe=y.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+oe+" / -"+y.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" \xB1 "+oe,V==="x"&&(Y.distance+=1)}if(!isNaN(Y.yerr)&&!(Y.ya.type==="log"&&Y.yerr<=0)){var be=y.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+be+" / -"+y.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" \xB1 "+be,V==="y"&&(Y.distance+=1)}var ce=Y.hoverinfo||Y.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(Y.xLabel=void 0),ce.indexOf("y")===-1&&(Y.yLabel=void 0),ce.indexOf("z")===-1&&(Y.zLabel=void 0),ce.indexOf("text")===-1&&(Y.text=void 0),ce.indexOf("name")===-1&&(Y.name=void 0)),Y}function B(Y,V,ee){var ne=ee.container,Z=ee.fullLayout,q=Z._size,ie=ee.event,se=!!V.hLinePoint,ae=!!V.vLinePoint,oe,be;if(ne.selectAll(".spikeline").remove(),!!(ae||se)){var ce=i.combine(Z.plot_bgcolor,Z.paper_bgcolor);if(se){var de=V.hLinePoint,ye,ge;oe=de&&de.xa,be=de&&de.ya;var me=be.spikesnap;me==="cursor"?(ye=ie.pointerX,ge=ie.pointerY):(ye=oe._offset+de.x,ge=be._offset+de.y);var Me=M.readability(de.color,ce)<1.5?i.contrast(ce):de.color,Le=be.spikemode,Oe=be.spikethickness,_e=be.spikecolor||Me,Ee=y.getPxPosition(Y,be),Ze,Ge;if(Le.indexOf("toaxis")!==-1||Le.indexOf("across")!==-1){if(Le.indexOf("toaxis")!==-1&&(Ze=Ee,Ge=ye),Le.indexOf("across")!==-1){var Fe=be._counterDomainMin,Re=be._counterDomainMax;be.anchor==="free"&&(Fe=Math.min(Fe,be.position),Re=Math.max(Re,be.position)),Ze=q.l+Fe*q.w,Ge=q.l+Re*q.w}ne.insert("line",":first-child").attr({x1:Ze,x2:Ge,y1:ge,y2:ge,"stroke-width":Oe,stroke:_e,"stroke-dasharray":h.dashStyle(be.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Ze,x2:Ge,y1:ge,y2:ge,"stroke-width":Oe+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Le.indexOf("marker")!==-1&&ne.insert("circle",":first-child").attr({cx:Ee+(be.side!=="right"?Oe:-Oe),cy:ge,r:Oe,fill:_e}).classed("spikeline",!0)}if(ae){var We=V.vLinePoint,xt,Nt;oe=We&&We.xa,be=We&&We.ya;var tr=oe.spikesnap;tr==="cursor"?(xt=ie.pointerX,Nt=ie.pointerY):(xt=oe._offset+We.x,Nt=be._offset+We.y);var Vt=M.readability(We.color,ce)<1.5?i.contrast(ce):We.color,Pt=oe.spikemode,$t=oe.spikethickness,Ut=oe.spikecolor||Vt,Lt=y.getPxPosition(Y,oe),Ye,ot;if(Pt.indexOf("toaxis")!==-1||Pt.indexOf("across")!==-1){if(Pt.indexOf("toaxis")!==-1&&(Ye=Lt,ot=Nt),Pt.indexOf("across")!==-1){var Ve=oe._counterDomainMin,Ae=oe._counterDomainMax;oe.anchor==="free"&&(Ve=Math.min(Ve,oe.position),Ae=Math.max(Ae,oe.position)),Ye=q.t+(1-Ae)*q.h,ot=q.t+(1-Ve)*q.h}ne.insert("line",":first-child").attr({x1:xt,x2:xt,y1:Ye,y2:ot,"stroke-width":$t,stroke:Ut,"stroke-dasharray":h.dashStyle(oe.spikedash,$t)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:xt,x2:xt,y1:Ye,y2:ot,"stroke-width":$t+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Pt.indexOf("marker")!==-1&&ne.insert("circle",":first-child").attr({cx:xt,cy:Lt-(oe.side!=="top"?$t:-$t),r:$t,fill:Ut}).classed("spikeline",!0)}}}function G(Y,V,ee){if(!ee||ee.length!==Y._hoverdata.length)return!0;for(var ne=ee.length-1;ne>=0;ne--){var Z=ee[ne],q=Y._hoverdata[ne];if(Z.curveNumber!==q.curveNumber||String(Z.pointNumber)!==String(q.pointNumber)||String(Z.pointNumbers)!==String(q.pointNumbers))return!0}return!1}function Q(Y,V){return!V||V.vLinePoint!==Y._spikepoints.vLinePoint||V.hLinePoint!==Y._spikepoints.hLinePoint}function X(Y,V){return r.plainText(Y||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function j(Y,V){for(var ee=V.charAt(0),ne=[],Z=[],q=[],ie=0;ie<Y.length;ie++){var se=Y[ie];d.traceIs(se.trace,"bar-like")||d.traceIs(se.trace,"box-violin")?q.push(se):se.trace[ee+"period"]?Z.push(se):ne.push(se)}return ne.concat(Z).concat(q)}function re(Y,V,ee){var ne=V[Y+"a"],Z=V[Y+"Val"],q=V.cd[0];if(ne.type==="category")Z=ne._categoriesMap[Z];else if(ne.type==="date"){var ie=V.trace[Y+"periodalignment"];if(ie){var se=V.cd[V.index],ae=se[Y+"Start"];ae===void 0&&(ae=se[Y]);var oe=se[Y+"End"];oe===void 0&&(oe=se[Y]);var be=oe-ae;ie==="end"?Z+=be:ie==="middle"&&(Z+=be/2)}Z=ne.d2c(Z)}return q&&q.t&&q.t.posLetter===ne._id&&(ee.boxmode==="group"||ee.violinmode==="group")&&(Z+=q.t.dPos),Z}function ue(Y){return Y.offsetTop+Y.clientTop}function K(Y){return Y.offsetLeft+Y.clientLeft}function te(Y,V){var ee=Y._fullLayout,ne=V.getBoundingClientRect(),Z=ne.x,q=ne.y,ie=Z+ne.width,se=q+ne.height,ae=T.apply3DTransform(ee._invTransform)(Z,q),oe=T.apply3DTransform(ee._invTransform)(ie,se),be=ae[0],ce=ae[1],de=oe[0],ye=oe[1];return{x:be,y:ce,width:de-be,height:ye-ce,top:Math.min(ce,ye),left:Math.min(be,de),right:Math.max(be,de),bottom:Math.max(ce,ye)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(o,U,H){var w=o("../../lib"),f=o("../color"),M=o("./helpers").isUnifiedHover;U.exports=function(e,a,n,r){r=r||{};var t=a.legend;function h(i){r.font[i]||(r.font[i]=t?a.legend.font[i]:a.font[i])}a&&M(a.hovermode)&&(r.font||(r.font={}),h("size"),h("family"),h("color"),t?(r.bgcolor||(r.bgcolor=f.combine(a.legend.bgcolor,a.paper_bgcolor)),r.bordercolor||(r.bordercolor=a.legend.bordercolor)):r.bgcolor||(r.bgcolor=a.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),w.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return e[n]!==void 0?e[n]:w.coerce(T,e,f,n,r)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../dragelement"),T=o("./helpers"),e=o("./layout_attributes"),a=o("./hover");U.exports={moduleType:"component",name:"fx",constants:o("./constants"),schema:{layout:e},attributes:o("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:o("./layout_global_defaults"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:r,castHoverinfo:t,hover:a.hover,unhover:M.unhover,loneHover:a.loneHover,loneUnhover:n,click:o("./click")};function n(h){var i=f.isD3Selection(h)?h:w.select(h);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()}function r(h,i,s){return f.castOption(h,i,"hoverlabel."+s)}function t(h,i,s){function y(d){return f.coerceHoverinfo({hoverinfo:d},{_module:h._module},i)}return f.castOption(h,s,"hoverinfo",y)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(o,U,H){var w=o("./constants"),f=o("../../plots/font_attributes"),M=f({editType:"none"});M.family.dflt=w.HOVERFONT,M.size.dflt=w.HOVERFONTSIZE,U.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:f({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes"),M=o("./hovermode_defaults"),T=o("./hoverlabel_defaults");U.exports=function(a,n){function r(d,p){return w.coerce(a,n,f,d,p)}var t=M(a,n);t&&(r("hoverdistance"),r("spikedistance"));var h=r("dragmode");h==="select"&&r("selectdirection");var i=n._has("mapbox"),s=n._has("geo"),y=n._basePlotModules.length;n.dragmode==="zoom"&&((i||s)&&y===1||i&&s&&y===2)&&(n.dragmode="pan"),T(a,n,r),w.coerceFont(r,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(o,U,H){var w=o("../../lib"),f=o("./hoverlabel_defaults"),M=o("./layout_attributes");U.exports=function(e,a){function n(r,t){return w.coerce(e,a,M,r,t)}f(e,a,n)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(o,U,H){var w=o("../../lib"),f=o("../../lib/regex").counter,M=o("../../plots/domain").attributes,T=o("../../plots/cartesian/constants").idRegex,e=o("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[f("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(s,y,d){var p=y[d+"axes"],c=Object.keys((s._splomAxes||{})[d]||{});if(Array.isArray(p))return p;if(c.length)return c}function r(s,y){var d=s.grid||{},p=n(y,d,"x"),c=n(y,d,"y");if(!s.grid&&!p&&!c)return;var m=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),l=Array.isArray(p),x=Array.isArray(c),u=l&&p!==d.xaxes&&x&&c!==d.yaxes,A,_;m?(A=d.subplots.length,_=d.subplots[0].length):(x&&(A=c.length),l&&(_=p.length));var g=e.newContainer(y,"grid");function b(O,z){return w.coerce(d,g,a,O,z)}var v=b("rows",A),C=b("columns",_);if(!(v*C>1)){delete y.grid;return}if(!m&&!l&&!x){var S=b("pattern")==="independent";S&&(m=!0)}g._hasSubplotGrid=m;var k=b("roworder"),E=k==="top to bottom",F=m?.2:.1,I=m?.3:.1,D,R;u&&y._splomGridDflt&&(D=y._splomGridDflt.xside,R=y._splomGridDflt.yside),g._domains={x:t("x",b,F,D,C),y:t("y",b,I,R,v,E)}}function t(s,y,d,p,c,m){var l=y(s+"gap",d),x=y("domain."+s);y(s+"side",p);for(var u=new Array(c),A=x[0],_=(x[1]-A)/(c-l),g=_*(1-l),b=0;b<c;b++){var v=A+_*b;u[m?c-1-b:b]=[v,v+g]}return u}function h(s,y){var d=y.grid;if(!(!d||!d._domains)){var p=s.grid||{},c=y._subplots,m=d._hasSubplotGrid,l=d.rows,x=d.columns,u=d.pattern==="independent",A,_,g,b,v,C,S,k=d._axisMap={};if(m){var E=p.subplots||[];C=d.subplots=new Array(l);var F=1;for(A=0;A<l;A++){var I=C[A]=new Array(x),D=E[A]||[];for(_=0;_<x;_++)if(u?(v=F===1?"xy":"x"+F+"y"+F,F++):v=D[_],I[_]="",c.cartesian.indexOf(v)!==-1){if(S=v.indexOf("y"),g=v.slice(0,S),b=v.slice(S),k[g]!==void 0&&k[g]!==_||k[b]!==void 0&&k[b]!==A)continue;I[_]=v,k[g]=_,k[b]=A}}}else{var R=n(y,p,"x"),O=n(y,p,"y");d.xaxes=i(R,c.xaxis,x,k,"x"),d.yaxes=i(O,c.yaxis,l,k,"y")}var z=d._anchors={},B=d.roworder==="top to bottom";for(var G in k){var Q=G.charAt(0),X=d[Q+"side"],j,re,ue;if(X.length<8)z[G]="free";else if(Q==="x"){if(X.charAt(0)==="t"===B?(j=0,re=1,ue=l):(j=l-1,re=-1,ue=-1),m){var K=k[G];for(A=j;A!==ue;A+=re)if(v=C[A][K],!!v&&(S=v.indexOf("y"),v.slice(0,S)===G)){z[G]=v.slice(S);break}}else for(A=j;A!==ue;A+=re)if(b=d.yaxes[A],c.cartesian.indexOf(G+b)!==-1){z[G]=b;break}}else if(X.charAt(0)==="l"?(j=0,re=1,ue=x):(j=x-1,re=-1,ue=-1),m){var te=k[G];for(A=j;A!==ue;A+=re)if(v=C[te][A],!!v&&(S=v.indexOf("y"),v.slice(S)===G)){z[G]=v.slice(0,S);break}}else for(A=j;A!==ue;A+=re)if(g=d.xaxes[A],c.cartesian.indexOf(g+G)!==-1){z[G]=g;break}}}}function i(s,y,d,p,c){var m=new Array(d),l;function x(u,A){y.indexOf(A)!==-1&&p[A]===void 0?(m[u]=A,p[A]=u):m[u]=""}if(Array.isArray(s))for(l=0;l<d;l++)x(l,s[l]);else for(x(0,c),l=1;l<d;l++)x(l,c+(l+1));return m}U.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:r,contentDefaults:h}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(o,U,H){var w=o("../../plots/cartesian/constants"),f=o("../../plot_api/plot_template").templatedArray;o("../../constants/axis_placeable_objects"),U.exports=f("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",w.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",w.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib/to_log_range");U.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!!(r||t)){for(var h=T._fullLayout.images,i=e._id.charAt(0),s,y,d=0;d<h.length;d++)if(s=h[d],y="images["+d+"].",s[i+"ref"]===e._id){var p=s[i],c=s["size"+i],m=null,l=null;if(r){m=f(p,e.range);var x=c/Math.pow(10,m)/2;l=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else m=Math.pow(10,p),l=m*(Math.pow(10,c/2)-Math.pow(10,-c/2));w(m)?w(l)||(l=null):(m=null,l=null),n(y+i,m),n(y+"size"+i,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/array_container_defaults"),T=o("./attributes"),e="images";U.exports=function(r,t){var h={name:e,handleItemDefaults:a};M(r,t,h)};function a(n,r,t){function h(x,u){return w.coerce(n,r,T,x,u)}var i=h("source"),s=h("visible",!!i);if(!s)return r;h("layer"),h("xanchor"),h("yanchor"),h("sizex"),h("sizey"),h("sizing"),h("opacity");for(var y={_fullLayout:t},d=["x","y"],p=0;p<2;p++){var c=d[p],m=f.coerceRef(n,r,y,c,"paper",void 0);if(m!=="paper"){var l=f.getFromId(y,m);l._imgIndices.push(r._index)}f.coercePosition(r,y,h,m,c,0)}return r}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(o,U,H){var w=o("@plotly/d3"),f=o("../drawing"),M=o("../../plots/cartesian/axes"),T=o("../../plots/cartesian/axis_ids"),e=o("../../constants/xmlns_namespaces");U.exports=function(n){var r=n._fullLayout,t=[],h={},i=[],s,y;for(y=0;y<r.images.length;y++){var d=r.images[y];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){s=T.ref2id(d.xref)+T.ref2id(d.yref);var p=r._plots[s];if(!p){i.push(d);continue}p.mainplot&&(s=p.mainplot.id),h[s]||(h[s]=[]),h[s].push(d)}else d.layer==="above"?t.push(d):i.push(d)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(b){var v=w.select(this);if(this._imgSrc!==b.source)if(v.attr("xmlns",e.svg),b.source&&b.source.slice(0,5)==="data:")v.attr("xlink:href",b.source),this._imgSrc=b.source;else{var C=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=E,k.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");v.attr("xlink:href",D),S()},v.on("error",E),k.src=b.source,this._imgSrc=b.source;function E(){v.remove(),S()}}.bind(this));n._promises.push(C)}}function l(b){var v=w.select(this),C=M.getFromId(n,b.xref),S=M.getFromId(n,b.yref),k=M.getRefType(b.xref)==="domain",E=M.getRefType(b.yref)==="domain",F=r._size,I,D;C!==void 0?I=typeof b.xref=="string"&&k?C._length*b.sizex:Math.abs(C.l2p(b.sizex)-C.l2p(0)):I=b.sizex*F.w,S!==void 0?D=typeof b.yref=="string"&&E?S._length*b.sizey:Math.abs(S.l2p(b.sizey)-S.l2p(0)):D=b.sizey*F.h;var R=I*c.x[b.xanchor].offset,O=D*c.y[b.yanchor].offset,z=c.x[b.xanchor].sizing+c.y[b.yanchor].sizing,B,G;switch(C!==void 0?B=typeof b.xref=="string"&&k?C._length*b.x+C._offset:C.r2p(b.x)+C._offset:B=b.x*F.w+F.l,B+=R,S!==void 0?G=typeof b.yref=="string"&&E?S._length*(1-b.y)+S._offset:S.r2p(b.y)+S._offset:G=F.h-b.y*F.h+F.t,G+=O,b.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}v.attr({x:B,y:G,width:I,height:D,preserveAspectRatio:z,opacity:b.opacity});var Q=C&&M.getRefType(b.xref)!=="domain"?C._id:"",X=S&&M.getRefType(b.yref)!=="domain"?S._id:"",j=Q+X;f.setClipUrl(v,j?"clip"+r._uid+j:null,n)}var x=r._imageLowerLayer.selectAll("image").data(i),u=r._imageUpperLayer.selectAll("image").data(t);x.enter().append("image"),u.enter().append("image"),x.exit().remove(),u.exit().remove(),x.each(function(b){m.bind(this)(b),l.bind(this)(b)}),u.each(function(b){m.bind(this)(b),l.bind(this)(b)});var A=Object.keys(r._plots);for(y=0;y<A.length;y++){s=A[y];var _=r._plots[s];if(!!_.imagelayer){var g=_.imagelayer.selectAll("image").data(h[s]||[]);g.enter().append("image"),g.exit().remove(),g.each(function(b){m.bind(this)(b),l.bind(this)(b)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(o,U,H){U.exports={moduleType:"component",name:"images",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),includeBasePlot:o("../../plots/cartesian/include_components")("images"),draw:o("./draw"),convertCoords:o("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../color/attributes");U.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:w({editType:"legend"}),grouptitlefont:w({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:w({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(o,U,H){U.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../plot_api/plot_template"),T=o("../../plots/attributes"),e=o("./attributes"),a=o("../../plots/layout_attributes"),n=o("./helpers");U.exports=function(t,h,i){var s=t.legend||{},y=M.newContainer(h,"legend");function d(D,R){return f.coerce(s,y,e,D,R)}for(var p,c=function(D,R){var O=p._input,z=p;return f.coerce(O,z,T,D,R)},m=h.font||{},l=f.coerceFont(d,"grouptitlefont",f.extendFlat({},m,{size:Math.round(m.size*1.1)})),x=0,u=!1,A="normal",_=0;_<i.length;_++)p=i[_],p.visible&&((p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&p._module.attributes.showlegend.dflt===!1))&&(x++,p.showlegend&&(u=!0,(w.traceIs(p,"pie-like")||p._input.showlegend===!0)&&x++),f.coerceFont(c,"legendgrouptitle.font",l)),(w.traceIs(p,"bar")&&h.barmode==="stack"||["tonextx","tonexty"].indexOf(p.fill)!==-1)&&(A=n.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),p.legendgroup!==void 0&&p.legendgroup!==""&&(A=n.isReversed({traceorder:A})?"reversed+grouped":"grouped"));var g=f.coerce(t,h,a,"showlegend",u&&x>1);if(g===!1&&(h.legend=void 0),!(g===!1&&!s.uirevision)&&(d("uirevision",h.uirevision),g!==!1)){d("bgcolor",h.paper_bgcolor),d("bordercolor"),d("borderwidth");var b=f.coerceFont(d,"font",h.font),v=d("orientation"),C=v==="h",S,k,E;C?(S=0,w.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(k=1.1,E="bottom"):(k=-.1,E="top")):(S=1.02,k=1,E="auto"),d("traceorder",A),n.isGrouped(h.legend)&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("x",S),d("xanchor"),d("y",k),d("yanchor",E),d("valign"),f.noneOrAll(s,y,["x","y"]);var F=d("title.text");if(F){d("title.side",C?"left":"top");var I=f.extendFlat({},b,{size:f.bigFont(b.size)});f.coerceFont(d,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../plots/plots"),T=o("../../registry"),e=o("../../lib/events"),a=o("../dragelement"),n=o("../drawing"),r=o("../color"),t=o("../../lib/svg_text_utils"),h=o("./handle_click"),i=o("./constants"),s=o("../../constants/alignment"),y=s.LINE_SPACING,d=s.FROM_TL,p=s.FROM_BR,c=o("./get_legend_data"),m=o("./style"),l=o("./helpers"),x=1;U.exports=function(O,z){return z||(z=O._fullLayout.legend||{}),u(O,z)};function u(R,O){var z=R._fullLayout,B="legend"+z._uid,G,Q=O._inHover;if(Q?(G=O.layer,B+="-hover"):G=z._infolayer,!!G){R._legendMouseDownTime||(R._legendMouseDownTime=0);var X;if(Q){if(!O.entries)return;X=c(O.entries,O)}else{if(!R.calcdata)return;X=z.showlegend&&c(R.calcdata,O)}var j=z.hiddenlabels||[];if(!Q&&(!z.showlegend||!X.length))return G.selectAll(".legend").remove(),z._topdefs.select("#"+B).remove(),M.autoMargin(R,"legend");var re=f.ensureSingle(G,"g","legend",function(q){Q||q.attr("pointer-events","all")}),ue=f.ensureSingleById(z._topdefs,"clipPath",B,function(q){q.append("rect")}),K=f.ensureSingle(re,"rect","bg",function(q){q.attr("shape-rendering","crispEdges")});K.call(r.stroke,O.bordercolor).call(r.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var te=f.ensureSingle(re,"g","scrollbox"),Y=O.title;if(O._titleWidth=0,O._titleHeight=0,Y.text){var V=f.ensureSingle(te,"text","legendtitletext");V.attr("text-anchor","start").call(n.font,Y.font).text(Y.text),C(V,te,R,O,x)}else te.selectAll(".legendtitletext").remove();var ee=f.ensureSingle(re,"rect","scrollbar",function(q){q.attr(i.scrollBarEnterAttrs).call(r.fill,i.scrollBarColor)}),ne=te.selectAll("g.groups").data(X);ne.enter().append("g").attr("class","groups"),ne.exit().remove();var Z=ne.selectAll("g.traces").data(f.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(q){var ie=q[0].trace;return T.traceIs(ie,"pie-like")?j.indexOf(q[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){w.select(this).call(g,R,O)}).call(m,R,O).each(function(){Q||w.select(this).call(v,R)}),f.syncOrAsync([M.previousPromises,function(){return E(R,ne,Z,O)},function(){var q=z._size,ie=O.borderwidth;if(!Q){var se=F(R);if(se)return;var ae=q.l+q.w*O.x-d[I(O)]*O._width,oe=q.t+q.h*(1-O.y)-d[D(O)]*O._effHeight;if(z.margin.autoexpand){var be=ae,ce=oe;ae=f.constrain(ae,0,z.width-O._width),oe=f.constrain(oe,0,z.height-O._effHeight),ae!==be&&f.log("Constrain legend.x to make legend fit inside graph"),oe!==ce&&f.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(re,ae,oe)}if(ee.on(".drag",null),re.on("wheel",null),Q||O._height<=O._maxHeight||R._context.staticPlot){var de=O._effHeight;Q&&(de=O._height),K.attr({width:O._width-ie,height:de-ie,x:ie/2,y:ie/2}),n.setTranslate(te,0,0),ue.select("rect").attr({width:O._width-2*ie,height:de-2*ie,x:ie,y:ie}),n.setClipUrl(te,B,R),n.setRect(ee,0,0,0,0),delete O._scrollY}else{var ye=Math.max(i.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),ge=O._effHeight-ye-2*i.scrollBarMargin,me=O._height-O._effHeight,Me=ge/me,Le=Math.min(O._scrollY||0,me);K.attr({width:O._width-2*ie+i.scrollBarWidth+i.scrollBarMargin,height:O._effHeight-ie,x:ie/2,y:ie/2}),ue.select("rect").attr({width:O._width-2*ie+i.scrollBarWidth+i.scrollBarMargin,height:O._effHeight-2*ie,x:ie,y:ie+Le}),n.setClipUrl(te,B,R),We(Le,ye,Me),re.on("wheel",function(){Le=f.constrain(O._scrollY+w.event.deltaY/ge*me,0,me),We(Le,ye,Me),Le!==0&&Le!==me&&w.event.preventDefault()});var Oe,_e,Ee,Ze=function(Pt,$t,Ut){var Lt=(Ut-$t)/Me+Pt;return f.constrain(Lt,0,me)},Ge=function(Pt,$t,Ut){var Lt=($t-Ut)/Me+Pt;return f.constrain(Lt,0,me)},Fe=w.behavior.drag().on("dragstart",function(){var Pt=w.event.sourceEvent;Pt.type==="touchstart"?Oe=Pt.changedTouches[0].clientY:Oe=Pt.clientY,Ee=Le}).on("drag",function(){var Pt=w.event.sourceEvent;Pt.buttons===2||Pt.ctrlKey||(Pt.type==="touchmove"?_e=Pt.changedTouches[0].clientY:_e=Pt.clientY,Le=Ze(Ee,Oe,_e),We(Le,ye,Me))});ee.call(Fe);var Re=w.behavior.drag().on("dragstart",function(){var Pt=w.event.sourceEvent;Pt.type==="touchstart"&&(Oe=Pt.changedTouches[0].clientY,Ee=Le)}).on("drag",function(){var Pt=w.event.sourceEvent;Pt.type==="touchmove"&&(_e=Pt.changedTouches[0].clientY,Le=Ge(Ee,Oe,_e),We(Le,ye,Me))});te.call(Re)}function We(Pt,$t,Ut){O._scrollY=R._fullLayout.legend._scrollY=Pt,n.setTranslate(te,0,-Pt),n.setRect(ee,O._width,i.scrollBarMargin+Pt*Ut,i.scrollBarWidth,$t),ue.select("rect").attr("y",ie+Pt)}if(R._context.edits.legendPosition){var xt,Nt,tr,Vt;re.classed("cursor-move",!0),a.init({element:re.node(),gd:R,prepFn:function(){var Pt=n.getTranslate(re);tr=Pt.x,Vt=Pt.y},moveFn:function(Pt,$t){var Ut=tr+Pt,Lt=Vt+$t;n.setTranslate(re,Ut,Lt),xt=a.align(Ut,0,q.l,q.l+q.w,O.xanchor),Nt=a.align(Lt,0,q.t+q.h,q.t,O.yanchor)},doneFn:function(){xt!==void 0&&Nt!==void 0&&T.call("_guiRelayout",R,{"legend.x":xt,"legend.y":Nt})},clickFn:function(Pt,$t){var Ut=G.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return $t.clientX>=Lt.left&&$t.clientX<=Lt.right&&$t.clientY>=Lt.top&&$t.clientY<=Lt.bottom});Ut.size()>0&&_(R,re,Ut,Pt,$t)}})}}],R)}}function A(R,O,z){var B=R[0],G=B.width,Q=O.entrywidthmode,X=B.trace.legendwidth||O.entrywidth;return Q==="fraction"?O._maxWidth*X:z+(X||G)}function _(R,O,z,B,G){var Q=z.data()[0][0].trace,X={event:G,node:z.node(),curveNumber:Q.index,expandedIndex:Q._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};Q._group&&(X.group=Q._group),T.traceIs(Q,"pie-like")&&(X.label=z.datum()[0].label);var j=e.triggerHandler(R,"plotly_legendclick",X);if(j!==!1){if(B===1)O._clickTimeout=setTimeout(function(){!R._fullLayout||h(z,R,B)},R._context.doubleClickDelay);else if(B===2){O._clickTimeout&&clearTimeout(O._clickTimeout),R._legendMouseDownTime=0;var re=e.triggerHandler(R,"plotly_legenddoubleclick",X);re!==!1&&h(z,R,B)}}}function g(R,O,z){var B=R.data()[0][0],G=B.trace,Q=T.traceIs(G,"pie-like"),X=!z._inHover&&O._context.edits.legendText&&!Q,j=z._maxNameLength,re,ue;B.groupTitle?(re=B.groupTitle.text,ue=B.groupTitle.font):(ue=z.font,z.entries?re=B.text:(re=Q?B.label:G.name,G._meta&&(re=f.templateString(re,G._meta))));var K=f.ensureSingle(R,"text","legendtext");K.attr("text-anchor","start").call(n.font,ue).text(X?b(re,j):re);var te=z.itemwidth+i.itemGap*2;t.positionText(K,te,0),X?K.call(t.makeEditable,{gd:O,text:re}).call(C,R,O,z).on("edit",function(Y){this.text(b(Y,j)).call(C,R,O,z);var V=B.trace._fullInput||{},ee={};if(T.hasTransform(V,"groupby")){var ne=T.getTransformIndices(V,"groupby"),Z=ne[ne.length-1],q=f.keyedContainer(V,"transforms["+Z+"].styles","target","value.name");q.set(B.trace._group,Y),ee=q.constructUpdate()}else ee.name=Y;return T.call("_guiRestyle",O,ee,G.index)}):C(K,R,O,z)}function b(R,O){var z=Math.max(4,O);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var B=z-R.length;B>0;B--)R+=" ";return R}function v(R,O){var z=O._context.doubleClickDelay,B,G=1,Q=f.ensureSingle(R,"rect","legendtoggle",function(X){O._context.staticPlot||X.style("cursor","pointer").attr("pointer-events","all"),X.call(r.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(Q.on("mousedown",function(){B=new Date().getTime(),B-O._legendMouseDownTime<z?G+=1:(G=1,O._legendMouseDownTime=B)}),Q.on("mouseup",function(){if(!(O._dragged||O._editing)){var X=O._fullLayout.legend;new Date().getTime()-O._legendMouseDownTime>z&&(G=Math.max(G-1,1)),_(O,X,R,G,w.event)}}))}function C(R,O,z,B,G){B._inHover&&R.attr("data-notex",!0),t.convertToTspans(R,z,function(){S(O,z,B,G)})}function S(R,O,z,B){var G=R.data()[0][0];if(!z._inHover&&G&&!G.trace.showlegend){R.remove();return}var Q=R.select("g[class*=math-group]"),X=Q.node();z||(z=O._fullLayout.legend);var j=z.borderwidth,re;B===x?re=z.title.font:G.groupTitle?re=G.groupTitle.font:re=z.font;var ue=re.size*y,K,te;if(X){var Y=n.bBox(X);K=Y.height,te=Y.width,B===x?n.setTranslate(Q,j,j+K*.75):n.setTranslate(Q,0,K*.25)}else{var V=R.select(B===x?".legendtitletext":".legendtext"),ee=t.lineCount(V),ne=V.node();if(K=ue*ee,te=ne?n.bBox(ne).width:0,B===x)z.title.side==="left"&&(te+=i.itemGap*2),t.positionText(V,j+i.titlePad,j+ue);else{var Z=i.itemGap*2+z.itemwidth;G.groupTitle&&(Z=i.itemGap,te-=z.itemwidth),t.positionText(V,Z,-ue*((ee-1)/2-.3))}}B===x?(z._titleWidth=te,z._titleHeight=K):(G.lineHeight=ue,G.height=Math.max(K,16)+3,G.width=te)}function k(R){var O=0,z=0,B=R.title.side;return B&&(B.indexOf("left")!==-1&&(O=R._titleWidth),B.indexOf("top")!==-1&&(z=R._titleHeight)),[O,z]}function E(R,O,z,B){var G=R._fullLayout;B||(B=G.legend);var Q=G._size,X=l.isVertical(B),j=l.isGrouped(B),re=B.entrywidthmode==="fraction",ue=B.borderwidth,K=2*ue,te=i.itemGap,Y=B.itemwidth+te*2,V=2*(ue+te),ee=D(B),ne=B.y<0||B.y===0&&ee==="top",Z=B.y>1||B.y===1&&ee==="bottom",q=B.tracegroupgap,ie={};B._maxHeight=Math.max(ne||Z?G.height/2:Q.h,30);var se=0;B._width=0,B._height=0;var ae=k(B);if(X)z.each(function(tr){var Vt=tr[0].height;n.setTranslate(this,ue+ae[0],ue+ae[1]+B._height+Vt/2+te),B._height+=Vt,B._width=Math.max(B._width,tr[0].width)}),se=Y+B._width,B._width+=te+Y+K,B._height+=V,j&&(O.each(function(tr,Vt){n.setTranslate(this,0,Vt*B.tracegroupgap)}),B._height+=(B._lgroupsLength-1)*B.tracegroupgap);else{var oe=I(B),be=B.x<0||B.x===0&&oe==="right",ce=B.x>1||B.x===1&&oe==="left",de=Z||ne,ye=G.width/2;B._maxWidth=Math.max(be?de&&oe==="left"?Q.l+Q.w:ye:ce?de&&oe==="right"?Q.r+Q.w:ye:Q.w,2*Y);var ge=0,me=0;z.each(function(tr){var Vt=A(tr,B,Y);ge=Math.max(ge,Vt),me+=Vt}),se=null;var Me=0;if(j){var Le=0,Oe=0,_e=0;O.each(function(){var tr=0,Vt=0;w.select(this).selectAll("g.traces").each(function($t){var Ut=A($t,B,Y),Lt=$t[0].height;n.setTranslate(this,ae[0],ae[1]+ue+te+Lt/2+Vt),Vt+=Lt,tr=Math.max(tr,Ut),ie[$t[0].trace.legendgroup]=tr});var Pt=tr+te;Oe>0&&Pt+ue+Oe>B._maxWidth?(Me=Math.max(Me,Oe),Oe=0,_e+=Le+q,Le=Vt):Le=Math.max(Le,Vt),n.setTranslate(this,Oe,_e),Oe+=Pt}),B._width=Math.max(Me,Oe)+ue,B._height=_e+Le+V}else{var Ee=z.size(),Ze=me+K+(Ee-1)*te<B._maxWidth,Ge=0,Fe=0,Re=0,We=0;z.each(function(tr){var Vt=tr[0].height,Pt=A(tr,B,Y),$t=Ze?Pt:ge;re||($t+=te),$t+ue+Fe-te>=B._maxWidth&&(Me=Math.max(Me,We),Fe=0,Re+=Ge,B._height+=Ge,Ge=0),n.setTranslate(this,ae[0]+ue+Fe,ae[1]+ue+Re+Vt/2+te),We=Fe+Pt+te,Fe+=$t,Ge=Math.max(Ge,Vt)}),Ze?(B._width=Fe+K,B._height=Ge+V):(B._width=Math.max(Me,We)+K,B._height+=Ge+V)}}B._width=Math.ceil(Math.max(B._width+ae[0],B._titleWidth+2*(ue+i.titlePad))),B._height=Math.ceil(Math.max(B._height+ae[1],B._titleHeight+2*(ue+i.itemGap))),B._effHeight=Math.min(B._height,B._maxHeight);var xt=R._context.edits,Nt=xt.legendText||xt.legendPosition;z.each(function(tr){var Vt=w.select(this).select(".legendtoggle"),Pt=tr[0].height,$t=tr[0].trace.legendgroup,Ut=A(tr,B,Y);j&&$t!==""&&(Ut=ie[$t]);var Lt=Nt?Y:se||Ut;!X&&!re&&(Lt+=te/2),n.setRect(Vt,0,-Pt/2,Lt,Pt)})}function F(R){var O=R._fullLayout,z=O.legend,B=I(z),G=D(z);return M.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*d[B],r:z._width*p[B],b:z._effHeight*p[G],t:z._effHeight*d[G]})}function I(R){return f.isRightAnchor(R)?"right":f.isCenterAnchor(R)?"center":"left"}function D(R){return f.isBottomAnchor(R)?"bottom":f.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(o,U,H){var w=o("../../registry"),f=o("./helpers");U.exports=function(T,e){var a=e._inHover,n=f.isGrouped(e),r=f.isReversed(e),t={},h=[],i=!1,s={},y=0,d=0,p,c;function m(O,z){if(O===""||!f.isGrouped(e)){var B="~~i"+y;h.push(B),t[B]=[z],y++}else h.indexOf(O)===-1?(h.push(O),i=!0,t[O]=[z]):t[O].push(z)}for(p=0;p<T.length;p++){var l=T[p],x=l[0],u=x.trace,A=u.legendgroup;if(!(!a&&(!u.visible||!u.showlegend)))if(w.traceIs(u,"pie-like"))for(s[A]||(s[A]={}),c=0;c<l.length;c++){var _=l[c].label;s[A][_]||(m(A,{label:_,color:l[c].color,i:l[c].i,trace:u,pts:l[c].pts}),s[A][_]=!0,d=Math.max(d,(_||"").length))}else m(A,x),d=Math.max(d,(u.name||"").length)}if(!h.length)return[];var g=!i||!n,b=[];for(p=0;p<h.length;p++){var v=t[h[p]];g?b.push(v[0]):b.push(v)}for(g&&(b=[b]),p=0;p<b.length;p++){var C=1/0;for(c=0;c<b[p].length;c++){var S=b[p][c].trace.legendrank;C>S&&(C=S)}b[p][0]._groupMinRank=C,b[p][0]._preGroupSort=p}var k=function(O,z){return O[0]._groupMinRank-z[0]._groupMinRank||O[0]._preGroupSort-z[0]._preGroupSort},E=function(O,z){return O.trace.legendrank-z.trace.legendrank||O._preSort-z._preSort};for(b.forEach(function(O,z){O[0]._preGroupSort=z}),b.sort(k),p=0;p<b.length;p++){b[p].forEach(function(O,z){O._preSort=z}),b[p].sort(E);var F=b[p][0].trace,I=null;for(c=0;c<b[p].length;c++){var D=b[p][c].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(r&&b[p].reverse(),I){var R=!1;for(c=0;c<b[p].length;c++)if(w.traceIs(b[p][c].trace,"pie-like")){R=!0;break}b[p].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(c=0;c<b[p].length;c++)b[p][c]=[b[p][c]]}return e._lgroupsLength=b.length,e._maxNameLength=d,b}},{"../../registry":647,"./helpers":423}],422:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=!0;U.exports=function(e,a,n){var r=a._fullLayout;if(a._dragged||a._editing)return;var t=r.legend.itemclick,h=r.legend.itemdoubleclick,i=r.legend.groupclick;n===1&&t==="toggle"&&h==="toggleothers"&&M&&a.data&&a._context.showTips&&w.notifier(w._(a,"Double-click on legend to isolate one trace"),"long"),M=!1;var s;if(n===1?s=t:n===2&&(s=h),!s)return;var y=i==="togglegroup",d=r.hiddenlabels?r.hiddenlabels.slice():[],p=e.data()[0][0];if(p.groupTitle&&p.noClick)return;var c=a._fullData,m=p.trace,l=m.legendgroup,x,u,A,_,g,b,v={},C=[],S=[],k=[];function E(te,Y,V){var ee=C.indexOf(te),ne=v[Y];return ne||(ne=v[Y]=[]),C.indexOf(te)===-1&&(C.push(te),ee=C.length-1),ne[ee]=V,ee}function F(te,Y){if(!(p.groupTitle&&!y)){var V=te._fullInput;if(f.hasTransform(V,"groupby")){var ee=S[V.index];if(!ee){var ne=f.getTransformIndices(V,"groupby"),Z=ne[ne.length-1];ee=w.keyedContainer(V,"transforms["+Z+"].styles","target","value.visible"),S[V.index]=ee}var q=ee.get(te._group);q===void 0&&(q=!0),q!==!1&&ee.set(te._group,Y),k[V.index]=E(V.index,"visible",V.visible!==!1)}else{var ie=V.visible===!1?!1:Y;E(V.index,"visible",ie)}}}if(f.traceIs(m,"pie-like")){var I=p.label,D=d.indexOf(I);s==="toggle"?D===-1?d.push(I):d.splice(D,1):s==="toggleothers"&&(d=[],a.calcdata[0].forEach(function(te){I!==te.label&&d.push(te.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===d.length&&D===-1&&(d=[])),f.call("_guiRelayout",a,"hiddenlabels",d)}else{var R=l&&l.length,O=[],z;if(R)for(x=0;x<c.length;x++)z=c[x],!!z.visible&&z.legendgroup===l&&O.push(x);if(s==="toggle"){var B;switch(m.visible){case!0:B="legendonly";break;case!1:B=!1;break;case"legendonly":B=!0;break}if(R)if(y)for(x=0;x<c.length;x++)c[x].visible!==!1&&c[x].legendgroup===l&&F(c[x],B);else F(m,B);else F(m,B)}else if(s==="toggleothers"){var G,Q,X,j,re=!0;for(x=0;x<c.length;x++)if(G=c[x]===m,X=c[x].showlegend!==!0,!(G||X)&&(Q=R&&c[x].legendgroup===l,!Q&&c[x].visible===!0&&!f.traceIs(c[x],"notLegendIsolatable"))){re=!1;break}for(x=0;x<c.length;x++)if(c[x].visible!==!1&&!f.traceIs(c[x],"notLegendIsolatable"))switch(m.visible){case"legendonly":F(c[x],!0);break;case!0:j=re?!0:"legendonly",G=c[x]===m,X=c[x].showlegend!==!0&&!c[x].legendgroup,Q=G||R&&c[x].legendgroup===l,F(c[x],Q||X?!0:j);break}}for(x=0;x<S.length;x++)if(A=S[x],!!A){var ue=A.constructUpdate(),K=Object.keys(ue);for(u=0;u<K.length;u++)_=K[u],b=v[_]=v[_]||[],b[k[x]]=ue[_]}for(g=Object.keys(v),x=0;x<g.length;x++)for(_=g[x],u=0;u<C.length;u++)v[_].hasOwnProperty(u)||(v[_][u]=void 0);f.call("_guiRestyle",a,v,C)}}},{"../../lib":515,"../../registry":647}],423:[function(o,U,H){H.isGrouped=function(f){return(f.traceorder||"").indexOf("grouped")!==-1},H.isVertical=function(f){return f.orientation!=="h"},H.isReversed=function(f){return(f.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(o,U,H){U.exports={moduleType:"component",name:"legend",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),draw:o("./draw"),style:o("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../lib"),T=M.strTranslate,e=o("../drawing"),a=o("../color"),n=o("../colorscale/helpers").extractOpts,r=o("../../traces/scatter/subtypes"),t=o("../../traces/pie/style_one"),h=o("../../traces/pie/helpers").castOption,i=o("./constants"),s=12,y=5,d=2,p=10,c=5;U.exports=function(A,_,g){var b=_._fullLayout;g||(g=b.legend);var v=g.itemsizing==="constant",C=g.itemwidth,S=(C+i.itemGap*2)/2,k=T(S,0),E=function(K,te,Y,V){var ee;if(K+1)ee=K;else if(te&&te.width>0)ee=te.width;else return 0;return v?V:Math.min(ee,Y)};A.each(function(K){var te=w.select(this),Y=M.ensureSingle(te,"g","layers");Y.style("opacity",K[0].trace.opacity);var V=g.valign,ee=K[0].lineHeight,ne=K[0].height;if(V==="middle"||!ee||!ne)Y.attr("transform",null);else{var Z={top:1,bottom:-1}[V],q=Z*(.5*(ee-ne+3));Y.attr("transform",T(0,q))}var ie=Y.selectAll("g.legendfill").data([K]);ie.enter().append("g").classed("legendfill",!0);var se=Y.selectAll("g.legendlines").data([K]);se.enter().append("g").classed("legendlines",!0);var ae=Y.selectAll("g.legendsymbols").data([K]);ae.enter().append("g").classed("legendsymbols",!0),ae.selectAll("g.legendpoints").data([K]).enter().append("g").classed("legendpoints",!0)}).each(ue).each(D).each(O).each(R).each(B).each(j).each(X).each(F).each(I).each(G).each(Q);function F(K){var te=l(K),Y=te.showFill,V=te.showLine,ee=te.showGradientLine,ne=te.showGradientFill,Z=te.anyFill,q=te.anyLine,ie=K[0],se=ie.trace,ae,oe,be=n(se),ce=be.colorscale,de=be.reversescale,ye=function(Ee){if(Ee.size())if(Y)e.fillGroupStyle(Ee,_);else{var Ze="legendfill-"+se.uid;e.gradient(Ee,_,Ze,m(de),ce,"fill")}},ge=function(Ee){if(Ee.size()){var Ze="legendline-"+se.uid;e.lineGroupStyle(Ee),e.gradient(Ee,_,Ze,m(de),ce,"stroke")}},me=r.hasMarkers(se)||!Z?"M5,0":q?"M5,-2":"M5,-3",Me=w.select(this),Le=Me.select(".legendfill").selectAll("path").data(Y||ne?[K]:[]);if(Le.enter().append("path").classed("js-fill",!0),Le.exit().remove(),Le.attr("d",me+"h"+C+"v6h-"+C+"z").call(ye),V||ee){var Oe=E(void 0,se.line,p,y);oe=M.minExtend(se,{line:{width:Oe}}),ae=[M.minExtend(ie,{trace:oe})]}var _e=Me.select(".legendlines").selectAll("path").data(V||ee?[ae]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",me+(ee?"l"+C+",0.0001":"h"+C)).call(V?e.lineGroupStyle:ge)}function I(K){var te=l(K),Y=te.anyFill,V=te.anyLine,ee=te.showLine,ne=te.showMarker,Z=K[0],q=Z.trace,ie=!ne&&!V&&!Y&&r.hasText(q),se,ae;function oe(Le,Oe,_e,Ee){var Ze=M.nestedProperty(q,Le).get(),Ge=M.isArrayOrTypedArray(Ze)&&Oe?Oe(Ze):Ze;if(v&&Ge&&Ee!==void 0&&(Ge=Ee),_e){if(Ge<_e[0])return _e[0];if(Ge>_e[1])return _e[1]}return Ge}function be(Le){return Z._distinct&&Z.index&&Le[Z.index]?Le[Z.index]:Le[0]}if(ne||ie||ee){var ce={},de={};if(ne){ce.mc=oe("marker.color",be),ce.mx=oe("marker.symbol",be),ce.mo=oe("marker.opacity",M.mean,[.2,1]),ce.mlc=oe("marker.line.color",be),ce.mlw=oe("marker.line.width",M.mean,[0,5],d),de.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ye=oe("marker.size",M.mean,[2,16],s);ce.ms=ye,de.marker.size=ye}ee&&(de.line={width:oe("line.width",be,[0,10],y)}),ie&&(ce.tx="Aa",ce.tp=oe("textposition",be),ce.ts=10,ce.tc=oe("textfont.color",be),ce.tf=oe("textfont.family",be)),se=[M.minExtend(Z,ce)],ae=M.minExtend(q,de),ae.selectedpoints=null,ae.texttemplate=null}var ge=w.select(this).select("g.legendpoints"),me=ge.selectAll("path.scatterpts").data(ne?se:[]);me.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),me.exit().remove(),me.call(e.pointStyle,ae,_),ne&&(se[0].mrc=3);var Me=ge.selectAll("g.pointtext").data(ie?se:[]);Me.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),Me.exit().remove(),Me.selectAll("text").call(e.textPointStyle,ae,_)}function D(K){var te=K[0].trace,Y=te.type==="waterfall";if(K[0]._distinct&&Y){var V=K[0].trace[K[0].dir].marker;return K[0].mc=V.color,K[0].mlw=V.line.width,K[0].mlc=V.line.color,z(K,this,"waterfall")}var ee=[];te.visible&&Y&&(ee=K[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ne=w.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ee);ne.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(Z){var q=w.select(this),ie=te[Z[0]].marker,se=E(void 0,ie.line,c,d);q.attr("d",Z[1]).style("stroke-width",se+"px").call(a.fill,ie.color),se&&q.call(a.stroke,ie.line.color)})}function R(K){z(K,this)}function O(K){z(K,this,"funnel")}function z(K,te,Y){var V=K[0].trace,ee=V.marker||{},ne=ee.line||{},Z=Y?V.visible&&V.type===Y:f.traceIs(V,"bar"),q=w.select(te).select("g.legendpoints").selectAll("path.legend"+Y).data(Z?[K]:[]);q.enter().append("path").classed("legend"+Y,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),q.exit().remove(),q.each(function(ie){var se=w.select(this),ae=ie[0],oe=E(ae.mlw,ee.line,c,d);se.style("stroke-width",oe+"px");var be=ae.mcc;if(!g._inHover&&"mc"in ae){var ce=n(ee),de=ce.mid;de===void 0&&(de=(ce.max+ce.min)/2),be=e.tryColorscale(ee,"")(de)}var ye=be||ae.mc||ee.color,ge=ee.pattern,me=ge&&e.getPatternAttr(ge.shape,0,"");if(me){var Me=e.getPatternAttr(ge.bgcolor,0,null),Le=e.getPatternAttr(ge.fgcolor,0,null),Oe=ge.fgopacity,_e=x(ge.size,8,10),Ee=x(ge.solidity,.5,1),Ze="legend-"+V.uid;se.call(e.pattern,"legend",_,Ze,me,_e,Ee,be,ge.fillmode,Me,Le,Oe)}else se.call(a.fill,ye);oe&&a.stroke(se,ae.mlc||ne.color)})}function B(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendbox").data(te.visible&&f.traceIs(te,"box-violin")?[K]:[]);Y.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),Y.exit().remove(),Y.each(function(){var V=w.select(this);if((te.boxpoints==="all"||te.points==="all")&&a.opacity(te.fillcolor)===0&&a.opacity((te.line||{}).color)===0){var ee=M.minExtend(te,{marker:{size:v?s:M.constrain(te.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Y.call(e.pointStyle,ee,_)}else{var ne=E(void 0,te.line,c,d);V.style("stroke-width",ne+"px").call(a.fill,te.fillcolor),ne&&a.stroke(V,te.line.color)}})}function G(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(te.visible&&te.type==="candlestick"?[K,K]:[]);Y.enter().append("path").classed("legendcandle",!0).attr("d",function(V,ee){return ee?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),Y.exit().remove(),Y.each(function(V,ee){var ne=w.select(this),Z=te[ee?"increasing":"decreasing"],q=E(void 0,Z.line,c,d);ne.style("stroke-width",q+"px").call(a.fill,Z.fillcolor),q&&a.stroke(ne,Z.line.color)})}function Q(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(te.visible&&te.type==="ohlc"?[K,K]:[]);Y.enter().append("path").classed("legendohlc",!0).attr("d",function(V,ee){return ee?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),Y.exit().remove(),Y.each(function(V,ee){var ne=w.select(this),Z=te[ee?"increasing":"decreasing"],q=E(void 0,Z.line,c,d);ne.style("fill","none").call(e.dashLine,Z.line.dash,q),q&&a.stroke(ne,Z.line.color)})}function X(K){re(K,this,"pie")}function j(K){re(K,this,"funnelarea")}function re(K,te,Y){var V=K[0],ee=V.trace,ne=Y?ee.visible&&ee.type===Y:f.traceIs(ee,Y),Z=w.select(te).select("g.legendpoints").selectAll("path.legend"+Y).data(ne?[K]:[]);if(Z.enter().append("path").classed("legend"+Y,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),Z.exit().remove(),Z.size()){var q=(ee.marker||{}).line,ie=E(h(q.width,V.pts),q,c,d),se=M.minExtend(ee,{marker:{line:{width:ie}}});se.marker.line.color=q.color;var ae=M.minExtend(V,{trace:se});t(Z,ae,se)}}function ue(K){var te=K[0].trace,Y,V=[];if(te.visible)switch(te.type){case"histogram2d":case"heatmap":V=[["M-15,-2V4H15V-2Z"]],Y=!0;break;case"choropleth":case"choroplethmapbox":V=[["M-6,-6V6H6V-6Z"]],Y=!0;break;case"densitymapbox":V=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Y="radial";break;case"cone":V=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Y=!1;break;case"streamtube":V=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Y=!1;break;case"surface":V=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Y=!0;break;case"mesh3d":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Y=!1;break;case"volume":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Y=!0;break;case"isosurface":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Y=!1;break}var ee=w.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(V);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(ne,Z){var q=w.select(this),ie=n(te),se=ie.colorscale,ae=ie.reversescale,oe=function(ye){if(ye.size()){var ge="legendfill-"+te.uid;e.gradient(ye,_,ge,m(ae,Y==="radial"),se,"fill")}},be;if(se){if(!Y){var de=se.length;be=Z===0?se[ae?de-1:0][1]:Z===1?se[ae?0:de-1][1]:se[Math.floor((de-1)/2)][1]}}else{var ce=te.vertexcolor||te.facecolor||te.color;be=M.isArrayOrTypedArray(ce)?ce[Z]||ce[0]:ce}q.attr("d",ne[0]),be?q.call(a.fill,be):q.call(oe)})}};function m(u,A){var _=A?"radial":"horizontal";return _+(u?"":"reversed")}function l(u){var A=u[0].trace,_=A.contours,g=r.hasLines(A),b=r.hasMarkers(A),v=A.visible&&A.fill&&A.fill!=="none",C=!1,S=!1;if(_){var k=_.coloring;k==="lines"?C=!0:g=k==="none"||k==="heatmap"||_.showlines,_.type==="constraint"?v=_._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:b,showLine:g,showFill:v,showGradientLine:C,showGradientFill:S,anyLine:g||C,anyFill:v||S}}function x(u,A,_){return u&&M.isArrayOrTypedArray(u)?A:u>_?_:u}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(o,U,H){o("./constants"),U.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(o,U,H){var w=o("../../registry"),f=o("../../plots/plots"),M=o("../../plots/cartesian/axis_ids"),T=o("../../fonts/ploticon"),e=o("../shapes/draw").eraseActiveShape,a=o("../../lib"),n=a._,r=U.exports={};r.toImage={name:"toImage",title:function(u){var A=u._context.toImageButtonOptions||{},_=A.format||"png";return _==="png"?n(u,"Download plot as a png"):n(u,"Download plot")},icon:T.camera,click:function(u){var A=u._context.toImageButtonOptions,_={format:A.format||"png"};a.notifier(n(u,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&a.isIE()&&(a.notifier(n(u,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(g){g in A&&(_[g]=A[g])}),w.call("downloadImage",u,_).then(function(g){a.notifier(n(u,"Snapshot succeeded")+" - "+g,"long")}).catch(function(){a.notifier(n(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(u){return n(u,"Edit in Chart Studio")},icon:T.disk,click:function(u){f.sendDataToCloud(u)}},r.editInChartStudio={name:"editInChartStudio",title:function(u){return n(u,"Edit in Chart Studio")},icon:T.pencil,click:function(u){f.sendDataToCloud(u)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return n(u,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:t},r.pan2d={name:"pan2d",_cat:"pan",title:function(u){return n(u,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:t},r.select2d={name:"select2d",_cat:"select",title:function(u){return n(u,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:t},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return n(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:t},r.drawclosedpath={name:"drawclosedpath",title:function(u){return n(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:t},r.drawopenpath={name:"drawopenpath",title:function(u){return n(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:t},r.drawline={name:"drawline",title:function(u){return n(u,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:t},r.drawrect={name:"drawrect",title:function(u){return n(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:t},r.drawcircle={name:"drawcircle",title:function(u){return n(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:t},r.eraseshape={name:"eraseshape",title:function(u){return n(u,"Erase active shape")},icon:T.eraseshape,click:e},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:t},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:t},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return n(u,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:t},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return n(u,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:t},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return n(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:t},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return n(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:t};function t(u,A){var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout,C={},S=M.list(u,null,!0),k=v._cartesianSpikesEnabled,E,F;if(g==="zoom"){var I=b==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(F=0;F<S.length;F++)if(E=S[F],!E.fixedrange)if(O=E._name,b==="auto")C[O+".autorange"]=!0;else if(b==="reset"){if(E._rangeInitial===void 0)C[O+".autorange"]=!0;else{var z=E._rangeInitial.slice();C[O+".range[0]"]=z[0],C[O+".range[1]"]=z[1]}E._showSpikeInitial!==void 0&&(C[O+".showspikes"]=E._showSpikeInitial,k==="on"&&!E._showSpikeInitial&&(k="off"))}else{var B=[E.r2l(E.range[0]),E.r2l(E.range[1])],G=[D*B[0]+R*B[1],D*B[1]+R*B[0]];C[O+".range[0]"]=E.l2r(G[0]),C[O+".range[1]"]=E.l2r(G[1])}}else g==="hovermode"&&(b==="x"||b==="y")&&(b=v._isHoriz?"y":"x",_.setAttribute("data-val",b)),C[g]=b;v._cartesianSpikesEnabled=k,w.call("_guiRelayout",u,C)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return n(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:h},r.pan3d={name:"pan3d",_cat:"pan",title:function(u){return n(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:h},r.orbitRotation={name:"orbitRotation",title:function(u){return n(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:h},r.tableRotation={name:"tableRotation",title:function(u){return n(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:h};function h(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout._subplots.gl3d||[],C={},S=g.split("."),k=0;k<v.length;k++)C[v[k]+"."+S[1]]=b;var E=b==="pan"?b:"zoom";C.dragmode=E,w.call("_guiRelayout",u,C)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return n(u,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:i},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return n(u,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:i};function i(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=g==="resetLastSave",v=g==="resetDefault",C=u._fullLayout,S=C._subplots.gl3d||[],k={},E=0;E<S.length;E++){var F=S[E],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",O=C[F]._scene,z;b?(k[I+".up"]=O.viewInitial.up,k[I+".eye"]=O.viewInitial.eye,k[I+".center"]=O.viewInitial.center,z=!0):v&&(k[I+".up"]=null,k[I+".eye"]=null,k[I+".center"]=null,z=!0),z&&(k[D+".x"]=O.viewInitial.aspectratio.x,k[D+".y"]=O.viewInitial.aspectratio.y,k[D+".z"]=O.viewInitial.aspectratio.z,k[R]=O.viewInitial.aspectmode)}w.call("_guiRelayout",u,k)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:y};function s(u,A){var _=A.currentTarget,g=_._previousVal,b=u._fullLayout,v=b._subplots.gl3d||[],C=["xaxis","yaxis","zaxis"],S={},k={};if(g)k=g,_._previousVal=null;else{for(var E=0;E<v.length;E++){var F=v[E],I=b[F],D=F+".hovermode";S[D]=I.hovermode,k[D]=!1;for(var R=0;R<3;R++){var O=C[R],z=F+"."+O+".showspikes";k[z]=!1,S[z]=I[O].showspikes}}_._previousVal=S}return k}function y(u,A){var _=s(u,A);w.call("_guiRelayout",u,_)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:d},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:d},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return n(u,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:d},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c};function d(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout,C=v._subplots.geo||[],S=0;S<C.length;S++){var k=C[S],E=v[k];if(g==="zoom"){var F=E.projection.scale,I=b==="in"?2*F:.5*F;w.call("_guiRelayout",u,k+".projection.scale",I)}}g==="reset"&&x(u,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:c};function p(u){var A=u._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function c(u){var A=p(u);w.call("_guiRelayout",u,"hovermode",A)}r.resetViewSankey={name:"resetSankeyGroup",title:function(u){return n(u,"Reset view")},icon:T.home,click:function(u){for(var A={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<u._fullData.length;_++){var g=u._fullData[_]._viewInitial;A["node.groups"].push(g.node.groups.slice()),A["node.x"].push(g.node.x.slice()),A["node.y"].push(g.node.y.slice())}w.call("restyle",u,A)}},r.toggleHover={name:"toggleHover",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(u,A){var _=s(u,A);_.hovermode=p(u),w.call("_guiRelayout",u,_)}},r.resetViews={name:"resetViews",title:function(u){return n(u,"Reset views")},icon:T.home,click:function(u,A){var _=A.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),t(u,A),_.setAttribute("data-attr","resetLastSave"),i(u,A),x(u,"geo"),x(u,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(u){return n(u,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var A=u._fullLayout,_=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=_==="on"?"off":"on",w.call("_guiRelayout",u,m(u))}};function m(u){for(var A=u._fullLayout,_=A._cartesianSpikesEnabled==="on",g=M.list(u,null,!0),b={},v=0;v<g.length;v++){var C=g[v];b[C._name+".showspikes"]=_?!0:C._showSpikeInitial}return b}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return n(u,"Reset view")},attr:"reset",icon:T.home,click:function(u){x(u,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-val"),b=u._fullLayout,v=b._subplots.mapbox||[],C=1.05,S={},k=0;k<v.length;k++){var E=v[k],F=b[E].zoom,I=g==="in"?C*F:F/C;S[E+".zoom"]=I}w.call("_guiRelayout",u,S)}function x(u,A){for(var _=u._fullLayout,g=_._subplots[A]||[],b={},v=0;v<g.length;v++)for(var C=g[v],S=_[C]._subplot,k=S.viewInitial,E=Object.keys(k),F=0;F<E.length;F++){var I=E[F];b[C+"."+I]=k[I]}w.call("_guiRelayout",u,b)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(o,U,H){var w=o("./buttons"),f=Object.keys(w),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[],a=function(n){if(T.indexOf(n._cat||n.name)===-1){var r=n.name,t=(n._cat||n.name).toLowerCase();e.indexOf(r)===-1&&e.push(r),e.indexOf(t)===-1&&e.push(t)}};f.forEach(function(n){a(w[n])}),e.sort(),U.exports={DRAW_MODES:M,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(o,U,H){var w=o("../../lib"),f=o("../color"),M=o("../../plot_api/plot_template"),T=o("./attributes");U.exports=function(a,n){var r=a.modebar||{},t=M.newContainer(n,"modebar");function h(s,y){return w.coerce(r,t,T,s,y)}h("orientation"),h("bgcolor",f.addOpacity(n.paper_bgcolor,.5));var i=f.contrast(f.rgb(n.modebar.bgcolor));h("color",f.addOpacity(i,.3)),h("activecolor",f.addOpacity(i,.7)),h("uirevision",n.uirevision),h("add"),h("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(o,U,H){U.exports={moduleType:"component",name:"modebar",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),manage:o("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(o,U,H){var w=o("../../plots/cartesian/axis_ids"),f=o("../../traces/scatter/subtypes"),M=o("../../registry"),T=o("../fx/helpers").isUnifiedHover,e=o("./modebar"),a=o("./buttons"),n=o("./constants").DRAW_MODES,r=o("../../lib").extendDeep;U.exports=function(c){var m=c._fullLayout,l=c._context,x=m._modeBar;if(!l.displayModeBar&&!l.watermark){x&&(x.destroy(),delete m._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=l.modeBarButtons,A;Array.isArray(u)&&u.length?A=d(u):!l.displayModeBar&&l.watermark?A=[]:A=t(c),x?x.update(c,A):m._modeBar=e(c,A)};function t(p){var c=p._fullLayout,m=p._fullData,l=p._context;function x(Z,q){if(typeof q=="string"){if(q.toLowerCase()===Z.toLowerCase())return!0}else{var ie=q.name,se=q._cat||q.name;if(ie===Z||se===Z.toLowerCase())return!0}return!1}var u=c.modebar.add;typeof u=="string"&&(u=[u]);var A=c.modebar.remove;typeof A=="string"&&(A=[A]);var _=l.modeBarButtonsToAdd.concat(u.filter(function(Z){for(var q=0;q<l.modeBarButtonsToRemove.length;q++)if(x(Z,l.modeBarButtonsToRemove[q]))return!1;return!0})),g=l.modeBarButtonsToRemove.concat(A.filter(function(Z){for(var q=0;q<l.modeBarButtonsToAdd.length;q++)if(x(Z,l.modeBarButtonsToAdd[q]))return!1;return!0})),b=c._has("cartesian"),v=c._has("gl3d"),C=c._has("geo"),S=c._has("pie"),k=c._has("funnelarea"),E=c._has("gl2d"),F=c._has("ternary"),I=c._has("mapbox"),D=c._has("polar"),R=c._has("smith"),O=c._has("sankey"),z=h(c),B=T(c.hovermode),G=[];function Q(Z){if(!!Z.length){for(var q=[],ie=0;ie<Z.length;ie++){for(var se=Z[ie],ae=a[se],oe=ae.name.toLowerCase(),be=(ae._cat||ae.name).toLowerCase(),ce=!1,de=0;de<g.length;de++){var ye=g[de].toLowerCase();if(ye===oe||ye===be){ce=!0;break}}ce||q.push(a[se])}G.push(q)}}var X=["toImage"];l.showEditInChartStudio?X.push("editInChartStudio"):l.showSendToCloud&&X.push("sendDataToCloud"),Q(X);var j=[],re=[],ue=[],K=[];(b||E||S||k||F)+C+v+I+D+R>1?(re=["toggleHover"],ue=["resetViews"]):C?(j=["zoomInGeo","zoomOutGeo"],re=["hoverClosestGeo"],ue=["resetGeo"]):v?(re=["hoverClosest3d"],ue=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(j=["zoomInMapbox","zoomOutMapbox"],re=["toggleHover"],ue=["resetViewMapbox"]):E?re=["hoverClosestGl2d"]:S?re=["hoverClosestPie"]:O?(re=["hoverClosestCartesian","hoverCompareCartesian"],ue=["resetViewSankey"]):re=["toggleHover"],b&&(re=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(s(m)||B)&&(re=[]),(b||E)&&!z&&(j=["zoomIn2d","zoomOut2d","autoScale2d"],ue[0]!=="resetViews"&&(ue=["resetScale2d"])),v?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(b||E)&&!z||F?K=["zoom2d","pan2d"]:I||C?K=["pan2d"]:D&&(K=["zoom2d"]),i(m)&&K.push("select2d","lasso2d");var te=[],Y=function(Z){te.indexOf(Z)===-1&&re.indexOf(Z)!==-1&&te.push(Z)};if(Array.isArray(_)){for(var V=[],ee=0;ee<_.length;ee++){var ne=_[ee];typeof ne=="string"?(ne=ne.toLowerCase(),n.indexOf(ne)!==-1?(c._has("mapbox")||c._has("cartesian"))&&K.push(ne):ne==="togglespikelines"?Y("toggleSpikelines"):ne==="togglehover"?Y("toggleHover"):ne==="hovercompare"?Y("hoverCompareCartesian"):ne==="hoverclosest"?(Y("hoverClosestCartesian"),Y("hoverClosestGeo"),Y("hoverClosest3d"),Y("hoverClosestGl2d"),Y("hoverClosestPie")):ne==="v1hovermode"&&(Y("toggleHover"),Y("hoverClosestCartesian"),Y("hoverCompareCartesian"),Y("hoverClosestGeo"),Y("hoverClosest3d"),Y("hoverClosestGl2d"),Y("hoverClosestPie"))):V.push(ne)}_=V}return Q(K),Q(j.concat(ue)),Q(te),y(G,_)}function h(p){for(var c=w.list({_fullLayout:p},null,!0),m=0;m<c.length;m++)if(!c[m].fixedrange)return!1;return!0}function i(p){for(var c=!1,m=0;m<p.length&&!c;m++){var l=p[m];!l._module||!l._module.selectPoints||(M.traceIs(l,"scatter-like")?(f.hasMarkers(l)||f.hasText(l))&&(c=!0):M.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(c=!0):c=!0)}return c}function s(p){for(var c=0;c<p.length;c++)if(!M.traceIs(p[c],"noHover"))return!1;return!0}function y(p,c){if(c.length)if(Array.isArray(c[0]))for(var m=0;m<c.length;m++)p.push(c[m]);else p.push(c);return p}function d(p){for(var c=r([],p),m=0;m<c.length;m++)for(var l=c[m],x=0;x<l.length;x++){var u=l[x];if(typeof u=="string")if(a[u]!==void 0)c[m][x]=a[u];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return c}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../lib"),T=o("../../fonts/ploticon"),e=o("../../version").version,a=new DOMParser;function n(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var r=n.prototype;r.update=function(i,s){this.graphInfo=i;var y=this.graphInfo._context,d=this.graphInfo._fullLayout,p="modebar-"+d._uid;this.element.setAttribute("id",p),this._uid=p,this.element.className="modebar",y.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),d.modebar.orientation==="v"&&(this.element.className+=" vertical",s=s.reverse());var c=d.modebar,m=y.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(p),M.addRelatedStyleRule(p,m+"#"+p+" .modebar-group","background-color: "+c.bgcolor),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn .icon path","fill: "+c.color),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn:hover .icon path","fill: "+c.activecolor),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn.active .icon path","fill: "+c.activecolor);var l=!this.hasButtons(s),x=this.hasLogo!==y.displaylogo,u=this.locale!==y.locale;if(this.locale=y.locale,(l||x||u)&&(this.removeAllButtons(),this.updateButtons(s),y.watermark||y.displaylogo)){var A=this.getLogo();y.watermark&&(A.className=A.className+" watermark"),d.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(i){var s=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(y){var d=s.createGroup();y.forEach(function(p){var c=p.name;if(!c)throw new Error("must provide button 'name' in button config");if(s.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");s.buttonsNames.push(c);var m=s.createButton(p);s.buttonElements.push(m),d.appendChild(m)}),s.element.appendChild(d)})},r.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},r.createButton=function(i){var s=this,y=document.createElement("a");y.setAttribute("rel","tooltip"),y.className="modebar-btn";var d=i.title;d===void 0?d=i.name:typeof d=="function"&&(d=d(this.graphInfo)),(d||d===0)&&y.setAttribute("data-title",d),i.attr!==void 0&&y.setAttribute("data-attr",i.attr);var p=i.val;p!==void 0&&(typeof p=="function"&&(p=p(this.graphInfo)),y.setAttribute("data-val",p));var c=i.click;if(typeof c!="function")throw new Error("must provide button 'click' function in button config");y.addEventListener("click",function(l){i.click(s.graphInfo,l),s.updateActiveButton(l.currentTarget)}),y.setAttribute("data-toggle",i.toggle||!1),i.toggle&&w.select(y).classed("active",!0);var m=i.icon;return typeof m=="function"?y.appendChild(m()):y.appendChild(this.createIcon(m||T.question)),y.setAttribute("data-gravity",i.gravity||"n"),y},r.createIcon=function(i){var s=f(i.height)?Number(i.height):i.ascent-i.descent,y="http://www.w3.org/2000/svg",d;if(i.path){d=document.createElementNS(y,"svg"),d.setAttribute("viewBox",[0,0,i.width,s].join(" ")),d.setAttribute("class","icon");var p=document.createElementNS(y,"path");p.setAttribute("d",i.path),i.transform?p.setAttribute("transform",i.transform):i.ascent!==void 0&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),d.appendChild(p)}if(i.svg){var c=a.parseFromString(i.svg,"application/xml");d=c.childNodes[0]}return d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},r.updateActiveButton=function(i){var s=this.graphInfo._fullLayout,y=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(d){var p=d.getAttribute("data-val")||!0,c=d.getAttribute("data-attr"),m=d.getAttribute("data-toggle")==="true",l=w.select(d);if(m)c===y&&l.classed("active",!l.classed("active"));else{var x=c===null?c:M.nestedProperty(s,c).get();l.classed("active",x===p)}})},r.hasButtons=function(i){var s=this.buttons;if(!s||i.length!==s.length)return!1;for(var y=0;y<i.length;++y){if(i[y].length!==s[y].length)return!1;for(var d=0;d<i[y].length;d++)if(i[y][d].name!==s[y][d].name)return!1}return!0};function t(i){return i+" (v"+e+")"}r.getLogo=function(){var i=this.createGroup(),s=document.createElement("a");return s.href="https://plotly.com/",s.target="_blank",s.setAttribute("data-title",t(M._(this.graphInfo,"Produced with Plotly.js"))),s.className="modebar-btn plotlyjsicon modebar-btn--logo",s.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(s),i},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)};function h(i,s){var y=i._fullLayout,d=new n({graphInfo:i,container:y._modebardiv.node(),buttons:s});return y._privateplot&&w.select(d.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),d}U.exports=h},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../color/attributes"),M=o("../../plot_api/plot_template").templatedArray,T=M("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});U.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:w({editType:"plot"}),bgcolor:{valType:"color",dflt:f.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(o,U,H){U.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(o,U,H){var w=o("../../lib"),f=o("../color"),M=o("../../plot_api/plot_template"),T=o("../../plots/array_container_defaults"),e=o("./attributes"),a=o("./constants");U.exports=function(h,i,s,y,d){var p=h.rangeselector||{},c=M.newContainer(i,"rangeselector");function m(_,g){return w.coerce(p,c,e,_,g)}var l=T(p,c,{name:"buttons",handleItemDefaults:n,calendar:d}),x=m("visible",l.length>0);if(x){var u=r(i,s,y);m("x",u[0]),m("y",u[1]),w.noneOrAll(h,i,["x","y"]),m("xanchor"),m("yanchor"),w.coerceFont(m,"font",s.font);var A=m("bgcolor");m("activecolor",f.contrast(A,a.lightAmount,a.darkAmount)),m("bordercolor"),m("borderwidth")}};function n(t,h,i,s){var y=s.calendar;function d(m,l){return w.coerce(t,h,e.buttons,m,l)}var p=d("visible");if(p){var c=d("step");c!=="all"&&(y&&y!=="gregorian"&&(c==="month"||c==="year")?h.stepmode="backward":d("stepmode"),d("count")),d("label")}}function r(t,h,i){for(var s=i.filter(function(c){return h[c].anchor===t._id}),y=0,d=0;d<s.length;d++){var p=h[s[d]].domain;p&&(y=Math.max(p[1],y))}return[t.domain[0],y+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../plots/plots"),T=o("../color"),e=o("../drawing"),a=o("../../lib"),n=a.strTranslate,r=o("../../lib/svg_text_utils"),t=o("../../plots/cartesian/axis_ids"),h=o("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,y=h.FROM_BR,d=o("./constants"),p=o("./get_update_object");U.exports=function(v){var C=v._fullLayout,S=C._infolayer.selectAll(".rangeselector").data(c(v),m);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var E=w.select(this),F=k,I=F.rangeselector,D=E.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=w.select(this),z=p(F,R);R._isActive=l(F,R,z),O.call(x,I,R),O.call(A,I,R,v),O.on("click",function(){v._dragged||f.call("_guiRelayout",v,z)}),O.on("mouseover",function(){R._isHovered=!0,O.call(x,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(x,I,R)})}),g(v,D,I,F._name,E)})};function c(b){for(var v=t.list(b,"x",!0),C=[],S=0;S<v.length;S++){var k=v[S];k.rangeselector&&k.rangeselector.visible&&C.push(k)}return C}function m(b){return b._id}function l(b,v,C){if(v.step==="all")return b.autorange===!0;var S=Object.keys(C);return b.range[0]===C[S[0]]&&b.range[1]===C[S[1]]}function x(b,v,C){var S=a.ensureSingle(b,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:d.rx,ry:d.ry}),S.call(T.stroke,v.bordercolor).call(T.fill,u(v,C)).style("stroke-width",v.borderwidth+"px")}function u(b,v){return v._isActive||v._isHovered?b.activecolor:b.bgcolor}function A(b,v,C,S){function k(F){r.convertToTspans(F,S)}var E=a.ensureSingle(b,"text","selector-text",function(F){F.attr("text-anchor","middle")});E.call(e.font,v.font).text(_(C,S._fullLayout._meta)).call(k)}function _(b,v){return b.label?v?a.templateString(b.label,v):b.label:b.step==="all"?"all":b.count+b.step.charAt(0)}function g(b,v,C,S,k){var E=0,F=0,I=C.borderwidth;v.each(function(){var G=w.select(this),Q=G.select(".selector-text"),X=C.font.size*i,j=Math.max(X*r.lineCount(Q),16)+3;F=Math.max(F,j)}),v.each(function(){var G=w.select(this),Q=G.select(".selector-rect"),X=G.select(".selector-text"),j=X.node()&&e.bBox(X.node()).width,re=C.font.size*i,ue=r.lineCount(X),K=Math.max(j+10,d.minButtonWidth);G.attr("transform",n(I+E,I)),Q.attr({x:0,y:0,width:K,height:F}),r.positionText(X,K/2,F/2-(ue-1)*re/2+3),E+=K+5});var D=b._fullLayout._size,R=D.l+D.w*C.x,O=D.t+D.h*(1-C.y),z="left";a.isRightAnchor(C)&&(R-=E,z="right"),a.isCenterAnchor(C)&&(R-=E/2,z="center");var B="top";a.isBottomAnchor(C)&&(O-=F,B="bottom"),a.isMiddleAnchor(C)&&(O-=F/2,B="middle"),E=Math.ceil(E),F=Math.ceil(F),R=Math.round(R),O=Math.round(O),M.autoMargin(b,S+"-range-selector",{x:C.x,y:C.y,l:E*s[z],r:E*y[z],b:F*y[B],t:F*s[B]}),k.attr("transform",n(R,O))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(o,U,H){var w=o("d3-time"),f=o("../../lib").titleCase;U.exports=function(e,a){var n=e._name,r={};if(a.step==="all")r[n+".autorange"]=!0;else{var t=M(e,a);r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]}return r};function M(T,e){var a=T.range,n=new Date(T.r2l(a[1])),r=e.step,t=w["utc"+f(r)],h=e.count,i;switch(e.stepmode){case"backward":i=T.l2r(+t.offset(n,-h));break;case"todate":var s=t.offset(n,-h);i=T.l2r(+t.ceil(s));break}var y=a[1];return[i,y]}},{"../../lib":515,"d3-time":122}],438:[function(o,U,H){U.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:o("./attributes")}}},layoutAttributes:o("./attributes"),handleDefaults:o("./defaults"),draw:o("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(o,U,H){var w=o("../color/attributes");U.exports={bgcolor:{valType:"color",dflt:w.background,editType:"plot"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(o,U,H){var w=o("../../plots/cartesian/axis_ids").list,f=o("../../plots/cartesian/autorange").getAutoRange,M=o("./constants");U.exports=function(e){for(var a=w(e,"x",!0),n=0;n<a.length;n++){var r=a[n],t=r[M.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=f(e,r))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(o,U,H){U.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(o,U,H){var w=o("../../lib"),f=o("../../plot_api/plot_template"),M=o("../../plots/cartesian/axis_ids"),T=o("./attributes"),e=o("./oppaxis_attributes");U.exports=function(n,r,t){var h=n[t],i=r[t];if(!(h.rangeslider||r._requestRangeslider[i._id]))return;w.isPlainObject(h.rangeslider)||(h.rangeslider={});var s=h.rangeslider,y=f.newContainer(i,"rangeslider");function d(S,k){return w.coerce(s,y,T,S,k)}var p,c;function m(S,k){return w.coerce(p,c,e,S,k)}var l=d("visible");if(!!l){d("bgcolor",r.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!i.isValidRange(s.range)),d("range");var x=r._subplots;if(x)for(var u=x.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===M.name2id(t)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),A=w.simpleMap(u,M.id2name),_=0;_<A.length;_++){var g=A[_];p=s[g]||{},c=f.newContainer(y,g,"yaxis");var b=r[g],v;p.range&&b.isValidRange(p.range)&&(v="fixed");var C=m("rangemode",v);C!=="match"&&m("range",b.range.slice())}y._input=s}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../plots/plots"),T=o("../../lib"),e=T.strTranslate,a=o("../drawing"),n=o("../color"),r=o("../titles"),t=o("../../plots/cartesian"),h=o("../../plots/cartesian/axis_ids"),i=o("../dragelement"),s=o("../../lib/setcursor"),y=o("./constants");U.exports=function(b){for(var v=b._fullLayout,C=v._rangeSliderData,S=0;S<C.length;S++){var k=C[S][y.name];k._clipId=k._id+"-"+v._uid}function E(I){return I._name}var F=v._infolayer.selectAll("g."+y.containerClassName).data(C,E);F.exit().each(function(I){var D=I[y.name];v._topdefs.select("#"+D._clipId).remove()}).remove(),C.length!==0&&(F.enter().append("g").classed(y.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=w.select(this),R=I[y.name],O=v[h.id2name(I.anchor)],z=R[h.id2name(I.anchor)];if(R.range){var B=T.simpleMap(R.range,I.r2l),G=T.simpleMap(I.range,I.r2l),Q;G[0]<G[1]?Q=[Math.min(B[0],G[0]),Math.max(B[1],G[1])]:Q=[Math.max(B[0],G[0]),Math.min(B[1],G[1])],R.range=R._input.range=T.simpleMap(Q,I.l2r)}I.cleanRange("rangeslider.range");var X=v._size,j=I.domain;R._width=X.w*(j[1]-j[0]);var re=Math.round(X.l+X.w*j[0]),ue=Math.round(X.t+X.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+y.extraPad);D.attr("transform",e(re,ue)),R._rl=T.simpleMap(R.range,I.r2l);var K=R._rl[0],te=R._rl[1],Y=te-K;if(R.p2d=function(be){return be/R._width*Y+K},R.d2p=function(be){return(be-K)/Y*R._width},I.rangebreaks){var V=I.locateBreaks(K,te);if(V.length){var ee,ne,Z=0;for(ee=0;ee<V.length;ee++)ne=V[ee],Z+=ne.max-ne.min;var q=R._width/(te-K-Z),ie=[-q*K];for(ee=0;ee<V.length;ee++)ne=V[ee],ie.push(ie[ie.length-1]-q*(ne.max-ne.min));for(R.d2p=function(be){for(var ce=ie[0],de=0;de<V.length;de++){var ye=V[de];if(be>=ye.max)ce=ie[de+1];else if(be<ye.min)break}return ce+q*be},ee=0;ee<V.length;ee++)ne=V[ee],ne.pmin=R.d2p(ne.min),ne.pmax=R.d2p(ne.max);R.p2d=function(be){for(var ce=ie[0],de=0;de<V.length;de++){var ye=V[de];if(be>=ye.pmax)ce=ie[de+1];else if(be<ye.pmin)break}return(be-ce)/q}}}if(z.rangemode!=="match"){var se=O.r2l(z.range[0]),ae=O.r2l(z.range[1]),oe=ae-se;R.d2pOppAxis=function(be){return(be-se)/oe*R._height}}D.call(m,b,I,R).call(l,b,I,R).call(x,b,I,R).call(A,b,I,R,z).call(_,b,I,R).call(g,b,I,R),d(D,b,I,R),c(D,b,I,R,O,z),I.side==="bottom"&&r.draw(b,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:v._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:ue+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function d(b,v,C,S){if(v._context.staticPlot)return;var k=b.select("rect."+y.slideBoxClassName).node(),E=b.select("rect."+y.grabAreaMinClassName).node(),F=b.select("rect."+y.grabAreaMaxClassName).node();function I(){var D=w.event,R=D.target,O=D.clientX||D.touches[0].clientX,z=O-b.node().getBoundingClientRect().left,B=S.d2p(C._rl[0]),G=S.d2p(C._rl[1]),Q=i.coverSlip();this.addEventListener("touchmove",X),this.addEventListener("touchend",j),Q.addEventListener("mousemove",X),Q.addEventListener("mouseup",j);function X(re){var ue=re.clientX||re.touches[0].clientX,K=+ue-O,te,Y,V;switch(R){case k:V="ew-resize",te=B+K,Y=G+K;break;case E:V="col-resize",te=B+K,Y=G;break;case F:V="col-resize",te=B,Y=G+K;break;default:V="ew-resize",te=z,Y=z+K;break}if(Y<te){var ee=Y;Y=te,te=ee}S._pixelMin=te,S._pixelMax=Y,s(w.select(Q),V),p(b,v,C,S)}function j(){Q.removeEventListener("mousemove",X),Q.removeEventListener("mouseup",j),this.removeEventListener("touchmove",X),this.removeEventListener("touchend",j),T.removeElement(Q)}}b.on("mousedown",I),b.on("touchstart",I)}function p(b,v,C,S){function k(I){return C.l2r(T.constrain(I,S._rl[0],S._rl[1]))}var E=k(S.p2d(S._pixelMin)),F=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){f.call("_guiRelayout",v,C._name+".range",[E,F])})}function c(b,v,C,S,k,E){var F=y.handleWidth/2;function I(re){return T.constrain(re,0,S._width)}function D(re){return T.constrain(re,0,S._height)}function R(re){return T.constrain(re,-F,S._width+F)}var O=I(S.d2p(C._rl[0])),z=I(S.d2p(C._rl[1]));if(b.select("rect."+y.slideBoxClassName).attr("x",O).attr("width",z-O),b.select("rect."+y.maskMinClassName).attr("width",O),b.select("rect."+y.maskMaxClassName).attr("x",z).attr("width",S._width-z),E.rangemode!=="match"){var B=S._height-D(S.d2pOppAxis(k._rl[1])),G=S._height-D(S.d2pOppAxis(k._rl[0]));b.select("rect."+y.maskMinOppAxisClassName).attr("x",O).attr("height",B).attr("width",z-O),b.select("rect."+y.maskMaxOppAxisClassName).attr("x",O).attr("y",G).attr("height",S._height-G).attr("width",z-O),b.select("rect."+y.slideBoxClassName).attr("y",B).attr("height",G-B)}var Q=.5,X=Math.round(R(O-F))-Q,j=Math.round(R(z-F))+Q;b.select("g."+y.grabberMinClassName).attr("transform",e(X,Q)),b.select("g."+y.grabberMaxClassName).attr("transform",e(j,Q))}function m(b,v,C,S){var k=T.ensureSingle(b,"rect",y.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),E=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,F=-S._offsetShift,I=a.crispRound(v,S.borderwidth);k.attr({width:S._width+E,height:S._height+E,transform:e(F,F),"stroke-width":I}).call(n.stroke,S.bordercolor).call(n.fill,S.bgcolor)}function l(b,v,C,S){var k=v._fullLayout,E=T.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(F){F.append("rect").attr({x:0,y:0})});E.select("rect").attr({width:S._width,height:S._height})}function x(b,v,C,S){var k=v.calcdata,E=b.selectAll("g."+y.rangePlotClassName).data(C._subplotsWith,T.identity);E.enter().append("g").attr("class",function(I){return y.rangePlotClassName+" "+I}).call(a.setClipUrl,S._clipId,v),E.order(),E.exit().remove();var F;E.each(function(I,D){var R=w.select(this),O=D===0,z=h.getFromId(v,I,"y"),B=z._name,G=S[B],Q={data:[],layout:{xaxis:{type:C.type,domain:[0,1],range:S.range.slice(),calendar:C.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};C.rangebreaks&&(Q.layout.xaxis.rangebreaks=C.rangebreaks),Q.layout[B]={type:z.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(Q.layout[B].rangebreaks=z.rangebreaks),M.supplyDefaults(Q);var X=Q._fullLayout.xaxis,j=Q._fullLayout[B];X.clearCalc(),X.setScale(),j.clearCalc(),j.setScale();var re={id:I,plotgroup:R,xaxis:X,yaxis:j,isRangePlot:!0};O?F=re:(re.mainplot="xy",re.mainplotinfo=F),t.rangePlot(v,re,u(k,I))})}function u(b,v){for(var C=[],S=0;S<b.length;S++){var k=b[S],E=k[0].trace;E.xaxis+E.yaxis===v&&C.push(k)}return C}function A(b,v,C,S,k){var E=T.ensureSingle(b,"rect",y.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});E.attr("height",S._height).call(n.fill,y.maskColor);var F=T.ensureSingle(b,"rect",y.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",S._height).call(n.fill,y.maskColor),k.rangemode!=="match"){var I=T.ensureSingle(b,"rect",y.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(n.fill,y.maskOppAxisColor);var D=T.ensureSingle(b,"rect",y.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",y.maskOppBorder).call(n.fill,y.maskOppAxisColor)}}function _(b,v,C,S){if(!v._context.staticPlot){var k=T.ensureSingle(b,"rect",y.slideBoxClassName,function(E){E.attr({y:0,cursor:y.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:y.slideBoxFill})}}function g(b,v,C,S){var k=T.ensureSingle(b,"g",y.grabberMinClassName),E=T.ensureSingle(b,"g",y.grabberMaxClassName),F={x:0,width:y.handleWidth,rx:y.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":y.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=T.ensureSingle(k,"rect",y.handleMinClassName,function(G){G.attr(F)});D.attr(I);var R=T.ensureSingle(E,"rect",y.handleMaxClassName,function(G){G.attr(F)});R.attr(I);var O={width:y.grabAreaWidth,x:0,y:0,fill:y.grabAreaFill,cursor:v._context.staticPlot?void 0:y.grabAreaCursor},z=T.ensureSingle(k,"rect",y.grabAreaMinClassName,function(G){G.attr(O)});z.attr("height",S._height);var B=T.ensureSingle(E,"rect",y.grabAreaMaxClassName,function(G){G.attr(O)});B.attr("height",S._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(o,U,H){var w=o("../../plots/cartesian/axis_ids"),f=o("../../lib/svg_text_utils"),M=o("./constants"),T=o("../../constants/alignment").LINE_SPACING,e=M.name;function a(n){var r=n&&n[e];return r&&r.visible}H.isVisible=a,H.makeData=function(n){var r=w.list({_fullLayout:n},"x",!0),t=n.margin,h=[];if(!n._has("gl2d"))for(var i=0;i<r.length;i++){var s=r[i];if(a(s)){h.push(s);var y=s[e];y._id=e+s._id,y._height=(n.height-t.b-t.t)*y.thickness,y._offsetShift=Math.floor(y.borderwidth/2)}}n._rangeSliderData=h},H.autoMarginOpts=function(n,r){var t=n._fullLayout,h=r[e],i=r._id.charAt(0),s=0,y=0;if(r.side==="bottom"&&(s=r._depth,r.title.text!==t._dfltTitle[i])){y=1.5*r.title.font.size+10+h._offsetShift;var d=(r.title.text.match(f.BR_TAG_ALL)||[]).length;y+=d*r.title.font.size*T}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:h._height+s+Math.max(t.margin.b,y),pad:M.extraPad+h._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("./oppaxis_attributes"),T=o("./helpers");U.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:w.extendFlat({},f,{yaxis:M})}}},layoutAttributes:o("./attributes"),handleDefaults:o("./defaults"),calcAutorange:o("./calc_autorange"),draw:o("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(o,U,H){U.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(o,U,H){var w=o("../annotations/attributes"),f=o("../../traces/scatter/attributes").line,M=o("../drawing/attributes").dash,T=o("../../lib/extend").extendFlat,e=o("../../plot_api/edit_types").overrideAll,a=o("../../plot_api/plot_template").templatedArray;o("../../constants/axis_placeable_objects"),U.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},w.xref,{}),yref:T({},w.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:f.color,width:T({},f.width,{min:1,dflt:1}),dash:T({},M,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(o,U,H){U.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/array_container_defaults"),T=o("./attributes"),e=o("../shapes/helpers");U.exports=function(r,t){M(r,t,{name:"selections",handleItemDefaults:a});for(var h=t.selections,i=0;i<h.length;i++){var s=h[i];!s||s.path===void 0&&(s.x0===void 0||s.x1===void 0||s.y0===void 0||s.y1===void 0)&&(t.selections[i]=null)}};function a(n,r,t){function h(E,F){return w.coerce(n,r,T,E,F)}var i=h("path"),s=i?"path":"rect",y=h("type",s),d=y!=="path";d&&delete r.path,h("opacity"),h("line.color"),h("line.width"),h("line.dash");for(var p=["x","y"],c=0;c<2;c++){var m=p[c],l={_fullLayout:t},x,u,A,_=f.coerceRef(n,r,l,m);if(x=f.getFromId(l,_),x._selectionIndices.push(r._index),A=e.rangeToShapePosition(x),u=e.shapePositionToRange(x),d){var g=m+"0",b=m+"1",v=n[g],C=n[b];n[g]=u(n[g],!0),n[b]=u(n[b],!0),f.coercePosition(r,l,h,_,g),f.coercePosition(r,l,h,_,b);var S=r[g],k=r[b];S!==void 0&&k!==void 0&&(r[g]=A(S),r[b]=A(k),n[g]=v,n[b]=C)}}d&&w.noneOrAll(n,r,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(o,U,H){var w=o("../shapes/draw_newshape/helpers").readPaths,f=o("../shapes/display_outlines"),M=o("../shapes/handle_outline").clearOutlineControllers,T=o("../color"),e=o("../drawing"),a=o("../../plot_api/plot_template").arrayEditor,n=o("../shapes/helpers"),r=n.getPathString;U.exports={draw:t,drawOne:i,activateLastSelection:d};function t(c){var m=c._fullLayout;M(c),m._selectionLayer.selectAll("path").remove();for(var l in m._plots){var x=m._plots[l].selectionLayer;x&&x.selectAll("path").remove()}for(var u=0;u<m.selections.length;u++)i(c,u)}function h(c){return c._context.editSelection}function i(c,m){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+m+'"]').remove();var l=n.makeSelectionsOptionsAndPlotinfo(c,m),x=l.options,u=l.plotinfo;if(!x._input)return;A(c._fullLayout._selectionLayer);function A(_){var g=r(c,x),b={"data-index":m,"fill-rule":"evenodd",d:g},v=x.opacity,C="rgba(0,0,0,0)",S=x.line.color||T.contrast(c._fullLayout.plot_bgcolor),k=x.line.width,E=x.line.dash;k||(k=5,E="solid");var F=h(c)&&c._fullLayout._activeSelectionIndex===m;F&&(C=c._fullLayout.activeselection.fillcolor,v=c._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=_.append("path").attr(b).style("opacity",D?.1:v).call(T.stroke,S).call(T.fill,C).call(e.dashLine,D?"solid":E,D?4+k:k);if(s(R,c,x),F){var O=a(c.layout,"selections",x);R.style({cursor:"move"});var z={element:R.node(),plotinfo:u,gd:c,editHelpers:O,isActiveSelection:!0},B=w(g,c);f(B,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var G=I[0],Q=I[1];Q.node().addEventListener("click",function(){return y(c,G)})}}function s(c,m,l){var x=l.xref+l.yref;e.setClipUrl(c,"clip"+m._fullLayout._uid+x,m)}function y(c,m){if(!!h(c)){var l=m.node(),x=+l.getAttribute("data-index");if(x>=0){if(x===c._fullLayout._activeSelectionIndex){p(c);return}c._fullLayout._activeSelectionIndex=x,c._fullLayout._deactivateSelection=p,t(c)}}}function d(c){if(!!h(c)){var m=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=m,c._fullLayout._deactivateSelection=p,t(c)}}function p(c){if(!!h(c)){var m=c._fullLayout._activeSelectionIndex;m>=0&&(M(c),delete c._fullLayout._activeSelectionIndex,t(c))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(o,U,H){var w=o("../../drawing/attributes").dash,f=o("../../../lib/extend").extendFlat;U.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:f({},w,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(o,U,H){U.exports=function(f,M,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(o,U,H){var w=o("../../dragelement/helpers"),f=w.selectMode,M=o("../../shapes/handle_outline"),T=M.clearOutline,e=o("../../shapes/draw_newshape/helpers"),a=e.readPaths,n=e.writePaths,r=e.fixDatesForPaths;U.exports=function(h,i){if(!!h.length){var s=h[0][0];if(!!s){var y=s.getAttribute("d"),d=i.gd,p=d._fullLayout.newselection,c=i.plotinfo,m=c.xaxis,l=c.yaxis,x=i.isActiveSelection,u=i.dragmode,A=(d.layout||{}).selections||[];if(!f(u)&&x!==void 0){var _=d._fullLayout._activeSelectionIndex;if(_<A.length)switch(d._fullLayout.selections[_].type){case"rect":u="select";break;case"path":u="lasso";break}}var g=a(y,d,c,x),b={xref:m._id,yref:l._id,opacity:p.opacity,line:{color:p.line.color,width:p.line.width,dash:p.line.dash}},v;g.length===1&&(v=g[0]),v&&v.length===5&&u==="select"?(b.type="rect",b.x0=v[0][1],b.y0=v[0][2],b.x1=v[2][1],b.y1=v[2][2]):(b.type="path",m&&l&&r(g,m,l),b.path=n(g),v=null),T(d);for(var C=i.editHelpers,S=(C||{}).modifyItem,k=[],E=0;E<A.length;E++){var F=d._fullLayout.selections[E];if(!F){k[E]=F;continue}if(k[E]=F._input,x!==void 0&&E===d._fullLayout._activeSelectionIndex){var I=b;switch(F.type){case"rect":S("x0",I.x0),S("x1",I.x1),S("y0",I.y0),S("y1",I.y1);break;case"path":S("path",I.path);break}}}return x===void 0?(k.push(b),k):C?C.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(o,U,H){var w=o("../../lib").strTranslate;function f(a,n){switch(a.type){case"log":return a.p2d(n);case"date":return a.p2r(n,0,a.calendar);default:return a.p2r(n)}}function M(a,n){switch(a.type){case"log":return a.d2p(n);case"date":return a.r2p(n,0,a.calendar);default:return a.r2p(n)}}function T(a){var n=a._id.charAt(0)==="y"?1:0;return function(r){return f(a,r[n])}}function e(a){return w(a.xaxis._offset,a.yaxis._offset)}U.exports={p2r:f,r2p:M,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(o,U,H){var w=o("./draw"),f=o("./select");U.exports={moduleType:"component",name:"selections",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),supplyDrawNewSelectionDefaults:o("./draw_newselection/defaults"),includeBasePlot:o("../../plots/cartesian/include_components")("selections"),draw:w.draw,drawOne:w.drawOne,reselect:f.reselect,prepSelect:f.prepSelect,clearOutline:f.clearOutline,clearSelectionsCache:f.clearSelectionsCache,selectOnClick:f.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(o,U,H){var w=o("polybooljs"),f=o("point-in-polygon/nested"),M=o("../../registry"),T=o("../drawing").dashStyle,e=o("../color"),a=o("../fx"),n=o("../fx/helpers").makeEventData,r=o("../dragelement/helpers"),t=r.freeMode,h=r.rectMode,i=r.drawMode,s=r.openMode,y=r.selectMode,d=o("../shapes/helpers"),p=o("../shapes/constants"),c=o("../shapes/display_outlines"),m=o("../shapes/handle_outline").clearOutline,l=o("../shapes/draw_newshape/helpers"),x=l.handleEllipse,u=l.readPaths,A=o("../shapes/draw_newshape/newshapes"),_=o("./draw_newselection/newselections"),g=o("./draw").activateLastSelection,b=o("../../lib"),v=b.sorterAsc,C=o("../../lib/polygon"),S=o("../../lib/throttle"),k=o("../../plots/cartesian/axis_ids").getFromId,E=o("../../lib/clear_gl_canvases"),F=o("../../plot_api/subroutines").redrawReglTraces,I=o("./constants"),D=I.MINSELECT,R=C.filter,O=C.tester,z=o("./helpers"),B=z.p2r,G=z.axValue,Q=z.getTransform;function X(Ye){return Ye.subplot!==void 0}function j(Ye,ot,Ve,Ae,He){var Je=!X(Ae),tt=t(He),St=h(He),_t=s(He),kt=i(He),jt=y(He),Bt=He==="drawline",Wt=He==="drawcircle",Qt=Bt||Wt,Zt=Ae.gd,cr=Zt._fullLayout,Xr=jt&&cr.newselection.mode==="immediate"&&Je,vn=cr._zoomlayer,en=Ae.element.getBoundingClientRect(),ft=Ae.plotinfo,ar=Q(ft),rr=ot-en.left,Kt=Ve-en.top;cr._calcInverseTransform(Zt);var Er=b.apply3DTransform(cr._invTransform)(rr,Kt);rr=Er[0],Kt=Er[1];var st=cr._invScaleX,et=cr._invScaleY,vt=rr,pt=Kt,Ct="M"+rr+","+Kt,Ht=Ae.xaxes[0],Pe=Ae.yaxes[0],ke=Ht._length,lt=Pe._length,ct=Ye.altKey&&!(i(He)&&_t),yt,Rt,wt,Dt,Jt,fr,Rr;V(Ye,Zt,Ae),tt&&(yt=R([[rr,Kt]],I.BENDPX));var Sr=vn.selectAll("path.select-outline-"+ft.id).data([1]),Pr=kt?cr.newshape:cr.newselection,Jr=kt&&!_t?Pr.fillcolor:"rgba(0,0,0,0)",ur=Pr.line.color||(Je?e.contrast(Zt._fullLayout.plot_bgcolor):"#7f7f7f");Sr.enter().append("path").attr("class","select-outline select-outline-"+ft.id).style({opacity:kt?Pr.opacity/2:1,"stroke-dasharray":T(Pr.line.dash,Pr.line.width),"stroke-width":Pr.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,ur).call(e.fill,Jr).attr("fill-rule","evenodd").classed("cursor-move",!!kt).attr("transform",ar).attr("d",Ct+"Z");var wr=vn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",ar).attr("d","M0,0Z"),Br=cr._uid+I.SELECTID,Yr=[],Dr=ie(Zt,Ae.xaxes,Ae.yaxes,Ae.subplot);Xr&&!Ye.shiftKey&&(Ae._clearSubplotSelections=function(){if(!!Je){var zt=Ht._id,qt=Pe._id;Ge(Zt,zt,qt,Dr);for(var hr=(Zt.layout||{}).selections||[],Ur=[],Gr=!1,Ir=0;Ir<hr.length;Ir++){var kr=cr.selections[Ir];kr.xref!==zt||kr.yref!==qt?Ur.push(hr[Ir]):Gr=!0}Gr&&(Zt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Zt,{selections:Ur}))}});var at=Pt(Ae);Ae.moveFn=function(zt,qt){Ae._clearSubplotSelections&&(Ae._clearSubplotSelections(),Ae._clearSubplotSelections=void 0),vt=Math.max(0,Math.min(ke,st*zt+rr)),pt=Math.max(0,Math.min(lt,et*qt+Kt));var hr=Math.abs(vt-rr),Ur=Math.abs(pt-Kt);if(St){var Gr,Ir,kr;if(jt){var Kr=cr.selectdirection;switch(Kr==="any"?Ur<Math.min(hr*.6,D)?Gr="h":hr<Math.min(Ur*.6,D)?Gr="v":Gr="d":Gr=Kr,Gr){case"h":Ir=Wt?lt/2:0,kr=lt;break;case"v":Ir=Wt?ke/2:0,kr=ke;break}}if(kt)switch(cr.newshape.drawdirection){case"vertical":Gr="h",Ir=Wt?lt/2:0,kr=lt;break;case"horizontal":Gr="v",Ir=Wt?ke/2:0,kr=ke;break;case"ortho":hr<Ur?(Gr="h",Ir=Kt,kr=pt):(Gr="v",Ir=rr,kr=vt);break;default:Gr="d"}Gr==="h"?(Dt=Qt?x(Wt,[vt,Ir],[vt,kr]):[[rr,Ir],[rr,kr],[vt,kr],[vt,Ir]],Dt.xmin=Qt?vt:Math.min(rr,vt),Dt.xmax=Qt?vt:Math.max(rr,vt),Dt.ymin=Math.min(Ir,kr),Dt.ymax=Math.max(Ir,kr),wr.attr("d","M"+Dt.xmin+","+(Kt-D)+"h-4v"+2*D+"h4ZM"+(Dt.xmax-1)+","+(Kt-D)+"h4v"+2*D+"h-4Z")):Gr==="v"?(Dt=Qt?x(Wt,[Ir,pt],[kr,pt]):[[Ir,Kt],[Ir,pt],[kr,pt],[kr,Kt]],Dt.xmin=Math.min(Ir,kr),Dt.xmax=Math.max(Ir,kr),Dt.ymin=Qt?pt:Math.min(Kt,pt),Dt.ymax=Qt?pt:Math.max(Kt,pt),wr.attr("d","M"+(rr-D)+","+Dt.ymin+"v-4h"+2*D+"v4ZM"+(rr-D)+","+(Dt.ymax-1)+"v4h"+2*D+"v-4Z")):Gr==="d"&&(Dt=Qt?x(Wt,[rr,Kt],[vt,pt]):[[rr,Kt],[rr,pt],[vt,pt],[vt,Kt]],Dt.xmin=Math.min(rr,vt),Dt.xmax=Math.max(rr,vt),Dt.ymin=Math.min(Kt,pt),Dt.ymax=Math.max(Kt,pt),wr.attr("d","M0,0Z"))}else tt&&(yt.addPt([vt,pt]),Dt=yt.filtered);if(Ae.selectionDefs&&Ae.selectionDefs.length?(wt=me(Ae.mergedPolygons,Dt,ct),Dt.subtract=ct,Rt=Y(Ae.selectionDefs.concat([Dt]))):(wt=[Dt],Rt=O(Dt)),c(Le(wt,_t),Sr,Ae),jt){var kn=_e(Zt,!1),yn=kn.eventData?kn.eventData.points.slice():[];kn=_e(Zt,!1,Rt,Dr,Ae),Rt=kn.selectionTesters,Rr=kn.eventData;var Yn;yt?Yn=yt.filtered:Yn=Nt(wt),S.throttle(Br,I.SELECTDELAY,function(){Yr=Oe(Rt,Dr);for(var In=Yr.slice(),Jn=0;Jn<yn.length;Jn++){for(var Zn=yn[Jn],ba=!1,Pa=0;Pa<In.length;Pa++)if(In[Pa].curveNumber===Zn.curveNumber&&In[Pa].pointNumber===Zn.pointNumber){ba=!0;break}ba||In.push(Zn)}In.length&&(Rr||(Rr={}),Rr.points=In),at(Rr,Yn),$t(Zt,Rr)})}},Ae.clickFn=function(zt,qt){if(wr.remove(),Zt._fullLayout._activeShapeIndex>=0){Zt._fullLayout._deactivateShape(Zt);return}if(!kt){var hr=cr.clickmode;S.done(Br).then(function(){if(S.clear(Br),zt===2){for(Sr.remove(),Jt=0;Jt<Dr.length;Jt++)fr=Dr[Jt],fr._module.selectPoints(fr,!1);if(ye(Zt,Dr),Z(Ae),Lt(Zt),Dr.length){var Ur=Dr[0].xaxis,Gr=Dr[0].yaxis;if(Ur&&Gr){for(var Ir=[],kr=Zt._fullLayout.selections,Kr=0;Kr<kr.length;Kr++){var kn=kr[Kr];!kn||(kn.xref!==Ur._id||kn.yref!==Gr._id)&&Ir.push(kn)}Ir.length<kr.length&&(Zt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Zt,{selections:Ir}))}}}else hr.indexOf("select")>-1&&re(qt,Zt,Ae.xaxes,Ae.yaxes,Ae.subplot,Ae,Sr),hr==="event"&&Ut(Zt,void 0);a.click(Zt,qt)}).catch(b.error)}},Ae.doneFn=function(){wr.remove(),S.done(Br).then(function(){S.clear(Br),!Xr&&Dt&&Ae.selectionDefs&&(Dt.subtract=ct,Ae.selectionDefs.push(Dt),Ae.mergedPolygons.length=0,[].push.apply(Ae.mergedPolygons,wt)),(Xr||kt)&&Z(Ae,Xr),Ae.doneFnCompleted&&Ae.doneFnCompleted(Yr),jt&&Ut(Zt,Rr)}).catch(b.error)}}function re(Ye,ot,Ve,Ae,He,Je,tt){var St=ot._hoverdata,_t=ot._fullLayout,kt=_t.clickmode,jt=kt.indexOf("event")>-1,Bt=[],Wt,Qt,Zt,cr,Xr,vn,en,ft,ar,rr;if(ae(St)){V(Ye,ot,Je),Wt=ie(ot,Ve,Ae,He);var Kt=oe(St,Wt),Er=Kt.pointNumbers.length>0;if(Er?ce(Wt,Kt):de(Wt)&&(en=be(Kt))){for(tt&&tt.remove(),rr=0;rr<Wt.length;rr++)Qt=Wt[rr],Qt._module.selectPoints(Qt,!1);ye(ot,Wt),Z(Je),jt&&Lt(ot)}else{ft=Ye.shiftKey&&(en!==void 0?en:be(Kt)),Zt=ue(Kt.pointNumber,Kt.searchInfo,ft);var st=Je.selectionDefs.concat([Zt]);for(cr=Y(st),rr=0;rr<Wt.length;rr++)if(Xr=Wt[rr]._module.selectPoints(Wt[rr],cr),vn=Me(Xr,Wt[rr]),Bt.length)for(var et=0;et<vn.length;et++)Bt.push(vn[et]);else Bt=vn;if(ar={points:Bt},ye(ot,Wt,ar),Zt&&Je&&Je.selectionDefs.push(Zt),tt){var vt=Je.mergedPolygons,pt=s(Je.dragmode);c(Le(vt,pt),tt,Je)}jt&&Ut(ot,ar)}}}function ue(Ye,ot,Ve){return{pointNumber:Ye,searchInfo:ot,subtract:!!Ve}}function K(Ye){return"pointNumber"in Ye&&"searchInfo"in Ye}function te(Ye){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ot,Ve,Ae,He){var Je=Ye.searchInfo.cd[0].trace._expandedIndex,tt=He.cd[0].trace._expandedIndex;return tt===Je&&Ae===Ye.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ye.subtract}}function Y(Ye){if(!Ye.length)return;for(var ot=[],Ve=K(Ye[0])?0:Ye[0][0][0],Ae=Ve,He=K(Ye[0])?0:Ye[0][0][1],Je=He,tt=0;tt<Ye.length;tt++)if(K(Ye[tt]))ot.push(te(Ye[tt]));else{var St=O(Ye[tt]);St.subtract=!!Ye[tt].subtract,ot.push(St),Ve=Math.min(Ve,St.xmin),Ae=Math.max(Ae,St.xmax),He=Math.min(He,St.ymin),Je=Math.max(Je,St.ymax)}function _t(kt,jt,Bt,Wt){for(var Qt=!1,Zt=0;Zt<ot.length;Zt++)ot[Zt].contains(kt,jt,Bt,Wt)&&(Qt=!ot[Zt].subtract);return Qt}return{xmin:Ve,xmax:Ae,ymin:He,ymax:Je,pts:[],contains:_t,isRect:!1,degenerate:!1}}function V(Ye,ot,Ve){var Ae=ot._fullLayout,He=Ve.plotinfo,Je=Ve.dragmode,tt=Ae._lastSelectedSubplot&&Ae._lastSelectedSubplot===He.id,St=(Ye.shiftKey||Ye.altKey)&&!(i(Je)&&s(Je));tt&&St&&He.selection&&He.selection.selectionDefs&&!Ve.selectionDefs?(Ve.selectionDefs=He.selection.selectionDefs,Ve.mergedPolygons=He.selection.mergedPolygons):(!St||!He.selection)&&Z(Ve),tt||(m(ot),Ae._lastSelectedSubplot=He.id)}function ee(Ye){return Ye._fullLayout._activeShapeIndex>=0}function ne(Ye){return Ye._fullLayout._activeSelectionIndex>=0}function Z(Ye,ot){var Ve=Ye.dragmode,Ae=Ye.plotinfo,He=Ye.gd;ee(He)&&He._fullLayout._deactivateShape(He),ne(He)&&He._fullLayout._deactivateSelection(He);var Je=He._fullLayout,tt=Je._zoomlayer,St=i(Ve),_t=y(Ve);if(St||_t){var kt=tt.selectAll(".select-outline-"+Ae.id);if(kt&&He._fullLayout._outlining){var jt;St&&(jt=A(kt,Ye)),jt&&M.call("_guiRelayout",He,{shapes:jt});var Bt;_t&&!X(Ye)&&(Bt=_(kt,Ye)),Bt&&(He._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",He,{selections:Bt}).then(function(){ot&&g(He)})),He._fullLayout._outlining=!1}}Ae.selection={},Ae.selection.selectionDefs=Ye.selectionDefs=[],Ae.selection.mergedPolygons=Ye.mergedPolygons=[]}function q(Ye){return Ye._id}function ie(Ye,ot,Ve,Ae){if(!Ye.calcdata)return[];var He=[],Je=ot.map(q),tt=Ve.map(q),St,_t,kt;for(kt=0;kt<Ye.calcdata.length;kt++)if(St=Ye.calcdata[kt],_t=St[0].trace,!(_t.visible!==!0||!_t._module||!_t._module.selectPoints))if(X({subplot:Ae})&&(_t.subplot===Ae||_t.geo===Ae))He.push(se(_t._module,St,ot[0],Ve[0]));else if(_t.type==="splom"){if(_t._xaxes[Je[0]]&&_t._yaxes[tt[0]]){var jt=se(_t._module,St,ot[0],Ve[0]);jt.scene=Ye._fullLayout._splomScenes[_t.uid],He.push(jt)}}else if(_t.type==="sankey"){var Bt=se(_t._module,St,ot[0],Ve[0]);He.push(Bt)}else{if(Je.indexOf(_t.xaxis)===-1||tt.indexOf(_t.yaxis)===-1)continue;He.push(se(_t._module,St,k(Ye,_t.xaxis),k(Ye,_t.yaxis)))}return He}function se(Ye,ot,Ve,Ae){return{_module:Ye,cd:ot,xaxis:Ve,yaxis:Ae}}function ae(Ye){return Ye&&Array.isArray(Ye)&&Ye[0].hoverOnBox!==!0}function oe(Ye,ot){var Ve=Ye[0],Ae=-1,He=[],Je,tt;for(tt=0;tt<ot.length;tt++)if(Je=ot[tt],Ve.fullData._expandedIndex===Je.cd[0].trace._expandedIndex){if(Ve.hoverOnBox===!0)break;Ve.pointNumber!==void 0?Ae=Ve.pointNumber:Ve.binNumber!==void 0&&(Ae=Ve.binNumber,He=Ve.pointNumbers);break}return{pointNumber:Ae,pointNumbers:He,searchInfo:Je}}function be(Ye){var ot=Ye.searchInfo.cd[0].trace,Ve=Ye.pointNumber,Ae=Ye.pointNumbers,He=Ae.length>0,Je=He?Ae[0]:Ve;return ot.selectedpoints?ot.selectedpoints.indexOf(Je)>-1:!1}function ce(Ye,ot){var Ve=[],Ae,He,Je,tt;for(tt=0;tt<Ye.length;tt++)Ae=Ye[tt],Ae.cd[0].trace.selectedpoints&&Ae.cd[0].trace.selectedpoints.length>0&&Ve.push(Ae);if(Ve.length===1&&(Je=Ve[0]===ot.searchInfo,Je&&(He=ot.searchInfo.cd[0].trace,He.selectedpoints.length===ot.pointNumbers.length))){for(tt=0;tt<ot.pointNumbers.length;tt++)if(He.selectedpoints.indexOf(ot.pointNumbers[tt])<0)return!1;return!0}return!1}function de(Ye){var ot=0,Ve,Ae,He;for(He=0;He<Ye.length;He++)if(Ve=Ye[He],Ae=Ve.cd[0].trace,Ae.selectedpoints&&(Ae.selectedpoints.length>1||(ot+=Ae.selectedpoints.length,ot>1)))return!1;return ot===1}function ye(Ye,ot,Ve){var Ae;for(Ae=0;Ae<ot.length;Ae++){var He=ot[Ae].cd[0].trace._fullInput,Je=Ye._fullLayout._tracePreGUI[He.uid]||{};Je.selectedpoints===void 0&&(Je.selectedpoints=He._input.selectedpoints||null)}var tt;if(Ve){var St=Ve.points||[];for(Ae=0;Ae<ot.length;Ae++)tt=ot[Ae].cd[0].trace,tt._input.selectedpoints=tt._fullInput.selectedpoints=[],tt._fullInput!==tt&&(tt.selectedpoints=[]);for(var _t=0;_t<St.length;_t++){var kt=St[_t],jt=kt.data,Bt=kt.fullData,Wt=kt.pointIndex,Qt=kt.pointIndices;Qt?([].push.apply(jt.selectedpoints,Qt),tt._fullInput!==tt&&[].push.apply(Bt.selectedpoints,Qt)):(jt.selectedpoints.push(Wt),tt._fullInput!==tt&&Bt.selectedpoints.push(Wt))}}else for(Ae=0;Ae<ot.length;Ae++)tt=ot[Ae].cd[0].trace,delete tt.selectedpoints,delete tt._input.selectedpoints,tt._fullInput!==tt&&delete tt._fullInput.selectedpoints;ge(Ye,ot)}function ge(Ye,ot){for(var Ve=!1,Ae=0;Ae<ot.length;Ae++){var He=ot[Ae],Je=He.cd;M.traceIs(Je[0].trace,"regl")&&(Ve=!0);var tt=He._module,St=tt.styleOnSelect||tt.style;St&&(St(Ye,Je,Je[0].node3),Je[0].nodeRangePlot3&&St(Ye,Je,Je[0].nodeRangePlot3))}Ve&&(E(Ye),F(Ye))}function me(Ye,ot,Ve){for(var Ae=Ve?w.difference:w.union,He=Ae({regions:Ye},{regions:[ot]}),Je=He.regions.reverse(),tt=0;tt<Je.length;tt++){var St=Je[tt];St.subtract=We(St,Je.slice(0,tt))}return Je}function Me(Ye,ot){if(Array.isArray(Ye))for(var Ve=ot.cd,Ae=ot.cd[0].trace,He=0;He<Ye.length;He++)Ye[He]=n(Ye[He],Ae,Ve);return Ye}function Le(Ye,ot){for(var Ve=[],Ae=0;Ae<Ye.length;Ae++){Ve[Ae]=[];for(var He=0;He<Ye[Ae].length;He++){Ve[Ae][He]=[],Ve[Ae][He][0]=He?"L":"M";for(var Je=0;Je<Ye[Ae][He].length;Je++)Ve[Ae][He].push(Ye[Ae][He][Je])}ot||Ve[Ae].push(["Z",Ve[Ae][0][1],Ve[Ae][0][2]])}return Ve}function Oe(Ye,ot){for(var Ve=[],Ae,He,Je=0;Je<ot.length;Je++){var tt=ot[Je];He=tt._module.selectPoints(tt,Ye),Ae=Me(He,tt),Ve=Ve.concat(Ae)}return Ve}function _e(Ye,ot,Ve,Ae,He){var Je=!!Ae,tt,St,_t;He&&(tt=He.plotinfo,St=He.xaxes[0]._id,_t=He.yaxes[0]._id);var kt=[],jt=[],Bt=Re(Ye),Wt=Ye._fullLayout;if(tt){var Qt=Wt._zoomlayer,Zt=Wt.dragmode,cr=i(Zt),Xr=y(Zt);if(cr||Xr){var vn=k(Ye,St,"x"),en=k(Ye,_t,"y");if(vn&&en){var ft=Qt.selectAll(".select-outline-"+tt.id);if(ft&&Ye._fullLayout._outlining&&ft.length){for(var ar=ft[0][0],rr=ar.getAttribute("d"),Kt=u(rr,Ye,tt),Er=[],st=0;st<Kt.length;st++){for(var et=Kt[st],vt=[],pt=0;pt<et.length;pt++)vt.push([xt(vn,et[pt][1]),xt(en,et[pt][2])]);vt.xref=St,vt.yref=_t,vt.subtract=We(vt,Er),Er.push(vt)}Bt=Bt.concat(Er)}}}}var Ct=St&&_t?[St+_t]:Wt._subplots.cartesian;Ee(Ye);for(var Ht={},Pe=0;Pe<Ct.length;Pe++){var ke=Ct[Pe],lt=ke.indexOf("y"),ct=ke.slice(0,lt),yt=ke.slice(lt),Rt=St&&_t?Ve:void 0;if(Rt=Fe(Bt,ct,yt,Rt),Rt){var wt=Ae;if(!Je){var Dt=k(Ye,ct,"x"),Jt=k(Ye,yt,"y");wt=ie(Ye,[Dt],[Jt],ke);for(var fr=0;fr<wt.length;fr++){var Rr=wt[fr],Sr=Rr.cd[0],Pr=Sr.trace;if(Rr._module.name==="scattergl"&&!Sr.t.xpx){var Jr=Pr.x,ur=Pr.y,wr=Pr._length;Sr.t.xpx=[],Sr.t.ypx=[];for(var Br=0;Br<wr;Br++)Sr.t.xpx[Br]=Dt.c2p(Jr[Br]),Sr.t.ypx[Br]=Jt.c2p(ur[Br])}Rr._module.name==="splom"&&(Ht[Pr.uid]||(Ht[Pr.uid]=!0))}}var Yr=Oe(Rt,wt);kt=kt.concat(Yr),jt=jt.concat(wt)}}var Dr={points:kt};ye(Ye,jt,Dr);var at=Wt.clickmode,zt=at.indexOf("event")>-1&&ot;if(!tt&&ot){var qt=Re(Ye,!0);if(qt.length){var hr=qt[0].xref,Ur=qt[0].yref;if(hr&&Ur){var Gr=Nt(qt),Ir=Vt([k(Ye,hr,"x"),k(Ye,Ur,"y")]);Ir(Dr,Gr)}}Ye._fullLayout._noEmitSelectedAtStart?Ye._fullLayout._noEmitSelectedAtStart=!1:zt&&Ut(Ye,Dr),Wt._reselect=!1}if(!tt&&Wt._deselect){var kr=Wt._deselect;St=kr.xref,_t=kr.yref,Ze(St,_t,jt)||Ge(Ye,St,_t,Ae),zt&&(Dr.points.length?Ut(Ye,Dr):Lt(Ye)),Wt._deselect=!1}return{eventData:Dr,selectionTesters:Ve}}function Ee(Ye){var ot=Ye.calcdata;if(!!ot)for(var Ve=0;Ve<ot.length;Ve++){var Ae=ot[Ve][0],He=Ae.trace,Je=Ye._fullLayout._splomScenes;if(Je){var tt=Je[He.uid];tt&&(tt.selectBatch=[])}}}function Ze(Ye,ot,Ve){for(var Ae=0;Ae<Ve.length;Ae++){var He=Ve[Ae];if(He.xaxis&&He.xaxis._id===Ye&&He.yaxis&&He.yaxis._id===ot)return!0}return!1}function Ge(Ye,ot,Ve,Ae){Ae=ie(Ye,[k(Ye,ot,"x")],[k(Ye,Ve,"y")],ot+Ve);for(var He=0;He<Ae.length;He++){var Je=Ae[He];Je._module.selectPoints(Je,!1)}ye(Ye,Ae)}function Fe(Ye,ot,Ve,Ae){for(var He,Je=0;Je<Ye.length;Je++){var tt=Ye[Je];if(!(ot!==tt.xref||Ve!==tt.yref))if(He){var St=!!tt.subtract;He=me(He,tt,St),Ae=Y(He)}else He=[tt],Ae=O(tt)}return Ae}function Re(Ye,ot){for(var Ve=[],Ae=Ye._fullLayout,He=Ae.selections,Je=He.length,tt=0;tt<Je;tt++)if(!(ot&&tt!==Ae._activeSelectionIndex)){var St=He[tt];if(!!St){var _t=St.xref,kt=St.yref,jt=k(Ye,_t,"x"),Bt=k(Ye,kt,"y"),Wt,Qt,Zt,cr,Xr;if(St.type==="rect"){Xr=[];var vn=xt(jt,St.x0),en=xt(jt,St.x1),ft=xt(Bt,St.y0),ar=xt(Bt,St.y1);Xr=[[vn,ft],[vn,ar],[en,ar],[en,ft]],Wt=Math.min(vn,en),Qt=Math.max(vn,en),Zt=Math.min(ft,ar),cr=Math.max(ft,ar),Xr.xmin=Wt,Xr.xmax=Qt,Xr.ymin=Zt,Xr.ymax=cr,Xr.xref=_t,Xr.yref=kt,Xr.subtract=!1,Xr.isRect=!0,Ve.push(Xr)}else if(St.type==="path")for(var rr=St.path.split("Z"),Kt=[],Er=0;Er<rr.length;Er++){var st=rr[Er];if(!!st){st+="Z";var et=d.extractPathCoords(st,p.paramIsX,"raw"),vt=d.extractPathCoords(st,p.paramIsY,"raw");Wt=1/0,Qt=-1/0,Zt=1/0,cr=-1/0,Xr=[];for(var pt=0;pt<et.length;pt++){var Ct=xt(jt,et[pt]),Ht=xt(Bt,vt[pt]);Xr.push([Ct,Ht]),Wt=Math.min(Ct,Wt),Qt=Math.max(Ct,Qt),Zt=Math.min(Ht,Zt),cr=Math.max(Ht,cr)}Xr.xmin=Wt,Xr.xmax=Qt,Xr.ymin=Zt,Xr.ymax=cr,Xr.xref=_t,Xr.yref=kt,Xr.subtract=We(Xr,Kt),Kt.push(Xr),Ve.push(Xr)}}}}return Ve}function We(Ye,ot){for(var Ve=!1,Ae=0;Ae<ot.length;Ae++)for(var He=ot[Ae],Je=0;Je<Ye.length;Je++)if(f(Ye[Je],He)){Ve=!Ve;break}return Ve}function xt(Ye,ot){return Ye.type==="date"&&(ot=ot.replace("_"," ")),Ye.type==="log"?Ye.c2p(ot):Ye.r2p(ot,null,Ye.calendar)}function Nt(Ye){for(var ot=Ye.length,Ve=[],Ae=0;Ae<ot;Ae++){var He=Ye[Ae];Ve=Ve.concat(He),Ve=Ve.concat([He[0]])}return tr(Ve)}function tr(Ye){return Ye.isRect=Ye.length===5&&Ye[0][0]===Ye[4][0]&&Ye[0][1]===Ye[4][1]&&Ye[0][0]===Ye[1][0]&&Ye[2][0]===Ye[3][0]&&Ye[0][1]===Ye[3][1]&&Ye[1][1]===Ye[2][1]||Ye[0][1]===Ye[1][1]&&Ye[2][1]===Ye[3][1]&&Ye[0][0]===Ye[3][0]&&Ye[1][0]===Ye[2][0],Ye.isRect&&(Ye.xmin=Math.min(Ye[0][0],Ye[2][0]),Ye.xmax=Math.max(Ye[0][0],Ye[2][0]),Ye.ymin=Math.min(Ye[0][1],Ye[2][1]),Ye.ymax=Math.max(Ye[0][1],Ye[2][1])),Ye}function Vt(Ye){return function(ot,Ve){for(var Ae,He,Je=0;Je<Ye.length;Je++){var tt=Ye[Je],St=tt._id,_t=St.charAt(0);if(Ve.isRect){Ae||(Ae={});var kt=Ve[_t+"min"],jt=Ve[_t+"max"];kt!==void 0&&jt!==void 0&&(Ae[St]=[B(tt,kt),B(tt,jt)].sort(v))}else He||(He={}),He[St]=Ve.map(G(tt))}Ae&&(ot.range=Ae),He&&(ot.lassoPoints=He)}}function Pt(Ye){var ot=Ye.plotinfo;return ot.fillRangeItems||Vt(Ye.xaxes.concat(Ye.yaxes))}function $t(Ye,ot){Ye.emit("plotly_selecting",ot)}function Ut(Ye,ot){ot&&(ot.selections=(Ye.layout||{}).selections||[]),Ye.emit("plotly_selected",ot)}function Lt(Ye){Ye.emit("plotly_deselect",null)}U.exports={reselect:_e,prepSelect:j,clearOutline:m,clearSelectionsCache:Z,selectOnClick:re}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(o,U,H){var w=o("../annotations/attributes"),f=o("../../traces/scatter/attributes").line,M=o("../drawing/attributes").dash,T=o("../../lib/extend").extendFlat,e=o("../../plot_api/plot_template").templatedArray;o("../../constants/axis_placeable_objects"),U.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},w.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},w.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},f.color,{editType:"arraydraw"}),width:T({},f.width,{editType:"calc+arraydraw"}),dash:T({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("./constants"),T=o("./helpers");U.exports=function(h){var i=h._fullLayout,s=w.filterVisible(i.shapes);if(!(!s.length||!h._fullData.length))for(var y=0;y<s.length;y++){var d=s[y];d._extremes={};var p,c,m=f.getRefType(d.xref),l=f.getRefType(d.yref);if(d.xref!=="paper"&&m!=="domain"){var x=d.xsizemode==="pixel"?d.xanchor:d.x0,u=d.xsizemode==="pixel"?d.xanchor:d.x1;p=f.getFromId(h,d.xref),c=r(p,x,u,d.path,M.paramIsX),c&&(d._extremes[p._id]=f.findExtremes(p,c,e(d)))}if(d.yref!=="paper"&&l!=="domain"){var A=d.ysizemode==="pixel"?d.yanchor:d.y0,_=d.ysizemode==="pixel"?d.yanchor:d.y1;p=f.getFromId(h,d.yref),c=r(p,A,_,d.path,M.paramIsY),c&&(d._extremes[p._id]=f.findExtremes(p,c,a(d)))}}};function e(t){return n(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function a(t){return n(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function n(t,h,i,s,y,d){var p=t/2,c=d;if(h==="pixel"){var m=y?T.extractPathCoords(y,d?M.paramIsY:M.paramIsX):[i,s],l=w.aggNums(Math.max,null,m),x=w.aggNums(Math.min,null,m),u=x<0?Math.abs(x)+p:p,A=l>0?l+p:p;return{ppad:p,ppadplus:c?u:A,ppadminus:c?A:u}}else return{ppad:p}}function r(t,h,i,s,y){var d=t.type==="category"||t.type==="multicategory"?t.r2c:t.d2c;if(h!==void 0)return[d(h),d(i)];if(!!s){var p=1/0,c=-1/0,m=s.match(M.segmentRE),l,x,u,A,_;for(t.type==="date"&&(d=T.decodeDate(d)),l=0;l<m.length;l++)x=m[l],u=y[x.charAt(0)].drawn,u!==void 0&&(A=m[l].substr(1).match(M.paramRE),!(!A||A.length<u)&&(_=d(A[u]),_<p&&(p=_),_>c&&(c=_)));if(c>=p)return[p,c]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(o,U,H){U.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/array_container_defaults"),T=o("./attributes"),e=o("./helpers");U.exports=function(r,t){M(r,t,{name:"shapes",handleItemDefaults:a})};function a(n,r,t){function h(G,Q){return w.coerce(n,r,T,G,Q)}var i=h("visible");if(!!i){var s=h("path"),y=s?"path":"rect",d=h("type",y),p=d!=="path";p&&delete r.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule");var c=h("line.width");c&&(h("line.color"),h("line.dash"));for(var m=h("xsizemode"),l=h("ysizemode"),x=["x","y"],u=0;u<2;u++){var A=x[u],_=A+"anchor",g=A==="x"?m:l,b={_fullLayout:t},v,C,S,k=f.coerceRef(n,r,b,A,void 0,"paper"),E=f.getRefType(k);if(E==="range"?(v=f.getFromId(b,k),v._shapeIndices.push(r._index),S=e.rangeToShapePosition(v),C=e.shapePositionToRange(v)):C=S=w.identity,p){var F=.25,I=.75,D=A+"0",R=A+"1",O=n[D],z=n[R];n[D]=C(n[D],!0),n[R]=C(n[R],!0),g==="pixel"?(h(D,0),h(R,10)):(f.coercePosition(r,b,h,k,D,F),f.coercePosition(r,b,h,k,R,I)),r[D]=S(r[D]),r[R]=S(r[R]),n[D]=O,n[R]=z}if(g==="pixel"){var B=n[_];n[_]=C(n[_],!0),f.coercePosition(r,b,h,k,_,.25),r[_]=S(r[_]),n[_]=B}}p&&w.noneOrAll(n,r,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(o,U,H){var w=o("../../lib"),f=w.strTranslate,M=o("../dragelement"),T=o("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,n=o("../../registry"),r=o("../color"),t=o("./draw_newshape/constants"),h=t.i000,i=t.i090,s=t.i180,y=t.i270,d=o("./handle_outline"),p=d.clearOutlineControllers,c=o("./draw_newshape/helpers"),m=c.pointsOnRectangle,l=c.pointsOnEllipse,x=c.writePaths,u=o("./draw_newshape/newshapes"),A=o("../selections/draw_newselection/newselections");U.exports=function v(C,S,k,E){E||(E=0);var F=k.gd;function I(){v(C,S,k,E++),l(C[0])&&D({redrawing:!0})}function D(ce){var de={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,de=u(S,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,de=A(S,k),F._fullLayout._reselect=!0),Object.keys(de).length&&n.call((ce||{}).redrawing?"relayout":"_guiRelayout",F,de)}var R=F._fullLayout,O=R._zoomlayer,z=k.dragmode,B=e(z),G=a(z);(B||G)&&(F._fullLayout._outlining=!0),p(F),S.attr("d",x(C));var Q,X,j,re,ue;if(!E&&(k.isActiveShape||k.isActiveSelection)){ue=_([],C);var K=O.append("g").attr("class","outline-controllers");Z(K),be()}function te(ce){j=+ce.srcElement.getAttribute("data-i"),re=+ce.srcElement.getAttribute("data-j"),Q[j][re].moveFn=Y}function Y(ce,de){if(!!C.length){var ye=ue[j][re][1],ge=ue[j][re][2],me=C[j],Me=me.length;if(m(me)){var Le=ce,Oe=de;if(k.isActiveSelection){var _e=g(me,re);_e[1]===me[re][1]?Oe=0:Le=0}for(var Ee=0;Ee<Me;Ee++)if(Ee!==re){var Ze=me[Ee];Ze[1]===me[re][1]&&(Ze[1]=ye+Le),Ze[2]===me[re][2]&&(Ze[2]=ge+Oe)}if(me[re][1]=ye+Le,me[re][2]=ge+Oe,!m(me))for(var Ge=0;Ge<Me;Ge++)for(var Fe=0;Fe<me[Ge].length;Fe++)me[Ge][Fe]=ue[j][Ge][Fe]}else me[re][1]=ye+ce,me[re][2]=ge+de;I()}}function V(){D()}function ee(){if(!!C.length&&!!C[j]&&!!C[j].length){for(var ce=[],de=0;de<C[j].length;de++)de!==re&&ce.push(C[j][de]);ce.length>1&&!(ce.length===2&&ce[1][0]==="Z")&&(re===0&&(ce[0][0]="M"),C[j]=ce,I(),D())}}function ne(ce,de){if(ce===2){j=+de.srcElement.getAttribute("data-i"),re=+de.srcElement.getAttribute("data-j");var ye=C[j];!m(ye)&&!l(ye)&&ee()}}function Z(ce){Q=[];for(var de=0;de<C.length;de++){var ye=C[de],ge=m(ye),me=!ge&&l(ye);Q[de]=[];for(var Me=ye.length,Le=0;Le<Me;Le++)if(ye[Le][0]!=="Z"&&!(me&&Le!==h&&Le!==i&&Le!==s&&Le!==y)){var Oe=ge&&k.isActiveSelection,_e;Oe&&(_e=g(ye,Le));var Ee=ye[Le][1],Ze=ye[Le][2],Ge=ce.append(Oe?"rect":"circle").attr("data-i",de).attr("data-j",Le).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Oe){var Fe=_e[1]-Ee,Re=_e[2]-Ze,We=Re?5:Math.max(Math.min(25,Math.abs(Fe)-5),5),xt=Fe?5:Math.max(Math.min(25,Math.abs(Re)-5),5);Ge.classed(Re?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",We).attr("height",xt).attr("x",Ee-We/2).attr("y",Ze-xt/2).attr("transform",f(Fe/2,Re/2))}else Ge.classed("cursor-grab",!0).attr("r",5).attr("cx",Ee).attr("cy",Ze);Q[de][Le]={element:Ge.node(),gd:F,prepFn:te,doneFn:V,clickFn:ne},M.init(Q[de][Le])}}}function q(ce,de){if(!!C.length)for(var ye=0;ye<C.length;ye++)for(var ge=0;ge<C[ye].length;ge++)for(var me=0;me+2<C[ye][ge].length;me+=2)C[ye][ge][me+1]=ue[ye][ge][me+1]+ce,C[ye][ge][me+2]=ue[ye][ge][me+2]+de}function ie(ce,de){q(ce,de),I()}function se(ce){j=+ce.srcElement.getAttribute("data-i"),j||(j=0),X[j].moveFn=ie}function ae(){D()}function oe(ce){ce===2&&b(F)}function be(){if(X=[],!!C.length){var ce=0;X[ce]={element:S[0][0],gd:F,prepFn:se,doneFn:ae,clickFn:oe},M.init(X[ce])}}};function _(v,C){for(var S=0;S<C.length;S++){var k=C[S];v[S]=[];for(var E=0;E<k.length;E++){v[S][E]=[];for(var F=0;F<k[E].length;F++)v[S][E][F]=k[E][F]}}return v}function g(v,C){var S=v[C][1],k=v[C][2],E=v.length,F,I,D;return F=(C+1)%E,I=v[F][1],D=v[F][2],I===S&&D===k&&(F=(C+2)%E,I=v[F][1],D=v[F][2]),[F,I,D]}function b(v){if(!!a(v._fullLayout.dragmode)){p(v);var C=v._fullLayout._activeSelectionIndex,S=(v.layout||{}).selections||[];if(C<S.length){for(var k=[],E=0;E<S.length;E++)E!==C&&k.push(S[E]);delete v._fullLayout._activeSelectionIndex;var F=v._fullLayout.selections[C];v._fullLayout._deselect={xref:F.xref,yref:F.yref},n.call("_guiRelayout",v,{selections:k})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../plots/cartesian/axes"),T=o("./draw_newshape/helpers").readPaths,e=o("./display_outlines"),a=o("./handle_outline").clearOutlineControllers,n=o("../color"),r=o("../drawing"),t=o("../../plot_api/plot_template").arrayEditor,h=o("../dragelement"),i=o("../../lib/setcursor"),s=o("./constants"),y=o("./helpers"),d=y.getPathString;U.exports={draw:p,drawOne:l,eraseActiveShape:b};function p(v){var C=v._fullLayout;C._shapeUpperLayer.selectAll("path").remove(),C._shapeLowerLayer.selectAll("path").remove();for(var S in C._plots){var k=C._plots[S].shapelayer;k&&k.selectAll("path").remove()}for(var E=0;E<C.shapes.length;E++)C.shapes[E].visible&&l(v,E)}function c(v){return!!v._fullLayout._outlining}function m(v){return!v._context.edits.shapePosition}function l(v,C){v._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+C+'"]').remove();var S=y.makeShapesOptionsAndPlotinfo(v,C),k=S.options,E=S.plotinfo;if(!k._input||k.visible===!1)return;if(k.layer!=="below")I(v._fullLayout._shapeUpperLayer);else if(k.xref==="paper"||k.yref==="paper")I(v._fullLayout._shapeLowerLayer);else if(E._hadPlotinfo){var F=E.mainplotinfo||E;I(F.shapelayer)}else I(v._fullLayout._shapeLowerLayer);function I(D){var R=d(v,k),O={"data-index":C,"fill-rule":k.fillrule,d:R},z=k.opacity,B=k.fillcolor,G=k.line.width?k.line.color:"rgba(0,0,0,0)",Q=k.line.width,X=k.line.dash;!Q&&k.editable===!0&&(Q=5,X="solid");var j=R[R.length-1]!=="Z",re=m(v)&&k.editable&&v._fullLayout._activeShapeIndex===C;re&&(B=j?"rgba(0,0,0,0)":v._fullLayout.activeshape.fillcolor,z=v._fullLayout.activeshape.opacity);var ue=D.append("path").attr(O).style("opacity",z).call(n.stroke,G).call(n.fill,B).call(r.dashLine,X,Q);x(ue,v,k);var K;if((re||v._context.edits.shapePosition)&&(K=t(v.layout,"shapes",k)),re){ue.style({cursor:"move"});var te={element:ue.node(),plotinfo:E,gd:v,editHelpers:K,isActiveShape:!0},Y=T(R,v);e(Y,ue,te)}else v._context.edits.shapePosition?u(v,ue,k,C,D,K):k.editable===!0&&ue.style("pointer-events",j||n.opacity(B)*z<=.5?"stroke":"all");ue.node().addEventListener("click",function(){return _(v,ue)})}}function x(v,C,S){var k=(S.xref+S.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(v,k?"clip"+C._fullLayout._uid+k:null,C)}function u(v,C,S,k,E,F){var I=10,D=10,R=S.xsizemode==="pixel",O=S.ysizemode==="pixel",z=S.type==="line",B=S.type==="path",G=F.modifyItem,Q,X,j,re,ue,K,te,Y,V,ee,ne,Z,q,ie,se,ae=M.getFromId(v,S.xref),oe=M.getRefType(S.xref),be=M.getFromId(v,S.yref),ce=M.getRefType(S.yref),de=y.getDataToPixel(v,ae,!1,oe),ye=y.getDataToPixel(v,be,!0,ce),ge=y.getPixelToData(v,ae,!1,oe),me=y.getPixelToData(v,be,!0,ce),Me=_e(),Le={element:Me.node(),gd:v,prepFn:Ge,doneFn:Fe,clickFn:Re},Oe;h.init(Le),Me.node().onmousemove=Ze;function _e(){return z?Ee():C}function Ee(){var Pt=10,$t=Math.max(S.line.width,Pt),Ut=E.append("g").attr("data-index",k);Ut.append("path").attr("d",C.attr("d")).style({cursor:"move","stroke-width":$t,"stroke-opacity":"0"});var Lt={"fill-opacity":"0"},Ye=Math.max($t/2,Pt);return Ut.append("circle").attr({"data-line-point":"start-point",cx:R?de(S.xanchor)+S.x0:de(S.x0),cy:O?ye(S.yanchor)-S.y0:ye(S.y0),r:Ye}).style(Lt).classed("cursor-grab",!0),Ut.append("circle").attr({"data-line-point":"end-point",cx:R?de(S.xanchor)+S.x1:de(S.x1),cy:O?ye(S.yanchor)-S.y1:ye(S.y1),r:Ye}).style(Lt).classed("cursor-grab",!0),Ut}function Ze(Pt){if(c(v)){Oe=null;return}if(z)Pt.target.tagName==="path"?Oe="move":Oe=Pt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var $t=Le.element.getBoundingClientRect(),Ut=$t.right-$t.left,Lt=$t.bottom-$t.top,Ye=Pt.clientX-$t.left,ot=Pt.clientY-$t.top,Ve=!B&&Ut>I&&Lt>D&&!Pt.shiftKey?h.getCursor(Ye/Ut,1-ot/Lt):"move";i(C,Ve),Oe=Ve.split("-")[0]}}function Ge(Pt){c(v)||(R&&(ue=de(S.xanchor)),O&&(K=ye(S.yanchor)),S.type==="path"?se=S.path:(Q=R?S.x0:de(S.x0),X=O?S.y0:ye(S.y0),j=R?S.x1:de(S.x1),re=O?S.y1:ye(S.y1)),Q<j?(V=Q,q="x0",ee=j,ie="x1"):(V=j,q="x1",ee=Q,ie="x0"),!O&&X<re||O&&X>re?(te=X,ne="y0",Y=re,Z="y1"):(te=re,ne="y1",Y=X,Z="y0"),Ze(Pt),Nt(E,S),Vt(C,S,v),Le.moveFn=Oe==="move"?We:xt,Le.altKey=Pt.altKey)}function Fe(){c(v)||(i(C),tr(E),x(C,v,S),w.call("_guiRelayout",v,F.getUpdateObj()))}function Re(){c(v)||tr(E)}function We(Pt,$t){if(S.type==="path"){var Ut=function(ot){return ot},Lt=Ut,Ye=Ut;R?G("xanchor",S.xanchor=ge(ue+Pt)):(Lt=function(Ve){return ge(de(Ve)+Pt)},ae&&ae.type==="date"&&(Lt=y.encodeDate(Lt))),O?G("yanchor",S.yanchor=me(K+$t)):(Ye=function(Ve){return me(ye(Ve)+$t)},be&&be.type==="date"&&(Ye=y.encodeDate(Ye))),G("path",S.path=A(se,Lt,Ye))}else R?G("xanchor",S.xanchor=ge(ue+Pt)):(G("x0",S.x0=ge(Q+Pt)),G("x1",S.x1=ge(j+Pt))),O?G("yanchor",S.yanchor=me(K+$t)):(G("y0",S.y0=me(X+$t)),G("y1",S.y1=me(re+$t)));C.attr("d",d(v,S)),Nt(E,S)}function xt(Pt,$t){if(B){var Ut=function(Zt){return Zt},Lt=Ut,Ye=Ut;R?G("xanchor",S.xanchor=ge(ue+Pt)):(Lt=function(cr){return ge(de(cr)+Pt)},ae&&ae.type==="date"&&(Lt=y.encodeDate(Lt))),O?G("yanchor",S.yanchor=me(K+$t)):(Ye=function(cr){return me(ye(cr)+$t)},be&&be.type==="date"&&(Ye=y.encodeDate(Ye))),G("path",S.path=A(se,Lt,Ye))}else if(z){if(Oe==="resize-over-start-point"){var ot=Q+Pt,Ve=O?X-$t:X+$t;G("x0",S.x0=R?ot:ge(ot)),G("y0",S.y0=O?Ve:me(Ve))}else if(Oe==="resize-over-end-point"){var Ae=j+Pt,He=O?re-$t:re+$t;G("x1",S.x1=R?Ae:ge(Ae)),G("y1",S.y1=O?He:me(He))}}else{var Je=function(Zt){return Oe.indexOf(Zt)!==-1},tt=Je("n"),St=Je("s"),_t=Je("w"),kt=Je("e"),jt=tt?te+$t:te,Bt=St?Y+$t:Y,Wt=_t?V+Pt:V,Qt=kt?ee+Pt:ee;O&&(tt&&(jt=te-$t),St&&(Bt=Y-$t)),(!O&&Bt-jt>D||O&&jt-Bt>D)&&(G(ne,S[ne]=O?jt:me(jt)),G(Z,S[Z]=O?Bt:me(Bt))),Qt-Wt>I&&(G(q,S[q]=R?Wt:ge(Wt)),G(ie,S[ie]=R?Qt:ge(Qt)))}C.attr("d",d(v,S)),Nt(E,S)}function Nt(Pt,$t){(R||O)&&Ut();function Ut(){var Lt=$t.type!=="path",Ye=Pt.selectAll(".visual-cue").data([0]),ot=1;Ye.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":ot}).classed("visual-cue",!0);var Ve=de(R?$t.xanchor:f.midRange(Lt?[$t.x0,$t.x1]:y.extractPathCoords($t.path,s.paramIsX))),Ae=ye(O?$t.yanchor:f.midRange(Lt?[$t.y0,$t.y1]:y.extractPathCoords($t.path,s.paramIsY)));if(Ve=y.roundPositionForSharpStrokeRendering(Ve,ot),Ae=y.roundPositionForSharpStrokeRendering(Ae,ot),R&&O){var He="M"+(Ve-1-ot)+","+(Ae-1-ot)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Ye.attr("d",He)}else if(R){var Je="M"+(Ve-1-ot)+","+(Ae-9-ot)+"v18 h2 v-18 Z";Ye.attr("d",Je)}else{var tt="M"+(Ve-9-ot)+","+(Ae-1-ot)+"h18 v2 h-18 Z";Ye.attr("d",tt)}}}function tr(Pt){Pt.selectAll(".visual-cue").remove()}function Vt(Pt,$t,Ut){var Lt=$t.xref,Ye=$t.yref,ot=M.getFromId(Ut,Lt),Ve=M.getFromId(Ut,Ye),Ae="";Lt!=="paper"&&!ot.autorange&&(Ae+=Lt),Ye!=="paper"&&!Ve.autorange&&(Ae+=Ye),r.setClipUrl(Pt,Ae?"clip"+Ut._fullLayout._uid+Ae:null,Ut)}}function A(v,C,S){return v.replace(s.segmentRE,function(k){var E=0,F=k.charAt(0),I=s.paramIsX[F],D=s.paramIsY[F],R=s.numParams[F],O=k.substr(1).replace(s.paramRE,function(z){return E>=R||(I[E]?z=C(z):D[E]&&(z=S(z)),E++),z});return F+O})}function _(v,C){if(!!m(v)){var S=C.node(),k=+S.getAttribute("data-index");if(k>=0){if(k===v._fullLayout._activeShapeIndex){g(v);return}v._fullLayout._activeShapeIndex=k,v._fullLayout._deactivateShape=g,p(v)}}}function g(v){if(!!m(v)){var C=v._fullLayout._activeShapeIndex;C>=0&&(a(v),delete v._fullLayout._activeShapeIndex,p(v))}}function b(v){if(!!m(v)){a(v);var C=v._fullLayout._activeShapeIndex,S=(v.layout||{}).shapes||[];if(C<S.length){for(var k=[],E=0;E<S.length;E++)E!==C&&k.push(S[E]);delete v._fullLayout._activeShapeIndex,w.call("_guiRelayout",v,{shapes:k})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(o,U,H){var w=o("../../drawing/attributes").dash,f=o("../../../lib/extend").extendFlat;U.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:f({},w,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(o,U,H){var w=32;U.exports={CIRCLE_SIDES:w,i000:0,i090:w/4,i180:w/2,i270:w/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(o,U,H){var w=o("../../color");U.exports=function(M,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var n=(M||{}).plot_bgcolor||"#FFF";e("newshape.line.color",w.contrast(n)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(o,U,H){var w=o("parse-svg-path"),f=o("./constants"),M=f.CIRCLE_SIDES,T=f.SQRT2,e=o("../../selections/helpers"),a=e.p2r,n=e.r2p,r=[0,3,4,5,6,1,2],t=[0,3,4,1,2];H.writePaths=function(s){var y=s.length;if(!y)return"M0,0Z";for(var d="",p=0;p<y;p++)for(var c=s[p].length,m=0;m<c;m++){var l=s[p][m][0];if(l==="Z")d+="Z";else for(var x=s[p][m].length,u=0;u<x;u++){var A=u;l==="Q"||l==="S"?A=t[u]:l==="C"&&(A=r[u]),d+=s[p][m][A],u>0&&u<x-1&&(d+=",")}}return d},H.readPaths=function(s,y,d,p){var c=w(s),m=[],l=-1,x=function(){l++,m[l]=[]},u,A=0,_=0,g,b,v=function(){g=A,b=_};v();for(var C=0;C<c.length;C++){var S=[],k,E,F,I,D=c[C][0],R=D;switch(D){case"M":x(),A=+c[C][1],_=+c[C][2],S.push([R,A,_]),v();break;case"Q":case"S":k=+c[C][1],F=+c[C][2],A=+c[C][3],_=+c[C][4],S.push([R,A,_,k,F]);break;case"C":k=+c[C][1],F=+c[C][2],E=+c[C][3],I=+c[C][4],A=+c[C][5],_=+c[C][6],S.push([R,A,_,k,F,E,I]);break;case"T":case"L":A=+c[C][1],_=+c[C][2],S.push([R,A,_]);break;case"H":R="L",A=+c[C][1],S.push([R,A,_]);break;case"V":R="L",_=+c[C][1],S.push([R,A,_]);break;case"A":R="L";var O=+c[C][1],z=+c[C][2];+c[C][4]||(O=-O,z=-z);var B=A-O,G=_;for(u=1;u<=M/2;u++){var Q=2*Math.PI*u/M;S.push([R,B+O*Math.cos(Q),G+z*Math.sin(Q)])}break;case"Z":(A!==g||_!==b)&&(A=g,_=b,S.push([R,A,_]));break}for(var X=(d||{}).domain,j=y._fullLayout._size,re=d&&d.xsizemode==="pixel",ue=d&&d.ysizemode==="pixel",K=p===!1,te=0;te<S.length;te++){for(u=0;u+2<7;u+=2){var Y=S[te][u+1],V=S[te][u+2];Y===void 0||V===void 0||(A=Y,_=V,d&&(d.xaxis&&d.xaxis.p2r?(K&&(Y-=d.xaxis._offset),re?Y=n(d.xaxis,d.xanchor)+Y:Y=a(d.xaxis,Y)):(K&&(Y-=j.l),X?Y=X.x[0]+Y/j.w:Y=Y/j.w),d.yaxis&&d.yaxis.p2r?(K&&(V-=d.yaxis._offset),ue?V=n(d.yaxis,d.yanchor)-V:V=a(d.yaxis,V)):(K&&(V-=j.t),X?V=X.y[1]-V/j.h:V=1-V/j.h)),S[te][u+1]=Y,S[te][u+2]=V)}m[l].push(S[te].slice())}}return m};function h(s,y){return Math.abs(s-y)<=1e-6}function i(s,y){var d=y[1]-s[1],p=y[2]-s[2];return Math.sqrt(d*d+p*p)}H.pointsOnRectangle=function(s){var y=s.length;if(y!==5)return!1;for(var d=1;d<3;d++){var p=s[0][d]-s[1][d],c=s[3][d]-s[2][d];if(!h(p,c))return!1;var m=s[0][d]-s[3][d],l=s[1][d]-s[2][d];if(!h(m,l))return!1}return!h(s[0][1],s[1][1])&&!h(s[0][1],s[3][1])?!1:!!(i(s[0],s[1])*i(s[0],s[3]))},H.pointsOnEllipse=function(s){var y=s.length;if(y!==M+1)return!1;y=M;for(var d=0;d<y;d++){var p=(y*2-d)%y,c=(y/2+p)%y,m=(y/2+d)%y;if(!h(i(s[d],s[m]),i(s[p],s[c])))return!1}return!0},H.handleEllipse=function(s,y,d){if(!s)return[y,d];var p=H.ellipseOver({x0:y[0],y0:y[1],x1:d[0],y1:d[1]}),c=(p.x1+p.x0)/2,m=(p.y1+p.y0)/2,l=(p.x1-p.x0)/2,x=(p.y1-p.y0)/2;l||(l=x=x/T),x||(x=l=l/T);for(var u=[],A=0;A<M;A++){var _=A*2*Math.PI/M;u.push([c+l*Math.cos(_),m+x*Math.sin(_)])}return u},H.ellipseOver=function(s){var y=s.x0,d=s.y0,p=s.x1,c=s.y1,m=p-y,l=c-d;y-=m,d-=l;var x=(y+p)/2,u=(d+c)/2,A=T;return m*=A,l*=A,{x0:x-m,y0:u-l,x1:x+m,y1:u+l}},H.fixDatesForPaths=function(s,y,d){var p=y.type==="date",c=d.type==="date";if(!p&&!c)return s;for(var m=0;m<s.length;m++)for(var l=0;l<s[m].length;l++)for(var x=0;x+2<s[m][l].length;x+=2)p&&(s[m][l][x+1]=s[m][l][x+1].replace(" ","_")),c&&(s[m][l][x+2]=s[m][l][x+2].replace(" ","_"));return s}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(o,U,H){var w=o("../../dragelement/helpers"),f=w.drawMode,M=w.openMode,T=o("./constants"),e=T.i000,a=T.i090,n=T.i180,r=T.i270,t=T.cos45,h=T.sin45,i=o("../../selections/helpers"),s=i.p2r,y=i.r2p,d=o(".././handle_outline"),p=d.clearOutline,c=o("./helpers"),m=c.readPaths,l=c.writePaths,x=c.ellipseOver,u=c.fixDatesForPaths;U.exports=function(_,g){if(!!_.length){var b=_[0][0];if(!!b){var v=b.getAttribute("d"),C=g.gd,S=C._fullLayout.newshape,k=g.plotinfo,E=k.xaxis,F=k.yaxis,I=!!k.domain||!k.xaxis,D=!!k.domain||!k.yaxis,R=g.isActiveShape,O=g.dragmode,z=(C.layout||{}).shapes||[];if(!f(O)&&R!==void 0){var B=C._fullLayout._activeShapeIndex;if(B<z.length)switch(C._fullLayout.shapes[B].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var G=z[B].path||"";G[G.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var Q=M(O),X=m(v,C,k,R),j={editable:!0,xref:I?"paper":E._id,yref:D?"paper":F._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};Q||(j.fillcolor=S.fillcolor,j.fillrule=S.fillrule);var re;if(X.length===1&&(re=X[0]),re&&re.length===5&&O==="drawrect")j.type="rect",j.x0=re[0][1],j.y0=re[0][2],j.x1=re[2][1],j.y1=re[2][2];else if(re&&O==="drawline")j.type="line",j.x0=re[0][1],j.y0=re[0][2],j.x1=re[1][1],j.y1=re[1][2];else if(re&&O==="drawcircle"){j.type="circle";var ue=re[e][1],K=re[a][1],te=re[n][1],Y=re[r][1],V=re[e][2],ee=re[a][2],ne=re[n][2],Z=re[r][2],q=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ie=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");q&&(ue=y(k.xaxis,ue),K=y(k.xaxis,K),te=y(k.xaxis,te),Y=y(k.xaxis,Y)),ie&&(V=y(k.yaxis,V),ee=y(k.yaxis,ee),ne=y(k.yaxis,ne),Z=y(k.yaxis,Z));var se=(K+Y)/2,ae=(V+ne)/2,oe=(Y-K+te-ue)/2,be=(Z-ee+ne-V)/2,ce=x({x0:se,y0:ae,x1:se+oe*t,y1:ae+be*h});q&&(ce.x0=s(k.xaxis,ce.x0),ce.x1=s(k.xaxis,ce.x1)),ie&&(ce.y0=s(k.yaxis,ce.y0),ce.y1=s(k.yaxis,ce.y1)),j.x0=ce.x0,j.y0=ce.y0,j.x1=ce.x1,j.y1=ce.y1}else j.type="path",E&&F&&u(X,E,F),j.path=l(X),re=null;p(C);for(var de=g.editHelpers,ye=(de||{}).modifyItem,ge=[],me=0;me<z.length;me++){var Me=C._fullLayout.shapes[me];if(ge[me]=Me._input,R!==void 0&&me===C._fullLayout._activeShapeIndex){var Le=j;switch(Me.type){case"line":case"rect":case"circle":ye("x0",Le.x0),ye("x1",Le.x1),ye("y0",Le.y0),ye("y1",Le.y1);break;case"path":ye("path",Le.path);break}}}return R===void 0?(ge.push(j),ge):de?de.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(o,U,H){function w(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function f(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}U.exports={clearOutlineControllers:w,clearOutline:f}},{}],469:[function(o,U,H){var w=o("./constants"),f=o("../../lib"),M=o("../../plots/cartesian/axes");H.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},H.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},H.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},H.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},H.extractPathCoords=function(e,a,n){var r=[],t=e.match(w.segmentRE);return t.forEach(function(h){var i=a[h.charAt(0)].drawn;if(i!==void 0){var s=h.substr(1).match(w.paramRE);if(!(!s||s.length<i)){var y=s[i],d=n?y:f.cleanNumber(y);r.push(d)}}}),r},H.getDataToPixel=function(e,a,n,r){var t=e._fullLayout._size,h;if(a)if(r==="domain")h=function(s){return a._length*(n?1-s:s)+a._offset};else{var i=H.shapePositionToRange(a);h=function(s){return a._offset+a.r2p(i(s,!0))},a.type==="date"&&(h=H.decodeDate(h))}else n?h=function(s){return t.t+t.h*(1-s)}:h=function(s){return t.l+t.w*s};return h},H.getPixelToData=function(e,a,n,r){var t=e._fullLayout._size,h;if(a)if(r==="domain")h=function(s){var y=(s-a._offset)/a._length;return n?1-y:y};else{var i=H.rangeToShapePosition(a);h=function(s){return i(a.p2r(s-a._offset))}}else n?h=function(s){return 1-(s-t.t)/t.h}:h=function(s){return(s-t.l)/t.w};return h},H.roundPositionForSharpStrokeRendering=function(e,a){var n=Math.round(a%2)===1,r=Math.round(e);return n?r+.5:r},H.makeShapesOptionsAndPlotinfo=function(e,a){var n=e._fullLayout.shapes[a]||{},r=e._fullLayout._plots[n.xref+n.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},n.xref&&n.xref!=="paper"&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&n.yref!=="paper"&&(r.yaxis=e._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},H.makeSelectionsOptionsAndPlotinfo=function(e,a){var n=e._fullLayout.selections[a]||{},r=e._fullLayout._plots[n.xref+n.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},H.getPathString=function(e,a){var n=a.type,r=M.getRefType(a.xref),t=M.getRefType(a.yref),h=M.getFromId(e,a.xref),i=M.getFromId(e,a.yref),s=e._fullLayout._size,y,d,p,c,m,l,x,u;if(h?r==="domain"?d=function(F){return h._offset+h._length*F}:(y=H.shapePositionToRange(h),d=function(F){return h._offset+h.r2p(y(F,!0))}):d=function(F){return s.l+s.w*F},i?t==="domain"?c=function(F){return i._offset+i._length*(1-F)}:(p=H.shapePositionToRange(i),c=function(F){return i._offset+i.r2p(p(F,!0))}):c=function(F){return s.t+s.h*(1-F)},n==="path")return h&&h.type==="date"&&(d=H.decodeDate(d)),i&&i.type==="date"&&(c=H.decodeDate(c)),T(a,d,c);if(a.xsizemode==="pixel"){var A=d(a.xanchor);m=A+a.x0,l=A+a.x1}else m=d(a.x0),l=d(a.x1);if(a.ysizemode==="pixel"){var _=c(a.yanchor);x=_-a.y0,u=_-a.y1}else x=c(a.y0),u=c(a.y1);if(n==="line")return"M"+m+","+x+"L"+l+","+u;if(n==="rect")return"M"+m+","+x+"H"+l+"V"+u+"H"+m+"Z";var g=(m+l)/2,b=(x+u)/2,v=Math.abs(g-m),C=Math.abs(b-x),S="A"+v+","+C,k=g+v+","+b,E=g+","+(b-C);return"M"+k+S+" 0 1,1 "+E+S+" 0 0,1 "+k+"Z"};function T(e,a,n){var r=e.path,t=e.xsizemode,h=e.ysizemode,i=e.xanchor,s=e.yanchor;return r.replace(w.segmentRE,function(y){var d=0,p=y.charAt(0),c=w.paramIsX[p],m=w.paramIsY[p],l=w.numParams[p],x=y.substr(1).replace(w.paramRE,function(u){return c[d]?t==="pixel"?u=a(i)+Number(u):u=a(u):m[d]&&(h==="pixel"?u=n(s)-Number(u):u=n(u)),d++,d>l&&(u="X"),u});return d>l&&(x=x.replace(/[\s,]*X.*/,""),f.log("Ignoring extra params in segment "+y)),p+x})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(o,U,H){var w=o("./draw");U.exports={moduleType:"component",name:"shapes",layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),supplyDrawNewShapeDefaults:o("./draw_newshape/defaults"),includeBasePlot:o("../../plots/cartesian/include_components")("shapes"),calcAutorange:o("./calc_autorange"),draw:w.draw,drawOne:w.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../../plots/pad_attributes"),M=o("../../lib/extend").extendDeepAll,T=o("../../plot_api/edit_types").overrideAll,e=o("../../plots/animation_attributes"),a=o("../../plot_api/plot_template").templatedArray,n=o("./constants"),r=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});U.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(f({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:w({})},font:w({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(o,U,H){U.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/array_container_defaults"),M=o("./attributes"),T=o("./constants"),e=T.name,a=M.steps;U.exports=function(h,i){f(h,i,{name:e,handleItemDefaults:n})};function n(t,h,i){function s(u,A){return w.coerce(t,h,M,u,A)}for(var y=f(t,h,{name:"steps",handleItemDefaults:r}),d=0,p=0;p<y.length;p++)y[p].visible&&d++;var c;if(d<2?c=h.visible=!1:c=s("visible"),!!c){h._stepCount=d;var m=h._visibleSteps=w.filterVisible(y),l=s("active");(y[l]||{}).visible||(h.active=m[0]._index),s("x"),s("y"),w.noneOrAll(t,h,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),w.coerceFont(s,"font",i.font);var x=s("currentvalue.visible");x&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),w.coerceFont(s,"currentvalue.font",h.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function r(t,h){function i(d,p){return w.coerce(t,h,a,d,p)}var s;if(t.method!=="skip"&&!Array.isArray(t.args)?s=h.visible=!1:s=i("visible"),s){i("method"),i("args");var y=i("label","step-"+h._index);i("value",y),i("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../plots/plots"),M=o("../color"),T=o("../drawing"),e=o("../../lib"),a=e.strTranslate,n=o("../../lib/svg_text_utils"),r=o("../../plot_api/plot_template").arrayEditor,t=o("./constants"),h=o("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,y=h.FROM_BR;U.exports=function(O){var z=O._fullLayout,B=p(z,O),G=z._infolayer.selectAll("g."+t.containerClassName).data(B.length>0?[0]:[]);G.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize");function Q(ue){ue._commandObserver&&(ue._commandObserver.remove(),delete ue._commandObserver),f.autoMargin(O,d(ue))}if(G.exit().each(function(){w.select(this).selectAll("g."+t.groupClassName).each(Q)}).remove(),B.length!==0){var X=G.selectAll("g."+t.groupClassName).data(B,c);X.enter().append("g").classed(t.groupClassName,!0),X.exit().each(Q).remove();for(var j=0;j<B.length;j++){var re=B[j];m(O,re)}X.each(function(ue){var K=w.select(this);S(ue),f.manageCommandObserver(O,ue,ue._visibleSteps,function(te){var Y=K.data()[0];Y.active!==te.index&&(Y._dragging||b(O,K,Y,te.index,!1,!0))}),l(O,w.select(this),ue)})}};function d(R){return t.autoMarginIdRoot+R._index}function p(R,O){for(var z=R[t.name],B=[],G=0;G<z.length;G++){var Q=z[G];!Q.visible||(Q._gd=O,B.push(Q))}return B}function c(R){return R._index}function m(R,O){var z=T.tester.selectAll("g."+t.labelGroupClass).data(O._visibleSteps);z.enter().append("g").classed(t.labelGroupClass,!0);var B=0,G=0;z.each(function(ee){var ne=w.select(this),Z=A(ne,{step:ee},O),q=Z.node();if(q){var ie=T.bBox(q);G=Math.max(G,ie.height),B=Math.max(B,ie.width)}}),z.remove();var Q=O._dims={};Q.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var X=R._fullLayout._size;Q.lx=X.l+X.w*O.x,Q.ly=X.t+X.h*(1-O.y),O.lenmode==="fraction"?Q.outerLength=Math.round(X.w*O.len):Q.outerLength=O.len,Q.inputAreaStart=0,Q.inputAreaLength=Math.round(Q.outerLength-O.pad.l-O.pad.r);var j=Q.inputAreaLength-2*t.stepInset,re=j/(O._stepCount-1),ue=B+t.labelPadding;if(Q.labelStride=Math.max(1,Math.ceil(ue/re)),Q.labelHeight=G,Q.currentValueMaxWidth=0,Q.currentValueHeight=0,Q.currentValueTotalHeight=0,Q.currentValueMaxLines=1,O.currentvalue.visible){var K=T.tester.append("g");z.each(function(ee){var ne=x(K,O,ee.label),Z=ne.node()&&T.bBox(ne.node())||{width:0,height:0},q=n.lineCount(ne);Q.currentValueMaxWidth=Math.max(Q.currentValueMaxWidth,Math.ceil(Z.width)),Q.currentValueHeight=Math.max(Q.currentValueHeight,Math.ceil(Z.height)),Q.currentValueMaxLines=Math.max(Q.currentValueMaxLines,q)}),Q.currentValueTotalHeight=Q.currentValueHeight+O.currentvalue.offset,K.remove()}Q.height=Q.currentValueTotalHeight+t.tickOffset+O.ticklen+t.labelOffset+Q.labelHeight+O.pad.t+O.pad.b;var te="left";e.isRightAnchor(O)&&(Q.lx-=Q.outerLength,te="right"),e.isCenterAnchor(O)&&(Q.lx-=Q.outerLength/2,te="center");var Y="top";e.isBottomAnchor(O)&&(Q.ly-=Q.height,Y="bottom"),e.isMiddleAnchor(O)&&(Q.ly-=Q.height/2,Y="middle"),Q.outerLength=Math.ceil(Q.outerLength),Q.height=Math.ceil(Q.height),Q.lx=Math.round(Q.lx),Q.ly=Math.round(Q.ly);var V={y:O.y,b:Q.height*y[Y],t:Q.height*s[Y]};O.lenmode==="fraction"?(V.l=0,V.xl=O.x-O.len*s[te],V.r=0,V.xr=O.x+O.len*y[te]):(V.x=O.x,V.l=Q.outerLength*s[te],V.r=Q.outerLength*y[te]),f.autoMargin(R,d(O),V)}function l(R,O,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),O.call(x,z).call(D,z).call(_,z).call(C,z).call(I,R,z).call(u,R,z);var B=z._dims;T.setTranslate(O,B.lx+z.pad.l,B.ly+z.pad.t),O.call(k,z,!1),O.call(x,z)}function x(R,O,z){if(!!O.currentvalue.visible){var B=O._dims,G,Q;switch(O.currentvalue.xanchor){case"right":G=B.inputAreaLength-t.currentValueInset-B.currentValueMaxWidth,Q="left";break;case"center":G=B.inputAreaLength*.5,Q="middle";break;default:G=t.currentValueInset,Q="left"}var X=e.ensureSingle(R,"text",t.labelClass,function(Y){Y.attr({"text-anchor":Q,"data-notex":1})}),j=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof z=="string")j+=z;else{var re=O.steps[O.active].label,ue=O._gd._fullLayout._meta;ue&&(re=e.templateString(re,ue)),j+=re}O.currentvalue.suffix&&(j+=O.currentvalue.suffix),X.call(T.font,O.currentvalue.font).text(j).call(n.convertToTspans,O._gd);var K=n.lineCount(X),te=(B.currentValueMaxLines+1-K)*O.currentvalue.font.size*i;return n.positionText(X,G,te),X}}function u(R,O,z){var B=e.ensureSingle(R,"rect",t.gripRectClass,function(G){G.call(v,O,R,z).style("pointer-events","all")});B.attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(M.stroke,z.bordercolor).call(M.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function A(R,O,z){var B=e.ensureSingle(R,"text",t.labelClass,function(X){X.attr({"text-anchor":"middle","data-notex":1})}),G=O.step.label,Q=z._gd._fullLayout._meta;return Q&&(G=e.templateString(G,Q)),B.call(T.font,z.font).text(G).call(n.convertToTspans,z._gd),B}function _(R,O){var z=e.ensureSingle(R,"g",t.labelsClass),B=O._dims,G=z.selectAll("g."+t.labelGroupClass).data(B.labelSteps);G.enter().append("g").classed(t.labelGroupClass,!0),G.exit().remove(),G.each(function(Q){var X=w.select(this);X.call(A,Q,O),T.setTranslate(X,E(O,Q.fraction),t.tickOffset+O.ticklen+O.font.size*i+t.labelOffset+B.currentValueTotalHeight)})}function g(R,O,z,B,G){var Q=Math.round(B*(z._stepCount-1)),X=z._visibleSteps[Q]._index;X!==z.active&&b(R,O,z,X,!0,G)}function b(R,O,z,B,G,Q){var X=z.active;z.active=B,r(R.layout,t.name,z).applyUpdate("active",B);var j=z.steps[z.active];O.call(k,z,Q),O.call(x,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:G,previousActive:X}),j&&j.method&&G&&(O._nextMethod?(O._nextMethod.step=j,O._nextMethod.doCallback=G,O._nextMethod.doTransition=Q):(O._nextMethod={step:j,doCallback:G,doTransition:Q},O._nextMethodRaf=window.requestAnimationFrame(function(){var re=O._nextMethod.step;!re.method||(re.execute&&f.executeAPICommand(R,re.method,re.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function v(R,O,z){var B=z.node(),G=w.select(O);function Q(){return z.data()[0]}function X(){var j=Q();O.emit("plotly_sliderstart",{slider:j});var re=z.select("."+t.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),re.call(M.fill,j.activebgcolor);var ue=F(j,w.mouse(B)[0]);g(O,z,j,ue,!0),j._dragging=!0;function K(){var Y=Q(),V=F(Y,w.mouse(B)[0]);g(O,z,Y,V,!1)}G.on("mousemove",K),G.on("touchmove",K);function te(){var Y=Q();Y._dragging=!1,re.call(M.fill,Y.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),O.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}G.on("mouseup",te),G.on("touchend",te)}R.on("mousedown",X),R.on("touchstart",X)}function C(R,O){var z=R.selectAll("rect."+t.tickRectClass).data(O._visibleSteps),B=O._dims;z.enter().append("rect").classed(t.tickRectClass,!0),z.exit().remove(),z.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(G,Q){var X=Q%B.labelStride===0,j=w.select(this);j.attr({height:X?O.ticklen:O.minorticklen}).call(M.fill,O.tickcolor),T.setTranslate(j,E(O,Q/(O._stepCount-1))-.5*O.tickwidth,(X?t.tickOffset:t.minorTickOffset)+B.currentValueTotalHeight)})}function S(R){var O=R._dims;O.labelSteps=[];for(var z=R._stepCount,B=0;B<z;B+=O.labelStride)O.labelSteps.push({fraction:B/(z-1),step:R._visibleSteps[B]})}function k(R,O,z){for(var B=R.select("rect."+t.gripRectClass),G=0,Q=0;Q<O._stepCount;Q++)if(O._visibleSteps[Q]._index===O.active){G=Q;break}var X=E(O,G/(O._stepCount-1));if(!O._invokingCommand){var j=B;z&&O.transition.duration>0&&(j=j.transition().duration(O.transition.duration).ease(O.transition.easing)),j.attr("transform",a(X-t.gripWidth*.5,O._dims.currentValueTotalHeight))}}function E(R,O){var z=R._dims;return z.inputAreaStart+t.stepInset+(z.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,O))}function F(R,O){var z=R._dims;return Math.min(1,Math.max(0,(O-t.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*t.stepInset-2*z.inputAreaStart)))}function I(R,O,z){var B=z._dims,G=e.ensureSingle(R,"rect",t.railTouchRectClass,function(Q){Q.call(v,O,R,z).style("pointer-events","all")});G.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,t.tickOffset+z.ticklen+B.labelHeight)}).call(M.fill,z.bgcolor).attr("opacity",0),T.setTranslate(G,0,B.currentValueTotalHeight)}function D(R,O){var z=O._dims,B=z.inputAreaLength-t.railInset*2,G=e.ensureSingle(R,"rect",t.railRectClass);G.attr({width:B,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,O.bordercolor).call(M.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(G,t.railInset,(z.inputAreaWidth-t.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(o,U,H){var w=o("./constants");U.exports={moduleType:"component",name:w.name,layoutAttributes:o("./attributes"),supplyLayoutDefaults:o("./defaults"),draw:o("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../plots/plots"),T=o("../../registry"),e=o("../../lib"),a=e.strTranslate,n=o("../drawing"),r=o("../color"),t=o("../../lib/svg_text_utils"),h=o("../../constants/interactions"),i=o("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;function y(d,p,c){var m=c.propContainer,l=c.propName,x=c.placeholder,u=c.traceIndex,A=c.avoid||{},_=c.attributes,g=c.transform,b=c.containerGroup,v=d._fullLayout,C=1,S=!1,k=m.title,E=(k&&k.text?k.text:"").trim(),F=k&&k.font?k.font:{},I=F.family,D=F.size,R=F.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var z=d._context.edits[O];E===""?C=0:E.replace(s," % ")===x.replace(s," % ")&&(C=.2,S=!0,z||(E="")),c._meta?E=e.templateString(E,c._meta):v._meta&&(E=e.templateString(E,v._meta));var B=E||z,G;b||(b=e.ensureSingle(v._infolayer,"g","g-"+p),G=v._hColorbarMoveTitle);var Q=b.selectAll("text").data(B?[0]:[]);if(Q.enter().append("text"),Q.text(E).attr("class",p),Q.exit().remove(),!B)return b;function X(K){e.syncOrAsync([j,re],K)}function j(K){var te;return!g&&G&&(g={}),g?(te="",g.rotate&&(te+="rotate("+[g.rotate,_.x,_.y]+")"),(g.offset||G)&&(te+=a(0,(g.offset||0)-(G||0)))):te=null,K.attr("transform",te),K.style({"font-family":I,"font-size":w.round(D,2)+"px",fill:r.rgb(R),opacity:C*r.opacity(R),"font-weight":M.fontWeight}).attr(_).call(t.convertToTspans,d),M.previousPromises(d)}function re(K){var te=w.select(K.node().parentNode);if(A&&A.selection&&A.side&&E){te.attr("transform",null);var Y=i[A.side],V=A.side==="left"||A.side==="top"?-1:1,ee=f(A.pad)?A.pad:2,ne=n.bBox(te.node()),Z={left:0,top:0,right:v.width,bottom:v.height},q=A.maxShift||V*(Z[A.side]-ne[A.side]),ie=0;if(q<0)ie=q;else{var se=A.offsetLeft||0,ae=A.offsetTop||0;ne.left-=se,ne.right-=se,ne.top-=ae,ne.bottom-=ae,A.selection.each(function(){var be=n.bBox(this);e.bBoxIntersect(ne,be,ee)&&(ie=Math.max(ie,V*(be[A.side]-ne[Y])+ee))}),ie=Math.min(q,ie)}if(ie>0||q<0){var oe={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[A.side];te.attr("transform",a(oe[0],oe[1]))}}}Q.call(X);function ue(){C=0,S=!0,Q.text(x).on("mouseover.opacity",function(){w.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(E?Q.on(".opacity",null):ue(),Q.call(t.makeEditable,{gd:d}).on("edit",function(K){u!==void 0?T.call("_guiRestyle",d,l,K,u):T.call("_guiRelayout",d,l,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(K){this.text(K||" ").call(t.positionText,_.x,_.y)})),Q.classed("js-placeholder",S),b}U.exports={draw:y}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../color/attributes"),M=o("../../lib/extend").extendFlat,T=o("../../plot_api/edit_types").overrideAll,e=o("../../plots/pad_attributes"),a=o("../../plot_api/plot_template").templatedArray,n=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});U.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:w({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:f.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(o,U,H){U.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/array_container_defaults"),M=o("./attributes"),T=o("./constants"),e=T.name,a=M.buttons;U.exports=function(h,i){var s={name:e,handleItemDefaults:n};f(h,i,s)};function n(t,h,i){function s(p,c){return w.coerce(t,h,M,p,c)}var y=f(t,h,{name:"buttons",handleItemDefaults:r}),d=s("visible",y.length>0);!d||(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),w.noneOrAll(t,h,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),w.coerceFont(s,"font",i.font),s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function r(t,h){function i(y,d){return w.coerce(t,h,a,y,d)}var s=i("visible",t.method==="skip"||Array.isArray(t.args));s&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../plots/plots"),M=o("../color"),T=o("../drawing"),e=o("../../lib"),a=o("../../lib/svg_text_utils"),n=o("../../plot_api/plot_template").arrayEditor,r=o("../../constants/alignment").LINE_SPACING,t=o("./constants"),h=o("./scrollbox");U.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[t.name]);function R(re){f.autoMargin(F,C(re))}var O=I._menulayer.selectAll("g."+t.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){w.select(this).selectAll("g."+t.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=O.selectAll("g."+t.headerGroupClassName).data(D,i);z.enter().append("g").classed(t.headerGroupClassName,!0);for(var B=e.ensureSingle(O,"g",t.dropdownButtonGroupClassName,function(re){re.style("pointer-events","all")}),G=0;G<D.length;G++){var Q=D[G];v(F,Q)}var X="updatemenus"+I._uid,j=new h(F,B,X);z.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(k)),z.exit().each(function(re){B.call(k),R(re)}).remove(),z.each(function(re){var ue=w.select(this),K=re.type==="dropdown"?B:null;f.manageCommandObserver(F,re,re.buttons,function(te){d(F,re,re.buttons[te.index],ue,K,j,te.index,!0)}),re.type==="dropdown"?(p(F,ue,B,j,re),y(B,re)&&c(F,ue,B,j,re)):c(F,ue,null,null,re)})}};function i(E){return E._index}function s(E){return+E.attr(t.menuIndexAttrName)==-1}function y(E,F){return+E.attr(t.menuIndexAttrName)===F._index}function d(E,F,I,D,R,O,z,B){F.active=z,n(E.layout,t.name,F).applyUpdate("active",z),F.type==="buttons"?c(E,D,null,null,F):F.type==="dropdown"&&(R.attr(t.menuIndexAttrName,"-1"),p(E,D,R,O,F),B||c(E,D,R,O,F))}function p(E,F,I,D,R){var O=e.ensureSingle(F,"g",t.headerClassName,function(re){re.style("pointer-events","all")}),z=R._dims,B=R.active,G=R.buttons[B]||t.blankHeaderOpts,Q={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},X={width:z.headerWidth,height:z.headerHeight};O.call(x,R,G,E).call(S,R,Q,X);var j=e.ensureSingle(F,"text",t.headerArrowClassName,function(re){re.attr("text-anchor","end").call(T.font,R.font).text(t.arrowSymbol[R.direction])});j.attr({x:z.headerWidth-t.arrowOffsetX+R.pad.l,y:z.headerHeight/2+t.textOffsetY+R.pad.t}),O.on("click",function(){I.call(k,String(y(I,R)?-1:R._index)),c(E,F,I,D,R)}),O.on("mouseover",function(){O.call(g)}),O.on("mouseout",function(){O.call(b,R)}),T.setTranslate(F,z.lx,z.ly)}function c(E,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var O=!s(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?t.dropdownButtonClassName:t.buttonClassName,B=I.selectAll("g."+z).data(e.filterVisible(O)),G=B.enter().append("g").classed(z,!0),Q=B.exit();R.type==="dropdown"?(G.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var X=0,j=0,re=R._dims,ue=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(ue?j=re.headerHeight+t.gapButtonHeader:X=re.headerWidth+t.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(j=-t.gapButtonHeader+t.gapButton-re.openHeight),R.type==="dropdown"&&R.direction==="left"&&(X=-t.gapButtonHeader+t.gapButton-re.openWidth);var K={x:re.lx+X+R.pad.l,y:re.ly+j+R.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},te={l:K.x+R.borderwidth,t:K.y+R.borderwidth};B.each(function(Y,V){var ee=w.select(this);ee.call(x,R,Y,E).call(S,R,K),ee.on("click",function(){w.event.defaultPrevented||(Y.execute&&(Y.args2&&R.active===V?(d(E,R,Y,F,I,D,-1),f.executeAPICommand(E,Y.method,Y.args2)):(d(E,R,Y,F,I,D,V),f.executeAPICommand(E,Y.method,Y.args))),E.emit("plotly_buttonclicked",{menu:R,button:Y,active:R.active}))}),ee.on("mouseover",function(){ee.call(g)}),ee.on("mouseout",function(){ee.call(b,R),B.call(_,R)})}),B.call(_,R),ue?(te.w=Math.max(re.openWidth,re.headerWidth),te.h=K.y-te.t):(te.w=K.x-te.l,te.h=Math.max(re.openHeight,re.headerHeight)),te.direction=R.direction,D&&(B.size()?m(E,F,I,D,R,te):l(D))}function m(E,F,I,D,R,O){var z=R.direction,B=z==="up"||z==="down",G=R._dims,Q=R.active,X,j,re;if(B)for(j=0,re=0;re<Q;re++)j+=G.heights[re]+t.gapButton;else for(X=0,re=0;re<Q;re++)X+=G.widths[re]+t.gapButton;D.enable(O,X,j),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(E){var F=!!E.hbar,I=!!E.vbar;F&&E.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||E.disable()}),I&&E.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||E.disable()})}function x(E,F,I,D){E.call(u,F).call(A,F,I,D)}function u(E,F){var I=e.ensureSingle(E,"rect",t.itemRectClassName,function(D){D.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})});I.call(M.stroke,F.bordercolor).call(M.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function A(E,F,I,D){var R=e.ensureSingle(E,"text",t.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),O=I.label,z=D._fullLayout._meta;z&&(O=e.templateString(O,z)),R.call(T.font,F.font).text(O).call(a.convertToTspans,D)}function _(E,F){var I=F.active;E.each(function(D,R){var O=w.select(this);R===I&&F.showactive&&O.select("rect."+t.itemRectClassName).call(M.fill,t.activeColor)})}function g(E){E.select("rect."+t.itemRectClassName).call(M.fill,t.hoverColor)}function b(E,F){E.select("rect."+t.itemRectClassName).call(M.fill,F.bgcolor)}function v(E,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(t.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(X,j){var re=w.select(this);re.call(x,F,X,E);var ue=re.select("."+t.itemTextClassName),K=ue.node()&&T.bBox(ue.node()).width,te=Math.max(K+t.textPadX,t.minWidth),Y=F.font.size*r,V=a.lineCount(ue),ee=Math.max(Y*V,t.minHeight)+t.textOffsetY;ee=Math.ceil(ee),te=Math.ceil(te),I.widths[j]=te,I.heights[j]=ee,I.height1=Math.max(I.height1,ee),I.width1=Math.max(I.width1,te),R?(I.totalWidth=Math.max(I.totalWidth,te),I.openWidth=I.totalWidth,I.totalHeight+=ee+t.gapButton,I.openHeight+=ee+t.gapButton):(I.totalWidth+=te+t.gapButton,I.openWidth+=te+t.gapButton,I.totalHeight=Math.max(I.totalHeight,ee),I.openHeight=I.totalHeight)}),R?I.totalHeight-=t.gapButton:I.totalWidth-=t.gapButton,I.headerWidth=I.width1+t.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=t.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=t.arrowPadX),D.remove();var O=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,B=E._fullLayout._size;I.lx=B.l+B.w*F.x,I.ly=B.t+B.h*(1-F.y);var G="left";e.isRightAnchor(F)&&(I.lx-=O,G="right"),e.isCenterAnchor(F)&&(I.lx-=O/2,G="center");var Q="top";e.isBottomAnchor(F)&&(I.ly-=z,Q="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,Q="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),f.autoMargin(E,C(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[G]||0),r:O*({left:1,center:.5}[G]||0),b:z*({top:1,middle:.5}[Q]||0),t:z*({bottom:1,middle:.5}[Q]||0)})}function C(E){return t.autoMarginIdRoot+E._index}function S(E,F,I,D){D=D||{};var R=E.select("."+t.itemRectClassName),O=E.select("."+t.itemTextClassName),z=F.borderwidth,B=I.index,G=F._dims;T.setTranslate(E,z+I.x,z+I.y);var Q=["up","down"].indexOf(F.direction)!==-1,X=D.height||(Q?G.heights[B]:G.height1);R.attr({x:0,y:0,width:D.width||(Q?G.width1:G.widths[B]),height:X});var j=F.font.size*r,re=a.lineCount(O),ue=(re-1)*j/2;a.positionText(O,t.textOffsetX,X/2-ue+t.textOffsetY),Q?I.y+=G.heights[B]+I.yPad:I.x+=G.widths[B]+I.xPad,I.index++}function k(E,F){E.attr(t.menuIndexAttrName,F||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(o,U,H){arguments[4][475][0].apply(H,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(o,U,H){U.exports=e;var w=o("@plotly/d3"),f=o("../color"),M=o("../drawing"),T=o("../../lib");function e(a,n,r){this.gd=a,this.container=n,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,r,t){var h=this.gd._fullLayout,i=h.width,s=h.height;this.position=n;var y=this.position.l,d=this.position.w,p=this.position.t,c=this.position.h,m=this.position.direction,l=m==="down",x=m==="left",u=m==="right",A=m==="up",_=d,g=c,b,v,C,S;!l&&!x&&!u&&!A&&(this.position.direction="down",l=!0);var k=l||A;k?(b=y,v=b+_,l?(C=p,S=Math.min(C+g,s),g=S-C):(S=p+g,C=Math.max(S-g,0),g=S-C)):(C=p,S=C+g,x?(v=y+_,b=Math.max(v-_,0),_=v-b):(b=y,v=Math.min(b+_,i),_=v-b)),this._box={l:b,t:C,w:_,h:g};var E=d>_,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=y,R=p+c;R+I>s&&(R=s-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(f.fill,e.barColor),E?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=_-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=c>g,B=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,Q=y+d,X=p;Q+B>i&&(Q=i-B);var j=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-vertical",!0).call(f.fill,e.barColor),z?(this.vbar=j.attr({rx:e.barRadius,ry:e.barRadius,x:Q,y:X,width:B,height:G}),this._vbarYMin=X+G/2,this._vbarTranslateMax=g-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var re=this.id,ue=b-.5,K=z?v+B+.5:v+.5,te=C-.5,Y=E?S+I+.5:S+.5,V=h._topdefs.selectAll("#"+re).data(E||z?[0]:[]);if(V.exit().remove(),V.enter().append("clipPath").attr("id",re).append("rect"),E||z?(this._clipRect=V.select("rect").attr({x:Math.floor(ue),y:Math.floor(te),width:Math.ceil(K)-Math.floor(ue),height:Math.ceil(Y)-Math.floor(te)}),this.container.call(M.setClipUrl,re,this.gd),this.bg.attr({x:y,y:p,width:d,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),E||z){var ee=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var ne=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault(),w.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));E&&this.hbar.on(".drag",null).call(ne),z&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(r,t)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n-=w.event.dx),this.vbar&&(r-=w.event.dy),this.setTranslate(n,r)},e.prototype._onBoxWheel=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n+=w.event.deltaY),this.vbar&&(r+=w.event.deltaY),this.setTranslate(n,r)},e.prototype._onBarDrag=function(){var n=this.translateX,r=this.translateY;if(this.hbar){var t=n+this._hbarXMin,h=t+this._hbarTranslateMax,i=T.constrain(w.event.x,t,h),s=(i-t)/(h-t),y=this.position.w-this._box.w;n=s*y}if(this.vbar){var d=r+this._vbarYMin,p=d+this._vbarTranslateMax,c=T.constrain(w.event.y,d,p),m=(c-d)/(p-d),l=this.position.h-this._box.h;r=m*l}this.setTranslate(n,r)},e.prototype.setTranslate=function(n,r){var t=this.position.w-this._box.w,h=this.position.h-this._box.h;if(n=T.constrain(n||0,0,t),r=T.constrain(r||0,0,h),this.translateX=n,this.translateY=r,this.container.call(M.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var i=n/t;this.hbar.call(M.setTranslate,n+i*this._hbarTranslateMax,r)}if(this.vbar){var s=r/h;this.vbar.call(M.setTranslate,n,r+s*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(o,U,H){U.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(o,U,H){U.exports={axisRefDescription:function(w,f,M){return["If set to a",w,"axis id (e.g. *"+w+"* or","*"+w+"2*), the `"+w+"` position refers to a",w,"coordinate. If set to *paper*, the `"+w+"`","position refers to the distance from the",f,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",f,"("+M+"). If set to a",w,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",f,"of the domain of that axis: e.g.,","*"+w+"2 domain* refers to the domain of the second",w," axis and a",w,"position of 0.5 refers to the","point between the",f,"and the",M,"of the domain of the","second",w,"axis."].join(" ")}}},{}],485:[function(o,U,H){U.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(o,U,H){U.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(o,U,H){U.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(o,U,H){U.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(o,U,H){U.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(o,U,H){U.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(o,U,H){U.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(o,U,H){H.xmlns="http://www.w3.org/2000/xmlns/",H.svg="http://www.w3.org/2000/svg",H.xlink="http://www.w3.org/1999/xlink",H.svgAttrs={xmlns:H.svg,"xmlns:xlink":H.xlink}},{}],493:[function(o,U,H){H.version=o("./version").version,o("native-promise-only"),o("../build/plotcss");for(var w=o("./registry"),f=H.register=w.register,M=o("./plot_api"),T=Object.keys(M),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(H[a]=M[a]),f({moduleType:"apiMethod",name:a,fn:M[a]})}f(o("./traces/scatter")),f([o("./components/legend"),o("./components/fx"),o("./components/annotations"),o("./components/annotations3d"),o("./components/selections"),o("./components/shapes"),o("./components/images"),o("./components/updatemenus"),o("./components/sliders"),o("./components/rangeslider"),o("./components/rangeselector"),o("./components/grid"),o("./components/errorbars"),o("./components/colorscale"),o("./components/colorbar"),o("./components/modebar")]),f([o("./locale-en"),o("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(f(window.PlotlyLocales),delete window.PlotlyLocales),H.Icons=o("./fonts/ploticon");var n=o("./components/fx"),r=o("./plots/plots");H.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},H.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},H.Snapshot=o("./snapshot"),H.PlotSchema=o("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(o,U,H){U.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(o,U,H){H.isLeftAnchor=function(f){return f.xanchor==="left"||f.xanchor==="auto"&&f.x<=1/3},H.isCenterAnchor=function(f){return f.xanchor==="center"||f.xanchor==="auto"&&f.x>1/3&&f.x<2/3},H.isRightAnchor=function(f){return f.xanchor==="right"||f.xanchor==="auto"&&f.x>=2/3},H.isTopAnchor=function(f){return f.yanchor==="top"||f.yanchor==="auto"&&f.y>=2/3},H.isMiddleAnchor=function(f){return f.yanchor==="middle"||f.yanchor==="auto"&&f.y>1/3&&f.y<2/3},H.isBottomAnchor=function(f){return f.yanchor==="bottom"||f.yanchor==="auto"&&f.y<=1/3}},{}],496:[function(o,U,H){var w=o("./mod"),f=w.mod,M=w.modHalf,T=Math.PI,e=2*T;function a(m){return m/180*T}function n(m){return m/T*180}function r(m){return Math.abs(m[1]-m[0])>e-1e-14}function t(m,l){return M(l-m,e)}function h(m,l){return Math.abs(t(m,l))}function i(m,l){if(r(l))return!0;var x,u;l[0]<l[1]?(x=l[0],u=l[1]):(x=l[1],u=l[0]),x=f(x,e),u=f(u,e),x>u&&(u+=e);var A=f(m,e),_=A+e;return A>=x&&A<=u||_>=x&&_<=u}function s(m,l,x,u){if(!i(l,u))return!1;var A,_;return x[0]<x[1]?(A=x[0],_=x[1]):(A=x[1],_=x[0]),m>=A&&m<=_}function y(m,l,x,u,A,_,g){A=A||0,_=_||0;var b=r([x,u]),v,C,S,k,E;b?(v=0,C=T,S=e):x<u?(v=x,S=u):(v=u,S=x),m<l?(k=m,E=l):(k=l,E=m);function F(O,z){return[O*Math.cos(z)+A,_-O*Math.sin(z)]}var I=Math.abs(S-v)<=T?0:1;function D(O,z,B){return"A"+[O,O]+" "+[0,I,B]+" "+F(O,z)}var R;return b?k===null?R="M"+F(E,v)+D(E,C,0)+D(E,S,0)+"Z":R="M"+F(k,v)+D(k,C,0)+D(k,S,0)+"ZM"+F(E,v)+D(E,C,1)+D(E,S,1)+"Z":k===null?(R="M"+F(E,v)+D(E,S,0),g&&(R+="L0,0Z")):R="M"+F(k,v)+"L"+F(E,v)+D(E,S,0)+"L"+F(k,S)+D(k,v,1)+"Z",R}function d(m,l,x,u,A){return y(null,m,l,x,u,A,0)}function p(m,l,x,u,A){return y(null,m,l,x,u,A,1)}function c(m,l,x,u,A,_){return y(m,l,x,u,A,_,1)}U.exports={deg2rad:a,rad2deg:n,angleDelta:t,angleDist:h,isFullCircle:r,isAngleInsideSector:i,isPtInsideSector:s,pathArc:d,pathSector:p,pathAnnulus:c}},{"./mod":522}],497:[function(o,U,H){var w=Array.isArray,f=ArrayBuffer,M=DataView;function T(r){return f.isView(r)&&!(r instanceof M)}H.isTypedArray=T;function e(r){return w(r)||T(r)}H.isArrayOrTypedArray=e;function a(r){return!e(r[0])}H.isArray1D=a,H.ensureArray=function(r,t){return w(r)||(r=[]),r.length=t,r},H.concat=function(){var r=[],t=!0,h=0,i,s,y,d,p,c,m,l;for(y=0;y<arguments.length;y++)d=arguments[y],c=d.length,c&&(s?r.push(d):(s=d,p=c),w(d)?i=!1:(t=!1,h?i!==d.constructor&&(i=!1):i=d.constructor),h+=c);if(!h)return[];if(!r.length)return s;if(t)return s.concat.apply(s,r);if(i){for(m=new i(h),m.set(s),y=0;y<r.length;y++)d=r[y],m.set(d,p),p+=d.length;return m}for(m=new Array(h),l=0;l<s.length;l++)m[l]=s[l];for(y=0;y<r.length;y++){for(d=r[y],l=0;l<d.length;l++)m[p+l]=d[l];p+=l}return m},H.maxRowLength=function(r){return n(r,Math.max,0)},H.minRowLength=function(r){return n(r,Math.min,1/0)};function n(r,t,h){if(e(r))if(e(r[0])){for(var i=h,s=0;s<r.length;s++)i=t(i,r[s].length);return i}else return r.length;return 0}},{}],498:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;U.exports=function(e){return typeof e=="string"&&(e=e.replace(M,"")),w(e)?Number(e):f}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(o,U,H){U.exports=function(f){var M=f._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(o,U,H){U.exports=function(f){f._responsiveChartHandler&&(window.removeEventListener("resize",f._responsiveChartHandler),delete f._responsiveChartHandler)}},{}],501:[function(o,U,H){var w=o("fast-isnumeric"),f=o("tinycolor2"),M=o("../plots/attributes"),T=o("../components/colorscale/scales"),e=o("../components/color"),a=o("../constants/interactions").DESELECTDIM,n=o("./nested_property"),r=o("./regex").counter,t=o("./mod").modHalf,h=o("./array").isArrayOrTypedArray;H.valObjectMeta={data_array:{coerceFunction:function(s,y,d){h(s)?y.set(s):d!==void 0&&y.set(d)}},enumerated:{coerceFunction:function(s,y,d,p){p.coerceNumber&&(s=+s),p.values.indexOf(s)===-1?y.set(d):y.set(s)},validateFunction:function(s,y){y.coerceNumber&&(s=+s);for(var d=y.values,p=0;p<d.length;p++){var c=String(d[p]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){var m=new RegExp(c.substr(1,c.length-2));if(m.test(s))return!0}else if(s===d[p])return!0}return!1}},boolean:{coerceFunction:function(s,y,d){s===!0||s===!1?y.set(s):y.set(d)}},number:{coerceFunction:function(s,y,d,p){!w(s)||p.min!==void 0&&s<p.min||p.max!==void 0&&s>p.max?y.set(d):y.set(+s)}},integer:{coerceFunction:function(s,y,d,p){s%1||!w(s)||p.min!==void 0&&s<p.min||p.max!==void 0&&s>p.max?y.set(d):y.set(+s)}},string:{coerceFunction:function(s,y,d,p){if(typeof s!="string"){var c=typeof s=="number";p.strict===!0||!c?y.set(d):y.set(String(s))}else p.noBlank&&!s?y.set(d):y.set(s)}},color:{coerceFunction:function(s,y,d){f(s).isValid()?y.set(s):y.set(d)}},colorlist:{coerceFunction:function(s,y,d){function p(c){return f(c).isValid()}!Array.isArray(s)||!s.length?y.set(d):s.every(p)?y.set(s):y.set(d)}},colorscale:{coerceFunction:function(s,y,d){y.set(T.get(s,d))}},angle:{coerceFunction:function(s,y,d){s==="auto"?y.set("auto"):w(s)?y.set(t(+s,360)):y.set(d)}},subplotid:{coerceFunction:function(s,y,d,p){var c=p.regex||r(d);if(typeof s=="string"&&c.test(s)){y.set(s);return}y.set(d)},validateFunction:function(s,y){var d=y.dflt;return s===d?!0:typeof s!="string"?!1:!!r(d).test(s)}},flaglist:{coerceFunction:function(s,y,d,p){if((p.extras||[]).indexOf(s)!==-1){y.set(s);return}if(typeof s!="string"){y.set(d);return}for(var c=s.split("+"),m=0;m<c.length;){var l=c[m];p.flags.indexOf(l)===-1||c.indexOf(l)<m?c.splice(m,1):m++}c.length?y.set(c.join("+")):y.set(d)}},any:{coerceFunction:function(s,y,d){s===void 0?y.set(d):y.set(s)}},info_array:{coerceFunction:function(s,y,d,p){function c(F,I,D){var R,O={set:function(z){R=z}};return D===void 0&&(D=I.dflt),H.valObjectMeta[I.valType].coerceFunction(F,O,D,I),R}var m=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(s)&&Array.isArray(s[0]);if(!Array.isArray(s)){y.set(d);return}var l=p.items,x=[],u=Array.isArray(l),A=u&&m&&Array.isArray(l[0]),_=m&&u&&!A,g=u&&!_?l.length:s.length,b,v,C,S,k,E;if(d=Array.isArray(d)?d:[],m)for(b=0;b<g;b++)for(x[b]=[],C=Array.isArray(s[b])?s[b]:[],_?k=l.length:u?k=l[b].length:k=C.length,v=0;v<k;v++)_?S=l[v]:u?S=l[b][v]:S=l,E=c(C[v],S,(d[b]||[])[v]),E!==void 0&&(x[b][v]=E);else for(b=0;b<g;b++)E=c(s[b],u?l[b]:l,d[b]),E!==void 0&&(x[b]=E);y.set(x)},validateFunction:function(s,y){if(!Array.isArray(s))return!1;var d=y.items,p=Array.isArray(d),c=y.dimensions===2;if(!y.freeLength&&s.length!==d.length)return!1;for(var m=0;m<s.length;m++)if(c){if(!Array.isArray(s[m])||!y.freeLength&&s[m].length!==d[m].length)return!1;for(var l=0;l<s[m].length;l++)if(!i(s[m][l],p?d[m][l]:d))return!1}else if(!i(s[m],p?d[m]:d))return!1;return!0}}},H.coerce=function(s,y,d,p,c){var m=n(d,p).get(),l=n(s,p),x=n(y,p),u=l.get(),A=y._template;if(u===void 0&&A&&(u=n(A,p).get(),A=0),c===void 0&&(c=m.dflt),m.arrayOk&&h(u))return x.set(u),u;var _=H.valObjectMeta[m.valType].coerceFunction;_(u,x,c,m);var g=x.get();return A&&g===c&&!i(u,m)&&(u=n(A,p).get(),_(u,x,c,m),g=x.get()),g},H.coerce2=function(s,y,d,p,c){var m=n(s,p),l=H.coerce(s,y,d,p,c),x=m.get();return x!=null?l:!1},H.coerceFont=function(s,y,d){var p={};return d=d||{},p.family=s(y+".family",d.family),p.size=s(y+".size",d.size),p.color=s(y+".color",d.color),p},H.coercePattern=function(s,y,d,p){var c=s(y+".shape");if(c){s(y+".solidity"),s(y+".size");var m=s(y+".fillmode"),l=m==="overlay";if(!p){var x=s(y+".bgcolor",l?d:void 0);s(y+".fgcolor",l?e.contrast(x):d)}s(y+".fgopacity",l?.5:1)}},H.coerceHoverinfo=function(s,y,d){var p=y._module.attributes,c=p.hoverinfo?p:M,m=c.hoverinfo,l;if(d._dataLength===1){var x=m.dflt==="all"?m.flags.slice():m.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return H.coerce(s,y,c,"hoverinfo",l)},H.coerceSelectionMarkerOpacity=function(s,y){if(!!s.marker){var d=s.marker.opacity;if(d!==void 0){var p,c;!h(d)&&!s.selected&&!s.unselected&&(p=d,c=a*d),y("selected.marker.opacity",p),y("unselected.marker.opacity",c)}}};function i(s,y){var d=H.valObjectMeta[y.valType];if(y.arrayOk&&h(s))return!0;if(d.validateFunction)return d.validateFunction(s,y);var p={},c=p,m={set:function(l){c=l}};return d.coerceFunction(s,m,p,y),c!==p}H.validate=i},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(o,U,H){var w=o("d3-time-format").timeFormat,f=o("fast-isnumeric"),M=o("./loggers"),T=o("./mod").mod,e=o("../constants/numerical"),a=e.BADNUM,n=e.ONEDAY,r=e.ONEHOUR,t=e.ONEMIN,h=e.ONESEC,i=e.EPOCHJD,s=o("../registry"),y=o("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=new Date().getFullYear()-70;function m(R){return R&&s.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}H.dateTick0=function(R,O){var z=l(R,!!O);if(O<2)return z;var B=H.dateTime2ms(z,R);return B+=n*(O-1),H.ms2DateTime(B,0,R)};function l(R,O){return m(R)?O?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:s.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}H.dfltRange=function(R){return m(R)?s.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},H.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var x,u;H.dateTime2ms=function(R,O){if(H.isJSDate(R)){var z=R.getTimezoneOffset()*t,B=(R.getUTCMinutes()-R.getMinutes())*t+(R.getUTCSeconds()-R.getSeconds())*h+(R.getUTCMilliseconds()-R.getMilliseconds());if(B){var G=3*t;z=z-G/2+T(B-z+G/2,G)}return R=Number(R)-z,R>=x&&R<=u?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var Q=m(O),X=R.charAt(0);Q&&(X==="G"||X==="g")&&(R=R.substr(1),O="");var j=Q&&O.substr(0,7)==="chinese",re=R.match(j?p:d);if(!re)return a;var ue=re[1],K=re[3]||"1",te=Number(re[5]||1),Y=Number(re[7]||0),V=Number(re[9]||0),ee=Number(re[11]||0);if(Q){if(ue.length===2)return a;ue=Number(ue);var ne;try{var Z=s.getComponentMethod("calendars","getCal")(O);if(j){var q=K.charAt(K.length-1)==="i";K=parseInt(K,10),ne=Z.newDate(ue,Z.toMonthIndex(ue,K,q),te)}else ne=Z.newDate(ue,Number(K),te)}catch{return a}return ne?(ne.toJD()-i)*n+Y*r+V*t+ee*h:a}ue.length===2?ue=(Number(ue)+2e3-c)%100+c:ue=Number(ue),K-=1;var ie=new Date(Date.UTC(2e3,K,te,Y,V));return ie.setUTCFullYear(ue),ie.getUTCMonth()!==K||ie.getUTCDate()!==te?a:ie.getTime()+ee*h},x=H.MIN_MS=H.dateTime2ms("-9999"),u=H.MAX_MS=H.dateTime2ms("9999-12-31 23:59:59.9999"),H.isDateTime=function(R,O){return H.dateTime2ms(R,O)!==a};function A(R,O){return String(R+Math.pow(10,O)).substr(1)}var _=90*n,g=3*r,b=5*t;H.ms2DateTime=function(R,O,z){if(typeof R!="number"||!(R>=x&&R<=u))return a;O||(O=0);var B=Math.floor(T(R+.05,1)*10),G=Math.round(R-B/10),Q,X,j,re,ue,K;if(m(z)){var te=Math.floor(G/n)+i,Y=Math.floor(T(R,n));try{Q=s.getComponentMethod("calendars","getCal")(z).fromJD(te).formatDate("yyyy-mm-dd")}catch{Q=y("G%Y-%m-%d")(new Date(G))}if(Q.charAt(0)==="-")for(;Q.length<11;)Q="-0"+Q.substr(1);else for(;Q.length<10;)Q="0"+Q;X=O<_?Math.floor(Y/r):0,j=O<_?Math.floor(Y%r/t):0,re=O<g?Math.floor(Y%t/h):0,ue=O<b?Y%h*10+B:0}else K=new Date(G),Q=y("%Y-%m-%d")(K),X=O<_?K.getUTCHours():0,j=O<_?K.getUTCMinutes():0,re=O<g?K.getUTCSeconds():0,ue=O<b?K.getUTCMilliseconds()*10+B:0;return v(Q,X,j,re,ue)},H.ms2DateTimeLocal=function(R){if(!(R>=x+n&&R<=u-n))return a;var O=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-O/10)),B=w("%Y-%m-%d")(z),G=z.getHours(),Q=z.getMinutes(),X=z.getSeconds(),j=z.getUTCMilliseconds()*10+O;return v(B,G,Q,X,j)};function v(R,O,z,B,G){if((O||z||B||G)&&(R+=" "+A(O,2)+":"+A(z,2),(B||G)&&(R+=":"+A(B,2),G))){for(var Q=4;G%10===0;)Q-=1,G/=10;R+="."+A(G,Q)}return R}H.cleanDate=function(R,O,z){if(R===a)return O;if(H.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(m(z))return M.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=H.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!H.isDateTime(R,z))return M.error("unrecognized date",R),O;return R};var C=/%\d?f/g,S=/%h/g,k={1:"1",2:"1",3:"2",4:"2"};function E(R,O,z,B){R=R.replace(C,function(Q){var X=Math.min(+Q.charAt(1)||6,6),j=(O/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0";return j});var G=new Date(Math.floor(O+.05));if(R=R.replace(S,function(){return k[z("%q")(G)]}),m(B))try{R=s.getComponentMethod("calendars","worldCalFmt")(R,O,B)}catch{return"Invalid"}return z(R)(G)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,O){var z=T(R+.05,n),B=A(Math.floor(z/r),2)+":"+A(T(Math.floor(z/t),60),2);if(O!=="M"){f(O)||(O=0);var G=Math.min(T(R/h,60),F[O]),Q=(100+G).toFixed(O).substr(1);O>0&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,"")),B+=":"+Q}return B}H.formatDate=function(R,O,z,B,G,Q){if(G=m(G)&&G,!O)if(z==="y")O=Q.year;else if(z==="m")O=Q.month;else if(z==="d")O=Q.dayMonth+`
`+Q.year;else return I(R,z)+`
`+E(Q.dayMonthYear,R,B,G);return E(O,R,B,G)};var D=3*n;H.incrementMonth=function(R,O,z){z=m(z)&&z;var B=T(R,n);if(R=Math.round(R-B),z)try{var G=Math.round(R/n)+i,Q=s.getComponentMethod("calendars","getCal")(z),X=Q.fromJD(G);return O%12?Q.add(X,O,"m"):Q.add(X,O/12,"y"),(X.toJD()-i)*n+B}catch{M.error("invalid ms "+R+" in calendar "+z)}var j=new Date(R+D);return j.setUTCMonth(j.getUTCMonth()+O)+B-D},H.findExactDates=function(R,O){for(var z=0,B=0,G=0,Q=0,X,j,re=m(O)&&s.getComponentMethod("calendars","getCal")(O),ue=0;ue<R.length;ue++){if(j=R[ue],!f(j)){Q++;continue}if(!(j%n))if(re)try{X=re.fromJD(j/n+i),X.day()===1?X.month()===1?z++:B++:G++}catch{}else X=new Date(j),X.getUTCDate()===1?X.getUTCMonth()===0?z++:B++:G++}B+=z,G+=B;var K=R.length-Q;return{exactYears:z/K,exactMonths:B/K,exactDays:G/K}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(o,U,H){var w=o("@plotly/d3"),f=o("./loggers"),M=o("./matrix"),T=o("gl-mat4");function e(c){var m;if(typeof c=="string"){if(m=document.getElementById(c),m===null)throw new Error("No DOM element with id '"+c+"' exists on the page.");return m}else if(c==null)throw new Error("DOM element provided is null or undefined");return c}function a(c){var m=w.select(c);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function n(c){var m=c&&c.parentNode;m&&m.removeChild(c)}function r(c,m){t("global",c,m)}function t(c,m,l){var x="plotly.js-style-"+c,u=document.getElementById(x);u||(u=document.createElement("style"),u.setAttribute("id",x),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var A=u.sheet;A.insertRule?A.insertRule(m+"{"+l+"}",0):A.addRule?A.addRule(m,l,0):f.warn("addStyleRule failed")}function h(c){var m="plotly.js-style-"+c,l=document.getElementById(m);l&&n(l)}function i(c){var m=y(c),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(x){var u=s(x);if(u){var A=M.convertCssMatrix(u);l=T.multiply(l,l,A)}}),l}function s(c){var m=window.getComputedStyle(c,null),l=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(x){return+x})}function y(c){for(var m=[];d(c);)m.push(c),c=c.parentNode;return m}function d(c){return c&&(c instanceof Element||c instanceof HTMLElement)}function p(c,m){return c&&m&&c.x===m.x&&c.y===m.y&&c.top===m.top&&c.left===m.left&&c.right===m.right&&c.bottom===m.bottom}U.exports={getGraphDiv:e,isPlotDiv:a,removeElement:n,addStyleRule:r,addRelatedStyleRule:t,deleteRelatedStyleRule:h,getFullTransformMatrix:i,getElementTransformMatrix:s,getElementAndAncestors:y,equalDomRects:p}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(o,U,H){var w=o("events").EventEmitter,f={init:function(M){if(M._ev instanceof w)return M;var T=new w,e=new w;return M._ev=T,M._internalEv=e,M.on=T.on.bind(T),M.once=T.once.bind(T),M.removeListener=T.removeListener.bind(T),M.removeAllListeners=T.removeAllListeners.bind(T),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(a,n){typeof jQuery<"u"&&jQuery(M).trigger(a,n),T.emit(a,n),e.emit(a,n)},M},triggerHandler:function(M,T,e){var a,n;typeof jQuery<"u"&&(a=jQuery(M).triggerHandler(T,e));var r=M._ev;if(!r)return a;var t=r._events[T];if(!t)return a;function h(s){if(s.listener){if(r.removeListener(T,s.listener),!s.fired)return s.fired=!0,s.listener.apply(r,[e])}else return s.apply(r,[e])}t=Array.isArray(t)?t:[t];var i;for(i=0;i<t.length-1;i++)h(t[i]);return n=h(t[i]),a!==void 0?a:n},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}};U.exports=f},{events:84}],505:[function(o,U,H){var w=o("./is_plain_object.js"),f=Array.isArray;function M(e,a){var n,r;for(n=0;n<e.length;n++){if(r=e[n],r!==null&&typeof r=="object")return!1;r!==void 0&&(a[n]=r)}return!0}H.extendFlat=function(){return T(arguments,!1,!1,!1)},H.extendDeep=function(){return T(arguments,!0,!1,!1)},H.extendDeepAll=function(){return T(arguments,!0,!0,!1)},H.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,n,r){var t=e[0],h=e.length,i,s,y,d,p,c,m;if(h===2&&f(t)&&f(e[1])&&t.length===0){if(m=M(e[1],t),m)return t;t.splice(0,t.length)}for(var l=1;l<h;l++){i=e[l];for(s in i)y=t[s],d=i[s],r&&f(d)?t[s]=d:a&&d&&(w(d)||(p=f(d)))?(p?(p=!1,c=y&&f(y)?y:[]):c=y&&w(y)?y:{},t[s]=T([c,d],a,n,r)):(typeof d<"u"||n)&&(t[s]=d)}return t}},{"./is_plain_object.js":516}],506:[function(o,U,H){U.exports=function(f){for(var M={},T=[],e=0,a=0;a<f.length;a++){var n=f[a];M[n]!==1&&(M[n]=1,T[e++]=n)}return T}},{}],507:[function(o,U,H){U.exports=function(e){for(var a=M(e)?f:w,n=[],r=0;r<e.length;r++){var t=e[r];a(t)&&n.push(t)}return n};function w(T){return T.visible===!0}function f(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function M(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(o,U,H){var w=o("@plotly/d3"),f=o("country-regex"),M=o("@turf/area"),T=o("@turf/centroid"),e=o("@turf/bbox"),a=o("./identity"),n=o("./loggers"),r=o("./is_plain_object"),t=o("./nested_property"),h=o("./polygon"),i=Object.keys(f),s={"ISO-3":a,"USA-states":a,"country names":y};function y(A){for(var _=0;_<i.length;_++){var g=i[_],b=new RegExp(f[g]);if(b.test(A.trim().toLowerCase()))return g}return n.log("Unrecognized country name: "+A+"."),!1}function d(A,_,g){if(!_||typeof _!="string")return!1;var b=s[A](_),v,C,S;if(b){if(A==="USA-states")for(v=[],S=0;S<g.length;S++)C=g[S],C.properties&&C.properties.gu&&C.properties.gu==="USA"&&v.push(C);else v=g;for(S=0;S<v.length;S++)if(C=v[S],C.id===b)return C;n.log(["Location with id",b,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function p(A){var _=A.geometry,g=_.coordinates,b=A.id,v=[],C,S,k,E;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(b==="RUS"||b==="FJI"?C=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),E=0;E<I.length;E++)D[E]=[I[E][0]<0?I[E][0]+360:I[E][0],I[E][1]];v.push(h.tester(D))}:b==="ATA"?C=function(I){var D=F(I);if(D===null)return v.push(h.tester(I));var R=new Array(I.length+1),O=0;for(E=0;E<I.length;E++)E>D?R[O++]=[I[E][0]+360,I[E][1]]:E===D?(R[O++]=I[E],R[O++]=[I[E][0],-90]):R[O++]=I[E];var z=h.tester(R);z.pts.pop(),v.push(z)}:C=function(I){v.push(h.tester(I))},_.type){case"MultiPolygon":for(S=0;S<g.length;S++)for(k=0;k<g[S].length;k++)C(g[S][k]);break;case"Polygon":for(S=0;S<g.length;S++)C(g[S]);break}return v}function c(A){var _=A.geojson,g=window.PlotlyGeoAssets||{},b=typeof _=="string"?g[_]:_;return r(b)?b:(n.error("Oops ... something went wrong when fetching "+_),!1)}function m(A){var _=A[0].trace,g=c(_);if(!g)return!1;var b={},v=[],C;for(C=0;C<_._length;C++){var S=A[C];(S.loc||S.loc===0)&&(b[S.loc]=S)}function k(I){var D=t(I,_.featureidkey||"id").get(),R=b[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:O,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,v.push(z)}else n.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete b[D]}switch(g.type){case"FeatureCollection":var E=g.features;for(C=0;C<E.length;C++)k(E[C]);break;case"Feature":k(g);break;default:return n.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in b)n.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return v}function l(A){var _=A.geometry,g;if(_.type==="MultiPolygon")for(var b=_.coordinates,v=0,C=0;C<b.length;C++){var S={type:"Polygon",coordinates:b[C]},k=M.default(S);k>v&&(v=k,g=S)}else g=_;return T.default(g).geometry.coordinates}function x(A){var _=window.PlotlyGeoAssets||{},g=[];function b(E){return new Promise(function(F,I){w.json(E,function(D,R){if(D){delete _[E];var O=D.status===404?'GeoJSON at URL "'+E+'" does not exist.':"Unexpected error while fetching from "+E;return I(new Error(O))}return _[E]=R,F(R)})})}function v(E){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(_[E]&&_[E]!=="pending")return clearInterval(R),F(_[E]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+E);D++},50)})}for(var C=0;C<A.length;C++){var S=A[C][0].trace,k=S.geojson;typeof k=="string"&&(_[k]?_[k]==="pending"&&g.push(v(k)):(_[k]="pending",g.push(b(k))))}return g}function u(A){return e.default(A)}U.exports={locationToFeature:d,feature2polygons:p,getTraceGeojson:c,extractTraceFeature:m,fetchTraceGeoData:x,computeBbox:u}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(o,U,H){var w=o("../constants/numerical").BADNUM;H.calcTraceToLineCoords=function(f){for(var M=f[0].trace,T=M.connectgaps,e=[],a=[],n=0;n<f.length;n++){var r=f[n],t=r.lonlat;t[0]!==w?a.push(t):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},H.makeLine=function(f){return f.length===1?{type:"LineString",coordinates:f[0]}:{type:"MultiLineString",coordinates:f}},H.makePolygon=function(f){if(f.length===1)return{type:"Polygon",coordinates:f};for(var M=new Array(f.length),T=0;T<f.length;T++)M[T]=[f[T]];return{type:"MultiPolygon",coordinates:M}},H.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(o,U,H){var w=o("./mod").mod;H.segmentsIntersect=f;function f(n,r,t,h,i,s,y,d){var p=t-n,c=i-n,m=y-i,l=h-r,x=s-r,u=d-s,A=p*u-m*l;if(A===0)return null;var _=(c*u-m*x)/A,g=(c*l-p*x)/A;return g<0||g>1||_<0||_>1?null:{x:n+p*_,y:r+l*_}}H.segmentDistance=function(r,t,h,i,s,y,d,p){if(f(r,t,h,i,s,y,d,p))return 0;var c=h-r,m=i-t,l=d-s,x=p-y,u=c*c+m*m,A=l*l+x*x,_=Math.min(M(c,m,u,s-r,y-t),M(c,m,u,d-r,p-t),M(l,x,A,r-s,t-y),M(l,x,A,h-s,i-y));return Math.sqrt(_)};function M(n,r,t,h,i){var s=h*n+i*r;if(s<0)return h*h+i*i;if(s>t){var y=h-n,d=i-r;return y*y+d*d}else{var p=h*r-i*n;return p*p/t}}var T,e,a;H.getTextLocation=function(r,t,h,i){if((r!==e||i!==a)&&(T={},e=r,a=i),T[h])return T[h];var s=r.getPointAtLength(w(h-i/2,t)),y=r.getPointAtLength(w(h+i/2,t)),d=Math.atan((y.y-s.y)/(y.x-s.x)),p=r.getPointAtLength(w(h,t)),c=(p.x*4+s.x+y.x)/6,m=(p.y*4+s.y+y.y)/6,l={x:c,y:m,theta:d};return T[h]=l,l},H.clearLocationCache=function(){e=null},H.getVisibleSegment=function(r,t,h){var i=t.left,s=t.right,y=t.top,d=t.bottom,p=0,c=r.getTotalLength(),m=c,l,x;function u(_){var g=r.getPointAtLength(_);_===0?l=g:_===c&&(x=g);var b=g.x<i?i-g.x:g.x>s?g.x-s:0,v=g.y<y?y-g.y:g.y>d?g.y-d:0;return Math.sqrt(b*b+v*v)}for(var A=u(p);A;){if(p+=A+h,p>m)return;A=u(p)}for(A=u(m);A;){if(m-=A+h,p>m)return;A=u(m)}return{min:p,max:m,len:m-p,total:c,isClosed:p===0&&m===c&&Math.abs(l.x-x.x)<.1&&Math.abs(l.y-x.y)<.1}},H.findPointOnPath=function(r,t,h,i){i=i||{};for(var s=i.pathLength||r.getTotalLength(),y=i.tolerance||.001,d=i.iterationLimit||30,p=r.getPointAtLength(0)[h]>r.getPointAtLength(s)[h]?-1:1,c=0,m=0,l=s,x,u,A;c<d;){if(x=(m+l)/2,u=r.getPointAtLength(x),A=u[h]-t,Math.abs(A)<y)return u;p*A>0?l=x:m=x,c++}return u}},{"./mod":522}],511:[function(o,U,H){var w=o("fast-isnumeric"),f=o("tinycolor2"),M=o("color-normalize"),T=o("../components/colorscale"),e=o("../components/color/attributes").defaultLine,a=o("./array").isArrayOrTypedArray,n=M(e),r=1;function t(d,p){var c=d;return c[3]*=p,c}function h(d){if(w(d))return n;var p=M(d);return p.length?p:n}function i(d){return w(d)?d:r}function s(d,p,c){var m=d.color,l=a(m),x=a(p),u=T.extractOpts(d),A=[],_,g,b,v,C;if(u.colorscale!==void 0?_=T.makeColorScaleFuncFromTrace(d):_=h,l?g=function(k,E){return k[E]===void 0?n:M(_(k[E]))}:g=h,x?b=function(k,E){return k[E]===void 0?r:i(k[E])}:b=i,l||x)for(var S=0;S<c;S++)v=g(m,S),C=b(p,S),A[S]=t(v,C);else A=t(M(m),p);return A}function y(d){var p=T.extractOpts(d),c=p.colorscale;return p.reversescale&&(c=T.flipScale(p.colorscale)),c.map(function(m){var l=m[0],x=f(m[1]),u=x.toRgb();return{index:l,rgb:[u.r,u.g,u.b,u.a]}})}U.exports={formatColor:s,parseColorScale:y}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(o,U,H){var w=o("./identity");function f(M){return[M]}U.exports={keyFun:function(M){return M.key},repeat:f,descend:w,wrap:f,unwrap:function(M){return M[0]}}},{"./identity":513}],513:[function(o,U,H){U.exports=function(f){return f}},{}],514:[function(o,U,H){U.exports=function(f,M){if(!M)return f;var T=1/Math.abs(M),e=T>1?(T*f+T*M)/T:f+M,a=String(e).length;if(a>16){var n=String(M).length,r=String(f).length;if(a>=r+n){var t=parseFloat(e).toPrecision(12);t.indexOf("e+")===-1&&(e=+t)}}return e}},{}],515:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-time-format").utcFormat,M=o("d3-format").format,T=o("fast-isnumeric"),e=o("../constants/numerical"),a=e.FP_SAFE,n=-a,r=e.BADNUM,t=U.exports={};t.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var h={};t.warnBadFormat=function(ue){var K=String(ue);h[K]||(h[K]=1,t.warn('encountered bad format: "'+K+'"'))},t.noFormat=function(ue){return String(ue)},t.numberFormat=function(ue){var K;try{K=M(t.adjustFormat(ue))}catch{return t.warnBadFormat(ue),t.noFormat}return K},t.nestedProperty=o("./nested_property"),t.keyedContainer=o("./keyed_container"),t.relativeAttr=o("./relative_attr"),t.isPlainObject=o("./is_plain_object"),t.toLogRange=o("./to_log_range"),t.relinkPrivateKeys=o("./relink_private");var i=o("./array");t.isTypedArray=i.isTypedArray,t.isArrayOrTypedArray=i.isArrayOrTypedArray,t.isArray1D=i.isArray1D,t.ensureArray=i.ensureArray,t.concat=i.concat,t.maxRowLength=i.maxRowLength,t.minRowLength=i.minRowLength;var s=o("./mod");t.mod=s.mod,t.modHalf=s.modHalf;var y=o("./coerce");t.valObjectMeta=y.valObjectMeta,t.coerce=y.coerce,t.coerce2=y.coerce2,t.coerceFont=y.coerceFont,t.coercePattern=y.coercePattern,t.coerceHoverinfo=y.coerceHoverinfo,t.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity,t.validate=y.validate;var d=o("./dates");t.dateTime2ms=d.dateTime2ms,t.isDateTime=d.isDateTime,t.ms2DateTime=d.ms2DateTime,t.ms2DateTimeLocal=d.ms2DateTimeLocal,t.cleanDate=d.cleanDate,t.isJSDate=d.isJSDate,t.formatDate=d.formatDate,t.incrementMonth=d.incrementMonth,t.dateTick0=d.dateTick0,t.dfltRange=d.dfltRange,t.findExactDates=d.findExactDates,t.MIN_MS=d.MIN_MS,t.MAX_MS=d.MAX_MS;var p=o("./search");t.findBin=p.findBin,t.sorterAsc=p.sorterAsc,t.sorterDes=p.sorterDes,t.distinctVals=p.distinctVals,t.roundUp=p.roundUp,t.sort=p.sort,t.findIndexOfMin=p.findIndexOfMin,t.sortObjectKeys=o("./sort_object_keys");var c=o("./stats");t.aggNums=c.aggNums,t.len=c.len,t.mean=c.mean,t.median=c.median,t.midRange=c.midRange,t.variance=c.variance,t.stdev=c.stdev,t.interp=c.interp;var m=o("./matrix");t.init2dArray=m.init2dArray,t.transposeRagged=m.transposeRagged,t.dot=m.dot,t.translationMatrix=m.translationMatrix,t.rotationMatrix=m.rotationMatrix,t.rotationXYMatrix=m.rotationXYMatrix,t.apply3DTransform=m.apply3DTransform,t.apply2DTransform=m.apply2DTransform,t.apply2DTransform2=m.apply2DTransform2,t.convertCssMatrix=m.convertCssMatrix,t.inverseTransformMatrix=m.inverseTransformMatrix;var l=o("./angles");t.deg2rad=l.deg2rad,t.rad2deg=l.rad2deg,t.angleDelta=l.angleDelta,t.angleDist=l.angleDist,t.isFullCircle=l.isFullCircle,t.isAngleInsideSector=l.isAngleInsideSector,t.isPtInsideSector=l.isPtInsideSector,t.pathArc=l.pathArc,t.pathSector=l.pathSector,t.pathAnnulus=l.pathAnnulus;var x=o("./anchor_utils");t.isLeftAnchor=x.isLeftAnchor,t.isCenterAnchor=x.isCenterAnchor,t.isRightAnchor=x.isRightAnchor,t.isTopAnchor=x.isTopAnchor,t.isMiddleAnchor=x.isMiddleAnchor,t.isBottomAnchor=x.isBottomAnchor;var u=o("./geometry2d");t.segmentsIntersect=u.segmentsIntersect,t.segmentDistance=u.segmentDistance,t.getTextLocation=u.getTextLocation,t.clearLocationCache=u.clearLocationCache,t.getVisibleSegment=u.getVisibleSegment,t.findPointOnPath=u.findPointOnPath;var A=o("./extend");t.extendFlat=A.extendFlat,t.extendDeep=A.extendDeep,t.extendDeepAll=A.extendDeepAll,t.extendDeepNoArrays=A.extendDeepNoArrays;var _=o("./loggers");t.log=_.log,t.warn=_.warn,t.error=_.error;var g=o("./regex");t.counterRegex=g.counter;var b=o("./throttle");t.throttle=b.throttle,t.throttleDone=b.done,t.clearThrottle=b.clear;var v=o("./dom");t.getGraphDiv=v.getGraphDiv,t.isPlotDiv=v.isPlotDiv,t.removeElement=v.removeElement,t.addStyleRule=v.addStyleRule,t.addRelatedStyleRule=v.addRelatedStyleRule,t.deleteRelatedStyleRule=v.deleteRelatedStyleRule,t.getFullTransformMatrix=v.getFullTransformMatrix,t.getElementTransformMatrix=v.getElementTransformMatrix,t.getElementAndAncestors=v.getElementAndAncestors,t.equalDomRects=v.equalDomRects,t.clearResponsive=o("./clear_responsive"),t.preserveDrawingBuffer=o("./preserve_drawing_buffer"),t.makeTraceGroups=o("./make_trace_groups"),t._=o("./localize"),t.notifier=o("./notifier"),t.filterUnique=o("./filter_unique"),t.filterVisible=o("./filter_visible"),t.pushUnique=o("./push_unique"),t.increment=o("./increment"),t.cleanNumber=o("./clean_number"),t.ensureNumber=function(K){return T(K)?(K=Number(K),K>a||K<n?r:K):r},t.isIndex=function(ue,K){return K!==void 0&&ue>=K?!1:T(ue)&&ue>=0&&ue%1===0},t.noop=o("./noop"),t.identity=o("./identity"),t.repeat=function(ue,K){for(var te=new Array(K),Y=0;Y<K;Y++)te[Y]=ue;return te},t.swapAttrs=function(ue,K,te,Y){te||(te="x"),Y||(Y="y");for(var V=0;V<K.length;V++){var ee=K[V],ne=t.nestedProperty(ue,ee.replace("?",te)),Z=t.nestedProperty(ue,ee.replace("?",Y)),q=ne.get();ne.set(Z.get()),Z.set(q)}},t.raiseToTop=function(K){K.parentNode.appendChild(K)},t.cancelTransition=function(ue){return ue.transition().duration(0)},t.constrain=function(ue,K,te){return K>te?Math.max(te,Math.min(K,ue)):Math.max(K,Math.min(te,ue))},t.bBoxIntersect=function(ue,K,te){return te=te||0,ue.left<=K.right+te&&K.left<=ue.right+te&&ue.top<=K.bottom+te&&K.top<=ue.bottom+te},t.simpleMap=function(ue,K,te,Y,V){for(var ee=ue.length,ne=new Array(ee),Z=0;Z<ee;Z++)ne[Z]=K(ue[Z],te,Y,V);return ne},t.randstr=function ue(K,te,Y,V){if(Y||(Y=16),te===void 0&&(te=24),te<=0)return"0";var ee=Math.log(Math.pow(2,te))/Math.log(Y),ne="",Z,q,ie;for(Z=2;ee===1/0;Z*=2)ee=Math.log(Math.pow(2,te/Z))/Math.log(Y)*Z;var se=ee-Math.floor(ee);for(Z=0;Z<Math.floor(ee);Z++)ie=Math.floor(Math.random()*Y).toString(Y),ne=ie+ne;se&&(q=Math.pow(Y,se),ie=Math.floor(Math.random()*q).toString(Y),ne=ie+ne);var ae=parseInt(ne,Y);return K&&K[ne]||ae!==1/0&&ae>=Math.pow(2,te)?V>10?(t.warn("randstr failed uniqueness"),ne):ue(K,te,Y,(V||0)+1):ne},t.OptionControl=function(ue,K){ue||(ue={}),K||(K="opt");var te={};return te.optionList=[],te._newoption=function(Y){Y[K]=ue,te[Y.name]=Y,te.optionList.push(Y)},te["_"+K]=ue,te},t.smooth=function(ue,K){if(K=Math.round(K)||0,K<2)return ue;var te=ue.length,Y=2*te,V=2*K-1,ee=new Array(V),ne=new Array(te),Z,q,ie,se;for(Z=0;Z<V;Z++)ee[Z]=(1-Math.cos(Math.PI*(Z+1)/K))/(2*K);for(Z=0;Z<te;Z++){for(se=0,q=0;q<V;q++)ie=Z+q+1-K,ie<-te?ie-=Y*Math.round(ie/Y):ie>=Y&&(ie-=Y*Math.floor(ie/Y)),ie<0?ie=-1-ie:ie>=te&&(ie=Y-1-ie),se+=ue[ie]*ee[q];ne[Z]=se}return ne},t.syncOrAsync=function(ue,K,te){var Y,V;function ee(){return t.syncOrAsync(ue,K,te)}for(;ue.length;)if(V=ue.splice(0,1)[0],Y=V(K),Y&&Y.then)return Y.then(ee);return te&&te(K)},t.stripTrailingSlash=function(ue){return ue.substr(-1)==="/"?ue.substr(0,ue.length-1):ue},t.noneOrAll=function(ue,K,te){if(!!ue){var Y=!1,V=!0,ee,ne;for(ee=0;ee<te.length;ee++)ne=ue[te[ee]],ne!=null?Y=!0:V=!1;if(Y&&!V)for(ee=0;ee<te.length;ee++)ue[te[ee]]=K[te[ee]]}},t.mergeArray=function(ue,K,te,Y){var V=typeof Y=="function";if(t.isArrayOrTypedArray(ue))for(var ee=Math.min(ue.length,K.length),ne=0;ne<ee;ne++){var Z=ue[ne];K[ne][te]=V?Y(Z):Z}},t.mergeArrayCastPositive=function(ue,K,te){return t.mergeArray(ue,K,te,function(Y){var V=+Y;return isFinite(V)&&V>0?V:0})},t.fillArray=function(ue,K,te,Y){if(Y=Y||t.identity,t.isArrayOrTypedArray(ue))for(var V=0;V<K.length;V++)K[V][te]=Y(ue[V])},t.castOption=function(ue,K,te,Y){Y=Y||t.identity;var V=t.nestedProperty(ue,te).get();return t.isArrayOrTypedArray(V)?Array.isArray(K)&&t.isArrayOrTypedArray(V[K[0]])?Y(V[K[0]][K[1]]):Y(V[K]):V},t.extractOption=function(ue,K,te,Y){if(te in ue)return ue[te];var V=t.nestedProperty(K,Y).get();if(!Array.isArray(V))return V};function C(ue){var K={};for(var te in ue)for(var Y=ue[te],V=0;V<Y.length;V++)K[Y[V]]=+te;return K}t.tagSelected=function(ue,K,te){var Y=K.selectedpoints,V=K._indexToPoints,ee;V&&(ee=C(V));function ne(ae){return ae!==void 0&&ae<ue.length}for(var Z=0;Z<Y.length;Z++){var q=Y[Z];if(t.isIndex(q)||t.isArrayOrTypedArray(q)&&t.isIndex(q[0])&&t.isIndex(q[1])){var ie=ee?ee[q]:q,se=te?te[ie]:ie;ne(se)&&(ue[se].selected=1)}}},t.selIndices2selPoints=function(ue){var K=ue.selectedpoints,te=ue._indexToPoints;if(te){for(var Y=C(te),V=[],ee=0;ee<K.length;ee++){var ne=K[ee];if(t.isIndex(ne)){var Z=Y[ne];t.isIndex(Z)&&V.push(Z)}}return V}else return K},t.getTargetArray=function(ue,K){var te=K.target;if(typeof te=="string"&&te){var Y=t.nestedProperty(ue,te).get();return Array.isArray(Y)?Y:!1}else if(Array.isArray(te))return te;return!1},t.minExtend=function(ue,K){var te={};typeof K!="object"&&(K={});var Y=3,V=Object.keys(ue),ee,ne,Z;for(ee=0;ee<V.length;ee++)ne=V[ee],Z=ue[ne],!(ne.charAt(0)==="_"||typeof Z=="function")&&(ne==="module"?te[ne]=Z:Array.isArray(Z)?ne==="colorscale"?te[ne]=Z.slice():te[ne]=Z.slice(0,Y):t.isTypedArray(Z)?te[ne]=Z.subarray(0,Y):Z&&typeof Z=="object"?te[ne]=t.minExtend(ue[ne],K[ne]):te[ne]=Z);for(V=Object.keys(K),ee=0;ee<V.length;ee++)ne=V[ee],Z=K[ne],(typeof Z!="object"||!(ne in te)||typeof te[ne]!="object")&&(te[ne]=Z);return te},t.titleCase=function(ue){return ue.charAt(0).toUpperCase()+ue.substr(1)},t.containsAny=function(ue,K){for(var te=0;te<K.length;te++)if(ue.indexOf(K[te])!==-1)return!0;return!1},t.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;t.isIOS=function(){return k.test(window.navigator.userAgent)};var E=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var ue=E.exec(window.navigator.userAgent);if(ue&&ue.length===2){var K=parseInt(ue[1]);if(!isNaN(K))return K}return null},t.isD3Selection=function(ue){return ue instanceof w.selection},t.ensureSingle=function(ue,K,te,Y){var V=ue.select(K+(te?"."+te:""));if(V.size())return V;var ee=ue.append(K);return te&&ee.classed(te,!0),Y&&ee.call(Y),ee},t.ensureSingleById=function(ue,K,te,Y){var V=ue.select(K+"#"+te);if(V.size())return V;var ee=ue.append(K).attr("id",te);return Y&&ee.call(Y),ee},t.objectFromPath=function(ue,K){for(var te=ue.split("."),Y,V=Y={},ee=0;ee<te.length;ee++){var ne=te[ee],Z=null,q=te[ee].match(/(.*)\[([0-9]+)\]/);q?(ne=q[1],Z=q[2],Y=Y[ne]=[],ee===te.length-1?Y[Z]=K:Y[Z]={},Y=Y[Z]):(ee===te.length-1?Y[ne]=K:Y[ne]={},Y=Y[ne])}return V};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(ue){var K,te,Y,V,ee,ne,Z;if(typeof ue=="object"&&!Array.isArray(ue))for(te in ue)ue.hasOwnProperty(te)&&((K=te.match(F))?(V=ue[te],Y=K[1],delete ue[te],ue[Y]=t.extendDeepNoArrays(ue[Y]||{},t.objectFromPath(te,t.expandObjectPaths(V))[Y])):(K=te.match(I))?(V=ue[te],Y=K[1],ee=parseInt(K[2]),delete ue[te],ue[Y]=ue[Y]||[],K[3]==="."?(Z=K[4],ne=ue[Y][ee]=ue[Y][ee]||{},t.extendDeepNoArrays(ne,t.objectFromPath(Z,t.expandObjectPaths(V)))):ue[Y][ee]=t.expandObjectPaths(V)):ue[te]=t.expandObjectPaths(ue[te]));return ue},t.numSeparate=function(ue,K,te){if(te||(te=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof ue=="number"&&(ue=String(ue));var Y=/(\d+)(\d{3})/,V=K.charAt(0),ee=K.charAt(1),ne=ue.split("."),Z=ne[0],q=ne.length>1?V+ne[1]:"";if(ee&&(ne.length>1||Z.length>4||te))for(;Y.test(Z);)Z=Z.replace(Y,"$1"+ee+"$2");return Z+q},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;t.templateString=function(ue,K){var te={};return ue.replace(t.TEMPLATE_STRING_REGEX,function(Y,V){var ee;return D.test(V)?ee=K[V]:(te[V]=te[V]||t.nestedProperty(K,V).get,ee=te[V]()),t.isValidTextValue(ee)?ee:""})};var R={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return B.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return B.apply(O,arguments)};var z=/^[:|\|]/;function B(ue,K,te){var Y=this,V=arguments;K||(K={});var ee={};return ue.replace(t.TEMPLATE_STRING_REGEX,function(ne,Z,q){var ie=Z==="xother"||Z==="yother",se=Z==="_xother"||Z==="_yother",ae=Z==="_xother_"||Z==="_yother_",oe=Z==="xother_"||Z==="yother_",be=ie||se||oe||ae,ce=Z;(se||ae)&&(ce=ce.substring(1)),(oe||ae)&&(ce=ce.substring(0,ce.length-1));var de;if(be){if(de=K[ce],de===void 0)return""}else{var ye,ge;for(ge=3;ge<V.length;ge++)if(ye=V[ge],!!ye){if(ye.hasOwnProperty(ce)){de=ye[ce];break}if(D.test(ce)||(de=t.nestedProperty(ye,ce).get(),de=ee[ce]||t.nestedProperty(ye,ce).get(),de&&(ee[ce]=de)),de!==void 0)break}}if(de===void 0&&Y)return Y.count<Y.max&&(t.warn("Variable '"+ce+"' in "+Y.name+" could not be found!"),de=ne),Y.count===Y.max&&t.warn("Too many "+Y.name+" warnings - additional warnings will be suppressed"),Y.count++,ne;if(q){var me;if(q[0]===":"&&(me=te?te.numberFormat:t.numberFormat,de=me(q.replace(z,""))(de)),q[0]==="|"){me=te?te.timeFormat:f;var Me=t.dateTime2ms(de);de=t.formatDate(Me,q.replace(z,""),!1,me)}}else{var Le=ce+"Label";K.hasOwnProperty(Le)&&(de=K[Le])}return be&&(de="("+de+")",(se||ae)&&(de=" "+de),(oe||ae)&&(de=de+" ")),de})}var G=48,Q=57;t.subplotSort=function(ue,K){for(var te=Math.min(ue.length,K.length)+1,Y=0,V=0,ee=0;ee<te;ee++){var ne=ue.charCodeAt(ee)||0,Z=K.charCodeAt(ee)||0,q=ne>=G&&ne<=Q,ie=Z>=G&&Z<=Q;if(q&&(Y=10*Y+ne-G),ie&&(V=10*V+Z-G),!q||!ie){if(Y!==V)return Y-V;if(ne!==Z)return ne-Z}}return V-Y};var X=2e9;t.seedPseudoRandom=function(){X=2e9},t.pseudoRandom=function(){var ue=X;return X=(69069*X+1)%4294967296,Math.abs(X-ue)<429496729?t.pseudoRandom():X/4294967296},t.fillText=function(ue,K,te){var Y=Array.isArray(te)?function(ne){te.push(ne)}:function(ne){te.text=ne},V=t.extractOption(ue,K,"htx","hovertext");if(t.isValidTextValue(V))return Y(V);var ee=t.extractOption(ue,K,"tx","text");if(t.isValidTextValue(ee))return Y(ee)},t.isValidTextValue=function(ue){return ue||ue===0},t.formatPercent=function(ue,K){K=K||0;for(var te=(Math.round(100*ue*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",Y=0;Y<K;Y++)te.indexOf(".")!==-1&&(te=te.replace("0%","%"),te=te.replace(".%","%"));return te},t.isHidden=function(ue){var K=window.getComputedStyle(ue).display;return!K||K==="none"},t.strTranslate=function(ue,K){return ue||K?"translate("+ue+","+K+")":""},t.strRotate=function(ue){return ue?"rotate("+ue+")":""},t.strScale=function(ue){return ue!==1?"scale("+ue+")":""},t.getTextTransform=function(ue){var K=ue.noCenter,te=ue.textX,Y=ue.textY,V=ue.targetX,ee=ue.targetY,ne=ue.anchorX||0,Z=ue.anchorY||0,q=ue.rotate,ie=ue.scale;return ie?ie>1&&(ie=1):ie=0,t.strTranslate(V-ie*(te+ne),ee-ie*(Y+Z))+t.strScale(ie)+(q?"rotate("+q+(K?"":" "+te+" "+Y)+")":"")},t.setTransormAndDisplay=function(ue,K){ue.attr("transform",t.getTextTransform(K)),ue.style("display",K.scale?null:"none")},t.ensureUniformFontSize=function(ue,K){var te=t.extendFlat({},K);return te.size=Math.max(K.size,ue._fullLayout.uniformtext.minsize||0),te},t.join2=function(ue,K,te){var Y=ue.length;return Y>1?ue.slice(0,-1).join(K)+te+ue[Y-1]:ue.join(K)},t.bigFont=function(ue){return Math.round(1.2*ue)};var j=t.getFirefoxVersion(),re=j!==null&&j<86;t.getPositionFromD3Event=function(){return re?[w.event.layerX,w.event.layerY]:[w.event.offsetX,w.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(o,U,H){U.exports=function(f){return window&&window.process&&window.process.versions?Object.prototype.toString.call(f)==="[object Object]":Object.prototype.toString.call(f)==="[object Object]"&&Object.getPrototypeOf(f).hasOwnProperty("hasOwnProperty")}},{}],517:[function(o,U,H){var w=o("./nested_property"),f=/^\w*$/,M=0,T=1,e=2,a=3,n=4;U.exports=function(t,h,i,s){i=i||"name",s=s||"value";var y,d,p,c={};h&&h.length?(p=w(t,h),d=p.get()):d=t,h=h||"";var m={};if(d)for(y=0;y<d.length;y++)m[d[y][i]]=y;var l=f.test(s),x={set:function(u,A){var _=A===null?n:M;if(!d){if(!p||_===n)return;d=[],p.set(d)}var g=m[u];if(g===void 0){if(_===n)return;_=_|a,g=d.length,m[u]=g}else A!==(l?d[g][s]:w(d[g],s).get())&&(_=_|e);var b=d[g]=d[g]||{};return b[i]=u,l?b[s]=A:w(b,s).set(A),A!==null&&(_=_&~n),c[g]=c[g]|_,x},get:function(u){if(!!d){var A=m[u];if(A!==void 0)return l?d[A][s]:w(d[A],s).get()}},rename:function(u,A){var _=m[u];return _===void 0||(c[_]=c[_]|T,m[A]=_,delete m[u],d[_][i]=A),x},remove:function(u){var A=m[u];if(A===void 0)return x;var _=d[A];if(Object.keys(_).length>2)return c[A]=c[A]|e,x.set(u,null);if(l){for(y=A;y<d.length;y++)c[y]=c[y]|a;for(y=A;y<d.length;y++)m[d[y][i]]--;d.splice(A,1),delete m[u]}else w(_,s).set(null),c[A]=c[A]|e|n;return x},constructUpdate:function(){for(var u,A,_={},g=Object.keys(c),b=0;b<g.length;b++)A=g[b],u=h+"["+A+"]",d[A]?(c[A]&T&&(_[u+"."+i]=d[A][i]),c[A]&e&&(l?_[u+"."+s]=c[A]&n?null:d[A][s]:_[u+"."+s]=c[A]&n?null:w(d[A],s).get())):_[u]=null;return _}};return x}},{"./nested_property":523}],518:[function(o,U,H){var w=o("../registry");U.exports=function(M,T){for(var e=M._context.locale,a=0;a<2;a++){for(var n=M._context.locales,r=0;r<2;r++){var t=(n[e]||{}).dictionary;if(t){var h=t[T];if(h)return h}n=w.localeRegistry}var i=e.split("-")[0];if(i===e)break;e=i}return T}},{"../registry":647}],519:[function(o,U,H){var w=o("../plot_api/plot_config").dfltConfig,f=o("./notifier"),M=U.exports={};M.log=function(){var T;if(w.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"long")}},M.warn=function(){var T;if(w.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}},M.error=function(){var T;if(w.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(o,U,H){var w=o("@plotly/d3");U.exports=function(M,T,e){var a=M.selectAll("g."+e.replace(/\s/g,".")).data(T,function(r){return r[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var n=M.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(r){r[0][n]=w.select(this)}),a}},{"@plotly/d3":58}],521:[function(o,U,H){var w=o("gl-mat4");H.init2dArray=function(f,M){for(var T=new Array(f),e=0;e<f;e++)T[e]=new Array(M);return T},H.transposeRagged=function(f){var M=0,T=f.length,e,a;for(e=0;e<T;e++)M=Math.max(M,f[e].length);var n=new Array(M);for(e=0;e<M;e++)for(n[e]=new Array(T),a=0;a<T;a++)n[e][a]=f[a][e];return n},H.dot=function(f,M){if(!(f.length&&M.length)||f.length!==M.length)return null;var T=f.length,e,a;if(f[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=H.dot(f[a],M);else if(M[0].length){var n=H.transposeRagged(M);for(e=new Array(n.length),a=0;a<n.length;a++)e[a]=H.dot(f,n[a])}else for(e=0,a=0;a<T;a++)e+=f[a]*M[a];return e},H.translationMatrix=function(f,M){return[[1,0,f],[0,1,M],[0,0,1]]},H.rotationMatrix=function(f){var M=f*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},H.rotationXYMatrix=function(f,M,T){return H.dot(H.dot(H.translationMatrix(M,T),H.rotationMatrix(f)),H.translationMatrix(-M,-T))},H.apply3DTransform=function(f){return function(){var M=arguments,T=arguments.length===1?M[0]:[M[0],M[1],M[2]||0];return H.dot(f,[T[0],T[1],T[2],1]).slice(0,3)}},H.apply2DTransform=function(f){return function(){var M=arguments;M.length===3&&(M=M[0]);var T=arguments.length===1?M[0]:[M[0],M[1]];return H.dot(f,[T[0],T[1],1]).slice(0,2)}},H.apply2DTransform2=function(f){var M=H.apply2DTransform(f);return function(T){return M(T.slice(0,2)).concat(M(T.slice(2,4)))}},H.convertCssMatrix=function(f){if(f){var M=f.length;if(M===16)return f;if(M===6)return[f[0],f[1],0,0,f[2],f[3],0,0,0,0,1,0,f[4],f[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H.inverseTransformMatrix=function(f){var M=[];return w.invert(M,f),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],522:[function(o,U,H){function w(M,T){var e=M%T;return e<0?e+T:e}function f(M,T){return Math.abs(M)>T/2?M-Math.round(M/T)*T:M}U.exports={mod:w,modHalf:f}},{}],523:[function(o,U,H){var w=o("fast-isnumeric"),f=o("./array").isArrayOrTypedArray;U.exports=function(s,y){if(w(y))y=String(y);else if(typeof y!="string"||y.substr(y.length-4)==="[-1]")throw"bad property string";for(var d=0,p=y.split("."),c,m,l;d<p.length;){if(c=String(p[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),c){if(c[1])p[d]=c[1];else if(d===0)p.splice(0,1);else throw"bad property string";for(m=c[2].substr(1,c[2].length-2).split("]["),l=0;l<m.length;l++)d++,p.splice(d,0,Number(m[l]))}d++}return typeof s!="object"?h(s,y,p):{set:a(s,p,y),get:M(s,p),astr:y,parts:p,obj:s}};function M(i,s){return function(){var y=i,d,p,c,m,l;for(m=0;m<s.length-1;m++){if(d=s[m],d===-1){for(p=!0,c=[],l=0;l<y.length;l++)c[l]=M(y[l],s.slice(m+1))(),c[l]!==c[0]&&(p=!1);return p?c[0]:c}if(typeof d=="number"&&!f(y)||(y=y[d],typeof y!="object"||y===null))return}if(!(typeof y!="object"||y===null)&&(c=y[s[m]],c!==null))return c}}var T=/(^|\.)args\[/;function e(i,s){return i===void 0||i===null&&!s.match(T)}function a(i,s,y){return function(d){var p=i,c="",m=e(d,y),l,x;for(x=0;x<s.length-1;x++){if(l=s[x],typeof l=="number"&&!f(p))throw"array index but container is not an array";if(l===-1){if(m=!r(p,s.slice(x+1),d,y),m)break;return}if(!t(p,l,s[x+1],m))break;if(p=p[l],typeof p!="object"||p===null)throw"container is not an object";c=n(c,l)}if(m){if(x===s.length-1&&(delete p[s[x]],Array.isArray(p)&&+s[x]===p.length-1))for(;p.length&&p[p.length-1]===void 0;)p.pop()}else p[s[x]]=d}}function n(i,s){var y=s;return w(s)?y="["+s+"]":i&&(y="."+s),i+y}function r(i,s,y,d){var p=f(y),c=!0,m=y,l=d.replace("-1",0),x=p?!1:e(y,l),u=s[0],A;for(A=0;A<i.length;A++)l=d.replace("-1",A),p&&(m=y[A%y.length],x=e(m,l)),x&&(c=!1),t(i,A,u,x)&&a(i[A],s,d.replace("-1",A))(m);return c}function t(i,s,y,d){if(i[s]===void 0){if(d)return!1;typeof y=="number"?i[s]=[]:i[s]={}}return!0}function h(i,s,y){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:y,obj:i}}},{"./array":497,"fast-isnumeric":190}],524:[function(o,U,H){U.exports=function(){}},{}],525:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=[];U.exports=function(T,e){if(M.indexOf(T)!==-1)return;M.push(T);var a=1e3;f(e)?a=e:e==="long"&&(a=3e3);var n=w.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var r=n.selectAll(".notifier-note").data(M);function t(h){h.duration(700).style("opacity",0).each("end",function(i){var s=M.indexOf(i);s!==-1&&M.splice(s,1),w.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var i=w.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(t)});for(var s=i.append("p"),y=h.split(/<br\s*\/?>/g),d=0;d<y.length;d++)d&&s.append("br"),s.append("span").text(y[d]);e==="stick"?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(a).call(t)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(o,U,H){var w=o("./setcursor"),f="data-savedcursor",M="!!";U.exports=function(e,a){var n=e.attr(f);if(a){if(!n){for(var r=(e.attr("class")||"").split(" "),t=0;t<r.length;t++){var h=r[t];h.indexOf("cursor-")===0&&e.attr(f,h.substr(7)).classed(h,!1)}e.attr(f)||e.attr(f,M)}w(e,a)}else n&&(e.attr(f,null),n===M?w(e):w(e,n))}},{"./setcursor":536}],527:[function(o,U,H){var w=o("./matrix").dot,f=o("../constants/numerical").BADNUM,M=U.exports={};M.tester=function(e){var a=e.slice(),n=a[0][0],r=n,t=a[0][1],h=t,i;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),i=1;i<a.length;i++)n=Math.min(n,a[i][0]),r=Math.max(r,a[i][0]),t=Math.min(t,a[i][1]),h=Math.max(h,a[i][1]);var s=!1,y;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(s=!0,y=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(s=!0,y=function(l){return l[1]===a[0][1]}));function d(l,x){var u=l[0],A=l[1];return!(u===f||u<n||u>r||A===f||A<t||A>h||x&&y(l))}function p(l,x){var u=l[0],A=l[1];if(u===f||u<n||u>r||A===f||A<t||A>h)return!1;var _=a.length,g=a[0][0],b=a[0][1],v=0,C,S,k,E,F;for(C=1;C<_;C++)if(S=g,k=b,g=a[C][0],b=a[C][1],E=Math.min(S,g),!(u<E||u>Math.max(S,g)||A>Math.max(k,b)))if(A<Math.min(k,b))u!==E&&v++;else{if(g===S?F=A:F=k+(u-S)*(b-k)/(g-S),A===F)return!(C===1&&x);A<=F&&u!==E&&v++}return v%2===1}var c=!0,m=a[0];for(i=1;i<a.length;i++)if(m[0]!==a[i][0]||m[1]!==a[i][1]){c=!1;break}return{xmin:n,xmax:r,ymin:t,ymax:h,pts:a,contains:s?d:p,isRect:s,degenerate:c}},M.isSegmentBent=function(e,a,n,r){var t=e[a],h=[e[n][0]-t[0],e[n][1]-t[1]],i=w(h,h),s=Math.sqrt(i),y=[-h[1]/s,h[0]/s],d,p,c;for(d=a+1;d<n;d++)if(p=[e[d][0]-t[0],e[d][1]-t[1]],c=w(p,h),c<0||c>i||Math.abs(w(p,y))>r)return!0;return!1},M.filter=function(e,a){var n=[e[0]],r=0,t=0;function h(s){e.push(s);var y=n.length,d=r;n.splice(t+1);for(var p=d+1;p<e.length;p++)(p===e.length-1||M.isSegmentBent(e,d,p+1,a))&&(n.push(e[p]),n.length<y-2&&(r=p,t=n.length-1),d=p)}if(e.length>1){var i=e.pop();h(i)}return{addPt:h,raw:e,filtered:n}}},{"../constants/numerical":491,"./matrix":521}],528:[function(o,U,H){(function(w){(function(){var f=o("./show_no_webgl_msg"),M=o("regl");U.exports=function(e,a,n){var r=e._fullLayout,t=!0;return r._glcanvas.each(function(h){if(h.regl){h.regl.preloadCachedCode(n);return}if(!(h.pick&&!r._has("parcoords"))){try{h.regl=M({canvas:this,attributes:{antialias:!h.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||w.devicePixelRatio,extensions:a||[],cachedCode:n||{}})}catch{t=!1}h.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(i){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:i,layer:h.key})},!1)}}),t||f({container:r._glcontainer.node()}),t}}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(o,U,H){var w=o("fast-isnumeric"),f=o("is-mobile");U.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=M(),typeof a!="string")return!0;var n=f({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!n)for(var r=a.split(" "),t=1;t<r.length;t++){var h=r[t];if(h.indexOf("Safari")!==-1)for(var i=t-1;i>-1;i--){var s=r[i];if(s.substr(0,8)==="Version/"){var y=s.substr(8).split(".")[0];if(w(y)&&(y=+y),y>=13)return!0}}}return n};function M(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(o,U,H){U.exports=function(f,M){if(M instanceof RegExp){for(var T=M.toString(),e=0;e<f.length;e++)if(f[e]instanceof RegExp&&f[e].toString()===T)return f;f.push(M)}else(M||M===0)&&f.indexOf(M)===-1&&f.push(M);return f}},{}],531:[function(o,U,H){var w=o("../lib"),f=o("../plot_api/plot_config").dfltConfig;function M(e,a){for(var n=[],r,t=0;t<a.length;t++)r=a[t],r===e?n[t]=r:typeof r=="object"?n[t]=Array.isArray(r)?w.extendDeep([],r):w.extendDeepAll({},r):n[t]=r;return n}var T={};T.add=function(e,a,n,r,t){var h,i;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},i=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(h={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(i,e.undoQueue.queue.length-i,h),e.undoQueue.index+=1):h=e.undoQueue.queue[i-1],e.undoQueue.beginSequence=!1,h&&(h.undo.calls.unshift(a),h.undo.args.unshift(n),h.redo.calls.push(r),h.redo.args.push(t)),e.undoQueue.queue.length>f.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.undo.calls.length;r++)T.plotDo(a,n.undo.calls[r],n.undo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.redo.calls.length;r++)T.plotDo(a,n.redo.calls[r],n.redo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,n){e.autoplay=!0,n=M(e,n),a.apply(null,n)},U.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(o,U,H){H.counter=function(w,f,M,T){var e=(f||"")+(M?"":"$"),a=T===!1?"":"^";return w==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+w+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(o,U,H){var w=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,f=/^[^\.\[\]]+$/;U.exports=function(M,T){for(;T;){var e=M.match(w);if(e)M=e[1];else if(M.match(f))M="";else throw new Error("bad relativeAttr call:"+[M,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return M&&T.charAt(0)!=="["?M+"."+T:M+T}},{}],534:[function(o,U,H){var w=o("./array").isArrayOrTypedArray,f=o("./is_plain_object");U.exports=function M(T,e){for(var a in e){var n=e[a],r=T[a];if(r!==n)if(a.charAt(0)==="_"||typeof n=="function"){if(a in T)continue;T[a]=n}else if(w(n)&&w(r)&&f(n[0])){if(a==="customdata"||a==="ids")continue;for(var t=Math.min(n.length,r.length),h=0;h<t;h++)r[h]!==n[h]&&f(n[h])&&f(r[h])&&M(r[h],n[h])}else f(n)&&f(r)&&(M(r,n),Object.keys(r).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(o,U,H){var w=o("fast-isnumeric"),f=o("./loggers"),M=o("./identity"),T=o("../constants/numerical").BADNUM,e=1e-9;H.findBin=function(h,i,s){if(w(i.start))return s?Math.ceil((h-i.start)/i.size-e)-1:Math.floor((h-i.start)/i.size+e);var y=0,d=i.length,p=0,c=d>1?(i[d-1]-i[0])/(d-1):1,m,l;for(c>=0?l=s?a:n:l=s?t:r,h+=c*e*(s?-1:1)*(c>=0?1:-1);y<d&&p++<100;)m=Math.floor((y+d)/2),l(i[m],h)?y=m+1:d=m;return p>90&&f.log("Long binary search..."),y-1};function a(h,i){return h<i}function n(h,i){return h<=i}function r(h,i){return h>i}function t(h,i){return h>=i}H.sorterAsc=function(h,i){return h-i},H.sorterDes=function(h,i){return i-h},H.distinctVals=function(h){var i=h.slice();i.sort(H.sorterAsc);var s;for(s=i.length-1;s>-1&&i[s]===T;s--);for(var y=i[s]-i[0]||1,d=y/(s||1)/1e4,p=[],c,m=0;m<=s;m++){var l=i[m],x=l-c;c===void 0?(p.push(l),c=l):x>d&&(y=Math.min(y,x),p.push(l),c=l)}return{vals:p,minDiff:y}},H.roundUp=function(h,i,s){for(var y=0,d=i.length-1,p,c=0,m=s?0:1,l=s?1:0,x=s?Math.ceil:Math.floor;y<d&&c++<100;)p=x((y+d)/2),i[p]<=h?y=p+m:d=p-l;return i[y]},H.sort=function(h,i){for(var s=0,y=0,d=1;d<h.length;d++){var p=i(h[d],h[d-1]);if(p<0?s=1:p>0&&(y=1),s&&y)return h.sort(i)}return y?h:h.reverse()},H.findIndexOfMin=function(h,i){i=i||M;for(var s=1/0,y,d=0;d<h.length;d++){var p=i(h[d]);p<s&&(s=p,y=d)}return y}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(o,U,H){U.exports=function(f,M){(f.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&f.classed(T,!1)}),M&&f.classed("cursor-"+M,!0)}},{}],537:[function(o,U,H){var w=o("../components/color"),f=function(){};U.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=f);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=w.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=w.lightLine,a.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",a.appendChild(n),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(o,U,H){U.exports=function(f){return Object.keys(f).sort()}},{}],539:[function(o,U,H){var w=o("fast-isnumeric"),f=o("./array").isArrayOrTypedArray;H.aggNums=function(M,T,e,a){var n,r;if((!a||a>e.length)&&(a=e.length),w(T)||(T=!1),f(e[0])){for(r=new Array(a),n=0;n<a;n++)r[n]=H.aggNums(M,T,e[n]);e=r}for(n=0;n<a;n++)w(T)?w(e[n])&&(T=M(+T,+e[n])):T=e[n];return T},H.len=function(M){return H.aggNums(function(T){return T+1},0,M)},H.mean=function(M,T){return T||(T=H.len(M)),H.aggNums(function(e,a){return e+a},0,M)/T},H.midRange=function(M){if(!(M===void 0||M.length===0))return(H.aggNums(Math.max,null,M)+H.aggNums(Math.min,null,M))/2},H.variance=function(M,T,e){return T||(T=H.len(M)),w(e)||(e=H.mean(M,T)),H.aggNums(function(a,n){return a+Math.pow(n-e,2)},0,M)/T},H.stdev=function(M,T,e){return Math.sqrt(H.variance(M,T,e))},H.median=function(M){var T=M.slice().sort();return H.interp(T,.5)},H.interp=function(M,T){if(!w(T))throw"n should be a finite number";if(T=T*M.length-.5,T<0)return M[0];if(T>M.length-1)return M[M.length-1];var e=T%1;return e*M[Math.ceil(T)]+(1-e)*M[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(o,U,H){var w=o("color-normalize");function f(M){return M?w(M):[0,0,0,1]}U.exports=f},{"color-normalize":89}],541:[function(o,U,H){var w=o("@plotly/d3"),f=o("../lib"),M=f.strTranslate,T=o("../constants/xmlns_namespaces"),e=o("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;H.convertToTspans=function(z,B,G){var Q=z.text(),X=!z.attr("data-notex")&&B&&B._context.typesetMath&&typeof MathJax<"u"&&Q.match(a),j=w.select(z.node().parentNode);if(j.empty())return;var re=z.attr("class")?z.attr("class").split(" ")[0]:"text";re+="-math",j.selectAll("svg."+re).remove(),j.selectAll("g."+re+"-group").remove(),z.style("display",null).attr({"data-unformatted":Q,"data-math":"N"});function ue(){j.empty()||(re=z.attr("class")+"-math",j.select("svg."+re).remove()),z.text("").style("white-space","pre");var K=I(z.node(),Q);K&&z.style("pointer-events","all"),H.positionText(z),G&&G.call(z)}return X?(B&&B._promises||[]).push(new Promise(function(K){z.style("display","none");var te=parseInt(z.node().style.fontSize,10),Y={fontSize:te};i(X[2],Y,function(V,ee,ne){j.selectAll("svg."+re).remove(),j.selectAll("g."+re+"-group").remove();var Z=V&&V.select("svg");if(!Z||!Z.node()){ue(),K();return}var q=j.append("g").classed(re+"-group",!0).attr({"pointer-events":"none","data-unformatted":Q,"data-math":"Y"});q.node().appendChild(Z.node()),ee&&ee.node()&&Z.node().insertBefore(ee.node().cloneNode(!0),Z.node().firstChild);var ie=ne.width,se=ne.height;Z.attr({class:re,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=z.node().style.fill||"black",oe=Z.select("g");oe.attr({fill:ae,stroke:ae});var be=oe.node().getBoundingClientRect(),ce=be.width,de=be.height;(ce>ie||de>se)&&(Z.style("overflow","hidden"),be=Z.node().getBoundingClientRect(),ce=be.width,de=be.height);var ye=+z.attr("x"),ge=+z.attr("y"),me=te||z.node().getBoundingClientRect().height,Me=-me/4;if(re[0]==="y")q.attr({transform:"rotate("+[-90,ye,ge]+")"+M(-ce/2,Me-de/2)});else if(re[0]==="l")ge=Me-de/2;else if(re[0]==="a"&&re.indexOf("atitle")!==0)ye=0,ge=Me;else{var Le=z.attr("text-anchor");ye=ye-ce*(Le==="middle"?.5:Le==="end"?1:0),ge=ge+Me-de/2}Z.attr({x:ye,y:ge}),G&&G.call(z,q),K(q)})})):ue(),z};var n=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function t(z){return z.replace(n,"\\lt ").replace(r,"\\gt ")}var h=[["$","$"],["\\(","\\)"]];function i(z,B,G){var Q=parseInt((MathJax.version||"").split(".")[0]);if(Q!==2&&Q!==3){f.warn("No MathJax version:",MathJax.version);return}var X,j,re,ue,K=function(){return j=f.extendDeepAll({},MathJax.Hub.config),re=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:h},displayAlign:"left"})},te=function(){j=f.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=h},Y=function(){if(X=MathJax.Hub.config.menuSettings.renderer,X!=="SVG")return MathJax.Hub.setRenderer("SVG")},V=function(){X=MathJax.config.startup.output,X!=="svg"&&(MathJax.config.startup.output="svg")},ee=function(){var ae="math-output-"+f.randstr({},64);ue=w.select("body").append("div").attr({id:ae}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(t(z));var oe=ue.node();return Q===2?MathJax.Hub.Typeset(oe):MathJax.typeset([oe])},ne=function(){var ae=ue.select(Q===2?".MathJax_SVG":".MathJax"),oe=!ae.empty()&&ue.select("svg").node();if(!oe)f.log("There was an error in the tex syntax.",z),G();else{var be=oe.getBoundingClientRect(),ce;Q===2?ce=w.select("body").select("#MathJax_SVG_glyphs"):ce=ae.select("defs"),G(ae,ce,be)}ue.remove()},Z=function(){if(X!=="SVG")return MathJax.Hub.setRenderer(X)},q=function(){X!=="svg"&&(MathJax.config.startup.output=X)},ie=function(){return re!==void 0&&(MathJax.Hub.processSectionDelay=re),MathJax.Hub.Config(j)},se=function(){MathJax.config=j};Q===2?MathJax.Hub.Queue(K,Y,ee,ne,Z,ie):Q===3&&(te(),V(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ee(),ne(),q(),se()}))}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},y={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},p="\u200B",c=["http:","https:","mailto:","",void 0,":"],m=H.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,u=/<br(\s+.*)?>/i;H.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,g=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,b=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function v(z,B){if(!z)return null;var G=z.match(B),Q=G&&(G[3]||G[4]);return Q&&E(Q)}var C=/(^|;)\s*color:/;H.plainText=function(z,B){B=B||{};for(var G=B.len!==void 0&&B.len!==-1?B.len:1/0,Q=B.allowedTags!==void 0?B.allowedTags:["br"],X="...",j=X.length,re=z.split(l),ue=[],K="",te=0,Y=0;Y<re.length;Y++){var V=re[Y],ee=V.match(x),ne=ee&&ee[2].toLowerCase();if(ne)Q.indexOf(ne)!==-1&&(ue.push(V),K=ne);else{var Z=V.length;if(te+Z<G)ue.push(V),te+=Z;else if(te<G){var q=G-te;K&&(K!=="br"||q<=j||Z<=j)&&ue.pop(),G>j?ue.push(V.substr(0,q-j)+X):ue.push(V.substr(0,q));break}K=""}}return ue.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(k,function(B,G){var Q;return G.charAt(0)==="#"?Q=F(G.charAt(1)==="x"?parseInt(G.substr(2),16):parseInt(G.substr(1),10)):Q=S[G],Q||B})}H.convertEntities=E;function F(z){if(!(z>1114111)){var B=String.fromCodePoint;if(B)return B(z);var G=String.fromCharCode;return z<=65535?G(z):G((z>>10)+55232,z%1024+56320)}}function I(z,B){B=B.replace(m," ");var G=!1,Q=[],X,j=-1;function re(){j++;var de=document.createElementNS(T.svg,"tspan");w.select(de).attr({class:"line",dy:j*e+"em"}),z.appendChild(de),X=de;var ye=Q;if(Q=[{node:de}],ye.length>1)for(var ge=1;ge<ye.length;ge++)ue(ye[ge])}function ue(de){var ye=de.type,ge={},me;if(ye==="a"){me="a";var Me=de.target,Le=de.href,Oe=de.popup;Le&&(ge={"xlink:xlink:show":Me==="_blank"||Me.charAt(0)!=="_"?"new":"replace",target:Me,"xlink:xlink:href":Le},Oe&&(ge.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Oe+'");return false;'))}else me="tspan";de.style&&(ge.style=de.style);var _e=document.createElementNS(T.svg,me);if(ye==="sup"||ye==="sub"){K(X,p),X.appendChild(_e);var Ee=document.createElementNS(T.svg,"tspan");K(Ee,p),w.select(Ee).attr("dy",d[ye]),ge.dy=y[ye],X.appendChild(_e),X.appendChild(Ee)}else X.appendChild(_e);w.select(_e).attr(ge),X=de.node=_e,Q.push(de)}function K(de,ye){de.appendChild(document.createTextNode(ye))}function te(de){if(Q.length===1){f.log("Ignoring unexpected end tag </"+de+">.",B);return}var ye=Q.pop();de!==ye.type&&f.log("Start tag <"+ye.type+"> doesnt match end tag <"+de+">. Pretending it did match.",B),X=Q[Q.length-1].node}var Y=u.test(B);Y?re():(X=z,Q=[{node:z}]);for(var V=B.split(l),ee=0;ee<V.length;ee++){var ne=V[ee],Z=ne.match(x),q=Z&&Z[2].toLowerCase(),ie=s[q];if(q==="br")re();else if(ie===void 0)K(X,E(ne));else if(Z[1])te(q);else{var se=Z[4],ae={type:q},oe=v(se,A);if(oe?(oe=oe.replace(C,"$1 fill:"),ie&&(oe+=";"+ie)):ie&&(oe=ie),oe&&(ae.style=oe),q==="a"){G=!0;var be=v(se,_);if(be){var ce=D(be);ce&&(ae.href=ce,ae.target=v(se,g)||"_blank",ae.popup=v(se,b))}}ue(ae)}}return G}function D(z){var B=encodeURI(decodeURI(z)),G=document.createElement("a"),Q=document.createElement("a");G.href=z,Q.href=B;var X=G.protocol,j=Q.protocol;return c.indexOf(X)!==-1&&c.indexOf(j)!==-1?B:""}H.sanitizeHTML=function(B){B=B.replace(m," ");for(var G=document.createElement("p"),Q=G,X=[],j=B.split(l),re=0;re<j.length;re++){var ue=j[re],K=ue.match(x),te=K&&K[2].toLowerCase();if(te in s)if(K[1])X.length&&(Q=X.pop());else{var Y=K[4],V=v(Y,A),ee=V?{style:V}:{};if(te==="a"){var ne=v(Y,_);if(ne){var Z=D(ne);if(Z){ee.href=Z;var q=v(Y,g);q&&(ee.target=q)}}}var ie=document.createElement(te);Q.appendChild(ie),w.select(ie).attr(ee),Q=ie,X.push(ie)}else Q.appendChild(document.createTextNode(E(ue)))}var se="innerHTML";return G[se]},H.lineCount=function(B){return B.selectAll("tspan.line").size()||1},H.positionText=function(B,G,Q){return B.each(function(){var X=w.select(this);function j(K,te){return te===void 0?(te=X.attr(K),te===null&&(X.attr(K,0),te=0)):X.attr(K,te),te}var re=j("x",G),ue=j("y",Q);this.nodeName==="text"&&X.selectAll("tspan.line").attr({x:re,y:ue})})};function R(z,B,G){var Q=G.horizontalAlign,X=G.verticalAlign||"top",j=z.node().getBoundingClientRect(),re=B.node().getBoundingClientRect(),ue,K,te;return X==="bottom"?K=function(){return j.bottom-ue.height}:X==="middle"?K=function(){return j.top+(j.height-ue.height)/2}:K=function(){return j.top},Q==="right"?te=function(){return j.right-ue.width}:Q==="center"?te=function(){return j.left+(j.width-ue.width)/2}:te=function(){return j.left},function(){ue=this.node().getBoundingClientRect();var Y=te()-re.left,V=K()-re.top,ee=G.gd||{};if(G.gd){ee._fullLayout._calcInverseTransform(ee);var ne=f.apply3DTransform(ee._fullLayout._invTransform)(Y,V);Y=ne[0],V=ne[1]}return this.style({top:V+"px",left:Y+"px","z-index":1e3}),this}}var O="1px ";H.makeTextShadow=function(z){var B=O,G=O,Q=O;return B+G+Q+z+", -"+B+"-"+G+Q+z+", "+B+"-"+G+Q+z+", -"+B+G+Q+z},H.makeEditable=function(z,B){var G=B.gd,Q=B.delegate,X=w.dispatch("edit","input","cancel"),j=Q||z;if(z.style({"pointer-events":Q?"none":"all"}),z.size()!==1)throw new Error("boo");function re(){K(),z.style({opacity:0});var te=j.attr("class"),Y;te?Y="."+te.split(" ")[0]+"-math-group":Y="[class*=-math-group]",Y&&w.select(z.node().parentNode).select(Y).style({opacity:0})}function ue(te){var Y=te.node(),V=document.createRange();V.selectNodeContents(Y);var ee=window.getSelection();ee.removeAllRanges(),ee.addRange(V),Y.focus()}function K(){var te=w.select(G),Y=te.select(".svg-container"),V=Y.append("div"),ee=z.node().style,ne=parseFloat(ee.fontSize||12),Z=B.text;Z===void 0&&(Z=z.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ee.fontFamily||"Arial","font-size":ne,color:B.fill||ee.fill||"black",opacity:1,"background-color":B.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ne/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(R(z,Y,B)).on("blur",function(){G._editing=!1,z.text(this.textContent).style({opacity:1});var q=w.select(this).attr("class"),ie;q?ie="."+q.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&w.select(z.node().parentNode).select(ie).style({opacity:0});var se=this.textContent;w.select(this).transition().duration(0).remove(),w.select(document).on("mouseup",null),X.edit.call(z,se)}).on("focus",function(){var q=this;G._editing=!0,w.select(document).on("mouseup",function(){if(w.event.target===q)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){w.event.which===27?(G._editing=!1,z.style({opacity:1}),w.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(z,this.textContent)):(X.input.call(z,this.textContent),w.select(this).call(R(z,Y,B)))}).on("keydown",function(){w.event.which===13&&this.blur()}).call(ue)}return B.immediate?re():j.on("click",re),w.rebind(z,X,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(o,U,H){var w={};H.throttle=function(T,e,a){var n=w[T],r=Date.now();if(!n){for(var t in w)w[t].ts<r-6e4&&delete w[t];n=w[T]={ts:0,timer:null}}f(n);function h(){a(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(r>n.ts+e){h();return}n.timer=setTimeout(function(){h(),n.timer=null},e)},H.done=function(M){var T=w[M];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},H.clear=function(M){if(M)f(w[M]),delete w[M];else for(var T in w)H.clear(T)};function f(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}},{}],543:[function(o,U,H){var w=o("fast-isnumeric");U.exports=function(M,T){if(M>0)return Math.log(M)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return w(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(o,U,H){var w=U.exports={},f=o("../plots/geo/constants").locationmodeToLayer,M=o("topojson-client").feature;w.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},w.getTopojsonPath=function(T,e){return T+e+".json"},w.getTopojsonFeatures=function(T,e){var a=f[T.locationmode],n=e.objects[a];return M(e,n).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(o,U,H){U.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(o,U,H){U.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(o,U,H){var w=o("../registry");U.exports=function(M){for(var T=w.layoutArrayContainers,e=w.layoutArrayRegexes,a=M.split("[")[0],n,r,t=0;t<e.length;t++)if(r=M.match(e[t]),r&&r.index===0){n=r[0];break}if(n||(n=T[T.indexOf(a)]),!n)return!1;var h=M.substr(n.length);return h?(r=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:n,index:Number(r[1]),property:r[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":647}],548:[function(o,U,H){var w=o("../lib"),f=w.extendFlat,M=w.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");U.exports={traces:T,layout:e,traceFlags:function(){return r(a)},layoutFlags:function(){return r(n)},update:function(i,s){var y=s.editType;if(y&&y!=="none")for(var d=y.split("+"),p=0;p<d.length;p++)i[d[p]]=!0},overrideAll:t};function r(i){for(var s={},y=0;y<i.length;y++)s[i[y]]=!1;return s}function t(i,s,y){var d=f({},i);for(var p in d){var c=d[p];M(c)&&(d[p]=h(c,s,y,p))}return y==="from-root"&&(d.editType=s),d}function h(i,s,y,d){if(i.valType){var p=f({},i);if(p.editType=s,Array.isArray(i.items)){p.items=new Array(i.items.length);for(var c=0;c<i.items.length;c++)p.items[c]=h(i.items[c],s)}return p}else return t(i,s,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(o,U,H){var w=o("fast-isnumeric"),f=o("gl-mat4/fromQuat"),M=o("../registry"),T=o("../lib"),e=o("../plots/plots"),a=o("../plots/cartesian/axis_ids"),n=o("../components/color"),r=a.cleanId,t=a.getFromTrace,h=M.traceIs;H.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&T.log("Clearing previous rejected promises from queue."),u._promises=[]},H.cleanLayout=function(u){var A,_;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var g=(e.subplotsRegistry.cartesian||{}).attrRegex,b=(e.subplotsRegistry.polar||{}).attrRegex,v=(e.subplotsRegistry.ternary||{}).attrRegex,C=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(u);for(A=0;A<S.length;A++){var k=S[A];if(g&&g.test(k)){var E=u[k];E.anchor&&E.anchor!=="free"&&(E.anchor=r(E.anchor)),E.overlaying&&(E.overlaying=r(E.overlaying)),E.type||(E.isdate?E.type="date":E.islog?E.type="log":E.isdate===!1&&E.islog===!1&&(E.type="linear")),(E.autorange==="withzero"||E.autorange==="tozero")&&(E.autorange=!0,E.rangemode="tozero"),delete E.islog,delete E.isdate,delete E.categories,c(E,"domain")&&delete E.domain,E.autotick!==void 0&&(E.tickmode===void 0&&(E.tickmode=E.autotick?"auto":"linear"),delete E.autotick),s(E)}else if(b&&b.test(k)){var F=u[k];s(F.radialaxis)}else if(v&&v.test(k)){var I=u[k];s(I.aaxis),s(I.baxis),s(I.caxis)}else if(C&&C.test(k)){var D=u[k],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],z=R[1],B=R[2],G=f([],O),Q=[];for(_=0;_<3;++_)Q[_]=z[_]+B*G[2+4*_];D.camera={eye:{x:Q[0],y:Q[1],z:Q[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}s(D.xaxis),s(D.yaxis),s(D.zaxis)}}var X=Array.isArray(u.annotations)?u.annotations.length:0;for(A=0;A<X;A++){var j=u.annotations[A];!T.isPlainObject(j)||(j.ref&&(j.ref==="paper"?(j.xref="paper",j.yref="paper"):j.ref==="data"&&(j.xref="x",j.yref="y"),delete j.ref),i(j,"xref"),i(j,"yref"))}var re=Array.isArray(u.shapes)?u.shapes.length:0;for(A=0;A<re;A++){var ue=u.shapes[A];!T.isPlainObject(ue)||(i(ue,"xref"),i(ue,"yref"))}var K=Array.isArray(u.images)?u.images.length:0;for(A=0;A<K;A++){var te=u.images[A];!T.isPlainObject(te)||(i(te,"xref"),i(te,"yref"))}var Y=u.legend;return Y&&(Y.x>3?(Y.x=1.02,Y.xanchor="left"):Y.x<-2&&(Y.x=-.02,Y.xanchor="right"),Y.y>3?(Y.y=1.02,Y.yanchor="bottom"):Y.y<-2&&(Y.y=-.02,Y.yanchor="top")),s(u),u.dragmode==="rotate"&&(u.dragmode="orbit"),n.clean(u),u.template&&u.template.layout&&H.cleanLayout(u.template.layout),u};function i(u,A){var _=u[A],g=A.charAt(0);_&&_!=="paper"&&(u[A]=r(_,g,!0))}function s(u){u&&((typeof u.title=="string"||typeof u.title=="number")&&(u.title={text:u.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(_,g){var b=u[_],v=u.title&&u.title[g];b&&!v&&(u.title||(u.title={}),u.title[g]=u[_],delete u[_])}}H.cleanData=function(u){for(var A=0;A<u.length;A++){var _=u[A],g;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var b=n.defaults,v=_.error_y.color||(h(_,"bar")?n.defaultLine:b[A%b.length]);_.error_y.color=n.addOpacity(n.rgb(v),n.opacity(v)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(h(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",H.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&H.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=r(_.xaxis,"x")),_.yaxis&&(_.yaxis=r(_.yaxis,"y")),h(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!h(_,"pie-like")&&!h(_,"bar-like"))if(Array.isArray(_.textposition))for(g=0;g<_.textposition.length;g++)_.textposition[g]=p(_.textposition[g]);else _.textposition&&(_.textposition=p(_.textposition));var C=M.getModule(_);if(C&&C.colorbar){var S=C.colorbar.container,k=S?_[S]:_;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var E=["x","y","z"];for(g=0;g<E.length;g++){var F=_.contours[E[g]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var I=(_.increasing||{}).showlegend!==!1,D=(_.decreasing||{}).showlegend!==!1,R=y(_.increasing),O=y(_.decreasing);if(R!==!1&&O!==!1){var z=d(R,O,I,D);z&&(_.name=z)}else(R||O)&&!_.name&&(_.name=R||O)}if(Array.isArray(_.transforms)){var B=_.transforms;for(g=0;g<B.length;g++){var G=B[g];if(!!T.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var Q=G.styles,X=Object.keys(Q);G.styles=[];for(var j=0;j<X.length;j++)G.styles.push({target:X[j],value:Q[X[j]]})}break}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),n.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),s(_),_.colorbar&&s(_.colorbar),_.marker&&_.marker.colorbar&&s(_.marker.colorbar),_.line&&_.line.colorbar&&s(_.line.colorbar),_.aaxis&&s(_.aaxis),_.baxis&&s(_.baxis)}};function y(u){if(!T.isPlainObject(u))return!1;var A=u.name;return delete u.name,delete u.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function d(u,A,_,g){if(_&&!g)return u;if(g&&!_||!u.trim())return A;if(!A.trim())return u;var b=Math.min(u.length,A.length),v;for(v=0;v<b&&u.charAt(v)===A.charAt(v);v++);var C=u.substr(0,v);return C.trim()}function p(u){var A="middle",_="center";return typeof u=="string"&&(u.indexOf("top")!==-1?A="top":u.indexOf("bottom")!==-1&&(A="bottom"),u.indexOf("left")!==-1?_="left":u.indexOf("right")!==-1&&(_="right")),A+" "+_}function c(u,A){return A in u&&typeof u[A]=="object"&&Object.keys(u[A]).length===0}H.swapXYData=function(u){var A;if(T.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var _=u.error_y,g="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);T.swapAttrs(u,["error_?.copy_ystyle"]),g&&T.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if(typeof u.hoverinfo=="string"){var b=u.hoverinfo.split("+");for(A=0;A<b.length;A++)b[A]==="x"?b[A]="y":b[A]==="y"&&(b[A]="x");u.hoverinfo=b.join("+")}},H.coerceTraceIndices=function(u,A){if(w(A))return[A];if(!Array.isArray(A)||!A.length)return u.data.map(function(b,v){return v});if(Array.isArray(A)){for(var _=[],g=0;g<A.length;g++)T.isIndex(A[g],u.data.length)?_.push(A[g]):T.warn("trace index (",A[g],") is not a number or is out of bounds");return _}return A},H.manageArrayContainers=function(u,A,_){var g=u.obj,b=u.parts,v=b.length,C=b[v-1],S=w(C);if(S&&A===null){var k=b.slice(0,v-1).join("."),E=T.nestedProperty(g,k).get();E.splice(C,1)}else S&&u.get()===void 0&&u.get()===void 0&&(_[u.astr]=null),u.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(u){var A=u.search(m);if(A>0)return u.substr(0,A)}H.hasParent=function(u,A){for(var _=l(A);_;){if(_ in u)return!0;_=l(_)}return!1};var x=["x","y","z"];H.clearAxisTypes=function(u,A,_){for(var g=0;g<A.length;g++)for(var b=u._fullData[g],v=0;v<3;v++){var C=t(u,b,x[v]);if(C&&C.type!=="log"){var S=C._name,k=C._id.substr(1);if(k.substr(0,5)==="scene"){if(_[k]!==void 0)continue;S=k+"."+S}var E=S+".type";_[S]===void 0&&_[E]===void 0&&T.nestedProperty(u.layout,E).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(o,U,H){var w=o("./plot_api");H._doPlot=w._doPlot,H.newPlot=w.newPlot,H.restyle=w.restyle,H.relayout=w.relayout,H.redraw=w.redraw,H.update=w.update,H._guiRestyle=w._guiRestyle,H._guiRelayout=w._guiRelayout,H._guiUpdate=w._guiUpdate,H._storeDirectGUIEdit=w._storeDirectGUIEdit,H.react=w.react,H.extendTraces=w.extendTraces,H.prependTraces=w.prependTraces,H.addTraces=w.addTraces,H.deleteTraces=w.deleteTraces,H.moveTraces=w.moveTraces,H.purge=w.purge,H.addFrames=w.addFrames,H.deleteFrames=w.deleteFrames,H.animate=w.animate,H.setPlotConfig=w.setPlotConfig,H.toImage=o("./to_image"),H.validate=o("./validate"),H.downloadImage=o("../snapshot/download");var f=o("./template_api");H.makeTemplate=f.makeTemplate,H.validateTemplate=f.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(o,U,H){var w=o("../lib/is_plain_object"),f=o("../lib/noop"),M=o("../lib/loggers"),T=o("../lib/search").sorterAsc,e=o("../registry");H.containerArrayMatch=o("./container_array_match");var a=H.isAddVal=function(t){return t==="add"||w(t)},n=H.isRemoveVal=function(t){return t===null||t==="remove"};H.applyContainerArrayChanges=function(t,h,i,s,y){var d=h.astr,p=e.getComponentMethod(d,"supplyLayoutDefaults"),c=e.getComponentMethod(d,"draw"),m=e.getComponentMethod(d,"drawOne"),l=s.replot||s.recalc||p===f||c===f,x=t.layout,u=t._fullLayout;if(i[""]){Object.keys(i).length>1&&M.warn("Full array edits are incompatible with other edits",d);var A=i[""][""];if(n(A))h.set(null);else if(Array.isArray(A))h.set(A);else return M.warn("Unrecognized full array edit value",d,A),!0;return l?!1:(p(x,u),c(t),!0)}var _=Object.keys(i).map(Number).sort(T),g=h.get(),b=g||[],v=y(u,d).get(),C=[],S=-1,k=b.length,E,F,I,D,R,O,z,B;for(E=0;E<_.length;E++){if(I=_[E],D=i[I],R=Object.keys(D),O=D[""],z=a(O),I<0||I>b.length-(z?0:1)){M.warn("index out of range",d,I);continue}if(O!==void 0)R.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",d,I),n(O)?C.push(I):z?(O==="add"&&(O={}),b.splice(I,0,O),v&&v.splice(I,0,{})):M.warn("Unrecognized full object edit value",d,I,O),S===-1&&(S=I);else for(F=0;F<R.length;F++)B=d+"["+I+"].",y(b[I],R[F],B).set(D[R[F]])}for(E=C.length-1;E>=0;E--)b.splice(C[E],1),v&&v.splice(C[E],1);if(b.length?g||h.set(b):h.set(null),l)return!1;if(p(x,u),m!==f){var G;if(S===-1)G=_;else{for(k=Math.max(b.length,k),G=[],E=0;E<_.length&&(I=_[E],!(I>=S));E++)G.push(I);for(E=S;E<k;E++)G.push(E)}for(E=0;E<G.length;E++)m(t,G[E])}else c(t);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("has-hover"),T=o("../lib"),e=T.nestedProperty,a=o("../lib/events"),n=o("../lib/queue"),r=o("../registry"),t=o("./plot_schema"),h=o("../plots/plots"),i=o("../plots/cartesian/axes"),s=o("../components/drawing"),y=o("../components/color"),d=o("../plots/cartesian/graph_interact").initInteractions,p=o("../constants/xmlns_namespaces"),c=o("../components/selections").clearOutline,m=o("./plot_config").dfltConfig,l=o("./manage_arrays"),x=o("./helpers"),u=o("./subroutines"),A=o("./edit_types"),_=o("../plots/cartesian/constants").AX_NAME_PATTERN,g=0,b=5;function v(Ae,He,Je,tt){var St;if(Ae=T.getGraphDiv(Ae),a.init(Ae),T.isPlainObject(He)){var _t=He;He=_t.data,Je=_t.layout,tt=_t.config,St=_t.frames}var kt=a.triggerHandler(Ae,"plotly_beforeplot",[He,Je,tt]);if(kt===!1)return Promise.reject();!He&&!Je&&!T.isPlotDiv(Ae)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ae);function jt(){if(St)return H.addFrames(Ae,St)}F(Ae,tt),Je||(Je={}),w.select(Ae).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(Ae._promises)||(Ae._promises=[]);var Bt=(Ae.data||[]).length===0&&Array.isArray(He);Array.isArray(He)&&(x.cleanData(He),Bt?Ae.data=He:Ae.data.push.apply(Ae.data,He),Ae.empty=!1),(!Ae.layout||Bt)&&(Ae.layout=x.cleanLayout(Je)),h.supplyDefaults(Ae);var Wt=Ae._fullLayout,Qt=Wt._has("cartesian");Wt._replotting=!0,(Bt||Wt._shouldCreateBgLayer)&&(Ve(Ae),Wt._shouldCreateBgLayer&&delete Wt._shouldCreateBgLayer),s.initGradients(Ae),s.initPatterns(Ae),Bt&&i.saveShowSpikeInitial(Ae);var Zt=!Ae.calcdata||Ae.calcdata.length!==(Ae._fullData||[]).length;Zt&&h.doCalcdata(Ae);for(var cr=0;cr<Ae.calcdata.length;cr++)Ae.calcdata[cr][0].trace=Ae._fullData[cr];Ae._context.responsive?Ae._responsiveChartHandler||(Ae._responsiveChartHandler=function(){T.isHidden(Ae)||h.resize(Ae)},window.addEventListener("resize",Ae._responsiveChartHandler)):T.clearResponsive(Ae);var Xr=T.extendFlat({},Wt._size),vn=0;function en(){for(var pt=Wt._basePlotModules,Ct=0;Ct<pt.length;Ct++)pt[Ct].drawFramework&&pt[Ct].drawFramework(Ae);!Wt._glcanvas&&Wt._has("gl")&&(Wt._glcanvas=Wt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(lt){return lt.key}),Wt._glcanvas.enter().append("canvas").attr("class",function(lt){return"gl-canvas gl-canvas-"+lt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ht=Ae._context.plotGlPixelRatio;if(Wt._glcanvas){Wt._glcanvas.attr("width",Wt.width*Ht).attr("height",Wt.height*Ht).style("width",Wt.width+"px").style("height",Wt.height+"px");var Pe=Wt._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Wt.width*Ht)!==Pe._gl.drawingBufferWidth||Math.floor(Wt.height*Ht)!==Pe._gl.drawingBufferHeight)){var ke="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(vn)T.error(ke);else return T.log(ke+" Clearing graph and plotting again."),h.cleanPlot([],{},Ae._fullData,Wt),h.supplyDefaults(Ae),Wt=Ae._fullLayout,h.doCalcdata(Ae),vn++,en()}}return Wt.modebar.orientation==="h"?Wt._modebardiv.style("height",null).style("width","100%"):Wt._modebardiv.style("width",null).style("height",Wt.height+"px"),h.previousPromises(Ae)}function ft(){if(h.clearAutoMarginIds(Ae),u.drawMarginPushers(Ae),i.allowAutoMargin(Ae),Wt._has("pie"))for(var pt=Ae._fullData,Ct=0;Ct<pt.length;Ct++){var Ht=pt[Ct];Ht.type==="pie"&&Ht.automargin&&h.allowAutoMargin(Ae,"pie."+Ht.uid+".automargin")}return h.doAutoMargin(Ae),h.previousPromises(Ae)}function ar(){if(!!h.didMarginChange(Xr,Wt._size))return T.syncOrAsync([ft,u.layoutStyles],Ae)}function rr(){if(!Zt){Kt();return}return T.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),Kt],Ae)}function Kt(){Ae._transitioning||(u.doAutoRangeAndConstraints(Ae),Bt&&i.saveRangeInitial(Ae),r.getComponentMethod("rangeslider","calcAutorange")(Ae))}function Er(){return i.draw(Ae,Bt?"":"redraw")}var st=[h.previousPromises,jt,en,ft,ar];Qt&&st.push(rr),st.push(u.layoutStyles),Qt&&st.push(Er,function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&ae(Ct,Ct._fullLayout._insideTickLabelsAutorange).then(function(){Ct._fullLayout._insideTickLabelsAutorange=void 0})}),st.push(u.drawData,u.finalDraw,d,h.addLinks,h.rehover,h.redrag,h.reselect,h.doAutoMargin,et,h.previousPromises);function et(pt){pt._fullLayout._insideTickLabelsAutorange&&Bt&&i.saveRangeInitial(pt,!0)}var vt=T.syncOrAsync(st,Ae);return(!vt||!vt.then)&&(vt=Promise.resolve()),vt.then(function(){return C(Ae),Ae})}function C(Ae){var He=Ae._fullLayout;He._redrawFromAutoMarginCount?He._redrawFromAutoMarginCount--:Ae.emit("plotly_afterplot")}function S(Ae){return T.extendFlat(m,Ae)}function k(Ae,He){try{Ae._fullLayout._paper.style("background",He)}catch(Je){T.error(Je)}}function E(Ae,He){var Je=y.combine(He,"white");k(Ae,Je)}function F(Ae,He){if(!Ae._context){Ae._context=T.extendDeep({},m);var Je=w.select("base");Ae._context._baseUrl=Je.size()&&Je.attr("href")?window.location.href.split("#")[0]:""}var tt=Ae._context,St,_t,kt;if(He){for(_t=Object.keys(He),St=0;St<_t.length;St++)kt=_t[St],!(kt==="editable"||kt==="edits")&&kt in tt&&(kt==="setBackground"&&He[kt]==="opaque"?tt[kt]=E:tt[kt]=He[kt]);He.plot3dPixelRatio&&!tt.plotGlPixelRatio&&(tt.plotGlPixelRatio=tt.plot3dPixelRatio);var jt=He.editable;if(jt!==void 0)for(tt.editable=jt,_t=Object.keys(tt.edits),St=0;St<_t.length;St++)tt.edits[_t[St]]=jt;if(He.edits)for(_t=Object.keys(He.edits),St=0;St<_t.length;St++)kt=_t[St],kt in tt.edits&&(tt.edits[kt]=He.edits[kt]);tt._exportedPlot=He._exportedPlot}tt.staticPlot&&(tt.editable=!1,tt.edits={},tt.autosizable=!1,tt.scrollZoom=!1,tt.doubleClick=!1,tt.showTips=!1,tt.showLink=!1,tt.displayModeBar=!1),tt.displayModeBar==="hover"&&!M&&(tt.displayModeBar=!0),(tt.setBackground==="transparent"||typeof tt.setBackground!="function")&&(tt.setBackground=k),tt._hasZeroHeight=tt._hasZeroHeight||Ae.clientHeight===0,tt._hasZeroWidth=tt._hasZeroWidth||Ae.clientWidth===0;var Bt=tt.scrollZoom,Wt=tt._scrollZoom={};if(Bt===!0)Wt.cartesian=1,Wt.gl3d=1,Wt.geo=1,Wt.mapbox=1;else if(typeof Bt=="string"){var Qt=Bt.split("+");for(St=0;St<Qt.length;St++)Wt[Qt[St]]=1}else Bt!==!1&&(Wt.gl3d=1,Wt.geo=1,Wt.mapbox=1)}function I(Ae){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae);return x.cleanData(Ae.data),x.cleanLayout(Ae.layout),Ae.calcdata=void 0,H._doPlot(Ae).then(function(){return Ae.emit("plotly_redraw"),Ae})}function D(Ae,He,Je,tt){return Ae=T.getGraphDiv(Ae),h.cleanPlot([],{},Ae._fullData||[],Ae._fullLayout||{}),h.purge(Ae),H._doPlot(Ae,He,Je,tt)}function R(Ae,He){var Je=He+1,tt=[],St,_t;for(St=0;St<Ae.length;St++)_t=Ae[St],_t<0?tt.push(Je+_t):tt.push(_t);return tt}function O(Ae,He,Je){var tt,St;for(tt=0;tt<He.length;tt++){if(St=He[tt],St!==parseInt(St,10))throw new Error("all values in "+Je+" must be integers");if(St>=Ae.data.length||St<-Ae.data.length)throw new Error(Je+" must be valid indices for gd.data.");if(He.indexOf(St,tt+1)>-1||St>=0&&He.indexOf(-Ae.data.length+St)>-1||St<0&&He.indexOf(Ae.data.length+St)>-1)throw new Error("each index in "+Je+" must be unique.")}}function z(Ae,He,Je){if(!Array.isArray(Ae.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(He)||(He=[He]),O(Ae,He,"currentIndices"),typeof Je<"u"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je<"u"&&O(Ae,Je,"newIndices"),typeof Je<"u"&&He.length!==Je.length)throw new Error("current and new indices must be of equal length.")}function B(Ae,He,Je){var tt,St;if(!Array.isArray(Ae.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),tt=0;tt<He.length;tt++)if(St=He[tt],typeof St!="object"||Array.isArray(St)||St===null)throw new Error("all values in traces array must be non-array objects");if(typeof Je<"u"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je<"u"&&Je.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function G(Ae,He,Je,tt){var St=T.isPlainObject(tt);if(!Array.isArray(Ae.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(typeof Je>"u")throw new Error("indices must be an integer or array of integers");O(Ae,Je,"indices");for(var _t in He){if(!Array.isArray(He[_t])||He[_t].length!==Je.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(St&&(!(_t in tt)||!Array.isArray(tt[_t])||tt[_t].length!==He[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function Q(Ae,He,Je,tt){var St=T.isPlainObject(tt),_t=[],kt,jt,Bt,Wt,Qt;Array.isArray(Je)||(Je=[Je]),Je=R(Je,Ae.data.length-1);for(var Zt in He)for(var cr=0;cr<Je.length;cr++){if(kt=Ae.data[Je[cr]],Bt=e(kt,Zt),jt=Bt.get(),Wt=He[Zt][cr],!T.isArrayOrTypedArray(Wt))throw new Error("attribute: "+Zt+" index: "+cr+" must be an array");if(!T.isArrayOrTypedArray(jt))throw new Error("cannot extend missing or non-array attribute: "+Zt);if(jt.constructor!==Wt.constructor)throw new Error("cannot extend array with an array of a different type: "+Zt);Qt=St?tt[Zt][cr]:tt,f(Qt)||(Qt=-1),_t.push({prop:Bt,target:jt,insert:Wt,maxp:Math.floor(Qt)})}return _t}function X(Ae,He,Je,tt,St){G(Ae,He,Je,tt);for(var _t=Q(Ae,He,Je,tt),kt={},jt={},Bt=0;Bt<_t.length;Bt++){var Wt=_t[Bt].prop,Qt=_t[Bt].maxp,Zt=St(_t[Bt].target,_t[Bt].insert,Qt);Wt.set(Zt[0]),Array.isArray(kt[Wt.astr])||(kt[Wt.astr]=[]),kt[Wt.astr].push(Zt[1]),Array.isArray(jt[Wt.astr])||(jt[Wt.astr]=[]),jt[Wt.astr].push(_t[Bt].target.length)}return{update:kt,maxPoints:jt}}function j(Ae,He){var Je=new Ae.constructor(Ae.length+He.length);return Je.set(Ae),Je.set(He,Ae.length),Je}function re(Ae,He,Je,tt){Ae=T.getGraphDiv(Ae);function St(Bt,Wt,Qt){var Zt,cr;if(T.isTypedArray(Bt))if(Qt<0){var Xr=new Bt.constructor(0),vn=j(Bt,Wt);Qt<0?(Zt=vn,cr=Xr):(Zt=Xr,cr=vn)}else if(Zt=new Bt.constructor(Qt),cr=new Bt.constructor(Bt.length+Wt.length-Qt),Qt===Wt.length)Zt.set(Wt),cr.set(Bt);else if(Qt<Wt.length){var en=Wt.length-Qt;Zt.set(Wt.subarray(en)),cr.set(Bt),cr.set(Wt.subarray(0,en),Bt.length)}else{var ft=Qt-Wt.length,ar=Bt.length-ft;Zt.set(Bt.subarray(ar)),Zt.set(Wt,ft),cr.set(Bt.subarray(0,ar))}else Zt=Bt.concat(Wt),cr=Qt>=0&&Qt<Zt.length?Zt.splice(0,Zt.length-Qt):[];return[Zt,cr]}var _t=X(Ae,He,Je,tt,St),kt=H.redraw(Ae),jt=[Ae,_t.update,Je,_t.maxPoints];return n.add(Ae,H.prependTraces,jt,re,arguments),kt}function ue(Ae,He,Je,tt){Ae=T.getGraphDiv(Ae);function St(Bt,Wt,Qt){var Zt,cr;if(T.isTypedArray(Bt))if(Qt<=0){var Xr=new Bt.constructor(0),vn=j(Wt,Bt);Qt<0?(Zt=vn,cr=Xr):(Zt=Xr,cr=vn)}else if(Zt=new Bt.constructor(Qt),cr=new Bt.constructor(Bt.length+Wt.length-Qt),Qt===Wt.length)Zt.set(Wt),cr.set(Bt);else if(Qt<Wt.length){var en=Wt.length-Qt;Zt.set(Wt.subarray(0,en)),cr.set(Wt.subarray(en)),cr.set(Bt,en)}else{var ft=Qt-Wt.length;Zt.set(Wt),Zt.set(Bt.subarray(0,ft),Wt.length),cr.set(Bt.subarray(ft))}else Zt=Wt.concat(Bt),cr=Qt>=0&&Qt<Zt.length?Zt.splice(Qt,Zt.length):[];return[Zt,cr]}var _t=X(Ae,He,Je,tt,St),kt=H.redraw(Ae),jt=[Ae,_t.update,Je,_t.maxPoints];return n.add(Ae,H.extendTraces,jt,ue,arguments),kt}function K(Ae,He,Je){Ae=T.getGraphDiv(Ae);var tt=[],St=H.deleteTraces,_t=K,kt=[Ae,tt],jt=[Ae,He],Bt,Wt;for(B(Ae,He,Je),Array.isArray(He)||(He=[He]),He=He.map(function(Qt){return T.extendFlat({},Qt)}),x.cleanData(He),Bt=0;Bt<He.length;Bt++)Ae.data.push(He[Bt]);for(Bt=0;Bt<He.length;Bt++)tt.push(-He.length+Bt);if(typeof Je>"u")return Wt=H.redraw(Ae),n.add(Ae,St,kt,_t,jt),Wt;Array.isArray(Je)||(Je=[Je]);try{z(Ae,tt,Je)}catch(Qt){throw Ae.data.splice(Ae.data.length-He.length,He.length),Qt}return n.startSequence(Ae),n.add(Ae,St,kt,_t,jt),Wt=H.moveTraces(Ae,tt,Je),n.stopSequence(Ae),Wt}function te(Ae,He){Ae=T.getGraphDiv(Ae);var Je=[],tt=H.addTraces,St=te,_t=[Ae,Je,He],kt=[Ae,He],jt,Bt;if(typeof He>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(He)||(He=[He]),O(Ae,He,"indices"),He=R(He,Ae.data.length-1),He.sort(T.sorterDes),jt=0;jt<He.length;jt+=1)Bt=Ae.data.splice(He[jt],1)[0],Je.push(Bt);var Wt=H.redraw(Ae);return n.add(Ae,tt,_t,St,kt),Wt}function Y(Ae,He,Je){Ae=T.getGraphDiv(Ae);var tt=[],St=[],_t=Y,kt=Y,jt=[Ae,Je,He],Bt=[Ae,He,Je],Wt;if(z(Ae,He,Je),He=Array.isArray(He)?He:[He],typeof Je>"u")for(Je=[],Wt=0;Wt<He.length;Wt++)Je.push(-He.length+Wt);for(Je=Array.isArray(Je)?Je:[Je],He=R(He,Ae.data.length-1),Je=R(Je,Ae.data.length-1),Wt=0;Wt<Ae.data.length;Wt++)He.indexOf(Wt)===-1&&tt.push(Ae.data[Wt]);for(Wt=0;Wt<He.length;Wt++)St.push({newIndex:Je[Wt],trace:Ae.data[He[Wt]]});for(St.sort(function(Zt,cr){return Zt.newIndex-cr.newIndex}),Wt=0;Wt<St.length;Wt+=1)tt.splice(St[Wt].newIndex,0,St[Wt].trace);Ae.data=tt;var Qt=H.redraw(Ae);return n.add(Ae,_t,jt,kt,Bt),Qt}function V(Ae,He,Je,tt){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var St={};if(typeof He=="string")St[He]=Je;else if(T.isPlainObject(He))St=T.extendFlat({},He),tt===void 0&&(tt=Je);else return T.warn("Restyle fail.",He,Je,tt),Promise.reject();Object.keys(St).length&&(Ae.changed=!0);var _t=x.coerceTraceIndices(Ae,tt),kt=ie(Ae,St,_t),jt=kt.flags;jt.calc&&(Ae.calcdata=void 0),jt.clearAxisTypes&&x.clearAxisTypes(Ae,_t,{});var Bt=[];jt.fullReplot?Bt.push(H._doPlot):(Bt.push(h.previousPromises),h.supplyDefaults(Ae),jt.markerSize&&(h.doCalcdata(Ae),be(Bt)),jt.style&&Bt.push(u.doTraceStyle),jt.colorbars&&Bt.push(u.doColorBars),Bt.push(C)),Bt.push(h.rehover,h.redrag,h.reselect),n.add(Ae,V,[Ae,kt.undoit,kt.traces],V,[Ae,kt.redoit,kt.traces]);var Wt=T.syncOrAsync(Bt,Ae);return(!Wt||!Wt.then)&&(Wt=Promise.resolve()),Wt.then(function(){return Ae.emit("plotly_restyle",kt.eventData),Ae})}function ee(Ae){return Ae===void 0?null:Ae}function ne(Ae,He){return He?function(Je,tt,St){var _t=e(Je,tt),kt=_t.set;return _t.set=function(jt){var Bt=(St||"")+tt;Z(Bt,_t.get(),jt,Ae),kt(jt)},_t}:e}function Z(Ae,He,Je,tt){if(Array.isArray(He)||Array.isArray(Je))for(var St=Array.isArray(He)?He:[],_t=Array.isArray(Je)?Je:[],kt=Math.max(St.length,_t.length),jt=0;jt<kt;jt++)Z(Ae+"["+jt+"]",St[jt],_t[jt],tt);else if(T.isPlainObject(He)||T.isPlainObject(Je)){var Bt=T.isPlainObject(He)?He:{},Wt=T.isPlainObject(Je)?Je:{},Qt=T.extendFlat({},Bt,Wt);for(var Zt in Qt)Z(Ae+"."+Zt,Bt[Zt],Wt[Zt],tt)}else tt[Ae]===void 0&&(tt[Ae]=ee(He))}function q(Ae,He,Je){for(var tt in Je){var St=e(Ae,tt);Z(tt,St.get(),Je[tt],He)}}function ie(Ae,He,Je){var tt=Ae._fullLayout,St=Ae._fullData,_t=Ae.data,kt=tt._guiEditing,jt=ne(tt._preGUI,kt),Bt=T.extendDeepAll({},He),Wt;se(He);var Qt=A.traceFlags(),Zt={},cr={},Xr;function vn(){return Je.map(function(){})}function en(qt){var hr=i.id2name(qt);Xr.indexOf(hr)===-1&&Xr.push(hr)}function ft(qt){return"LAYOUT"+qt+".autorange"}function ar(qt){return"LAYOUT"+qt+".range"}function rr(qt){for(var hr=qt;hr<St.length;hr++)if(St[hr]._input===_t[qt])return St[hr]}function Kt(qt,hr,Ur){if(Array.isArray(qt)){qt.forEach(function(Kr){Kt(Kr,hr,Ur)});return}if(!(qt in He||x.hasParent(He,qt))){var Gr;if(qt.substr(0,6)==="LAYOUT")Gr=jt(Ae.layout,qt.replace("LAYOUT",""));else{var Ir=Je[Ur],kr=tt._tracePreGUI[rr(Ir)._fullInput.uid];Gr=ne(kr,kt)(_t[Ir],qt)}qt in cr||(cr[qt]=vn()),cr[qt][Ur]===void 0&&(cr[qt][Ur]=ee(Gr.get())),hr!==void 0&&Gr.set(hr)}}function Er(qt){return function(hr){return St[hr][qt]}}function st(qt){return function(hr,Ur){return hr===!1?St[Je[Ur]][qt]:null}}for(var et in He){if(x.hasParent(He,et))throw new Error("cannot set "+et+" and a parent attribute simultaneously");var vt=He[et],pt,Ct,Ht,Pe,ke,lt;if((et==="autobinx"||et==="autobiny")&&(et=et.charAt(et.length-1)+"bins",Array.isArray(vt)?vt=vt.map(st(et)):vt===!1?vt=Je.map(Er(et)):vt=null),Zt[et]=vt,et.substr(0,6)==="LAYOUT"){Ht=jt(Ae.layout,et.replace("LAYOUT","")),cr[et]=[ee(Ht.get())],Ht.set(Array.isArray(vt)?vt[0]:vt),Qt.calc=!0;continue}for(cr[et]=vn(),Wt=0;Wt<Je.length;Wt++){pt=_t[Je[Wt]],Ct=rr(Je[Wt]);var ct=tt._tracePreGUI[Ct._fullInput.uid];if(Ht=ne(ct,kt)(pt,et),Pe=Ht.get(),ke=Array.isArray(vt)?vt[Wt%vt.length]:vt,ke!==void 0){var yt=Ht.parts[Ht.parts.length-1],Rt=et.substr(0,et.length-yt.length-1),wt=Rt?Rt+".":"",Dt=Rt?e(Ct,Rt).get():Ct;if(lt=t.getTraceValObject(Ct,Ht.parts),lt&&lt.impliedEdits&&ke!==null)for(var Jt in lt.impliedEdits)Kt(T.relativeAttr(et,Jt),lt.impliedEdits[Jt],Wt);else if((yt==="thicknessmode"||yt==="lenmode")&&Pe!==ke&&(ke==="fraction"||ke==="pixels")&&Dt){var fr=tt._size,Rr=Dt.orient,Sr=Rr==="top"||Rr==="bottom";if(yt==="thicknessmode"){var Pr=Sr?fr.h:fr.w;Kt(wt+"thickness",Dt.thickness*(ke==="fraction"?1/Pr:Pr),Wt)}else{var Jr=Sr?fr.w:fr.h;Kt(wt+"len",Dt.len*(ke==="fraction"?1/Jr:Jr),Wt)}}else if(et==="type"&&(ke==="pie"!=(Pe==="pie")||ke==="funnelarea"!=(Pe==="funnelarea"))){var ur="x",wr="y";(ke==="bar"||Pe==="bar")&&pt.orientation==="h"&&(ur="y",wr="x"),T.swapAttrs(pt,["?","?src"],"labels",ur),T.swapAttrs(pt,["d?","?0"],"label",ur),T.swapAttrs(pt,["?","?src"],"values",wr),Pe==="pie"||Pe==="funnelarea"?(e(pt,"marker.color").set(e(pt,"marker.colors").get()),tt._pielayer.selectAll("g.trace").remove()):r.traceIs(pt,"cartesian")&&e(pt,"marker.colors").set(e(pt,"marker.color").get())}cr[et][Wt]=ee(Pe);var Br=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Br.indexOf(et)!==-1){if(et==="orientation"){Ht.set(ke);var Yr=pt.x&&!pt.y?"h":"v";if((Ht.get()||Yr)===Ct.orientation)continue}else et==="orientationaxes"&&(pt.orientation={v:"h",h:"v"}[Ct.orientation]);x.swapXYData(pt),Qt.calc=Qt.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Ht.parts[0])!==-1?(x.manageArrayContainers(Ht,ke,cr),Qt.calc=!0):(lt?lt.arrayOk&&!r.traceIs(Ct,"regl")&&(T.isArrayOrTypedArray(ke)||T.isArrayOrTypedArray(Pe))?Qt.calc=!0:A.update(Qt,lt):Qt.calc=!0,Ht.set(ke))}}if(["swapxyaxes","orientationaxes"].indexOf(et)!==-1&&i.swap(Ae,Je),et==="orientationaxes"){var Dr=e(Ae.layout,"hovermode"),at=Dr.get();at==="x"?Dr.set("y"):at==="y"?Dr.set("x"):at==="x unified"?Dr.set("y unified"):at==="y unified"&&Dr.set("x unified")}if(["orientation","type"].indexOf(et)!==-1){for(Xr=[],Wt=0;Wt<Je.length;Wt++){var zt=_t[Je[Wt]];r.traceIs(zt,"cartesian")&&(en(zt.xaxis||"x"),en(zt.yaxis||"y"))}Kt(Xr.map(ft),!0,0),Kt(Xr.map(ar),[0,1],0)}}return(Qt.calc||Qt.plot)&&(Qt.fullReplot=!0),{flags:Qt,undoit:cr,redoit:Zt,traces:Je,eventData:T.extendDeepNoArrays([],[Bt,Je])}}function se(Ae){var He=T.counterRegex("axis",".title",!1,!1),Je=/colorbar\.title$/,tt=Object.keys(Ae),St,_t,kt;for(St=0;St<tt.length;St++)_t=tt[St],kt=Ae[_t],(_t==="title"||He.test(_t)||Je.test(_t))&&(typeof kt=="string"||typeof kt=="number")?jt(_t,_t.replace("title","title.text")):_t.indexOf("titlefont")>-1&&_t.indexOf("grouptitlefont")===-1?jt(_t,_t.replace("titlefont","title.font")):_t.indexOf("titleposition")>-1?jt(_t,_t.replace("titleposition","title.position")):_t.indexOf("titleside")>-1?jt(_t,_t.replace("titleside","title.side")):_t.indexOf("titleoffset")>-1&&jt(_t,_t.replace("titleoffset","title.offset"));function jt(Bt,Wt){Ae[Wt]=Ae[Bt],delete Ae[Bt]}}function ae(Ae,He,Je){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var tt={};if(typeof He=="string")tt[He]=Je;else if(T.isPlainObject(He))tt=T.extendFlat({},He);else return T.warn("Relayout fail.",He,Je),Promise.reject();Object.keys(tt).length&&(Ae.changed=!0);var St=ge(Ae,tt),_t=St.flags;_t.calc&&(Ae.calcdata=void 0);var kt=[h.previousPromises];_t.layoutReplot?kt.push(u.layoutReplot):Object.keys(tt).length&&(oe(Ae,_t,St)||h.supplyDefaults(Ae),_t.legend&&kt.push(u.doLegend),_t.layoutstyle&&kt.push(u.layoutStyles),_t.axrange&&be(kt,St.rangesAltered),_t.ticks&&kt.push(u.doTicksRelayout),_t.modebar&&kt.push(u.doModeBar),_t.camera&&kt.push(u.doCamera),_t.colorbars&&kt.push(u.doColorBars),kt.push(C)),kt.push(h.rehover,h.redrag,h.reselect),n.add(Ae,ae,[Ae,St.undoit],ae,[Ae,St.redoit]);var jt=T.syncOrAsync(kt,Ae);return(!jt||!jt.then)&&(jt=Promise.resolve(Ae)),jt.then(function(){return Ae.emit("plotly_relayout",St.eventData),Ae})}function oe(Ae,He,Je){var tt=Ae._fullLayout;if(!He.axrange)return!1;for(var St in He)if(St!=="axrange"&&He[St])return!1;for(var _t in Je.rangesAltered){var kt=i.id2name(_t),jt=Ae.layout[kt],Bt=tt[kt];if(Bt.autorange=jt.autorange,jt.range&&(Bt.range=jt.range.slice()),Bt.cleanRange(),Bt._matchGroup){for(var Wt in Bt._matchGroup)if(Wt!==_t){var Qt=tt[i.id2name(Wt)];Qt.autorange=Bt.autorange,Qt.range=Bt.range.slice(),Qt._input.range=Bt.range.slice()}}}return!0}function be(Ae,He){var Je=He?function(tt){var St=[],_t=!0;for(var kt in He){var jt=i.getFromId(tt,kt);if(St.push(kt),(jt.ticklabelposition||"").indexOf("inside")!==-1&&jt._anchorAxis&&St.push(jt._anchorAxis._id),jt._matchGroup)for(var Bt in jt._matchGroup)He[Bt]||St.push(Bt)}return i.draw(tt,St,{skipTitle:_t})}:function(tt){return i.draw(tt,"redraw")};Ae.push(c,u.doAutoRangeAndConstraints,Je,u.drawData,u.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,de=/^[xyz]axis[0-9]*\.autorange$/,ye=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ge(Ae,He){var Je=Ae.layout,tt=Ae._fullLayout,St=tt._guiEditing,_t=ne(tt._preGUI,St),kt=Object.keys(He),jt=i.list(Ae),Bt=T.extendDeepAll({},He),Wt={},Qt,Zt,cr;for(se(He),kt=Object.keys(He),Zt=0;Zt<kt.length;Zt++)if(kt[Zt].indexOf("allaxes")===0){for(cr=0;cr<jt.length;cr++){var Xr=jt[cr]._id.substr(1),vn=Xr.indexOf("scene")!==-1?Xr+".":"",en=kt[Zt].replace("allaxes",vn+jt[cr]._name);He[en]||(He[en]=He[kt[Zt]])}delete He[kt[Zt]]}var ft=A.layoutFlags(),ar={},rr={};function Kt(Ir,kr){if(Array.isArray(Ir)){Ir.forEach(function(kn){Kt(kn,kr)});return}if(!(Ir in He||x.hasParent(He,Ir))){var Kr=_t(Je,Ir);Ir in rr||(rr[Ir]=ee(Kr.get())),kr!==void 0&&Kr.set(kr)}}var Er={},st;function et(Ir){var kr=i.name2id(Ir.split(".")[0]);return Er[kr]=1,kr}for(var vt in He){if(x.hasParent(He,vt))throw new Error("cannot set "+vt+" and a parent attribute simultaneously");for(var pt=_t(Je,vt),Ct=He[vt],Ht=pt.parts.length,Pe=Ht-1;Pe>0&&typeof pt.parts[Pe]!="string";)Pe--;var ke=pt.parts[Pe],lt=pt.parts[Pe-1]+"."+ke,ct=pt.parts.slice(0,Pe).join("."),yt=e(Ae.layout,ct).get(),Rt=e(tt,ct).get(),wt=pt.get();if(Ct!==void 0){ar[vt]=Ct,rr[vt]=ke==="reverse"?Ct:ee(wt);var Dt=t.getLayoutValObject(tt,pt.parts);if(Dt&&Dt.impliedEdits&&Ct!==null)for(var Jt in Dt.impliedEdits)Kt(T.relativeAttr(vt,Jt),Dt.impliedEdits[Jt]);if(["width","height"].indexOf(vt)!==-1)if(Ct){Kt("autosize",null);var fr=vt==="height"?"width":"height";Kt(fr,tt[fr])}else tt[vt]=Ae._initialAutoSize[vt];else if(vt==="autosize")Kt("width",Ct?null:tt.width),Kt("height",Ct?null:tt.height);else if(lt.match(ce))et(lt),e(tt,ct+"._inputRange").set(null);else if(lt.match(de)){et(lt),e(tt,ct+"._inputRange").set(null);var Rr=e(tt,ct).get();Rr._inputDomain&&(Rr._input.domain=Rr._inputDomain.slice())}else lt.match(ye)&&e(tt,ct+"._inputDomain").set(null);if(ke==="type"){st=yt;var Sr=Rt.type==="linear"&&Ct==="log",Pr=Rt.type==="log"&&Ct==="linear";if(Sr||Pr){if(!st||!st.range)Kt(ct+".autorange",!0);else if(Rt.autorange)Sr&&(st.range=st.range[1]>st.range[0]?[1,2]:[2,1]);else{var Jr=st.range[0],ur=st.range[1];Sr?(Jr<=0&&ur<=0&&Kt(ct+".autorange",!0),Jr<=0?Jr=ur/1e6:ur<=0&&(ur=Jr/1e6),Kt(ct+".range[0]",Math.log(Jr)/Math.LN10),Kt(ct+".range[1]",Math.log(ur)/Math.LN10)):(Kt(ct+".range[0]",Math.pow(10,Jr)),Kt(ct+".range[1]",Math.pow(10,ur)))}Array.isArray(tt._subplots.polar)&&tt._subplots.polar.length&&tt[pt.parts[0]]&&pt.parts[1]==="radialaxis"&&delete tt[pt.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(Ae,Rt,Ct,Kt),r.getComponentMethod("images","convertCoords")(Ae,Rt,Ct,Kt)}else Kt(ct+".autorange",!0),Kt(ct+".range",null);e(tt,ct+"._inputRange").set(null)}else if(ke.match(_)){var wr=e(tt,vt).get(),Br=(Ct||{}).type;(!Br||Br==="-")&&(Br="linear"),r.getComponentMethod("annotations","convertCoords")(Ae,wr,Br,Kt),r.getComponentMethod("images","convertCoords")(Ae,wr,Br,Kt)}var Yr=l.containerArrayMatch(vt);if(Yr){Qt=Yr.array,Zt=Yr.index;var Dr=Yr.property,at=Dt||{editType:"calc"};Zt!==""&&Dr===""&&(l.isAddVal(Ct)?rr[vt]=null:l.isRemoveVal(Ct)?rr[vt]=(e(Je,Qt).get()||[])[Zt]:T.warn("unrecognized full object value",He)),A.update(ft,at),Wt[Qt]||(Wt[Qt]={});var zt=Wt[Qt][Zt];zt||(zt=Wt[Qt][Zt]={}),zt[Dr]=Ct,delete He[vt]}else ke==="reverse"?(yt.range?yt.range.reverse():(Kt(ct+".autorange",!0),yt.range=[1,0]),Rt.autorange?ft.calc=!0:ft.plot=!0):(vt==="dragmode"&&(Ct===!1&&wt!==!1||Ct!==!1&&wt===!1)||tt._has("scatter-like")&&tt._has("regl")&&vt==="dragmode"&&(Ct==="lasso"||Ct==="select")&&!(wt==="lasso"||wt==="select")||tt._has("gl2d")?ft.plot=!0:Dt?A.update(ft,Dt):ft.calc=!0,pt.set(Ct))}}for(Qt in Wt){var qt=l.applyContainerArrayChanges(Ae,_t(Je,Qt),Wt[Qt],ft,_t);qt||(ft.plot=!0)}for(var hr in Er){st=i.getFromId(Ae,hr);var Ur=st&&st._constraintGroup;if(Ur){ft.calc=!0;for(var Gr in Ur)Er[Gr]||(i.getFromId(Ae,Gr)._constraintShrinkable=!0)}}return(me(Ae)||He.height||He.width)&&(ft.plot=!0),(ft.plot||ft.calc)&&(ft.layoutReplot=!0),{flags:ft,rangesAltered:Er,undoit:rr,redoit:ar,eventData:Bt}}function me(Ae){var He=Ae._fullLayout,Je=He.width,tt=He.height;return Ae.layout.autosize&&h.plotAutoSize(Ae,Ae.layout,He),He.width!==Je||He.height!==tt}function Me(Ae,He,Je,tt){Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae),T.isPlainObject(He)||(He={}),T.isPlainObject(Je)||(Je={}),Object.keys(He).length&&(Ae.changed=!0),Object.keys(Je).length&&(Ae.changed=!0);var St=x.coerceTraceIndices(Ae,tt),_t=ie(Ae,T.extendFlat({},He),St),kt=_t.flags,jt=ge(Ae,T.extendFlat({},Je)),Bt=jt.flags;(kt.calc||Bt.calc)&&(Ae.calcdata=void 0),kt.clearAxisTypes&&x.clearAxisTypes(Ae,St,Je);var Wt=[];Bt.layoutReplot?Wt.push(u.layoutReplot):kt.fullReplot?Wt.push(H._doPlot):(Wt.push(h.previousPromises),oe(Ae,Bt,jt)||h.supplyDefaults(Ae),kt.style&&Wt.push(u.doTraceStyle),(kt.colorbars||Bt.colorbars)&&Wt.push(u.doColorBars),Bt.legend&&Wt.push(u.doLegend),Bt.layoutstyle&&Wt.push(u.layoutStyles),Bt.axrange&&be(Wt,jt.rangesAltered),Bt.ticks&&Wt.push(u.doTicksRelayout),Bt.modebar&&Wt.push(u.doModeBar),Bt.camera&&Wt.push(u.doCamera),Wt.push(C)),Wt.push(h.rehover,h.redrag,h.reselect),n.add(Ae,Me,[Ae,_t.undoit,jt.undoit,_t.traces],Me,[Ae,_t.redoit,jt.redoit,_t.traces]);var Qt=T.syncOrAsync(Wt,Ae);return(!Qt||!Qt.then)&&(Qt=Promise.resolve(Ae)),Qt.then(function(){return Ae.emit("plotly_update",{data:_t.eventData,layout:jt.eventData}),Ae})}function Le(Ae){return function(Je){Je._fullLayout._guiEditing=!0;var tt=Ae.apply(null,arguments);return Je._fullLayout._guiEditing=!1,tt}}var Oe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ee(Ae,He){for(var Je=0;Je<He.length;Je++){var tt=He[Je],St=Ae.match(tt.pattern);if(St){var _t=St[1]||"";return{head:_t,tail:Ae.substr(_t.length+1),attr:tt.attr}}}}function Ze(Ae,He){var Je=e(He,Ae).get();if(Je!==void 0)return Je;var tt=Ae.split(".");for(tt.pop();tt.length>1;)if(tt.pop(),Je=e(He,tt.join(".")+".uirevision").get(),Je!==void 0)return Je;return He.uirevision}function Ge(Ae,He){for(var Je=0;Je<He.length;Je++)if(He[Je]._fullInput.uid===Ae)return Je;return-1}function Fe(Ae,He,Je){for(var tt=0;tt<He.length;tt++)if(He[tt].uid===Ae)return tt;return!He[Je]||He[Je].uid?-1:Je}function Re(Ae,He){var Je=T.isPlainObject(Ae),tt=Array.isArray(Ae);return Je||tt?(Je&&T.isPlainObject(He)||tt&&Array.isArray(He))&&JSON.stringify(Ae)===JSON.stringify(He):Ae===He}function We(Ae,He,Je,tt){var St=tt._preGUI,_t,kt,jt,Bt,Wt,Qt,Zt,cr,Xr,vn,en=[],ft={},ar={};for(_t in St){if(Wt=Ee(_t,Oe),Wt){if(Xr=Wt.head,vn=Wt.tail,kt=Wt.attr||Xr+".uirevision",jt=e(tt,kt).get(),Bt=jt&&Ze(kt,He),Bt&&Bt===jt){if(Qt=St[_t],Qt===null&&(Qt=void 0),Zt=e(He,_t),cr=Zt.get(),Re(cr,Qt)){cr===void 0&&vn==="autorange"&&en.push(Xr),Zt.set(ee(e(tt,_t).get()));continue}else if(vn==="autorange"||vn.substr(0,6)==="range["){var rr=St[Xr+".range[0]"],Kt=St[Xr+".range[1]"],Er=St[Xr+".autorange"];if(Er||Er===null&&rr===null&&Kt===null){if(!(Xr in ft)){var st=e(He,Xr).get();ft[Xr]=st&&(st.autorange||st.autorange!==!1&&(!st.range||st.range.length!==2))}if(ft[Xr]){Zt.set(ee(e(tt,_t).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+_t);delete St[_t],Wt&&Wt.tail.substr(0,6)==="range["&&(ar[Wt.head]=1)}for(var et=0;et<en.length;et++){var vt=en[et];if(ar[vt]){var pt=e(He,vt).get();pt&&delete pt.autorange}}var Ct=tt._tracePreGUI;for(var Ht in Ct){var Pe=Ct[Ht],ke=null,lt;for(_t in Pe){if(!ke){var ct=Ge(Ht,Je);if(ct<0){delete Ct[Ht];break}var yt=Je[ct];lt=yt._fullInput;var Rt=Fe(Ht,Ae,lt.index);if(Rt<0){delete Ct[Ht];break}ke=Ae[Rt]}if(Wt=Ee(_t,_e),Wt){if(Wt.attr?(jt=e(tt,Wt.attr).get(),Bt=jt&&Ze(Wt.attr,He)):(jt=lt.uirevision,Bt=ke.uirevision,Bt===void 0&&(Bt=He.uirevision)),Bt&&Bt===jt&&(Qt=Pe[_t],Qt===null&&(Qt=void 0),Zt=e(ke,_t),cr=Zt.get(),Re(cr,Qt))){Zt.set(ee(e(lt,_t).get()));continue}}else T.warn("unrecognized GUI edit: "+_t+" in trace uid "+Ht);delete Pe[_t]}}}function xt(Ae,He,Je,tt){var St,_t;function kt(){return H.addFrames(Ae,St)}Ae=T.getGraphDiv(Ae),x.clearPromiseQueue(Ae);var jt=Ae._fullData,Bt=Ae._fullLayout;if(!T.isPlotDiv(Ae)||!jt||!Bt)_t=H.newPlot(Ae,He,Je,tt);else{if(T.isPlainObject(He)){var Wt=He;He=Wt.data,Je=Wt.layout,tt=Wt.config,St=Wt.frames}var Qt=!1;if(tt){var Zt=T.extendDeep({},Ae._context);Ae._context=void 0,F(Ae,tt),Qt=Pt(Zt,Ae._context)}Ae.data=He||[],x.cleanData(Ae.data),Ae.layout=Je||{},x.cleanLayout(Ae.layout),We(Ae.data,Ae.layout,jt,Bt),h.supplyDefaults(Ae,{skipUpdateCalc:!0});var cr=Ae._fullData,Xr=Ae._fullLayout,vn=Xr.datarevision===void 0,en=Xr.transition,ft=tr(Ae,Bt,Xr,vn,en),ar=ft.newDataRevision,rr=Nt(Ae,jt,cr,vn,en,ar);if(me(Ae)&&(ft.layoutReplot=!0),rr.calc||ft.calc){Ae.calcdata=void 0;for(var Kt=Object.getOwnPropertyNames(Xr),Er=0;Er<Kt.length;Er++){var st=Kt[Er],et=st.substring(0,5);if(et==="xaxis"||et==="yaxis"){var vt=Xr[st]._emptyCategories;vt&&vt()}}}else h.supplyDefaultsUpdateCalc(Ae.calcdata,cr);var pt=[];if(St&&(Ae._transitionData={},h.createTransitionData(Ae),pt.push(kt)),Xr.transition&&!Qt&&(rr.anim||ft.anim))ft.ticks&&pt.push(u.doTicksRelayout),h.doCalcdata(Ae),u.doAutoRangeAndConstraints(Ae),pt.push(function(){return h.transitionFromReact(Ae,rr,ft,Bt)});else if(rr.fullReplot||ft.layoutReplot||Qt)Ae._fullLayout._skipDefaults=!0,pt.push(H._doPlot);else{for(var Ct in ft.arrays){var Ht=ft.arrays[Ct];if(Ht.length){var Pe=r.getComponentMethod(Ct,"drawOne");if(Pe!==T.noop)for(var ke=0;ke<Ht.length;ke++)Pe(Ae,Ht[ke]);else{var lt=r.getComponentMethod(Ct,"draw");if(lt===T.noop)throw new Error("cannot draw components: "+Ct);lt(Ae)}}}pt.push(h.previousPromises),rr.style&&pt.push(u.doTraceStyle),(rr.colorbars||ft.colorbars)&&pt.push(u.doColorBars),ft.legend&&pt.push(u.doLegend),ft.layoutstyle&&pt.push(u.layoutStyles),ft.axrange&&be(pt),ft.ticks&&pt.push(u.doTicksRelayout),ft.modebar&&pt.push(u.doModeBar),ft.camera&&pt.push(u.doCamera),pt.push(C)}pt.push(h.rehover,h.redrag,h.reselect),_t=T.syncOrAsync(pt,Ae),(!_t||!_t.then)&&(_t=Promise.resolve(Ae))}return _t.then(function(){return Ae.emit("plotly_react",{data:He,layout:Je}),Ae})}function Nt(Ae,He,Je,tt,St,_t){var kt=He.length===Je.length;if(!St&&!kt)return{fullReplot:!0,calc:!0};var jt=A.traceFlags();jt.arrays={},jt.nChanges=0,jt.nChangesAnim=0;var Bt,Wt;function Qt(Xr){var vn=t.getTraceValObject(Wt,Xr);return!Wt._module.animatable&&vn.anim&&(vn.anim=!1),vn}var Zt={getValObject:Qt,flags:jt,immutable:tt,transition:St,newDataRevision:_t,gd:Ae},cr={};for(Bt=0;Bt<He.length;Bt++)if(Je[Bt]){if(Wt=Je[Bt]._fullInput,h.hasMakesDataTransform(Wt)&&(Wt=Je[Bt]),cr[Wt.uid])continue;cr[Wt.uid]=1,Vt(He[Bt]._fullInput,Wt,[],Zt)}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),St&&jt.nChanges&&jt.nChangesAnim&&(jt.anim=jt.nChanges===jt.nChangesAnim&&kt?"all":"some"),jt}function tr(Ae,He,Je,tt,St){var _t=A.layoutFlags();_t.arrays={},_t.rangesAltered={},_t.nChanges=0,_t.nChangesAnim=0;function kt(Bt){return t.getLayoutValObject(Je,Bt)}var jt={getValObject:kt,flags:_t,immutable:tt,transition:St,gd:Ae};return Vt(He,Je,[],jt),(_t.plot||_t.calc)&&(_t.layoutReplot=!0),St&&_t.nChanges&&_t.nChangesAnim&&(_t.anim=_t.nChanges===_t.nChangesAnim?"all":"some"),_t}function Vt(Ae,He,Je,tt){var St,_t,kt,jt=tt.getValObject,Bt=tt.flags,Wt=tt.immutable,Qt=tt.inArray,Zt=tt.arrayIndex;function cr(){var ct=St.editType;if(Qt&&ct.indexOf("arraydraw")!==-1){T.pushUnique(Bt.arrays[Qt],Zt);return}A.update(Bt,St),ct!=="none"&&Bt.nChanges++,tt.transition&&St.anim&&Bt.nChangesAnim++,(ce.test(kt)||de.test(kt))&&(Bt.rangesAltered[Je[0]]=1),ye.test(kt)&&e(He,"_inputDomain").set(null),_t==="datarevision"&&(Bt.newDataRevision=1)}function Xr(ct){return ct.valType==="data_array"||ct.arrayOk}for(_t in Ae){if(Bt.calc&&!tt.transition)return;var vn=Ae[_t],en=He[_t],ft=Je.concat(_t);if(kt=ft.join("."),!(_t.charAt(0)==="_"||typeof vn=="function"||vn===en)){if((_t==="tick0"||_t==="dtick")&&Je[0]!=="geo"){var ar=He.tickmode;if(ar==="auto"||ar==="array"||!ar)continue}if(!(_t==="range"&&He.autorange)&&!((_t==="zmin"||_t==="zmax")&&He.type==="contourcarpet")&&(St=jt(ft),!!St&&!(St._compareAsJSON&&JSON.stringify(vn)===JSON.stringify(en)))){var rr=St.valType,Kt,Er=Xr(St),st=Array.isArray(vn),et=Array.isArray(en);if(st&&et){var vt="_input_"+_t,pt=Ae[vt],Ct=He[vt];if(Array.isArray(pt)&&pt===Ct)continue}if(en===void 0)Er&&st?Bt.calc=!0:cr();else if(St._isLinkedToArray){var Ht=[],Pe=!1;Qt||(Bt.arrays[_t]=Ht);var ke=Math.min(vn.length,en.length),lt=Math.max(vn.length,en.length);if(ke!==lt)if(St.editType==="arraydraw")Pe=!0;else{cr();continue}for(Kt=0;Kt<ke;Kt++)Vt(vn[Kt],en[Kt],ft.concat(Kt),T.extendFlat({inArray:_t,arrayIndex:Kt},tt));if(Pe)for(Kt=ke;Kt<lt;Kt++)Ht.push(Kt)}else!rr&&T.isPlainObject(vn)?Vt(vn,en,ft,tt):Er?st&&et?(Wt&&(Bt.calc=!0),(Wt||tt.newDataRevision)&&cr()):st!==et?Bt.calc=!0:cr():st&&et?(vn.length!==en.length||String(vn)!==String(en))&&cr():cr()}}}for(_t in He)if(!(_t in Ae||_t.charAt(0)==="_"||typeof He[_t]=="function"))if(St=jt(Je.concat(_t)),Xr(St)&&Array.isArray(He[_t])){Bt.calc=!0;return}else cr()}function Pt(Ae,He){var Je;for(Je in Ae)if(Je.charAt(0)!=="_"){var tt=Ae[Je],St=He[Je];if(tt!==St)if(T.isPlainObject(tt)&&T.isPlainObject(St)){if(Pt(tt,St))return!0}else if(Array.isArray(tt)&&Array.isArray(St)){if(tt.length!==St.length)return!0;for(var _t=0;_t<tt.length;_t++)if(tt[_t]!==St[_t])if(T.isPlainObject(tt[_t])&&T.isPlainObject(St[_t])){if(Pt(tt[_t],St[_t]))return!0}else return!0}else return!0}}function $t(Ae,He,Je){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var tt=Ae._transitionData;tt._frameQueue||(tt._frameQueue=[]),Je=h.supplyAnimationDefaults(Je);var St=Je.transition,_t=Je.frame;tt._frameWaitingCnt===void 0&&(tt._frameWaitingCnt=0);function kt(Wt){return Array.isArray(St)?Wt>=St.length?St[0]:St[Wt]:St}function jt(Wt){return Array.isArray(_t)?Wt>=_t.length?_t[0]:_t[Wt]:_t}function Bt(Wt,Qt){var Zt=0;return function(){if(Wt&&++Zt===Qt)return Wt()}}return new Promise(function(Wt,Qt){function Zt(){if(tt._frameQueue.length!==0){for(;tt._frameQueue.length;){var ke=tt._frameQueue.pop();ke.onInterrupt&&ke.onInterrupt()}Ae.emit("plotly_animationinterrupted",[])}}function cr(ke){if(ke.length!==0){for(var lt=0;lt<ke.length;lt++){var ct;ke[lt].type==="byname"?ct=h.computeFrame(Ae,ke[lt].name):ct=ke[lt].data;var yt=jt(lt),Rt=kt(lt);Rt.duration=Math.min(Rt.duration,yt.duration);var wt={frame:ct,name:ke[lt].name,frameOpts:yt,transitionOpts:Rt};lt===ke.length-1&&(wt.onComplete=Bt(Wt,2),wt.onInterrupt=Qt),tt._frameQueue.push(wt)}Je.mode==="immediate"&&(tt._lastFrameAt=-1/0),tt._animationRaf||en()}}function Xr(){Ae.emit("plotly_animated"),window.cancelAnimationFrame(tt._animationRaf),tt._animationRaf=null}function vn(){tt._currentFrame&&tt._currentFrame.onComplete&&tt._currentFrame.onComplete();var ke=tt._currentFrame=tt._frameQueue.shift();if(ke){var lt=ke.name?ke.name.toString():null;Ae._fullLayout._currentFrame=lt,tt._lastFrameAt=Date.now(),tt._timeToNext=ke.frameOpts.duration,h.transition(Ae,ke.frame.data,ke.frame.layout,x.coerceTraceIndices(Ae,ke.frame.traces),ke.frameOpts,ke.transitionOpts).then(function(){ke.onComplete&&ke.onComplete()}),Ae.emit("plotly_animatingframe",{name:lt,frame:ke.frame,animation:{frame:ke.frameOpts,transition:ke.transitionOpts}})}else Xr()}function en(){Ae.emit("plotly_animating"),tt._lastFrameAt=-1/0,tt._timeToNext=0,tt._runningTransitions=0,tt._currentFrame=null;var ke=function(){tt._animationRaf=window.requestAnimationFrame(ke),Date.now()-tt._lastFrameAt>tt._timeToNext&&vn()};ke()}var ft=0;function ar(ke){return Array.isArray(St)?ft>=St.length?ke.transitionOpts=St[ft]:ke.transitionOpts=St[0]:ke.transitionOpts=St,ft++,ke}var rr,Kt,Er=[],st=He==null,et=Array.isArray(He),vt=!st&&!et&&T.isPlainObject(He);if(vt)Er.push({type:"object",data:ar(T.extendFlat({},He))});else if(st||["string","number"].indexOf(typeof He)!==-1)for(rr=0;rr<tt._frames.length;rr++)Kt=tt._frames[rr],!!Kt&&(st||String(Kt.group)===String(He))&&Er.push({type:"byname",name:String(Kt.name),data:ar({name:Kt.name})});else if(et)for(rr=0;rr<He.length;rr++){var pt=He[rr];["number","string"].indexOf(typeof pt)!==-1?(pt=String(pt),Er.push({type:"byname",name:pt,data:ar({name:pt})})):T.isPlainObject(pt)&&Er.push({type:"object",data:ar(T.extendFlat({},pt))})}for(rr=0;rr<Er.length;rr++)if(Kt=Er[rr],Kt.type==="byname"&&!tt._frameHash[Kt.data.name]){T.warn('animate failure: frame not found: "'+Kt.data.name+'"'),Qt();return}["next","immediate"].indexOf(Je.mode)!==-1&&Zt(),Je.direction==="reverse"&&Er.reverse();var Ct=Ae._fullLayout._currentFrame;if(Ct&&Je.fromcurrent){var Ht=-1;for(rr=0;rr<Er.length;rr++)if(Kt=Er[rr],Kt.type==="byname"&&Kt.name===Ct){Ht=rr;break}if(Ht>0&&Ht<Er.length-1){var Pe=[];for(rr=0;rr<Er.length;rr++)Kt=Er[rr],(Er[rr].type!=="byname"||rr>Ht)&&Pe.push(Kt);Er=Pe}}Er.length>0?cr(Er):(Ae.emit("plotly_animated"),Wt())})}function Ut(Ae,He,Je){if(Ae=T.getGraphDiv(Ae),He==null)return Promise.resolve();if(!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var tt,St,_t,kt,jt=Ae._transitionData._frames,Bt=Ae._transitionData._frameHash;if(!Array.isArray(He))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+He);var Wt=jt.length+He.length*2,Qt=[],Zt={};for(tt=He.length-1;tt>=0;tt--)if(!!T.isPlainObject(He[tt])){var cr=He[tt].name,Xr=(Bt[cr]||Zt[cr]||{}).name,vn=He[tt].name,en=Bt[Xr]||Zt[Xr];Xr&&vn&&typeof vn=="number"&&en&&g<b&&(g++,T.warn('addFrames: overwriting frame "'+(Bt[Xr]||Zt[Xr]).name+'" with a frame whose name of type "number" also equates to "'+Xr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),g===b&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Zt[cr]={name:cr},Qt.push({frame:h.supplyFrameDefaults(He[tt]),index:Je&&Je[tt]!==void 0&&Je[tt]!==null?Je[tt]:Wt+tt})}Qt.sort(function(vt,pt){return vt.index>pt.index?-1:vt.index<pt.index?1:0});var ft=[],ar=[],rr=jt.length;for(tt=Qt.length-1;tt>=0;tt--){if(St=Qt[tt].frame,typeof St.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!St.name)for(;Bt[St.name="frame "+Ae._transitionData._counter++];);if(Bt[St.name]){for(_t=0;_t<jt.length&&(jt[_t]||{}).name!==St.name;_t++);ft.push({type:"replace",index:_t,value:St}),ar.unshift({type:"replace",index:_t,value:jt[_t]})}else kt=Math.max(0,Math.min(Qt[tt].index,rr)),ft.push({type:"insert",index:kt,value:St}),ar.unshift({type:"delete",index:kt}),rr++}var Kt=h.modifyFrames,Er=h.modifyFrames,st=[Ae,ar],et=[Ae,ft];return n&&n.add(Ae,Kt,st,Er,et),h.modifyFrames(Ae,ft)}function Lt(Ae,He){if(Ae=T.getGraphDiv(Ae),!T.isPlotDiv(Ae))throw new Error("This element is not a Plotly plot: "+Ae);var Je,tt,St=Ae._transitionData._frames,_t=[],kt=[];if(!He)for(He=[],Je=0;Je<St.length;Je++)He.push(Je);for(He=He.slice(),He.sort(),Je=He.length-1;Je>=0;Je--)tt=He[Je],_t.push({type:"delete",index:tt}),kt.unshift({type:"insert",index:tt,value:St[tt]});var jt=h.modifyFrames,Bt=h.modifyFrames,Wt=[Ae,kt],Qt=[Ae,_t];return n&&n.add(Ae,jt,Wt,Bt,Qt),h.modifyFrames(Ae,_t)}function Ye(Ae){Ae=T.getGraphDiv(Ae);var He=Ae._fullLayout||{},Je=Ae._fullData||[];return h.cleanPlot([],{},Je,He),h.purge(Ae),a.purge(Ae),He._container&&He._container.remove(),delete Ae._context,Ae}function ot(Ae){var He=Ae._fullLayout,Je=Ae.getBoundingClientRect();if(!T.equalDomRects(Je,He._lastBBox)){var tt=He._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Ae));He._invScaleX=Math.sqrt(tt[0][0]*tt[0][0]+tt[0][1]*tt[0][1]+tt[0][2]*tt[0][2]),He._invScaleY=Math.sqrt(tt[1][0]*tt[1][0]+tt[1][1]*tt[1][1]+tt[1][2]*tt[1][2]),He._lastBBox=Je}}function Ve(Ae){var He=w.select(Ae),Je=Ae._fullLayout;if(Je._calcInverseTransform=ot,Je._calcInverseTransform(Ae),Je._container=He.selectAll(".plot-container").data([0]),Je._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Je._paperdiv=Je._container.selectAll(".svg-container").data([0]),Je._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Je._glcontainer=Je._paperdiv.selectAll(".gl-container").data([{}]),Je._glcontainer.enter().append("div").classed("gl-container",!0),Je._paperdiv.selectAll(".main-svg").remove(),Je._paperdiv.select(".modebar-container").remove(),Je._paper=Je._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Je._toppaper=Je._paperdiv.append("svg").classed("main-svg",!0),Je._modebardiv=Je._paperdiv.append("div"),delete Je._modeBar,Je._hoverpaper=Je._paperdiv.append("svg").classed("main-svg",!0),!Je._uid){var tt={};w.selectAll("defs").each(function(){this.id&&(tt[this.id.split("-")[1]]=1)}),Je._uid=T.randstr(tt)}Je._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),Je._defs=Je._paper.append("defs").attr("id","defs-"+Je._uid),Je._clips=Je._defs.append("g").classed("clips",!0),Je._topdefs=Je._toppaper.append("defs").attr("id","topdefs-"+Je._uid),Je._topclips=Je._topdefs.append("g").classed("clips",!0),Je._bgLayer=Je._paper.append("g").classed("bglayer",!0),Je._draggers=Je._paper.append("g").classed("draglayer",!0);var St=Je._paper.append("g").classed("layer-below",!0);Je._imageLowerLayer=St.append("g").classed("imagelayer",!0),Je._shapeLowerLayer=St.append("g").classed("shapelayer",!0),Je._cartesianlayer=Je._paper.append("g").classed("cartesianlayer",!0),Je._polarlayer=Je._paper.append("g").classed("polarlayer",!0),Je._smithlayer=Je._paper.append("g").classed("smithlayer",!0),Je._ternarylayer=Je._paper.append("g").classed("ternarylayer",!0),Je._geolayer=Je._paper.append("g").classed("geolayer",!0),Je._funnelarealayer=Je._paper.append("g").classed("funnelarealayer",!0),Je._pielayer=Je._paper.append("g").classed("pielayer",!0),Je._iciclelayer=Je._paper.append("g").classed("iciclelayer",!0),Je._treemaplayer=Je._paper.append("g").classed("treemaplayer",!0),Je._sunburstlayer=Je._paper.append("g").classed("sunburstlayer",!0),Je._indicatorlayer=Je._toppaper.append("g").classed("indicatorlayer",!0),Je._glimages=Je._paper.append("g").classed("glimages",!0);var _t=Je._toppaper.append("g").classed("layer-above",!0);Je._imageUpperLayer=_t.append("g").classed("imagelayer",!0),Je._shapeUpperLayer=_t.append("g").classed("shapelayer",!0),Je._selectionLayer=Je._toppaper.append("g").classed("selectionlayer",!0),Je._infolayer=Je._toppaper.append("g").classed("infolayer",!0),Je._menulayer=Je._toppaper.append("g").classed("menulayer",!0),Je._zoomlayer=Je._toppaper.append("g").classed("zoomlayer",!0),Je._hoverlayer=Je._hoverpaper.append("g").classed("hoverlayer",!0),Je._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ae.emit("plotly_framework")}H.animate=$t,H.addFrames=Ut,H.deleteFrames=Lt,H.addTraces=K,H.deleteTraces=te,H.extendTraces=re,H.moveTraces=Y,H.prependTraces=ue,H.newPlot=D,H._doPlot=v,H.purge=Ye,H.react=xt,H.redraw=I,H.relayout=ae,H.restyle=V,H.setPlotConfig=S,H.update=Me,H._guiRelayout=Le(ae),H._guiRestyle=Le(V),H._guiUpdate=Le(Me),H._storeDirectGUIEdit=q},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(o,U,H){var w={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},f={};function M(T,e){for(var a in T){var n=T[a];n.valType?e[a]=n.dflt:(e[a]||(e[a]={}),M(n,e[a]))}}M(w,f),U.exports={configAttributes:w,dfltConfig:f}},{}],554:[function(o,U,H){var w=o("../registry"),f=o("../lib"),M=o("../plots/attributes"),T=o("../plots/layout_attributes"),e=o("../plots/frame_attributes"),a=o("../plots/animation_attributes"),n=o("./plot_config").configAttributes,r=o("./edit_types"),t=f.extendDeepAll,h=f.isPlainObject,i=f.isArrayOrTypedArray,s=f.nestedProperty,y=f.valObjectMeta,d="_isSubplotObj",p="_isLinkedToArray",c="_arrayAttrRegexps",m="_deprecated",l=[d,p,c,m];H.IS_SUBPLOT_OBJ=d,H.IS_LINKED_TO_ARRAY=p,H.DEPRECATED=m,H.UNDERSCORE_ATTRS=l,H.get=function(){var D={};w.allTypes.forEach(function(O){D[O]=_(O)});var R={};return Object.keys(w.transformsRegistry).forEach(function(O){R[O]=b(O)}),{defs:{valObjects:y,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:D,layout:g(),transforms:R,frames:v(),animation:C(a),config:C(n)}},H.crawl=function(D,R,O,z){var B=O||0;z=z||"",Object.keys(D).forEach(function(G){var Q=D[G];if(l.indexOf(G)===-1){var X=(z?z+".":"")+G;R(Q,G,D,B,X),!H.isValObject(Q)&&h(Q)&&G!=="impliedEdits"&&H.crawl(Q,R,B+1,X)}})},H.isValObject=function(D){return D&&D.valType!==void 0},H.findArrayAttributes=function(D){var R=[],O=[],z=[],B,G;function Q(te,Y,V,ee){O=O.slice(0,ee).concat([Y]),z=z.slice(0,ee).concat([te&&te._isLinkedToArray]);var ne=te&&(te.valType==="data_array"||te.arrayOk===!0)&&!(O[ee-1]==="colorbar"&&(Y==="ticktext"||Y==="tickvals"));!ne||X(B,0,"")}function X(te,Y,V){var ee=te[O[Y]],ne=V+O[Y];if(Y===O.length-1)i(ee)&&R.push(G+ne);else if(z[Y]){if(Array.isArray(ee))for(var Z=0;Z<ee.length;Z++)h(ee[Z])&&X(ee[Z],Y+1,ne+"["+Z+"].")}else h(ee)&&X(ee,Y+1,ne+".")}B=D,G="",H.crawl(M,Q),D._module&&D._module.attributes&&H.crawl(D._module.attributes,Q);var j=D.transforms;if(j)for(var re=0;re<j.length;re++){var ue=j[re],K=ue._module;K&&(G="transforms["+re+"].",B=ue,H.crawl(K.attributes,Q))}return R},H.getTraceValObject=function(D,R){var O=R[0],z=1,B,G;if(O==="transforms"){if(R.length===1)return M.transforms;var Q=D.transforms;if(!Array.isArray(Q)||!Q.length)return!1;var X=R[1];if(!A(X)||X>=Q.length)return!1;B=(w.transformsRegistry[Q[X].type]||{}).attributes,G=B&&B[R[2]],z=3}else{var j=D._module;if(j||(j=(w.modules[D.type||M.type.dflt]||{})._module),!j)return!1;if(B=j.attributes,G=B&&B[O],!G){var re=j.basePlotModule;re&&re.attributes&&(G=re.attributes[O])}G||(G=M[O])}return u(G,R,z)},H.getLayoutValObject=function(D,R){var O=x(D,R[0]);return u(O,R,1)};function x(D,R){var O,z,B,G,Q=D._basePlotModules;if(Q){var X;for(O=0;O<Q.length;O++){if(B=Q[O],B.attrRegex&&B.attrRegex.test(R)){if(B.layoutAttrOverrides)return B.layoutAttrOverrides;!X&&B.layoutAttributes&&(X=B.layoutAttributes)}var j=B.baseLayoutAttrOverrides;if(j&&R in j)return j[R]}if(X)return X}var re=D._modules;if(re){for(O=0;O<re.length;O++)if(G=re[O].layoutAttributes,G&&R in G)return G[R]}for(z in w.componentsRegistry){if(B=w.componentsRegistry[z],B.name==="colorscale"&&R.indexOf("coloraxis")===0)return B.layoutAttributes[R];if(!B.schema&&R===B.name)return B.layoutAttributes}return R in T?T[R]:!1}function u(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(A(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var z=D[R[O]];if(h(z))D=z;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!A(R[O]))return!1}else if(D.valType==="info_array"){O++;var B=R[O];if(!A(B))return!1;var G=D.items;if(Array.isArray(G)){if(B>=G.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var Q=R[O];if(!A(Q))return!1;D=G[B][Q]}else D=G[B]}else D=G}}return D}function A(D){return D===Math.round(D)&&D>=0}function _(D){var R,O;R=w.modules[D]._module,O=R.basePlotModule;var z={};z.type=null;var B=t({},M),G=t({},R.attributes);H.crawl(G,function(j,re,ue,K,te){s(B,te).set(void 0),j===void 0&&s(G,te).set(void 0)}),t(z,B),w.traceIs(D,"noOpacity")&&delete z.opacity,w.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),w.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,t(z,G),O.attributes&&t(z,O.attributes),z.type=D;var Q={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:C(z)};if(R.layoutAttributes){var X={};t(X,R.layoutAttributes),Q.layoutAttributes=C(X)}return R.animatable||H.crawl(Q,function(j){H.isValObject(j)&&"anim"in j&&delete j.anim}),Q}function g(){var D={},R,O;t(D,T);for(R in w.subplotsRegistry)if(O=w.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var z=0;z<O.attr.length;z++)F(D,O,O.attr[z]);else{var B=O.attr==="subplot"?O.name:O.attr;F(D,O,B)}for(R in w.componentsRegistry){O=w.componentsRegistry[R];var G=O.schema;if(G&&(G.subplots||G.layout)){var Q=G.subplots;if(Q&&Q.xaxis&&!Q.yaxis)for(var X in Q.xaxis)delete D.yaxis[X]}else O.name==="colorscale"?t(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:C(D)}}function b(D){var R=w.transformsRegistry[D],O=t({},R.attributes);return Object.keys(w.componentsRegistry).forEach(function(z){var B=w.componentsRegistry[z];B.schema&&B.schema.transforms&&B.schema.transforms[D]&&Object.keys(B.schema.transforms[D]).forEach(function(G){I(O,B.schema.transforms[D][G],G)})}),{attributes:C(O)}}function v(){var D={frames:t({},e)};return C(D),D.frames}function C(D){return S(D),k(D),E(D),D}function S(D){function R(z){return{valType:"string",editType:"none"}}function O(z,B,G){H.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(G[B+"src"]=R()):h(z)&&(z.role="object")}H.crawl(D,O)}function k(D){function R(O,z,B){if(!!O){var G=O[p];!G||(delete O[p],B[z]={items:{}},B[z].items[G]=O,B[z].role="object")}}H.crawl(D,R)}function E(D){function R(O){for(var z in O)if(h(O[z]))R(O[z]);else if(Array.isArray(O[z]))for(var B=0;B<O[z].length;B++)R(O[z][B]);else O[z]instanceof RegExp&&(O[z]=O[z].toString())}R(D)}function F(D,R,O){var z=s(D,O),B=t({},R.layoutAttributes);B[d]=!0,z.set(B)}function I(D,R,O){var z=s(D,O);z.set(t(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(o,U,H){var w=o("../lib"),f=o("../plots/attributes"),M="templateitemname",T={name:{valType:"string",editType:"none"}};T[M]={valType:"string",editType:"calc"},H.templatedArray=function(n,r){return r._isLinkedToArray=n,r.name=T.name,r[M]=T[M],r},H.traceTemplater=function(n){var r={},t,h;for(t in n)h=n[t],Array.isArray(h)&&h.length&&(r[t]=0);function i(s){t=w.coerce(s,{},f,"type");var y={type:t,_template:null};if(t in r){h=n[t];var d=r[t]%h.length;r[t]++,y._template=h[d]}return y}return{newTrace:i}},H.newContainer=function(n,r,t){var h=n._template,i=h&&(h[r]||t&&h[t]);w.isPlainObject(i)||(i=null);var s=n[r]={_template:i};return s},H.arrayTemplater=function(n,r,t){var h=n._template,i=h&&h[a(r)],s=h&&h[r];(!Array.isArray(s)||!s.length)&&(s=[]);var y={};function d(c){var m={name:c.name,_input:c},l=m[M]=c[M];if(!e(l))return m._template=i,m;for(var x=0;x<s.length;x++){var u=s[x];if(u.name===l)return y[l]=1,m._template=u,m}return m[t]=c[t]||!1,m._template=!1,m}function p(){for(var c=[],m=0;m<s.length;m++){var l=s[m],x=l.name;if(e(x)&&!y[x]){var u={_template:l,name:x,_input:{_templateitemname:x}};u[M]=l[M],c.push(u),y[x]=1}}return c}return{newItem:d,defaultItems:p}};function e(n){return n&&typeof n=="string"}function a(n){var r=n.length-1;return n.charAt(r)!=="s"&&w.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}H.arrayDefaultKey=a,H.arrayEditor=function(n,r,t){var h=(w.nestedProperty(n,r).get()||[]).length,i=t._index,s=i>=h&&(t._input||{})._templateitemname;s&&(i=h);var y=r+"["+i+"]",d;function p(){d={},s&&(d[y]={},d[y][M]=s)}p();function c(u,A){d[u]=A}function m(u,A){s?w.nestedProperty(d[y],u).set(A):d[y+"."+u]=A}function l(){var u=d;return p(),u}function x(u,A){u&&m(u,A);var _=l();for(var g in _)w.nestedProperty(n,g).set(_[g])}return{modifyBase:c,modifyItem:m,getUpdateObj:l,applyUpdate:x}}},{"../lib":515,"../plots/attributes":562}],556:[function(o,U,H){var w=o("@plotly/d3"),f=o("../registry"),M=o("../plots/plots"),T=o("../lib"),e=o("../lib/clear_gl_canvases"),a=o("../components/color"),n=o("../components/drawing"),r=o("../components/titles"),t=o("../components/modebar"),h=o("../plots/cartesian/axes"),i=o("../constants/alignment"),s=o("../plots/cartesian/constraints"),y=s.enforce,d=s.clean,p=o("../plots/cartesian/autorange").doAutoRange,c="start",m="middle",l="end";H.layoutStyles=function(k){return T.syncOrAsync([M.doAutoMargin,u],k)};function x(k,E,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=k[1]||D[1]<=k[0])&&R[0]<E[1]&&R[1]>E[0])return!0}return!1}function u(k){var E=k._fullLayout,F=E._size,I=F.p,D=h.list(k,"",!0),R,O,z,B,G,Q;if(E._paperdiv.style({width:k._context.responsive&&E.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":E.width+"px",height:k._context.responsive&&E.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(n.setSize,E.width,E.height),k._context.setBackground(k,E.paper_bgcolor),H.drawMainTitle(k),t.manage(k),!E._has("cartesian"))return M.previousPromises(k);function X(Pt,$t,Ut){var Lt=Pt._lw/2;if(Pt._id.charAt(0)==="x"){if($t){if(Ut==="top")return $t._offset-I-Lt}else return F.t+F.h*(1-(Pt.position||0))+Lt%1;return $t._offset+$t._length+I+Lt}if($t){if(Ut==="right")return $t._offset+$t._length+I+Lt}else return F.l+F.w*(Pt.position||0)+Lt%1;return $t._offset-I-Lt}for(R=0;R<D.length;R++){B=D[R];var j=B._anchorAxis;B._linepositions={},B._lw=n.crispRound(k,B.linewidth,1),B._mainLinePosition=X(B,j,B.side),B._mainMirrorPosition=B.mirror&&j?X(B,j,i.OPPOSITE_SIDE[B.side]):null}var re=[],ue=[],K=[],te=a.opacity(E.paper_bgcolor)===1&&a.opacity(E.plot_bgcolor)===1&&E.paper_bgcolor===E.plot_bgcolor;for(O in E._plots)if(z=E._plots[O],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var Y=z.xaxis.domain,V=z.yaxis.domain,ee=z.plotgroup;if(x(Y,V,K)){var ne=ee.node(),Z=z.bg=T.ensureSingle(ee,"rect","bg");ne.insertBefore(Z.node(),ne.childNodes[0]),ue.push(O)}else ee.select("rect.bg").remove(),K.push([Y,V]),te||(re.push(O),ue.push(O))}var q=E._bgLayer.selectAll(".bg").data(re);for(q.enter().append("rect").classed("bg",!0),q.exit().remove(),q.each(function(Pt){E._plots[Pt].bg=w.select(this)}),R=0;R<ue.length;R++)z=E._plots[ue[R]],G=z.xaxis,Q=z.yaxis,z.bg&&G._offset!==void 0&&Q._offset!==void 0&&z.bg.call(n.setRect,G._offset-I,Q._offset-I,G._length+2*I,Q._length+2*I).call(a.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(O in E._plots){z=E._plots[O],G=z.xaxis,Q=z.yaxis;var ie=z.clipId="clip"+E._uid+O+"plot",se=T.ensureSingleById(E._clips,"clipPath",ie,function(Pt){Pt.classed("plotclip",!0).append("rect")});z.clipRect=se.select("rect").attr({width:G._length,height:Q._length}),n.setTranslate(z.plot,G._offset,Q._offset);var ae,oe;z._hasClipOnAxisFalse?(ae=null,oe=ie):(ae=ie,oe=null),n.setClipUrl(z.plot,ae,k),z.layerClipId=oe}var be,ce,de,ye,ge,me,Me,Le,Oe,_e,Ee,Ze,Ge;function Fe(Pt){return"M"+be+","+Pt+"H"+ce}function Re(Pt){return"M"+G._offset+","+Pt+"h"+G._length}function We(Pt){return"M"+Pt+","+Le+"V"+Me}function xt(Pt){return"M"+Pt+","+Q._offset+"v"+Q._length}function Nt(Pt,$t,Ut){if(!Pt.showline||O!==Pt._mainSubplot)return"";if(!Pt._anchorAxis)return Ut(Pt._mainLinePosition);var Lt=$t(Pt._mainLinePosition);return Pt.mirror&&(Lt+=$t(Pt._mainMirrorPosition)),Lt}for(O in E._plots){z=E._plots[O],G=z.xaxis,Q=z.yaxis;var tr="M0,0";A(G,O)&&(ge=g(G,"left",Q,D),be=G._offset-(ge?I+ge:0),me=g(G,"right",Q,D),ce=G._offset+G._length+(me?I+me:0),de=X(G,Q,"bottom"),ye=X(G,Q,"top"),Ge=!G._anchorAxis||O!==G._mainSubplot,Ge&&(G.mirror==="allticks"||G.mirror==="all")&&(G._linepositions[O]=[de,ye]),tr=Nt(G,Fe,Re),Ge&&G.showline&&(G.mirror==="all"||G.mirror==="allticks")&&(tr+=Fe(de)+Fe(ye)),z.xlines.style("stroke-width",G._lw+"px").call(a.stroke,G.showline?G.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",tr);var Vt="M0,0";A(Q,O)&&(Ee=g(Q,"bottom",G,D),Me=Q._offset+Q._length+(Ee?I:0),Ze=g(Q,"top",G,D),Le=Q._offset-(Ze?I:0),Oe=X(Q,G,"left"),_e=X(Q,G,"right"),Ge=!Q._anchorAxis||O!==Q._mainSubplot,Ge&&(Q.mirror==="allticks"||Q.mirror==="all")&&(Q._linepositions[O]=[Oe,_e]),Vt=Nt(Q,We,xt),Ge&&Q.showline&&(Q.mirror==="all"||Q.mirror==="allticks")&&(Vt+=We(Oe)+We(_e)),z.ylines.style("stroke-width",Q._lw+"px").call(a.stroke,Q.showline?Q.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Vt)}return h.makeClipPaths(k),M.previousPromises(k)}function A(k,E){return(k.ticks||k.showline)&&(E===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function _(k,E,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=i.FROM_BL[E];return F.side===E?I.domain[D]===k.domain[D]:F.mirror&&I.domain[1-D]===k.domain[1-D]}function g(k,E,F,I){if(_(k,E,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&_(k,E,R))return R._lw}return 0}H.drawMainTitle=function(k){var E=k._fullLayout,F=C(E),I=S(E);r.draw(k,"gtitle",{propContainer:E,propName:"title.text",placeholder:E._dfltTitle.plot,attributes:{x:b(E,F),y:v(E,I),"text-anchor":F,dy:I}})};function b(k,E){var F=k.title,I=k._size,D=0;switch(E===c?D=F.pad.l:E===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return k.width*F.x+D}}function v(k,E){var F=k.title,I=k._size,D=0;if(E==="0em"||!E?D=-F.pad.b:E===i.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return k.height-k.height*F.y+D}}function C(k){var E=k.title,F=m;return T.isRightAnchor(E)?F=l:T.isLeftAnchor(E)&&(F=c),F}function S(k){var E=k.title,F="0em";return T.isTopAnchor(E)?F=i.CAP_SHIFT+"em":T.isMiddleAnchor(E)&&(F=i.MID_SHIFT+"em"),F}H.doTraceStyle=function(k){var E=k.calcdata,F=[],I;for(I=0;I<E.length;I++){var D=E[I],R=D[0]||{},O=R.trace||{},z=O._module||{},B=z.arraysToCalcdata;B&&B(D,O);var G=z.editStyle;G&&F.push({fn:G,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var Q=F[I];Q.fn(k,Q.cd0)}e(k),H.redrawReglTraces(k)}return M.style(k),f.getComponentMethod("legend","draw")(k),M.previousPromises(k)},H.doColorBars=function(k){return f.getComponentMethod("colorbar","draw")(k),M.previousPromises(k)},H.layoutReplot=function(k){var E=k.layout;return k.layout=void 0,f.call("_doPlot",k,"",E)},H.doLegend=function(k){return f.getComponentMethod("legend","draw")(k),M.previousPromises(k)},H.doTicksRelayout=function(k){return h.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(f.subplotsRegistry.splom.updateGrid(k),e(k),H.redrawReglTraces(k)),H.drawMainTitle(k),M.previousPromises(k)},H.doModeBar=function(k){var E=k._fullLayout;t.manage(k);for(var F=0;F<E._basePlotModules.length;F++){var I=E._basePlotModules[F].updateFx;I&&I(k)}return M.previousPromises(k)},H.doCamera=function(k){for(var E=k._fullLayout,F=E._subplots.gl3d,I=0;I<F.length;I++){var D=E[F[I]],R=D._scene;R.setViewport(D)}},H.drawData=function(k){var E=k._fullLayout;e(k);for(var F=E._basePlotModules,I=0;I<F.length;I++)F[I].plot(k);return H.redrawReglTraces(k),M.style(k),f.getComponentMethod("selections","draw")(k),f.getComponentMethod("shapes","draw")(k),f.getComponentMethod("annotations","draw")(k),f.getComponentMethod("images","draw")(k),E._replotting=!1,M.previousPromises(k)},H.redrawReglTraces=function(k){var E=k._fullLayout;if(E._has("regl")){var F=k._fullData,I=[],D=[],R,O;for(E._hasOnlyLargeSploms&&E._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?E._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)O=E._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=E[D[R]]._subplot,O._scene&&O._scene.draw()}},H.doAutoRangeAndConstraints=function(k){for(var E=h.list(k,"",!0),F,I={},D=0;D<E.length;D++)if(F=E[D],!I[F._id]){I[F._id]=1,d(k,F),p(k,F);var R=F._matchGroup;if(R)for(var O in R){var z=h.getFromId(k,O);p(k,z,F.range),I[O]=1}}y(k)},H.finalDraw=function(k){f.getComponentMethod("rangeslider","draw")(k),f.getComponentMethod("rangeselector","draw")(k)},H.drawMarginPushers=function(k){f.getComponentMethod("legend","draw")(k),f.getComponentMethod("rangeselector","draw")(k),f.getComponentMethod("sliders","draw")(k),f.getComponentMethod("updatemenus","draw")(k),f.getComponentMethod("colorbar","draw")(k)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(o,U,H){var w=o("../lib"),f=w.isPlainObject,M=o("./plot_schema"),T=o("../plots/plots"),e=o("../plots/attributes"),a=o("./plot_template"),n=o("./plot_config").dfltConfig;H.makeTemplate=function(c){c=w.isPlainObject(c)?c:w.getGraphDiv(c),c=w.extendDeep({_context:n},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var m=c.data||[],l=c.layout||{};l._basePlotModules=c._fullLayout._basePlotModules,l._modules=c._fullLayout._modules;var x={data:{},layout:{}};m.forEach(function(E){var F={};h(E,F,s.bind(null,E));var I=w.coerce(E,{},e,"type"),D=x.data[I];D||(D=x.data[I]=[]),D.push(F)}),h(l,x.layout,i.bind(null,l)),delete x.layout.template;var u=l.template;if(f(u)){var A=u.layout,_,g,b,v,C,S;f(A)&&r(A,x.layout);var k=u.data;if(f(k)){for(g in x.data)if(b=k[g],Array.isArray(b)){for(C=x.data[g],S=C.length,v=b.length,_=0;_<S;_++)r(b[_%v],C[_]);for(_=S;_<v;_++)C.push(w.extendDeep({},b[_]))}for(g in k)g in x.data||(x.data[g]=w.extendDeep([],k[g]))}}return x};function r(c,m){c=w.extendDeep({},c);var l=Object.keys(c).sort(),x,u;function A(C,S,k){if(f(S)&&f(C))r(C,S);else if(Array.isArray(S)&&Array.isArray(C)){var E=a.arrayTemplater({_template:c},k);for(u=0;u<S.length;u++){var F=S[u],I=E.newItem(F)._template;I&&r(I,F)}var D=E.defaultItems();for(u=0;u<D.length;u++)S.push(D[u]._template);for(u=0;u<S.length;u++)delete S[u].templateitemname}}for(x=0;x<l.length;x++){var _=l[x],g=c[_];if(_ in m?A(g,m[_],_):m[_]=g,t(_)===_)for(var b in m){var v=t(b);b!==v&&v===_&&!(b in c)&&A(g,m[b],_)}}}function t(c){return c.replace(/[0-9]+$/,"")}function h(c,m,l,x,u){var A=u&&l(u);for(var _ in c){var g=c[_],b=y(c,_,x),v=y(c,_,u),C=l(v);if(!C){var S=t(_);S!==_&&(v=y(c,S,u),C=l(v))}if(!(A&&A===C)&&!(!C||C._noTemplating||C.valType==="data_array"||C.arrayOk&&Array.isArray(g)))if(!C.valType&&f(g))h(g,m,l,b,v);else if(C._isLinkedToArray&&Array.isArray(g))for(var k=!1,E=0,F={},I=0;I<g.length;I++){var D=g[I];if(f(D)){var R=D.name;if(R)F[R]||(h(D,m,l,y(g,E,b),y(g,E,v)),E++,F[R]=1);else if(!k){var O=a.arrayDefaultKey(_),z=y(c,O,x),B=y(g,E,b);h(D,m,l,B,y(g,E,v));var G=w.nestedProperty(m,B),Q=w.nestedProperty(m,z);Q.set(G.get()),G.set(null),k=!0}}}else{var X=w.nestedProperty(m,b);X.set(g)}}}function i(c,m){return M.getLayoutValObject(c,w.nestedProperty({},m).parts)}function s(c,m){return M.getTraceValObject(c,w.nestedProperty({},m).parts)}function y(c,m,l){var x;return l?Array.isArray(c)?x=l+"["+m+"]":x=l+"."+m:x=m,x}H.validateTemplate=function(c,m){var l=w.extendDeep({},{_context:n,data:c.data,layout:c.layout}),x=l.layout||{};f(m)||(m=x.template||{});var u=m.layout,A=m.data,_=[];l.layout=x,l.layout.template=m,T.supplyDefaults(l);var g=l._fullLayout,b=l._fullData,v={};function C(z,B){for(var G in z)if(G.charAt(0)!=="_"&&f(z[G])){var Q=t(G),X=[],j;for(j=0;j<B.length;j++)X.push(y(z,G,B[j])),Q!==G&&X.push(y(z,Q,B[j]));for(j=0;j<X.length;j++)v[X[j]]=1;C(z[G],X)}}function S(z,B){for(var G in z)if(G.indexOf("defaults")===-1&&f(z[G])){var Q=y(z,G,B);v[Q]?S(z[G],Q):_.push({code:"unused",path:Q})}}if(f(u)?(C(g,["layout"]),S(u,"layout")):_.push({code:"layout"}),!f(A))_.push({code:"data"});else{for(var k={},E,F=0;F<b.length;F++){var I=b[F];E=I.type,k[E]=(k[E]||0)+1,I._fullInput._template||_.push({code:"missing",index:I._fullInput.index,traceType:E})}for(E in A){var D=A[E].length,R=k[E]||0;D>R?_.push({code:"unused",traceType:E,templateCount:D,dataCount:R}):R>D&&_.push({code:"reused",traceType:E,templateCount:D,dataCount:R})}}function O(z,B){for(var G in z)if(G.charAt(0)!=="_"){var Q=z[G],X=y(z,G,B);f(Q)?(Array.isArray(z)&&Q._template===!1&&Q.templateitemname&&_.push({code:"missing",path:X,templateitemname:Q.templateitemname}),O(Q,X)):Array.isArray(Q)&&d(Q)&&O(Q,X)}}if(O({data:b,layout:g},""),_.length)return _.map(p)};function d(c){for(var m=0;m<c.length;m++)if(f(c[m]))return!0}function p(c){var m;switch(c.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":c.path?m="There are no templates for item "+c.path+" with name "+c.templateitemname:m="There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":c.path?m="The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?m="Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":m="The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type.";break}return c.msg=m,c}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(o,U,H){var w=o("fast-isnumeric"),f=o("./plot_api"),M=o("../plots/plots"),T=o("../lib"),e=o("../snapshot/helpers"),a=o("../snapshot/tosvg"),n=o("../snapshot/svgtoimg"),r=o("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function h(i,s){s=s||{};var y,d,p,c;T.isPlainObject(i)?(y=i.data||[],d=i.layout||{},p=i.config||{},c={}):(i=T.getGraphDiv(i),y=T.extendDeep([],i.data),d=T.extendDeep({},i.layout),p=i._context,c=i._fullLayout||{});function m(R){return!(R in s)||T.validate(s[R],t[R])}if(!m("width")&&s.width!==null||!m("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+T.join2(t.format.values,", "," or ")+".");var l={};function x(R,O){return T.coerce(s,l,t,R,O)}var u=x("format"),A=x("width"),_=x("height"),g=x("scale"),b=x("setBackground"),v=x("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var S=T.extendFlat({},d);A?S.width=A:s.width===null&&w(c.width)&&(S.width=c.width),_?S.height=_:s.height===null&&w(c.height)&&(S.height=c.height);var k=T.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),E=e.getRedrawFunc(C);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(C._fullLayout))})}function I(){return new Promise(function(R,O){var z=a(C,u,g),B=C._fullLayout.width,G=C._fullLayout.height;function Q(){f.purge(C),document.body.removeChild(C)}if(u==="full-json"){var X=M.graphJson(C,!1,"keepdata","object",!0,!0);return X.version=r,X=JSON.stringify(X),Q(),R(v?X:e.encodeJSON(X))}if(Q(),u==="svg")return R(v?z:e.encodeSVG(z));var j=document.createElement("canvas");j.id=T.randstr(),n({format:u,width:B,height:G,scale:g,canvas:j,svg:z,promise:!0}).then(R).catch(O)})}function D(R){return v?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){f.newPlot(C,y,S,k).then(E).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){O(z)})})}U.exports=h},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(o,U,H){var w=o("../lib"),f=o("../plots/plots"),M=o("./plot_schema"),T=o("./plot_config").dfltConfig,e=w.isPlainObject,a=Array.isArray,n=w.isArrayOrTypedArray;U.exports=function(x,u){x===void 0&&(x=[]),u===void 0&&(u={});var A=M.get(),_=[],g={_context:w.extendFlat({},T)},b,v;a(x)?(g.data=w.extendDeep([],x),b=x):(g.data=[],b=[],_.push(s("array","data"))),e(u)?(g.layout=w.extendDeep({},u),v=u):(g.layout={},v={},arguments.length>1&&_.push(s("object","layout"))),f.supplyDefaults(g);for(var C=g._fullData,S=b.length,k=0;k<S;k++){var E=b[k],F=["data",k];if(!e(E)){_.push(s("object",F));continue}var I=C[k],D=I.type,R=A.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&E.visible!==!1&&_.push(s("invisible",F)),r(E,I,R,_,F);var O=E.transforms,z=I.transforms;if(O){a(O)||_.push(s("array",F,["transforms"])),F.push("transforms");for(var B=0;B<O.length;B++){var G=["transforms",B],Q=O[B].type;if(!e(O[B])){_.push(s("object",F,G));continue}var X=A.transforms[Q]?A.transforms[Q].attributes:{};X.type={valType:"enumerated",values:Object.keys(A.transforms)},r(O[B],z[B],X,_,F,G)}}}var j=g._fullLayout,re=t(A,C);return r(v,j,re,_,"layout"),_.length===0?void 0:_};function r(l,x,u,A,_,g){g=g||[];for(var b=Object.keys(l),v=0;v<b.length;v++){var C=b[v];if(C!=="transforms"){var S=g.slice();S.push(C);var k=l[C],E=x[C],F=d(u,C),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",O=(F||{}).items;if(!y(u,C))A.push(s("schema",_,S));else if(e(k)&&e(E)&&I!=="any")r(k,E,F,A,_,S);else if(D&&a(k)){k.length>E.length&&A.push(s("unused",_,S.concat(E.length)));var z=E.length,B=Array.isArray(O);B&&(z=Math.min(z,O.length));var G,Q,X,j,re;if(F.dimensions===2)for(Q=0;Q<z;Q++)if(a(k[Q])){k[Q].length>E[Q].length&&A.push(s("unused",_,S.concat(Q,E[Q].length)));var ue=E[Q].length;for(G=0;G<(B?Math.min(ue,O[Q].length):ue);G++)X=B?O[Q][G]:O,j=k[Q][G],re=E[Q][G],w.validate(j,X)?re!==j&&re!==+j&&A.push(s("dynamic",_,S.concat(Q,G),j,re)):A.push(s("value",_,S.concat(Q,G),j))}else A.push(s("array",_,S.concat(Q),k[Q]));else for(Q=0;Q<z;Q++)X=B?O[Q]:O,j=k[Q],re=E[Q],w.validate(j,X)?re!==j&&re!==+j&&A.push(s("dynamic",_,S.concat(Q),j,re)):A.push(s("value",_,S.concat(Q),j))}else if(F.items&&!D&&a(k)){var K=O[Object.keys(O)[0]],te=[],Y,V;for(Y=0;Y<E.length;Y++){var ee=E[Y]._index||Y;if(V=S.slice(),V.push(ee),e(k[ee])&&e(E[Y])){te.push(ee);var ne=k[ee],Z=E[Y];e(ne)&&ne.visible!==!1&&Z.visible===!1?A.push(s("invisible",_,V)):r(ne,Z,K,A,_,V)}}for(Y=0;Y<k.length;Y++)V=S.slice(),V.push(Y),e(k[Y])?te.indexOf(Y)===-1&&A.push(s("unused",_,V)):A.push(s("object",_,V,k[Y]))}else!e(k)&&e(E)?A.push(s("object",_,S,k)):!n(k)&&n(E)&&!D&&!R?A.push(s("array",_,S,k)):C in x?w.validate(k,F)?F.valType==="enumerated"&&(F.coerceNumber&&k!==+E||k!==E)&&A.push(s("dynamic",_,S,k,E)):A.push(s("value",_,S,k)):A.push(s("unused",_,S,k))}}return A}function t(l,x){for(var u=l.layout.layoutAttributes,A=0;A<x.length;A++){var _=x[A],g=l.traces[_.type],b=g.layoutAttributes;b&&(_.subplot?w.extendFlat(u[g.attributes.subplot.dflt],b):w.extendFlat(u,b))}return u}var h={object:function(l,x){var u;return l==="layout"&&x===""?u="The layout argument":l[0]==="data"&&x===""?u="Trace "+l[1]+" in the data argument":u=i(l)+"key "+x,u+" must be linked to an object container"},array:function(l,x){var u;return l==="data"?u="The data argument":u=i(l)+"key "+x,u+" must be linked to an array container"},schema:function(l,x){return i(l)+"key "+x+" is not part of the schema"},unused:function(l,x,u){var A=e(u)?"container":"key";return i(l)+A+" "+x+" did not get coerced"},dynamic:function(l,x,u,A){return[i(l)+"key",x,"(set to '"+u+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(l,x){return(x?i(l)+"item "+x:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,x,u){return[i(l)+"key "+x,"is set to an invalid value ("+u+")"].join(" ")}};function i(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function s(l,x,u,A,_){u=u||"";var g,b;a(x)?(g=x[0],b=x[1]):(g=x,b=null);var v=m(u),C=h[l](x,v,A,_);return w.log(C),{code:l,container:g,trace:b,path:u,astr:v,msg:C}}function y(l,x){var u=c(x),A=u.keyMinusId,_=u.id;return A in l&&l[A]._isSubplotObj&&_?!0:x in l}function d(l,x){if(x in l)return l[x];var u=c(x);return l[u.keyMinusId]}var p=w.counterRegex("([a-z]+)");function c(l){var x=l.match(p);return{keyMinusId:x&&x[1],id:x&&x[2]}}function m(l){if(!a(l))return String(l);for(var x="",u=0;u<l.length;u++){var A=l[u];typeof A=="number"?x=x.substr(0,x.length-1)+"["+A+"]":x+=A,u<l.length-1&&(x+=".")}return x}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(o,U,H){U.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(o,U,H){var w=o("../lib"),f=o("../plot_api/plot_template");U.exports=function(T,e,a){var n=a.name,r=a.inclusionAttr||"visible",t=e[n],h=w.isArrayOrTypedArray(T[n])?T[n]:[],i=e[n]=[],s=f.arrayTemplater(e,n,r),y,d;for(y=0;y<h.length;y++){var p=h[y];w.isPlainObject(p)?d=s.newItem(p):(d=s.newItem({}),d[r]=!1),d._index=y,d[r]!==!1&&a.handleItemDefaults(p,d,e,a),i.push(d)}var c=s.defaultItems();for(y=0;y<c.length;y++)d=c[y],d._index=i.length,a.handleItemDefaults({},d,e,a,{}),i.push(d);if(w.isArrayOrTypedArray(t)){var m=Math.min(t.length,i.length);for(y=0;y<m;y++)w.relinkPrivateKeys(i[y],t[y])}return i}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(o,U,H){var w=o("./font_attributes"),f=o("../components/fx/attributes");U.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:w({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:f.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=f.dateTime2ms,T=f.incrementMonth,e=o("../../constants/numerical"),a=e.ONEAVGMONTH;U.exports=function(r,t,h,i){if(t.type!=="date")return{vals:i};var s=r[h+"periodalignment"];if(!s)return{vals:i};var y=r[h+"period"],d;if(w(y)){if(y=+y,y<=0)return{vals:i}}else if(typeof y=="string"&&y.charAt(0)==="M"){var p=+y.substring(1);if(p>0&&Math.round(p)===p)d=p;else return{vals:i}}for(var c=t.calendar,m=s==="start",l=s==="end",x=r[h+"period0"],u=M(x,c)||0,A=[],_=[],g=[],b=i.length,v=0;v<b;v++){var C=i[v],S,k,E;if(d){for(S=Math.round((C-u)/(d*a)),E=T(u,d*S,c);E>C;)E=T(E,-d,c);for(;E<=C;)E=T(E,d,c);k=T(E,-d,c)}else{for(S=Math.round((C-u)/y),E=u+S*y;E>C;)E-=y;for(;E<=C;)E+=y;k=E-y}A[v]=m?k:l?E:(k+E)/2,_[v]=k,g[v]=E}return{vals:A,starts:_,ends:g}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(o,U,H){U.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../lib"),T=o("../../constants/numerical").FP_SAFE,e=o("../../registry"),a=o("../../components/drawing"),n=o("./axis_ids"),r=n.getFromId,t=n.isLinked;U.exports={getAutoRange:h,makePadFn:s,doAutoRange:c,findExtremes:m,concatExtremes:p};function h(b,v){var C,S,k=[],E=b._fullLayout,F=s(E,v,0),I=s(E,v,1),D=p(b,v),R=D.min,O=D.max;if(R.length===0||O.length===0)return M.simpleMap(v.range,v.r2l);var z=R[0].val,B=O[0].val;for(C=1;C<R.length&&z===B;C++)z=Math.min(z,R[C].val);for(C=1;C<O.length&&z===B;C++)B=Math.max(B,O[C].val);var G=!1;if(v.range){var Q=M.simpleMap(v.range,v.r2l);G=Q[1]<Q[0]}v.autorange==="reversed"&&(G=!0,v.autorange=!0);var X=v.rangemode,j=X==="tozero",re=X==="nonnegative",ue=v._length,K=ue/10,te=0,Y,V,ee,ne,Z,q;for(C=0;C<R.length;C++)for(Y=R[C],S=0;S<O.length;S++)V=O[S],q=V.val-Y.val-i(v,Y.val,V.val),q>0&&(Z=ue-F(Y)-I(V),Z>K?q/Z>te&&(ee=Y,ne=V,te=q/Z):q/ue>te&&(ee={val:Y.val,nopad:1},ne={val:V.val,nopad:1},te=q/ue));function ie(ce,de){return Math.max(ce,I(de))}if(z===B){var se=z-1,ae=z+1;if(j)if(z===0)k=[0,1];else{var oe=(z>0?O:R).reduce(ie,0),be=z/(1-Math.min(.5,oe/ue));k=z>0?[0,be]:[be,0]}else re?k=[Math.max(0,se),Math.max(1,ae)]:k=[se,ae]}else j?(ee.val>=0&&(ee={val:0,nopad:1}),ne.val<=0&&(ne={val:0,nopad:1})):re&&(ee.val-te*F(ee)<0&&(ee={val:0,nopad:1}),ne.val<=0&&(ne={val:1,nopad:1})),te=(ne.val-ee.val-i(v,Y.val,V.val))/(ue-F(ee)-I(ne)),k=[ee.val-te*F(ee),ne.val+te*I(ne)];return G&&k.reverse(),M.simpleMap(k,v.l2r||Number)}function i(b,v,C){var S=0;if(b.rangebreaks)for(var k=b.locateBreaks(v,C),E=0;E<k.length;E++){var F=k[E];S+=F.max-F.min}return S}function s(b,v,C){var S=.05*v._length,k=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var E=v.autorange==="reversed";if(!E){var F=M.simpleMap(v.range,v.r2l);E=F[1]<F[0]}E&&(C=!C)}var I=0;return t(b,v._id)||(I=d(b,v,C)),S=Math.max(I,S),v.constrain==="domain"&&v._inputDomain&&(S*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:I)}}var y=3;function d(b,v,C){var S=0,k=v._id.charAt(0)==="x";for(var E in b._plots){var F=b._plots[E];if(!(v._id!==F.xaxis._id&&v._id!==F.yaxis._id)){var I=(k?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!C&&(I.side==="left"||I.side==="bottom")||C&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=M.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",B=I._selections[z];B.each(function(ue){var K=w.select(this),te=K.select(".text-math-group");te.empty()&&(ue.bb=a.bBox(K.node()))})}for(var G=0;G<I._vals.length;G++){var Q=I._vals[G],X=Q.bb;if(X){var j=2*y+X.width,re=2*y+X.height;S=Math.max(S,k?Math.max(j*R,re*O):Math.max(re*R,j*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function p(b,v,C){var S=v._id,k=b._fullData,E=b._fullLayout,F=[],I=[],D,R,O;function z(j,re){for(D=0;D<re.length;D++){var ue=j[re[D]],K=(ue._extremes||{})[S];if(ue.visible===!0&&K){for(R=0;R<K.min.length;R++)O=K.min[R],l(F,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<K.max.length;R++)O=K.max[R],x(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(z(k,v._traceIndices),z(E.annotations||[],v._annIndices||[]),z(E.shapes||[],v._shapeIndices||[]),v._matchGroup&&!C){for(var B in v._matchGroup)if(B!==v._id){var G=r(b,B),Q=p(b,G,!0),X=v._length/G._length;for(R=0;R<Q.min.length;R++)O=Q.min[R],l(F,O.val,O.pad*X,{extrapad:O.extrapad});for(R=0;R<Q.max.length;R++)O=Q.max[R],x(I,O.val,O.pad*X,{extrapad:O.extrapad})}}return{min:F,max:I}}function c(b,v,C){if(v.setScale(),v.autorange){v.range=C?C.slice():h(b,v),v._r=v.range.slice(),v._rl=M.simpleMap(v._r,v.r2l);var S=v._input,k={};k[v._attr+".range"]=v.range,k[v._attr+".autorange"]=v.autorange,e.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,k),S.range=v.range.slice(),S.autorange=v.autorange}var E=v._anchorAxis;if(E&&E.rangeslider){var F=E.rangeslider[v._name];F&&F.rangemode==="auto"&&(F.range=h(b,v)),E._input.rangeslider[v._name]=M.extendFlat({},F)}}function m(b,v,C){C||(C={}),b._m||b.setScale();var S=[],k=[],E=v.length,F=C.padded||!1,I=C.tozero&&(b.type==="linear"||b.type==="-"),D=b.type==="log",R=!1,O=C.vpadLinearized||!1,z,B,G,Q,X,j,re,ue,K;function te(se){if(Array.isArray(se))return R=!0,function(oe){return Math.max(Number(se[oe]||0),0)};var ae=Math.max(Number(se||0),0);return function(){return ae}}var Y=te((b._m>0?C.ppadplus:C.ppadminus)||C.ppad||0),V=te((b._m>0?C.ppadminus:C.ppadplus)||C.ppad||0),ee=te(C.vpadplus||C.vpad),ne=te(C.vpadminus||C.vpad);if(!R){if(ue=1/0,K=-1/0,D)for(z=0;z<E;z++)B=v[z],B<ue&&B>0&&(ue=B),B>K&&B<T&&(K=B);else for(z=0;z<E;z++)B=v[z],B<ue&&B>-T&&(ue=B),B>K&&B<T&&(K=B);v=[ue,K],E=2}var Z={tozero:I,extrapad:F};function q(se){G=v[se],f(G)&&(j=Y(se),re=V(se),O?(Q=b.c2l(G)-ne(se),X=b.c2l(G)+ee(se)):(ue=G-ne(se),K=G+ee(se),D&&ue<K/10&&(ue=K/10),Q=b.c2l(ue),X=b.c2l(K)),I&&(Q=Math.min(0,Q),X=Math.max(0,X)),A(Q)&&l(S,Q,re,Z),A(X)&&x(k,X,j,Z))}var ie=Math.min(6,E);for(z=0;z<ie;z++)q(z);for(z=E-1;z>=ie;z--)q(z);return{min:S,max:k,opts:C}}function l(b,v,C,S){u(b,v,C,S,_)}function x(b,v,C,S){u(b,v,C,S,g)}function u(b,v,C,S,k){for(var E=S.tozero,F=S.extrapad,I=!0,D=0;D<b.length&&I;D++){var R=b[D];if(k(R.val,v)&&R.pad>=C&&(R.extrapad||!F)){I=!1;break}else k(v,R.val)&&R.pad<=C&&(F||!R.extrapad)&&(b.splice(D,1),D--)}if(I){var O=E&&v===0;b.push({val:v,pad:O?0:C,extrapad:O?!1:F})}}function A(b){return f(b)&&Math.abs(b)<T}function _(b,v){return b<=v}function g(b,v){return b>=v}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../plots/plots"),T=o("../../registry"),e=o("../../lib"),a=e.strTranslate,n=o("../../lib/svg_text_utils"),r=o("../../components/titles"),t=o("../../components/color"),h=o("../../components/drawing"),i=o("./layout_attributes"),s=o("./clean_ticks"),y=o("../../constants/numerical"),d=y.ONEMAXYEAR,p=y.ONEAVGYEAR,c=y.ONEMINYEAR,m=y.ONEMAXQUARTER,l=y.ONEAVGQUARTER,x=y.ONEMINQUARTER,u=y.ONEMAXMONTH,A=y.ONEAVGMONTH,_=y.ONEMINMONTH,g=y.ONEWEEK,b=y.ONEDAY,v=b/2,C=y.ONEHOUR,S=y.ONEMIN,k=y.ONESEC,E=y.MINUS_SIGN,F=y.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},z={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},G=o("../../constants/alignment"),Q=G.MID_SHIFT,X=G.CAP_SHIFT,j=G.LINE_SPACING,re=G.OPPOSITE_SIDE,ue=3,K=U.exports={};K.setConvert=o("./set_convert");var te=o("./axis_autotype"),Y=o("./axis_ids"),V=Y.idSort,ee=Y.isLinked;K.id2name=Y.id2name,K.name2id=Y.name2id,K.cleanId=Y.cleanId,K.list=Y.list,K.listIds=Y.listIds,K.getFromId=Y.getFromId,K.getFromTrace=Y.getFromTrace;var ne=o("./autorange");K.getAutoRange=ne.getAutoRange,K.findExtremes=ne.findExtremes;var Z=1e-4;function q(Pe){var ke=(Pe[1]-Pe[0])*Z;return[Pe[0]-ke,Pe[1]+ke]}K.coerceRef=function(Pe,ke,lt,ct,yt,Rt){var wt=ct.charAt(ct.length-1),Dt=lt._fullLayout._subplots[wt+"axis"],Jt=ct+"ref",fr={};return yt||(yt=Dt[0]||(typeof Rt=="string"?Rt:Rt[0])),Rt||(Rt=yt),Dt=Dt.concat(Dt.map(function(Rr){return Rr+" domain"})),fr[Jt]={valType:"enumerated",values:Dt.concat(Rt?typeof Rt=="string"?[Rt]:Rt:[]),dflt:yt},e.coerce(Pe,ke,fr,Jt)},K.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},K.coercePosition=function(Pe,ke,lt,ct,yt,Rt){var wt,Dt,Jt=K.getRefType(ct);if(Jt!=="range")wt=e.ensureNumber,Dt=lt(yt,Rt);else{var fr=K.getFromId(ke,ct);Rt=fr.fraction2r(Rt),Dt=lt(yt,Rt),wt=fr.cleanPos}Pe[yt]=wt(Dt)},K.cleanPosition=function(Pe,ke,lt){var ct=lt==="paper"||lt==="pixel"?e.ensureNumber:K.getFromId(ke,lt).cleanPos;return ct(Pe)},K.redrawComponents=function(Pe,ke){ke=ke||K.listIds(Pe);var lt=Pe._fullLayout;function ct(yt,Rt,wt,Dt){for(var Jt=T.getComponentMethod(yt,Rt),fr={},Rr=0;Rr<ke.length;Rr++)for(var Sr=lt[K.id2name(ke[Rr])],Pr=Sr[wt],Jr=0;Jr<Pr.length;Jr++){var ur=Pr[Jr];if(!fr[ur]&&(Jt(Pe,ur),fr[ur]=1,Dt))return}}ct("annotations","drawOne","_annIndices"),ct("shapes","drawOne","_shapeIndices"),ct("images","draw","_imgIndices",!0),ct("selections","drawOne","_selectionIndices")};var ie=K.getDataConversions=function(Pe,ke,lt,ct){var yt,Rt=lt==="x"||lt==="y"||lt==="z"?lt:ct;if(Array.isArray(Rt)){if(yt={type:te(ct,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(yt),yt.type==="category")for(var wt=0;wt<ct.length;wt++)yt.d2c(ct[wt])}else yt=K.getFromTrace(Pe,ke,Rt);return yt?{d2c:yt.d2c,c2d:yt.c2d}:Rt==="ids"?{d2c:ae,c2d:ae}:{d2c:se,c2d:se}};function se(Pe){return+Pe}function ae(Pe){return String(Pe)}K.getDataToCoordFunc=function(Pe,ke,lt,ct){return ie(Pe,ke,lt,ct).d2c},K.counterLetter=function(Pe){var ke=Pe.charAt(0);if(ke==="x")return"y";if(ke==="y")return"x"},K.minDtick=function(Pe,ke,lt,ct){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ct?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=ke,Pe._forceTick0=lt):Pe._minDtick&&((Pe._minDtick/ke+1e-6)%1<2e-6&&((lt-Pe._forceTick0)/ke%1+1.000001)%1<2e-6?(Pe._minDtick=ke,Pe._forceTick0=lt):((ke/Pe._minDtick+1e-6)%1>2e-6||((lt-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},K.saveRangeInitial=function(Pe,ke){for(var lt=K.list(Pe,"",!0),ct=!1,yt=0;yt<lt.length;yt++){var Rt=lt[yt],wt=Rt._rangeInitial===void 0,Dt=wt||!(Rt.range[0]===Rt._rangeInitial[0]&&Rt.range[1]===Rt._rangeInitial[1]);(wt&&Rt.autorange===!1||ke&&Dt)&&(Rt._rangeInitial=Rt.range.slice(),ct=!0)}return ct},K.saveShowSpikeInitial=function(Pe,ke){for(var lt=K.list(Pe,"",!0),ct=!1,yt="on",Rt=0;Rt<lt.length;Rt++){var wt=lt[Rt],Dt=wt._showSpikeInitial===void 0,Jt=Dt||wt.showspikes!==wt._showspikes;(Dt||ke&&Jt)&&(wt._showSpikeInitial=wt.showspikes,ct=!0),yt==="on"&&!wt.showspikes&&(yt="off")}return Pe._fullLayout._cartesianSpikesEnabled=yt,ct},K.autoBin=function(Pe,ke,lt,ct,yt,Rt){var wt=e.aggNums(Math.min,null,Pe),Dt=e.aggNums(Math.max,null,Pe);if(ke.type==="category"||ke.type==="multicategory")return{start:wt-.5,end:Dt+.5,size:Math.max(1,Math.round(Rt)||1),_dataSpan:Dt-wt};yt||(yt=ke.calendar);var Jt;if(ke.type==="log"?Jt={type:"linear",range:[wt,Dt]}:Jt={type:ke.type,range:e.simpleMap([wt,Dt],ke.c2r,0,yt),calendar:yt},K.setConvert(Jt),Rt=Rt&&s.dtick(Rt,Jt.type),Rt)Jt.dtick=Rt,Jt.tick0=s.tick0(void 0,Jt.type,yt);else{var fr;if(lt)fr=(Dt-wt)/lt;else{var Rr=e.distinctVals(Pe),Sr=Math.pow(10,Math.floor(Math.log(Rr.minDiff)/Math.LN10)),Pr=Sr*e.roundUp(Rr.minDiff/Sr,[.9,1.9,4.9,9.9],!0);fr=Math.max(Pr,2*e.stdev(Pe)/Math.pow(Pe.length,ct?.25:.4)),f(fr)||(fr=1)}K.autoTicks(Jt,fr)}var Jr=Jt.dtick,ur=K.tickIncrement(K.tickFirst(Jt),Jr,"reverse",yt),wr,Br;if(typeof Jr=="number")ur=oe(ur,Pe,Jt,wt,Dt),Br=1+Math.floor((Dt-ur)/Jr),wr=ur+Br*Jr;else for(Jt.dtick.charAt(0)==="M"&&(ur=be(ur,Pe,Jr,wt,yt)),wr=ur,Br=0;wr<=Dt;)wr=K.tickIncrement(wr,Jr,!1,yt),Br++;return{start:ke.c2r(ur,0,yt),end:ke.c2r(wr,0,yt),size:Jr,_dataSpan:Dt-wt}};function oe(Pe,ke,lt,ct,yt){var Rt=0,wt=0,Dt=0,Jt=0;function fr(Jr){return(1+(Jr-Pe)*100/lt.dtick)%100<2}for(var Rr=0;Rr<ke.length;Rr++)ke[Rr]%1===0?Dt++:f(ke[Rr])||Jt++,fr(ke[Rr])&&Rt++,fr(ke[Rr]+lt.dtick/2)&&wt++;var Sr=ke.length-Jt;if(Dt===Sr&&lt.type!=="date")lt.dtick<1?Pe=ct-.5*lt.dtick:(Pe-=.5,Pe+lt.dtick<ct&&(Pe+=lt.dtick));else if(wt<Sr*.1&&(Rt>Sr*.3||fr(ct)||fr(yt))){var Pr=lt.dtick/2;Pe+=Pe+Pr<ct?Pr:-Pr}return Pe}function be(Pe,ke,lt,ct,yt){var Rt=e.findExactDates(ke,yt),wt=.8;if(Rt.exactDays>wt){var Dt=Number(lt.substr(1));Rt.exactYears>wt&&Dt%12===0?Pe=K.tickIncrement(Pe,"M6","reverse")+b*1.5:Rt.exactMonths>wt?Pe=K.tickIncrement(Pe,"M1","reverse")+b*15.5:Pe-=v;var Jt=K.tickIncrement(Pe,lt);if(Jt<=ct)return Jt}return Pe}K.prepMinorTicks=function(Pe,ke,lt){if(!ke.minor.dtick){delete Pe.dtick;var ct=ke.dtick&&f(ke._tmin),yt;if(ct){var Rt=K.tickIncrement(ke._tmin,ke.dtick,!0);yt=[ke._tmin,Rt*.99+ke._tmin*.01]}else{var wt=e.simpleMap(ke.range,ke.r2l);yt=[wt[0],.8*wt[0]+.2*wt[1]]}if(Pe.range=e.simpleMap(yt,ke.l2r),Pe._isMinor=!0,K.prepTicks(Pe,lt),ct){var Dt=f(ke.dtick),Jt=f(Pe.dtick),fr=Dt?ke.dtick:+ke.dtick.substring(1),Rr=Jt?Pe.dtick:+Pe.dtick.substring(1);Dt&&Jt?ce(fr,Rr)?fr===2*g&&Rr===2*b&&(Pe.dtick=g):fr===2*g&&Rr===3*b?Pe.dtick=g:fr===g&&!(ke._input.minor||{}).nticks?Pe.dtick=b:de(fr/Rr,2.5)?Pe.dtick=fr/2:Pe.dtick=fr:String(ke.dtick).charAt(0)==="M"?Jt?Pe.dtick="M1":ce(fr,Rr)?fr>=12&&Rr===2&&(Pe.dtick="M3"):Pe.dtick=ke.dtick:String(Pe.dtick).charAt(0)==="L"?String(ke.dtick).charAt(0)==="L"?ce(fr,Rr)||(Pe.dtick=de(fr/Rr,2.5)?ke.dtick/2:ke.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+ke.dtick>1&&(Pe.dtick=1)}Pe.range=ke.range}ke.minor._tick0Init===void 0&&(Pe.tick0=ke.tick0)};function ce(Pe,ke){return Math.abs((Pe/ke+.5)%1-.5)<.001}function de(Pe,ke){return Math.abs(Pe/ke-1)<.001}K.prepTicks=function(Pe,ke){var lt=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,ke);if(Pe.tickmode==="auto"||!Pe.dtick){var ct=Pe.nticks,yt;ct||(Pe.type==="category"||Pe.type==="multicategory"?(yt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ct=Pe._length/yt):(yt=Pe._id.charAt(0)==="y"?40:80,ct=e.constrain(Pe._length/yt,4,9)+1),Pe._name==="radialaxis"&&(ct*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ct*=100),Pe._roughDTick=Math.abs(lt[1]-lt[0])/ct,K.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&ge(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),We(Pe)};function ye(Pe){return+Pe.substring(1)}function ge(Pe){var ke;function lt(){return!(f(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ct=lt(),yt=K.getTickFormat(Pe);if(yt){var Rt=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(yt)||(/%[HI]/.test(yt)?(ke=C,Rt&&!ct&&Pe.dtick<C&&(Pe.dtick=C)):/%p/.test(yt)?(ke=v,Rt&&!ct&&Pe.dtick<v&&(Pe.dtick=v)):/%[Aadejuwx]/.test(yt)?(ke=b,Rt&&!ct&&Pe.dtick<b&&(Pe.dtick=b)):/%[UVW]/.test(yt)?(ke=g,Rt&&!ct&&Pe.dtick<g&&(Pe.dtick=g)):/%[Bbm]/.test(yt)?(ke=A,Rt&&(ct?ye(Pe.dtick)<1:Pe.dtick<_)&&(Pe.dtick="M1")):/%[q]/.test(yt)?(ke=l,Rt&&(ct?ye(Pe.dtick)<3:Pe.dtick<x)&&(Pe.dtick="M3")):/%[Yy]/.test(yt)&&(ke=p,Rt&&(ct?ye(Pe.dtick)<12:Pe.dtick<c)&&(Pe.dtick="M12")))}ct=lt(),ct&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=ke}function me(Pe,ke,lt){for(var ct=0;ct<Pe.length;ct++){var yt=Pe[ct].value,Rt=ct,wt=ct+1;ct<Pe.length-1?(Rt=ct,wt=ct+1):ct>0?(Rt=ct-1,wt=ct):(Rt=ct,wt=ct);var Dt=Pe[Rt].value,Jt=Pe[wt].value,fr=Math.abs(Jt-Dt),Rr=lt||fr,Sr=0;Rr>=c?fr>=c&&fr<=d?Sr=fr:Sr=p:lt===l&&Rr>=x?fr>=x&&fr<=m?Sr=fr:Sr=l:Rr>=_?fr>=_&&fr<=u?Sr=fr:Sr=A:lt===g&&Rr>=g?Sr=g:Rr>=b?Sr=b:lt===v&&Rr>=v?Sr=v:lt===C&&Rr>=C&&(Sr=C);var Pr;Sr>=fr&&(Sr=fr,Pr=!0);var Jr=yt+Sr;if(ke.rangebreaks&&Sr>0){for(var ur=84,wr=0,Br=0;Br<ur;Br++){var Yr=(Br+.5)/ur;ke.maskBreaks(yt*(1-Yr)+Yr*Jr)!==F&&wr++}Sr*=wr/ur,Sr||(Pe[ct].drop=!0),Pr&&fr>g&&(Sr=fr)}(Sr>0||ct===0)&&(Pe[ct].periodX=yt+Sr/2)}}K.calcTicks=function(ke,lt){for(var ct=ke.type,yt=ke.calendar,Rt=ke.ticklabelstep,wt=ke.ticklabelmode==="period",Dt=e.simpleMap(ke.range,ke.r2l,void 0,void 0,lt),Jt=Dt[1]<Dt[0],fr=Math.min(Dt[0],Dt[1]),Rr=Math.max(Dt[0],Dt[1]),Sr=Math.max(1e3,ke._length||0),Pr=[],Jr=[],ur=[],wr=[],Br=ke.minor&&(ke.minor.ticks||ke.minor.showgrid),Yr=1;Yr>=(Br?0:1);Yr--){var Dr=!Yr;Yr?(ke._dtickInit=ke.dtick,ke._tick0Init=ke.tick0):(ke.minor._dtickInit=ke.minor.dtick,ke.minor._tick0Init=ke.minor.tick0);var at=Yr?ke:e.extendFlat({},ke,ke.minor);if(Dr?K.prepMinorTicks(at,ke,lt):K.prepTicks(at,lt),at.tickmode==="array"){Yr?(ur=[],Pr=Me(ke)):(wr=[],Jr=Me(ke));continue}var zt=q(Dt),qt=zt[0],hr=zt[1],Ur=f(at.dtick),Gr=ct==="log"&&!(Ur||at.dtick.charAt(0)==="L"),Ir=K.tickFirst(at,lt);if(Yr){if(ke._tmin=Ir,Ir<qt!==Jt)break;(ct==="category"||ct==="multicategory")&&(hr=Jt?Math.max(-.5,hr):Math.min(ke._categories.length-.5,hr))}var kr=null,Kr=Ir,kn;if(Yr){var yn;Ur?yn=ke.dtick:ct==="date"?typeof ke.dtick=="string"&&ke.dtick.charAt(0)==="M"&&(yn=A*ke.dtick.substring(1)):yn=ke._roughDTick,kn=Math.round((ke.r2l(Kr)-ke.r2l(ke.tick0))/yn)-1}var Yn=at.dtick;for(at.rangebreaks&&at._tick0Init!==at.tick0&&(Kr=pt(Kr,ke),Jt||(Kr=K.tickIncrement(Kr,Yn,!Jt,yt))),Yr&&wt&&(Kr=K.tickIncrement(Kr,Yn,!Jt,yt),kn--);Jt?Kr>=hr:Kr<=hr;Kr=K.tickIncrement(Kr,Yn,Jt,yt)){if(Yr&&kn++,at.rangebreaks&&!Jt){if(Kr<qt)continue;if(at.maskBreaks(Kr)===F&&pt(Kr,at)>=Rr)break}if(ur.length>Sr||Kr===kr)break;kr=Kr;var In={value:Kr};Yr?(Gr&&Kr!==(Kr|0)&&(In.simpleLabel=!0),Rt>1&&kn%Rt&&(In.skipLabel=!0),ur.push(In)):(In.minor=!0,wr.push(In))}}if(Br){var Jn=ke.minor.ticks==="inside"&&ke.ticks==="outside"||ke.minor.ticks==="outside"&&ke.ticks==="inside";if(!Jn){for(var Zn=ur.map(function(Xt){return Xt.value}),ba=[],Pa=0;Pa<wr.length;Pa++){var xi=wr[Pa],Ka=xi.value;if(Zn.indexOf(Ka)===-1){for(var ti=!1,$a=0;!ti&&$a<ur.length;$a++)1e7+ur[$a].value===1e7+Ka&&(ti=!0);ti||ba.push(xi)}}wr=ba}}wt&&me(ur,ke,ke._definedDelta);var Cr;if(ke.rangebreaks){var bn=ke._id.charAt(0)==="y",gn=1;ke.tickmode==="auto"&&(gn=ke.tickfont?ke.tickfont.size:12);var Ln=NaN;for(Cr=ur.length-1;Cr>-1;Cr--){if(ur[Cr].drop){ur.splice(Cr,1);continue}ur[Cr].value=pt(ur[Cr].value,ke);var qn=ke.c2p(ur[Cr].value);(bn?Ln>qn-gn:Ln<qn+gn)?ur.splice(Jt?Cr+1:Cr,1):Ln=qn}}vt(ke)&&Math.abs(Dt[1]-Dt[0])===360&&ur.pop(),ke._tmax=(ur[ur.length-1]||{}).value,ke._prevDateHead="",ke._inCalcTicks=!0;var da,oa=function(Xt){Xt.text="",ke._prevDateHead=da};ur=ur.concat(wr);var Bn,$n;for(Cr=0;Cr<ur.length;Cr++){var Xa=ur[Cr].minor,gi=ur[Cr].value;Xa?Jr.push({x:gi,minor:!0}):(da=ke._prevDateHead,Bn=K.tickText(ke,gi,!1,ur[Cr].simpleLabel),$n=ur[Cr].periodX,$n!==void 0&&(Bn.periodX=$n,($n>Rr||$n<fr)&&($n>Rr&&(Bn.periodX=Rr),$n<fr&&(Bn.periodX=fr),oa(Bn))),ur[Cr].skipLabel&&oa(Bn),Pr.push(Bn))}return Pr=Pr.concat(Jr),ke._inCalcTicks=!1,wt&&Pr.length&&(Pr[0].noTick=!0),Pr};function Me(Pe){var ke=e.simpleMap(Pe.range,Pe.r2l),lt=q(ke),ct=Math.min(lt[0],lt[1]),yt=Math.max(lt[0],lt[1]),Rt=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var wt=[],Dt=0;Dt<=1;Dt++)if(!(Dt&&!Pe.minor)){var Jt=Dt?Pe.minor.tickvals:Pe.tickvals,fr=Dt?[]:Pe.ticktext;if(!!Jt){Array.isArray(fr)||(fr=[]);for(var Rr=0;Rr<Jt.length;Rr++){var Sr=Rt(Jt[Rr]);if(Sr>ct&&Sr<yt){var Pr=fr[Rr]===void 0?K.tickText(Pe,Sr):xt(Pe,Sr,String(fr[Rr]));Dt&&(Pr.minor=!0,Pr.text=""),wt.push(Pr)}}}}return Pe.rangebreaks&&(wt=wt.filter(function(Jr){return Pe.maskBreaks(Jr.x)!==F})),wt}var Le=[2,5,10],Oe=[1,2,3,6,12],_e=[1,2,5,10,15,30],Ee=[1,2,3,7,14],Ze=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],Fe=[15,30,45,90,180];function Re(Pe,ke,lt){return ke*e.roundUp(Pe/ke,lt)}K.autoTicks=function(Pe,ke,lt){var ct;function yt(Sr){return Math.pow(Sr,Math.floor(Math.log(ke)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var Rt=2*ke;if(Rt>p)ke/=p,ct=yt(10),Pe.dtick="M"+12*Re(ke,ct,Le);else if(Rt>A)ke/=A,Pe.dtick="M"+Re(ke,1,Oe);else if(Rt>b){if(Pe.dtick=Re(ke,b,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Ee),!lt){var wt=K.getTickFormat(Pe),Dt=Pe.ticklabelmode==="period";Dt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(wt)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Dt&&(Pe._dowTick0=Pe.tick0)}}else Rt>C?Pe.dtick=Re(ke,C,Oe):Rt>S?Pe.dtick=Re(ke,S,_e):Rt>k?Pe.dtick=Re(ke,k,_e):(ct=yt(10),Pe.dtick=Re(ke,ct,Le))}else if(Pe.type==="log"){Pe.tick0=0;var Jt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(ke*=1.5),ke>.7)Pe.dtick=Math.ceil(ke);else if(Math.abs(Jt[1]-Jt[0])<1){var fr=1.5*Math.abs((Jt[1]-Jt[0])/ke);ke=Math.abs(Math.pow(10,Jt[1])-Math.pow(10,Jt[0]))/fr,ct=yt(10),Pe.dtick="L"+Re(ke,ct,Le)}else Pe.dtick=ke>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(ke,1))):vt(Pe)?(Pe.tick0=0,ct=1,Pe.dtick=Re(ke,ct,Fe)):(Pe.tick0=0,ct=yt(10),Pe.dtick=Re(ke,ct,Le));if(Pe.dtick===0&&(Pe.dtick=1),!f(Pe.dtick)&&typeof Pe.dtick!="string"){var Rr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(Rr)}};function We(Pe){var ke=Pe.dtick;if(Pe._tickexponent=0,!f(ke)&&typeof ke!="string"&&(ke=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var lt=Pe.r2l(Pe.tick0),ct=Pe.l2r(lt).replace(/(^-|i)/g,""),yt=ct.length;if(String(ke).charAt(0)==="M")yt>10||ct.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+ke.substr(1)%12===0?"y":"m";else if(ke>=b&&yt<=10||ke>=b*15)Pe._tickround="d";else if(ke>=S&&yt<=16||ke>=C)Pe._tickround="M";else if(ke>=k&&yt<=19||ke>=S)Pe._tickround="S";else{var Rt=Pe.l2r(lt+ke).replace(/^-/,"").length;Pe._tickround=Math.max(yt,Rt)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(f(ke)||ke.charAt(0)==="L"){var wt=Pe.range.map(Pe.r2d||Number);f(ke)||(ke=Number(ke.substr(1))),Pe._tickround=2-Math.floor(Math.log(ke)/Math.LN10+.01);var Dt=Math.max(Math.abs(wt[0]),Math.abs(wt[1])),Jt=Math.floor(Math.log(Dt)/Math.LN10+.01),fr=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Jt)>fr&&(ot(Pe.exponentformat)&&!Ve(Jt)?Pe._tickexponent=3*Math.round((Jt-1)/3):Pe._tickexponent=Jt)}else Pe._tickround=null}K.tickIncrement=function(Pe,ke,lt,ct){var yt=lt?-1:1;if(f(ke))return e.increment(Pe,yt*ke);var Rt=ke.charAt(0),wt=yt*Number(ke.substr(1));if(Rt==="M")return e.incrementMonth(Pe,wt,ct);if(Rt==="L")return Math.log(Math.pow(10,Pe)+wt)/Math.LN10;if(Rt==="D"){var Dt=ke==="D2"?Ge:Ze,Jt=Pe+yt*.01,fr=e.roundUp(e.mod(Jt,1),Dt,lt);return Math.floor(Jt)+Math.log(w.round(Math.pow(10,fr),1))/Math.LN10}throw"unrecognized dtick "+String(ke)},K.tickFirst=function(Pe,ke){var lt=Pe.r2l||Number,ct=e.simpleMap(Pe.range,lt,void 0,void 0,ke),yt=ct[1]<ct[0],Rt=yt?Math.floor:Math.ceil,wt=q(ct)[0],Dt=Pe.dtick,Jt=lt(Pe.tick0);if(f(Dt)){var fr=Rt((wt-Jt)/Dt)*Dt+Jt;return(Pe.type==="category"||Pe.type==="multicategory")&&(fr=e.constrain(fr,0,Pe._categories.length-1)),fr}var Rr=Dt.charAt(0),Sr=Number(Dt.substr(1));if(Rr==="M"){for(var Pr=0,Jr=Jt,ur,wr,Br;Pr<10;){if(ur=K.tickIncrement(Jr,Dt,yt,Pe.calendar),(ur-wt)*(Jr-wt)<=0)return yt?Math.min(Jr,ur):Math.max(Jr,ur);wr=(wt-(Jr+ur)/2)/(ur-Jr),Br=Rr+(Math.abs(Math.round(wr))||1)*Sr,Jr=K.tickIncrement(Jr,Br,wr<0?!yt:yt,Pe.calendar),Pr++}return e.error("tickFirst did not converge",Pe),Jr}else{if(Rr==="L")return Math.log(Rt((Math.pow(10,wt)-Jt)/Sr)*Sr+Jt)/Math.LN10;if(Rr==="D"){var Yr=Dt==="D2"?Ge:Ze,Dr=e.roundUp(e.mod(wt,1),Yr,yt);return Math.floor(wt)+Math.log(w.round(Math.pow(10,Dr),1))/Math.LN10}else throw"unrecognized dtick "+String(Dt)}},K.tickText=function(Pe,ke,lt,ct){var yt=xt(Pe,ke),Rt=Pe.tickmode==="array",wt=lt||Rt,Dt=Pe.type,Jt=Dt==="category"?Pe.d2l_noadd:Pe.d2l,fr;if(Rt&&Array.isArray(Pe.ticktext)){var Rr=e.simpleMap(Pe.range,Pe.r2l),Sr=(Math.abs(Rr[1]-Rr[0])-(Pe._lBreaks||0))/1e4;for(fr=0;fr<Pe.ticktext.length&&!(Math.abs(ke-Jt(Pe.tickvals[fr]))<Sr);fr++);if(fr<Pe.ticktext.length)return yt.text=String(Pe.ticktext[fr]),yt}function Pr(wr){if(wr===void 0)return!0;if(lt)return wr==="none";var Br={first:Pe._tmin,last:Pe._tmax}[wr];return wr!=="all"&&ke!==Br}var Jr=lt?"never":Pe.exponentformat!=="none"&&Pr(Pe.showexponent)?"hide":"";if(Dt==="date"?Nt(Pe,yt,lt,wt):Dt==="log"?tr(Pe,yt,lt,wt,Jr):Dt==="category"?Vt(Pe,yt):Dt==="multicategory"?Pt(Pe,yt,lt):vt(Pe)?Ut(Pe,yt,lt,wt,Jr):$t(Pe,yt,lt,wt,Jr),ct||(Pe.tickprefix&&!Pr(Pe.showtickprefix)&&(yt.text=Pe.tickprefix+yt.text),Pe.ticksuffix&&!Pr(Pe.showticksuffix)&&(yt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var ur=function(wr){var Br=Pe.l2p(wr);return Br>=0&&Br<=Pe._length?wr:null};yt.xbnd=[ur(yt.x-.5),ur(yt.x+Pe.dtick-.5)]}return yt},K.hoverLabelText=function(Pe,ke,lt){lt&&(Pe=e.extendFlat({},Pe,{hoverformat:lt}));var ct=Array.isArray(ke)?ke[0]:ke,yt=Array.isArray(ke)?ke[1]:void 0;if(yt!==void 0&&yt!==ct)return K.hoverLabelText(Pe,ct,lt)+" - "+K.hoverLabelText(Pe,yt,lt);var Rt=Pe.type==="log"&&ct<=0,wt=K.tickText(Pe,Pe.c2l(Rt?-ct:ct),"hover").text;return Rt?ct===0?"0":E+wt:wt};function xt(Pe,ke,lt){var ct=Pe.tickfont||{};return{x:ke,dx:0,dy:0,text:lt||"",fontSize:ct.size,font:ct.family,fontColor:ct.color}}function Nt(Pe,ke,lt,ct){var yt=Pe._tickround,Rt=lt&&Pe.hoverformat||K.getTickFormat(Pe);ct&&(f(yt)?yt=4:yt={y:"m",m:"d",d:"M",M:"S",S:4}[yt]);var wt=e.formatDate(ke.x,Rt,yt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Dt,Jt=wt.indexOf(`
`);if(Jt!==-1&&(Dt=wt.substr(Jt+1),wt=wt.substr(0,Jt)),ct&&(wt==="00:00:00"||wt==="00:00"?(wt=Dt,Dt=""):wt.length===8&&(wt=wt.replace(/:00$/,""))),Dt)if(lt)yt==="d"?wt+=", "+Dt:wt=Dt+(wt?", "+wt:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Dt)Pe._prevDateHead=Dt,wt+="<br>"+Dt;else{var fr=Ct(Pe),Rr=Pe._trueSide||Pe.side;(!fr&&Rr==="top"||fr&&Rr==="bottom")&&(wt+="<br> ")}ke.text=wt}function tr(Pe,ke,lt,ct,yt){var Rt=Pe.dtick,wt=ke.x,Dt=Pe.tickformat,Jt=typeof Rt=="string"&&Rt.charAt(0);if(yt==="never"&&(yt=""),ct&&Jt!=="L"&&(Rt="L3",Jt="L"),Dt||Jt==="L")ke.text=Ae(Math.pow(10,wt),Pe,yt,ct);else if(f(Rt)||Jt==="D"&&e.mod(wt+.01,1)<.1){var fr=Math.round(wt),Rr=Math.abs(fr),Sr=Pe.exponentformat;Sr==="power"||ot(Sr)&&Ve(fr)?(fr===0?ke.text=1:fr===1?ke.text="10":ke.text="10<sup>"+(fr>1?"":E)+Rr+"</sup>",ke.fontSize*=1.25):(Sr==="e"||Sr==="E")&&Rr>2?ke.text="1"+Sr+(fr>0?"+":E)+Rr:(ke.text=Ae(Math.pow(10,wt),Pe,"","fakehover"),Rt==="D1"&&Pe._id.charAt(0)==="y"&&(ke.dy-=ke.fontSize/6))}else if(Jt==="D")ke.text=String(Math.round(Math.pow(10,e.mod(wt,1)))),ke.fontSize*=.75;else throw"unrecognized dtick "+String(Rt);if(Pe.dtick==="D1"){var Pr=String(ke.text).charAt(0);(Pr==="0"||Pr==="1")&&(Pe._id.charAt(0)==="y"?ke.dx-=ke.fontSize/4:(ke.dy+=ke.fontSize/2,ke.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*ke.fontSize*(wt<0?.5:.25)))}}function Vt(Pe,ke){var lt=Pe._categories[Math.round(ke.x)];lt===void 0&&(lt=""),ke.text=String(lt)}function Pt(Pe,ke,lt){var ct=Math.round(ke.x),yt=Pe._categories[ct]||[],Rt=yt[1]===void 0?"":String(yt[1]),wt=yt[0]===void 0?"":String(yt[0]);lt?ke.text=wt+" - "+Rt:(ke.text=Rt,ke.text2=wt)}function $t(Pe,ke,lt,ct,yt){yt==="never"?yt="":Pe.showexponent==="all"&&Math.abs(ke.x/Pe.dtick)<1e-6&&(yt="hide"),ke.text=Ae(ke.x,Pe,yt,ct)}function Ut(Pe,ke,lt,ct,yt){if(Pe.thetaunit==="radians"&&!lt){var Rt=ke.x/180;if(Rt===0)ke.text="0";else{var wt=Lt(Rt);if(wt[1]>=100)ke.text=Ae(e.deg2rad(ke.x),Pe,yt,ct);else{var Dt=ke.x<0;wt[1]===1?wt[0]===1?ke.text="\u03C0":ke.text=wt[0]+"\u03C0":ke.text=["<sup>",wt[0],"</sup>","\u2044","<sub>",wt[1],"</sub>","\u03C0"].join(""),Dt&&(ke.text=E+ke.text)}}}else ke.text=Ae(ke.x,Pe,yt,ct)}function Lt(Pe){function ke(Dt,Jt){return Math.abs(Dt-Jt)<=1e-6}function lt(Dt,Jt){return ke(Jt,0)?Dt:lt(Jt,Dt%Jt)}function ct(Dt){for(var Jt=1;!ke(Math.round(Dt*Jt)/Jt,Dt);)Jt*=10;return Jt}var yt=ct(Pe),Rt=Pe*yt,wt=Math.abs(lt(Rt,yt));return[Math.round(Rt/wt),Math.round(yt/wt)]}var Ye=["f","p","n","\u03BC","m","","k","M","G","T"];function ot(Pe){return Pe==="SI"||Pe==="B"}function Ve(Pe){return Pe>14||Pe<-15}function Ae(Pe,ke,lt,ct){var yt=Pe<0,Rt=ke._tickround,wt=lt||ke.exponentformat||"B",Dt=ke._tickexponent,Jt=K.getTickFormat(ke),fr=ke.separatethousands;if(ct){var Rr={exponentformat:wt,minexponent:ke.minexponent,dtick:ke.showexponent==="none"?ke.dtick:f(Pe)&&Math.abs(Pe)||1,range:ke.showexponent==="none"?ke.range.map(ke.r2d):[0,Pe||1]};We(Rr),Rt=(Number(Rr._tickround)||0)+4,Dt=Rr._tickexponent,ke.hoverformat&&(Jt=ke.hoverformat)}if(Jt)return ke._numFormat(Jt)(Pe).replace(/-/g,E);var Sr=Math.pow(10,-Rt)/2;if(wt==="none"&&(Dt=0),Pe=Math.abs(Pe),Pe<Sr)Pe="0",yt=!1;else{if(Pe+=Sr,Dt&&(Pe*=Math.pow(10,-Dt),Rt+=Dt),Rt===0)Pe=String(Math.floor(Pe));else if(Rt<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+Rt);for(var Pr=Rt;Pr<0;Pr++)Pe+="0"}else{Pe=String(Pe);var Jr=Pe.indexOf(".")+1;Jr&&(Pe=Pe.substr(0,Jr+Rt).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,ke._separators,fr)}if(Dt&&wt!=="hide"){ot(wt)&&Ve(Dt)&&(wt="power");var ur;Dt<0?ur=E+-Dt:wt!=="power"?ur="+"+Dt:ur=String(Dt),wt==="e"||wt==="E"?Pe+=wt+ur:wt==="power"?Pe+="\xD710<sup>"+ur+"</sup>":wt==="B"&&Dt===9?Pe+="B":ot(wt)&&(Pe+=Ye[Dt/3+5])}return yt?E+Pe:Pe}K.getTickFormat=function(Pe){var ke;function lt(Jt){return typeof Jt!="string"?Jt:Number(Jt.replace("M",""))*A}function ct(Jt,fr){var Rr=["L","D"];if(typeof Jt==typeof fr){if(typeof Jt=="number")return Jt-fr;var Sr=Rr.indexOf(Jt.charAt(0)),Pr=Rr.indexOf(fr.charAt(0));return Sr===Pr?Number(Jt.replace(/(L|D)/g,""))-Number(fr.replace(/(L|D)/g,"")):Sr-Pr}else return typeof Jt=="number"?1:-1}function yt(Jt,fr,Rr){var Sr=Rr||function(ur){return ur},Pr=fr[0],Jr=fr[1];return(!Pr&&typeof Pr!="number"||Sr(Pr)<=Sr(Jt))&&(!Jr&&typeof Jr!="number"||Sr(Jr)>=Sr(Jt))}function Rt(Jt,fr){var Rr=fr[0]===null,Sr=fr[1]===null,Pr=ct(Jt,fr[0])>=0,Jr=ct(Jt,fr[1])<=0;return(Rr||Pr)&&(Sr||Jr)}var wt,Dt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(ke=0;ke<Pe.tickformatstops.length;ke++)if(Dt=Pe.tickformatstops[ke],Dt.enabled&&yt(Pe.dtick,Dt.dtickrange,lt)){wt=Dt;break}break}case"log":{for(ke=0;ke<Pe.tickformatstops.length;ke++)if(Dt=Pe.tickformatstops[ke],Dt.enabled&&Rt(Pe.dtick,Dt.dtickrange)){wt=Dt;break}break}}return wt?wt.value:Pe.tickformat},K.getSubplots=function(Pe,ke){var lt=Pe._fullLayout._subplots,ct=lt.cartesian.concat(lt.gl2d||[]),yt=ke?K.findSubplotsWithAxis(ct,ke):ct;return yt.sort(function(Rt,wt){var Dt=Rt.substr(1).split("y"),Jt=wt.substr(1).split("y");return Dt[0]===Jt[0]?+Dt[1]-+Jt[1]:+Dt[0]-+Jt[0]}),yt},K.findSubplotsWithAxis=function(Pe,ke){for(var lt=new RegExp(ke._id.charAt(0)==="x"?"^"+ke._id+"y":ke._id+"$"),ct=[],yt=0;yt<Pe.length;yt++){var Rt=Pe[yt];lt.test(Rt)&&ct.push(Rt)}return ct},K.makeClipPaths=function(Pe){var ke=Pe._fullLayout;if(!ke._hasOnlyLargeSploms){var lt={_offset:0,_length:ke.width,_id:""},ct={_offset:0,_length:ke.height,_id:""},yt=K.list(Pe,"x",!0),Rt=K.list(Pe,"y",!0),wt=[],Dt,Jt;for(Dt=0;Dt<yt.length;Dt++)for(wt.push({x:yt[Dt],y:ct}),Jt=0;Jt<Rt.length;Jt++)Dt===0&&wt.push({x:lt,y:Rt[Jt]}),wt.push({x:yt[Dt],y:Rt[Jt]});var fr=ke._clips.selectAll(".axesclip").data(wt,function(Rr){return Rr.x._id+Rr.y._id});fr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Rr){return"clip"+ke._uid+Rr.x._id+Rr.y._id}).append("rect"),fr.exit().remove(),fr.each(function(Rr){w.select(this).select("rect").attr({x:Rr.x._offset||0,y:Rr.y._offset||0,width:Rr.x._length||1,height:Rr.y._length||1})})}},K.draw=function(Pe,ke,lt){var ct=Pe._fullLayout;ke==="redraw"&&ct._paper.selectAll("g.subplot").each(function(Rt){var wt=Rt[0],Dt=ct._plots[wt];if(Dt){var Jt=Dt.xaxis,fr=Dt.yaxis;Dt.xaxislayer.selectAll("."+Jt._id+"tick").remove(),Dt.yaxislayer.selectAll("."+fr._id+"tick").remove(),Dt.xaxislayer.selectAll("."+Jt._id+"tick2").remove(),Dt.yaxislayer.selectAll("."+fr._id+"tick2").remove(),Dt.xaxislayer.selectAll("."+Jt._id+"divider").remove(),Dt.yaxislayer.selectAll("."+fr._id+"divider").remove(),Dt.minorGridlayer&&Dt.minorGridlayer.selectAll("path").remove(),Dt.gridlayer&&Dt.gridlayer.selectAll("path").remove(),Dt.zerolinelayer&&Dt.zerolinelayer.selectAll("path").remove(),ct._infolayer.select(".g-"+Jt._id+"title").remove(),ct._infolayer.select(".g-"+fr._id+"title").remove()}});var yt=!ke||ke==="redraw"?K.listIds(Pe):ke;return e.syncOrAsync(yt.map(function(Rt){return function(){if(!!Rt){var wt=K.getFromId(Pe,Rt),Dt=K.drawOne(Pe,wt,lt);return wt._r=wt.range.slice(),wt._rl=e.simpleMap(wt._r,wt.r2l),Dt}}}))},K.drawOne=function(Pe,ke,lt){lt=lt||{};var ct,yt,Rt;ke.setScale();var wt=Pe._fullLayout,Dt=ke._id,Jt=Dt.charAt(0),fr=K.counterLetter(Dt),Rr=wt._plots[ke._mainSubplot];if(!Rr)return;var Sr=Rr[Jt+"axislayer"],Pr=ke._mainLinePosition,Jr=ke._mainMirrorPosition,ur=ke._vals=K.calcTicks(ke),wr=[ke.mirror,Pr,Jr].join("_");for(ct=0;ct<ur.length;ct++)ur[ct].axInfo=wr;ke._selections={},ke._tickAngles&&(ke._prevTickAngles=ke._tickAngles),ke._tickAngles={},ke._depth=null;var Br={};function Yr(Xt){var mr=Dt+(Xt||"tick");return Br[mr]||(Br[mr]=_t(ke,mr)),Br[mr]}if(!!ke.visible){var Dr=K.makeTransTickFn(ke),at=K.makeTransTickLabelFn(ke),zt,qt,hr=ke.ticks==="inside",Ur=ke.ticks==="outside";if(ke.tickson==="boundaries"){var Gr=Je(ke,ur);qt=K.clipEnds(ke,Gr),zt=hr?qt:Gr}else qt=K.clipEnds(ke,ur),zt=hr&&ke.ticklabelmode!=="period"?qt:ur;var Ir=ke._gridVals=qt,kr=St(ke,ur);if(!wt._hasOnlyLargeSploms){var Kr=ke._subplotsWith,kn={};for(ct=0;ct<Kr.length;ct++){yt=Kr[ct],Rt=wt._plots[yt];var yn=Rt[fr+"axis"],Yn=yn._mainAxis._id;if(!kn[Yn]){kn[Yn]=1;var In=Jt==="x"?"M0,"+yn._offset+"v"+yn._length:"M"+yn._offset+",0h"+yn._length;K.drawGrid(Pe,ke,{vals:Ir,counterAxis:yn,layer:Rt.gridlayer.select("."+Dt),minorLayer:Rt.minorGridlayer.select("."+Dt),path:In,transFn:Dr}),K.drawZeroLine(Pe,ke,{counterAxis:yn,layer:Rt.zerolinelayer,path:In,transFn:Dr})}}}var Jn,Zn=K.getTickSigns(ke),ba=K.getTickSigns(ke,"minor");if(ke.ticks||ke.minor&&ke.minor.ticks){var Pa=K.makeTickPath(ke,Pr,Zn[2]),xi=K.makeTickPath(ke,Pr,ba[2],{minor:!0}),Ka,ti,$a,Cr;if(ke._anchorAxis&&ke.mirror&&ke.mirror!==!0?(Ka=K.makeTickPath(ke,Jr,Zn[3]),ti=K.makeTickPath(ke,Jr,ba[3],{minor:!0}),$a=Pa+Ka,Cr=xi+ti):(Ka="",ti="",$a=Pa,Cr=xi),ke.showdividers&&Ur&&ke.tickson==="boundaries"){var bn={};for(ct=0;ct<kr.length;ct++)bn[kr[ct].x]=1;Jn=function(Xt){return bn[Xt.x]?Ka:$a}}else Jn=function(Xt){return Xt.minor?Cr:$a}}if(K.drawTicks(Pe,ke,{vals:zt,layer:Sr,path:Jn,transFn:Dr}),ke.mirror==="allticks"){var gn=Object.keys(ke._linepositions||{});for(ct=0;ct<gn.length;ct++){yt=gn[ct],Rt=wt._plots[yt];var Ln=ke._linepositions[yt]||[],qn=Ln[0],da=Ln[1],oa=Ln[2],Bn=K.makeTickPath(ke,qn,oa?Zn[0]:ba[0],{minor:oa})+K.makeTickPath(ke,da,oa?Zn[1]:ba[1],{minor:oa});K.drawTicks(Pe,ke,{vals:zt,layer:Rt[Jt+"axislayer"],path:Bn,transFn:Dr})}}var $n=[];if($n.push(function(){return K.drawLabels(Pe,ke,{vals:ur,layer:Sr,plotinfo:Rt,transFn:at,labelFns:K.makeLabelFns(ke,Pr)})}),ke.type==="multicategory"){var Xa={x:2,y:10}[Jt];$n.push(function(){var Xt={x:"height",y:"width"}[Jt],mr=Yr()[Xt]+Xa+(ke._tickAngles[Dt+"tick"]?ke.tickfont.size*j:0);return K.drawLabels(Pe,ke,{vals:tt(ke,ur),layer:Sr,cls:Dt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Dr,labelFns:K.makeLabelFns(ke,Pr+mr*Zn[4])})}),$n.push(function(){return ke._depth=Zn[4]*(Yr("tick2")[ke.side]-Pr),Wt(Pe,ke,{vals:kr,layer:Sr,path:K.makeTickPath(ke,Pr,Zn[4],{len:ke._depth}),transFn:Dr})})}else ke.title.hasOwnProperty("standoff")&&$n.push(function(){ke._depth=Zn[4]*(Yr()[ke.side]-Pr)});var gi=T.getComponentMethod("rangeslider","isVisible")(ke);return $n.push(function(){var Xt=ke.side.charAt(0),mr=re[ke.side].charAt(0),un=K.getPxPosition(Pe,ke),xn=Ur?ke.ticklen:0,sn,Cn,Mn,dn;if((ke.automargin||gi)&&(ke.type==="multicategory"?sn=Yr("tick2"):(sn=Yr(),Jt==="x"&&Xt==="b"&&(ke._depth=Math.max(sn.width>0?sn.bottom-un:0,xn)))),ke.automargin){Cn={x:0,y:0,r:0,l:0,t:0,b:0};var Tr=[0,1];if(Jt==="x"){if(Xt==="b"?Cn[Xt]=ke._depth:(Cn[Xt]=ke._depth=Math.max(sn.width>0?un-sn.top:0,xn),Tr.reverse()),sn.width>0){var Ar=sn.right-(ke._offset+ke._length);Ar>0&&(Cn.xr=1,Cn.r=Ar);var Hr=ke._offset-sn.left;Hr>0&&(Cn.xl=0,Cn.l=Hr)}}else if(Xt==="l"?Cn[Xt]=ke._depth=Math.max(sn.height>0?un-sn.left:0,xn):(Cn[Xt]=ke._depth=Math.max(sn.height>0?sn.right-un:0,xn),Tr.reverse()),sn.height>0){var wn=sn.bottom-(ke._offset+ke._length);wn>0&&(Cn.yb=0,Cn.b=wn);var Gn=ke._offset-sn.top;Gn>0&&(Cn.yt=1,Cn.t=Gn)}Cn[fr]=ke.anchor==="free"?ke.position:ke._anchorAxis.domain[Tr[0]],ke.title.text!==wt._dfltTitle[Jt]&&(Cn[Xt]+=Qt(ke)+(ke.title.standoff||0)),ke.mirror&&ke.anchor!=="free"&&(Mn={x:0,y:0,r:0,l:0,t:0,b:0},Mn[mr]=ke.linewidth,ke.mirror&&ke.mirror!==!0&&(Mn[mr]+=xn),ke.mirror===!0||ke.mirror==="ticks"?Mn[fr]=ke._anchorAxis.domain[Tr[1]]:(ke.mirror==="all"||ke.mirror==="allticks")&&(Mn[fr]=[ke._counterDomainMin,ke._counterDomainMax][Tr[1]]))}gi&&(dn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,ke)),typeof ke.automargin=="string"&&(He(Cn,ke.automargin),He(Mn,ke.automargin)),M.autoMargin(Pe,ft(ke),Cn),M.autoMargin(Pe,ar(ke),Mn),M.autoMargin(Pe,rr(ke),dn)}),!lt.skipTitle&&!(gi&&ke.side==="bottom")&&$n.push(function(){return Zt(Pe,ke)}),e.syncOrAsync($n)}};function He(Pe,ke){if(!!Pe){var lt=Object.keys(B).reduce(function(ct,yt){return ke.indexOf(yt)!==-1&&B[yt].forEach(function(Rt){ct[Rt]=1}),ct},{});Object.keys(Pe).forEach(function(ct){lt[ct]||(ct.length===1?Pe[ct]=0:delete Pe[ct])})}}function Je(Pe,ke){var lt=[],ct,yt=function(Rt,wt){var Dt=Rt.xbnd[wt];Dt!==null&&lt.push(e.extendFlat({},Rt,{x:Dt}))};if(ke.length){for(ct=0;ct<ke.length;ct++)yt(ke[ct],0);yt(ke[ct-1],1)}return lt}function tt(Pe,ke){for(var lt=[],ct={},yt=0;yt<ke.length;yt++){var Rt=ke[yt];ct[Rt.text2]?ct[Rt.text2].push(Rt.x):ct[Rt.text2]=[Rt.x]}for(var wt in ct)lt.push(xt(Pe,e.interp(ct[wt],.5),wt));return lt}function St(Pe,ke){var lt=[],ct,yt,Rt=ke.length&&ke[ke.length-1].x<ke[0].x,wt=function(Jt,fr){var Rr=Jt.xbnd[fr];Rr!==null&&lt.push(e.extendFlat({},Jt,{x:Rr}))};if(Pe.showdividers&&ke.length){for(ct=0;ct<ke.length;ct++){var Dt=ke[ct];Dt.text2!==yt&&wt(Dt,Rt?1:0),yt=Dt.text2}wt(ke[ct-1],Rt?0:1)}return lt}function _t(Pe,ke){var lt,ct,yt,Rt;return Pe._selections[ke].size()?(lt=1/0,ct=-1/0,yt=1/0,Rt=-1/0,Pe._selections[ke].each(function(){var wt=en(this),Dt=h.bBox(wt.node().parentNode);lt=Math.min(lt,Dt.top),ct=Math.max(ct,Dt.bottom),yt=Math.min(yt,Dt.left),Rt=Math.max(Rt,Dt.right)})):(lt=0,ct=0,yt=0,Rt=0),{top:lt,bottom:ct,left:yt,right:Rt,height:ct-lt,width:Rt-yt}}K.getTickSigns=function(Pe,ke){var lt=Pe._id.charAt(0),ct={x:"top",y:"right"}[lt],yt=Pe.side===ct?1:-1,Rt=[-1,1,yt,-yt],wt=ke?(Pe.minor||{}).ticks:Pe.ticks;return wt!=="inside"==(lt==="x")&&(Rt=Rt.map(function(Dt){return-Dt})),Pe.side&&Rt.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),Rt},K.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(ke){return a(Pe._offset+Pe.l2p(ke.x),0)}:function(ke){return a(0,Pe._offset+Pe.l2p(ke.x))}},K.makeTransTickLabelFn=function(Pe){var ke=jt(Pe),lt=ke[0],ct=ke[1];return Pe._id.charAt(0)==="x"?function(yt){return a(lt+Pe._offset+Pe.l2p(kt(yt)),ct)}:function(yt){return a(ct,lt+Pe._offset+Pe.l2p(kt(yt)))}};function kt(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function jt(Pe){var ke=Pe.ticklabelposition||"",lt=function(Jr){return ke.indexOf(Jr)!==-1},ct=lt("top"),yt=lt("left"),Rt=lt("right"),wt=lt("bottom"),Dt=lt("inside"),Jt=wt||yt||ct||Rt;if(!Jt&&!Dt)return[0,0];var fr=Pe.side,Rr=Jt?(Pe.tickwidth||0)/2:0,Sr=ue,Pr=Pe.tickfont?Pe.tickfont.size:12;return(wt||ct)&&(Rr+=Pr*X,Sr+=(Pe.linewidth||0)/2),(yt||Rt)&&(Rr+=(Pe.linewidth||0)/2,Sr+=ue),Dt&&fr==="top"&&(Sr-=Pr*(1-X)),(yt||ct)&&(Rr=-Rr),(fr==="bottom"||fr==="right")&&(Sr=-Sr),[Jt?Rr:0,Dt?Sr:0]}K.makeTickPath=function(Pe,ke,lt,ct){ct||(ct={});var yt=ct.minor;if(yt&&!Pe.minor)return"";var Rt=ct.len!==void 0?ct.len:yt?Pe.minor.ticklen:Pe.ticklen,wt=Pe._id.charAt(0),Dt=(Pe.linewidth||1)/2;return wt==="x"?"M0,"+(ke+Dt*lt)+"v"+Rt*lt:"M"+(ke+Dt*lt)+",0h"+Rt*lt},K.makeLabelFns=function(Pe,ke,lt){var ct=Pe.ticklabelposition||"",yt=function(kn){return ct.indexOf(kn)!==-1},Rt=yt("top"),wt=yt("left"),Dt=yt("right"),Jt=yt("bottom"),fr=Jt||wt||Rt||Dt,Rr=yt("inside"),Sr=ct==="inside"&&Pe.ticks==="inside"||!Rr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",Pr=0,Jr=0,ur=Sr?Pe.ticklen:0;if(Rr?ur*=-1:fr&&(ur=0),Sr&&(Pr+=ur,lt)){var wr=e.deg2rad(lt);Pr=ur*Math.cos(wr)+1,Jr=ur*Math.sin(wr)}Pe.showticklabels&&(Sr||Pe.showline)&&(Pr+=.2*Pe.tickfont.size),Pr+=(Pe.linewidth||1)/2*(Rr?-1:1);var Br={labelStandoff:Pr,labelShift:Jr},Yr,Dr,at,zt,qt=0,hr=Pe.side,Ur=Pe._id.charAt(0),Gr=Pe.tickangle,Ir;if(Ur==="x")Ir=!Rr&&hr==="bottom"||Rr&&hr==="top",zt=Ir?1:-1,Rr&&(zt*=-1),Yr=Jr*zt,Dr=ke+Pr*zt,at=Ir?1:-.2,Math.abs(Gr)===90&&(Rr?at+=Q:Gr===-90&&hr==="bottom"?at=X:Gr===90&&hr==="top"?at=Q:at=.5,qt=Q/2*(Gr/90)),Br.xFn=function(kn){return kn.dx+Yr+qt*kn.fontSize},Br.yFn=function(kn){return kn.dy+Dr+kn.fontSize*at},Br.anchorFn=function(kn,yn){if(fr){if(wt)return"end";if(Dt)return"start"}return!f(yn)||yn===0||yn===180?"middle":yn*zt<0!==Rr?"end":"start"},Br.heightFn=function(kn,yn,Yn){return yn<-60||yn>60?-.5*Yn:Pe.side==="top"!==Rr?-Yn:0};else if(Ur==="y"){if(Ir=!Rr&&hr==="left"||Rr&&hr==="right",zt=Ir?1:-1,Rr&&(zt*=-1),Yr=Pr,Dr=Jr*zt,at=0,!Rr&&Math.abs(Gr)===90&&(Gr===-90&&hr==="left"||Gr===90&&hr==="right"?at=X:at=.5),Rr){var kr=f(Gr)?+Gr:0;if(kr!==0){var Kr=e.deg2rad(kr);qt=Math.abs(Math.sin(Kr))*X*zt,at=0}}Br.xFn=function(kn){return kn.dx+ke-(Yr+kn.fontSize*at)*zt+qt*kn.fontSize},Br.yFn=function(kn){return kn.dy+Dr+kn.fontSize*Q},Br.anchorFn=function(kn,yn){return f(yn)&&Math.abs(yn)===90?"middle":Ir?"end":"start"},Br.heightFn=function(kn,yn,Yn){return Pe.side==="right"&&(yn*=-1),yn<-30?-Yn:yn<30?-.5*Yn:0}}return Br};function Bt(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}K.drawTicks=function(Pe,ke,lt){lt=lt||{};var ct=ke._id+"tick",yt=[].concat(ke.minor&&ke.minor.ticks?lt.vals.filter(function(wt){return wt.minor&&!wt.noTick}):[]).concat(ke.ticks?lt.vals.filter(function(wt){return!wt.minor&&!wt.noTick}):[]),Rt=lt.layer.selectAll("path."+ct).data(yt,Bt);Rt.exit().remove(),Rt.enter().append("path").classed(ct,1).classed("ticks",1).classed("crisp",lt.crisp!==!1).each(function(wt){return t.stroke(w.select(this),wt.minor?ke.minor.tickcolor:ke.tickcolor)}).style("stroke-width",function(wt){return h.crispRound(Pe,wt.minor?ke.minor.tickwidth:ke.tickwidth,1)+"px"}).attr("d",lt.path).style("display",null),Ht(ke,[O]),Rt.attr("transform",lt.transFn)},K.drawGrid=function(Pe,ke,lt){lt=lt||{};var ct=ke._id+"grid",yt=ke.minor&&ke.minor.showgrid,Rt=yt?lt.vals.filter(function(Yr){return Yr.minor}):[],wt=ke.showgrid?lt.vals.filter(function(Yr){return!Yr.minor}):[],Dt=lt.counterAxis;if(Dt&&K.shouldShowZeroLine(Pe,ke,Dt))for(var Jt=ke.tickmode==="array",fr=0;fr<wt.length;fr++){var Rr=wt[fr].x;if(Jt?!Rr:Math.abs(Rr)<ke.dtick/100)if(wt=wt.slice(0,fr).concat(wt.slice(fr+1)),Jt)fr--;else break}ke._gw=h.crispRound(Pe,ke.gridwidth,1);for(var Sr=yt?h.crispRound(Pe,ke.minor.gridwidth,1):0,Pr=lt.layer,Jr=lt.minorLayer,ur=1;ur>=0;ur--){var wr=ur?Pr:Jr;if(!!wr){var Br=wr.selectAll("path."+ct).data(ur?wt:Rt,Bt);Br.exit().remove(),Br.enter().append("path").classed(ct,1).classed("crisp",lt.crisp!==!1),Br.attr("transform",lt.transFn).attr("d",lt.path).each(function(Yr){return t.stroke(w.select(this),Yr.minor?ke.minor.gridcolor:ke.gridcolor||"#ddd")}).style("stroke-dasharray",function(Yr){return h.dashStyle(Yr.minor?ke.minor.griddash:ke.griddash,Yr.minor?ke.minor.gridwidth:ke.gridwidth)}).style("stroke-width",function(Yr){return(Yr.minor?Sr:ke._gw)+"px"}).style("display",null),typeof lt.path=="function"&&Br.attr("d",lt.path)}}Ht(ke,[D,R])},K.drawZeroLine=function(Pe,ke,lt){lt=lt||lt;var ct=ke._id+"zl",yt=K.shouldShowZeroLine(Pe,ke,lt.counterAxis),Rt=lt.layer.selectAll("path."+ct).data(yt?[{x:0,id:ke._id}]:[]);Rt.exit().remove(),Rt.enter().append("path").classed(ct,1).classed("zl",1).classed("crisp",lt.crisp!==!1).each(function(){lt.layer.selectAll("path").sort(function(wt,Dt){return V(wt.id,Dt.id)})}),Rt.attr("transform",lt.transFn).attr("d",lt.path).call(t.stroke,ke.zerolinecolor||t.defaultLine).style("stroke-width",h.crispRound(Pe,ke.zerolinewidth,ke._gw||1)+"px").style("display",null),Ht(ke,[I])},K.drawLabels=function(Pe,ke,lt){lt=lt||{};var ct=Pe._fullLayout,yt=ke._id,Rt=yt.charAt(0),wt=lt.cls||yt+"tick",Dt=lt.vals.filter(function(zt){return zt.text}),Jt=lt.labelFns,fr=lt.secondary?0:ke.tickangle,Rr=(ke._prevTickAngles||{})[wt],Sr=lt.layer.selectAll("g."+wt).data(ke.showticklabels?Dt:[],Bt),Pr=[];Sr.enter().append("g").classed(wt,1).append("text").attr("text-anchor","middle").each(function(zt){var qt=w.select(this),hr=Pe._promises.length;qt.call(n.positionText,Jt.xFn(zt),Jt.yFn(zt)).call(h.font,zt.font,zt.fontSize,zt.fontColor).text(zt.text).call(n.convertToTspans,Pe),Pe._promises[hr]?Pr.push(Pe._promises.pop().then(function(){Jr(qt,fr)})):Jr(qt,fr)}),Ht(ke,[z]),Sr.exit().remove(),lt.repositionOnUpdate&&Sr.each(function(zt){w.select(this).select("text").call(n.positionText,Jt.xFn(zt),Jt.yFn(zt))});function Jr(zt,qt){zt.each(function(hr){var Ur=w.select(this),Gr=Ur.select(".text-math-group"),Ir=Jt.anchorFn(hr,qt),kr=lt.transFn.call(Ur.node(),hr)+(f(qt)&&+qt!=0?" rotate("+qt+","+Jt.xFn(hr)+","+(Jt.yFn(hr)-hr.fontSize/2)+")":""),Kr=n.lineCount(Ur),kn=j*hr.fontSize,yn=Jt.heightFn(hr,f(qt)?+qt:0,(Kr-1)*kn);if(yn&&(kr+=a(0,yn)),Gr.empty()){var Yn=Ur.select("text");Yn.attr({transform:kr,"text-anchor":Ir}),Yn.style("opacity",1),ke._adjustTickLabelsOverflow&&ke._adjustTickLabelsOverflow()}else{var In=h.bBox(Gr.node()).width,Jn=In*{end:-.5,start:.5}[Ir];Gr.attr("transform",kr+a(Jn,0))}})}ke._adjustTickLabelsOverflow=function(){var zt=ke.ticklabeloverflow;if(!(!zt||zt==="allow")){var qt=zt.indexOf("hide")!==-1,hr=ke._id.charAt(0)==="x",Ur=0,Gr=hr?Pe._fullLayout.width:Pe._fullLayout.height;if(zt.indexOf("domain")!==-1){var Ir=e.simpleMap(ke.range,ke.r2l);Ur=ke.l2p(Ir[0])+ke._offset,Gr=ke.l2p(Ir[1])+ke._offset}var kr=Math.min(Ur,Gr),Kr=Math.max(Ur,Gr),kn=ke.side,yn=1/0,Yn=-1/0;Sr.each(function(ba){var Pa=w.select(this),xi=Pa.select(".text-math-group");if(xi.empty()){var Ka=h.bBox(Pa.node()),ti=0;hr?(Ka.right>Kr||Ka.left<kr)&&(ti=1):(Ka.bottom>Kr||Ka.top+(ke.tickangle?0:ba.fontSize/4)<kr)&&(ti=1);var $a=Pa.select("text");ti?qt&&$a.style("opacity",0):($a.style("opacity",1),kn==="bottom"||kn==="right"?yn=Math.min(yn,hr?Ka.top:Ka.left):yn=-1/0,kn==="top"||kn==="left"?Yn=Math.max(Yn,hr?Ka.bottom:Ka.right):Yn=1/0)}});for(var In in ct._plots){var Jn=ct._plots[In];if(!(ke._id!==Jn.xaxis._id&&ke._id!==Jn.yaxis._id)){var Zn=hr?Jn.yaxis:Jn.xaxis;Zn&&(Zn["_visibleLabelMin_"+ke._id]=yn,Zn["_visibleLabelMax_"+ke._id]=Yn)}}}},ke._hideCounterAxisInsideTickLabels=function(zt){var qt=ke._id.charAt(0)==="x",hr=[];for(var Ur in ct._plots){var Gr=ct._plots[Ur];ke._id!==Gr.xaxis._id&&ke._id!==Gr.yaxis._id||hr.push(qt?Gr.yaxis:Gr.xaxis)}hr.forEach(function(Ir,kr){Ir&&Ct(Ir)&&(zt||[I,R,D,O,z]).forEach(function(Kr){var kn=Kr.K==="tick"&&Kr.L==="text"&&ke.ticklabelmode==="period",yn=ct._plots[ke._mainSubplot],Yn;Kr.K===I.K?Yn=yn.zerolinelayer.selectAll("."+ke._id+"zl"):Kr.K===R.K?Yn=yn.minorGridlayer.selectAll("."+ke._id):Kr.K===D.K?Yn=yn.gridlayer.selectAll("."+ke._id):Yn=yn[ke._id.charAt(0)+"axislayer"],Yn.each(function(){var In=w.select(this);Kr.L&&(In=In.selectAll(Kr.L)),In.each(function(Jn){var Zn=ke.l2p(kn?kt(Jn):Jn.x)+ke._offset,ba=w.select(this);Zn<ke["_visibleLabelMax_"+Ir._id]&&Zn>ke["_visibleLabelMin_"+Ir._id]?ba.style("display","none"):Kr.K==="tick"&&!kr&&ba.style("display",null)})})})})},Jr(Sr,Rr+1?Rr:fr);function ur(){return Pr.length&&Promise.all(Pr)}var wr=null;function Br(){if(Jr(Sr,fr),Dt.length&&Rt==="x"&&!f(fr)&&(ke.type!=="log"||String(ke.dtick).charAt(0)!=="D")){wr=0;var zt=0,qt=[],hr;if(Sr.each(function(Ka){zt=Math.max(zt,Ka.fontSize);var ti=ke.l2p(Ka.x),$a=en(this),Cr=h.bBox($a.node());qt.push({top:0,bottom:10,height:10,left:ti-Cr.width/2,right:ti+Cr.width/2+2,width:Cr.width+2})}),(ke.tickson==="boundaries"||ke.showdividers)&&!lt.secondary){var Ur=2;for(ke.ticks&&(Ur+=ke.tickwidth/2),hr=0;hr<qt.length;hr++){var Gr=Dt[hr].xbnd,Ir=qt[hr];if(Gr[0]!==null&&Ir.left-ke.l2p(Gr[0])<Ur||Gr[1]!==null&&ke.l2p(Gr[1])-Ir.right<Ur){wr=90;break}}}else{var kr=Dt.length,Kr=Math.abs((Dt[kr-1].x-Dt[0].x)*ke._m)/(kr-1),kn=ke.ticklabelposition||"",yn=function(Ka){return kn.indexOf(Ka)!==-1},Yn=yn("top"),In=yn("left"),Jn=yn("right"),Zn=yn("bottom"),ba=Zn||In||Yn||Jn,Pa=ba?(ke.tickwidth||0)+2*ue:0,xi=Kr<zt*2.5||ke.type==="multicategory"||ke._name==="realaxis";for(hr=0;hr<qt.length-1;hr++)if(e.bBoxIntersect(qt[hr],qt[hr+1],Pa)){wr=xi?90:30;break}}wr&&Jr(Sr,wr)}}ke._selections&&(ke._selections[wt]=Sr);var Yr=[ur];ke.automargin&&ct._redrawFromAutoMarginCount&&Rr===90?(wr=90,Yr.push(function(){Jr(Sr,Rr)})):Yr.push(Br),ke._tickAngles&&Yr.push(function(){ke._tickAngles[wt]=wr===null?f(fr)?fr:0:wr});var Dr=ke._anchorAxis;Dr&&Dr.autorange&&Ct(ke)&&!ee(ct,ke._id)&&(ct._insideTickLabelsAutorange||(ct._insideTickLabelsAutorange={}),ct._insideTickLabelsAutorange[Dr._name+".autorange"]=Dr.autorange,Yr.push(function(){Sr.each(function(qt,hr){var Ur=en(this),Gr=Ur.select(".text-math-group");Gr.empty()&&(ke._vals[hr].bb=h.bBox(Ur.node()))})}));var at=e.syncOrAsync(Yr);return at&&at.then&&Pe._promises.push(at),at};function Wt(Pe,ke,lt){var ct=ke._id+"divider",yt=lt.vals,Rt=lt.layer.selectAll("path."+ct).data(yt,Bt);Rt.exit().remove(),Rt.enter().insert("path",":first-child").classed(ct,1).classed("crisp",1).call(t.stroke,ke.dividercolor).style("stroke-width",h.crispRound(Pe,ke.dividerwidth,1)+"px"),Rt.attr("transform",lt.transFn).attr("d",lt.path)}K.getPxPosition=function(Pe,ke){var lt=Pe._fullLayout._size,ct=ke._id.charAt(0),yt=ke.side,Rt;if(ke.anchor!=="free"?Rt=ke._anchorAxis:ct==="x"?Rt={_offset:lt.t+(1-(ke.position||0))*lt.h,_length:0}:ct==="y"&&(Rt={_offset:lt.l+(ke.position||0)*lt.w,_length:0}),yt==="top"||yt==="left")return Rt._offset;if(yt==="bottom"||yt==="right")return Rt._offset+Rt._length};function Qt(Pe){var ke=Pe.title.font.size,lt=(Pe.title.text.match(n.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?lt?ke*(X+lt*j):ke*X:lt?ke*(lt+1)*j:ke}function Zt(Pe,ke){var lt=Pe._fullLayout,ct=ke._id,yt=ct.charAt(0),Rt=ke.title.font.size,wt;if(ke.title.hasOwnProperty("standoff"))wt=ke._depth+ke.title.standoff+Qt(ke);else{var Dt=Ct(ke);if(ke.type==="multicategory")wt=ke._depth;else{var Jt=1.5*Rt;Dt&&(Jt=.5*Rt,ke.ticks==="outside"&&(Jt+=ke.ticklen)),wt=10+Jt+(ke.linewidth?ke.linewidth-1:0)}Dt||(yt==="x"?wt+=ke.side==="top"?Rt*(ke.showticklabels?1:0):Rt*(ke.showticklabels?1.5:.5):wt+=ke.side==="right"?Rt*(ke.showticklabels?1:.5):Rt*(ke.showticklabels?.5:0))}var fr=K.getPxPosition(Pe,ke),Rr,Sr,Pr;yt==="x"?(Sr=ke._offset+ke._length/2,Pr=ke.side==="top"?fr-wt:fr+wt):(Pr=ke._offset+ke._length/2,Sr=ke.side==="right"?fr+wt:fr-wt,Rr={rotate:"-90",offset:0});var Jr;if(ke.type!=="multicategory"){var ur=ke._selections[ke._id+"tick"];if(Jr={selection:ur,side:ke.side},ur&&ur.node()&&ur.node().parentNode){var wr=h.getTranslate(ur.node().parentNode);Jr.offsetLeft=wr.x,Jr.offsetTop=wr.y}ke.title.hasOwnProperty("standoff")&&(Jr.pad=0)}return r.draw(Pe,ct+"title",{propContainer:ke,propName:ke._name+".title.text",placeholder:lt._dfltTitle[yt],avoid:Jr,transform:Rr,attributes:{x:Sr,y:Pr,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Pe,ke,lt){var ct=e.simpleMap(ke.range,ke.r2l);return ct[0]*ct[1]<=0&&ke.zeroline&&(ke.type==="linear"||ke.type==="-")&&!(ke.rangebreaks&&ke.maskBreaks(0)===F)&&(cr(ke,0)||!Xr(Pe,ke,lt,ct)||vn(Pe,ke))},K.clipEnds=function(Pe,ke){return ke.filter(function(lt){return cr(Pe,lt.x)})};function cr(Pe,ke){var lt=Pe.l2p(ke);return lt>1&&lt<Pe._length-1}function Xr(Pe,ke,lt,ct){var yt=lt._mainAxis;if(!yt)return;var Rt=Pe._fullLayout,wt=ke._id.charAt(0),Dt=K.counterLetter(ke._id),Jt=ke._offset+(Math.abs(ct[0])<Math.abs(ct[1])==(wt==="x")?0:ke._length);function fr(ur){if(!ur.showline||!ur.linewidth)return!1;var wr=Math.max((ur.linewidth+ke.zerolinewidth)/2,1);function Br(at){return typeof at=="number"&&Math.abs(at-Jt)<wr}if(Br(ur._mainLinePosition)||Br(ur._mainMirrorPosition))return!0;var Yr=ur._linepositions||{};for(var Dr in Yr)if(Br(Yr[Dr][0])||Br(Yr[Dr][1]))return!0}var Rr=Rt._plots[lt._mainSubplot];if(!(Rr.mainplotinfo||Rr).overlays.length)return fr(lt);for(var Sr=K.list(Pe,Dt),Pr=0;Pr<Sr.length;Pr++){var Jr=Sr[Pr];if(Jr._mainAxis===yt&&fr(Jr))return!0}}function vn(Pe,ke){for(var lt=Pe._fullData,ct=ke._mainSubplot,yt=ke._id.charAt(0),Rt=0;Rt<lt.length;Rt++){var wt=lt[Rt];if(wt.visible===!0&&wt.xaxis+wt.yaxis===ct&&(T.traceIs(wt,"bar-like")&&wt.orientation==={x:"h",y:"v"}[yt]||wt.fill&&wt.fill.charAt(wt.fill.length-1)===yt))return!0}return!1}function en(Pe){var ke=w.select(Pe),lt=ke.select(".text-math-group");return lt.empty()?ke.select("text"):lt}K.allowAutoMargin=function(Pe){for(var ke=K.list(Pe,"",!0),lt=0;lt<ke.length;lt++){var ct=ke[lt];ct.automargin&&(M.allowAutoMargin(Pe,ft(ct)),ct.mirror&&M.allowAutoMargin(Pe,ar(ct))),T.getComponentMethod("rangeslider","isVisible")(ct)&&M.allowAutoMargin(Pe,rr(ct))}};function ft(Pe){return Pe._id+".automargin"}function ar(Pe){return ft(Pe)+".mirror"}function rr(Pe){return Pe._id+".rangeslider"}K.swap=function(Pe,ke){for(var lt=Kt(Pe,ke),ct=0;ct<lt.length;ct++)st(Pe,lt[ct].x,lt[ct].y)};function Kt(Pe,ke){var lt=[],ct,yt;for(ct=0;ct<ke.length;ct++){var Rt=[],wt=Pe._fullData[ke[ct]].xaxis,Dt=Pe._fullData[ke[ct]].yaxis;if(!(!wt||!Dt)){for(yt=0;yt<lt.length;yt++)(lt[yt].x.indexOf(wt)!==-1||lt[yt].y.indexOf(Dt)!==-1)&&Rt.push(yt);if(!Rt.length){lt.push({x:[wt],y:[Dt]});continue}var Jt=lt[Rt[0]],fr;if(Rt.length>1)for(yt=1;yt<Rt.length;yt++)fr=lt[Rt[yt]],Er(Jt.x,fr.x),Er(Jt.y,fr.y);Er(Jt.x,[wt]),Er(Jt.y,[Dt])}}return lt}function Er(Pe,ke){for(var lt=0;lt<ke.length;lt++)Pe.indexOf(ke[lt])===-1&&Pe.push(ke[lt])}function st(Pe,ke,lt){var ct=[],yt=[],Rt=Pe.layout,wt,Dt;for(wt=0;wt<ke.length;wt++)ct.push(K.getFromId(Pe,ke[wt]));for(wt=0;wt<lt.length;wt++)yt.push(K.getFromId(Pe,lt[wt]));var Jt=Object.keys(i),fr=["anchor","domain","overlaying","position","side","tickangle","editType"],Rr=["linear","log"];for(wt=0;wt<Jt.length;wt++){var Sr=Jt[wt],Pr=ct[0][Sr],Jr=yt[0][Sr],ur=!0,wr=!1,Br=!1;if(!(Sr.charAt(0)==="_"||typeof Pr=="function"||fr.indexOf(Sr)!==-1)){for(Dt=1;Dt<ct.length&&ur;Dt++){var Yr=ct[Dt][Sr];Sr==="type"&&Rr.indexOf(Pr)!==-1&&Rr.indexOf(Yr)!==-1&&Pr!==Yr?wr=!0:Yr!==Pr&&(ur=!1)}for(Dt=1;Dt<yt.length&&ur;Dt++){var Dr=yt[Dt][Sr];Sr==="type"&&Rr.indexOf(Jr)!==-1&&Rr.indexOf(Dr)!==-1&&Jr!==Dr?Br=!0:yt[Dt][Sr]!==Jr&&(ur=!1)}ur&&(wr&&(Rt[ct[0]._name].type="linear"),Br&&(Rt[yt[0]._name].type="linear"),et(Rt,Sr,ct,yt,Pe._fullLayout._dfltTitle))}}for(wt=0;wt<Pe._fullLayout.annotations.length;wt++){var at=Pe._fullLayout.annotations[wt];ke.indexOf(at.xref)!==-1&&lt.indexOf(at.yref)!==-1&&e.swapAttrs(Rt.annotations[wt],["?"])}}function et(Pe,ke,lt,ct,yt){var Rt=e.nestedProperty,wt=Rt(Pe[lt[0]._name],ke).get(),Dt=Rt(Pe[ct[0]._name],ke).get(),Jt;for(ke==="title"&&(wt&&wt.text===yt.x&&(wt.text=yt.y),Dt&&Dt.text===yt.y&&(Dt.text=yt.x)),Jt=0;Jt<lt.length;Jt++)Rt(Pe,lt[Jt]._name+"."+ke).set(Dt);for(Jt=0;Jt<ct.length;Jt++)Rt(Pe,ct[Jt]._name+"."+ke).set(wt)}function vt(Pe){return Pe._id==="angularaxis"}function pt(Pe,ke){for(var lt=ke._rangebreaks.length,ct=0;ct<lt;ct++){var yt=ke._rangebreaks[ct];if(Pe>=yt.min&&Pe<yt.max)return yt.max}return Pe}function Ct(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Ht(Pe,ke){Ct(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(ke)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../constants/numerical").BADNUM,T=f.isArrayOrTypedArray,e=f.isDateTime,a=f.cleanNumber,n=Math.round;U.exports=function(p,c,m){var l=p,x=m.noMultiCategory;if(T(l)&&!l.length)return"-";if(!x&&y(l))return"multicategory";if(x&&Array.isArray(l[0])){for(var u=[],A=0;A<l.length;A++)if(T(l[A]))for(var _=0;_<l[A].length;_++)u.push(l[A][_]);l=u}if(h(l,c))return"date";var g=m.autotypenumbers!=="strict";return s(l,g)?"category":t(l,g)?"linear":"-"};function r(d,p){return p?w(d):typeof d=="number"}function t(d,p){for(var c=d.length,m=0;m<c;m++)if(r(d[m],p))return!0;return!1}function h(d,p){for(var c=d.length,m=i(c),l=0,x=0,u={},A=0;A<c;A+=m){var _=n(A),g=d[_],b=String(g);u[b]||(u[b]=1,e(g,p)&&l++,w(g)&&x++)}return l>x*2}function i(d){return Math.max(1,(d-1)/1e3)}function s(d,p){for(var c=d.length,m=i(c),l=0,x=0,u={},A=0;A<c;A+=m){var _=n(A),g=d[_],b=String(g);if(!u[b]){u[b]=1;var v=typeof g;v==="boolean"?x++:(p?a(g)!==M:v==="number")?l++:v==="string"&&x++}}return x>l*2}function y(d){return T(d[0])&&T(d[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../registry"),M=o("../../lib"),T=o("../../plot_api/plot_template"),e=o("../array_container_defaults"),a=o("./layout_attributes"),n=o("./tick_value_defaults"),r=o("./tick_mark_defaults"),t=o("./tick_label_defaults"),h=o("./prefix_suffix_defaults"),i=o("./category_order_defaults"),s=o("./line_grid_defaults"),y=o("./set_convert"),d=o("./constants").WEEKDAY_PATTERN,p=o("./constants").HOUR_PATTERN;U.exports=function(u,A,_,g,b){var v=g.letter,C=g.font||{},S=g.splomStash||{},k=_("visible",!g.visibleDflt),E=A._template||{},F=A.type||E.type||"-",I;if(F==="date"){var D=f.getComponentMethod("calendars","handleDefaults");D(u,A,"calendar",g.calendar),g.noTicklabelmode||(I=_("ticklabelmode"))}var R="";(!g.noTicklabelposition||F==="multicategory")&&(R=M.coerce(u,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:v==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),g.noTicklabeloverflow||_("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),y(A,b);var O=!A.isValidRange(u.range);O&&g.reverseDflt&&(O="reversed");var z=_("autorange",O);z&&(F==="linear"||F==="-")&&_("rangemode"),_("range"),A.cleanRange(),i(u,A,_,g),F!=="category"&&!g.noHover&&_("hoverformat");var B=_("color"),G=B!==a.color.dflt?B:C.color,Q=S.label||b._dfltTitle[v];if(h(u,A,_,F,g),!k)return A;_("title.text",Q),M.coerceFont(_,"title.font",{family:C.family,size:M.bigFont(C.size),color:G}),n(u,A,_,F);var X=g.hasMinor;if(X&&(T.newContainer(A,"minor"),n(u,A,_,F,{isMinor:!0})),t(u,A,_,F,g),r(u,A,_,g),X){var j=g.isMinor;g.isMinor=!0,r(u,A,_,g),g.isMinor=j}s(u,A,_,{dfltColor:B,bgColor:g.bgColor,showGrid:g.showGrid,hasMinor:X,attributes:a}),X&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&_("mirror"),g.automargin&&_("automargin");var re=F==="multicategory";if(!g.noTickson&&(F==="category"||re)&&(A.ticks||A.showgrid)){var ue;re&&(ue="boundaries");var K=_("tickson",ue);K==="boundaries"&&delete A.ticklabelposition}if(re){var te=_("showdividers");te&&(_("dividercolor"),_("dividerwidth"))}if(F==="date")if(e(u,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var Y=0;Y<A.rangebreaks.length;Y++)if(A.rangebreaks[Y].pattern===d){A._hasDayOfWeekBreaks=!0;break}if(y(A,b),b._has("scattergl")||b._has("splom"))for(var V=0;V<g.data.length;V++){var ee=g.data[V];(ee.type==="scattergl"||ee.type==="splom")&&(ee.visible=!1,M.warn(ee.type+" traces do not work on axes with rangebreaks. Setting trace "+ee.index+" to `visible: false`."))}}return A};function c(x,u,A){function _(I,D){return M.coerce(x,u,a.rangebreaks,I,D)}var g=_("enabled");if(g){var b=_("bounds");if(b&&b.length>=2){var v="",C,S;if(b.length===2){for(C=0;C<2;C++)if(S=l(b[C]),S){v=d;break}}var k=_("pattern",v);if(k===d)for(C=0;C<2;C++)S=l(b[C]),S&&(u.bounds[C]=b[C]=S-1);if(k)for(C=0;C<2;C++)switch(S=b[C],k){case d:if(!w(S)){u.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){u.enabled=!1;return}u.bounds[C]=b[C]=S;break;case p:if(!w(S)){u.enabled=!1;return}if(S=+S,S<0||S>24){u.enabled=!1;return}u.bounds[C]=b[C]=S;break}if(A.autorange===!1){var E=A.range;if(E[0]<E[1]){if(b[0]<E[0]&&b[1]>E[1]){u.enabled=!1;return}}else if(b[0]>E[0]&&b[1]<E[1]){u.enabled=!1;return}}}else{var F=_("values");if(F&&F.length)_("dvalue");else{u.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(x){if(typeof x=="string")return m[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(o,U,H){var w=o("../../constants/docs"),f=w.FORMAT_LINK,M=w.DATE_FORMAT_LINK;function T(n,r){return{valType:"string",dflt:"",editType:"none",description:(r?e:a)("hover text",n)+["By default the values are formatted using "+(r?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}}function e(n,r){return["Sets the "+n+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+f+"."].join(" ")}function a(n,r){return e(n,r)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}U.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(o,U,H){var w=o("../../registry"),f=o("./constants");H.id2name=function(e){if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},H.name2id=function(e){if(!!e.match(f.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},H.cleanId=function(e,a,n){var r=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(r&&!n)){var t=e.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},H.list=function(T,e,a){var n=T._fullLayout;if(!n)return[];var r=H.listIds(T,e),t=new Array(r.length),h;for(h=0;h<r.length;h++){var i=r[h];t[h]=n[i.charAt(0)+"axis"+i.substr(1)]}if(!a){var s=n._subplots.gl3d||[];for(h=0;h<s.length;h++){var y=n[s[h]];e?t.push(y[e+"axis"]):t.push(y.xaxis,y.yaxis,y.zaxis)}}return t},H.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var n=a._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},H.getFromId=function(T,e,a){var n=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),n[H.id2name(e)]},H.getFromTrace=function(T,e,a){var n=T._fullLayout,r=null;if(w.traceIs(e,"gl3d")){var t=e.scene;t.substr(0,5)==="scene"&&(r=n[t][a+"axis"])}else r=H.getFromId(T,e[a+"axis"]||a);return r},H.idSort=function(T,e){var a=T.charAt(0),n=e.charAt(0);return a!==n?a>n?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},H.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function M(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}H.isLinked=function(T,e){return M(e,T._axisMatchGroups)||M(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(o,U,H){function w(f,M){var T=M.dataAttr||f._id.charAt(0),e={},a,n,r;if(M.axData)a=M.axData;else for(a=[],n=0;n<M.data.length;n++){var t=M.data[n];t[T+"axis"]===f._id&&a.push(t)}for(n=0;n<a.length;n++){var h=a[n][T];for(r=0;r<h.length;r++){var i=h[r];i!=null&&(e[i]=1)}}return Object.keys(e)}U.exports=function(M,T,e,a){if(T.type==="category"){var n=M.categoryarray,r=Array.isArray(n)&&n.length>0,t;r&&(t="array");var h=e("categoryorder",t),i;h==="array"&&(i=e("categoryarray")),!r&&h==="array"&&(h=T.categoryorder="trace"),h==="trace"?T._initialCategories=[]:h==="array"?T._initialCategories=i.slice():(i=w(T,a).sort(),h==="category ascending"?T._initialCategories=i:h==="category descending"&&(T._initialCategories=i.reverse()))}}},{}],572:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../constants/numerical"),T=M.ONEDAY,e=M.ONEWEEK;H.dtick=function(a,n){var r=n==="log",t=n==="date",h=n==="category",i=t?T:1;if(!a)return i;if(w(a))return a=Number(a),a<=0?i:h?Math.max(1,Math.round(a)):t?Math.max(.1,a):a;if(typeof a!="string"||!(t||r))return i;var s=a.charAt(0),y=a.substr(1);return y=w(y)?Number(y):0,y<=0||!(t&&s==="M"&&y===Math.round(y)||r&&s==="L"||r&&s==="D"&&(y===1||y===2))?i:a},H.tick0=function(a,n,r,t){if(n==="date")return f.cleanDate(a,f.dateTick0(r,t%e===0?1:0));if(!(t==="D1"||t==="D2"))return w(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(o,U,H){var w=o("../../lib/regex").counter;U.exports={idRegex:{x:w("x","( domain)?"),y:w("y","( domain)?")},attrRegex:w("[xy]axis"),xAxisMatch:w("xaxis"),yAxisMatch:w("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(o,U,H){var w=o("../../lib"),f=o("./autorange"),M=o("./axis_ids").id2name,T=o("./layout_attributes"),e=o("./scale_zoom"),a=o("./set_convert"),n=o("../../constants/numerical").ALMOST_EQUAL,r=o("../../constants/alignment").FROM_BL;H.handleDefaults=function(c,m,l){var x=l.axIds,u=l.axHasImage,A=m._axisConstraintGroups=[],_=m._axisMatchGroups=[],g,b,v,C,S,k,E,F;for(g=0;g<x.length;g++)C=M(x[g]),S=c[C],k=m[C],t(S,k,{axIds:x,layoutOut:m,hasImage:u[C]});function I(j,re){for(g=0;g<j.length;g++){b=j[g];for(v in b)m[M(v)][re]=b}}for(I(_,"_matchGroup"),g=0;g<A.length;g++){b=A[g];for(v in b)if(k=m[M(v)],k.fixedrange){for(var D in b){var R=M(D);(c[R]||{}).fixedrange===!1&&w.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),m[R].fixedrange=!0}break}}for(g=0;g<A.length;){b=A[g];for(v in b){k=m[M(v)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(b).length&&(A.splice(g,1),g--);break}g++}I(A,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,B=!1;function G(){F=k[E],E==="rangebreaks"&&(B=k._hasDayOfWeekBreaks)}for(g=0;g<_.length;g++){b=_[g];for(var Q=0;Q<O.length;Q++){E=O[Q],F=null;var X;for(v in b)if(C=M(v),S=c[C],k=m[C],E in k){if(!k.matches&&(X=k,E in S)){G();break}F===null&&E in S&&G()}if(E==="range"&&F&&(z=!0),E==="autorange"&&F===null&&z&&(F=!1),F===null&&E in X&&(F=X[E]),F!==null)for(v in b)k=m[M(v)],k[E]=E==="range"?F.slice():F,E==="rangebreaks"&&(k._hasDayOfWeekBreaks=B,a(k,m))}}};function t(c,m,l){var x=l.axIds,u=l.layoutOut,A=l.hasImage,_=u._axisConstraintGroups,g=u._axisMatchGroups,b=m._id,v=b.charAt(0),C=((u._splomAxes||{})[v]||{})[b]||{},S=m._id,k=S.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function E(te,Y){return w.coerce(c,m,T,te,Y)}E("constrain",A?"domain":"range"),w.coerce(c,m,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var F=m.type,I,D,R=[];for(I=0;I<x.length;I++)if(D=x[I],D!==S){var O=u[M(D)];O.type===F&&R.push(D)}var z=i(_,S);if(z){var B=[];for(I=0;I<R.length;I++)D=R[I],z[D]||B.push(D);R=B}var G=R.length,Q,X;G&&(c.matches||C.matches)&&(Q=w.coerce(c,m,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(C.matches)!==-1?C.matches:void 0}},"matches"));var j=A&&!k?m.anchor:void 0;if(G&&!Q&&(c.scaleanchor||j)&&(X=w.coerce(c,m,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",j)),Q){m._matchGroup=s(g,S,Q,1);var re=u[M(Q)],ue=h(u,m)/h(u,re);k!==(Q.charAt(0)==="x")&&(ue=(k?"x":"y")+ue),s(_,S,Q,ue)}else c.matches&&x.indexOf(c.matches)!==-1&&w.warn("ignored "+m._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(X){var K=E("scaleratio");K||(K=m.scaleratio=1),s(_,S,X,K)}else c.scaleanchor&&x.indexOf(c.scaleanchor)!==-1&&w.warn("ignored "+m._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(c,m){var l=m.domain;return l||(l=c[M(m.overlaying)].domain),l[1]-l[0]}function i(c,m){for(var l=0;l<c.length;l++)if(c[l][m])return c[l];return null}function s(c,m,l,x){var u,A,_,g,b,v=i(c,m);v===null?(v={},v[m]=1,b=c.length,c.push(v)):b=c.indexOf(v);var C=Object.keys(v);for(u=0;u<c.length;u++)if(_=c[u],u!==b&&_[l]){var S=_[l];for(A=0;A<C.length;A++)g=C[A],_[g]=y(S,y(x,v[g]));c.splice(b,1);return}if(x!==1)for(A=0;A<C.length;A++){var k=C[A];v[k]=y(x,v[k])}v[l]=1}function y(c,m){var l="",x="",u,A;typeof c=="string"&&(l=c.match(/^[xy]*/)[0],u=l.length,c=+c.substr(u)),typeof m=="string"&&(x=m.match(/^[xy]*/)[0],A=x.length,m=+m.substr(A));var _=c*m;return!u&&!A?_:!u||!A||l.charAt(0)===x.charAt(0)?l+x+c*m:u===A?_:(u>A?l.substr(A):x.substr(u))+_}function d(c,m){for(var l=m._size,x=l.h/l.w,u={},A=Object.keys(c),_=0;_<A.length;_++){var g=A[_],b=c[g];if(typeof b=="string"){var v=b.match(/^[xy]*/)[0],C=v.length;b=+b.substr(C);for(var S=v.charAt(0)==="y"?x:1/x,k=0;k<C;k++)b*=S}u[g]=b}return u}H.enforce=function(m){var l=m._fullLayout,x=l._axisConstraintGroups||[],u,A,_,g,b,v,C,S;for(u=0;u<x.length;u++){_=d(x[u],l);var k=Object.keys(_),E=1/0,F=0,I=1/0,D={},R={},O=!1;for(A=0;A<k.length;A++)g=k[A],R[g]=b=l[M(g)],b._inputDomain?b.domain=b._inputDomain.slice():b._inputDomain=b.domain.slice(),b._inputRange||(b._inputRange=b.range.slice()),b.setScale(),D[g]=v=Math.abs(b._m)/_[g],E=Math.min(E,v),(b.constrain==="domain"||!b._constraintShrinkable)&&(I=Math.min(I,v)),delete b._constraintShrinkable,F=Math.max(F,v),b.constrain==="domain"&&(O=!0);if(!(E>n*F&&!O)){for(A=0;A<k.length;A++)if(g=k[A],v=D[g],b=R[g],C=b.constrain,v!==I||C==="domain")if(S=v/I,C==="range")e(b,S);else{var z=b._inputDomain,B=(b.domain[1]-b.domain[0])/(z[1]-z[0]),G=(b.r2l(b.range[1])-b.r2l(b.range[0]))/(b.r2l(b._inputRange[1])-b.r2l(b._inputRange[0]));if(S/=B,S*G<1){b.domain=b._input.domain=z.slice(),e(b,S);continue}if(G<1&&(b.range=b._input.range=b._inputRange.slice(),S*=G),b.autorange){var Q=b.r2l(b.range[0]),X=b.r2l(b.range[1]),j=(Q+X)/2,re=j,ue=j,K=Math.abs(X-j),te=j-K*S*1.0001,Y=j+K*S*1.0001,V=f.makePadFn(l,b,0),ee=f.makePadFn(l,b,1);p(b,S);var ne=Math.abs(b._m),Z=f.concatExtremes(m,b),q=Z.min,ie=Z.max,se,ae;for(ae=0;ae<q.length;ae++)se=q[ae].val-V(q[ae])/ne,se>te&&se<re&&(re=se);for(ae=0;ae<ie.length;ae++)se=ie[ae].val+ee(ie[ae])/ne,se<Y&&se>ue&&(ue=se);var oe=(ue-re)/(2*K);S/=oe,re=b.l2r(re),ue=b.l2r(ue),b.range=b._input.range=Q<X?[re,ue]:[ue,re]}p(b,S)}}}},H.getAxisGroup=function(m,l){for(var x=m._axisMatchGroups,u=0;u<x.length;u++){var A=x[u];if(A[l])return"g"+u}return l},H.clean=function(m,l){if(l._inputDomain){for(var x=!1,u=l._id,A=m._fullLayout._axisConstraintGroups,_=0;_<A.length;_++)if(A[_][u]){x=!0;break}(!x||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function p(c,m){var l=c._inputDomain,x=r[c.constraintoward],u=l[0]+(l[1]-l[0])*x;c.domain=c._input.domain=[u+(l[0]-u)/m,u+(l[1]-u)/m],c.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=f.numberFormat,T=o("tinycolor2"),e=o("has-passive-events"),a=o("../../registry"),n=f.strTranslate,r=o("../../lib/svg_text_utils"),t=o("../../components/color"),h=o("../../components/drawing"),i=o("../../components/fx"),s=o("./axes"),y=o("../../lib/setcursor"),d=o("../../components/dragelement"),p=o("../../components/dragelement/helpers"),c=p.selectingOrDrawing,m=p.freeMode,l=o("../../constants/alignment").FROM_TL,x=o("../../lib/clear_gl_canvases"),u=o("../../plot_api/subroutines").redrawReglTraces,A=o("../plots"),_=o("./axis_ids").getFromId,g=o("../../components/selections").prepSelect,b=o("../../components/selections").clearOutline,v=o("../../components/selections").selectOnClick,C=o("./scale_zoom"),S=o("./constants"),k=S.MINDRAG,E=S.MINZOOM,F=!0;function I(se,ae,oe,be,ce,de,ye,ge){var me=se._fullLayout._zoomlayer,Me=ye+ge==="nsew",Le=(ye+ge).length===1,Oe,_e,Ee,Ze,Ge,Fe,Re,We,xt,Nt,tr,Vt,Pt,$t,Ut,Lt,Ye,ot,Ve,Ae,He,Je,tt;function St(){if(Oe=ae.xaxis,_e=ae.yaxis,xt=Oe._length,Nt=_e._length,Re=Oe._offset,We=_e._offset,Ee={},Ee[Oe._id]=Oe,Ze={},Ze[_e._id]=_e,ye&&ge)for(var Sr=ae.overlays,Pr=0;Pr<Sr.length;Pr++){var Jr=Sr[Pr].xaxis;Ee[Jr._id]=Jr;var ur=Sr[Pr].yaxis;Ze[ur._id]=ur}Ge=ie(Ee),Fe=ie(Ze),Pt=O(Ge,ge),$t=O(Fe,ye),Ut=!$t&&!Pt,Vt=Z(se,se._fullLayout._axisMatchGroups,Ee,Ze),tr=Z(se,se._fullLayout._axisConstraintGroups,Ee,Ze,Vt);var wr=tr.isSubplotConstrained||Vt.isSubplotConstrained;Lt=ge||wr,Ye=ye||wr;var Br=se._fullLayout;ot=Br._has("scattergl"),Ve=Br._has("splom"),Ae=Br._has("svg")}St();var _t=X($t+Pt,se._fullLayout.dragmode,Me),kt=R(ae,ye+ge+"drag",_t,oe,be,ce,de);if(Ut&&!Me)return kt.onmousedown=null,kt.style.pointerEvents="none",kt;var jt={element:kt,gd:se,plotinfo:ae};jt.prepFn=function(Sr,Pr,Jr){var ur=jt.dragmode,wr=se._fullLayout.dragmode;wr!==ur&&(jt.dragmode=wr),St(),Je=se._fullLayout._invScaleX,tt=se._fullLayout._invScaleY,Ut||(Me?Sr.shiftKey?wr==="pan"?wr="zoom":c(wr)||(wr="pan"):Sr.ctrlKey&&(wr="pan"):wr="pan"),m(wr)?jt.minDrag=1:jt.minDrag=void 0,c(wr)?(jt.xaxes=Ge,jt.yaxes=Fe,g(Sr,Pr,Jr,jt,wr)):(jt.clickFn=Wt,c(ur)&&Bt(),Ut||(wr==="zoom"?(jt.moveFn=st,jt.doneFn=vt,jt.minDrag=1,Er(Sr,Pr,Jr)):wr==="pan"&&(jt.moveFn=lt,jt.doneFn=wt))),se._fullLayout._redrag=function(){var Br=se._dragdata;if(Br&&Br.element===kt){var Yr=se._fullLayout.dragmode;c(Yr)||(St(),Dt([0,0,xt,Nt]),jt.moveFn(Br.dx,Br.dy))}}};function Bt(){jt.plotinfo.selection=!1,b(se)}function Wt(Sr,Pr){var Jr=jt.gd;if(Jr._fullLayout._activeShapeIndex>=0){Jr._fullLayout._deactivateShape(Jr);return}var ur=Jr._fullLayout.clickmode;if(te(Jr),Sr===2&&!Le&&Rt(),Me)ur.indexOf("select")>-1&&v(Pr,Jr,Ge,Fe,ae.id,jt),ur.indexOf("event")>-1&&i.click(Jr,Pr,ae.id);else if(Sr===1&&Le){var wr=ye?_e:Oe,Br=ye==="s"||ge==="w"?0:1,Yr=wr._name+".range["+Br+"]",Dr=z(wr,Br),at="left",zt="middle";if(wr.fixedrange)return;ye?(zt=ye==="n"?"top":"bottom",wr.side==="right"&&(at="right")):ge==="e"&&(at="right"),Jr._context.showAxisRangeEntryBoxes&&w.select(kt).call(r.makeEditable,{gd:Jr,immediate:!0,background:Jr._fullLayout.paper_bgcolor,text:String(Dr),fill:wr.tickfont?wr.tickfont.color:"#444",horizontalAlign:at,verticalAlign:zt}).on("edit",function(qt){var hr=wr.d2r(qt);hr!==void 0&&a.call("_guiRelayout",Jr,Yr,hr)})}}d.init(jt);var Qt,Zt,cr,Xr,vn,en,ft,ar,rr,Kt;function Er(Sr,Pr,Jr){var ur=kt.getBoundingClientRect();Qt=Pr-ur.left,Zt=Jr-ur.top,se._fullLayout._calcInverseTransform(se);var wr=f.apply3DTransform(se._fullLayout._invTransform)(Qt,Zt);Qt=wr[0],Zt=wr[1],cr={l:Qt,r:Qt,w:0,t:Zt,b:Zt,h:0},Xr=se._hmpixcount?se._hmlumcount/se._hmpixcount:T(se._fullLayout.plot_bgcolor).getLuminance(),vn="M0,0H"+xt+"V"+Nt+"H0V0",en=!1,ft="xy",Kt=!1,ar=j(me,Xr,Re,We,vn),rr=re(me,Re,We)}function st(Sr,Pr){if(se._transitioningWithDuration)return!1;var Jr=Math.max(0,Math.min(xt,Je*Sr+Qt)),ur=Math.max(0,Math.min(Nt,tt*Pr+Zt)),wr=Math.abs(Jr-Qt),Br=Math.abs(ur-Zt);cr.l=Math.min(Qt,Jr),cr.r=Math.max(Qt,Jr),cr.t=Math.min(Zt,ur),cr.b=Math.max(Zt,ur);function Yr(){ft="",cr.r=cr.l,cr.t=cr.b,rr.attr("d","M0,0Z")}if(tr.isSubplotConstrained)wr>E||Br>E?(ft="xy",wr/xt>Br/Nt?(Br=wr*Nt/xt,Zt>ur?cr.t=Zt-Br:cr.b=Zt+Br):(wr=Br*xt/Nt,Qt>Jr?cr.l=Qt-wr:cr.r=Qt+wr),rr.attr("d",ne(cr))):Yr();else if(Vt.isSubplotConstrained)if(wr>E||Br>E){ft="xy";var Dr=Math.min(cr.l/xt,(Nt-cr.b)/Nt),at=Math.max(cr.r/xt,(Nt-cr.t)/Nt);cr.l=Dr*xt,cr.r=at*xt,cr.b=(1-Dr)*Nt,cr.t=(1-at)*Nt,rr.attr("d",ne(cr))}else Yr();else!$t||Br<Math.min(Math.max(wr*.6,k),E)?wr<k||!Pt?Yr():(cr.t=0,cr.b=Nt,ft="x",rr.attr("d",V(cr,Zt))):!Pt||wr<Math.min(Br*.6,E)?(cr.l=0,cr.r=xt,ft="y",rr.attr("d",ee(cr,Qt))):(ft="xy",rr.attr("d",ne(cr)));cr.w=cr.r-cr.l,cr.h=cr.b-cr.t,ft&&(Kt=!0),se._dragged=Kt,ue(ar,rr,cr,vn,en,Xr),et(),se.emit("plotly_relayouting",He),en=!0}function et(){He={},(ft==="xy"||ft==="x")&&(B(Ge,cr.l/xt,cr.r/xt,He,tr.xaxes),ct("x",He)),(ft==="xy"||ft==="y")&&(B(Fe,(Nt-cr.b)/Nt,(Nt-cr.t)/Nt,He,tr.yaxes),ct("y",He))}function vt(){et(),te(se),wt(),Y(se)}var pt=[0,0,xt,Nt],Ct=null,Ht=S.REDRAWDELAY,Pe=ae.mainplot?se._fullLayout._plots[ae.mainplot]:ae;function ke(Sr){if(!se._context._scrollZoom.cartesian&&!se._fullLayout._enablescrollzoom)return;if(Bt(),se._transitioningWithDuration){Sr.preventDefault(),Sr.stopPropagation();return}St(),clearTimeout(Ct);var Pr=-Sr.deltaY;if(isFinite(Pr)||(Pr=Sr.wheelDelta/10),!isFinite(Pr)){f.log("Did not find wheel motion attributes: ",Sr);return}var Jr=Math.exp(-Math.min(Math.max(Pr,-20),20)/200),ur=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wr=(Sr.clientX-ur.left)/ur.width,Br=(ur.bottom-Sr.clientY)/ur.height,Yr;function Dr(at,zt,qt){if(at.fixedrange)return;var hr=f.simpleMap(at.range,at.r2l),Ur=hr[0]+(hr[1]-hr[0])*zt;function Gr(Ir){return at.l2r(Ur+(Ir-Ur)*qt)}at.range=hr.map(Gr)}if(Lt){for(ge||(wr=.5),Yr=0;Yr<Ge.length;Yr++)Dr(Ge[Yr],wr,Jr);ct("x"),pt[2]*=Jr,pt[0]+=pt[2]*wr*(1/Jr-1)}if(Ye){for(ye||(Br=.5),Yr=0;Yr<Fe.length;Yr++)Dr(Fe[Yr],Br,Jr);ct("y"),pt[3]*=Jr,pt[1]+=pt[3]*(1-Br)*(1/Jr-1)}Dt(pt),yt(),se.emit("plotly_relayouting",He),Ct=setTimeout(function(){!se._fullLayout||(pt=[0,0,xt,Nt],wt())},Ht),Sr.preventDefault()}ye.length*ge.length!==1&&q(kt,ke);function lt(Sr,Pr){if(Sr=Sr*Je,Pr=Pr*tt,se._transitioningWithDuration)return;if(se._fullLayout._replotting=!0,Pt==="ew"||$t==="ns"){var Jr=Pt?-Sr:0,ur=$t?-Pr:0;if(Vt.isSubplotConstrained){if(Pt&&$t){var wr=(Sr/xt-Pr/Nt)/2;Sr=wr*xt,Pr=-wr*Nt,Jr=-Sr,ur=-Pr}$t?Jr=-ur*xt/Nt:ur=-Jr*Nt/xt}Pt&&(G(Ge,Sr),ct("x")),$t&&(G(Fe,Pr),ct("y")),Dt([Jr,ur,xt,Nt]),yt(),se.emit("plotly_relayouting",He);return}function Br(Gr,Ir,kr){for(var Kr=1-Ir,kn,yn,Yn=0;Yn<Gr.length;Yn++){var In=Gr[Yn];if(!In.fixedrange){kn=In,yn=In._rl[Kr]+(In._rl[Ir]-In._rl[Kr])/Q(kr/In._length);var Jn=In.l2r(yn);Jn!==!1&&Jn!==void 0&&(In.range[Ir]=Jn)}}return kn._length*(kn._rl[Ir]-yn)/(kn._rl[Ir]-kn._rl[Kr])}var Yr=Pt==="w"==($t==="n")?1:-1;if(Pt&&$t&&(tr.isSubplotConstrained||Vt.isSubplotConstrained)){var Dr=(Sr/xt+Yr*Pr/Nt)/2;Sr=Dr*xt,Pr=Yr*Dr*Nt}var at,zt;if(Pt==="w"?Sr=Br(Ge,0,Sr):Pt==="e"?Sr=Br(Ge,1,-Sr):Pt||(Sr=0),$t==="n"?Pr=Br(Fe,1,Pr):$t==="s"?Pr=Br(Fe,0,-Pr):$t||(Pr=0),at=Pt==="w"?Sr:0,zt=$t==="n"?Pr:0,tr.isSubplotConstrained&&!Vt.isSubplotConstrained||Vt.isSubplotConstrained&&Pt&&$t&&Yr>0){var qt;if(Vt.isSubplotConstrained||!Pt&&$t.length===1){for(qt=0;qt<Ge.length;qt++)Ge[qt].range=Ge[qt]._r.slice(),C(Ge[qt],1-Pr/Nt);Sr=Pr*xt/Nt,at=Sr/2}if(Vt.isSubplotConstrained||!$t&&Pt.length===1){for(qt=0;qt<Fe.length;qt++)Fe[qt].range=Fe[qt]._r.slice(),C(Fe[qt],1-Sr/xt);Pr=Sr*Nt/xt,zt=Pr/2}}(!Vt.isSubplotConstrained||!$t)&&ct("x"),(!Vt.isSubplotConstrained||!Pt)&&ct("y");var hr=xt-Sr,Ur=Nt-Pr;Vt.isSubplotConstrained&&!(Pt&&$t)&&(Pt?(zt=at?0:Sr*Nt/xt,Ur=hr*Nt/xt):(at=zt?0:Pr*xt/Nt,hr=Ur*xt/Nt)),Dt([at,zt,hr,Ur]),yt(),se.emit("plotly_relayouting",He)}function ct(Sr,Pr){for(var Jr=Vt.isSubplotConstrained?{x:Fe,y:Ge}[Sr]:Vt[Sr+"axes"],ur=Vt.isSubplotConstrained?{x:Ge,y:Fe}[Sr]:[],wr=0;wr<Jr.length;wr++){var Br=Jr[wr],Yr=Br._id,Dr=Vt.xLinks[Yr]||Vt.yLinks[Yr],at=ur[0]||Ee[Dr]||Ze[Dr];at&&(Pr?(Pr[Br._name+".range[0]"]=Pr[at._name+".range[0]"],Pr[Br._name+".range[1]"]=Pr[at._name+".range[1]"]):Br.range=at.range.slice())}}function yt(){var Sr=[],Pr;function Jr(Br){for(Pr=0;Pr<Br.length;Pr++)Br[Pr].fixedrange||Sr.push(Br[Pr]._id)}for(Lt&&(Jr(Ge),Jr(tr.xaxes),Jr(Vt.xaxes)),Ye&&(Jr(Fe),Jr(tr.yaxes),Jr(Vt.yaxes)),He={},Pr=0;Pr<Sr.length;Pr++){var ur=Sr[Pr],wr=_(se,ur);s.drawOne(se,wr,{skipTitle:!0}),He[wr._name+".range[0]"]=wr.range[0],He[wr._name+".range[1]"]=wr.range[1]}s.redrawComponents(se,Sr)}function Rt(){if(!se._transitioningWithDuration){var Sr=se._context.doubleClick,Pr=[];Pt&&(Pr=Pr.concat(Ge)),$t&&(Pr=Pr.concat(Fe)),Vt.xaxes&&(Pr=Pr.concat(Vt.xaxes)),Vt.yaxes&&(Pr=Pr.concat(Vt.yaxes));var Jr={},ur,wr,Br;if(Sr==="reset+autosize"){for(Sr="autosize",wr=0;wr<Pr.length;wr++)if(ur=Pr[wr],ur._rangeInitial&&(ur.range[0]!==ur._rangeInitial[0]||ur.range[1]!==ur._rangeInitial[1])||!ur._rangeInitial&&!ur.autorange){Sr="reset";break}}if(Sr==="autosize")for(wr=0;wr<Pr.length;wr++)ur=Pr[wr],ur.fixedrange||(Jr[ur._name+".autorange"]=!0);else if(Sr==="reset")for((Pt||tr.isSubplotConstrained)&&(Pr=Pr.concat(tr.xaxes)),$t&&!tr.isSubplotConstrained&&(Pr=Pr.concat(tr.yaxes)),tr.isSubplotConstrained&&(Pt?$t||(Pr=Pr.concat(Fe)):Pr=Pr.concat(Ge)),wr=0;wr<Pr.length;wr++)ur=Pr[wr],ur.fixedrange||(ur._rangeInitial?(Br=ur._rangeInitial,Jr[ur._name+".range[0]"]=Br[0],Jr[ur._name+".range[1]"]=Br[1]):Jr[ur._name+".autorange"]=!0);se.emit("plotly_doubleclick",null),a.call("_guiRelayout",se,Jr)}}function wt(){Dt([0,0,xt,Nt]),f.syncOrAsync([A.previousPromises,function(){se._fullLayout._replotting=!1,a.call("_guiRelayout",se,He)}],se)}function Dt(Sr){var Pr=se._fullLayout,Jr=Pr._plots,ur=Pr._subplots.cartesian,wr,Br,Yr,Dr;if(Ve&&a.subplotsRegistry.splom.drag(se),ot){for(wr=0;wr<ur.length;wr++)if(Br=Jr[ur[wr]],Yr=Br.xaxis,Dr=Br.yaxis,Br._scene){var at=f.simpleMap(Yr.range,Yr.r2l),zt=f.simpleMap(Dr.range,Dr.r2l);Br._scene.update({range:[at[0],zt[0],at[1],zt[1]]})}}if((Ve||ot)&&(x(se),u(se)),Ae){var qt=Sr[2]/Oe._length,hr=Sr[3]/_e._length;for(wr=0;wr<ur.length;wr++){Br=Jr[ur[wr]],Yr=Br.xaxis,Dr=Br.yaxis;var Ur=(Lt||Vt.isSubplotConstrained)&&!Yr.fixedrange&&Ee[Yr._id],Gr=(Ye||Vt.isSubplotConstrained)&&!Dr.fixedrange&&Ze[Dr._id],Ir,kr,Kr,kn;if(Ur?(Ir=qt,Kr=ge||Vt.isSubplotConstrained?Sr[0]:Rr(Yr,Ir)):Vt.xaHash[Yr._id]?(Ir=qt,Kr=Sr[0]*Yr._length/Oe._length):Vt.yaHash[Yr._id]?(Ir=hr,Kr=$t==="ns"?-Sr[1]*Yr._length/_e._length:Rr(Yr,Ir,{n:"top",s:"bottom"}[$t])):(Ir=Jt(Yr,qt,hr),Kr=fr(Yr,Ir)),Gr?(kr=hr,kn=ye||Vt.isSubplotConstrained?Sr[1]:Rr(Dr,kr)):Vt.yaHash[Dr._id]?(kr=hr,kn=Sr[1]*Dr._length/_e._length):Vt.xaHash[Dr._id]?(kr=qt,kn=Pt==="ew"?-Sr[0]*Dr._length/Oe._length:Rr(Dr,kr,{e:"right",w:"left"}[Pt])):(kr=Jt(Dr,qt,hr),kn=fr(Dr,kr)),!(!Ir&&!kr)){Ir||(Ir=1),kr||(kr=1);var yn=Yr._offset-Kr/Ir,Yn=Dr._offset-kn/kr;Br.clipRect.call(h.setTranslate,Kr,kn).call(h.setScale,Ir,kr),Br.plot.call(h.setTranslate,yn,Yn).call(h.setScale,1/Ir,1/kr),(Ir!==Br.xScaleFactor||kr!==Br.yScaleFactor)&&(h.setPointGroupScale(Br.zoomScalePts,Ir,kr),h.setTextPointsScale(Br.zoomScaleTxt,Ir,kr)),h.hideOutsideRangePoints(Br.clipOnAxisFalseTraces,Br),Br.xScaleFactor=Ir,Br.yScaleFactor=kr}}}}function Jt(Sr,Pr,Jr){return Sr.fixedrange?0:Lt&&tr.xaHash[Sr._id]?Pr:Ye&&(tr.isSubplotConstrained?tr.xaHash:tr.yaHash)[Sr._id]?Jr:0}function fr(Sr,Pr){return Pr?(Sr.range=Sr._r.slice(),C(Sr,Pr),Rr(Sr,Pr)):0}function Rr(Sr,Pr,Jr){return Sr._length*(1-Pr)*l[Jr||Sr.constraintoward||"middle"]}return kt}function D(se,ae,oe,be){var ce=f.ensureSingle(se.draglayer,ae,oe,function(de){de.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return ce.call(y,be),ce.node()}function R(se,ae,oe,be,ce,de,ye){var ge=D(se,"rect",ae,oe);return w.select(ge).call(h.setRect,be,ce,de,ye),ge}function O(se,ae){for(var oe=0;oe<se.length;oe++)if(!se[oe].fixedrange)return ae;return""}function z(se,ae){var oe=se.range[ae],be=Math.abs(oe-se.range[1-ae]),ce;return se.type==="date"?oe:se.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(be)/Math.LN10))+3,M("."+ce+"g")(Math.pow(10,oe))):(ce=Math.floor(Math.log(Math.abs(oe))/Math.LN10)-Math.floor(Math.log(be)/Math.LN10)+4,M("."+String(ce)+"g")(oe))}function B(se,ae,oe,be,ce){for(var de=0;de<se.length;de++){var ye=se[de];if(!ye.fixedrange)if(ye.rangebreaks){var ge=ye._id.charAt(0)==="y",me=ge?1-ae:ae,Me=ge?1-oe:oe;be[ye._name+".range[0]"]=ye.l2r(ye.p2l(me*ye._length)),be[ye._name+".range[1]"]=ye.l2r(ye.p2l(Me*ye._length))}else{var Le=ye._rl[0],Oe=ye._rl[1]-Le;be[ye._name+".range[0]"]=ye.l2r(Le+Oe*ae),be[ye._name+".range[1]"]=ye.l2r(Le+Oe*oe)}}if(ce&&ce.length){var _e=(ae+(1-oe))/2;B(ce,_e,1-_e,be,[])}}function G(se,ae){for(var oe=0;oe<se.length;oe++){var be=se[oe];if(!be.fixedrange)if(be.rangebreaks){var ce=0,de=be._length,ye=be.p2l(ce+ae)-be.p2l(ce),ge=be.p2l(de+ae)-be.p2l(de),me=(ye+ge)/2;be.range=[be.l2r(be._rl[0]-me),be.l2r(be._rl[1]-me)]}else be.range=[be.l2r(be._rl[0]-ae/be._m),be.l2r(be._rl[1]-ae/be._m)]}}function Q(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function X(se,ae,oe){return se?se==="nsew"?oe?"":ae==="pan"?"move":"crosshair":se.toLowerCase()+"-resize":"pointer"}function j(se,ae,oe,be,ce){return se.append("path").attr("class","zoombox").style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(oe,be)).attr("d",ce+"Z")}function re(se,ae,oe){return se.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(ae,oe)).attr("d","M0,0Z")}function ue(se,ae,oe,be,ce,de){se.attr("d",be+"M"+oe.l+","+oe.t+"v"+oe.h+"h"+oe.w+"v-"+oe.h+"h-"+oe.w+"Z"),K(se,ae,ce,de)}function K(se,ae,oe,be){oe||(se.transition().style("fill",be>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200))}function te(se){w.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(se){F&&se.data&&se._context.showTips&&(f.notifier(f._(se,"Double-click to zoom back out"),"long"),F=!1)}function V(se,ae){return"M"+(se.l-.5)+","+(ae-E-.5)+"h-3v"+(2*E+1)+"h3ZM"+(se.r+.5)+","+(ae-E-.5)+"h3v"+(2*E+1)+"h-3Z"}function ee(se,ae){return"M"+(ae-E-.5)+","+(se.t-.5)+"v-3h"+(2*E+1)+"v3ZM"+(ae-E-.5)+","+(se.b+.5)+"v3h"+(2*E+1)+"v-3Z"}function ne(se){var ae=Math.floor(Math.min(se.b-se.t,se.r-se.l,E)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ae)+"h3v"+-ae+"h"+ae+"v-3h-"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ae)+"h-3v"+-ae+"h"+-ae+"v-3h"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ae)+"h-3v"+ae+"h"+-ae+"v3h"+(ae+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ae)+"h3v"+ae+"h"+ae+"v3h-"+(ae+3)+"Z"}function Z(se,ae,oe,be,ce){for(var de=!1,ye={},ge={},me,Me,Le,Oe,_e=(ce||{}).xaHash,Ee=(ce||{}).yaHash,Ze=0;Ze<ae.length;Ze++){var Ge=ae[Ze];for(me in oe)if(Ge[me]){for(Le in Ge)!(ce&&(_e[Le]||Ee[Le]))&&!(Le.charAt(0)==="x"?oe:be)[Le]&&(ye[Le]=me);for(Me in be)!(ce&&(_e[Me]||Ee[Me]))&&Ge[Me]&&(de=!0)}for(Me in be)if(Ge[Me])for(Oe in Ge)!(ce&&(_e[Oe]||Ee[Oe]))&&!(Oe.charAt(0)==="x"?oe:be)[Oe]&&(ge[Oe]=Me)}de&&(f.extendFlat(ye,ge),ge={});var Fe={},Re=[];for(Le in ye){var We=_(se,Le);Re.push(We),Fe[We._id]=We}var xt={},Nt=[];for(Oe in ge){var tr=_(se,Oe);Nt.push(tr),xt[tr._id]=tr}return{xaHash:Fe,yaHash:xt,xaxes:Re,yaxes:Nt,xLinks:ye,yLinks:ge,isSubplotConstrained:de}}function q(se,ae){if(!e)se.onwheel!==void 0?se.onwheel=ae:se.onmousewheel!==void 0?se.onmousewheel=ae:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ae,{passive:!1}));else{var oe=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(oe,se._onwheel),se._onwheel=ae,se.addEventListener(oe,ae,{passive:!1})}}function ie(se){var ae=[];for(var oe in se)ae.push(se[oe]);return ae}U.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:j,makeCorners:re,updateZoombox:ue,xyCorners:ne,transitionZoombox:K,removeZoombox:te,showDoubleClickNotifier:Y,attachWheelEventHandler:q}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/fx"),M=o("../../components/dragelement"),T=o("../../lib/setcursor"),e=o("./dragbox").makeDragBox,a=o("./constants").DRAGGERSIZE;H.initInteractions=function(r){var t=r._fullLayout;if(r._context.staticPlot){w.select(r).selectAll(".drag").remove();return}if(!(!t._has("cartesian")&&!t._has("splom"))){var h=Object.keys(t._plots||{}).sort(function(s,y){if((t._plots[s].mainplot&&!0)===(t._plots[y].mainplot&&!0)){var d=s.split("y"),p=y.split("y");return d[0]===p[0]?Number(d[1]||1)-Number(p[1]||1):Number(d[0]||1)-Number(p[0]||1)}return t._plots[s].mainplot?1:-1});h.forEach(function(s){var y=t._plots[s],d=y.xaxis,p=y.yaxis;if(!y.mainplot){var c=e(r,y,d._offset,p._offset,d._length,p._length,"ns","ew");c.onmousemove=function(x){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===s&&r._fullLayout._plots[s]&&f.hover(r,x,s)},f.hover(r,x,s),r._fullLayout._lasthover=c,r._fullLayout._hoversubplot=s},c.onmouseout=function(x){r._dragging||(r._fullLayout._hoversubplot=null,M.unhover(r,x))},r._context.showAxisDragHandles&&(e(r,y,d._offset-a,p._offset-a,a,a,"n","w"),e(r,y,d._offset+d._length,p._offset-a,a,a,"n","e"),e(r,y,d._offset-a,p._offset+p._length,a,a,"s","w"),e(r,y,d._offset+d._length,p._offset+p._length,a,a,"s","e"))}if(r._context.showAxisDragHandles){if(s===d._mainSubplot){var m=d._mainLinePosition;d.side==="top"&&(m-=a),e(r,y,d._offset+d._length*.1,m,d._length*.8,a,"","ew"),e(r,y,d._offset,m,d._length*.1,a,"","w"),e(r,y,d._offset+d._length*.9,m,d._length*.1,a,"","e")}if(s===p._mainSubplot){var l=p._mainLinePosition;p.side!=="right"&&(l-=a),e(r,y,l,p._offset+p._length*.1,a,p._length*.8,"ns",""),e(r,y,l,p._offset+p._length*.9,a,p._length*.1,"s",""),e(r,y,l,p._offset,a,p._length*.1,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(s){s.target=r._fullLayout._lasthover,f.hover(r,s,t._hoversubplot)},i.onclick=function(s){s.target=r._fullLayout._lasthover,f.click(r,s)},i.onmousedown=function(s){r._fullLayout._lasthover.onmousedown(s)},H.updateFx(r)}},H.updateFx=function(n){var r=n._fullLayout,t=r.dragmode==="pan"?"move":"crosshair";T(r._draggers,t)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("./axis_ids");U.exports=function(e){return function(n,r){var t=n[e];if(!!Array.isArray(t))for(var h=w.subplotsRegistry.cartesian,i=h.idRegex,s=r._subplots,y=s.xaxis,d=s.yaxis,p=s.cartesian,c=r._has("cartesian")||r._has("gl2d"),m=0;m<t.length;m++){var l=t[m];if(!!f.isPlainObject(l)){var x=M.cleanId(l.xref,"x",!1),u=M.cleanId(l.yref,"y",!1),A=i.x.test(x),_=i.y.test(u);if(A||_){c||f.pushUnique(r._basePlotModules,h);var g=!1;A&&y.indexOf(x)===-1&&(y.push(x),g=!0),_&&d.indexOf(u)===-1&&(d.push(u),g=!0),g&&A&&_&&p.push(x+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../lib"),T=o("../plots"),e=o("../../components/drawing"),a=o("../get_data").getModuleCalcData,n=o("./axis_ids"),r=o("./constants"),t=o("../../constants/xmlns_namespaces"),h=M.ensureSingle;function i(m,l,x){return M.ensureSingle(m,l,x,function(u){u.datum(x)})}H.name="cartesian",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=r.idRegex,H.attrRegex=r.attrRegex,H.attributes=o("./attributes"),H.layoutAttributes=o("./layout_attributes"),H.supplyLayoutDefaults=o("./layout_defaults"),H.transitionAxes=o("./transition_axes"),H.finalizeSubplots=function(m,l){var x=l._subplots,u=x.xaxis,A=x.yaxis,_=x.cartesian,g=_.concat(x.gl2d||[]),b={},v={},C,S,k;for(C=0;C<g.length;C++){var E=g[C].split("y");b[E[0]]=1,v["y"+E[1]]=1}for(C=0;C<u.length;C++)S=u[C],b[S]||(k=(m[n.id2name(S)]||{}).anchor,r.idRegex.y.test(k)||(k="y"),_.push(S+k),g.push(S+k),v[k]||(v[k]=1,M.pushUnique(A,k)));for(C=0;C<A.length;C++)k=A[C],v[k]||(S=(m[n.id2name(k)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),_.push(S+k),g.push(S+k),b[S]||(b[S]=1,M.pushUnique(u,S)));if(!g.length){S="",k="";for(var F in m)if(r.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!S||+F.substr(5)<+S.substr(5))&&(S=F):(!k||+F.substr(5)<+k.substr(5))&&(k=F)}S=S?n.name2id(S):"x",k=k?n.name2id(k):"y",u.push(S),A.push(k),_.push(S+k)}},H.plot=function(m,l,x,u){var A=m._fullLayout,_=A._subplots.cartesian,g=m.calcdata,b;if(!Array.isArray(l))for(l=[],b=0;b<g.length;b++)l.push(b);for(b=0;b<_.length;b++){for(var v=_[b],C=A._plots[v],S=[],k,E=0;E<g.length;E++){var F=g[E],I=F[0].trace;I.xaxis+I.yaxis===v&&((l.indexOf(I.index)!==-1||I.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===v&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(F)),k=F)}s(m,C,S,x,u)}};function s(m,l,x,u,A){for(var _=r.traceLayerClasses,g=m._fullLayout,b=g._modules,v,C,S,k=[],E=[],F=0;F<b.length;F++){v=b[F];var I=v.name,D=f.modules[I].categories;if(D.svg){var R=v.layerName||I+"layer",O=v.plot;C=a(x,O),S=C[0],x=C[1],S.length&&k.push({i:_.indexOf(R),className:R,plotMethod:O,cdModule:S}),D.zoomScale&&E.push("."+R)}}k.sort(function(G,Q){return G.i-Q.i});var z=l.plot.selectAll("g.mlayer").data(k,function(G){return G.className});if(z.enter().append("g").attr("class",function(G){return G.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(G){var Q=w.select(this),X=G.className;G.plotMethod(m,l,G.cdModule,Q,u,A),r.clipOnAxisFalseQuery.indexOf("."+X)===-1&&e.setClipUrl(Q,l.layerClipId,m)}),g._has("scattergl")&&(v=f.getModule("scattergl"),S=a(x,v)[0],v.plot(m,l,S)),!m._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),E.length)){var B=l.plot.selectAll(E.join(",")).selectAll(".trace");l.zoomScalePts=B.selectAll("path.point"),l.zoomScaleTxt=B.selectAll(".textpoint")}}H.clean=function(m,l,x,u){var A=u._plots||{},_=l._plots||{},g=u._subplots||{},b,v,C;if(u._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(C in A)b=A[C],b.plotgroup&&b.plotgroup.remove();var S=u._has&&u._has("gl"),k=l._has&&l._has("gl");if(S&&!k)for(C in A)b=A[C],b._scene&&b._scene.destroy();if(g.xaxis&&g.yaxis){var E=n.listIds({_fullLayout:u});for(v=0;v<E.length;v++){var F=E[v];l[n.id2name(F)]||u._infolayer.selectAll(".g-"+F+"title").remove()}}var I=u._has&&u._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)p(u._cartesianlayer.selectAll(".subplot"),u),u._defs.selectAll(".axesclip").remove(),delete u._axisConstraintGroups,delete u._axisMatchGroups;else if(g.cartesian)for(v=0;v<g.cartesian.length;v++){var R=g.cartesian[v];if(!_[R]){var O="."+R+",."+R+"-x,."+R+"-y";u._cartesianlayer.selectAll(O).remove(),c(R,u)}}},H.drawFramework=function(m){var l=m._fullLayout,x=y(m),u=l._cartesianlayer.selectAll(".subplot").data(x,String);u.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),u.order(),u.exit().call(p,l),u.each(function(A){var _=A[0],g=l._plots[_];g.plotgroup=w.select(this),d(m,g),g.draglayer=h(l._draggers,"g",_)})},H.rangePlot=function(m,l,x){d(m,l),s(m,l,x),T.style(m)};function y(m){var l=m._fullLayout,x=l._subplots.cartesian,u=x.length,A,_,g,b,v,C,S=[],k=[];for(A=0;A<u;A++){g=x[A],b=l._plots[g],v=b.xaxis,C=b.yaxis;var E=v._mainAxis,F=C._mainAxis,I=E._id+F._id,D=l._plots[I];b.overlays=[],I!==g&&D?(b.mainplot=I,b.mainplotinfo=D,k.push(g)):(b.mainplot=void 0,b.mainplotinfo=void 0,S.push(g))}for(A=0;A<k.length;A++)g=k[A],b=l._plots[g],b.mainplotinfo.overlays.push(b);var R=S.concat(k),O=new Array(u);for(A=0;A<u;A++){g=R[A],b=l._plots[g],v=b.xaxis,C=b.yaxis;var z=[g,v.layer,C.layer,v.overlaying||"",C.overlaying||""];for(_=0;_<b.overlays.length;_++)z.push(b.overlays[_].id);O[A]=z}return O}function d(m,l){var x=l.plotgroup,u=l.id,A=r.layerValue2layerClass[l.xaxis.layer],_=r.layerValue2layerClass[l.yaxis.layer],g=m._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var v=l.mainplotinfo,C=v.plotgroup,S=u+"-x",k=u+"-y";l.minorGridlayer=v.minorGridlayer,l.gridlayer=v.gridlayer,l.zerolinelayer=v.zerolinelayer,h(v.overlinesBelow,"path",S),h(v.overlinesBelow,"path",k),h(v.overaxesBelow,"g",S),h(v.overaxesBelow,"g",k),l.plot=h(v.overplot,"g",u),h(v.overlinesAbove,"path",S),h(v.overlinesAbove,"path",k),h(v.overaxesAbove,"g",S),h(v.overaxesAbove,"g",k),l.xlines=C.select(".overlines-"+A).select("."+S),l.ylines=C.select(".overlines-"+_).select("."+k),l.xaxislayer=C.select(".overaxes-"+A).select("."+S),l.yaxislayer=C.select(".overaxes-"+_).select("."+k)}else if(g)l.xlines=h(x,"path","xlines-above"),l.ylines=h(x,"path","ylines-above"),l.xaxislayer=h(x,"g","xaxislayer-above"),l.yaxislayer=h(x,"g","yaxislayer-above");else{var b=h(x,"g","layer-subplot");l.shapelayer=h(b,"g","shapelayer"),l.imagelayer=h(b,"g","imagelayer"),l.minorGridlayer=h(x,"g","minor-gridlayer"),l.gridlayer=h(x,"g","gridlayer"),l.zerolinelayer=h(x,"g","zerolinelayer"),h(x,"path","xlines-below"),h(x,"path","ylines-below"),l.overlinesBelow=h(x,"g","overlines-below"),h(x,"g","xaxislayer-below"),h(x,"g","yaxislayer-below"),l.overaxesBelow=h(x,"g","overaxes-below"),l.plot=h(x,"g","plot"),l.overplot=h(x,"g","overplot"),l.xlines=h(x,"path","xlines-above"),l.ylines=h(x,"path","ylines-above"),l.overlinesAbove=h(x,"g","overlines-above"),h(x,"g","xaxislayer-above"),h(x,"g","yaxislayer-above"),l.overaxesAbove=h(x,"g","overaxes-above"),l.xlines=x.select(".xlines-"+A),l.ylines=x.select(".ylines-"+_),l.xaxislayer=x.select(".xaxislayer-"+A),l.yaxislayer=x.select(".yaxislayer-"+_)}g||(i(l.minorGridlayer,"g",l.xaxis._id),i(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(E){return E[0]}).sort(n.idSort),i(l.gridlayer,"g",l.xaxis._id),i(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(E){return E[0]}).sort(n.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function p(m,l){if(!!m){var x={};m.each(function(v){var C=v[0],S=w.select(this);S.remove(),c(C,l),x[C]=!0});for(var u in l._plots)for(var A=l._plots[u],_=A.overlays||[],g=0;g<_.length;g++){var b=_[g];x[b.id]&&b.plot.selectAll(".trace").remove()}}}function c(m,l){l._draggers.selectAll("g."+m).remove(),l._defs.select("#clip"+l._uid+m+"plot").remove()}H.toSVG=function(m){var l=m._fullLayout._glimages,x=w.select(m).selectAll(".svg-container"),u=x.filter(function(_,g){return g===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var _=this,g=_.toDataURL("image/png"),b=l.append("svg:image");b.attr({xmlns:t.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}u.each(A)},H.updateFx=o("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(o,U,H){var w=o("../font_attributes"),f=o("../../components/color/attributes"),M=o("../../components/drawing/attributes").dash,T=o("../../lib/extend").extendFlat,e=o("../../plot_api/plot_template").templatedArray,a=o("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=o("../../constants/numerical").ONEDAY,r=o("./constants"),t=r.HOUR_PATTERN,h=r.WEEKDAY_PATTERN,i={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function s(b){return{valType:"integer",min:0,dflt:b?5:0,editType:"ticks"}}var y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"data_array",editType:"ticks"},c={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=5),v}function l(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=1),v}var x={valType:"color",dflt:f.defaultLine,editType:"ticks"},u={valType:"color",dflt:f.lightLine,editType:"ticks"};function A(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=1),v}var _=T({},M,{editType:"ticks"}),g={valType:"boolean",editType:"ticks"};U.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:f.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:w({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[h,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:i,nticks:s(),tick0:y,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:p,ticktext:{valType:"data_array",editType:"ticks"},ticks:c,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:l(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:w({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:g,gridcolor:u,gridwidth:A(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:i,nticks:s("minor"),tick0:y,dtick:d,tickvals:p,ticks:c,ticklen:m("minor"),tickwidth:l("minor"),tickcolor:x,gridcolor:u,gridwidth:A("minor"),griddash:_,showgrid:g,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:w({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../components/fx/helpers").isUnifiedHover,T=o("../../components/fx/hovermode_defaults"),e=o("../../plot_api/plot_template"),a=o("../layout_attributes"),n=o("./layout_attributes"),r=o("./type_defaults"),t=o("./axis_defaults"),h=o("./constraints"),i=o("./position_defaults"),s=o("./axis_ids"),y=s.id2name,d=s.name2id,p=o("./constants").AX_ID_PATTERN,c=o("../../registry"),m=c.traceIs,l=c.getComponentMethod;function x(u,A,_){Array.isArray(u[A])?u[A].push(_):u[A]=[_]}U.exports=function(A,_,g){var b=_.autotypenumbers,v={},C={},S={},k={},E={},F={},I={},D={},R={},O={},z,B;for(z=0;z<g.length;z++){var G=g[z];if(!(!m(G,"cartesian")&&!m(G,"gl2d"))){var Q;if(G.xaxis)Q=y(G.xaxis),x(v,Q,G);else if(G.xaxes)for(B=0;B<G.xaxes.length;B++)x(v,y(G.xaxes[B]),G);var X;if(G.yaxis)X=y(G.yaxis),x(v,X,G);else if(G.yaxes)for(B=0;B<G.yaxes.length;B++)x(v,y(G.yaxes[B]),G);if(G.type==="funnel"?G.orientation==="h"?(Q&&(C[Q]=!0),X&&(I[X]=!0)):X&&(S[X]=!0):G.type==="image"?(X&&(D[X]=!0),Q&&(D[Q]=!0)):(X&&(E[X]=!0,F[X]=!0),(!m(G,"carpet")||G.type==="carpet"&&!G._cheater)&&Q&&(k[Q]=!0)),G.type==="carpet"&&G._cheater&&Q&&(C[Q]=!0),m(G,"2dMap")&&(R[Q]=!0,R[X]=!0),m(G,"oriented")){var j=G.orientation==="h"?X:Q;O[j]=!0}}}var re=_._subplots,ue=re.xaxis,K=re.yaxis,te=w.simpleMap(ue,y),Y=w.simpleMap(K,y),V=te.concat(Y),ee=f.background;ue.length&&K.length&&(ee=w.coerce(A,_,a,"plot_bgcolor"));var ne=f.combine(ee,_.paper_bgcolor),Z,q,ie,se,ae;function oe(){var Ve=v[Z]||[];ae._traceIndices=Ve.map(function(Ae){return Ae._expandedIndex}),ae._annIndices=[],ae._shapeIndices=[],ae._selectionIndices=[],ae._imgIndices=[],ae._subplotsWith=[],ae._counterAxes=[],ae._name=ae._attr=Z,ae._id=q}function be(Ve,Ae){return w.coerce(se,ae,n,Ve,Ae)}function ce(Ve,Ae){return w.coerce2(se,ae,n,Ve,Ae)}function de(Ve){return Ve==="x"?K:ue}function ye(Ve,Ae){for(var He=Ve==="x"?te:Y,Je=[],tt=0;tt<He.length;tt++){var St=He[tt];St!==Ae&&!(A[St]||{}).overlaying&&Je.push(d(St))}return Je}var ge={x:de("x"),y:de("y")},me=ge.x.concat(ge.y),Me={},Le=[];function Oe(){var Ve=se.matches;p.test(Ve)&&me.indexOf(Ve)===-1&&(Me[Ve]=se.type,Le=Object.keys(Me))}var _e=T(A,_),Ee=M(_e);for(z=0;z<V.length;z++){Z=V[z],q=d(Z),ie=Z.charAt(0),w.isPlainObject(A[Z])||(A[Z]={}),se=A[Z],ae=e.newContainer(_,Z,ie+"axis"),oe();var Ze=ie==="x"&&!k[Z]&&C[Z]||ie==="y"&&!E[Z]&&S[Z],Ge=ie==="y"&&(!F[Z]&&I[Z]||D[Z]),Fe={hasMinor:!0,letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:v[Z]||[],bgColor:ne,calendar:_.calendar,automargin:!0,visibleDflt:Ze,reverseDflt:Ge,autotypenumbersDflt:b,splomStash:((_._splomAxes||{})[ie]||{})[q]};be("uirevision",_.uirevision),r(se,ae,be,Fe),t(se,ae,be,Fe,_);var Re=Ee&&ie===_e.charAt(0),We=ce("spikecolor",Ee?ae.color:void 0),xt=ce("spikethickness",Ee?1.5:void 0),Nt=ce("spikedash",Ee?"dot":void 0),tr=ce("spikemode",Ee?"across":void 0),Vt=ce("spikesnap"),Pt=be("showspikes",!!Re||!!We||!!xt||!!Nt||!!tr||!!Vt);Pt||(delete ae.spikecolor,delete ae.spikethickness,delete ae.spikedash,delete ae.spikemode,delete ae.spikesnap),i(se,ae,be,{letter:ie,counterAxes:ge[ie],overlayableAxes:ye(ie,Z),grid:_.grid}),be("title.standoff"),Oe(),ae._input=se}for(z=0;z<Le.length;){q=Le[z++],Z=y(q),ie=Z.charAt(0),w.isPlainObject(A[Z])||(A[Z]={}),se=A[Z],ae=e.newContainer(_,Z,ie+"axis"),oe();var $t={letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:[],bgColor:ne,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:b,splomStash:((_._splomAxes||{})[ie]||{})[q]};be("uirevision",_.uirevision),ae.type=Me[q]||"linear",t(se,ae,be,$t,_),i(se,ae,be,{letter:ie,counterAxes:ge[ie],overlayableAxes:ye(ie,Z),grid:_.grid}),be("fixedrange"),Oe(),ae._input=se}var Ut=l("rangeslider","handleDefaults"),Lt=l("rangeselector","handleDefaults");for(z=0;z<te.length;z++)Z=te[z],se=A[Z],ae=_[Z],Ut(A,_,Z),ae.type==="date"&&Lt(se,ae,_,Y,ae.calendar),be("fixedrange");for(z=0;z<Y.length;z++){Z=Y[z],se=A[Z],ae=_[Z];var Ye=_[y(ae.anchor)],ot=l("rangeslider","isVisible")(Ye);be("fixedrange",ot)}h.handleDefaults(A,_,{axIds:me.concat(Le).sort(s.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(o,U,H){var w=o("tinycolor2").mix,f=o("../../components/color/attributes"),M=o("../../lib");U.exports=function(e,a,n,r){r=r||{};var t=r.dfltColor;function h(S,k){return M.coerce2(e,a,r.attributes,S,k)}var i=h("linecolor",t),s=h("linewidth"),y=n("showline",r.showLine||!!i||!!s);y||(delete a.linecolor,delete a.linewidth);var d=w(t,r.bgColor,r.blend||f.lightFraction).toRgbString(),p=h("gridcolor",d),c=h("gridwidth"),m=h("griddash"),l=n("showgrid",r.showGrid||!!p||!!c||!!m);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),r.hasMinor){var x=w(a.gridcolor,r.bgColor,67).toRgbString(),u=h("minor.gridcolor",x),A=h("minor.gridwidth",a.gridwidth||1),_=h("minor.griddash",a.griddash||"solid"),g=n("minor.showgrid",!!u||!!A||!!_);g||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!r.noZeroLine){var b=h("zerolinecolor",t),v=h("zerolinewidth"),C=n("zeroline",r.showGrid||!!b||!!v);C||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib");U.exports=function(T,e,a,n){var r=n.counterAxes||[],t=n.overlayableAxes||[],h=n.letter,i=n.grid,s,y,d,p;i&&(y=i._domains[h][i._axisMap[e._id]],s=i._anchors[e._id],y&&(d=i[h+"side"].split(" ")[0],p=i.domain[h][d==="right"||d==="top"?1:0])),y=y||[0,1],s=s||(w(T.position)?"free":r[0]||"free"),d=d||(h==="x"?"bottom":"left"),p=p||0;var c=f.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:s}},"anchor");c==="free"&&a("position",p),f.coerce(T,e,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var m=!1;if(t.length&&(m=f.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!m){var l=a("domain",y);l[0]>l[1]-1/4096&&(e.domain=y),f.noneOrAll(T.domain,e.domain,y)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(o,U,H){var w=o("./show_dflt");U.exports=function(M,T,e,a,n){n||(n={});var r=n.tickSuffixDflt,t=w(M),h=e("tickprefix");h&&e("showtickprefix",t);var i=e("ticksuffix",r);i&&e("showticksuffix",t)}},{"./show_dflt":586}],584:[function(o,U,H){var w=o("../../constants/alignment").FROM_BL;U.exports=function(M,T,e){e===void 0&&(e=w[M.constraintoward||"center"]);var a=[M.r2l(M.range[0]),M.r2l(M.range[1])],n=a[0]+(a[1]-a[0])*e;M.range=M._input.range=[M.l2r(n+(a[0]-n)*T),M.l2r(n+(a[1]-n)*T)],M.setScale()}},{"../../constants/alignment":483}],585:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-time-format").utcFormat,M=o("../../lib"),T=M.numberFormat,e=o("fast-isnumeric"),a=M.cleanNumber,n=M.ms2DateTime,r=M.dateTime2ms,t=M.ensureNumber,h=M.isArrayOrTypedArray,i=o("../../constants/numerical"),s=i.FP_SAFE,y=i.BADNUM,d=i.LOG_CLIP,p=i.ONEWEEK,c=i.ONEDAY,m=i.ONEHOUR,l=i.ONEMIN,x=i.ONESEC,u=o("./axis_ids"),A=o("./constants"),_=A.HOUR_PATTERN,g=A.WEEKDAY_PATTERN;function b(C){return Math.pow(10,C)}function v(C){return C!=null}U.exports=function(S,k){k=k||{};var E=S._id||"x",F=E.charAt(0);function I(V,ee){if(V>0)return Math.log(V)/Math.LN10;if(V<=0&&ee&&S.range&&S.range.length===2){var ne=S.range[0],Z=S.range[1];return .5*(ne+Z-2*d*Math.abs(ne-Z))}else return y}function D(V,ee,ne,Z){if((Z||{}).msUTC&&e(V))return+V;var q=r(V,ne||S.calendar);if(q===y)if(e(V)){V=+V;var ie=Math.floor(M.mod(V+.05,1)*10),se=Math.round(V-ie/10);q=r(new Date(se))+ie/10}else return y;return q}function R(V,ee,ne){return n(V,ee,ne||S.calendar)}function O(V){return S._categories[Math.round(V)]}function z(V){if(v(V)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[V]!==void 0)return S._categoriesMap[V];S._categories.push(typeof V=="number"?String(V):V);var ee=S._categories.length-1;return S._categoriesMap[V]=ee,ee}return y}function B(V,ee){for(var ne=new Array(ee),Z=0;Z<ee;Z++){var q=(V[0]||[])[Z],ie=(V[1]||[])[Z];ne[Z]=G([q,ie])}return ne}function G(V){if(S._categoriesMap)return S._categoriesMap[V]}function Q(V){var ee=G(V);if(ee!==void 0)return ee;if(e(V))return+V}function X(V){return e(V)?+V:G(V)}function j(V,ee,ne){return w.round(ne+ee*V,2)}function re(V,ee,ne){return(V-ne)/ee}var ue=function(ee){return e(ee)?j(ee,S._m,S._b):y},K=function(V){return re(V,S._m,S._b)};if(S.rangebreaks){var te=F==="y";ue=function(V){if(!e(V))return y;var ee=S._rangebreaks.length;if(!ee)return j(V,S._m,S._b);var ne=te;S.range[0]>S.range[1]&&(ne=!ne);for(var Z=ne?-1:1,q=Z*V,ie=0,se=0;se<ee;se++){var ae=Z*S._rangebreaks[se].min,oe=Z*S._rangebreaks[se].max;if(q<ae)break;if(q>oe)ie=se+1;else{ie=q<(ae+oe)/2?se:se+1;break}}var be=S._B[ie]||0;return isFinite(be)?j(V,S._m2,be):0},K=function(V){var ee=S._rangebreaks.length;if(!ee)return re(V,S._m,S._b);for(var ne=0,Z=0;Z<ee&&!(V<S._rangebreaks[Z].pmin);Z++)V>S._rangebreaks[Z].pmax&&(ne=Z+1);return re(V,S._m2,S._B[ne])}}S.c2l=S.type==="log"?I:t,S.l2c=S.type==="log"?b:t,S.l2p=ue,S.p2l=K,S.c2p=S.type==="log"?function(V,ee){return ue(I(V,ee))}:ue,S.p2c=S.type==="log"?function(V){return b(K(V))}:K,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=t,S.d2p=S.r2p=function(V){return S.l2p(a(V))},S.p2d=S.p2r=K,S.cleanPos=t):S.type==="log"?(S.d2r=S.d2l=function(V,ee){return I(a(V),ee)},S.r2d=S.r2c=function(V){return b(a(V))},S.d2c=S.r2l=a,S.c2d=S.l2r=t,S.c2r=I,S.l2d=b,S.d2p=function(V,ee){return S.l2p(S.d2r(V,ee))},S.p2d=function(V){return b(K(V))},S.r2p=function(V){return S.l2p(a(V))},S.p2r=K,S.cleanPos=t):S.type==="date"?(S.d2r=S.r2d=M.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(V,ee,ne){return S.l2p(D(V,0,ne))},S.p2d=S.p2r=function(V,ee,ne){return R(K(V),ee,ne)},S.cleanPos=function(V){return M.cleanDate(V,y,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=z,S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=Q,S.r2c=function(V){var ee=X(V);return ee!==void 0?ee:S.fraction2r(.5)},S.l2r=S.c2r=t,S.r2l=X,S.d2p=function(V){return S.l2p(S.r2c(V))},S.p2d=function(V){return O(K(V))},S.r2p=S.d2p,S.p2r=K,S.cleanPos=function(V){return typeof V=="string"&&V!==""?V:t(V)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=Q,S.r2c=function(V){var ee=Q(V);return ee!==void 0?ee:S.fraction2r(.5)},S.r2c_just_indices=G,S.l2r=S.c2r=t,S.r2l=Q,S.d2p=function(V){return S.l2p(S.r2c(V))},S.p2d=function(V){return O(K(V))},S.r2p=S.d2p,S.p2r=K,S.cleanPos=function(V){return Array.isArray(V)||typeof V=="string"&&V!==""?V:t(V)},S.setupMultiCategory=function(V){var ee=S._traceIndices,ne,Z,q=S._matchGroup;if(q&&S._categories.length===0){for(var ie in q)if(ie!==E){var se=k[u.id2name(ie)];ee=ee.concat(se._traceIndices)}}var ae=[[0,{}],[0,{}]],oe=[];for(ne=0;ne<ee.length;ne++){var be=V[ee[ne]];if(F in be){var ce=be[F],de=be._length||M.minRowLength(ce);if(h(ce[0])&&h(ce[1]))for(Z=0;Z<de;Z++){var ye=ce[0][Z],ge=ce[1][Z];v(ye)&&v(ge)&&(oe.push([ye,ge]),ye in ae[0][1]||(ae[0][1][ye]=ae[0][0]++),ge in ae[1][1]||(ae[1][1][ge]=ae[1][0]++))}}}for(oe.sort(function(me,Me){var Le=ae[0][1],Oe=Le[me[0]]-Le[Me[0]];if(Oe)return Oe;var _e=ae[1][1];return _e[me[1]]-_e[Me[1]]}),ne=0;ne<oe.length;ne++)z(oe[ne])}),S.fraction2r=function(V){var ee=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return S.l2r(ee+V*(ne-ee))},S.r2fraction=function(V){var ee=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return(S.r2l(V)-ee)/(ne-ee)},S.cleanRange=function(V,ee){ee||(ee={}),V||(V="range");var ne=M.nestedProperty(S,V).get(),Z,q;if(S.type==="date"?q=M.dfltRange(S.calendar):F==="y"?q=A.DFLTRANGEY:S._name==="realaxis"?q=[0,1]:q=ee.dfltRange||A.DFLTRANGEX,q=q.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(q[0]=0),!ne||ne.length!==2){M.nestedProperty(S,V).set(q);return}for(S.type==="date"&&!S.autorange&&(ne[0]=M.cleanDate(ne[0],y,S.calendar),ne[1]=M.cleanDate(ne[1],y,S.calendar)),Z=0;Z<2;Z++)if(S.type==="date"){if(!M.isDateTime(ne[Z],S.calendar)){S[V]=q;break}if(S.r2l(ne[0])===S.r2l(ne[1])){var ie=M.constrain(S.r2l(ne[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);ne[0]=S.l2r(ie-1e3),ne[1]=S.l2r(ie+1e3);break}}else{if(!e(ne[Z]))if(e(ne[1-Z]))ne[Z]=ne[1-Z]*(Z?10:.1);else{S[V]=q;break}if(ne[Z]<-s?ne[Z]=-s:ne[Z]>s&&(ne[Z]=s),ne[0]===ne[1]){var se=Math.max(1,Math.abs(ne[0]*1e-6));ne[0]-=se,ne[1]+=se}}},S.setScale=function(V){var ee=k._size;if(S.overlaying){var ne=u.getFromId({_fullLayout:k},S.overlaying);S.domain=ne.domain}var Z=V&&S._r?"_r":"range",q=S.calendar;S.cleanRange(Z);var ie=S.r2l(S[Z][0],q),se=S.r2l(S[Z][1],q),ae=F==="y";if(ae?(S._offset=ee.t+(1-S.domain[1])*ee.h,S._length=ee.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ie-se),S._b=-S._m*se):(S._offset=ee.l+S.domain[0]*ee.w,S._length=ee.w*(S.domain[1]-S.domain[0]),S._m=S._length/(se-ie),S._b=-S._m*ie),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var oe,be;if(S._rangebreaks=S.locateBreaks(Math.min(ie,se),Math.max(ie,se)),S._rangebreaks.length){for(oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],S._lBreaks+=Math.abs(be.max-be.min);var ce=ae;ie>se&&(ce=!ce),ce&&S._rangebreaks.reverse();var de=ce?-1:1;for(S._m2=de*S._length/(Math.abs(se-ie)-S._lBreaks),S._B.push(-S._m2*(ae?se:ie)),oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],S._B.push(S._B[S._B.length-1]-de*S._m2*(be.max-be.min));for(oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],be.pmin=ue(be.min),be.pmax=ue(be.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(V){var ee=S.rangebreaks||[],ne,Z,q,ie,se;ee._cachedPatterns||(ee._cachedPatterns=ee.map(function(Le){return Le.enabled&&Le.bounds?M.simpleMap(Le.bounds,Le.pattern?a:S.d2c):null})),ee._cachedValues||(ee._cachedValues=ee.map(function(Le){return Le.enabled&&Le.values?M.simpleMap(Le.values,S.d2c).sort(M.sorterAsc):null}));for(var ae=0;ae<ee.length;ae++){var oe=ee[ae];if(oe.enabled){if(oe.bounds){var be=oe.pattern;switch(ne=ee._cachedPatterns[ae],Z=ne[0],q=ne[1],be){case g:se=new Date(V),ie=se.getUTCDay(),Z>q&&(q+=7,ie<Z&&(ie+=7));break;case _:se=new Date(V);var ce=se.getUTCHours(),de=se.getUTCMinutes(),ye=se.getUTCSeconds(),ge=se.getUTCMilliseconds();ie=ce+(de/60+ye/3600+ge/36e5),Z>q&&(q+=24,ie<Z&&(ie+=24));break;case"":ie=V;break}if(ie>=Z&&ie<q)return y}else for(var me=ee._cachedValues[ae],Me=0;Me<me.length;Me++)if(Z=me[Me],q=Z+oe.dvalue,V>=Z&&V<q)return y}}return V},S.locateBreaks=function(V,ee){var ne,Z,q,ie,se=[];if(!S.rangebreaks)return se;var ae=S.rangebreaks.slice().sort(function(_e,Ee){return _e.pattern===g&&Ee.pattern===_?-1:Ee.pattern===g&&_e.pattern===_?1:0}),oe=function(_e,Ee){if(_e=M.constrain(_e,V,ee),Ee=M.constrain(Ee,V,ee),_e!==Ee){for(var Ze=!0,Ge=0;Ge<se.length;Ge++){var Fe=se[Ge];_e<Fe.max&&Ee>=Fe.min&&(_e<Fe.min&&(Fe.min=_e),Ee>Fe.max&&(Fe.max=Ee),Ze=!1)}Ze&&se.push({min:_e,max:Ee})}};for(ne=0;ne<ae.length;ne++){var be=ae[ne];if(be.enabled)if(be.bounds){var ce=V,de=ee;be.pattern&&(ce=Math.floor(ce)),Z=M.simpleMap(be.bounds,be.pattern?a:S.r2l),q=Z[0],ie=Z[1];var ye=new Date(ce),ge,me;switch(be.pattern){case g:me=p,ge=((ie<q?7:0)+(ie-q))*c,ce+=q*c-(ye.getUTCDay()*c+ye.getUTCHours()*m+ye.getUTCMinutes()*l+ye.getUTCSeconds()*x+ye.getUTCMilliseconds());break;case _:me=c,ge=((ie<q?24:0)+(ie-q))*m,ce+=q*m-(ye.getUTCHours()*m+ye.getUTCMinutes()*l+ye.getUTCSeconds()*x+ye.getUTCMilliseconds());break;default:ce=Math.min(Z[0],Z[1]),de=Math.max(Z[0],Z[1]),me=de-ce,ge=me}for(var Me=ce;Me<de;Me+=me)oe(Me,Me+ge)}else for(var Le=M.simpleMap(be.values,S.d2c),Oe=0;Oe<Le.length;Oe++)q=Le[Oe],ie=q+be.dvalue,oe(q,ie)}return se.sort(function(_e,Ee){return _e.min-Ee.min}),se},S.makeCalcdata=function(V,ee,ne){var Z,q,ie,se,ae=S.type,oe=ae==="date"&&V[ee+"calendar"];if(ee in V){if(Z=V[ee],se=V._length||M.minRowLength(Z),M.isTypedArray(Z)&&(ae==="linear"||ae==="log")){if(se===Z.length)return Z;if(Z.subarray)return Z.subarray(0,se)}if(ae==="multicategory")return B(Z,se);for(q=new Array(se),ie=0;ie<se;ie++)q[ie]=S.d2c(Z[ie],0,oe,ne)}else{var be=ee+"0"in V?S.d2c(V[ee+"0"],0,oe):0,ce=V["d"+ee]?Number(V["d"+ee]):1;for(Z=V[{x:"y",y:"x"}[ee]],se=V._length||Z.length,q=new Array(se),ie=0;ie<se;ie++)q[ie]=be+ie*ce}if(S.rangebreaks)for(ie=0;ie<se;ie++)q[ie]=S.maskBreaks(q[ie]);return q},S.isValidRange=function(V){return Array.isArray(V)&&V.length===2&&e(S.r2l(V[0]))&&e(S.r2l(V[1]))},S.isPtWithinRange=function(V,ee){var ne=S.c2l(V[F],null,ee),Z=S.r2l(S.range[0]),q=S.r2l(S.range[1]);return Z<q?Z<=ne&&ne<=q:q<=ne&&ne<=Z},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var V=S._matchGroup;if(V){var ee=null,ne=null;for(var Z in V){var q=k[u.id2name(Z)];if(q._categories){ee=q._categories,ne=q._categoriesMap;break}}ee&&ne?(S._categories=ee,S._categoriesMap=ne):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ie=0;ie<S._initialCategories.length;ie++)z(S._initialCategories[ie])},S.sortByInitialCategories=function(){var V=[];if(S._emptyCategories(),S._initialCategories)for(var ee=0;ee<S._initialCategories.length;ee++)z(S._initialCategories[ee]);V=V.concat(S._traceIndices);var ne=S._matchGroup;for(var Z in ne)if(E!==Z){var q=k[u.id2name(Z)];q._categories=S._categories,q._categoriesMap=S._categoriesMap,V=V.concat(q._traceIndices)}return V};var Y=k._d3locale;S.type==="date"&&(S._dateFormat=Y?Y.timeFormat:f,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=Y?Y.numberFormat:T,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(o,U,H){U.exports=function(f){var M=["showexponent","showtickprefix","showticksuffix"],T=M.filter(function(a){return f[a]!==void 0}),e=function(a){return f[a]===f[T[0]]};if(T.every(e)||T.length===1)return f[T[0]]}},{}],587:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color").contrast,M=o("./layout_attributes"),T=o("./show_dflt"),e=o("../array_container_defaults");U.exports=function(r,t,h,i,s){s||(s={});var y=T(r),d=h("showticklabels");if(d){var p=s.font||{},c=t.color,m=t.ticklabelposition||"",l=m.indexOf("inside")!==-1?f(s.bgColor):c&&c!==M.color.dflt?c:p.color;if(w.coerceFont(h,"tickfont",{family:p.family,size:p.size,color:l}),!s.noTicklabelstep&&i!=="multicategory"&&i!=="log"&&h("ticklabelstep"),s.noAng||h("tickangle"),i!=="category"){var x=h("tickformat");e(r,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),t.tickformatstops.length||delete t.tickformatstops,!s.noExp&&!x&&i!=="date"&&(h("showexponent",y),h("exponentformat"),h("minexponent"),h("separatethousands"))}}};function a(n,r){function t(i,s){return w.coerce(n,r,M.tickformatstops,i,s)}var h=t("enabled");h&&(t("dtickrange"),t("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e,a,n){var r=n.isMinor,t=r?T.minor||{}:T,h=r?e.minor:e,i=r?f.minor:f,s=r?"minor.":"",y=w.coerce2(t,h,i,"ticklen",r?(e.ticklen||5)*.6:void 0),d=w.coerce2(t,h,i,"tickwidth",r?e.tickwidth||1:void 0),p=w.coerce2(t,h,i,"tickcolor",(r?e.tickcolor:void 0)||h.color),c=a(s+"ticks",!r&&n.outerTicks||y||d||p?"outside":"");c||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(o,U,H){var w=o("./clean_ticks"),f=o("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n,r){r||(r={});var t=r.isMinor,h=t?T.minor||{}:T,i=t?e.minor:e,s=t?"minor.":"";function y(A){var _=h[A];return _!==void 0?_:(i._template||{})[A]}var d=y("tick0"),p=y("dtick"),c=y("tickvals"),m=f(c)?"array":p?"linear":"auto",l=a(s+"tickmode",m);if(l==="auto")a(s+"nticks");else if(l==="linear"){var x=i.dtick=w.dtick(p,n);i.tick0=w.tick0(d,n,e.calendar,x)}else if(n!=="multicategory"){var u=a(s+"tickvals");u===void 0?i.tickmode="auto":t||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../lib"),T=o("../../components/drawing"),e=o("./axes");U.exports=function(n,r,t,h){var i=n._fullLayout;if(r.length===0){e.redrawComponents(n);return}function s(_){var g=_.xaxis,b=_.yaxis;i._defs.select("#"+_.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),_.plot.call(T.setTranslate,g._offset,b._offset).call(T.setScale,1,1);var v=_.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(T.setPointGroupScale,1,1),v.selectAll(".textpoint").call(T.setTextPointsScale,1,1),v.call(T.hideOutsideRangePoints,_)}function y(_,g){var b=_.plotinfo,v=b.xaxis,C=b.yaxis,S=v._length,k=C._length,E=!!_.xr1,F=!!_.yr1,I=[];if(E){var D=M.simpleMap(_.xr0,v.r2l),R=M.simpleMap(_.xr1,v.r2l),O=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-g)+g*R[0]-D[0])/(D[1]-D[0])*S,I[2]=S*(1-g+g*z/O),v.range[0]=v.l2r(D[0]*(1-g)+g*R[0]),v.range[1]=v.l2r(D[1]*(1-g)+g*R[1])}else I[0]=0,I[2]=S;if(F){var B=M.simpleMap(_.yr0,C.r2l),G=M.simpleMap(_.yr1,C.r2l),Q=B[1]-B[0],X=G[1]-G[0];I[1]=(B[1]*(1-g)+g*G[1]-B[1])/(B[0]-B[1])*k,I[3]=k*(1-g+g*X/Q),C.range[0]=v.l2r(B[0]*(1-g)+g*G[0]),C.range[1]=C.l2r(B[1]*(1-g)+g*G[1])}else I[1]=0,I[3]=k;e.drawOne(n,v,{skipTitle:!0}),e.drawOne(n,C,{skipTitle:!0}),e.redrawComponents(n,[v._id,C._id]);var j=E?S/I[2]:1,re=F?k/I[3]:1,ue=E?I[0]:0,K=F?I[1]:0,te=E?I[0]/I[2]*S:0,Y=F?I[1]/I[3]*k:0,V=v._offset-te,ee=C._offset-Y;b.clipRect.call(T.setTranslate,ue,K).call(T.setScale,1/j,1/re),b.plot.call(T.setTranslate,V,ee).call(T.setScale,j,re),T.setPointGroupScale(b.zoomScalePts,1/j,1/re),T.setTextPointsScale(b.zoomScaleTxt,1/j,1/re)}var d;h&&(d=h());function p(){for(var _={},g=0;g<r.length;g++){var b=r[g],v=b.plotinfo.xaxis,C=b.plotinfo.yaxis;b.xr1&&(_[v._name+".range"]=b.xr1.slice()),b.yr1&&(_[C._name+".range"]=b.yr1.slice())}return d&&d(),f.call("relayout",n,_).then(function(){for(var S=0;S<r.length;S++)s(r[S].plotinfo)})}function c(){for(var _={},g=0;g<r.length;g++){var b=r[g],v=b.plotinfo.xaxis,C=b.plotinfo.yaxis;b.xr0&&(_[v._name+".range"]=b.xr0.slice()),b.yr0&&(_[C._name+".range"]=b.yr0.slice())}return f.call("relayout",n,_).then(function(){for(var S=0;S<r.length;S++)s(r[S].plotinfo)})}var m,l,x,u=w.ease(t.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(x),x=null,c()});function A(){l=Date.now();for(var _=Math.min(1,(l-m)/t.duration),g=u(_),b=0;b<r.length;b++)y(r[b],g);l-m>t.duration?(p(),x=window.cancelAnimationFrame(A)):x=window.requestAnimationFrame(A)}return m=Date.now(),x=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(o,U,H){var w=o("../../registry").traceIs,f=o("./axis_autotype");U.exports=function(r,t,h,i){h("autotypenumbers",i.autotypenumbersDflt);var s=h("type",(i.splomStash||{}).type);s==="-"&&(M(t,i.data),t.type==="-"?t.type="linear":r.type=t.type)};function M(n,r){if(n.type==="-"){var t=n._id,h=t.charAt(0),i;t.indexOf("scene")!==-1&&(t=h);var s=T(r,t,h);if(!!s){if(s.type==="histogram"&&h==={v:"y",h:"x"}[s.orientation||"v"]){n.type="linear";return}var y=h+"calendar",d=s[y],p={noMultiCategory:!w(s,"cartesian")||w(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(p.noMultiCategory=!0),p.autotypenumbers=n.autotypenumbers,a(s,h)){var c=e(s),m=[];for(i=0;i<r.length;i++){var l=r[i];!w(l,"box-violin")||(l[h+"axis"]||h)!==t||(l[c]!==void 0?m.push(l[c][0]):l.name!==void 0?m.push(l.name):m.push("text"),l[y]!==d&&(d=void 0))}n.type=f(m,d,p)}else if(s.type==="splom"){var x=s.dimensions,u=x[s._axesDim[t]];u.visible&&(n.type=f(u.values,d,p))}else n.type=f(s[h]||[s[h+"0"]],d,p)}}}function T(n,r,t){for(var h=0;h<n.length;h++){var i=n[h];if(i.type==="splom"&&i._length>0&&(i["_"+t+"axes"]||{})[r])return i;if((i[t+"axis"]||t)===r){if(a(i,t))return i;if((i[t]||[]).length||i[t+"0"])return i}}}function e(n){return{v:"x",h:"y"}[n.orientation||"v"]}function a(n,r){var t=e(n),h=w(n,"box-violin"),i=w(n._fullInput||{},"candlestick");return h&&!i&&r===t&&n[t]===void 0&&n[t+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(o,U,H){var w=o("../registry"),f=o("../lib");H.manageCommandObserver=function(r,t,h,i){var s={},y=!0;t&&t._commandObserver&&(s=t._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var d=H.hasSimpleAPICommandBindings(r,h,s.lookupTable);if(t&&t._commandObserver){if(d)return s;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,s}if(d){M(r,d,s.cache),s.check=function(){if(!!y){var l=M(r,d,s.cache);return l.changed&&i&&s.lookupTable[l.value]!==void 0&&(s.disable(),Promise.resolve(i({value:l.value,type:d.type,prop:d.prop,traces:d.traces,index:s.lookupTable[l.value]})).then(s.enable,s.enable)),l.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<p.length;c++)r._internalOn(p[c],s.check);s.remove=function(){for(var m=0;m<p.length;m++)r._removeInternalListener(p[m],s.check)}}else f.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){y=!1},s.enable=function(){y=!0},t&&(t._commandObserver=s),s},H.hasSimpleAPICommandBindings=function(r,t,h){var i,s=t.length,y;for(i=0;i<s;i++){var d,p=t[i],c=p.method,m=p.args;if(Array.isArray(m)||(m=[]),!c)return!1;var l=H.computeAPICommandBindings(r,c,m);if(l.length!==1)return!1;if(!y)y=l[0],Array.isArray(y.traces)&&y.traces.sort();else{if(d=l[0],d.type!==y.type||d.prop!==y.prop)return!1;if(Array.isArray(y.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var x=0;x<y.traces.length;x++)if(y.traces[x]!==d.traces[x])return!1}else return!1;else if(d.prop!==y.prop)return!1}d=l[0];var u=d.value;if(Array.isArray(u))if(u.length===1)u=u[0];else return!1;h&&(h[u]=i)}return y};function M(r,t,h){var i,s,y,d=!1;if(t.type==="data")i=r._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=r._fullLayout;else return!1;return s=f.nestedProperty(i,t.prop).get(),y=h[t.type]=h[t.type]||{},y.hasOwnProperty(t.prop)&&y[t.prop]!==s&&(d=!0),y[t.prop]=s,{changed:d,value:s}}H.executeAPICommand=function(r,t,h){if(t==="skip")return Promise.resolve();var i=w.apiMethodRegistry[t],s=[r];Array.isArray(h)||(h=[]);for(var y=0;y<h.length;y++)s.push(h[y]);return i.apply(null,s).catch(function(d){return f.warn("API call to Plotly."+t+" rejected.",d),Promise.reject(d)})},H.computeAPICommandBindings=function(r,t,h){var i;switch(Array.isArray(h)||(h=[]),t){case"restyle":i=a(r,h);break;case"relayout":i=e(r,h);break;case"update":i=a(r,[h[0],h[2]]).concat(e(r,[h[1]]));break;case"animate":i=T(r,h);break;default:i=[]}return i};function T(r,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function e(r,t){var h=[],i=t[0],s={};if(typeof i=="string")s[i]=t[1];else if(f.isPlainObject(i))s=i;else return h;return n(s,function(y,d,p){h.push({type:"layout",prop:y,value:p})},"",0),h}function a(r,t){var h,i,s,y,d=[];if(i=t[0],s=t[1],h=t[2],y={},typeof i=="string")y[i]=s;else if(f.isPlainObject(i))y=i,h===void 0&&(h=s);else return d;return h===void 0&&(h=null),n(y,function(p,c,m){var l,x;if(Array.isArray(m)){x=m.slice();var u=Math.min(x.length,r.data.length);h&&(u=Math.min(u,h.length)),l=[];for(var A=0;A<u;A++)l[A]=h?h[A]:A}else x=m,l=h?h.slice():null;if(l===null)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(l)){if(!Array.isArray(x)){var _=x;x=[];for(var g=0;g<l.length;g++)x[g]=_}x.length=Math.min(l.length,x.length)}d.push({type:"data",prop:p,traces:l,value:x})},"",0),d}function n(r,t,h,i){Object.keys(r).forEach(function(s){var y=r[s];if(s[0]!=="_"){var d=h+(i>0?".":"")+s;f.isPlainObject(y)?n(y,t,d,i+1):t(d,s,y)}})}},{"../lib":515,"../registry":647}],593:[function(o,U,H){var w=o("../lib/extend").extendFlat;H.attributes=function(f,M){f=f||{},M=M||{};var T={valType:"info_array",editType:f.editType,items:[{valType:"number",min:0,max:1,editType:f.editType},{valType:"number",min:0,max:1,editType:f.editType}],dflt:[0,1]};f.name&&f.name+"",f.trace,M.description&&""+M.description;var e={x:w({},T,{}),y:w({},T,{}),editType:f.editType};return f.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:f.editType},e.column={valType:"integer",min:0,dflt:0,editType:f.editType}),e},H.defaults=function(f,M,T,e){var a=e&&e.x||[0,1],n=e&&e.y||[0,1],r=M.grid;if(r){var t=T("domain.column");t!==void 0&&(t<r.columns?a=r._domains.x[t]:delete f.domain.column);var h=T("domain.row");h!==void 0&&(h<r.rows?n=r._domains.y[h]:delete f.domain.row)}var i=T("domain.x",a),s=T("domain.y",n);i[0]<i[1]||(f.domain.x=a.slice()),s[0]<s[1]||(f.domain.y=n.slice())}},{"../lib/extend":505}],594:[function(o,U,H){U.exports=function(w){var f=w.editType,M=w.colorEditType;M===void 0&&(M=f);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:f},size:{valType:"number",min:1,editType:f},color:{valType:"color",editType:M},editType:f};return w.autoSize&&(T.size.dflt="auto"),w.autoColor&&(T.color.dflt="auto"),w.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(o,U,H){U.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(o,U,H){H.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},H.axesNames=["lonaxis","lataxis"],H.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},H.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},H.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},H.clipPad=.001,H.precision=.1,H.landColor="#F0DC82",H.waterColor="#3399FF",H.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},H.sphereSVG={type:"Sphere"},H.fillLayers={ocean:1,land:1,lakes:1},H.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},H.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],H.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],H.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-geo"),M=f.geoPath,T=f.geoDistance,e=o("d3-geo-projection"),a=o("../../registry"),n=o("../../lib"),r=n.strTranslate,t=o("../../components/color"),h=o("../../components/drawing"),i=o("../../components/fx"),s=o("../plots"),y=o("../cartesian/axes"),d=o("../cartesian/autorange").getAutoRange,p=o("../../components/dragelement"),c=o("../../components/selections").prepSelect,m=o("../../components/selections").clearOutline,l=o("../../components/selections").selectOnClick,x=o("./zoom"),u=o("./constants"),A=o("../../lib/geo_location_utils"),_=o("../../lib/topojson_utils"),g=o("topojson-client").feature;function b(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var v=b.prototype;U.exports=function(F){return new b(F)},v.plot=function(E,F,I,D){var R=this;if(D)return R.update(E,F,!0);R._geoCalcData=E,R._fullLayout=F;var O=F[this.id],z=[],B=!1;for(var G in u.layerNameToAdjective)if(G!=="frame"&&O["show"+G]){B=!0;break}for(var Q=!1,X=0;X<E.length;X++){var j=E[0][0].trace;j._geo=R,j.locationmode&&(B=!0);var re=j.marker;if(re){var ue=re.angle,K=re.angleref;(ue||K==="north"||K==="previous")&&(Q=!0)}}if(this._hasMarkerAngles=Q,B){var te=_.getTopojsonName(O);(R.topojson===null||te!==R.topojsonName)&&(R.topojsonName=te,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(A.fetchTraceGeoData(E)),I.push(new Promise(function(Y,V){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(E,F),Y()}).catch(V)}))},v.fetchTopojson=function(){var E=this,F=_.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(I,D){w.json(F,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=O,I()})})},v.update=function(E,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<E.length;R++){var O=E[R],z=O[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(O,F)}if(!I){var B=this.updateProjection(E,F);if(B)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),s.generalUpdatePerTraceModule(this.graphDiv,this,E,D);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var Q=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Q.selectAll("path"),this._render()},v.updateProjection=function(E,F){var I=this.graphDiv,D=F[this.id],R=F._size,O=D.domain,z=D.projection,B=D.lonaxis,G=D.lataxis,Q=B._ax,X=G._ax,j=this.projection=C(D),re=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],ue=D.center||{},K=z.rotation||{},te=B.range||[],Y=G.range||[];if(D.fitbounds){Q._length=re[1][0]-re[0][0],X._length=re[1][1]-re[0][1],Q.range=d(I,Q),X.range=d(I,X);var V=(Q.range[0]+Q.range[1])/2,ee=(X.range[0]+X.range[1])/2;if(D._isScoped)ue={lon:V,lat:ee};else if(D._isClipped){ue={lon:V,lat:ee},K={lon:V,lat:ee,roll:K.roll};var ne=z.type,Z=u.lonaxisSpan[ne]/2||180,q=u.lataxisSpan[ne]/2||90;te=[V-Z,V+Z],Y=[ee-q,ee+q]}else ue={lon:V,lat:ee},K={lon:V,lat:K.lat,roll:K.roll}}j.center([ue.lon-K.lon,ue.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(z.parallels);var ie=k(te,Y);j.fitExtent(re,ie);var se=this.bounds=j.getBounds(ie),ae=this.fitScale=j.scale(),oe=j.translate();if(D.fitbounds){var be=j.getBounds(k(Q.range,X.range)),ce=Math.min((se[1][0]-se[0][0])/(be[1][0]-be[0][0]),(se[1][1]-se[0][1])/(be[1][1]-be[0][1]));isFinite(ce)?j.scale(ce*ae):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else j.scale(z.scale*ae);var de=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(j.translate([oe[0]+(de[0]-oe[0]),oe[1]+(de[1]-oe[1])]).clipExtent(se),D._isAlbersUsa){var ye=j([ue.lon,ue.lat]),ge=j.translate();j.translate([ge[0]-(ye[0]-ge[0]),ge[1]-(ye[1]-ge[1])])}},v.updateBaseLayers=function(E,F){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function z(re){return re==="lonaxis"||re==="lataxis"}function B(re){return Boolean(u.lineLayers[re])}function G(re){return Boolean(u.fillLayers[re])}var Q=this.hasChoropleth?u.layersForChoropleth:u.layers,X=Q.filter(function(re){return B(re)||G(re)?F["show"+re]:z(re)?F[re].showgrid:!0}),j=I.framework.selectAll(".layer").data(X,String);j.exit().each(function(re){delete R[re],delete O[re],w.select(this).remove()}),j.enter().append("g").attr("class",function(re){return"layer "+re}).each(function(re){var ue=R[re]=w.select(this);re==="bg"?I.bgRect=ue.append("rect").style("pointer-events","all"):z(re)?O[re]=ue.append("path").style("fill","none"):re==="backplot"?ue.append("g").classed("choroplethlayer",!0):re==="frontplot"?ue.append("g").classed("scatterlayer",!0):B(re)?O[re]=ue.append("path").style("fill","none").style("stroke-miterlimit",2):G(re)&&(O[re]=ue.append("path").style("stroke","none"))}),j.order(),j.each(function(re){var ue=O[re],K=u.layerNameToAdjective[re];re==="frame"?ue.datum(u.sphereSVG):B(re)||G(re)?ue.datum(g(D,D.objects[re])):z(re)&&ue.datum(S(re,F,E)).call(t.stroke,F[re].gridcolor).call(h.dashLine,F[re].griddash,F[re].gridwidth),B(re)?ue.call(t.stroke,F[K+"color"]).call(h.dashLine,"",F[K+"width"]):G(re)&&ue.call(t.fill,F[K+"color"])})},v.updateDims=function(E,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,z=I[1][0]-R+D,B=I[1][1]-O+D;h.setRect(this.clipRect,R,O,z,B),this.bgRect.call(h.setRect,R,O,z,B).call(t.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=O,this.yaxis._length=B},v.updateFx=function(E,F){var I=this,D=I.graphDiv,R=I.bgRect,O=E.dragmode,z=E.clickmode;if(I.isStatic)return;function B(){var j=I.viewInitial,re={};for(var ue in j)re[I.id+"."+ue]=j[ue];a.call("_guiRelayout",D,re),D.emit("plotly_doubleclick",null)}function G(j){return I.projection.invert([j[0]+I.xaxis._offset,j[1]+I.yaxis._offset])}var Q=function(j,re){if(re.isRect){var ue=j.range={};ue[I.id]=[G([re.xmin,re.ymin]),G([re.xmax,re.ymax])]}else{var K=j.lassoPoints={};K[I.id]=re.map(G)}},X={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:Q},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(j){j===2&&m(D)}};O==="pan"?(R.node().onmousedown=null,R.call(x(I,F)),R.on("dblclick.zoom",B),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),X.prepFn=function(j,re,ue){c(j,re,ue,X,O)},p.init(X)),R.on("mousemove",function(){var j=I.projection.invert(n.getPositionFromD3Event());if(!j)return p.unhover(D,w.event);I.xaxis.p2c=function(){return j[0]},I.yaxis.p2c=function(){return j[1]},i.hover(D,w.event,I.id)}),R.on("mouseout",function(){D._dragging||p.unhover(D,w.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(z.indexOf("select")>-1&&l(w.event,D,[I.xaxis],[I.yaxis],I.id,X),z.indexOf("event")>-1&&i.click(D,w.event))})},v.makeFramework=function(){var E=this,F=E.graphDiv,I=F._fullLayout,D="clip"+I._uid+E.id;E.clipDef=I._clips.append("clipPath").attr("id",D),E.clipRect=E.clipDef.append("rect"),E.framework=w.select(E.container).append("g").attr("class","geo "+E.id).call(h.setClipUrl,D,F),E.project=function(R){var O=E.projection(R);return O?[O[0]-E.xaxis._offset,O[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(R){return E.project(R)[0]}},E.yaxis={_id:"y",c2p:function(R){return E.project(R)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},y.setConvert(E.mockAxis,I)},v.saveViewInitial=function(E){var F=E.center||{},I=E.projection,D=I.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":I.scale};var R;E._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:E._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},n.extendFlat(this.viewInitial,R)},v.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},v._render=function(){var E=this.projection,F=E.getPath(),I;function D(O){var z=E(O.lonlat);return z?r(z[0],z[1]):null}function R(O){return E.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return F(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function C(E){var F=E.projection,I=F.type,D=u.projNames[I];D="geo"+n.titleCase(D);for(var R=f[D]||e[D],O=R(),z=E._isSatellite?Math.acos(1/F.distance)*180/Math.PI:E._isClipped?u.lonaxisSpan[I]/2:null,B=["center","rotate","parallels","clipExtent"],G=function(j){return j?O:[]},Q=0;Q<B.length;Q++){var X=B[Q];typeof O[X]!="function"&&(O[X]=G)}return O.isLonLatOverEdges=function(j){if(O(j)===null)return!0;if(z){var re=O.rotate(),ue=T(j,[-re[0],-re[1]]),K=z*Math.PI/180;return ue>K}else return!1},O.getPath=function(){return M().projection(O)},O.getBounds=function(j){return O.getPath().bounds(j)},O.precision(u.precision),E._isSatellite&&O.tilt(F.tilt).distance(F.distance),z&&O.clipAngle(z-u.clipPad),O}function S(E,F,I){var D=1e-6,R=2.5,O=F[E],z=u.scopeDefaults[F.scope],B,G,Q;E==="lonaxis"?(B=z.lonaxisRange,G=z.lataxisRange,Q=function(ee,ne){return[ee,ne]}):E==="lataxis"&&(B=z.lataxisRange,G=z.lonaxisRange,Q=function(ee,ne){return[ne,ee]});var X={type:"linear",range:[B[0],B[1]-D],tick0:O.tick0,dtick:O.dtick};y.setConvert(X,I);var j=y.calcTicks(X);!F.isScoped&&E==="lonaxis"&&j.pop();for(var re=j.length,ue=new Array(re),K=0;K<re;K++)for(var te=j[K].x,Y=ue[K]=[],V=G[0];V<G[1]+R;V+=R)Y.push(Q(te,V));return{type:"MultiLineString",coordinates:ue}}function k(E,F){var I=u.clipPad,D=E[0]+I,R=E[1]-I,O=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var B=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,z],[D+B,z],[D+2*B,z],[D+3*B,z],[R,z],[R,O],[R-B,O],[R-2*B,O],[R-3*B,O],[D,O]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(o,U,H){var w=o("../../plots/get_data").getSubplotCalcData,f=o("../../lib").counterRegex,M=o("./geo"),T="geo",e=f(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function n(h){for(var i=h._fullLayout,s=h.calcdata,y=i._subplots[T],d=0;d<y.length;d++){var p=y[d],c=w(s,T,p),m=i[p],l=m._subplot;l||(l=M({id:p,graphDiv:h,container:i._geolayer.node(),topojsonURL:h._context.topojsonURL,staticPlot:h._context.staticPlot}),i[p]._subplot=l),l.plot(c,i,h._promises)}}function r(h,i,s,y){for(var d=y._subplots[T]||[],p=0;p<d.length;p++){var c=d[p],m=y[c]._subplot;!i[c]&&!!m&&(m.framework.remove(),m.clipDef.remove())}}function t(h){for(var i=h._fullLayout,s=i._subplots[T],y=0;y<s.length;y++){var d=i[s[y]],p=d._subplot;p.updateFx(i,d)}}U.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:o("./layout_attributes"),supplyLayoutDefaults:o("./layout_defaults"),plot:n,updateFx:t,clean:r}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(o,U,H){var w=o("../../components/color/attributes"),f=o("../domain").attributes,M=o("../../components/drawing/attributes").dash,T=o("./constants"),e=o("../../plot_api/edit_types").overrideAll,a=o("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:w.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M},r=U.exports=e({domain:f({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:w.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:w.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:w.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:w.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:w.background},lonaxis:n,lataxis:n},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(o,U,H){var w=o("../../lib"),f=o("../subplot_defaults"),M=o("../get_data").getSubplotData,T=o("./constants"),e=o("./layout_attributes"),a=T.axesNames;U.exports=function(t,h,i){f(t,h,i,{type:"geo",attributes:e,handleDefaults:n,fullData:i,partition:"y"})};function n(r,t,h,i){var s=M(i.fullData,"geo",i.id),y=s.map(function(Y){return Y._expandedIndex}),d=h("resolution"),p=h("scope"),c=T.scopeDefaults[p],m=h("projection.type",c.projType),l=t._isAlbersUsa=m==="albers usa";l&&(p=t.scope="usa");var x=t._isScoped=p!=="world",u=t._isSatellite=m==="satellite",A=t._isConic=m.indexOf("conic")!==-1||m==="albers",_=t._isClipped=!!T.lonaxisSpan[m];if(r.visible===!1){var g=w.extendDeep({},t._template);g.showcoastlines=!1,g.showcountries=!1,g.showframe=!1,g.showlakes=!1,g.showland=!1,g.showocean=!1,g.showrivers=!1,g.showsubunits=!1,g.lonaxis&&(g.lonaxis.showgrid=!1),g.lataxis&&(g.lataxis.showgrid=!1),t._template=g}for(var b=h("visible"),v,C=0;C<a.length;C++){var S=a[C],k=[30,10][C],E;if(x)E=c[S+"Range"];else{var F=T[S+"Span"],I=(F[m]||F["*"])/2,D=h("projection.rotation."+S.substr(0,3),c.projRotate[C]);E=[D-I,D+I]}var R=h(S+".range",E);h(S+".tick0"),h(S+".dtick",k),v=h(S+".showgrid",b?void 0:!1),v&&(h(S+".gridcolor"),h(S+".gridwidth"),h(S+".griddash")),t[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:y,setScale:w.identity,c2l:w.identity,r2l:w.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=t.lonaxis.range,z=t.lataxis.range,B=O[0],G=O[1];B>0&&G<0&&(G+=360);var Q=(B+G)/2,X;if(!l){var j=x?c.projRotate:[Q,0,0];X=h("projection.rotation.lon",j[0]),h("projection.rotation.lat",j[1]),h("projection.rotation.roll",j[2]),v=h("showcoastlines",!x&&b),v&&(h("coastlinecolor"),h("coastlinewidth")),v=h("showocean",b?void 0:!1),v&&h("oceancolor")}var re,ue;if(l?(re=-96.6,ue=38.7):(re=x?Q:X,ue=(z[0]+z[1])/2),h("center.lon",re),h("center.lat",ue),u&&(h("projection.tilt"),h("projection.distance")),A){var K=c.projParallels||[0,60];h("projection.parallels",K)}h("projection.scale"),v=h("showland",b?void 0:!1),v&&h("landcolor"),v=h("showlakes",b?void 0:!1),v&&h("lakecolor"),v=h("showrivers",b?void 0:!1),v&&(h("rivercolor"),h("riverwidth")),v=h("showcountries",x&&p!=="usa"&&b),v&&(h("countrycolor"),h("countrywidth")),(p==="usa"||p==="north america"&&d===50)&&(h("showsubunits",b),h("subunitcolor"),h("subunitwidth")),x||(v=h("showframe",b),v&&(h("framecolor"),h("framewidth"))),h("bgcolor");var te=h("fitbounds");te&&(delete t.projection.scale,x?(delete t.center.lon,delete t.center.lat):_?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},n={cursor:"auto"};function r(S,k){var E=S.projection,F;return k._isScoped?F=i:k._isClipped?F=y:F=s,F(S,E)}U.exports=r;function t(S,k){return w.behavior.zoom().translate(k.translate()).scale(k.scale())}function h(S,k,E){var F=S.id,I=S.graphDiv,D=I.layout,R=D[F],O=I._fullLayout,z=O[F],B={},G={};function Q(X,j){B[F+"."+X]=f.nestedProperty(R,X).get(),M.call("_storeDirectGUIEdit",D,O._preGUI,B);var re=f.nestedProperty(z,X);re.get()!==j&&(re.set(j),f.nestedProperty(R,X).set(j),G[F+"."+X]=j)}E(Q),Q("projection.scale",k.scale()/S.fitScale),Q("fitbounds",!1),I.emit("plotly_relayout",G)}function i(S,k){var E=t(S,k);function F(){w.select(this).style(a)}function I(){k.scale(w.event.scale).translate(w.event.translate),S.render(!0);var O=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var z=k.invert(S.midPt);O("center.lon",z[0]),O("center.lat",z[1])}function R(){w.select(this).style(n),h(S,k,D)}return E.on("zoomstart",F).on("zoom",I).on("zoomend",R),E}function s(S,k){var E=t(S,k),F=2,I,D,R,O,z,B,G,Q,X;function j(V){return k.invert(V)}function re(V){var ee=j(V);if(!ee)return!0;var ne=k(ee);return Math.abs(ne[0]-V[0])>F||Math.abs(ne[1]-V[1])>F}function ue(){w.select(this).style(a),I=w.mouse(this),D=k.rotate(),R=k.translate(),O=D,z=j(I)}function K(){if(B=w.mouse(this),re(I)){E.scale(k.scale()),E.translate(k.translate());return}k.scale(w.event.scale),k.translate([R[0],w.event.translate[1]]),z?j(B)&&(Q=j(B),G=[O[0]+(Q[0]-z[0]),D[1],D[2]],k.rotate(G),O=G):(I=B,z=j(I)),X=!0,S.render(!0);var V=k.rotate(),ee=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-V[0]})}function te(){w.select(this).style(n),X&&h(S,k,Y)}function Y(V){var ee=k.rotate(),ne=k.invert(S.midPt);V("projection.rotation.lon",-ee[0]),V("center.lon",ne[0]),V("center.lat",ne[1])}return E.on("zoomstart",ue).on("zoom",K).on("zoomend",te),E}function y(S,k){k.rotate(),k.scale();var E=t(S,k),F=C(E,"zoomstart","zoom","zoomend"),I=0,D=E.on,R;E.on("zoomstart",function(){w.select(this).style(a);var Q=w.mouse(this),X=k.rotate(),j=X,re=k.translate(),ue=p(X);R=d(k,Q),D.call(E,"zoom",function(){var K=w.mouse(this);if(k.scale(w.event.scale),!R)Q=K,R=d(k,Q);else if(d(k,K)){k.rotate(X).translate(re);var te=d(k,K),Y=m(R,te),V=_(c(ue,Y)),ee=l(V,R,j);(!isFinite(ee[0])||!isFinite(ee[1])||!isFinite(ee[2]))&&(ee=j),k.rotate(ee),j=ee}z(F.of(this,arguments))}),O(F.of(this,arguments))}).on("zoomend",function(){w.select(this).style(n),D.call(E,"zoom",null),B(F.of(this,arguments)),h(S,k,G)}).on("zoom.redraw",function(){S.render(!0);var Q=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-Q[0],"geo.projection.rotation.lat":-Q[1]})});function O(Q){I++||Q({type:"zoomstart"})}function z(Q){Q({type:"zoom"})}function B(Q){--I||Q({type:"zoomend"})}function G(Q){var X=k.rotate();Q("projection.rotation.lon",-X[0]),Q("projection.rotation.lat",-X[1])}return w.rebind(E,F,"on")}function d(S,k){var E=S.invert(k);return E&&isFinite(E[0])&&isFinite(E[1])&&g(E)}function p(S){var k=.5*S[0]*T,E=.5*S[1]*T,F=.5*S[2]*T,I=Math.sin(k),D=Math.cos(k),R=Math.sin(E),O=Math.cos(E),z=Math.sin(F),B=Math.cos(F);return[D*O*B+I*R*z,I*O*B-D*R*z,D*R*B+I*O*z,D*O*z-I*R*B]}function c(S,k){var E=S[0],F=S[1],I=S[2],D=S[3],R=k[0],O=k[1],z=k[2],B=k[3];return[E*R-F*O-I*z-D*B,E*O+F*R+I*B-D*z,E*z-F*B+I*R+D*O,E*B+F*z-I*O+D*R]}function m(S,k){if(!(!S||!k)){var E=v(S,k),F=Math.sqrt(b(E,E)),I=.5*Math.acos(Math.max(-1,Math.min(1,b(S,k)))),D=Math.sin(I)/F;return F&&[Math.cos(I),E[2]*D,-E[1]*D,E[0]*D]}}function l(S,k,E){var F=A(k,2,S[0]);F=A(F,1,S[1]),F=A(F,0,S[2]-E[2]);var I=k[0],D=k[1],R=k[2],O=F[0],z=F[1],B=F[2],G=Math.atan2(D,I)*e,Q=Math.sqrt(I*I+D*D),X,j;Math.abs(z)>Q?(j=(z>0?90:-90)-G,X=0):(j=Math.asin(z/Q)*e-G,X=Math.sqrt(Q*Q-z*z));var re=180-j-2*G,ue=(Math.atan2(B,O)-Math.atan2(R,X))*e,K=(Math.atan2(B,O)-Math.atan2(R,-X))*e,te=x(E[0],E[1],j,ue),Y=x(E[0],E[1],re,K);return te<=Y?[j,ue,E[2]]:[re,K,E[2]]}function x(S,k,E,F){var I=u(E-S),D=u(F-k);return Math.sqrt(I*I+D*D)}function u(S){return(S%360+540)%360-180}function A(S,k,E){var F=E*T,I=S.slice(),D=k===0?1:0,R=k===2?1:2,O=Math.cos(F),z=Math.sin(F);return I[D]=S[D]*O-S[R]*z,I[R]=S[R]*O+S[D]*z,I}function _(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function g(S){var k=S[0]*T,E=S[1]*T,F=Math.cos(E);return[F*Math.cos(k),F*Math.sin(k),Math.sin(E)]}function b(S,k){for(var E=0,F=0,I=S.length;F<I;++F)E+=S[F]*k[F];return E}function v(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function C(S){for(var k=0,E=arguments.length,F=[];++k<E;)F.push(arguments[k]);var I=w.dispatch.apply(null,F);return I.of=function(D,R){return function(O){var z;try{z=O.sourceEvent=w.event,O.target=S,w.event=O,I[O.type].apply(D,R)}finally{w.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(o,U,H){var w=o("../registry"),f=o("./cartesian/constants").SUBPLOT_PATTERN;H.getSubplotCalcData=function(M,T,e){var a=w.subplotsRegistry[T];if(!a)return[];for(var n=a.attr,r=[],t=0;t<M.length;t++){var h=M[t],i=h[0].trace;i[n]===e&&r.push(h)}return r},H.getModuleCalcData=function(M,T){var e=[],a=[],n;if(typeof T=="string"?n=w.getModule(T).plot:typeof T=="function"?n=T:n=T.plot,!n)return[e,M];for(var r=0;r<M.length;r++){var t=M[r],h=t[0].trace;h.visible!==!0||h._length===0||(h._module.plot===n?e.push(t):a.push(t))}return[e,a]},H.getSubplotData=function(T,e,a){if(!w.subplotsRegistry[e])return[];var n=w.subplotsRegistry[e].attr,r=[],t,h,i;if(e==="gl2d"){var s=a.match(f);h="x"+s[1],i="y"+s[2]}for(var y=0;y<T.length;y++)t=T[y],e==="gl2d"&&w.traceIs(t,"gl2d")?t[n[0]]===h&&t[n[1]]===i&&r.push(t):t[n]===a&&r.push(t);return r}},{"../registry":647,"./cartesian/constants":573}],603:[function(o,U,H){var w=o("mouse-change"),f=o("mouse-wheel"),M=o("mouse-event-offset"),T=o("../cartesian/constants"),e=o("has-passive-events");U.exports=n;function a(r,t){this.element=r,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(r){var t=r.mouseContainer,h=r.glplot,i=new a(t,h);function s(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function y(){for(var p=r.graphDiv._fullLayout._axisConstraintGroups,c=r.xaxis._id,m=r.yaxis._id,l=0;l<p.length;l++)if(p[l][c]!==-1){if(p[l][m]!==-1)return!0;break}return!1}i.mouseListener=w(t,d),t.addEventListener("touchstart",function(p){var c=M(p.changedTouches[0],t);d(0,c[0],c[1]),d(1,c[0],c[1]),p.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchmove",function(p){p.preventDefault();var c=M(p.changedTouches[0],t);d(1,c[0],c[1]),p.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchend",function(p){d(0,i.lastPos[0],i.lastPos[1]),p.preventDefault()},e?{passive:!1}:!1);function d(p,c,m){var l=r.calcDataBox(),x=h.viewBox,u=i.lastPos[0],A=i.lastPos[1],_=T.MINDRAG*h.pixelRatio,g=T.MINZOOM*h.pixelRatio,b,v;c*=h.pixelRatio,m*=h.pixelRatio,m=x[3]-x[1]-m;function C(D,R,O){var z=Math.min(R,O),B=Math.max(R,O);z!==B?(l[D]=z,l[D+2]=B,i.dataBox=l,r.setRanges(l)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(p){var S=c/(x[2]-x[0])*(l[2]-l[0])+l[0],k=m/(x[3]-x[1])*(l[3]-l[1])+l[1];i.boxInited||(i.boxStart[0]=S,i.boxStart[1]=k,i.dragStart[0]=c,i.dragStart[1]=m),i.boxEnd[0]=S,i.boxEnd[1]=k,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var E=Math.abs(i.dragStart[0]-c)<g,F=Math.abs(i.dragStart[1]-m)<g;if(y()&&!(E&&F)){b=i.boxEnd[0]-i.boxStart[0],v=i.boxEnd[1]-i.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(b*I)>Math.abs(v)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(b)*I*(v>=0?1:-1),i.boxEnd[1]<l[1]?(i.boxEnd[1]=l[1],i.boxEnd[0]=i.boxStart[0]+(l[1]-i.boxStart[1])/Math.abs(I)):i.boxEnd[1]>l[3]&&(i.boxEnd[1]=l[3],i.boxEnd[0]=i.boxStart[0]+(l[3]-i.boxStart[1])/Math.abs(I))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(v)/I*(b>=0?1:-1),i.boxEnd[0]<l[0]?(i.boxEnd[0]=l[0],i.boxEnd[1]=i.boxStart[1]+(l[0]-i.boxStart[0])*Math.abs(I)):i.boxEnd[0]>l[2]&&(i.boxEnd[0]=l[2],i.boxEnd[1]=i.boxStart[1]+(l[2]-i.boxStart[0])*Math.abs(I)))}else E&&(i.boxEnd[0]=i.boxStart[0]),F&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(b=i.boxStart[0]!==i.boxEnd[0],v=i.boxStart[1]!==i.boxEnd[1],b||v?(b&&(C(0,i.boxStart[0],i.boxEnd[0]),r.xaxis.autorange=!1),v&&(C(1,i.boxStart[1],i.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,p?(i.panning||(i.dragStart[0]=c,i.dragStart[1]=m),Math.abs(i.dragStart[0]-c)<_&&(c=i.dragStart[0]),Math.abs(i.dragStart[1]-m)<_&&(m=i.dragStart[1]),b=(u-c)*(l[2]-l[0])/(h.viewBox[2]-h.viewBox[0]),v=(A-m)*(l[3]-l[1])/(h.viewBox[3]-h.viewBox[1]),l[0]+=b,l[2]+=b,l[1]+=v,l[3]+=v,r.setRanges(l),i.panning=!0,i.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations()):i.panning&&(i.panning=!1,r.relayoutCallback());break}i.lastPos[0]=c,i.lastPos[1]=m}return i.wheelListener=f(t,function(p,c){if(!r.scrollZoom)return!1;var m=r.calcDataBox(),l=h.viewBox,x=i.lastPos[0],u=i.lastPos[1],A=Math.exp(5*c/(l[3]-l[1])),_=x/(l[2]-l[0])*(m[2]-m[0])+m[0],g=u/(l[3]-l[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-_)*A+_,m[2]=(m[2]-_)*A+_,m[1]=(m[1]-g)*A+g,m[3]=(m[3]-g)*A+g,r.setRanges(m),i.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),i}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(o,U,H){var w=o("../cartesian/axes"),f=o("../../lib/str2rgbarray");function M(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=M.prototype,e=["xaxis","yaxis"];T.merge=function(n){this.titleEnable=!1,this.backgroundColor=f(n.plot_bgcolor);var r,t,h,i,s,y,d,p,c,m,l;for(m=0;m<2;++m){r=e[m];var x=r.charAt(0);for(t=n[this.scene[r]._name],h=t.title.text===this.scene.fullLayout._dfltTitle[x]?"":t.title.text,l=0;l<=2;l+=2)this.labelEnable[m+l]=!1,this.labels[m+l]=h,this.labelColor[m+l]=f(t.title.font.color),this.labelFont[m+l]=t.title.font.family,this.labelSize[m+l]=t.title.font.size,this.labelPad[m+l]=this.getLabelPad(r,t),this.tickEnable[m+l]=!1,this.tickColor[m+l]=f((t.tickfont||{}).color),this.tickAngle[m+l]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[m+l]=this.getTickPad(t),this.tickMarkLength[m+l]=0,this.tickMarkWidth[m+l]=t.tickwidth||0,this.tickMarkColor[m+l]=f(t.tickcolor),this.borderLineEnable[m+l]=!1,this.borderLineColor[m+l]=f(t.linecolor),this.borderLineWidth[m+l]=t.linewidth||0;d=this.hasSharedAxis(t),s=this.hasAxisInDfltPos(r,t)&&!d,y=this.hasAxisInAltrPos(r,t)&&!d,i=t.mirror||!1,p=d?String(i).indexOf("all")!==-1:!!i,c=d?i==="allticks":String(i).indexOf("ticks")!==-1,s?this.labelEnable[m]=!0:y&&(this.labelEnable[m+2]=!0),s?this.tickEnable[m]=t.showticklabels:y&&(this.tickEnable[m+2]=t.showticklabels),(s||p)&&(this.borderLineEnable[m]=t.showline),(y||p)&&(this.borderLineEnable[m+2]=t.showline),(s||c)&&(this.tickMarkLength[m]=this.getTickMarkLength(t)),(y||c)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(t)),this.gridLineEnable[m]=t.showgrid,this.gridLineColor[m]=f(t.gridcolor),this.gridLineWidth[m]=t.gridwidth,this.zeroLineEnable[m]=t.zeroline,this.zeroLineColor[m]=f(t.zerolinecolor),this.zeroLineWidth[m]=t.zerolinewidth}},T.hasSharedAxis=function(n){var r=this.scene,t=r.fullLayout._subplots.gl2d,h=w.findSubplotsWithAxis(t,n);return h.indexOf(r.id)!==0},T.hasAxisInDfltPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="bottom";if(n==="yaxis")return t==="left"},T.hasAxisInAltrPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="top";if(n==="yaxis")return t==="right"},T.getLabelPad=function(n,r){var t=1.5,h=r.title.font.size,i=r.showticklabels;if(n==="xaxis")return r.side==="top"?-10+h*(t+(i?1:0)):-10+h*(t+(i?.5:0));if(n==="yaxis")return r.side==="right"?10+h*(t+(i?1:.5)):10+h*(t+(i?.5:0))},T.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},T.getTickMarkLength=function(n){if(!n.ticks)return 0;var r=n.ticklen;return n.ticks==="inside"?-r:r};function a(n){return new M(n)}U.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(o,U,H){var w=o("../../plot_api/edit_types").overrideAll,f=o("./scene2d"),M=o("../layout_attributes"),T=o("../../constants/xmlns_namespaces"),e=o("../cartesian/constants"),a=o("../cartesian"),n=o("../../components/fx/layout_attributes"),r=o("../get_data").getSubplotData;H.name="gl2d",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=e.idRegex,H.attrRegex=e.attrRegex,H.attributes=o("../cartesian/attributes"),H.supplyLayoutDefaults=function(t,h,i){h._has("cartesian")||a.supplyLayoutDefaults(t,h,i)},H.layoutAttrOverrides=w(a.layoutAttributes,"plot","from-root"),H.baseLayoutAttrOverrides=w({plot_bgcolor:M.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),H.plot=function(h){for(var i=h._fullLayout,s=h._fullData,y=i._subplots.gl2d,d=0;d<y.length;d++){var p=y[d],c=i._plots[p],m=r(s,"gl2d",p),l=c._scene2d;l===void 0&&(l=new f({id:p,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},i),c._scene2d=l),l.plot(m,h.calcdata,i,h.layout)}},H.clean=function(t,h,i,s){for(var y=s._subplots.gl2d||[],d=0;d<y.length;d++){var p=y[d],c=s._plots[p];if(!!c._scene2d){var m=r(t,"gl2d",p);m.length===0&&(c._scene2d.destroy(),delete s._plots[p])}}a.clean.apply(this,arguments)},H.drawFramework=function(t){t._context.staticPlot||a.drawFramework(t)},H.toSVG=function(t){for(var h=t._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var y=h._plots[i[s]],d=y._scene2d,p=d.toImage("png"),c=h._glimages.append("svg:image");c.attr({xmlns:T.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},H.updateFx=function(t){for(var h=t._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var y=h._plots[i[s]]._scene2d;y.updateFx(h.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(o,U,H){var w=o("../../registry"),f=o("../../plots/cartesian/axes"),M=o("../../components/fx"),T=o("../../../stackgl_modules").gl_plot2d,e=o("../../../stackgl_modules").gl_spikes2d,a=o("../../../stackgl_modules").gl_select_box,n=o("webgl-context"),r=o("./convert"),t=o("./camera"),h=o("../../lib/show_no_webgl_msg"),i=o("../cartesian/constraints"),s=i.enforce,y=i.clean,d=o("../cartesian/autorange").doAutoRange,p=o("../../components/dragelement/helpers"),c=p.drawMode,m=p.selectMode,l=["xaxis","yaxis"],x,u,A=o("../cartesian/constants").SUBPLOT_PATTERN;function _(v,C){this.container=v.container,this.graphDiv=v.graphDiv,this.pixelRatio=v.plotGlPixelRatio||window.devicePixelRatio,this.id=v.id,this.staticPlot=!!v.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(C),this.glplot=T(this.glplotOptions),this.camera=t(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}U.exports=_;var g=_.prototype;g.makeFramework=function(){if(this.staticPlot){if(!u&&(x=document.createElement("canvas"),u=n({canvas:x,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=u}else{var v=this.container.querySelector(".gl-canvas-focus"),C=n({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){h(this),this.stopped=!0;return}this.canvas=v,this.gl=C}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var E=this.mouseContainer=document.createElement("div");E.style.position="absolute",E.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(k),F.appendChild(E);var I=this;E.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),E.addEventListener("mouseover",function(){I.isMouseOver=!0})},g.toImage=function(v){v||(v="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var C=this.glplot.gl,S=C.drawingBufferWidth,k=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var E=new Uint8Array(S*k*4);C.readPixels(0,0,S,k,C.RGBA,C.UNSIGNED_BYTE,E);for(var F=0,I=k-1;F<I;++F,--I)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var O=E[4*(S*F+D)+R];E[4*(S*F+D)+R]=E[4*(S*I+D)+R],E[4*(S*I+D)+R]=O}var z=document.createElement("canvas");z.width=S,z.height=k;var B=z.getContext("2d",{willReadFrequently:!0}),G=B.createImageData(S,k);G.data.set(E),B.putImageData(G,0,0);var Q;switch(v){case"jpeg":Q=z.toDataURL("image/jpeg");break;case"webp":Q=z.toDataURL("image/webp");break;default:Q=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),Q},g.updateSize=function(v){v||(v=this.canvas);var C=this.pixelRatio,S=this.fullLayout,k=S.width,E=S.height,F=Math.ceil(C*k)|0,I=Math.ceil(C*E)|0;return(v.width!==F||v.height!==I)&&(v.width=F,v.height=I),v},g.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var v=[f.calcTicks(this.xaxis),f.calcTicks(this.yaxis)],C=0;C<2;++C)for(var S=0;S<v[C].length;++S)v[C][S].text=v[C][S].text+"";return v};function b(v,C){for(var S=0;S<2;++S){var k=v[S],E=C[S];if(k.length!==E.length)return!0;for(var F=0;F<k.length;++F)if(k[F].x!==E[F].x)return!0}return!1}g.updateRefs=function(v){this.fullLayout=v;var C=this.id.match(A),S="xaxis"+C[1],k="yaxis"+C[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},g.relayoutCallback=function(){var v=this.graphDiv,C=this.xaxis,S=this.yaxis,k=v.layout,E={},F=E[C._name+".range"]=C.range.slice(),I=E[S._name+".range"]=S.range.slice();E[C._name+".autorange"]=C.autorange,E[S._name+".autorange"]=S.autorange,w.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,E);var D=k[C._name];D.range=F,D.autorange=C.autorange;var R=k[S._name];R.range=I,R.autorange=S.autorange,E.lastInputTime=this.camera.lastInputTime,v.emit("plotly_relayout",E)},g.cameraChanged=function(){var v=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),S=this.glplotOptions.ticks;b(C,S)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=v.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},g.handleAnnotations=function(){for(var v=this.graphDiv,C=this.fullLayout.annotations,S=0;S<C.length;S++){var k=C[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&w.getComponentMethod("annotations","drawOne")(v,S)}},g.destroy=function(){if(!!this.glplot){var v=this.traces;v&&Object.keys(v).map(function(C){v[C].dispose(),delete v[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},g.plot=function(v,C,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(v,C),this.updateFx(S.dragmode);var E=S.width,F=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,E,F];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};y(D,this.xaxis),y(D,this.yaxis);var R=S._size,O=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+z[0]*R.h,E-R.r-(1-O[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var B,G;for(G=0;G<2;++G)B=this[l[G]],B._length=I.viewBox[G+2]-I.viewBox[G],d(this.graphDiv,B),B.setScale();s(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),k.update(I),this.glplot.draw()},g.calcDataBox=function(){var v=this.xaxis,C=this.yaxis,S=v.range,k=C.range,E=v.r2l,F=C.r2l;return[E(S[0]),F(k[0]),E(S[1]),F(k[1])]},g.setRanges=function(v){var C=this.xaxis,S=this.yaxis,k=C.l2r,E=S.l2r;C.range=[k(v[0]),k(v[2])],S.range=[E(v[1]),E(v[3])]},g.updateTraces=function(v,C){var S=Object.keys(this.traces),k,E,F;this.fullData=v;e:for(k=0;k<S.length;k++){var I=S[k],D=this.traces[I];for(E=0;E<v.length;E++)if(F=v[E],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(k=0;k<v.length;k++){F=v[k];var R=C[k],O=this.traces[F.uid];O?O.update(F,R):(O=F._module.plot(this,F,R),this.traces[F.uid]=O)}this.glplot.objects.sort(function(z,B){return z._trace.index-B._trace.index})},g.updateFx=function(v){m(v)||c(v)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),v==="pan"?this.mouseContainer.style.cursor="move":v==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},g.emitPointAction=function(v,C){for(var S=v.trace.uid,k=v.pointIndex,E,F=0;F<this.fullData.length;F++)this.fullData[F].uid===S&&(E=this.fullData[F]);var I={x:v.traceCoord[0],y:v.traceCoord[1],curveNumber:E.index,pointNumber:k,data:E._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};M.appendArrayPointValue(I,E,k),this.graphDiv.emit(C,{points:[I]})},g.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var v=this.glplot,C=this.camera,S=C.mouseListener,k=this.lastButtonState===1&&S.buttons===0,E=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var F=S.x*v.pixelRatio,I=this.canvas.height-v.pixelRatio*S.y,D;if(C.boxEnabled&&E.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],O=0;O<2;O++)C.boxStart[O]===C.boxEnd[O]&&(R[O]=v.dataBox[O],R[O+2]=v.dataBox[O+2]);v.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=E._size,B=this.xaxis.domain,G=this.yaxis.domain;D=v.pick(F/v.pixelRatio+z.l+B[0]*z.w,I/v.pixelRatio-(z.t+(1-G[1])*z.h));var Q=D&&D.object._trace.handlePick(D);if(Q&&k&&this.emitPointAction(Q,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&E.hovermode&&Q&&(!this.lastPickResult||this.lastPickResult.traceUid!==Q.trace.uid||this.lastPickResult.dataCoord[0]!==Q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==Q.dataCoord[1])){var X=Q;this.lastPickResult={traceUid:Q.trace?Q.trace.uid:null,dataCoord:Q.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),X.screenCoord=[((v.viewBox[2]-v.viewBox[0])*(D.dataCoord[0]-v.dataBox[0])/(v.dataBox[2]-v.dataBox[0])+v.viewBox[0])/v.pixelRatio,(this.canvas.height-(v.viewBox[3]-v.viewBox[1])*(D.dataCoord[1]-v.dataBox[1])/(v.dataBox[3]-v.dataBox[1])-v.viewBox[1])/v.pixelRatio],this.emitPointAction(Q,"plotly_hover");var j=this.fullData[X.trace.index]||{},re=X.pointIndex,ue=M.castHoverinfo(j,E,re);if(ue&&ue!=="all"){var K=ue.split("+");K.indexOf("x")===-1&&(X.traceCoord[0]=void 0),K.indexOf("y")===-1&&(X.traceCoord[1]=void 0),K.indexOf("z")===-1&&(X.traceCoord[2]=void 0),K.indexOf("text")===-1&&(X.textLabel=void 0),K.indexOf("name")===-1&&(X.name=void 0)}M.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:M.castHoverOption(j,re,"bgcolor")||X.color,borderColor:M.castHoverOption(j,re,"bordercolor"),fontFamily:M.castHoverOption(j,re,"font.family"),fontSize:M.castHoverOption(j,re,"font.size"),fontColor:M.castHoverOption(j,re,"font.color"),nameLength:M.castHoverOption(j,re,"namelength"),textAlign:M.castHoverOption(j,re,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),v.draw()}},g.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),M.loneUnhover(this.svgContainer))},g.hoverFormatter=function(v,C){if(C!==void 0){var S=this[v];return f.tickText(S,S.c2l(C),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(o,U,H){var w=o("../../plot_api/edit_types").overrideAll,f=o("../../components/fx/layout_attributes"),M=o("./scene"),T=o("../get_data").getSubplotData,e=o("../../lib"),a=o("../../constants/xmlns_namespaces"),n="gl3d",r="scene";H.name=n,H.attr=r,H.idRoot=r,H.idRegex=H.attrRegex=e.counterRegex("scene"),H.attributes=o("./layout/attributes"),H.layoutAttributes=o("./layout/layout_attributes"),H.baseLayoutAttrOverrides=w({hoverlabel:f.hoverlabel},"plot","nested"),H.supplyLayoutDefaults=o("./layout/defaults"),H.plot=function(h){for(var i=h._fullLayout,s=h._fullData,y=i._subplots[n],d=0;d<y.length;d++){var p=y[d],c=T(s,n,p),m=i[p],l=m.camera,x=m._scene;x||(x=new M({id:p,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:l},i),m._scene=x),x.viewInitial||(x.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),x.plot(c,i,h.layout)}},H.clean=function(t,h,i,s){for(var y=s._subplots[n]||[],d=0;d<y.length;d++){var p=y[d];!h[p]&&!!s[p]._scene&&(s[p]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+p).remove())}},H.toSVG=function(t){for(var h=t._fullLayout,i=h._subplots[n],s=h._size,y=0;y<i.length;y++){var d=h[i[y]],p=d.domain,c=d._scene,m=c.toImage("png"),l=h._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":m,x:s.l+s.w*p.x[0],y:s.t+s.h*(1-p.y[1]),width:s.w*(p.x[1]-p.x[0]),height:s.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},H.cleanId=function(h){if(!!h.match(/^scene[0-9]*$/)){var i=h.substr(5);return i==="1"&&(i=""),r+i}},H.updateFx=function(t){for(var h=t._fullLayout,i=h._subplots[n],s=0;s<i.length;s++){var y=h[i[s]]._scene;y.updateFx(h.dragmode,h.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(o,U,H){U.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(o,U,H){var w=o("../../../components/color"),f=o("../../cartesian/layout_attributes"),M=o("../../../lib/extend").extendFlat,T=o("../../../plot_api/edit_types").overrideAll;U.exports=T({visible:f.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:w.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:f.color,categoryorder:f.categoryorder,categoryarray:f.categoryarray,title:{text:f.title.text,font:f.title.font},type:M({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:f.autorange,rangemode:f.rangemode,range:M({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,mirror:f.mirror,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,showticklabels:f.showticklabels,tickfont:f.tickfont,tickangle:f.tickangle,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickformat:f.tickformat,tickformatstops:f.tickformatstops,hoverformat:f.hoverformat,showline:f.showline,linecolor:f.linecolor,linewidth:f.linewidth,showgrid:f.showgrid,gridcolor:M({},f.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:f.gridwidth,zeroline:f.zeroline,zerolinecolor:f.zerolinecolor,zerolinewidth:f.zerolinewidth,_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(o,U,H){var w=o("tinycolor2").mix,f=o("../../../lib"),M=o("../../../plot_api/plot_template"),T=o("./axis_attributes"),e=o("../../cartesian/type_defaults"),a=o("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);U.exports=function(h,i,s){var y,d;function p(l,x){return f.coerce(y,d,T,l,x)}for(var c=0;c<n.length;c++){var m=n[c];y=h[m]||{},d=M.newContainer(i,m),d._id=m[0]+s.scene,d._name=m,e(y,d,p,s),a(y,d,p,{font:s.font,letter:m[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),p("gridcolor",w(d.color,s.bgColor,r).toRgbString()),p("title.text",m[0]),d.setScale=f.noop,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",d.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(o,U,H){var w=o("../../../lib/str2rgbarray"),f=o("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(n,r){for(var t=this,h=0;h<3;++h){var i=r[M[h]];if(!i.visible){t.tickEnable[h]=!1,t.labelEnable[h]=!1,t.lineEnable[h]=!1,t.lineTickEnable[h]=!1,t.gridEnable[h]=!1,t.zeroEnable[h]=!1,t.backgroundEnable[h]=!1;continue}t.labels[h]=n._meta?f.templateString(i.title.text,n._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(t.labelColor[h]=w(i.title.font.color)),i.title.font.family&&(t.labelFont[h]=i.title.font.family),i.title.font.size&&(t.labelSize[h]=i.title.font.size)),"showline"in i&&(t.lineEnable[h]=i.showline),"linecolor"in i&&(t.lineColor[h]=w(i.linecolor)),"linewidth"in i&&(t.lineWidth[h]=i.linewidth),"showgrid"in i&&(t.gridEnable[h]=i.showgrid),"gridcolor"in i&&(t.gridColor[h]=w(i.gridcolor)),"gridwidth"in i&&(t.gridWidth[h]=i.gridwidth),i.type==="log"?t.zeroEnable[h]=!1:"zeroline"in i&&(t.zeroEnable[h]=i.zeroline),"zerolinecolor"in i&&(t.zeroLineColor[h]=w(i.zerolinecolor)),"zerolinewidth"in i&&(t.zeroLineWidth[h]=i.zerolinewidth),"ticks"in i&&!!i.ticks?t.lineTickEnable[h]=!0:t.lineTickEnable[h]=!1,"ticklen"in i&&(t.lineTickLength[h]=t._defaultLineTickLength[h]=i.ticklen),"tickcolor"in i&&(t.lineTickColor[h]=w(i.tickcolor)),"tickwidth"in i&&(t.lineTickWidth[h]=i.tickwidth),"tickangle"in i&&(t.tickAngle[h]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(t.tickEnable[h]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(t.tickColor[h]=w(i.tickfont.color)),i.tickfont.family&&(t.tickFont[h]=i.tickfont.family),i.tickfont.size&&(t.tickSize[h]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(t.lineTickMirror[h]=!0,t.lineMirror[h]=!0):i.mirror===!0?(t.lineTickMirror[h]=!1,t.lineMirror[h]=!0):(t.lineTickMirror[h]=!1,t.lineMirror[h]=!1):t.lineMirror[h]=!1,"showbackground"in i&&i.showbackground!==!1?(t.backgroundEnable[h]=!0,t.backgroundColor[h]=w(i.backgroundcolor)):t.backgroundEnable[h]=!1}};function a(n,r){var t=new T;return t.merge(n,r),t}U.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(o,U,H){var w=o("../../../lib"),f=o("../../../components/color"),M=o("../../../registry"),T=o("../../subplot_defaults"),e=o("./axis_defaults"),a=o("./layout_attributes"),n=o("../../get_data").getSubplotData,r="gl3d";U.exports=function(i,s,y){var d=s._basePlotModules.length>1;function p(c){if(!d){var m=w.validate(i[c],a[c]);if(m)return i[c]}}T(i,s,y,{type:r,attributes:a,handleDefaults:t,fullLayout:s,font:s.font,fullData:y,getDfltFromLayout:p,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})};function t(h,i,s,y){for(var d=s("bgcolor"),p=f.combine(d,y.paper_bgcolor),c=["up","center","eye"],m=0;m<c.length;m++)s("camera."+c[m]+".x"),s("camera."+c[m]+".y"),s("camera."+c[m]+".z");s("camera.projection.type");var l=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),x=l?"manual":"auto",u=s("aspectmode",x);l||(h.aspectratio=i.aspectratio={x:1,y:1,z:1},u==="manual"&&(i.aspectmode="auto"),h.aspectmode=i.aspectmode);var A=n(y.fullData,r,y.id);e(h,i,{font:y.font,scene:y.id,data:A,bgColor:p,calendar:y.calendar,autotypenumbersDflt:y.autotypenumbersDflt,fullLayout:y.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(h,i,y);var _=y.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",h.camera&&h.camera.up){var g=h.camera.up.x,b=h.camera.up.y,v=h.camera.up.z;v!==0&&(!g||!b||!v||v/Math.sqrt(g*g+b*b+v*v)>.999)&&(_="turntable")}else _="turntable";s("dragmode",_),s("hovermode",y.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(o,U,H){var w=o("./axis_attributes"),f=o("../../domain").attributes,M=o("../../../lib/extend").extendFlat,T=o("../../../lib").counterRegex;function e(a,n,r){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}U.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:f({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:w,yaxis:w,zaxis:w,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(o,U,H){var w=o("../../../lib/str2rgbarray"),f=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=M.prototype;T.merge=function(a){for(var n=0;n<3;++n){var r=a[f[n]];if(!r.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=r.showspikes,this.colors[n]=w(r.spikecolor),this.drawSides[n]=r.spikesides,this.lineWidth[n]=r.spikethickness}};function e(a){var n=new M;return n.merge(a),n}U.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(o,U,H){U.exports=e;var w=o("../../cartesian/axes"),f=o("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(a){for(var n=new Array(3),r=0;r<3;++r){for(var t=a[r],h=new Array(t.length),i=0;i<t.length;++i)h[i]=t[i].x;n[r]=h}return n}function e(a){for(var n=a.axesOptions,r=a.glplot.axesPixels,t=a.fullSceneLayout,h=[[],[],[]],i=0;i<3;++i){var s=t[M[i]];if(s._length=(r[i].hi-r[i].lo)*r[i].pixelsPerDataUnit/a.dataScale[i],Math.abs(s._length)===1/0||isNaN(s._length))h[i]=[];else{s._input_range=s.range.slice(),s.range[0]=r[i].lo/a.dataScale[i],s.range[1]=r[i].hi/a.dataScale[i],s._m=1/(a.dataScale[i]*r[i].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var y=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var d=s.nticks||f.constrain(s._length/40,4,9);w.autoTicks(s,Math.abs(s.range[1]-s.range[0])/d)}for(var p=w.calcTicks(s,{msUTC:!0}),c=0;c<p.length;++c)p[c].x=p[c].x*a.dataScale[i],s.type==="date"&&(p[c].text=p[c].text.replace(/\<br\>/g," "));h[i]=p,s.tickmode=y}}n.ticks=h;for(var i=0;i<3;++i){.5*(a.glplot.bounds[0][i]+a.glplot.bounds[1][i]);for(var c=0;c<2;++c)n.bounds[c][i]=a.glplot.bounds[c][i]}a.contourLevels=T(h)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(o,U,H){function w(M,T){var e=[0,0,0,0],a,n;for(a=0;a<4;++a)for(n=0;n<4;++n)e[n]+=M[4*a+n]*T[a];return e}function f(M,T){var e=w(M.projection,w(M.view,w(M.model,[T[0],T[1],T[2],1])));return e}U.exports=f},{}],617:[function(o,U,H){var w=o("../../../stackgl_modules").gl_plot3d,f=w.createCamera,M=w.createScene,T=o("webgl-context"),e=o("has-passive-events"),a=o("../../registry"),n=o("../../lib"),r=n.preserveDrawingBuffer(),t=o("../../plots/cartesian/axes"),h=o("../../components/fx"),i=o("../../lib/str2rgbarray"),s=o("../../lib/show_no_webgl_msg"),y=o("./project"),d=o("./layout/convert"),p=o("./layout/spikes"),c=o("./layout/tick_marks"),m,l;function x(E,F){var I=document.createElement("div"),D=E.container;this.graphDiv=E.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=E.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=E.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(F,F[this.id]),this.spikeOptions=p(F[this.id]),this.container=I,this.staticMode=!!E.staticPlot,this.pixelRatio=this.pixelRatio||E.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=x.prototype;u.prepareOptions=function(){var E=this,F={canvas:E.canvas,gl:E.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:E.container,axes:E.axesOptions,spikes:E.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:E.camera,pixelRatio:E.pixelRatio};if(E.staticMode){if(!l&&(m=document.createElement("canvas"),l=T({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=m}return F};var A=!0;u.tryCreatePlot=function(){var E=this,F=E.prepareOptions(),I=!0;try{E.glplot=M(F)}catch{if(E.staticMode||!A||r)I=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=F.glOptions.preserveDrawingBuffer=!0,E.glplot=M(F)}catch{r=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return A=!1,I},u.initializeGLCamera=function(){var E=this,F=E.fullSceneLayout.camera,I=F.projection.type==="orthographic";E.camera=f(E.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var E=this;E.initializeGLCamera();var F=E.tryCreatePlot();if(!F)return s(E);E.traces={},E.make4thDimension();var I=E.graphDiv,D=I.layout,R=function(){var z={};return E.isCameraChanged(D)&&(z[E.id+".camera"]=E.getCamera()),E.isAspectChanged(D)&&(z[E.id+".aspectratio"]=E.glplot.getAspectratio(),D[E.id].aspectmode!=="manual"&&(E.fullSceneLayout.aspectmode=D[E.id].aspectmode=z[E.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var B=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",B)}};return E.glplot.canvas&&(E.glplot.canvas.addEventListener("mouseup",function(){O(E)}),E.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(E.camera._ortho){var B=z.deltaX>z.deltaY?1.1:.9090909090909091,G=E.glplot.getAspectratio();E.glplot.setAspectratio({x:B*G.x,y:B*G.y,z:B*G.z})}O(E)}},e?{passive:!1}:!1),E.glplot.canvas.addEventListener("mousemove",function(){if(E.fullSceneLayout.dragmode!==!1&&E.camera.mouseListener.buttons!==0){var z=R();E.graphDiv.emit("plotly_relayouting",z)}}),E.staticMode||E.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:E.id})},!1)),E.glplot.oncontextloss=function(){E.recoverContext()},E.glplot.onrender=function(){E.render()},!0},u.render=function(){var E=this,F=E.graphDiv,I,D=E.svgContainer,R=E.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,B=R.width*O,G=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+B+" "+G),D.setAttributeNS(null,"width",B),D.setAttributeNS(null,"height",G),c(E),E.glplot.axes.update(E.axesOptions);for(var Q=Object.keys(E.traces),X=null,j=E.glplot.selection,re=0;re<Q.length;++re)I=E.traces[Q[re]],I.data.hoverinfo!=="skip"&&I.handlePick(j)&&(X=I),I.setContourLevels&&I.setContourLevels();function ue(be,ce,de){var ye=E.fullSceneLayout[be+"axis"];return ye.type!=="log"&&(ce=ye.d2l(ce)),t.hoverLabelText(ye,ce,de)}if(X!==null){var K=y(E.glplot.cameraParams,j.dataCoordinate);I=X.data;var te=F._fullData[I.index],Y=j.index,V={xLabel:ue("x",j.traceCoordinate[0],I.xhoverformat),yLabel:ue("y",j.traceCoordinate[1],I.yhoverformat),zLabel:ue("z",j.traceCoordinate[2],I.zhoverformat)},ee=h.castHoverinfo(te,E.fullLayout,Y),ne=(ee||"").split("+"),Z=ee&&ee==="all";!te.hovertemplate&&!Z&&(ne.indexOf("x")===-1&&(V.xLabel=void 0),ne.indexOf("y")===-1&&(V.yLabel=void 0),ne.indexOf("z")===-1&&(V.zLabel=void 0),ne.indexOf("text")===-1&&(j.textLabel=void 0),ne.indexOf("name")===-1&&(X.name=void 0));var q,ie=[];I.type==="cone"||I.type==="streamtube"?(V.uLabel=ue("x",j.traceCoordinate[3],I.uhoverformat),(Z||ne.indexOf("u")!==-1)&&ie.push("u: "+V.uLabel),V.vLabel=ue("y",j.traceCoordinate[4],I.vhoverformat),(Z||ne.indexOf("v")!==-1)&&ie.push("v: "+V.vLabel),V.wLabel=ue("z",j.traceCoordinate[5],I.whoverformat),(Z||ne.indexOf("w")!==-1)&&ie.push("w: "+V.wLabel),V.normLabel=j.traceCoordinate[6].toPrecision(3),(Z||ne.indexOf("norm")!==-1)&&ie.push("norm: "+V.normLabel),I.type==="streamtube"&&(V.divergenceLabel=j.traceCoordinate[7].toPrecision(3),(Z||ne.indexOf("divergence")!==-1)&&ie.push("divergence: "+V.divergenceLabel)),j.textLabel&&ie.push(j.textLabel),q=ie.join("<br>")):I.type==="isosurface"||I.type==="volume"?(V.valueLabel=t.hoverLabelText(E._mockAxis,E._mockAxis.d2l(j.traceCoordinate[3]),I.valuehoverformat),ie.push("value: "+V.valueLabel),j.textLabel&&ie.push(j.textLabel),q=ie.join("<br>")):q=j.textLabel;var se={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:te._input,fullData:te,curveNumber:te.index,pointNumber:Y};h.appendArrayPointValue(se,te,Y),I._module.eventData&&(se=te._module.eventData(se,j,te,{},Y));var ae={points:[se]};if(E.fullSceneLayout.hovermode){var oe=[];h.loneHover({trace:te,x:(.5+.5*K[0]/K[3])*B,y:(.5-.5*K[1]/K[3])*G,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:q,name:X.name,color:h.castHoverOption(te,Y,"bgcolor")||X.color,borderColor:h.castHoverOption(te,Y,"bordercolor"),fontFamily:h.castHoverOption(te,Y,"font.family"),fontSize:h.castHoverOption(te,Y,"font.size"),fontColor:h.castHoverOption(te,Y,"font.color"),nameLength:h.castHoverOption(te,Y,"namelength"),textAlign:h.castHoverOption(te,Y,"align"),hovertemplate:n.castOption(te,Y,"hovertemplate"),hovertemplateLabels:n.extendFlat({},se,V),eventData:[se]},{container:D,gd:F,inOut_bbox:oe}),se.bbox=oe[0]}j.buttons&&j.distance<5?F.emit("plotly_click",ae):F.emit("plotly_hover",ae),this.oldEventData=ae}else h.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},u.recoverContext=function(){var E=this;E.glplot.dispose();var F=function(){if(E.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!E.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}E.plot.apply(E,E.plotArgs)};requestAnimationFrame(F)};var _=["xaxis","yaxis","zaxis"];function g(E,F,I){for(var D=E.fullSceneLayout,R=0;R<3;R++){var O=_[R],z=O.charAt(0),B=D[O],G=F[z],Q=F[z+"calendar"],X=F["_"+z+"length"];if(!n.isArrayOrTypedArray(G))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],X-1);else for(var j,re=0;re<(X||G.length);re++)if(n.isArrayOrTypedArray(G[re]))for(var ue=0;ue<G[re].length;++ue)j=B.d2l(G[re][ue],0,Q),!isNaN(j)&&isFinite(j)&&(I[0][R]=Math.min(I[0][R],j),I[1][R]=Math.max(I[1][R],j));else j=B.d2l(G[re],0,Q),!isNaN(j)&&isFinite(j)&&(I[0][R]=Math.min(I[0][R],j),I[1][R]=Math.max(I[1][R],j))}}function b(E,F){for(var I=E.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=_[R],z=O.charAt(0),B=I[O],G=0;G<D.length;G++){var Q=D[G];if(Q.visible){var X=B.r2l(Q[z]);!isNaN(X)&&isFinite(X)&&(F[0][R]=Math.min(F[0][R],X),F[1][R]=Math.max(F[1][R],X))}}}u.plot=function(E,F,I){var D=this;if(D.plotArgs=[E,F,I],D.glplot.contextLost)return;var R,O,z,B,G,Q,X=F[D.id],j=I[D.id];D.fullLayout=F,D.fullSceneLayout=X,D.axesOptions.merge(F,X),D.spikeOptions.merge(X),D.setViewport(X),D.updateFx(X.dragmode,X.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(i(X.bgcolor)),D.setConvert(G),E?Array.isArray(E)||(E=[E]):E=[];var re=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<E.length;++z)R=E[z],!(R.visible!==!0||R._length===0)&&g(this,R,re);b(this,re);var ue=[1,1,1];for(B=0;B<3;++B)re[1][B]===re[0][B]?ue[B]=1:ue[B]=1/(re[1][B]-re[0][B]);for(D.dataScale=ue,D.convertAnnotations(this),z=0;z<E.length;++z)R=E[z],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var K=Object.keys(D.traces);e:for(z=0;z<K.length;++z){for(B=0;B<E.length;++B)if(E[B].uid===K[z]&&E[B].visible===!0&&E[B]._length!==0)continue e;O=D.traces[K[z]],O.dispose(),delete D.traces[K[z]]}D.glplot.objects.sort(function(Ee,Ze){return Ee._trace.data.index-Ze._trace.data.index});var te=[[0,0,0],[0,0,0]],Y={};for(z=0;z<3;++z){if(G=X[_[z]],Q=G.type,Q in Y?(Y[Q].acc*=ue[z],Y[Q].count+=1):Y[Q]={acc:ue[z],count:1},G.autorange){te[0][z]=1/0,te[1][z]=-1/0;var V=D.glplot.objects,ee=D.fullSceneLayout.annotations||[],ne=G._name.charAt(0);for(B=0;B<V.length;B++){var Z=V[B],q=Z.bounds,ie=Z._trace.data._pad||0;Z.constructor.name==="ErrorBars"&&G._lowerLogErrorBound?te[0][z]=Math.min(te[0][z],G._lowerLogErrorBound):te[0][z]=Math.min(te[0][z],q[0][z]/ue[z]-ie),te[1][z]=Math.max(te[1][z],q[1][z]/ue[z]+ie)}for(B=0;B<ee.length;B++){var se=ee[B];if(se.visible){var ae=G.r2l(se[ne]);te[0][z]=Math.min(te[0][z],ae),te[1][z]=Math.max(te[1][z],ae)}}if("rangemode"in G&&G.rangemode==="tozero"&&(te[0][z]=Math.min(te[0][z],0),te[1][z]=Math.max(te[1][z],0)),te[0][z]>te[1][z])te[0][z]=-1,te[1][z]=1;else{var oe=te[1][z]-te[0][z];te[0][z]-=oe/32,te[1][z]+=oe/32}if(G.autorange==="reversed"){var be=te[0][z];te[0][z]=te[1][z],te[1][z]=be}}else{var ce=G.range;te[0][z]=G.r2l(ce[0]),te[1][z]=G.r2l(ce[1])}te[0][z]===te[1][z]&&(te[0][z]-=1,te[1][z]+=1),D.glplot.setBounds(z,{min:te[0][z]*ue[z],max:te[1][z]*ue[z]})}var de,ye=X.aspectmode;if(ye==="cube")de=[1,1,1];else if(ye==="manual"){var ge=X.aspectratio;de=[ge.x,ge.y,ge.z]}else if(ye==="auto"||ye==="data"){var me=[1,1,1];for(z=0;z<3;++z){G=X[_[z]],Q=G.type;var Me=Y[Q];me[z]=Math.pow(Me.acc,1/Me.count)/ue[z]}ye==="data"||Math.max.apply(null,me)/Math.min.apply(null,me)<=4?de=me:de=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");X.aspectratio.x=j.aspectratio.x=de[0],X.aspectratio.y=j.aspectratio.y=de[1],X.aspectratio.z=j.aspectratio.z=de[2],D.glplot.setAspectratio(X.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:X.aspectratio.x,y:X.aspectratio.y,z:X.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=X.aspectmode);var Le=X.domain||null,Oe=F._size||null;if(Le&&Oe){var _e=D.container.style;_e.position="absolute",_e.left=Oe.l+Le.x[0]*Oe.w+"px",_e.top=Oe.t+(1-Le.y[1])*Oe.h+"px",_e.width=Oe.w*(Le.x[1]-Le.x[0])+"px",_e.height=Oe.h*(Le.y[1]-Le.y[0])+"px"}D.glplot.redraw()},u.destroy=function(){var E=this;!E.glplot||(E.camera.mouseListener.enabled=!1,E.container.removeEventListener("wheel",E.camera.wheelListener),E.camera=null,E.glplot.dispose(),E.container.parentNode.removeChild(E.container),E.glplot=null)};function v(E){return[[E.eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]}function C(E){return{up:{x:E.up[0],y:E.up[1],z:E.up[2]},center:{x:E.center[0],y:E.center[1],z:E.center[2]},eye:{x:E.eye[0],y:E.eye[1],z:E.eye[2]},projection:{type:E._ortho===!0?"orthographic":"perspective"}}}u.getCamera=function(){var E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),C(E.camera)},u.setViewport=function(E){var F=this,I=E.camera;F.camera.lookAt.apply(this,v(I)),F.glplot.setAspectratio(E.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},u.isCameraChanged=function(E){var F=this,I=F.getCamera(),D=n.nestedProperty(E,F.id+".camera"),R=D.get();function O(Q,X,j,re){var ue=["up","center","eye"],K=["x","y","z"];return X[ue[j]]&&Q[ue[j]][K[re]]===X[ue[j]][K[re]]}var z=!1;if(R===void 0)z=!0;else{for(var B=0;B<3;B++)for(var G=0;G<3;G++)if(!O(I,R,B,G)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},u.isAspectChanged=function(E){var F=this,I=F.glplot.getAspectratio(),D=n.nestedProperty(E,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},u.saveLayout=function(E){var F=this,I=F.fullLayout,D,R,O,z,B,G,Q=F.isCameraChanged(E),X=F.isAspectChanged(E),j=Q||X;if(j){var re={};if(Q&&(D=F.getCamera(),R=n.nestedProperty(E,F.id+".camera"),O=R.get(),re[F.id+".camera"]=O),X&&(z=F.glplot.getAspectratio(),B=n.nestedProperty(E,F.id+".aspectratio"),G=B.get(),re[F.id+".aspectratio"]=G),a.call("_storeDirectGUIEdit",E,I._preGUI,re),Q){R.set(D);var ue=n.nestedProperty(I,F.id+".camera");ue.set(D)}if(X){B.set(z);var K=n.nestedProperty(I,F.id+".aspectratio");K.set(z),F.glplot.redraw()}}return j},u.updateFx=function(E,F){var I=this,D=I.camera;if(D)if(E==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(E==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,z=I.fullSceneLayout.camera,B=z.up.x,G=z.up.y,Q=z.up.z;if(Q/Math.sqrt(B*B+G*G+Q*Q)<.999){var X=I.id+".camera.up",j={x:0,y:0,z:1},re={};re[X]=j;var ue=R.layout;a.call("_storeDirectGUIEdit",ue,O._preGUI,re),z.up=j,n.nestedProperty(ue,X).set(j)}}else D.keyBindingMode=E;I.fullSceneLayout.hovermode=F};function S(E,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<F;++O)for(var z=0;z<4;++z){var B=4*(F*D+O)+z,G=4*(F*R+O)+z,Q=E[B];E[B]=E[G],E[G]=Q}}function k(E,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var O=4*(F*D+R),z=E[O+3];if(z>0)for(var B=255/z,G=0;G<3;++G)E[O+G]=Math.min(B*E[O+G],255)}}u.toImage=function(E){var F=this;E||(E="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),S(O,D,R),k(O,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var B=z.getContext("2d",{willReadFrequently:!0}),G=B.createImageData(D,R);G.data.set(O),B.putImageData(G,0,0);var Q;switch(E){case"jpeg":Q=z.toDataURL("image/jpeg");break;case"webp":Q=z.toDataURL("image/webp");break;default:Q=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),Q},u.setConvert=function(){for(var E=this,F=0;F<3;F++){var I=E.fullSceneLayout[_[F]];t.setConvert(I,E.fullLayout),I.setScale=n.noop}},u.make4thDimension=function(){var E=this,F=E.graphDiv,I=F._fullLayout;E._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(E._mockAxis,I)},U.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(o,U,H){U.exports=function(f,M,T,e){e=e||f.length;for(var a=new Array(e),n=0;n<e;n++)a[n]=[f[n],M[n],T[n]];return a}},{}],619:[function(o,U,H){var w=o("./font_attributes"),f=o("./animation_attributes"),M=o("../components/color/attributes"),T=o("../components/shapes/draw_newshape/attributes"),e=o("../components/selections/draw_newselection/attributes"),a=o("./pad_attributes"),n=o("../lib/extend").extendFlat,r=w({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=M.defaultLine,U.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:w({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},f.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:w({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(o,U,H){var w=o("../../lib/sort_object_keys"),f="1.10.1",M='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',M].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),n={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:M,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=w(n);U.exports={requiredVersion:f,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:n,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+f+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){var e=M.split(" "),a=e[0],n=e[1],r=w.isArrayOrTypedArray(T)?w.mean(T):T,t=.5+r/100,h=1.5+r/100,i=["",""],s=[0,0];switch(a){case"top":i[0]="top",s[1]=-h;break;case"bottom":i[0]="bottom",s[1]=h;break}switch(n){case"left":i[1]="right",s[0]=-t;break;case"right":i[1]="left",s[0]=t;break}var y;return i[0]&&i[1]?y=i.join("-"):i[0]?y=i[0]:i[1]?y=i[1]:y="center",{anchor:y,offset:s}}},{"../../lib":515}],622:[function(o,U,H){var w=o("mapbox-gl/dist/mapbox-gl-unminified"),f=o("../../lib"),M=f.strTranslate,T=f.strScale,e=o("../../plots/get_data").getSubplotCalcData,a=o("../../constants/xmlns_namespaces"),n=o("@plotly/d3"),r=o("../../components/drawing"),t=o("../../lib/svg_text_utils"),h=o("./mapbox"),i="mapbox",s=H.constants=o("./constants");H.name=i,H.attr="subplot",H.idRoot=i,H.idRegex=H.attrRegex=f.counterRegex(i),H.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},H.layoutAttributes=o("./layout_attributes"),H.supplyLayoutDefaults=o("./layout_defaults"),H.plot=function(c){var m=c._fullLayout,l=c.calcdata,x=m._subplots[i];if(w.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var u=y(c,x);w.accessToken=u;for(var A=0;A<x.length;A++){var _=x[A],g=e(l,i,_),b=m[_],v=b._subplot;v||(v=new h(c,_),m[_]._subplot=v),v.viewInitial||(v.viewInitial={center:f.extendFlat({},b.center),zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),v.plot(g,m,c._promises)}},H.clean=function(p,c,m,l){for(var x=l._subplots[i]||[],u=0;u<x.length;u++){var A=x[u];!c[A]&&!!l[A]._subplot&&l[A]._subplot.destroy()}},H.toSVG=function(p){for(var c=p._fullLayout,m=c._subplots[i],l=c._size,x=0;x<m.length;x++){var u=c[m[x]],A=u.domain,_=u._subplot,g=_.toImage("png"),b=c._glimages.append("svg:image");b.attr({xmlns:a.svg,"xlink:href":g,x:l.l+l.w*A.x[0],y:l.t+l.h*(1-A.y[1]),width:l.w*(A.x[1]-A.x[0]),height:l.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var v=n.select(u._subplot.div),C=v.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!C){var S=c._glimages.append("g");S.attr("transform",M(l.l+l.w*A.x[0]+10,l.t+l.h*(1-A.y[0])-31)),S.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=c._glimages.append("g"),F=E.append("text");F.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var I=r.bBox(F.node()),D=l.w*(A.x[1]-A.x[0]);if(I.width>D/2){var R=k.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(t.convertToTspans,p),I=r.bBox(F.node())}F.attr("transform",M(-3,-I.height+8)),E.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var z=[l.l+l.w*A.x[1],l.t+l.h*(1-A.y[0])];E.attr("transform",M(z[0],z[1])+T(O))}};function y(p,c){var m=p._fullLayout,l=p._context;if(l.mapboxAccessToken==="")return"";for(var x=[],u=[],A=!1,_=!1,g=0;g<c.length;g++){var b=m[c[g]],v=b.accesstoken;d(b.style)&&(v?f.pushUnique(x,v):(d(b._input.style)&&(f.error("Uses Mapbox map style, but did not set an access token."),A=!0),_=!0)),v&&f.pushUnique(u,v)}if(_){var C=A?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw f.error(C),new Error(C)}return x.length?(x.length>1&&f.warn(s.multipleTokensErrorMsg),x[0]):(u.length&&f.log(["Listed mapbox access token(s)",u.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(p){return typeof p=="string"&&(s.styleValuesMapbox.indexOf(p)!==-1||p.indexOf("mapbox://")===0)}H.updateFx=function(p){for(var c=p._fullLayout,m=c._subplots[i],l=0;l<m.length;l++){var x=c[m[l]]._subplot;x.updateFx(c)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(o,U,H){var w=o("../../lib"),f=o("../../lib/svg_text_utils").sanitizeHTML,M=o("./convert_text_opts"),T=o("./constants");function e(h,i){this.subplot=h,this.uid=h.uid+"-"+i,this.index=i,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=n(i)},a.needsNewImage=function(h){var i=this.subplot.map;return i.getSource(this.idSource)&&this.sourceType==="image"&&h.sourcetype==="image"&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))},a.needsNewSource=function(h){return this.sourceType!==h.sourcetype||JSON.stringify(this.source)!==JSON.stringify(h.source)||this.layerType!==h.type},a.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(h){var i=this.subplot.map;i.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},a.updateSource=function(h){var i=this.subplot.map;if(i.getSource(this.idSource)&&i.removeSource(this.idSource),this.sourceType=h.sourcetype,this.source=h.source,!!n(h)){var s=t(h);i.addSource(this.idSource,s)}},a.findFollowingMapboxLayerId=function(h){if(h==="traces")for(var i=this.subplot.getMapLayers(),s=0;s<i.length;s++){var y=i[s].id;if(typeof y=="string"&&y.indexOf(T.traceLayerPrefix)===0){h=y;break}}return h},a.updateLayer=function(h){var i=this.subplot,s=r(h),y=this.lookupBelow(),d=this.findFollowingMapboxLayerId(y);this.removeLayer(),n(h)&&i.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:s.layout,paint:s.paint},d),this.layerType=h.type,this.below=y},a.updateStyle=function(h){if(n(h)){var i=r(h);this.subplot.setOptions(this.idLayer,"setLayoutProperty",i.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",i.paint)}},a.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)},a.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer),h.getSource(this.idSource)&&h.removeSource(this.idSource)};function n(h){if(!h.visible)return!1;var i=h.source;if(Array.isArray(i)&&i.length>0){for(var s=0;s<i.length;s++)if(typeof i[s]!="string"||i[s].length===0)return!1;return!0}return w.isPlainObject(i)||typeof i=="string"&&i.length>0}function r(h){var i={},s={};switch(h.type){case"circle":w.extendFlat(s,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case"line":w.extendFlat(s,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case"fill":w.extendFlat(s,{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case"symbol":var y=h.symbol,d=M(y.textposition,y.iconsize);w.extendFlat(i,{"icon-image":y.icon+"-15","icon-size":y.iconsize/10,"text-field":y.text,"text-size":y.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":y.placement}),w.extendFlat(s,{"icon-color":h.color,"text-color":y.textfont.color,"text-opacity":h.opacity});break;case"raster":w.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":h.opacity});break}return{layout:i,paint:s}}function t(h){var i=h.sourcetype,s=h.source,y={type:i},d;return i==="geojson"?d="data":i==="vector"?d=typeof s=="string"?"url":"tiles":i==="raster"?(d="tiles",y.tileSize=256):i==="image"&&(d="url",y.coordinates=h.coordinates),y[d]=s,h.sourceattribution&&(y.attribution=f(h.sourceattribution)),y}U.exports=function(i,s,y){var d=new e(i,s);return d.update(y),d}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color").defaultLine,M=o("../domain").attributes,T=o("../font_attributes"),e=o("../../traces/scatter/attributes").textposition,a=o("../../plot_api/edit_types").overrideAll,n=o("../../plot_api/plot_template").templatedArray,r=o("./constants"),t=T({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var h=U.exports=a({_arrayAttrRegexps:[w.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:f},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:f}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:w.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");h.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(o,U,H){var w=o("../../lib"),f=o("../subplot_defaults"),M=o("../array_container_defaults"),T=o("./layout_attributes");U.exports=function(r,t,h){f(r,t,h,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:t._mapboxAccessToken})};function e(n,r,t,h){t("accesstoken",h.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch");var i=t("bounds.west"),s=t("bounds.east"),y=t("bounds.south"),d=t("bounds.north");(i===void 0||s===void 0||y===void 0||d===void 0)&&delete r.bounds,M(n,r,{name:"layers",handleItemDefaults:a}),r._input=n}function a(n,r){function t(p,c){return w.coerce(n,r,T.layers,p,c)}var h=t("visible");if(h){var i=t("sourcetype"),s=i==="raster"||i==="image";t("source"),t("sourceattribution"),i==="vector"&&t("sourcelayer"),i==="image"&&t("coordinates");var y;s&&(y="raster");var d=t("type",y);s&&d!=="raster"&&(d=r.type="raster",w.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),d==="circle"&&t("circle.radius"),d==="line"&&(t("line.width"),t("line.dash")),d==="fill"&&t("fill.outlinecolor"),d==="symbol"&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),w.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(o,U,H){var w=o("mapbox-gl/dist/mapbox-gl-unminified"),f=o("../../lib"),M=o("../../lib/geo_location_utils"),T=o("../../registry"),e=o("../cartesian/axes"),a=o("../../components/dragelement"),n=o("../../components/fx"),r=o("../../components/dragelement/helpers"),t=r.drawMode,h=r.selectMode,i=o("../../components/selections").prepSelect,s=o("../../components/selections").clearOutline,y=o("../../components/selections").clearSelectionsCache,d=o("../../components/selections").selectOnClick,p=o("./constants"),c=o("./layers");function m(g,b){this.id=b,this.gd=g;var v=g._fullLayout,C=g._context;this.container=v._glcontainer.node(),this.isStatic=C.staticPlot,this.uid=v._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(v),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=m.prototype;l.plot=function(g,b,v){var C=this,S=b[C.id];C.map&&S.accesstoken!==C.accessToken&&(C.map.remove(),C.map=null,C.styleObj=null,C.traceHash={},C.layerList=[]);var k;C.map?k=new Promise(function(E,F){C.updateMap(g,b,E,F)}):k=new Promise(function(E,F){C.createMap(g,b,E,F)}),v.push(k)},l.createMap=function(g,b,v,C){var S=this,k=b[S.id],E=S.styleObj=u(k.style);S.accessToken=k.accesstoken;var F=k.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=S.map=new w.Map({container:S.div,style:E.style,center:_(k.center),zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,maxBounds:I,interactive:!S.isStatic,preserveDrawingBuffer:S.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new w.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",S.rejectOnError(C),S.isStatic||S.initFx(g,b);var R=[];R.push(new Promise(function(O){D.once("load",O)})),R=R.concat(M.fetchTraceGeoData(g)),Promise.all(R).then(function(){S.fillBelowLookup(g,b),S.updateData(g),S.updateLayout(b),S.resolveOnRender(v)}).catch(C)},l.updateMap=function(g,b,v,C){var S=this,k=S.map,E=b[this.id];S.rejectOnError(C);var F=[],I=u(E.style);JSON.stringify(S.styleObj)!==JSON.stringify(I)&&(S.styleObj=I,k.setStyle(I.style),S.traceHash={},F.push(new Promise(function(D){k.once("styledata",D)}))),F=F.concat(M.fetchTraceGeoData(g)),Promise.all(F).then(function(){S.fillBelowLookup(g,b),S.updateData(g),S.updateLayout(b),S.resolveOnRender(v)}).catch(C)},l.fillBelowLookup=function(g,b){var v=b[this.id],C=v.layers,S,k,E=this.belowLookup={},F=!1;for(S=0;S<g.length;S++){var I=g[S][0].trace,D=I._module;typeof I.below=="string"?k=I.below:D.getBelow&&(k=D.getBelow(I,this)),k===""&&(F=!0),E["trace-"+I.uid]=k||""}for(S=0;S<C.length;S++){var R=C[S];typeof R.below=="string"?k=R.below:F?k="traces":k="",E["layout-"+S]=k}var O={},z,B;for(z in E)k=E[z],O[k]?O[k].push(z):O[k]=[z];for(k in O){var G=O[k];if(G.length>1)for(S=0;S<G.length;S++)z=G[S],z.indexOf("trace-")===0?(B=z.split("trace-")[1],this.traceHash[B]&&(this.traceHash[B].below=null)):z.indexOf("layout-")===0&&(B=z.split("layout-")[1],this.layerList[B]&&(this.layerList[B].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(g){var b=this.traceHash,v,C,S,k,E=g.slice().sort(function(O,z){return x[O[0].trace.type]-x[z[0].trace.type]});for(S=0;S<E.length;S++){var F=E[S];C=F[0].trace,v=b[C.uid];var I=!1;v&&(v.type===C.type?(v.update(F),I=!0):v.dispose()),!I&&C._module&&(b[C.uid]=C._module.plot(this,F))}var D=Object.keys(b);e:for(S=0;S<D.length;S++){var R=D[S];for(k=0;k<g.length;k++)if(C=g[k][0].trace,R===C.uid)continue e;v=b[R],v.dispose(),delete b[R]}},l.updateLayout=function(g){var b=this.map,v=g[this.id];!this.dragging&&!this.wheeling&&(b.setCenter(_(v.center)),b.setZoom(v.zoom),b.setBearing(v.bearing),b.setPitch(v.pitch)),this.updateLayers(g),this.updateFramework(g),this.updateFx(g),this.map.resize(),this.gd._context._scrollZoom.mapbox?b.scrollZoom.enable():b.scrollZoom.disable()},l.resolveOnRender=function(g){var b=this.map;b.on("render",function v(){b.loaded()&&(b.off("render",v),setTimeout(g,10))})},l.rejectOnError=function(g){var b=this.map;function v(){g(new Error(p.mapOnErrorMsg))}b.once("error",v),b.once("style.error",v),b.once("source.error",v),b.once("tile.error",v),b.once("layer.error",v)},l.createFramework=function(g){var b=this,v=b.div=document.createElement("div");v.id=b.uid,v.style.position="absolute",b.container.appendChild(v),b.xaxis={_id:"x",c2p:function(C){return b.project(C).x}},b.yaxis={_id:"y",c2p:function(C){return b.project(C).y}},b.updateFramework(g),b.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(b.mockAxis,g)},l.initFx=function(g,b){var v=this,C=v.gd,S=v.map;S.on("moveend",function(F){if(!!v.map){var I=C._fullLayout;if(F.originalEvent||v.wheeling){var D=I[v.id];T.call("_storeDirectGUIEdit",C.layout,I._preGUI,v.getViewEdits(D));var R=v.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,C.emit("plotly_relayout",v.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?v.dragging=!1:v.wheeling&&(v.wheeling=!1),I._rehover&&I._rehover()}}),S.on("wheel",function(){v.wheeling=!0}),S.on("mousemove",function(F){var I=v.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},v.xaxis.p2c=function(){return S.unproject(D).lng},v.yaxis.p2c=function(){return S.unproject(D).lat},C._fullLayout._rehover=function(){C._fullLayout._hoversubplot===v.id&&C._fullLayout[v.id]&&n.hover(C,F,v.id)},n.hover(C,F,v.id),C._fullLayout._hoversubplot=v.id});function k(){n.loneUnhover(b._hoverlayer)}S.on("dragstart",function(){v.dragging=!0,k()}),S.on("zoomstart",k),S.on("mouseout",function(){C._fullLayout._hoversubplot=null});function E(){var F=v.getView();C.emit("plotly_relayouting",v.getViewEditsWithDerived(F))}S.on("drag",E),S.on("zoom",E),S.on("dblclick",function(){var F=C._fullLayout[v.id];T.call("_storeDirectGUIEdit",C.layout,C._fullLayout._preGUI,v.getViewEdits(F));var I=v.viewInitial;S.setCenter(_(I.center)),S.setZoom(I.zoom),S.setBearing(I.bearing),S.setPitch(I.pitch);var D=v.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,C.emit("plotly_doubleclick",null),C.emit("plotly_relayout",v.getViewEditsWithDerived(D))}),v.clearOutline=function(){y(v.dragOptions),s(v.dragOptions.gd)},v.onClickInPanFn=function(F){return function(I){var D=C._fullLayout.clickmode;D.indexOf("select")>-1&&d(I.originalEvent,C,[v.xaxis],[v.yaxis],v.id,F),D.indexOf("event")>-1&&n.click(C,I.originalEvent)}}},l.updateFx=function(g){var b=this,v=b.map,C=b.gd;if(b.isStatic)return;function S(I){var D=b.map.unproject(I);return[D.lng,D.lat]}var k=g.dragmode,E;E=function(I,D){if(D.isRect){var R=I.range={};R[b.id]=[S([D.xmin,D.ymin]),S([D.xmax,D.ymax])]}else{var O=I.lassoPoints={};O[b.id]=D.map(S)}};var F=b.dragOptions;b.dragOptions=f.extendDeep(F||{},{dragmode:g.dragmode,element:b.div,gd:C,plotinfo:{id:b.id,domain:g[b.id].domain,xaxis:b.xaxis,yaxis:b.yaxis,fillRangeItems:E},xaxes:[b.xaxis],yaxes:[b.yaxis],subplot:b.id}),v.off("click",b.onClickInPanHandler),h(k)||t(k)?(v.dragPan.disable(),v.on("zoomstart",b.clearSelect),b.dragOptions.prepFn=function(I,D,R){i(I,D,R,b.dragOptions,k)},a.init(b.dragOptions)):(v.dragPan.enable(),v.off("zoomstart",b.clearSelect),b.div.onmousedown=null,b.div.ontouchstart=null,b.div.removeEventListener("touchstart",b.div._ontouchstart),b.onClickInPanHandler=b.onClickInPanFn(b.dragOptions),v.on("click",b.onClickInPanHandler))},l.updateFramework=function(g){var b=g[this.id].domain,v=g._size,C=this.div.style;C.width=v.w*(b.x[1]-b.x[0])+"px",C.height=v.h*(b.y[1]-b.y[0])+"px",C.left=v.l+b.x[0]*v.w+"px",C.top=v.t+(1-b.y[1])*v.h+"px",this.xaxis._offset=v.l+b.x[0]*v.w,this.xaxis._length=v.w*(b.x[1]-b.x[0]),this.yaxis._offset=v.t+(1-b.y[1])*v.h,this.yaxis._length=v.h*(b.y[1]-b.y[0])},l.updateLayers=function(g){var b=g[this.id],v=b.layers,C=this.layerList,S;if(v.length!==C.length){for(S=0;S<C.length;S++)C[S].dispose();for(C=this.layerList=[],S=0;S<v.length;S++)C.push(c(this,S,v[S]))}else for(S=0;S<v.length;S++)C[S].update(v[S])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(g,b,v){for(var C in v)this.map[b](g,C,v[C])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(g,b){var v=this.map;if(typeof b=="string"){if(b===""){v.addLayer(g,b);return}for(var C=this.getMapLayers(),S=0;S<C.length;S++)if(b===C[S].id){v.addLayer(g,b);return}f.warn(["Trying to add layer with *below* value",b,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}v.addLayer(g)},l.project=function(g){return this.map.project(new w.LngLat(g[0],g[1]))},l.getView=function(){var g=this.map,b=g.getCenter(),v=b.lng,C=b.lat,S={lon:v,lat:C},k=g.getCanvas(),E=parseInt(k.style.width),F=parseInt(k.style.height);return{center:S,zoom:g.getZoom(),bearing:g.getBearing(),pitch:g.getPitch(),_derived:{coordinates:[g.unproject([0,0]).toArray(),g.unproject([E,0]).toArray(),g.unproject([E,F]).toArray(),g.unproject([0,F]).toArray()]}}},l.getViewEdits=function(g){for(var b=this.id,v=["center","zoom","bearing","pitch"],C={},S=0;S<v.length;S++){var k=v[S];C[b+"."+k]=g[k]}return C},l.getViewEditsWithDerived=function(g){var b=this.id,v=this.getViewEdits(g);return v[b+"._derived"]=g._derived,v};function u(g){var b={};return f.isPlainObject(g)?(b.id=g.id,b.style=g):typeof g=="string"?(b.id=g,p.styleValuesMapbox.indexOf(g)!==-1?b.style=A(g):p.stylesNonMapbox[g]?b.style=p.stylesNonMapbox[g]:b.style=g):(b.id=p.styleValueDflt,b.style=A(p.styleValueDflt)),b.transition={duration:0,delay:0},b}function A(g){return p.styleUrlPrefix+g+"-"+p.styleUrlSuffix}function _(g){return[g.lon,g.lat]}U.exports=m},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(o,U,H){U.exports=function(w){var f=w.editType;return{t:{valType:"number",dflt:0,editType:f},r:{valType:"number",dflt:0,editType:f},b:{valType:"number",dflt:0,editType:f},l:{valType:"number",dflt:0,editType:f},editType:f}}},{}],628:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-time-format").timeFormatLocale,M=o("d3-format").formatLocale,T=o("fast-isnumeric"),e=o("../registry"),a=o("../plot_api/plot_schema"),n=o("../plot_api/plot_template"),r=o("../lib"),t=o("../components/color"),h=o("../constants/numerical").BADNUM,i=o("./cartesian/axis_ids"),s=o("../components/shapes/handle_outline").clearOutline,y=o("./animation_attributes"),d=o("./frame_attributes"),p=o("../plots/get_data").getModuleCalcData,c=r.relinkPrivateKeys,m=r._,l=U.exports={};r.extendFlat(l,e),l.attributes=o("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=o("./font_attributes"),l.layoutAttributes=o("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,u=o("./command");l.executeAPICommand=u.executeAPICommand,l.computeAPICommandBindings=u.computeAPICommandBindings,l.manageCommandObserver=u.manageCommandObserver,l.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,l.redrawText=function(K){return K=r.getGraphDiv(K),new Promise(function(te){setTimeout(function(){!K._fullLayout||(e.getComponentMethod("annotations","draw")(K),e.getComponentMethod("legend","draw")(K),e.getComponentMethod("colorbar","draw")(K),te(l.previousPromises(K)))},300)})},l.resize=function(K){K=r.getGraphDiv(K);var te,Y=new Promise(function(V,ee){(!K||r.isHidden(K))&&ee(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&(te=K._resolveResize),K._resolveResize=V,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||r.isHidden(K)){V(K);return}delete K.layout.width,delete K.layout.height;var ne=K.changed;K.autoplay=!0,e.call("relayout",K,{autosize:!0}).then(function(){K.changed=ne,K._resolveResize===V&&(delete K._resolveResize,V(K))})},100)});return te&&te(Y),Y},l.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},l.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var te=K._fullLayout,Y=r.ensureSingle(te._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var se=w.select(this);se.append("tspan").classed("js-link-to-tool",!0),se.append("tspan").classed("js-link-spacer",!0),se.append("tspan").classed("js-sourcelinks",!0)})}),V=Y.node(),ee={y:te._paper.attr("height")-9};document.body.contains(V)&&V.getComputedTextLength()>=te.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=te._paper.attr("width")-7),Y.attr(ee);var ne=Y.select(".js-link-to-tool"),Z=Y.select(".js-link-spacer"),q=Y.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&A(K,ne),Z.text(ne.text()&&q.text()?" - ":"")}};function A(K,te){te.text("");var Y=te.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" "+String.fromCharCode(187));if(K._context.sendData)Y.on("click",function(){l.sendDataToCloud(K)});else{var V=window.location.pathname.split("/"),ee=window.location.search;Y.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+V[2].split(".")[0]+"/"+V[1]+ee})}}l.sendDataToCloud=function(K){var te=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(!!te){K.emit("plotly_beforeexport");var Y=w.select(K).append("div").attr("id","hiddenform").style("display","none"),V=Y.append("form").attr({action:te+"/external",method:"post",target:"_blank"}),ee=V.append("input").attr({type:"text",name:"data"});return ee.node().value=l.graphJson(K,!1,"keepdata"),V.node().submit(),Y.remove(),K.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],g=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(K,te){var Y=te&&te.skipUpdateCalc,V=K._fullLayout||{};if(V._skipDefaults){delete V._skipDefaults;return}var ee=K._fullLayout={},ne=K.layout||{},Z=K._fullData||[],q=K._fullData=[],ie=K.data||[],se=K.calcdata||[],ae=K._context||{},oe;K._transitionData||l.createTransitionData(K),ee._dfltTitle={plot:m(K,"Click to enter Plot title"),x:m(K,"Click to enter X axis title"),y:m(K,"Click to enter Y axis title"),colorbar:m(K,"Click to enter Colorscale title"),annotation:m(K,"new text")},ee._traceWord=m(K,"trace");var be=C(K,_);if(ee._mapboxAccessToken=ae.mapboxAccessToken,V._initialAutoSizeIsDone){var ce=V.width,de=V.height;l.supplyLayoutGlobalDefaults(ne,ee,be),ne.width||(ee.width=ce),ne.height||(ee.height=de),l.sanitizeMargins(ee)}else{l.supplyLayoutGlobalDefaults(ne,ee,be);var ye=!ne.width||!ne.height,ge=ee.autosize,me=ae.autosizable,Me=ye&&(ge||me);Me?l.plotAutoSize(K,ne,ee):ye&&l.sanitizeMargins(ee),!ge&&ye&&(ne.width=ee.width,ne.height=ee.height)}ee._d3locale=S(be,ee.separators),ee._extraFormat=C(K,g),ee._initialAutoSizeIsDone=!0,ee._dataLength=ie.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var Le=ee._subplots=v(),Oe=ee._splomAxes={x:{},y:{}},_e=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=b(Z,ie),ee._globalTransforms=(K._context||{}).globalTransforms,l.supplyDataDefaults(ie,q,ne,ee);var Ee=Object.keys(Oe.x),Ze=Object.keys(Oe.y);if(Ee.length>1&&Ze.length>1){for(e.getComponentMethod("grid","sizeDefaults")(ne,ee),oe=0;oe<Ee.length;oe++)r.pushUnique(Le.xaxis,Ee[oe]);for(oe=0;oe<Ze.length;oe++)r.pushUnique(Le.yaxis,Ze[oe]);for(var Ge in _e)r.pushUnique(Le.cartesian,Ge)}if(ee._has=l._hasPlotType.bind(ee),Z.length===q.length)for(oe=0;oe<q.length;oe++)c(q[oe],Z[oe]);l.supplyLayoutModuleDefaults(ne,ee,q,K._transitionData);var Fe=ee._visibleModules,Re=[];for(oe=0;oe<Fe.length;oe++){var We=Fe[oe].crossTraceDefaults;We&&r.pushUnique(Re,We)}for(oe=0;oe<Re.length;oe++)Re[oe](q,ee);ee._hasOnlyLargeSploms=ee._basePlotModules.length===1&&ee._basePlotModules[0].name==="splom"&&Ee.length>15&&Ze.length>15&&ee.shapes.length===0&&ee.images.length===0,l.linkSubplots(q,ee,Z,V),l.cleanPlot(q,ee,Z,V);var xt=!!(V._has&&V._has("gl2d")),Nt=!!(ee._has&&ee._has("gl2d")),tr=!!(V._has&&V._has("cartesian")),Vt=!!(ee._has&&ee._has("cartesian")),Pt=tr||xt,$t=Vt||Nt;Pt&&!$t?V._bgLayer.remove():$t&&!Pt&&(ee._shouldCreateBgLayer=!0),V._zoomlayer&&!K._dragging&&s({_fullLayout:V}),k(q,ee),c(ee,V),e.getComponentMethod("colorscale","crossTraceDefaults")(q,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Ut=ee._tracePreGUI,Lt={},Ye;for(Ye in Ut)Lt[Ye]="old";for(oe=0;oe<q.length;oe++)Ye=q[oe]._fullInput.uid,Lt[Ye]||(Ut[Ye]={}),Lt[Ye]="new";for(Ye in Lt)Lt[Ye]==="old"&&delete Ut[Ye];R(ee),e.getComponentMethod("rangeslider","makeData")(ee),!Y&&se.length===q.length&&l.supplyDefaultsUpdateCalc(se,q)},l.supplyDefaultsUpdateCalc=function(K,te){for(var Y=0;Y<te.length;Y++){var V=te[Y],ee=(K[Y]||[])[0];if(ee&&ee.trace){var ne=ee.trace;if(ne._hasCalcTransform){var Z=ne._arrayAttrs,q,ie,se;for(q=0;q<Z.length;q++)ie=Z[q],se=r.nestedProperty(ne,ie).get().slice(),r.nestedProperty(V,ie).set(se)}ee.trace=V}}};function b(K,te){var Y=te.length,V=[],ee,ne;for(ee=0;ee<K.length;ee++){var Z=K[ee]._fullInput;Z!==ne&&V.push(Z),ne=Z}var q=V.length,ie=new Array(Y),se={};function ae(ce,de){ie[de]=ce,se[ce]=1}function oe(ce,de){if(ce&&typeof ce=="string"&&!se[ce])return ae(ce,de),!0}for(ee=0;ee<Y;ee++){var be=te[ee].uid;typeof be=="number"&&(be=String(be)),!oe(be,ee)&&(ee<q&&oe(V[ee].uid,ee)||ae(r.randstr(se),ee))}return ie}function v(){var K=e.collectableSubplotTypes,te={},Y,V;if(!K){K=[];var ee=e.subplotsRegistry;for(var ne in ee){var Z=ee[ne],q=Z.attr;if(q&&(K.push(ne),Array.isArray(q)))for(V=0;V<q.length;V++)r.pushUnique(K,q[V])}}for(Y=0;Y<K.length;Y++)te[K[Y]]=[];return te}function C(K,te){var Y=K._context.locale;Y||(Y="en-US");var V=!1,ee={};function ne(oe){for(var be=!0,ce=0;ce<te.length;ce++){var de=te[ce];ee[de]||(oe[de]?ee[de]=oe[de]:be=!1)}be&&(V=!0)}for(var Z=0;Z<2;Z++){for(var q=K._context.locales,ie=0;ie<2;ie++){var se=(q[Y]||{}).format;if(se&&(ne(se),V))break;q=e.localeRegistry}var ae=Y.split("-")[0];if(V||ae===Y)break;Y=ae}return V||ne(e.localeRegistry.en.format),ee}function S(K,te){return K.decimal=te.charAt(0),K.thousands=te.charAt(1),{numberFormat:function(Y){try{Y=M(K).format(r.adjustFormat(Y))}catch{return r.warnBadFormat(Y),r.noFormat}return Y},timeFormat:f(K).utcFormat}}function k(K,te){var Y,V=[];te.meta&&(Y=te._meta={meta:te.meta,layout:{meta:te.meta}});for(var ee=0;ee<K.length;ee++){var ne=K[ee];ne.meta?V[ne.index]=ne._meta={meta:ne.meta}:te.meta&&(ne._meta={meta:te.meta}),te.meta&&(ne._meta.layout={meta:te.meta})}V.length&&(Y||(Y=te._meta={}),Y.data=V)}l.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},l._hasPlotType=function(K){var te,Y=this._basePlotModules||[];for(te=0;te<Y.length;te++)if(Y[te].name===K)return!0;var V=this._modules||[];for(te=0;te<V.length;te++){var ee=V[te].name;if(ee===K)return!0;var ne=e.modules[ee];if(ne&&ne.categories[K])return!0}return!1},l.cleanPlot=function(K,te,Y,V){var ee,ne,Z=V._basePlotModules||[];for(ee=0;ee<Z.length;ee++){var q=Z[ee];q.clean&&q.clean(K,te,Y,V)}var ie=V._has&&V._has("gl"),se=te._has&&te._has("gl");ie&&!se&&V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.selectAll(".no-webgl").remove(),V._glcanvas=null);var ae=!!V._infolayer;e:for(ee=0;ee<Y.length;ee++){var oe=Y[ee],be=oe.uid;for(ne=0;ne<K.length;ne++){var ce=K[ne];if(be===ce.uid)continue e}ae&&V._infolayer.select(".cb"+be).remove()}},l.linkSubplots=function(K,te,Y,V){var ee,ne,Z=V._plots||{},q=te._plots={},ie=te._subplots,se={_fullData:K,_fullLayout:te},ae=ie.cartesian.concat(ie.gl2d||[]);for(ee=0;ee<ae.length;ee++){var oe=ae[ee],be=Z[oe],ce=i.getFromId(se,oe,"x"),de=i.getFromId(se,oe,"y"),ye;for(be?ye=q[oe]=be:(ye=q[oe]={},ye.id=oe),ce._counterAxes.push(de._id),de._counterAxes.push(ce._id),ce._subplotsWith.push(oe),de._subplotsWith.push(oe),ye.xaxis=ce,ye.yaxis=de,ye._hasClipOnAxisFalse=!1,ne=0;ne<K.length;ne++){var ge=K[ne];if(ge.xaxis===ye.xaxis._id&&ge.yaxis===ye.yaxis._id&&ge.cliponaxis===!1){ye._hasClipOnAxisFalse=!0;break}}}var me=i.list(se,null,!0),Me;for(ee=0;ee<me.length;ee++){Me=me[ee];var Le=null;Me.overlaying&&(Le=i.getFromId(se,Me.overlaying),Le&&Le.overlaying&&(Me.overlaying=!1,Le=null)),Me._mainAxis=Le||Me,Le&&(Me.domain=Le.domain.slice()),Me._anchorAxis=Me.anchor==="free"?null:i.getFromId(se,Me.anchor)}for(ee=0;ee<me.length;ee++)if(Me=me[ee],Me._counterAxes.sort(i.idSort),Me._subplotsWith.sort(r.subplotSort),Me._mainSubplot=E(Me,te),Me._counterAxes.length&&(Me.spikemode&&Me.spikemode.indexOf("across")!==-1||Me.automargin&&Me.mirror&&Me.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Me))){var Oe=1,_e=0;for(ne=0;ne<Me._counterAxes.length;ne++){var Ee=i.getFromId(se,Me._counterAxes[ne]);Oe=Math.min(Oe,Ee.domain[0]),_e=Math.max(_e,Ee.domain[1])}Oe<_e&&(Me._counterDomainMin=Oe,Me._counterDomainMax=_e)}};function E(K,te){var Y={_fullLayout:te},V=K._id.charAt(0)==="x",ee=K._mainAxis._anchorAxis,ne="",Z="",q="";if(ee&&(q=ee._mainAxis._id,ne=V?K._id+q:q+K._id),!ne||!te._plots[ne]){ne="";for(var ie=K._counterAxes,se=0;se<ie.length;se++){var ae=ie[se],oe=V?K._id+ae:ae+K._id;Z||(Z=oe);var be=i.getFromId(Y,ae);if(q&&be.overlaying===q){ne=oe;break}}}return ne||Z}l.clearExpandedTraceDefaultColors=function(K){var te,Y,V;function ee(Z,q,ie,se){Y[se]=q,Y.length=se+1,Z.valType==="color"&&Z.dflt===void 0&&te.push(Y.join("."))}for(Y=[],te=K._module._colorAttrs,te||(K._module._colorAttrs=te=[],a.crawl(K._module.attributes,ee)),V=0;V<te.length;V++){var ne=r.nestedProperty(K,"_input."+te[V]);ne.get()||r.nestedProperty(K,te[V]).set(null)}},l.supplyDataDefaults=function(K,te,Y,V){var ee=V._modules,ne=V._visibleModules,Z=V._basePlotModules,q=0,ie=0,se,ae,oe;V._transformModules=[];function be(Ze){te.push(Ze);var Ge=Ze._module;!Ge||(r.pushUnique(ee,Ge),Ze.visible===!0&&r.pushUnique(ne,Ge),r.pushUnique(Z,Ze._module.basePlotModule),q++,Ze._input.visible!==!1&&ie++)}var ce={},de=[],ye=(Y.template||{}).data||{},ge=n.traceTemplater(ye);for(se=0;se<K.length;se++){if(oe=K[se],ae=ge.newTrace(oe),ae.uid=V._traceUids[se],l.supplyTraceDefaults(oe,ae,ie,V,se),ae.index=se,ae._input=oe,ae._expandedIndex=q,ae.transforms&&ae.transforms.length)for(var me=oe.visible!==!1&&ae.visible===!1,Me=I(ae,te,Y,V),Le=0;Le<Me.length;Le++){var Oe=Me[Le],_e={_template:ae._template,type:ae.type,uid:ae.uid+Le};me&&Oe.visible===!1&&delete Oe.visible,l.supplyTraceDefaults(Oe,_e,q,V,se),c(_e,Oe),_e.index=se,_e._input=oe,_e._fullInput=ae,_e._expandedIndex=q,_e._expandedInput=Oe,be(_e)}else ae._fullInput=ae,ae._expandedInput=ae,be(ae);e.traceIs(ae,"carpetAxis")&&(ce[ae.carpet]=ae),e.traceIs(ae,"carpetDependent")&&de.push(se)}for(se=0;se<de.length;se++)if(ae=te[de[se]],!!ae.visible){var Ee=ce[ae.carpet];if(ae._carpet=Ee,!Ee||!Ee.visible){ae.visible=!1;continue}ae.xaxis=Ee.xaxis,ae.yaxis=Ee.yaxis}},l.supplyAnimationDefaults=function(K){K=K||{};var te,Y={};function V(ee,ne){return r.coerce(K||{},Y,y,ee,ne)}if(V("mode"),V("direction"),V("fromcurrent"),Array.isArray(K.frame))for(Y.frame=[],te=0;te<K.frame.length;te++)Y.frame[te]=l.supplyAnimationFrameDefaults(K.frame[te]||{});else Y.frame=l.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(Y.transition=[],te=0;te<K.transition.length;te++)Y.transition[te]=l.supplyAnimationTransitionDefaults(K.transition[te]||{});else Y.transition=l.supplyAnimationTransitionDefaults(K.transition||{});return Y},l.supplyAnimationFrameDefaults=function(K){var te={};function Y(V,ee){return r.coerce(K||{},te,y.frame,V,ee)}return Y("duration"),Y("redraw"),te},l.supplyAnimationTransitionDefaults=function(K){var te={};function Y(V,ee){return r.coerce(K||{},te,y.transition,V,ee)}return Y("duration"),Y("easing"),te},l.supplyFrameDefaults=function(K){var te={};function Y(V,ee){return r.coerce(K,te,d,V,ee)}return Y("group"),Y("name"),Y("traces"),Y("baseframe"),Y("data"),Y("layout"),te},l.supplyTraceDefaults=function(K,te,Y,V,ee){var ne=V.colorway||t.defaults,Z=ne[Y%ne.length],q;function ie(Me,Le){return r.coerce(K,te,l.attributes,Me,Le)}var se=ie("visible");ie("type"),ie("name",V._traceWord+" "+ee),ie("uirevision",V.uirevision);var ae=l.getModule(te);if(te._module=ae,ae){var oe=ae.basePlotModule,be=oe.attr,ce=oe.attributes;if(be&&ce){var de=V._subplots,ye="";if(se||oe.name!=="gl2d"){if(Array.isArray(be))for(q=0;q<be.length;q++){var ge=be[q],me=r.coerce(K,te,ce,ge);de[ge]&&r.pushUnique(de[ge],me),ye+=me}else ye=r.coerce(K,te,ce,be);de[oe.name]&&r.pushUnique(de[oe.name],ye)}}}return se&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(te,"showLegend")?(r.coerce(K,te,ae.attributes.showlegend?ae.attributes:l.attributes,"showlegend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),te._dfltShowLegend=!0):te._dfltShowLegend=!1,ae&&ae.supplyDefaults(K,te,Z,V),e.traceIs(te,"noOpacity")||ie("opacity"),e.traceIs(te,"notLegendIsolatable")&&(te.visible=!!te.visible),e.traceIs(te,"noHover")||(te.hovertemplate||r.coerceHoverinfo(K,te,V),te.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(K,te,Z,V)),ae&&ae.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(K,te,V)),te};function F(K){var te=K.transforms;if(Array.isArray(te)&&te.length)for(var Y=0;Y<te.length;Y++){var V=te[Y],ee=V._module||x[V.type];if(ee&&ee.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(K,te,Y){if(!!(te._length||F(K))){var V=Y._globalTransforms||[],ee=Y._transformModules||[];if(!(!Array.isArray(K.transforms)&&V.length===0))for(var ne=K.transforms||[],Z=V.concat(ne),q=te.transforms=[],ie=0;ie<Z.length;ie++){var se=Z[ie],ae=se.type,oe=x[ae],be,ce=!(se._module&&se._module===oe),de=oe&&typeof oe.transform=="function";oe||r.warn("Unrecognized transform type "+ae+"."),oe&&oe.supplyDefaults&&(ce||de)?(be=oe.supplyDefaults(se,te,Y,K),be.type=ae,be._module=oe,r.pushUnique(ee,oe)):be=r.extendFlat({},se),q.push(be)}}};function I(K,te,Y,V){for(var ee=K.transforms,ne=[K],Z=0;Z<ee.length;Z++){var q=ee[Z],ie=x[q.type];ie&&ie.transform&&(ne=ie.transform(ne,{transform:q,fullTrace:K,fullData:te,layout:Y,fullLayout:V,transformIndex:Z}))}return ne}l.supplyLayoutGlobalDefaults=function(K,te,Y){function V(se,ae){return r.coerce(K,te,l.layoutAttributes,se,ae)}var ee=K.template;r.isPlainObject(ee)&&(te.template=ee,te._template=ee.layout,te._dataTemplate=ee.data),V("autotypenumbers");var ne=r.coerceFont(V,"font"),Z=ne.size;r.coerceFont(V,"title.font",r.extendFlat({},ne,{size:Math.round(Z*1.4)})),V("title.text",te._dfltTitle.plot),V("title.xref"),V("title.yref"),V("title.x"),V("title.y"),V("title.xanchor"),V("title.yanchor"),V("title.pad.t"),V("title.pad.r"),V("title.pad.b"),V("title.pad.l");var q=V("uniformtext.mode");q&&V("uniformtext.minsize"),V("autosize",!(K.width&&K.height)),V("width"),V("height"),V("minreducedwidth"),V("minreducedheight"),V("margin.l"),V("margin.r"),V("margin.t"),V("margin.b"),V("margin.pad"),V("margin.autoexpand"),K.width&&K.height&&l.sanitizeMargins(te),e.getComponentMethod("grid","sizeDefaults")(K,te),V("paper_bgcolor"),V("separators",Y.decimal+Y.thousands),V("hidesources"),V("colorway"),V("datarevision");var ie=V("uirevision");V("editrevision",ie),V("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(K,te),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,te,V),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,te,V),V("meta"),r.isPlainObject(K.transition)&&(V("transition.duration"),V("transition.easing"),V("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(K,te,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,te,V)};function D(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}l.plotAutoSize=function(te,Y,V){var ee=te._context||{},ne=ee.frameMargins,Z,q,ie=r.isPlotDiv(te);if(ie&&te.emit("plotly_autosize"),ee.fillFrame)Z=window.innerWidth,q=window.innerHeight,document.body.style.overflow="hidden";else{var se=ie?window.getComputedStyle(te):{};if(Z=D(se.width)||D(se.maxWidth)||V.width,q=D(se.height)||D(se.maxHeight)||V.height,T(ne)&&ne>0){var ae=1-2*ne;Z=Math.round(ae*Z),q=Math.round(ae*q)}}var oe=l.layoutAttributes.width.min,be=l.layoutAttributes.height.min;Z<oe&&(Z=oe),q<be&&(q=be);var ce=!Y.width&&Math.abs(V.width-Z)>1,de=!Y.height&&Math.abs(V.height-q)>1;(de||ce)&&(ce&&(V.width=Z),de&&(V.height=q)),te._initialAutoSize||(te._initialAutoSize={width:Z,height:q}),l.sanitizeMargins(V)},l.supplyLayoutModuleDefaults=function(K,te,Y,V){var ee=e.componentsRegistry,ne=te._basePlotModules,Z,q,ie,se=e.subplotsRegistry.cartesian;for(Z in ee)ie=ee[Z],ie.includeBasePlot&&ie.includeBasePlot(K,te);ne.length||ne.push(se),te._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(K,te),se.finalizeSubplots(K,te));for(var ae in te._subplots)te._subplots[ae].sort(r.subplotSort);for(q=0;q<ne.length;q++)ie=ne[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y);var oe=te._modules;for(q=0;q<oe.length;q++)ie=oe[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y);var be=te._transformModules;for(q=0;q<be.length;q++)ie=be[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y,V);for(Z in ee)ie=ee[Z],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y)},l.purge=function(K){var te=K._fullLayout||{};te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.remove(),te._glcanvas=null),te._modeBar&&te._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},l.style=function(K){var te=K._fullLayout._visibleModules,Y=[],V;for(V=0;V<te.length;V++){var ee=te[V];ee.style&&r.pushUnique(Y,ee.style)}for(V=0;V<Y.length;V++)Y[V](K)},l.sanitizeMargins=function(K){if(!(!K||!K.margin)){var te=K.width,Y=K.height,V=K.margin,ee=te-(V.l+V.r),ne=Y-(V.t+V.b),Z;ee<0&&(Z=(te-1)/(V.l+V.r),V.l=Math.floor(Z*V.l),V.r=Math.floor(Z*V.r)),ne<0&&(Z=(Y-1)/(V.t+V.b),V.t=Math.floor(Z*V.t),V.b=Math.floor(Z*V.b))}},l.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(K,te){K._fullLayout._pushmarginIds[te]=1};function R(K){var te=K.margin;if(!K._size){var Y=K._size={l:Math.round(te.l),r:Math.round(te.r),t:Math.round(te.t),b:Math.round(te.b),p:Math.round(te.pad)};Y.w=Math.round(K.width)-Y.l-Y.r,Y.h=Math.round(K.height)-Y.t-Y.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={})}var O=2,z=2;l.autoMargin=function(K,te,Y){var V=K._fullLayout,ee=V.width,ne=V.height,Z=V.margin,q=V.minreducedwidth,ie=V.minreducedheight,se=r.constrain(ee-Z.l-Z.r,O,q),ae=r.constrain(ne-Z.t-Z.b,z,ie),oe=Math.max(0,ee-se),be=Math.max(0,ne-ae),ce=V._pushmargin,de=V._pushmarginIds;if(Z.autoexpand!==!1){if(!Y)delete ce[te],delete de[te];else{var ye=Y.pad;if(ye===void 0&&(ye=Math.min(12,Z.l,Z.r,Z.t,Z.b)),oe){var ge=(Y.l+Y.r)/oe;ge>1&&(Y.l/=ge,Y.r/=ge)}if(be){var me=(Y.t+Y.b)/be;me>1&&(Y.t/=me,Y.b/=me)}var Me=Y.xl!==void 0?Y.xl:Y.x,Le=Y.xr!==void 0?Y.xr:Y.x,Oe=Y.yt!==void 0?Y.yt:Y.y,_e=Y.yb!==void 0?Y.yb:Y.y;ce[te]={l:{val:Me,size:Y.l+ye},r:{val:Le,size:Y.r+ye},b:{val:_e,size:Y.b+ye},t:{val:Oe,size:Y.t+ye}},de[te]=1}if(!V._replotting)return l.doAutoMargin(K)}},l.doAutoMargin=function(K){var te=K._fullLayout,Y=te.width,V=te.height;te._size||(te._size={}),R(te);var ee=te._size,ne=te.margin,Z=r.extendFlat({},ee),q=ne.l,ie=ne.r,se=ne.t,ae=ne.b,oe=te._pushmargin,be=te._pushmarginIds,ce=te.minreducedwidth,de=te.minreducedheight;if(te.margin.autoexpand!==!1){for(var ye in oe)be[ye]||delete oe[ye];oe.base={l:{val:0,size:q},r:{val:1,size:ie},t:{val:1,size:se},b:{val:0,size:ae}};for(var ge in oe){var me=oe[ge].l||{},Me=oe[ge].b||{},Le=me.val,Oe=me.size,_e=Me.val,Ee=Me.size;for(var Ze in oe){if(T(Oe)&&oe[Ze].r){var Ge=oe[Ze].r.val,Fe=oe[Ze].r.size;if(Ge>Le){var Re=(Oe*Ge+(Fe-Y)*Le)/(Ge-Le),We=(Fe*(1-Le)+(Oe-Y)*(1-Ge))/(Ge-Le);Re+We>q+ie&&(q=Re,ie=We)}}if(T(Ee)&&oe[Ze].t){var xt=oe[Ze].t.val,Nt=oe[Ze].t.size;if(xt>_e){var tr=(Ee*xt+(Nt-V)*_e)/(xt-_e),Vt=(Nt*(1-_e)+(Ee-V)*(1-xt))/(xt-_e);tr+Vt>ae+se&&(ae=tr,se=Vt)}}}}}var Pt=r.constrain(Y-ne.l-ne.r,O,ce),$t=r.constrain(V-ne.t-ne.b,z,de),Ut=Math.max(0,Y-Pt),Lt=Math.max(0,V-$t);if(Ut){var Ye=(q+ie)/Ut;Ye>1&&(q/=Ye,ie/=Ye)}if(Lt){var ot=(ae+se)/Lt;ot>1&&(ae/=ot,se/=ot)}if(ee.l=Math.round(q),ee.r=Math.round(ie),ee.t=Math.round(se),ee.b=Math.round(ae),ee.p=Math.round(ne.pad),ee.w=Math.round(Y)-ee.l-ee.r,ee.h=Math.round(V)-ee.t-ee.b,!te._replotting&&l.didMarginChange(Z,ee)){"_redrawFromAutoMarginCount"in te?te._redrawFromAutoMarginCount++:te._redrawFromAutoMarginCount=1;var Ve=3*(1+Object.keys(be).length);if(te._redrawFromAutoMarginCount<Ve)return e.call("_doPlot",K);te._size=Z,r.warn("Too many auto-margin redraws.")}B(K)};function B(K){var te=i.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Y){for(var V=0;V<te.length;V++){var ee=te[V][Y];ee&&ee()}})}var G=["l","r","t","b","p","w","h"];l.didMarginChange=function(K,te){for(var Y=0;Y<G.length;Y++){var V=G[Y],ee=K[V],ne=te[V];if(!T(ee)||Math.abs(ne-ee)>1)return!0}return!1},l.graphJson=function(K,te,Y,V,ee,ne){(ee&&te&&!K._fullData||ee&&!te&&!K._fullLayout)&&l.supplyDefaults(K);var Z=ee?K._fullData:K.data,q=ee?K._fullLayout:K.layout,ie=(K._transitionData||{})._frames;function se(be,ce){if(typeof be=="function")return ce?"_function_":null;if(r.isPlainObject(be)){var de={},ye;return Object.keys(be).sort().forEach(function(ge){if(["_","["].indexOf(ge.charAt(0))===-1){if(typeof be[ge]=="function"){ce&&(de[ge]="_function");return}if(Y==="keepdata"){if(ge.substr(ge.length-3)==="src")return}else if(Y==="keepstream"){if(ye=be[ge+"src"],typeof ye=="string"&&ye.indexOf(":")>0&&!r.isPlainObject(be.stream))return}else if(Y!=="keepall"&&(ye=be[ge+"src"],typeof ye=="string"&&ye.indexOf(":")>0))return;de[ge]=se(be[ge],ce)}}),de}return Array.isArray(be)?be.map(function(ge){return se(ge,ce)}):r.isTypedArray(be)?r.simpleMap(be,r.identity):r.isJSDate(be)?r.ms2DateTimeLocal(+be):be}var ae={data:(Z||[]).map(function(be){var ce=se(be);return te&&delete ce.fit,ce})};if(!te&&(ae.layout=se(q),ee)){var oe=q._size;ae.layout.computed={margin:{b:oe.b,l:oe.l,r:oe.r,t:oe.t}}}return ie&&(ae.frames=se(ie)),ne&&(ae.config=se(K._context,!0)),V==="object"?ae:JSON.stringify(ae)},l.modifyFrames=function(K,te){var Y,V,ee,ne=K._transitionData._frames,Z=K._transitionData._frameHash;for(Y=0;Y<te.length;Y++)switch(V=te[Y],V.type){case"replace":ee=V.value;var q=(ne[V.index]||{}).name,ie=ee.name;ne[V.index]=Z[ie]=ee,ie!==q&&(delete Z[q],Z[ie]=ee);break;case"insert":ee=V.value,Z[ee.name]=ee,ne.splice(V.index,0,ee);break;case"delete":ee=ne[V.index],delete Z[ee.name],ne.splice(V.index,1);break}return Promise.resolve()},l.computeFrame=function(K,te){var Y=K._transitionData._frameHash,V,ee,ne,Z;if(!te)throw new Error("computeFrame must be given a string frame name");var q=Y[te.toString()];if(!q)return!1;for(var ie=[q],se=[q.name];q.baseframe&&(q=Y[q.baseframe.toString()])&&se.indexOf(q.name)===-1;)ie.push(q),se.push(q.name);for(var ae={};q=ie.pop();)if(q.layout&&(ae.layout=l.extendLayout(ae.layout,q.layout)),q.data){if(ae.data||(ae.data=[]),ee=q.traces,!ee)for(ee=[],V=0;V<q.data.length;V++)ee[V]=V;for(ae.traces||(ae.traces=[]),V=0;V<q.data.length;V++)ne=ee[V],ne!=null&&(Z=ae.traces.indexOf(ne),Z===-1&&(Z=ae.data.length,ae.traces[Z]=ne),ae.data[Z]=l.extendTrace(ae.data[Z],q.data[V]))}return ae},l.recomputeFrameHash=function(K){for(var te=K._transitionData._frameHash={},Y=K._transitionData._frames,V=0;V<Y.length;V++){var ee=Y[V];ee&&ee.name&&(te[ee.name]=ee)}},l.extendObjectWithContainers=function(K,te,Y){var V,ee,ne,Z,q,ie,se,ae,oe=r.extendDeepNoArrays({},te||{}),be=r.expandObjectPaths(oe),ce={};if(Y&&Y.length)for(ne=0;ne<Y.length;ne++)V=r.nestedProperty(be,Y[ne]),ee=V.get(),ee===void 0?r.nestedProperty(ce,Y[ne]).set(null):(V.set(null),r.nestedProperty(ce,Y[ne]).set(ee));if(K=r.extendDeepNoArrays(K||{},be),Y&&Y.length){for(ne=0;ne<Y.length;ne++)if(q=r.nestedProperty(ce,Y[ne]),se=q.get(),!!se){for(ie=r.nestedProperty(K,Y[ne]),ae=ie.get(),Array.isArray(ae)||(ae=[],ie.set(ae)),Z=0;Z<se.length;Z++){var de=se[Z];de===null?ae[Z]=null:ae[Z]=l.extendObjectWithContainers(ae[Z],de)}ie.set(ae)}}return K},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(K,te){return l.extendObjectWithContainers(K,te,l.dataArrayContainers)},l.extendLayout=function(K,te){return l.extendObjectWithContainers(K,te,l.layoutArrayContainers)},l.transition=function(K,te,Y,V,ee,ne){var Z={redraw:ee.redraw},q={},ie=[];return Z.prepareFn=function(){for(var se=Array.isArray(te)?te.length:0,ae=V.slice(0,se),oe=0;oe<ae.length;oe++){var be=ae[oe],ce=K._fullData[be],de=ce._module;if(!!de){if(de.animatable){var ye=de.basePlotModule.name;q[ye]||(q[ye]=[]),q[ye].push(be)}K.data[ae[oe]]=l.extendTrace(K.data[ae[oe]],te[oe])}}var ge=r.expandObjectPaths(r.extendDeepNoArrays({},Y)),me=/^[xy]axis[0-9]*$/;for(var Me in ge)!me.test(Me)||delete ge[Me].range;l.extendLayout(K.layout,ge),delete K.calcdata,l.supplyDefaults(K),l.doCalcdata(K);var Le=r.expandObjectPaths(Y);if(Le){var Oe=K._fullLayout._plots;for(var _e in Oe){var Ee=Oe[_e],Ze=Ee.xaxis,Ge=Ee.yaxis,Fe=Ze.range.slice(),Re=Ge.range.slice(),We=null,xt=null,Nt=null,tr=null;Array.isArray(Le[Ze._name+".range"])?We=Le[Ze._name+".range"].slice():Array.isArray((Le[Ze._name]||{}).range)&&(We=Le[Ze._name].range.slice()),Array.isArray(Le[Ge._name+".range"])?xt=Le[Ge._name+".range"].slice():Array.isArray((Le[Ge._name]||{}).range)&&(xt=Le[Ge._name].range.slice()),Fe&&We&&(Ze.r2l(Fe[0])!==Ze.r2l(We[0])||Ze.r2l(Fe[1])!==Ze.r2l(We[1]))&&(Nt={xr0:Fe,xr1:We}),Re&&xt&&(Ge.r2l(Re[0])!==Ge.r2l(xt[0])||Ge.r2l(Re[1])!==Ge.r2l(xt[1]))&&(tr={yr0:Re,yr1:xt}),(Nt||tr)&&ie.push(r.extendFlat({plotinfo:Ee},Nt,tr))}}return Promise.resolve()},Z.runFn=function(se){var ae,oe=K._fullLayout._basePlotModules,be=ie.length,ce;if(Y)for(ce=0;ce<oe.length;ce++)oe[ce].transitionAxes&&oe[ce].transitionAxes(K,ie,ne,se);be?(ae=r.extendFlat({},ne),ae.duration=0,delete q.cartesian):ae=ne;for(var de in q){var ye=q[de],ge=K._fullData[ye[0]]._module;ge.basePlotModule.plot(K,ye,ae,se)}},Q(K,ne,Z)},l.transitionFromReact=function(K,te,Y,V){var ee=K._fullLayout,ne=ee.transition,Z={},q=[];return Z.prepareFn=function(){var ie=ee._plots;Z.redraw=!1,te.anim==="some"&&(Z.redraw=!0),Y.anim==="some"&&(Z.redraw=!0);for(var se in ie){var ae=ie[se],oe=ae.xaxis,be=ae.yaxis,ce=V[oe._name].range.slice(),de=V[be._name].range.slice(),ye=oe.range.slice(),ge=be.range.slice();oe.setScale(),be.setScale();var me=null,Me=null;(oe.r2l(ce[0])!==oe.r2l(ye[0])||oe.r2l(ce[1])!==oe.r2l(ye[1]))&&(me={xr0:ce,xr1:ye}),(be.r2l(de[0])!==be.r2l(ge[0])||be.r2l(de[1])!==be.r2l(ge[1]))&&(Me={yr0:de,yr1:ge}),(me||Me)&&q.push(r.extendFlat({plotinfo:ae},me,Me))}return Promise.resolve()},Z.runFn=function(ie){for(var se=K._fullData,ae=K._fullLayout,oe=ae._basePlotModules,be,ce,de,ye=[],ge=0;ge<se.length;ge++)ye.push(ge);function me(){if(!!K._fullLayout)for(var Le=0;Le<oe.length;Le++)oe[Le].transitionAxes&&oe[Le].transitionAxes(K,q,be,ie)}function Me(){if(!!K._fullLayout)for(var Le=0;Le<oe.length;Le++)oe[Le].plot(K,de,ce,ie)}q.length&&te.anim?ne.ordering==="traces first"?(be=r.extendFlat({},ne,{duration:0}),de=ye,ce=ne,setTimeout(me,ne.duration),Me()):(be=ne,de=null,ce=r.extendFlat({},ne,{duration:0}),setTimeout(Me,be.duration),me()):q.length?(be=ne,me()):te.anim&&(de=ye,ce=ne,Me())},Q(K,ne,Z)};function Q(K,te,Y){var V=!1;function ee(oe){var be=Promise.resolve();if(!oe)return be;for(;oe.length;)be=be.then(oe.shift());return be}function ne(oe){if(!!oe)for(;oe.length;)oe.shift()}function Z(){return K.emit("plotly_transitioning",[]),new Promise(function(oe){K._transitioning=!0,te.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){V=!0}),Y.redraw&&K._transitionData._interruptCallbacks.push(function(){return e.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var be=0,ce=0;function de(){return be++,function(){ce++,!V&&ce===be&&q(oe)}}Y.runFn(de),setTimeout(de())})}function q(oe){if(!!K._transitionData)return ne(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Y.redraw)return e.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(oe)}function ie(){if(!!K._transitionData)return K._transitioning=!1,ee(K._transitionData._interruptCallbacks)}var se=[l.previousPromises,ie,Y.prepareFn,l.rehover,l.reselect,Z],ae=r.syncOrAsync(se,K);return(!ae||!ae.then)&&(ae=Promise.resolve()),ae.then(function(){return K})}l.doCalcdata=function(K,te){var Y=i.list(K),V=K._fullData,ee=K._fullLayout,ne,Z,q,ie,se=new Array(V.length),ae=(K.calcdata||[]).slice();for(K.calcdata=se,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._iciclecolormap={},ee._funnelareacolormap={},q=0;q<V.length;q++)if(Array.isArray(te)&&te.indexOf(q)===-1){se[q]=ae[q];continue}for(q=0;q<V.length;q++)ne=V[q],ne._arrayAttrs=a.findArrayAttributes(ne),ne._extremes={};var oe=ee._subplots.polar||[];for(q=0;q<oe.length;q++)Y.push(ee[oe[q]].radialaxis,ee[oe[q]].angularaxis);for(var be in ee._colorAxes){var ce=ee[be];ce.cauto!==!1&&(delete ce.cmin,delete ce.cmax)}var de=!1;function ye(Me){if(ne=V[Me],Z=ne._module,ne.visible===!0&&ne.transforms){if(Z&&Z.calc){var Le=Z.calc(K,ne);Le[0]&&Le[0].t&&Le[0].t._scene&&delete Le[0].t._scene.dirty}for(ie=0;ie<ne.transforms.length;ie++){var Oe=ne.transforms[ie];Z=x[Oe.type],Z&&Z.calcTransform&&(ne._hasCalcTransform=!0,de=!0,Z.calcTransform(K,ne,Oe))}}}function ge(Me,Le){if(ne=V[Me],Z=ne._module,!!Z.isContainer===Le){var Oe=[];if(ne.visible===!0&&ne._length!==0){delete ne._indexToPoints;var _e=ne.transforms||[];for(ie=_e.length-1;ie>=0;ie--)if(_e[ie].enabled){ne._indexToPoints=_e[ie]._indexToPoints;break}Z&&Z.calc&&(Oe=Z.calc(K,ne))}(!Array.isArray(Oe)||!Oe[0])&&(Oe=[{x:h,y:h}]),Oe[0].t||(Oe[0].t={}),Oe[0].trace=ne,se[Me]=Oe}}for(re(Y,V,ee),q=0;q<V.length;q++)ge(q,!0);for(q=0;q<V.length;q++)ye(q);for(de&&re(Y,V,ee),q=0;q<V.length;q++)ge(q,!0);for(q=0;q<V.length;q++)ge(q,!1);ue(K);var me=j(Y,K);if(me.length){for(ee._numBoxes=0,ee._numViolins=0,q=0;q<me.length;q++)ge(me[q],!0);for(q=0;q<me.length;q++)ge(me[q],!1);ue(K)}e.getComponentMethod("fx","calc")(K),e.getComponentMethod("errorbars","calc")(K)};var X=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(K,te){var Y=[],V,ee,ne,Z,q;function ie(Pt,$t,Ut){var Lt=$t._id.charAt(0);if(Pt==="histogram2dcontour"){var Ye=$t._counterAxes[0],ot=i.getFromId(te,Ye),Ve=Lt==="x"||Ye==="x"&&ot.type==="category",Ae=Lt==="y"||Ye==="y"&&ot.type==="category";return function(He,Je){return He===0||Je===0||Ve&&He===Ut[Je].length-1||Ae&&Je===Ut.length-1?-1:(Lt==="y"?Je:He)-1}}else return function(He,Je){return Lt==="y"?Je:He}}var se={min:function(Pt){return r.aggNums(Math.min,null,Pt)},max:function(Pt){return r.aggNums(Math.max,null,Pt)},sum:function(Pt){return r.aggNums(function($t,Ut){return $t+Ut},null,Pt)},total:function(Pt){return r.aggNums(function($t,Ut){return $t+Ut},null,Pt)},mean:function(Pt){return r.mean(Pt)},median:function(Pt){return r.median(Pt)}};for(V=0;V<K.length;V++){var ae=K[V];if(ae.type==="category"){var oe=ae.categoryorder.match(X);if(oe){var be=oe[1],ce=oe[2],de=ae._id.charAt(0),ye=de==="x",ge=[];for(ee=0;ee<ae._categories.length;ee++)ge.push([ae._categories[ee],[]]);for(ee=0;ee<ae._traceIndices.length;ee++){var me=ae._traceIndices[ee],Me=te._fullData[me];if(Me.visible===!0){var Le=Me.type;e.traceIs(Me,"histogram")&&(delete Me._xautoBinFinished,delete Me._yautoBinFinished);var Oe=Le==="splom",_e=Le==="scattergl",Ee=te.calcdata[me];for(ne=0;ne<Ee.length;ne++){var Ze=Ee[ne],Ge,Fe;if(Oe){var Re=Me._axesDim[ae._id];if(!ye){var We=Me._diag[Re][0];We&&(ae=te._fullLayout[i.id2name(We)])}var xt=Ze.trace.dimensions[Re].values;for(Z=0;Z<xt.length;Z++)for(Ge=ae._categoriesMap[xt[Z]],q=0;q<Ze.trace.dimensions.length;q++)if(q!==Re){var Nt=Ze.trace.dimensions[q];ge[Ge][1].push(Nt.values[Z])}}else if(_e){for(Z=0;Z<Ze.t.x.length;Z++)ye?(Ge=Ze.t.x[Z],Fe=Ze.t.y[Z]):(Ge=Ze.t.y[Z],Fe=Ze.t.x[Z]),ge[Ge][1].push(Fe);Ze.t&&Ze.t._scene&&delete Ze.t._scene.dirty}else if(Ze.hasOwnProperty("z")){Fe=Ze.z;var tr=ie(Me.type,ae,Fe);for(Z=0;Z<Fe.length;Z++)for(q=0;q<Fe[Z].length;q++)Ge=tr(q,Z),Ge+1&&ge[Ge][1].push(Fe[Z][q])}else for(Ge=Ze.p,Ge===void 0&&(Ge=Ze[de]),Fe=Ze.s,Fe===void 0&&(Fe=Ze.v),Fe===void 0&&(Fe=ye?Ze.y:Ze.x),Array.isArray(Fe)||(Fe===void 0?Fe=[]:Fe=[Fe]),Z=0;Z<Fe.length;Z++)ge[Ge][1].push(Fe[Z])}}}ae._categoriesValue=ge;var Vt=[];for(ee=0;ee<ge.length;ee++)Vt.push([ge[ee][0],se[be](ge[ee][1])]);Vt.sort(function(Pt,$t){return Pt[1]-$t[1]}),ae._categoriesAggregatedValue=Vt,ae._initialCategories=Vt.map(function(Pt){return Pt[0]}),ce==="descending"&&ae._initialCategories.reverse(),Y=Y.concat(ae.sortByInitialCategories())}}}return Y}function re(K,te,Y){var V={};function ee(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(te),V[ie._id]=1}r.simpleMap(K,ee);for(var ne=Y._axisMatchGroups||[],Z=0;Z<ne.length;Z++)for(var q in ne[Z])V[q]||ee(Y[i.id2name(q)])}function ue(K){var te=K._fullLayout,Y=te._visibleModules,V={},ee,ne,Z;for(ne=0;ne<Y.length;ne++){var q=Y[ne],ie=q.crossTraceCalc;if(ie){var se=q.basePlotModule.name;V[se]?r.pushUnique(V[se],ie):V[se]=[ie]}}for(Z in V){var ae=V[Z],oe=te._subplots[Z];if(Array.isArray(oe))for(ee=0;ee<oe.length;ee++){var be=oe[ee],ce=Z==="cartesian"?te._plots[be]:te[be];for(ne=0;ne<ae.length;ne++)ae[ne](K,ce,be)}else for(ne=0;ne<ae.length;ne++)ae[ne](K)}}l.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},l.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},l.reselect=function(K){var te=K._fullLayout,Y=(K.layout||{}).selections,V=te._previousSelections;te._previousSelections=Y;var ee=te._reselect||JSON.stringify(Y)!==JSON.stringify(V);e.getComponentMethod("selections","reselect")(K,ee)},l.generalUpdatePerTraceModule=function(K,te,Y,V){var ee=te.traceHash,ne={},Z;for(Z=0;Z<Y.length;Z++){var q=Y[Z],ie=q[0].trace;ie.visible&&(ne[ie.type]=ne[ie.type]||[],ne[ie.type].push(q))}for(var se in ee)if(!ne[se]){var ae=ee[se][0],oe=ae[0].trace;oe.visible=!1,ne[se]=[ae]}for(var be in ne){var ce=ne[be],de=ce[0][0].trace._module;de.plot(K,te,r.filterVisible(ce),V)}te.traceHash=ne},l.plotBasePlot=function(K,te,Y,V,ee){var ne=e.getModule(K),Z=p(te.calcdata,ne)[0];ne.plot(te,Z,V,ee)},l.cleanBasePlot=function(K,te,Y,V,ee){var ne=ee._has&&ee._has(K),Z=Y._has&&Y._has(K);ne&&!Z&&ee["_"+K+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(o,U,H){U.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(o,U,H){var w=o("../../lib"),f=o("../../lib/polygon").tester,M=w.findIndexOfMin,T=w.isAngleInsideSector,e=w.angleDelta,a=w.angleDist;function n(x,u,A,_,g){if(!T(u,_))return!1;var b,v;A[0]<A[1]?(b=A[0],v=A[1]):(b=A[1],v=A[0]);var C=f(s(b,_[0],_[1],g)),S=f(s(v,_[0],_[1],g)),k=[x*Math.cos(u),x*Math.sin(u)];return S.contains(k)&&!C.contains(k)}function r(x,u,A,_){var g,b,v=_[0],C=_[1],S=p(Math.sin(u)-Math.sin(x)),k=p(Math.cos(u)-Math.cos(x)),E=Math.tan(A),F=p(1/E),I=S/k,D=C-I*v;return F?S&&k?(g=D/(E-I),b=E*g):k?(g=C*F,b=C):(g=v,b=v*E):S&&k?(g=0,b=D):k?(g=0,b=C):g=b=NaN,[g,b]}function t(x,u,A,_){var g=-u*A,b=u*u+1,v=2*(u*g-A),C=g*g+A*A-x*x,S=Math.sqrt(v*v-4*b*C),k=(-v+S)/(2*b),E=(-v-S)/(2*b);return[[k,u*k+g+_],[E,u*E+g+_]]}function h(x,u){var A=u.length,_=new Array(A+1),g;for(g=0;g<A;g++){var b=u[g];_[g]=[x*Math.cos(b),x*Math.sin(b)]}return _[g]=_[0].slice(),_}function i(x,u,A,_){var g=_.length,b=[],v,C;function S(B){return[x*Math.cos(B),x*Math.sin(B)]}function k(B,G,Q){return r(B,G,Q,S(B))}function E(B){return w.mod(B,g)}function F(B){return T(B,[u,A])}var I=M(_,function(B){return F(B)?a(B,u):1/0}),D=k(_[I],_[E(I-1)],u);for(b.push(D),v=I,C=0;C<g;v++,C++){var R=_[E(v)];if(!F(R))break;b.push(S(R))}var O=M(_,function(B){return F(B)?a(B,A):1/0}),z=k(_[O],_[E(O+1)],A);return b.push(z),b.push([0,0]),b.push(b[0].slice()),b}function s(x,u,A,_){return w.isFullCircle([u,A])?h(x,_):i(x,u,A,_)}function y(x,u,A,_){for(var g=1/0,b=1/0,v=s(x,u,A,_),C=0;C<v.length;C++){var S=v[C];g=Math.min(g,S[0]),b=Math.min(b,-S[1])}return[g,b]}function d(x,u){var A=function(b){var v=e(b,x);return v>0?v:1/0},_=M(u,A),g=w.mod(_+1,u.length);return[u[_],u[g]]}function p(x){return Math.abs(x)>1e-10?x:0}function c(x,u,A){u=u||0,A=A||0;for(var _=x.length,g=new Array(_),b=0;b<_;b++){var v=x[b];g[b]=[u+v[0],A-v[1]]}return g}function m(x,u,A,_,g,b){var v=s(x,u,A,_);return"M"+c(v,g,b).join("L")}function l(x,u,A,_,g,b,v){var C,S;x<u?(C=x,S=u):(C=u,S=x);var k=c(s(C,A,_,g),b,v),E=c(s(S,A,_,g),b,v);return"M"+E.reverse().join("L")+"M"+k.join("L")}U.exports={isPtInsidePolygon:n,findPolygonOffset:y,findEnclosingVertexAngles:d,findIntersectionXY:r,findXYatLength:t,clampTiny:p,pathPolygon:m,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(o,U,H){var w=o("../get_data").getSubplotCalcData,f=o("../../lib").counterRegex,M=o("./polar"),T=o("./constants"),e=T.attr,a=T.name,n=f(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(i){for(var s=i._fullLayout,y=i.calcdata,d=s._subplots[a],p=0;p<d.length;p++){var c=d[p],m=w(y,a,c),l=s[c]._subplot;l||(l=M(i,c),s[c]._subplot=l),l.plot(m,s,i._promises)}}function h(i,s,y,d){for(var p=d._subplots[a]||[],c=d._has&&d._has("gl"),m=s._has&&s._has("gl"),l=c&&!m,x=0;x<p.length;x++){var u=p[x],A=d[u]._subplot;if(!s[u]&&!!A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var _ in A.clipPaths)A.clipPaths[_].remove()}l&&A._scene&&(A._scene.destroy(),A._scene=null)}}U.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:o("./layout_attributes"),supplyLayoutDefaults:o("./layout_defaults"),plot:t,clean:h,toSVG:o("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(o,U,H){var w=o("../../components/color/attributes"),f=o("../cartesian/layout_attributes"),M=o("../domain").attributes,T=o("../../lib").extendFlat,e=o("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),n=e({tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickfont:f.tickfont,tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,layer:f.layer},"plot","from-root"),r={visible:T({},f.visible,{dflt:!0}),type:T({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:T({},f.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:f.categoryorder,categoryarray:f.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},f.title.text,{editType:"plot",dflt:""}),font:T({},f.title.font,{editType:"plot"}),editType:"plot"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}};T(r,a,n);var t={visible:T({},f.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:f.autotypenumbers,categoryorder:f.categoryorder,categoryarray:f.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(t,a,n),U.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:w.background},radialaxis:r,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../plot_api/plot_template"),T=o("../subplot_defaults"),e=o("../get_data").getSubplotData,a=o("../cartesian/tick_value_defaults"),n=o("../cartesian/tick_mark_defaults"),r=o("../cartesian/tick_label_defaults"),t=o("../cartesian/prefix_suffix_defaults"),h=o("../cartesian/category_order_defaults"),i=o("../cartesian/line_grid_defaults"),s=o("../cartesian/axis_autotype"),y=o("./layout_attributes"),d=o("./set_convert"),p=o("./constants"),c=p.axisNames;function m(x,u,A,_){var g=A("bgcolor");_.bgColor=f.combine(g,_.paper_bgcolor);var b=A("sector");A("hole");var v=e(_.fullData,p.name,_.id),C=_.layoutOut,S;function k(K,te){return A(S+"."+K,te)}for(var E=0;E<c.length;E++){S=c[E],w.isPlainObject(x[S])||(x[S]={});var F=x[S],I=M.newContainer(u,S);I._id=I._name=S,I._attr=_.id+"."+S,I._traceIndices=v.map(function(K){return K._expandedIndex});var D=p.axisName2dataArray[S],R=l(F,I,k,v,D,_);h(F,I,k,{axData:v,dataAttr:D});var O=k("visible");switch(d(I,u,C),k("uirevision",u.uirevision),I._m=1,S){case"radialaxis":var z=k("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&k("rangemode"),z==="reversed"&&(I._m=-1),k("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){w.log("Polar plots do not support date angular axes yet.");for(var B=0;B<v.length;B++)v[B].visible=!1;R=F.type=I.type="linear"}k(R==="linear"?"thetaunit":"period");var G=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[G]);break}if(t(F,I,k,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var Q,X,j,re,ue=_.font||{};Q=k("color"),X=Q===F.color?Q:ue.color,j=ue.size,re=ue.family,a(F,I,k,I.type),r(F,I,k,I.type,{font:{color:X,size:j,family:re}}),n(F,I,k,{outerTicks:!0}),i(F,I,k,{dfltColor:Q,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",b[0]),k("title.text"),w.coerceFont(k,"title.font",{color:X,size:w.bigFont(j),family:re}))}R!=="category"&&k("hoverformat"),I._input=F}u.angularaxis.type==="category"&&A("gridshape")}function l(x,u,A,_,g,b){var v=A("autotypenumbers",b.autotypenumbersDflt),C=A("type");if(C==="-"){for(var S,k=0;k<_.length;k++)if(_[k].visible){S=_[k];break}S&&S[g]&&(u.type=s(S[g],"gregorian",{noMultiCategory:!0,autotypenumbers:v})),u.type==="-"?u.type="linear":x.type=u.type}return u.type}U.exports=function(u,A,_){T(u,A,_,{type:p.name,attributes:y,handleDefaults:m,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:_,layoutOut:A})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(o,U,H){var w=o("@plotly/d3"),f=o("tinycolor2"),M=o("../../registry"),T=o("../../lib"),e=T.strRotate,a=T.strTranslate,n=o("../../components/color"),r=o("../../components/drawing"),t=o("../plots"),h=o("../../plots/cartesian/axes"),i=o("../cartesian/set_convert"),s=o("./set_convert"),y=o("../cartesian/autorange").doAutoRange,d=o("../cartesian/dragbox"),p=o("../../components/dragelement"),c=o("../../components/fx"),m=o("../../components/titles"),l=o("../../components/selections").prepSelect,x=o("../../components/selections").selectOnClick,u=o("../../components/selections").clearOutline,A=o("../../lib/setcursor"),_=o("../../lib/clear_gl_canvases"),g=o("../../plot_api/subroutines").redrawReglTraces,b=o("../../constants/alignment").MID_SHIFT,v=o("./constants"),C=o("./helpers"),S=o("../smith/helpers"),k=S.smith,E=S.reactanceArc,F=S.resistanceArc,I=S.smithTransform,D=T._,R=T.mod,O=T.deg2rad,z=T.rad2deg;function B(ue,K,te){this.isSmith=te||!1,this.id=K,this.gd=ue,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Y=ue._fullLayout,V="clip"+Y._uid+K;this.clipIds.forTraces=V+"-for-traces",this.clipPaths.forTraces=Y._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Y["_"+(te?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},te||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=B.prototype;U.exports=function(K,te,Y){return new B(K,te,Y)},G.plot=function(ue,K){for(var te=this,Y=K[te.id],V=!1,ee=0;ee<ue.length;ee++){var ne=ue[ee][0].trace;if(ne.cliponaxis===!1){V=!0;break}}te._hasClipOnAxisFalse=V,te.updateLayers(K,Y),te.updateLayout(K,Y),t.generalUpdatePerTraceModule(te.gd,te,ue,Y),te.updateFx(K,Y),te.isSmith&&(delete Y.realaxis.range,delete Y.imaginaryaxis.range)},G.updateLayers=function(ue,K){var te=this,Y=te.isSmith,V=te.layers,ee=te.getRadial(K),ne=te.getAngular(K),Z=v.layerNames,q=Z.indexOf("frontplot"),ie=Z.slice(0,q),se=ne.layer==="below traces",ae=ee.layer==="below traces";se&&ie.push("angular-line"),ae&&ie.push("radial-line"),se&&ie.push("angular-axis"),ae&&ie.push("radial-axis"),ie.push("frontplot"),se||ie.push("angular-line"),ae||ie.push("radial-line"),se||ie.push("angular-axis"),ae||ie.push("radial-axis");var oe=(Y?"smith":"polar")+"sublayer",be=te.framework.selectAll("."+oe).data(ie,String);be.enter().append("g").attr("class",function(ce){return oe+" "+ce}).each(function(ce){var de=V[ce]=w.select(this);switch(ce){case"frontplot":Y||de.append("g").classed("barlayer",!0),de.append("g").classed("scatterlayer",!0);break;case"backplot":de.append("g").classed("maplayer",!0);break;case"plotbg":V.bg=de.append("path");break;case"radial-grid":de.style("fill","none");break;case"angular-grid":de.style("fill","none");break;case"radial-line":de.append("line").style("fill","none");break;case"angular-line":de.append("path").style("fill","none");break}}),be.order()},G.updateLayout=function(ue,K){var te=this,Y=te.layers,V=ue._size,ee=te.getRadial(K),ne=te.getAngular(K),Z=K.domain.x,q=K.domain.y;te.xOffset=V.l+V.w*Z[0],te.yOffset=V.t+V.h*(1-q[1]);var ie=te.xLength=V.w*(Z[1]-Z[0]),se=te.yLength=V.h*(q[1]-q[0]),ae=te.getSector(K);te.sectorInRad=ae.map(O);var oe=te.sectorBBox=X(ae),be=oe[2]-oe[0],ce=oe[3]-oe[1],de=se/ie,ye=Math.abs(ce/be),ge,me,Me,Le,Oe;de>ye?(ge=ie,me=ie*ye,Oe=(se-me)/V.h/2,Me=[Z[0],Z[1]],Le=[q[0]+Oe,q[1]-Oe]):(ge=se/ye,me=se,Oe=(ie-ge)/V.w/2,Me=[Z[0]+Oe,Z[1]-Oe],Le=[q[0],q[1]]),te.xLength2=ge,te.yLength2=me,te.xDomain2=Me,te.yDomain2=Le;var _e=te.xOffset2=V.l+V.w*Me[0],Ee=te.yOffset2=V.t+V.h*(1-Le[1]),Ze=te.radius=ge/be,Ge=te.innerRadius=te.getHole(K)*Ze,Fe=te.cx=_e-Ze*oe[0],Re=te.cy=Ee+Ze*oe[3],We=te.cxx=Fe-_e,xt=te.cyy=Re-Ee,Nt=ee.side,tr;Nt==="counterclockwise"?(tr=Nt,Nt="top"):Nt==="clockwise"&&(tr=Nt,Nt="bottom"),te.radialAxis=te.mockAxis(ue,K,ee,{_id:"x",side:Nt,_trueSide:tr,domain:[Ge/V.w,Ze/V.w]}),te.angularAxis=te.mockAxis(ue,K,ne,{side:"right",domain:[0,Math.PI],autorange:!1}),te.doAutoRange(ue,K),te.updateAngularAxis(ue,K),te.updateRadialAxis(ue,K),te.updateRadialAxisTitle(ue,K),te.xaxis=te.mockCartesianAxis(ue,K,{_id:"x",domain:Me}),te.yaxis=te.mockCartesianAxis(ue,K,{_id:"y",domain:Le});var Vt=te.pathSubplot();te.clipPaths.forTraces.select("path").attr("d",Vt).attr("transform",a(We,xt)),Y.frontplot.attr("transform",a(_e,Ee)).call(r.setClipUrl,te._hasClipOnAxisFalse?null:te.clipIds.forTraces,te.gd),Y.bg.attr("d",Vt).attr("transform",a(Fe,Re)).call(n.fill,K.bgcolor)},G.mockAxis=function(ue,K,te,Y){var V=T.extendFlat({},te,Y);return s(V,K,ue),V},G.mockCartesianAxis=function(ue,K,te){var Y=this,V=Y.isSmith,ee=te._id,ne=T.extendFlat({type:"linear"},te);i(ne,ue);var Z={x:[0,2],y:[1,3]};return ne.setRange=function(){var q=Y.sectorBBox,ie=Z[ee],se=Y.radialAxis._rl,ae=(se[1]-se[0])/(1-Y.getHole(K));ne.range=[q[ie[0]]*ae,q[ie[1]]*ae]},ne.isPtWithinRange=ee==="x"&&!V?function(q){return Y.isPtInside(q)}:function(){return!0},ne.setRange(),ne.setScale(),ne},G.doAutoRange=function(ue,K){var te=this,Y=te.gd,V=te.radialAxis,ee=te.getRadial(K);y(Y,V);var ne=V.range;ee.range=ne.slice(),ee._input.range=ne.slice(),V._rl=[V.r2l(ne[0],null,"gregorian"),V.r2l(ne[1],null,"gregorian")]},G.updateRadialAxis=function(ue,K){var te=this,Y=te.gd,V=te.layers,ee=te.radius,ne=te.innerRadius,Z=te.cx,q=te.cy,ie=te.getRadial(K),se=R(te.getSector(K)[0],360),ae=te.radialAxis,oe=ne<ee,be=te.isSmith;be||(te.fillViewInitialKey("radialaxis.angle",ie.angle),te.fillViewInitialKey("radialaxis.range",ae.range.slice()),ae.setGeometry()),ae.tickangle==="auto"&&se>90&&se<=270&&(ae.tickangle=180);var ce=be?function(Ze){var Ge=I(te,k([Ze.x,0]));return a(Ge[0]-Z,Ge[1]-q)}:function(Ze){return a(ae.l2p(Ze.x)+ne,0)},de=be?function(Ze){return F(te,Ze.x,-1/0,1/0)}:function(Ze){return te.pathArc(ae.r2p(Ze.x)+ne)},ye=Q(ie);if(te.radialTickLayout!==ye&&(V["radial-axis"].selectAll(".xtick").remove(),te.radialTickLayout=ye),oe){ae.setScale();var ge=0,me=be?(ae.tickvals||[]).filter(function(Ze){return Ze>=0}).map(function(Ze){return h.tickText(ae,Ze,!0,!1)}):h.calcTicks(ae),Me=be?me:h.clipEnds(ae,me),Le=h.getTickSigns(ae)[2];be&&((ae.ticks==="top"&&ae.side==="bottom"||ae.ticks==="bottom"&&ae.side==="top")&&(Le=-Le),ae.ticks==="top"&&ae.side==="top"&&(ge=-ae.ticklen),ae.ticks==="bottom"&&ae.side==="bottom"&&(ge=ae.ticklen)),h.drawTicks(Y,ae,{vals:me,layer:V["radial-axis"],path:h.makeTickPath(ae,0,Le),transFn:ce,crisp:!1}),h.drawGrid(Y,ae,{vals:Me,layer:V["radial-grid"],path:de,transFn:T.noop,crisp:!1}),h.drawLabels(Y,ae,{vals:me,layer:V["radial-axis"],transFn:ce,labelFns:h.makeLabelFns(ae,ge)})}var Oe=te.radialAxisAngle=te.vangles?z(j(O(ie.angle),te.vangles)):ie.angle,_e=a(Z,q),Ee=_e+e(-Oe);re(V["radial-axis"],oe&&(ie.showticklabels||ie.ticks),{transform:Ee}),re(V["radial-grid"],oe&&ie.showgrid,{transform:be?"":_e}),re(V["radial-line"].select("line"),oe&&ie.showline,{x1:be?-ee:ne,y1:0,x2:ee,y2:0,transform:Ee}).attr("stroke-width",ie.linewidth).call(n.stroke,ie.linecolor)},G.updateRadialAxisTitle=function(ue,K,te){if(!this.isSmith){var Y=this,V=Y.gd,ee=Y.radius,ne=Y.cx,Z=Y.cy,q=Y.getRadial(K),ie=Y.id+"title",se=0;if(q.title){var ae=r.bBox(Y.layers["radial-axis"].node()).height,oe=q.title.font.size,be=q.side;se=be==="top"?oe:be==="counterclockwise"?-(ae+oe*.4):ae+oe*.8}var ce=te!==void 0?te:Y.radialAxisAngle,de=O(ce),ye=Math.cos(de),ge=Math.sin(de),me=ne+ee/2*ye+se*ge,Me=Z-ee/2*ge+se*ye;Y.layers["radial-axis-title"]=m.draw(V,ie,{propContainer:q,propName:Y.id+".radialaxis.title",placeholder:D(V,"Click to enter radial axis title"),attributes:{x:me,y:Me,"text-anchor":"middle"},transform:{rotate:-ce}})}},G.updateAngularAxis=function(ue,K){var te=this,Y=te.gd,V=te.layers,ee=te.radius,ne=te.innerRadius,Z=te.cx,q=te.cy,ie=te.getAngular(K),se=te.angularAxis,ae=te.isSmith;ae||(te.fillViewInitialKey("angularaxis.rotation",ie.rotation),se.setGeometry(),se.setScale());var oe=ae?function(Ge){var Fe=I(te,k([0,Ge.x]));return Math.atan2(Fe[0]-Z,Fe[1]-q)-Math.PI/2}:function(Ge){return se.t2g(Ge.x)};se.type==="linear"&&se.thetaunit==="radians"&&(se.tick0=z(se.tick0),se.dtick=z(se.dtick));var be=function(Ge){return a(Z+ee*Math.cos(Ge),q-ee*Math.sin(Ge))},ce=ae?function(Ge){var Fe=I(te,k([0,Ge.x]));return a(Fe[0],Fe[1])}:function(Ge){return be(oe(Ge))},de=ae?function(Ge){var Fe=I(te,k([0,Ge.x])),Re=Math.atan2(Fe[0]-Z,Fe[1]-q)-Math.PI/2;return a(Fe[0],Fe[1])+e(-z(Re))}:function(Ge){var Fe=oe(Ge);return be(Fe)+e(-z(Fe))},ye=ae?function(Ge){return E(te,Ge.x,0,1/0)}:function(Ge){var Fe=oe(Ge),Re=Math.cos(Fe),We=Math.sin(Fe);return"M"+[Z+ne*Re,q-ne*We]+"L"+[Z+ee*Re,q-ee*We]},ge=h.makeLabelFns(se,0),me=ge.labelStandoff,Me={};Me.xFn=function(Ge){var Fe=oe(Ge);return Math.cos(Fe)*me},Me.yFn=function(Ge){var Fe=oe(Ge),Re=Math.sin(Fe)>0?.2:1;return-Math.sin(Fe)*(me+Ge.fontSize*Re)+Math.abs(Math.cos(Fe))*(Ge.fontSize*b)},Me.anchorFn=function(Ge){var Fe=oe(Ge),Re=Math.cos(Fe);return Math.abs(Re)<.1?"middle":Re>0?"start":"end"},Me.heightFn=function(Ge,Fe,Re){var We=oe(Ge);return-.5*(1+Math.sin(We))*Re};var Le=Q(ie);te.angularTickLayout!==Le&&(V["angular-axis"].selectAll("."+se._id+"tick").remove(),te.angularTickLayout=Le);var Oe=ae?[1/0].concat(se.tickvals||[]).map(function(Ge){return h.tickText(se,Ge,!0,!1)}):h.calcTicks(se);ae&&(Oe[0].text="\u221E",Oe[0].fontSize*=1.75);var _e;if(K.gridshape==="linear"?(_e=Oe.map(oe),T.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,te.vangles=_e,se.type==="category"&&(Oe=Oe.filter(function(Ge){return T.isAngleInsideSector(oe(Ge),te.sectorInRad)})),se.visible){var Ee=se.ticks==="inside"?-1:1,Ze=(se.linewidth||1)/2;h.drawTicks(Y,se,{vals:Oe,layer:V["angular-axis"],path:"M"+Ee*Ze+",0h"+Ee*se.ticklen,transFn:de,crisp:!1}),h.drawGrid(Y,se,{vals:Oe,layer:V["angular-grid"],path:ye,transFn:T.noop,crisp:!1}),h.drawLabels(Y,se,{vals:Oe,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Me})}re(V["angular-line"].select("path"),ie.showline,{d:te.pathSubplot(),transform:a(Z,q)}).attr("stroke-width",ie.linewidth).call(n.stroke,ie.linecolor)},G.updateFx=function(ue,K){if(!this.gd._context.staticPlot){var te=!this.isSmith;te&&(this.updateAngularDrag(ue),this.updateRadialDrag(ue,K,0),this.updateRadialDrag(ue,K,1)),this.updateHoverAndMainDrag(ue)}},G.updateHoverAndMainDrag=function(ue){var K=this,te=K.isSmith,Y=K.gd,V=K.layers,ee=ue._zoomlayer,ne=v.MINZOOM,Z=v.OFFEDGE,q=K.radius,ie=K.innerRadius,se=K.cx,ae=K.cy,oe=K.cxx,be=K.cyy,ce=K.sectorInRad,de=K.vangles,ye=K.radialAxis,ge=C.clampTiny,me=C.findXYatLength,Me=C.findEnclosingVertexAngles,Le=v.cornerHalfWidth,Oe=v.cornerLen/2,_e,Ee,Ze=d.makeDragger(V,"path","maindrag",ue.dragmode===!1?"none":"crosshair");w.select(Ze).attr("d",K.pathSubplot()).attr("transform",a(se,ae)),Ze.onmousemove=function(Qt){c.hover(Y,Qt,K.id),Y._fullLayout._lasthover=Ze,Y._fullLayout._hoversubplot=K.id},Ze.onmouseout=function(Qt){Y._dragging||p.unhover(Y,Qt)};var Ge={element:Ze,gd:Y,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]},Fe,Re,We,xt,Nt,tr,Vt,Pt,$t;function Ut(Qt,Zt){return Math.sqrt(Qt*Qt+Zt*Zt)}function Lt(Qt,Zt){return Ut(Qt-oe,Zt-be)}function Ye(Qt,Zt){return Math.atan2(be-Zt,Qt-oe)}function ot(Qt,Zt){return[Qt*Math.cos(Zt),Qt*Math.sin(-Zt)]}function Ve(Qt,Zt){if(Qt===0)return K.pathSector(2*Le);var cr=Oe/Qt,Xr=Zt-cr,vn=Zt+cr,en=Math.max(0,Math.min(Qt,q)),ft=en-Le,ar=en+Le;return"M"+ot(ft,Xr)+"A"+[ft,ft]+" 0,0,0 "+ot(ft,vn)+"L"+ot(ar,vn)+"A"+[ar,ar]+" 0,0,1 "+ot(ar,Xr)+"Z"}function Ae(Qt,Zt,cr){if(Qt===0)return K.pathSector(2*Le);var Xr=ot(Qt,Zt),vn=ot(Qt,cr),en=ge((Xr[0]+vn[0])/2),ft=ge((Xr[1]+vn[1])/2),ar,rr;if(en&&ft){var Kt=ft/en,Er=-1/Kt,st=me(Le,Kt,en,ft);ar=me(Oe,Er,st[0][0],st[0][1]),rr=me(Oe,Er,st[1][0],st[1][1])}else{var et,vt;ft?(et=Oe,vt=Le):(et=Le,vt=Oe),ar=[[en-et,ft-vt],[en+et,ft-vt]],rr=[[en-et,ft+vt],[en+et,ft+vt]]}return"M"+ar.join("L")+"L"+rr.reverse().join("L")+"Z"}function He(){We=null,xt=null,Nt=K.pathSubplot(),tr=!1;var Qt=Y._fullLayout[K.id];Vt=f(Qt.bgcolor).getLuminance(),Pt=d.makeZoombox(ee,Vt,se,ae,Nt),Pt.attr("fill-rule","evenodd"),$t=d.makeCorners(ee,se,ae),u(Y)}function Je(Qt,Zt){return Zt=Math.max(Math.min(Zt,q),ie),Qt<Z?Qt=0:q-Qt<Z?Qt=q:Zt<Z?Zt=0:q-Zt<Z&&(Zt=q),Math.abs(Zt-Qt)>ne?(Qt<Zt?(We=Qt,xt=Zt):(We=Zt,xt=Qt),!0):(We=null,xt=null,!1)}function tt(Qt,Zt){Qt=Qt||Nt,Zt=Zt||"M0,0Z",Pt.attr("d",Qt),$t.attr("d",Zt),d.transitionZoombox(Pt,$t,tr,Vt),tr=!0;var cr={};Bt(cr),Y.emit("plotly_relayouting",cr)}function St(Qt,Zt){Qt=Qt*_e,Zt=Zt*Ee;var cr=Fe+Qt,Xr=Re+Zt,vn=Lt(Fe,Re),en=Math.min(Lt(cr,Xr),q),ft=Ye(Fe,Re),ar,rr;Je(vn,en)&&(ar=Nt+K.pathSector(xt),We&&(ar+=K.pathSector(We)),rr=Ve(We,ft)+Ve(xt,ft)),tt(ar,rr)}function _t(Qt,Zt,cr,Xr){var vn=C.findIntersectionXY(cr,Xr,cr,[Qt-oe,be-Zt]);return Ut(vn[0],vn[1])}function kt(Qt,Zt){var cr=Fe+Qt,Xr=Re+Zt,vn=Ye(Fe,Re),en=Ye(cr,Xr),ft=Me(vn,de),ar=Me(en,de),rr=_t(Fe,Re,ft[0],ft[1]),Kt=Math.min(_t(cr,Xr,ar[0],ar[1]),q),Er,st;Je(rr,Kt)&&(Er=Nt+K.pathSector(xt),We&&(Er+=K.pathSector(We)),st=[Ae(We,ft[0],ft[1]),Ae(xt,ft[0],ft[1])].join(" ")),tt(Er,st)}function jt(){if(d.removeZoombox(Y),!(We===null||xt===null)){var Qt={};Bt(Qt),d.showDoubleClickNotifier(Y),M.call("_guiRelayout",Y,Qt)}}function Bt(Qt){var Zt=ye._rl,cr=(Zt[1]-Zt[0])/(1-ie/q)/q,Xr=[Zt[0]+(We-ie)*cr,Zt[0]+(xt-ie)*cr];Qt[K.id+".radialaxis.range"]=Xr}function Wt(Qt,Zt){var cr=Y._fullLayout.clickmode;if(d.removeZoombox(Y),Qt===2){var Xr={};for(var vn in K.viewInitial)Xr[K.id+"."+vn]=K.viewInitial[vn];Y.emit("plotly_doubleclick",null),M.call("_guiRelayout",Y,Xr)}cr.indexOf("select")>-1&&Qt===1&&x(Zt,Y,[K.xaxis],[K.yaxis],K.id,Ge),cr.indexOf("event")>-1&&c.click(Y,Zt,K.id)}Ge.prepFn=function(Qt,Zt,cr){var Xr=Y._fullLayout.dragmode,vn=Ze.getBoundingClientRect();Y._fullLayout._calcInverseTransform(Y);var en=Y._fullLayout._invTransform;_e=Y._fullLayout._invScaleX,Ee=Y._fullLayout._invScaleY;var ft=T.apply3DTransform(en)(Zt-vn.left,cr-vn.top);if(Fe=ft[0],Re=ft[1],de){var ar=C.findPolygonOffset(q,ce[0],ce[1],de);Fe+=oe+ar[0],Re+=be+ar[1]}switch(Xr){case"zoom":Ge.clickFn=Wt,te||(de?Ge.moveFn=kt:Ge.moveFn=St,Ge.doneFn=jt,He());break;case"select":case"lasso":l(Qt,Zt,cr,Ge,Xr);break}},p.init(Ge)},G.updateRadialDrag=function(ue,K,te){var Y=this,V=Y.gd,ee=Y.layers,ne=Y.radius,Z=Y.innerRadius,q=Y.cx,ie=Y.cy,se=Y.radialAxis,ae=v.radialDragBoxSize,oe=ae/2;if(!se.visible)return;var be=O(Y.radialAxisAngle),ce=se._rl,de=ce[0],ye=ce[1],ge=ce[te],me=.75*(ce[1]-ce[0])/(1-Y.getHole(K))/ne,Me,Le,Oe;te?(Me=q+(ne+oe)*Math.cos(be),Le=ie-(ne+oe)*Math.sin(be),Oe="radialdrag"):(Me=q+(Z-oe)*Math.cos(be),Le=ie-(Z-oe)*Math.sin(be),Oe="radialdrag-inner");var _e=d.makeRectDragger(ee,Oe,"crosshair",-oe,-oe,ae,ae),Ee={element:_e,gd:V};ue.dragmode===!1&&(Ee.dragmode=!1),re(w.select(_e),se.visible&&Z<ne,{transform:a(Me,Le)});var Ze,Ge,Fe;function Re(Vt,Pt){if(Ze)Ze(Vt,Pt);else{var $t=[Vt,-Pt],Ut=[Math.cos(be),Math.sin(be)],Lt=Math.abs(T.dot($t,Ut)/Math.sqrt(T.dot($t,$t)));isNaN(Lt)||(Ze=Lt<.5?Nt:tr)}var Ye={};We(Ye),V.emit("plotly_relayouting",Ye)}function We(Vt){Ge!==null?Vt[Y.id+".radialaxis.angle"]=Ge:Fe!==null&&(Vt[Y.id+".radialaxis.range["+te+"]"]=Fe)}function xt(){Ge!==null?M.call("_guiRelayout",V,Y.id+".radialaxis.angle",Ge):Fe!==null&&M.call("_guiRelayout",V,Y.id+".radialaxis.range["+te+"]",Fe)}function Nt(Vt,Pt){if(te!==0){var $t=Me+Vt,Ut=Le+Pt;Ge=Math.atan2(ie-Ut,$t-q),Y.vangles&&(Ge=j(Ge,Y.vangles)),Ge=z(Ge);var Lt=a(q,ie)+e(-Ge);ee["radial-axis"].attr("transform",Lt),ee["radial-line"].select("line").attr("transform",Lt);var Ye=Y.gd._fullLayout,ot=Ye[Y.id];Y.updateRadialAxisTitle(Ye,ot,Ge)}}function tr(Vt,Pt){var $t=T.dot([Vt,-Pt],[Math.cos(be),Math.sin(be)]);if(Fe=ge-me*$t,me>0!=(te?Fe>de:Fe<ye)){Fe=null;return}var Ut=V._fullLayout,Lt=Ut[Y.id];se.range[te]=Fe,se._rl[te]=Fe,Y.updateRadialAxis(Ut,Lt),Y.xaxis.setRange(),Y.xaxis.setScale(),Y.yaxis.setRange(),Y.yaxis.setScale();var Ye=!1;for(var ot in Y.traceHash){var Ve=Y.traceHash[ot],Ae=T.filterVisible(Ve),He=Ve[0][0].trace._module;He.plot(V,Y,Ae,Lt),M.traceIs(ot,"gl")&&Ae.length&&(Ye=!0)}Ye&&(_(V),g(V))}Ee.prepFn=function(){Ze=null,Ge=null,Fe=null,Ee.moveFn=Re,Ee.doneFn=xt,u(V)},Ee.clampFn=function(Vt,Pt){return Math.sqrt(Vt*Vt+Pt*Pt)<v.MINDRAG&&(Vt=0,Pt=0),[Vt,Pt]},p.init(Ee)},G.updateAngularDrag=function(ue){var K=this,te=K.gd,Y=K.layers,V=K.radius,ee=K.angularAxis,ne=K.cx,Z=K.cy,q=K.cxx,ie=K.cyy,se=v.angularDragBoxSize,ae=d.makeDragger(Y,"path","angulardrag",ue.dragmode===!1?"none":"move"),oe={element:ae,gd:te};ue.dragmode===!1?oe.dragmode=!1:w.select(ae).attr("d",K.pathAnnulus(V,V+se)).attr("transform",a(ne,Z)).call(A,"move");function be(Fe,Re){return Math.atan2(ie+se-Re,Fe-q-se)}var ce=Y.frontplot.select(".scatterlayer").selectAll(".trace"),de=ce.selectAll(".point"),ye=ce.selectAll(".textpoint"),ge,me,Me,Le,Oe,_e;function Ee(Fe,Re){var We=K.gd._fullLayout,xt=We[K.id],Nt=ge+Fe*ue._invScaleX,tr=me+Re*ue._invScaleY,Vt=be(Nt,tr),Pt=z(Vt-_e);if(Le=Me+Pt,Y.frontplot.attr("transform",a(K.xOffset2,K.yOffset2)+e([-Pt,q,ie])),K.vangles){Oe=K.radialAxisAngle+Pt;var $t=a(ne,Z)+e(-Pt),Ut=a(ne,Z)+e(-Oe);Y.bg.attr("transform",$t),Y["radial-grid"].attr("transform",$t),Y["radial-axis"].attr("transform",Ut),Y["radial-line"].select("line").attr("transform",Ut),K.updateRadialAxisTitle(We,xt,Oe)}else K.clipPaths.forTraces.select("path").attr("transform",a(q,ie)+e(Pt));de.each(function(){var Je=w.select(this),tt=r.getTranslate(Je);Je.attr("transform",a(tt.x,tt.y)+e([Pt]))}),ye.each(function(){var Je=w.select(this),tt=Je.select("text"),St=r.getTranslate(Je);Je.attr("transform",e([Pt,tt.attr("x"),tt.attr("y")])+a(St.x,St.y))}),ee.rotation=T.modHalf(Le,360),K.updateAngularAxis(We,xt),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&ce.call(r.hideOutsideRangePoints,K);var Lt=!1;for(var Ye in K.traceHash)if(M.traceIs(Ye,"gl")){var ot=K.traceHash[Ye],Ve=T.filterVisible(ot),Ae=ot[0][0].trace._module;Ae.plot(te,K,Ve,xt),Ve.length&&(Lt=!0)}Lt&&(_(te),g(te));var He={};Ze(He),te.emit("plotly_relayouting",He)}function Ze(Fe){Fe[K.id+".angularaxis.rotation"]=Le,K.vangles&&(Fe[K.id+".radialaxis.angle"]=Oe)}function Ge(){ye.select("text").attr("transform",null);var Fe={};Ze(Fe),M.call("_guiRelayout",te,Fe)}oe.prepFn=function(Fe,Re,We){var xt=ue[K.id];Me=xt.angularaxis.rotation;var Nt=ae.getBoundingClientRect();ge=Re-Nt.left,me=We-Nt.top,te._fullLayout._calcInverseTransform(te);var tr=T.apply3DTransform(ue._invTransform)(ge,me);ge=tr[0],me=tr[1],_e=be(ge,me),oe.moveFn=Ee,oe.doneFn=Ge,u(te)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(oe.prepFn=T.noop,A(w.select(ae),null)),p.init(oe)},G.isPtInside=function(ue){if(this.isSmith)return!0;var K=this.sectorInRad,te=this.vangles,Y=this.angularAxis.c2g(ue.theta),V=this.radialAxis,ee=V.c2l(ue.r),ne=V._rl,Z=te?C.isPtInsidePolygon:T.isPtInsideSector;return Z(ee,Y,ne,K,te)},G.pathArc=function(ue){var K=this.sectorInRad,te=this.vangles,Y=te?C.pathPolygon:T.pathArc;return Y(ue,K[0],K[1],te)},G.pathSector=function(ue){var K=this.sectorInRad,te=this.vangles,Y=te?C.pathPolygon:T.pathSector;return Y(ue,K[0],K[1],te)},G.pathAnnulus=function(ue,K){var te=this.sectorInRad,Y=this.vangles,V=Y?C.pathPolygonAnnulus:T.pathAnnulus;return V(ue,K,te[0],te[1],Y)},G.pathSubplot=function(){var ue=this.innerRadius,K=this.radius;return ue?this.pathAnnulus(ue,K):this.pathSector(K)},G.fillViewInitialKey=function(ue,K){ue in this.viewInitial||(this.viewInitial[ue]=K)};function Q(ue){var K=ue.ticks+String(ue.ticklen)+String(ue.showticklabels);return"side"in ue&&(K+=ue.side),K}function X(ue){var K=ue[0],te=ue[1],Y=te-K,V=R(K,360),ee=V+Y,ne=Math.cos(O(V)),Z=Math.sin(O(V)),q=Math.cos(O(ee)),ie=Math.sin(O(ee)),se,ae,oe,be;return V<=90&&ee>=90||V>90&&ee>=450?be=1:Z<=0&&ie<=0?be=0:be=Math.max(Z,ie),V<=180&&ee>=180||V>180&&ee>=540?se=-1:ne>=0&&q>=0?se=0:se=Math.min(ne,q),V<=270&&ee>=270||V>270&&ee>=630?ae=-1:Z>=0&&ie>=0?ae=0:ae=Math.min(Z,ie),ee>=360?oe=1:ne<=0&&q<=0?oe=0:oe=Math.max(ne,q),[se,ae,oe,be]}function j(ue,K){var te=function(V){return T.angleDist(ue,V)},Y=T.findIndexOfMin(K,te);return K[Y]}function re(ue,K,te){return K?(ue.attr("display",null),ue.attr(te)):ue&&ue.attr("display","none"),ue}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(o,U,H){var w=o("../../lib"),f=o("../cartesian/set_convert"),M=w.deg2rad,T=w.rad2deg;U.exports=function(h,i,s){switch(f(h,s),h._id){case"x":case"radialaxis":e(h,i);break;case"angularaxis":r(h,i);break}};function e(t,h){var i=h._subplot;t.setGeometry=function(){var s=t._rl[0],y=t._rl[1],d=i.innerRadius,p=(i.radius-d)/(y-s),c=d/p,m=s>y?function(l){return l<=0}:function(l){return l>=0};t.c2g=function(l){var x=t.c2l(l)-s;return(m(x)?x:0)+c},t.g2c=function(l){return t.l2c(l+s-c)},t.g2p=function(l){return l*p},t.c2p=function(l){return t.g2p(t.c2g(l))}}}function a(t,h){return h==="degrees"?M(t):t}function n(t,h){return h==="degrees"?T(t):t}function r(t,h){var i=t.type;if(i==="linear"){var s=t.d2c,y=t.c2d;t.d2c=function(d,p){return a(s(d),p)},t.c2d=function(d,p){return y(n(d,p))}}t.makeCalcdata=function(d,p){var c=d[p],m=d._length,l,x,u=function(v){return t.d2c(v,d.thetaunit)};if(c){if(w.isTypedArray(c)&&i==="linear"){if(m===c.length)return c;if(c.subarray)return c.subarray(0,m)}for(l=new Array(m),x=0;x<m;x++)l[x]=u(c[x])}else{var A=p+"0",_="d"+p,g=A in d?u(d[A]):0,b=d[_]?u(d[_]):(t.period||2*Math.PI)/m;for(l=new Array(m),x=0;x<m;x++)l[x]=g+x*b}return l},t.setGeometry=function(){var d=h.sector,p=d.map(M),c={clockwise:-1,counterclockwise:1}[t.direction],m=M(t.rotation),l=function(C){return c*C+m},x=function(C){return(C-m)/c},u,A,_,g;switch(i){case"linear":A=u=w.identity,g=M,_=T,t.range=w.isFullCircle(p)?[d[0],d[0]+360]:p.map(x).map(T);break;case"category":var b=t._categories.length,v=t.period?Math.max(t.period,b):b;v===0&&(v=1),A=g=function(C){return C*2*Math.PI/v},u=_=function(C){return C*v/Math.PI/2},t.range=[0,v];break}t.c2g=function(C){return l(A(C))},t.g2c=function(C){return u(x(C))},t.t2g=function(C){return l(g(C))},t.g2t=function(C){return _(x(C))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(o,U,H){U.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(o,U,H){function w(n){return n<0?-1:n>0?1:0}function f(n){var r=n[0],t=n[1];if(!isFinite(r)||!isFinite(t))return[1,0];var h=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/h,2*t/h]}function M(n,r){var t=r[0],h=r[1];return[t*n.radius+n.cx,-h*n.radius+n.cy]}function T(n,r){return r*n.radius}function e(n,r,t,h){var i=M(n,f([t,r])),s=i[0],y=i[1],d=M(n,f([h,r])),p=d[0],c=d[1];if(r===0)return["M"+s+","+y,"L"+p+","+c].join(" ");var m=T(n,1/Math.abs(r));return["M"+s+","+y,"A"+m+","+m+" 0 0,"+(r<0?1:0)+" "+p+","+c].join(" ")}function a(n,r,t,h){var i=T(n,1/(r+1)),s=M(n,f([r,t])),y=s[0],d=s[1],p=M(n,f([r,h])),c=p[0],m=p[1];if(w(t)!==w(h)){var l=M(n,f([r,0])),x=l[0],u=l[1];return["M"+y+","+d,"A"+i+","+i+" 0 0,"+(0<t?0:1)+" "+x+","+u,"A"+i+","+i+" 0 0,"+(h<0?0:1)+c+","+m].join(" ")}return["M"+y+","+d,"A"+i+","+i+" 0 0,"+(h<t?0:1)+" "+c+","+m].join(" ")}U.exports={smith:f,reactanceArc:e,resistanceArc:a,smithTransform:M}},{}],638:[function(o,U,H){var w=o("../get_data").getSubplotCalcData,f=o("../../lib").counterRegex,M=o("../polar/polar"),T=o("./constants"),e=T.attr,a=T.name,n=f(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(i){for(var s=i._fullLayout,y=i.calcdata,d=s._subplots[a],p=0;p<d.length;p++){var c=d[p],m=w(y,a,c),l=s[c]._subplot;l||(l=M(i,c,!0),s[c]._subplot=l),l.plot(m,s,i._promises)}}function h(i,s,y,d){for(var p=d._subplots[a]||[],c=0;c<p.length;c++){var m=p[c],l=d[m]._subplot;if(!s[m]&&!!l){l.framework.remove();for(var x in l.clipPaths)l.clipPaths[x].remove()}}}U.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:o("./layout_attributes"),supplyLayoutDefaults:o("./layout_defaults"),plot:t,clean:h,toSVG:o("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(o,U,H){var w=o("../../components/color/attributes"),f=o("../cartesian/layout_attributes"),M=o("../domain").attributes,T=o("../../lib").extendFlat,e=o("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),n=e({ticklen:f.ticklen,tickwidth:T({},f.tickwidth,{dflt:2}),tickcolor:f.tickcolor,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,tickfont:f.tickfont,tickformat:f.tickformat,hoverformat:f.hoverformat,layer:f.layer},"plot","from-root"),r=T({visible:T({},f.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},f.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,n),t=T({visible:T({},f.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:f.ticks,editType:"calc"},a,n);U.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:w.background},realaxis:r,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../plot_api/plot_template"),T=o("../subplot_defaults"),e=o("../get_data").getSubplotData,a=o("../cartesian/prefix_suffix_defaults"),n=o("../cartesian/tick_label_defaults"),r=o("../cartesian/line_grid_defaults"),t=o("../cartesian/set_convert"),h=o("./layout_attributes"),i=o("./constants"),s=i.axisNames,y=p(function(c){return c.slice().reverse().map(function(m){return-m}).concat([0]).concat(c)},String);function d(c,m,l,x){var u=l("bgcolor");x.bgColor=f.combine(u,x.paper_bgcolor);var A=e(x.fullData,i.name,x.id),_=x.layoutOut,g;function b(G,Q){return l(g+"."+G,Q)}for(var v=0;v<s.length;v++){g=s[v],w.isPlainObject(c[g])||(c[g]={});var C=c[g],S=M.newContainer(m,g);S._id=S._name=g,S._attr=x.id+"."+g,S._traceIndices=A.map(function(G){return G._expandedIndex});var k=b("visible");if(S.type="linear",t(S,_),a(C,S,b,S.type),k){var E=g==="realaxis";if(E&&b("side"),E)b("tickvals");else{var F=y(m.realaxis.tickvals||h.realaxis.tickvals.dflt);b("tickvals",F)}var I,D,R,O,z=x.font||{};k&&(I=b("color"),D=I===C.color?I:z.color,R=z.size,O=z.family),n(C,S,b,S.type,{noTicklabelstep:!0,noAng:!E,noExp:!0,font:{color:D,size:R,family:O}}),w.coerce2(c,m,h,g+".ticklen"),w.coerce2(c,m,h,g+".tickwidth"),w.coerce2(c,m,h,g+".tickcolor",m.color);var B=b("ticks");B||(delete m[g].ticklen,delete m[g].tickwidth,delete m[g].tickcolor),r(C,S,b,{dfltColor:I,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[g]}),b("layer")}b("hoverformat"),delete S.type,S._input=C}}U.exports=function(m,l,x){T(m,l,x,{noUirevision:!0,type:i.name,attributes:h,handleDefaults:d,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:x,layoutOut:l})};function p(c,m){var l={};return function(x){var u=m?m(x):x;if(u in l)return l[u];var A=c(x);return l[u]=A,A}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(o,U,H){var w=o("../lib"),f=o("../plot_api/plot_template"),M=o("./domain").defaults;U.exports=function(e,a,n,r){var t=r.type,h=r.attributes,i=r.handleDefaults,s=r.partition||"x",y=a._subplots[t],d=y.length,p=d&&y[0].replace(/\d+$/,""),c,m;function l(_,g){return w.coerce(c,m,h,_,g)}for(var x=0;x<d;x++){var u=y[x];e[u]?c=e[u]:c=e[u]={},m=f.newContainer(a,u,p),r.noUirevision||l("uirevision",a.uirevision);var A={};A[s]=[x/d,(x+1)/d],M(m,a,l,A),r.id=u,i(c,m,l,r)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(o,U,H){var w=o("../constants/docs");w.FORMAT_LINK,w.DATE_FORMAT_LINK;function f(M){var T=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var a=[],n=0;n<e.length;n++)a[n]="`"+e[n]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}H.hovertemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"none"};return M.arrayOk!==!1&&(e.arrayOk=!0),e},H.texttemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"calc"};return M.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(o,U,H){var w=o("./ternary"),f=o("../../plots/get_data").getSubplotCalcData,M=o("../../lib").counterRegex,T="ternary";H.name=T;var e=H.attr="subplot";H.idRoot=T,H.idRegex=H.attrRegex=M(T);var a=H.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},H.layoutAttributes=o("./layout_attributes"),H.supplyLayoutDefaults=o("./layout_defaults"),H.plot=function(r){for(var t=r._fullLayout,h=r.calcdata,i=t._subplots[T],s=0;s<i.length;s++){var y=i[s],d=f(h,T,y),p=t[y]._subplot;p||(p=new w({id:y,graphDiv:r,container:t._ternarylayer.node()},t),t[y]._subplot=p),p.plot(d,t,r._promises)}},H.clean=function(n,r,t,h){for(var i=h._subplots[T]||[],s=0;s<i.length;s++){var y=i[s],d=h[y]._subplot;!r[y]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(o,U,H){var w=o("../../components/color/attributes"),f=o("../domain").attributes,M=o("../cartesian/layout_attributes"),T=o("../../plot_api/edit_types").overrideAll,e=o("../../lib/extend").extendFlat,a={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},n=U.exports=T({domain:f({name:"ternary"}),bgcolor:{valType:"color",dflt:w.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(o,U,H){var w=o("../../components/color"),f=o("../../plot_api/plot_template"),M=o("../../lib"),T=o("../subplot_defaults"),e=o("../cartesian/tick_label_defaults"),a=o("../cartesian/prefix_suffix_defaults"),n=o("../cartesian/tick_mark_defaults"),r=o("../cartesian/tick_value_defaults"),t=o("../cartesian/line_grid_defaults"),h=o("./layout_attributes"),i=["aaxis","baxis","caxis"];U.exports=function(p,c,m){T(p,c,m,{type:"ternary",attributes:h,handleDefaults:s,font:c.font,paper_bgcolor:c.paper_bgcolor})};function s(d,p,c,m){var l=c("bgcolor"),x=c("sum");m.bgColor=w.combine(l,m.paper_bgcolor);for(var u,A,_,g=0;g<i.length;g++)u=i[g],A=d[u]||{},_=f.newContainer(p,u),_._name=u,y(A,_,m,p);var b=p.aaxis,v=p.baxis,C=p.caxis;b.min+v.min+C.min>=x&&(b.min=0,v.min=0,C.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function y(d,p,c,m){var l=h[p._name];function x(S,k){return M.coerce(d,p,l,S,k)}x("uirevision",m.uirevision),p.type="linear";var u=x("color"),A=u!==l.color.dflt?u:c.font.color,_=p._name,g=_.charAt(0).toUpperCase(),b="Component "+g,v=x("title.text",b);p._hovertitle=v===b?v:g,M.coerceFont(x,"title.font",{family:c.font.family,size:M.bigFont(c.font.size),color:A}),x("min"),r(d,p,x,"linear"),a(d,p,x,"linear"),e(d,p,x,"linear"),n(d,p,x,{outerTicks:!0});var C=x("showticklabels");C&&(M.coerceFont(x,"tickfont",{family:c.font.family,size:c.font.size,color:A}),x("tickangle"),x("tickformat")),t(d,p,x,{dfltColor:u,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(o,U,H){var w=o("@plotly/d3"),f=o("tinycolor2"),M=o("../../registry"),T=o("../../lib"),e=T.strTranslate,a=T._,n=o("../../components/color"),r=o("../../components/drawing"),t=o("../cartesian/set_convert"),h=o("../../lib/extend").extendFlat,i=o("../plots"),s=o("../cartesian/axes"),y=o("../../components/dragelement"),d=o("../../components/fx"),p=o("../../components/dragelement/helpers"),c=p.freeMode,m=p.rectMode,l=o("../../components/titles"),x=o("../../components/selections").prepSelect,u=o("../../components/selections").selectOnClick,A=o("../../components/selections").clearOutline,_=o("../../components/selections").clearSelectionsCache,g=o("../cartesian/constants");function b(z,B){this.id=z.id,this.graphDiv=z.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}U.exports=b;var v=b.prototype;v.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},v.plot=function(z,B){var G=this,Q=B[G.id],X=B._size;G._hasClipOnAxisFalse=!1;for(var j=0;j<z.length;j++){var re=z[j][0].trace;if(re.cliponaxis===!1){G._hasClipOnAxisFalse=!0;break}}G.updateLayers(Q),G.adjustLayout(Q,X),i.generalUpdatePerTraceModule(G.graphDiv,G,z,Q),G.layers.plotbg.select("path").call(n.fill,Q.bgcolor)},v.makeFramework=function(z){var B=this,G=B.graphDiv,Q=z[B.id],X=B.clipId="clip"+B.layoutId+B.id,j=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=T.ensureSingleById(z._clips,"clipPath",X,function(re){re.append("path").attr("d","M0,0Z")}),B.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",j,function(re){re.append("path").attr("d","M0,0Z")}),B.plotContainer=T.ensureSingle(B.container,"g",B.id),B.updateLayers(Q),r.setClipUrl(B.layers.backplot,X,G),r.setClipUrl(B.layers.grids,X,G)},v.updateLayers=function(z){var B=this,G=B.layers,Q=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&Q.push("aaxis","aline"),z.baxis.layer==="below traces"&&Q.push("baxis","bline"),z.caxis.layer==="below traces"&&Q.push("caxis","cline"),Q.push("frontplot"),z.aaxis.layer==="above traces"&&Q.push("aaxis","aline"),z.baxis.layer==="above traces"&&Q.push("baxis","bline"),z.caxis.layer==="above traces"&&Q.push("caxis","cline");var X=B.plotContainer.selectAll("g.toplevel").data(Q,String),j=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function(re){return"toplevel "+re}).each(function(re){var ue=w.select(this);G[re]=ue,re==="frontplot"?ue.append("g").classed("scatterlayer",!0):re==="backplot"?ue.append("g").classed("maplayer",!0):re==="plotbg"?ue.append("path").attr("d","M0,0Z"):re==="aline"||re==="bline"||re==="cline"?ue.append("path"):re==="grids"&&j.forEach(function(K){G[K]=ue.append("g").classed("grid "+K,!0)})}),X.order()};var C=Math.sqrt(4/3);v.adjustLayout=function(z,B){var G=this,Q=z.domain,X=(Q.x[0]+Q.x[1])/2,j=(Q.y[0]+Q.y[1])/2,re=Q.x[1]-Q.x[0],ue=Q.y[1]-Q.y[0],K=re*B.w,te=ue*B.h,Y=z.sum,V=z.aaxis.min,ee=z.baxis.min,ne=z.caxis.min,Z,q,ie,se,ae,oe;K>C*te?(se=te,ie=se*C):(ie=K,se=ie/C),ae=re*ie/K,oe=ue*se/te,Z=B.l+B.w*X-ie/2,q=B.t+B.h*(1-j)-se/2,G.x0=Z,G.y0=q,G.w=ie,G.h=se,G.sum=Y,G.xaxis={type:"linear",range:[V+2*ne-Y,Y-V-2*ee],domain:[X-ae/2,X+ae/2],_id:"x"},t(G.xaxis,G.graphDiv._fullLayout),G.xaxis.setScale(),G.xaxis.isPtWithinRange=function(Ee){return Ee.a>=G.aaxis.range[0]&&Ee.a<=G.aaxis.range[1]&&Ee.b>=G.baxis.range[1]&&Ee.b<=G.baxis.range[0]&&Ee.c>=G.caxis.range[1]&&Ee.c<=G.caxis.range[0]},G.yaxis={type:"linear",range:[V,Y-ee-ne],domain:[j-oe/2,j+oe/2],_id:"y"},t(G.yaxis,G.graphDiv._fullLayout),G.yaxis.setScale(),G.yaxis.isPtWithinRange=function(){return!0};var be=G.yaxis.domain[0],ce=G.aaxis=h({},z.aaxis,{range:[V,Y-ee-ne],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[be,be+oe*C],anchor:"free",position:0,_id:"y",_length:ie});t(ce,G.graphDiv._fullLayout),ce.setScale();var de=G.baxis=h({},z.baxis,{range:[Y-V-ne,ee],side:"bottom",domain:G.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});t(de,G.graphDiv._fullLayout),de.setScale();var ye=G.caxis=h({},z.caxis,{range:[Y-V-ee,ne],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[be,be+oe*C],anchor:"free",position:0,_id:"y",_length:ie});t(ye,G.graphDiv._fullLayout),ye.setScale();var ge="M"+Z+","+(q+se)+"h"+ie+"l-"+ie/2+",-"+se+"Z";G.clipDef.select("path").attr("d",ge),G.layers.plotbg.select("path").attr("d",ge);var me="M0,"+se+"h"+ie+"l-"+ie/2+",-"+se+"Z";G.clipDefRelative.select("path").attr("d",me);var Me=e(Z,q);G.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Me),G.clipDefRelative.select("path").attr("transform",null);var Le=e(Z-de._offset,q+se);G.layers.baxis.attr("transform",Le),G.layers.bgrid.attr("transform",Le);var Oe=e(Z+ie/2,q)+"rotate(30)"+e(0,-ce._offset);G.layers.aaxis.attr("transform",Oe),G.layers.agrid.attr("transform",Oe);var _e=e(Z+ie/2,q)+"rotate(-30)"+e(0,-ye._offset);G.layers.caxis.attr("transform",_e),G.layers.cgrid.attr("transform",_e),G.drawAxes(!0),G.layers.aline.select("path").attr("d",ce.showline?"M"+Z+","+(q+se)+"l"+ie/2+",-"+se:"M0,0").call(n.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),G.layers.bline.select("path").attr("d",de.showline?"M"+Z+","+(q+se)+"h"+ie:"M0,0").call(n.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),G.layers.cline.select("path").attr("d",ye.showline?"M"+(Z+ie/2)+","+q+"l"+ie/2+","+se:"M0,0").call(n.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),G.graphDiv._context.staticPlot||G.initInteractions(),r.setClipUrl(G.layers.frontplot,G._hasClipOnAxisFalse?null:G.clipId,G.graphDiv)},v.drawAxes=function(z){var B=this,G=B.graphDiv,Q=B.id.substr(7)+"title",X=B.layers,j=B.aaxis,re=B.baxis,ue=B.caxis;if(B.drawAx(j),B.drawAx(re),B.drawAx(ue),z){var K=Math.max(j.showticklabels?j.tickfont.size/2:0,(ue.showticklabels?ue.tickfont.size*.75:0)+(ue.ticks==="outside"?ue.ticklen*.87:0)),te=(re.showticklabels?re.tickfont.size:0)+(re.ticks==="outside"?re.ticklen:0)+3;X["a-title"]=l.draw(G,"a"+Q,{propContainer:j,propName:B.id+".aaxis.title",placeholder:a(G,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-j.title.font.size/3-K,"text-anchor":"middle"}}),X["b-title"]=l.draw(G,"b"+Q,{propContainer:re,propName:B.id+".baxis.title",placeholder:a(G,"Click to enter Component B title"),attributes:{x:B.x0-te,y:B.y0+B.h+re.title.font.size*.83+te,"text-anchor":"middle"}}),X["c-title"]=l.draw(G,"c"+Q,{propContainer:ue,propName:B.id+".caxis.title",placeholder:a(G,"Click to enter Component C title"),attributes:{x:B.x0+B.w+te,y:B.y0+B.h+ue.title.font.size*.83+te,"text-anchor":"middle"}})}},v.drawAx=function(z){var B=this,G=B.graphDiv,Q=z._name,X=Q.charAt(0),j=z._id,re=B.layers[Q],ue=30,K=X+"tickLayout",te=S(z);B[K]!==te&&(re.selectAll("."+j+"tick").remove(),B[K]=te),z.setScale();var Y=s.calcTicks(z),V=s.clipEnds(z,Y),ee=s.makeTransTickFn(z),ne=s.getTickSigns(z)[2],Z=T.deg2rad(ue),q=ne*(z.linewidth||1)/2,ie=ne*z.ticklen,se=B.w,ae=B.h,oe=X==="b"?"M0,"+q+"l"+Math.sin(Z)*ie+","+Math.cos(Z)*ie:"M"+q+",0l"+Math.cos(Z)*ie+","+-Math.sin(Z)*ie,be={a:"M0,0l"+ae+",-"+se/2,b:"M0,0l-"+se/2+",-"+ae,c:"M0,0l-"+ae+","+se/2}[X];s.drawTicks(G,z,{vals:z.ticks==="inside"?V:Y,layer:re,path:oe,transFn:ee,crisp:!1}),s.drawGrid(G,z,{vals:V,layer:B.layers[X+"grid"],path:be,transFn:ee,crisp:!1}),s.drawLabels(G,z,{vals:Y,layer:re,transFn:ee,labelFns:s.makeLabelFns(z,0,ue)})};function S(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var k=g.MINZOOM/2+.87,E="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",F="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",I="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;v.clearOutline=function(){_(this.dragOptions),A(this.dragOptions.gd)},v.initInteractions=function(){var z=this,B=z.layers.plotbg.select("path").node(),G=z.graphDiv,Q=G._fullLayout._zoomlayer,X,j;this.dragOptions={element:B,gd:G,plotinfo:{id:z.id,domain:G._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(Le,Oe,_e){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],X=G._fullLayout._invScaleX,j=G._fullLayout._invScaleY;var Ee=z.dragOptions.dragmode=G._fullLayout.dragmode;c(Ee)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Ee==="zoom"?(z.dragOptions.moveFn=de,z.dragOptions.clickFn=se,z.dragOptions.doneFn=ye,ae(Le,Oe,_e)):Ee==="pan"?(z.dragOptions.moveFn=me,z.dragOptions.clickFn=se,z.dragOptions.doneFn=Me,ge(),z.clearOutline(G)):(m(Ee)||c(Ee))&&x(Le,Oe,_e,z.dragOptions,Ee)}};var re,ue,K,te,Y,V,ee,ne,Z,q;function ie(Le){var Oe={};return Oe[z.id+".aaxis.min"]=Le.a,Oe[z.id+".baxis.min"]=Le.b,Oe[z.id+".caxis.min"]=Le.c,Oe}function se(Le,Oe){var _e=G._fullLayout.clickmode;O(G),Le===2&&(G.emit("plotly_doubleclick",null),M.call("_guiRelayout",G,ie({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&Le===1&&u(Oe,G,[z.xaxis],[z.yaxis],z.id,z.dragOptions),_e.indexOf("event")>-1&&d.click(G,Oe,z.id)}function ae(Le,Oe,_e){var Ee=B.getBoundingClientRect();re=Oe-Ee.left,ue=_e-Ee.top,G._fullLayout._calcInverseTransform(G);var Ze=G._fullLayout._invTransform,Ge=T.apply3DTransform(Ze)(re,ue);re=Ge[0],ue=Ge[1],K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},Y=K,te=z.aaxis.range[1]-K.a,V=f(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),ee="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",ne=!1,Z=Q.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),q=Q.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(G)}function oe(Le,Oe){return 1-Oe/z.h}function be(Le,Oe){return 1-(Le+(z.h-Oe)/Math.sqrt(3))/z.w}function ce(Le,Oe){return(Le-(z.h-Oe)/Math.sqrt(3))/z.w}function de(Le,Oe){var _e=re+Le*X,Ee=ue+Oe*j,Ze=Math.max(0,Math.min(1,oe(re,ue),oe(_e,Ee))),Ge=Math.max(0,Math.min(1,be(re,ue),be(_e,Ee))),Fe=Math.max(0,Math.min(1,ce(re,ue),ce(_e,Ee))),Re=(Ze/2+Fe)*z.w,We=(1-Ze/2-Ge)*z.w,xt=(Re+We)/2,Nt=We-Re,tr=(1-Ze)*z.h,Vt=tr-Nt/C;Nt<g.MINZOOM?(Y=K,Z.attr("d",ee),q.attr("d","M0,0Z")):(Y={a:K.a+Ze*te,b:K.b+Ge*te,c:K.c+Fe*te},Z.attr("d",ee+"M"+Re+","+tr+"H"+We+"L"+xt+","+Vt+"L"+Re+","+tr+"Z"),q.attr("d","M"+re+","+ue+D+"M"+Re+","+tr+E+"M"+We+","+tr+F+"M"+xt+","+Vt+I)),ne||(Z.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),q.transition().style("opacity",1).duration(200),ne=!0),G.emit("plotly_relayouting",ie(Y))}function ye(){O(G),Y!==K&&(M.call("_guiRelayout",G,ie(Y)),R&&G.data&&G._context.showTips&&(T.notifier(a(G,"Double-click to zoom back out"),"long"),R=!1))}function ge(){K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},Y=K}function me(Le,Oe){var _e=Le/z.xaxis._m,Ee=Oe/z.yaxis._m;Y={a:K.a-Ee,b:K.b+(_e+Ee)/2,c:K.c-(_e-Ee)/2};var Ze=[Y.a,Y.b,Y.c].sort(T.sorterAsc),Ge={a:Ze.indexOf(Y.a),b:Ze.indexOf(Y.b),c:Ze.indexOf(Y.c)};Ze[0]<0&&(Ze[1]+Ze[0]/2<0?(Ze[2]+=Ze[0]+Ze[1],Ze[0]=Ze[1]=0):(Ze[2]+=Ze[0]/2,Ze[1]+=Ze[0]/2,Ze[0]=0),Y={a:Ze[Ge.a],b:Ze[Ge.b],c:Ze[Ge.c]},Oe=(K.a-Y.a)*z.yaxis._m,Le=(K.c-Y.c-K.b+Y.b)*z.xaxis._m);var Fe=e(z.x0+Le,z.y0+Oe);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Fe);var Re=e(-Le,-Oe);z.clipDefRelative.select("path").attr("transform",Re),z.aaxis.range=[Y.a,z.sum-Y.b-Y.c],z.baxis.range=[z.sum-Y.a-Y.c,Y.b],z.caxis.range=[z.sum-Y.a-Y.b,Y.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,z),G.emit("plotly_relayouting",ie(Y))}function Me(){M.call("_guiRelayout",G,ie(Y))}B.onmousemove=function(Le){d.hover(G,Le,z.id),G._fullLayout._lasthover=B,G._fullLayout._hoversubplot=z.id},B.onmouseout=function(Le){G._dragging||y.unhover(G,Le)},y.init(this.dragOptions)};function O(z){w.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(o,U,H){var w=o("./lib/loggers"),f=o("./lib/noop"),M=o("./lib/push_unique"),T=o("./lib/is_plain_object"),e=o("./lib/dom").addStyleRule,a=o("./lib/extend"),n=o("./plots/attributes"),r=o("./plots/layout_attributes"),t=a.extendFlat,h=a.extendDeepAll;H.modules={},H.allCategories={},H.allTypes=[],H.subplotsRegistry={},H.transformsRegistry={},H.componentsRegistry={},H.layoutArrayContainers=[],H.layoutArrayRegexes=[],H.traceLayoutAttributes={},H.localeRegistry={},H.apiMethodRegistry={},H.collectableSubplotTypes=null,H.register=function(_){if(H.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var g=0;g<_.length;g++){var b=_[g];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":i(b);break;case"transform":d(b);break;case"component":y(b);break;case"locale":p(b);break;case"apiMethod":var v=b.name;H.apiMethodRegistry[v]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},H.getModule=function(A){var _=H.modules[u(A)];return _?_._module:!1},H.traceIs=function(A,_){if(A=u(A),A==="various")return!1;var g=H.modules[A];return g||(A&&w.log("Unrecognized trace type "+A+"."),g=H.modules[n.type.dflt]),!!g.categories[_]},H.getTransformIndices=function(A,_){for(var g=[],b=A.transforms||[],v=0;v<b.length;v++)b[v].type===_&&g.push(v);return g},H.hasTransform=function(A,_){for(var g=A.transforms||[],b=0;b<g.length;b++)if(g[b].type===_)return!0;return!1},H.getComponentMethod=function(A,_){var g=H.componentsRegistry[A];return g&&g[_]||f},H.call=function(){var A=arguments[0],_=[].slice.call(arguments,1);return H.apiMethodRegistry[A].apply(null,_)};function i(A){var _=A.name,g=A.categories,b=A.meta;if(H.modules[_]){w.log("Type "+_+" already registered");return}H.subplotsRegistry[A.basePlotModule.name]||s(A.basePlotModule);for(var v={},C=0;C<g.length;C++)v[g[C]]=!0,H.allCategories[g[C]]=!0;H.modules[_]={_module:A,categories:v},b&&Object.keys(b).length&&(H.modules[_].meta=b),H.allTypes.push(_);for(var S in H.componentsRegistry)m(S,_);A.layoutAttributes&&t(H.traceLayoutAttributes,A.layoutAttributes);var k=A.basePlotModule,E=k.name;if(E==="mapbox"){var F=k.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(E==="geo"||E==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(A){var _=A.name;if(H.subplotsRegistry[_]){w.log("Plot type "+_+" already registered.");return}c(A),H.subplotsRegistry[_]=A;for(var g in H.componentsRegistry)x(g,A.name)}function y(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var _=A.name;H.componentsRegistry[_]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&M(H.layoutArrayContainers,_),c(A));for(var g in H.modules)m(_,g);for(var b in H.subplotsRegistry)x(_,b);for(var v in H.transformsRegistry)l(_,v);A.schema&&A.schema.layout&&h(r,A.schema.layout)}function d(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+A.name,g=typeof A.transform=="function",b=typeof A.calcTransform=="function";if(!g&&!b)throw new Error(_+" is missing a *transform* or *calcTransform* method.");g&&b&&w.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(A.attributes)||w.log(_+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&w.log(_+" registered without a *supplyDefaults* method."),H.transformsRegistry[A.name]=A;for(var v in H.componentsRegistry)l(v,A.name)}function p(A){var _=A.name,g=_.split("-")[0],b=A.dictionary,v=A.format,C=b&&Object.keys(b).length,S=v&&Object.keys(v).length,k=H.localeRegistry,E=k[_];if(E||(k[_]=E={}),g!==_){var F=k[g];F||(k[g]=F={}),C&&F.dictionary===E.dictionary&&(F.dictionary=b),S&&F.format===E.format&&(F.format=v)}C&&(E.dictionary=b),S&&(E.format=v)}function c(A){if(A.layoutAttributes){var _=A.layoutAttributes._arrayAttrRegexps;if(_)for(var g=0;g<_.length;g++)M(H.layoutArrayRegexes,_[g])}}function m(A,_){var g=H.componentsRegistry[A].schema;if(!(!g||!g.traces)){var b=g.traces[_];b&&h(H.modules[_]._module.attributes,b)}}function l(A,_){var g=H.componentsRegistry[A].schema;if(!(!g||!g.transforms)){var b=g.transforms[_];b&&h(H.transformsRegistry[_].attributes,b)}}function x(A,_){var g=H.componentsRegistry[A].schema;if(!(!g||!g.subplots)){var b=H.subplotsRegistry[_],v=b.layoutAttributes,C=b.attr==="subplot"?b.name:b.attr;Array.isArray(C)&&(C=C[0]);var S=g.subplots[C];v&&S&&h(v,S)}}function u(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(o,U,H){var w=o("../registry"),f=o("../lib"),M=f.extendFlat,T=f.extendDeep;function e(n){var r;switch(n){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function a(n){var r=["xaxis","yaxis","zaxis"];return r.indexOf(n.slice(0,5))>-1}U.exports=function(r,t){var h,i=r.data,s=r.layout,y=T([],i),d=T({},s,e(t.tileClass)),p=r._context||{};if(t.width&&(d.width=t.width),t.height&&(d.height=t.height),t.tileClass==="thumbnail"||t.tileClass==="themes__thumb"){d.annotations=[];var c=Object.keys(d);for(h=0;h<c.length;h++)a(c[h])&&(d[c[h]].title={text:""});for(h=0;h<y.length;h++){var m=y[h];m.showscale=!1,m.marker&&(m.marker.showscale=!1),w.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(t.annotations))for(h=0;h<t.annotations.length;h++)d.annotations.push(t.annotations[h]);var l=Object.keys(d).filter(function(g){return g.match(/^scene\d*$/)});if(l.length){var x={};for(t.tileClass==="thumbnail"&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),h=0;h<l.length;h++){var u=d[l[h]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),M(u.xaxis,x),M(u.yaxis,x),M(u.zaxis,x),u._scene=null}}var A=document.createElement("div");t.tileClass&&(A.className=t.tileClass);var _={gd:A,td:A,layout:d,data:y,config:{staticPlot:t.staticPlot===void 0?!0:t.staticPlot,plotGlPixelRatio:t.plotGlPixelRatio===void 0?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return t.setBackground!=="transparent"&&(_.config.setBackground=t.setBackground||"opaque"),_.gd.defaultLayout=e(t.tileClass),_}},{"../lib":515,"../registry":647}],649:[function(o,U,H){var w=o("../lib"),f=o("../plot_api/to_image"),M=o("./filesaver"),T=o("./helpers");function e(a,n){var r;return w.isPlainObject(a)||(r=w.getGraphDiv(a)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(t,h){r&&r._snapshotInProgress&&h(new Error("Snapshotting already in progress.")),w.isIE()&&n.format!=="svg"&&h(new Error(T.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var i=f(a,n),s=n.filename||a.fn||"newplot";s+="."+n.format.replace("-","."),i.then(function(y){return r&&(r._snapshotInProgress=!1),M(y,s,n.format)}).then(function(y){t(y)}).catch(function(y){r&&(r._snapshotInProgress=!1),h(y)})})}U.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(o,U,H){var w=o("../lib"),f=o("./helpers");function M(T,e,a){var n=document.createElement("a"),r="download"in n,t=new Promise(function(h,i){var s,y;if(w.isIE())return s=f.createBlob(T,"svg"),window.navigator.msSaveBlob(s,e),s=null,h(e);if(r)return s=f.createBlob(T,a),y=f.createObjectURL(s),n.href=y,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),f.revokeObjectURL(y),s=null,h(e);if(w.isSafari()){var d=a==="svg"?",":";base64,";return f.octetStream(d+encodeURIComponent(T)),h(e)}i(new Error("download error"))});return t}U.exports=M},{"../lib":515,"./helpers":651}],651:[function(o,U,H){var w=o("../registry");H.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},H.getRedrawFunc=function(T){return function(){w.getComponentMethod("colorbar","draw")(T)}},H.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},H.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var f=window.URL||window.webkitURL;H.createObjectURL=function(T){return f.createObjectURL(T)},H.revokeObjectURL=function(T){return f.revokeObjectURL(T)},H.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=M(window.atob(T));return new window.Blob([a],{type:"image/"+e})},H.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function M(T){for(var e=T.length,a=new ArrayBuffer(e),n=new Uint8Array(a),r=0;r<e;r++)n[r]=T.charCodeAt(r);return a}H.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,H.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(o,U,H){var w=o("./helpers"),f={getDelay:w.getDelay,getRedrawFunc:w.getRedrawFunc,clone:o("./cloneplot"),toSVG:o("./tosvg"),svgToImg:o("./svgtoimg"),toImage:o("./toimage"),downloadImage:o("./download")};U.exports=f},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(o,U,H){var w=o("../lib"),f=o("events").EventEmitter,M=o("./helpers");function T(e){var a=e.emitter||new f,n=new Promise(function(r,t){var h=window.Image,i=e.svg,s=e.format||"png";if(w.isIE()&&s!=="svg"){var y=new Error(M.MSG_IE_BAD_FORMAT);return t(y),e.promise?n:a.emit("error",y)}var d=e.canvas,p=e.scale||1,c=e.width||300,m=e.height||150,l=p*c,x=p*m,u=d.getContext("2d",{willReadFrequently:!0}),A=new h,_,g;s==="svg"||w.isSafari()?g=M.encodeSVG(i):(_=M.createBlob(i,"svg"),g=M.createObjectURL(_)),d.width=l,d.height=x,A.onload=function(){var b;switch(_=null,M.revokeObjectURL(g),s!=="svg"&&u.drawImage(A,0,0,l,x),s){case"jpeg":b=d.toDataURL("image/jpeg");break;case"png":b=d.toDataURL("image/png");break;case"webp":b=d.toDataURL("image/webp");break;case"svg":b=g;break;default:var v="Image format is not jpeg, png, svg or webp.";if(t(new Error(v)),!e.promise)return a.emit("error",v)}r(b),e.promise||a.emit("success",b)},A.onerror=function(b){if(_=null,M.revokeObjectURL(g),t(b),!e.promise)return a.emit("error",b)},A.src=g});return e.promise?n:a}U.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(o,U,H){var w=o("events").EventEmitter,f=o("../registry"),M=o("../lib"),T=o("./helpers"),e=o("./cloneplot"),a=o("./tosvg"),n=o("./svgtoimg");function r(t,h){var i=new w,s=e(t,{format:"png"}),y=s.gd;y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);function d(){var c=T.getDelay(y._fullLayout);setTimeout(function(){var m=a(y),l=document.createElement("canvas");l.id=M.randstr(),i=n({format:h.format,width:y._fullLayout.width,height:y._fullLayout.height,canvas:l,emitter:i,svg:m}),i.clean=function(){y&&document.body.removeChild(y)}},c)}var p=T.getRedrawFunc(y);return f.call("_doPlot",y,s.data,s.layout,s.config).then(p).then(d).catch(function(c){i.emit("error",c)}),i}U.exports=r},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(o,U,H){var w=o("@plotly/d3"),f=o("../lib"),M=o("../components/drawing"),T=o("../components/color"),e=o("../constants/xmlns_namespaces"),a=/"/g,n="TOBESTRIPPED",r=new RegExp('("'+n+")|("+n+'")',"g");function t(i){var s=w.select("body").append("div").style({display:"none"}).html(""),y=i.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":s.html(d).text()});return s.remove(),y}function h(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}U.exports=function(s,y,d){var p=s._fullLayout,c=p._paper,m=p._toppaper,l=p.width,x=p.height,u;c.insert("rect",":first-child").call(M.setRect,0,0,l,x).call(T.fill,p.paper_bgcolor);var A=p._basePlotModules||[];for(u=0;u<A.length;u++){var _=A[u];_.toSVG&&_.toSVG(s)}if(m){var g=m.node().childNodes,b=Array.prototype.slice.call(g);for(u=0;u<b.length;u++){var v=b[u];v.childNodes.length&&c.node().appendChild(v)}}p._draggers&&p._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=w.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var k=this.style.fontFamily;k&&k.indexOf('"')!==-1&&S.style("font-family",k.replace(a,n))}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=w.select(this),k=this.style.fill;k&&k.indexOf("url(")!==-1&&S.style("fill",k.replace(a,n));var E=this.style.stroke;E&&E.indexOf("url(")!==-1&&S.style("stroke",E.replace(a,n))}),(y==="pdf"||y==="eps")&&c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),y==="svg"&&d&&(c.attr("width",d*l),c.attr("height",d*x),c.attr("viewBox","0 0 "+l+" "+x));var C=new window.XMLSerializer().serializeToString(c.node());return C=t(C),C=h(C),C=C.replace(r,"'"),f.isIE()&&(C=C.replace(/"/gi,"'"),C=C.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),C=C.replace(/(\\')/gi,'"')),C}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo",!0),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":515}],657:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../../plots/template_attributes").texttemplateAttrs,e=o("../../components/colorscale/attributes"),a=o("../../plots/font_attributes"),n=o("./constants"),r=o("../../components/drawing/attributes").pattern,t=o("../../lib/extend").extendFlat,h=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),i=w.marker,s=i.line,y=t({},s.width,{dflt:0}),d=t({width:y,editType:"calc"},e("marker.line")),p=t({line:d,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});U.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),text:w.text,texttemplate:T({editType:"plot"},{keys:n.eventDataKeys}),hovertext:w.hovertext,hovertemplate:M({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},h,{}),insidetextfont:t({},h,{}),outsidetextfont:t({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},w.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:w.selected.marker.opacity,color:w.selected.marker.color,editType:"style"},textfont:w.selected.textfont,editType:"style"},unselected:{marker:{opacity:w.unselected.marker.opacity,color:w.unselected.marker.color,editType:"style"},textfont:w.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../plots/cartesian/align_period"),M=o("../../components/colorscale/helpers").hasColorscale,T=o("../../components/colorscale/calc"),e=o("./arrays_to_calcdata"),a=o("../scatter/calc_selection");U.exports=function(r,t){var h=w.getFromId(r,t.xaxis||"x"),i=w.getFromId(r,t.yaxis||"y"),s,y,d,p,c,m,l={msUTC:!!(t.base||t.base===0)};t.orientation==="h"?(s=h.makeCalcdata(t,"x",l),d=i.makeCalcdata(t,"y"),p=f(t,i,"y",d),c=!!t.yperiodalignment,m="y"):(s=i.makeCalcdata(t,"y",l),d=h.makeCalcdata(t,"x"),p=f(t,h,"x",d),c=!!t.xperiodalignment,m="x"),y=p.vals;for(var x=Math.min(y.length,s.length),u=new Array(x),A=0;A<x;A++)u[A]={p:y[A],s:s[A]},c&&(u[A].orig_p=d[A],u[A][m+"End"]=p.ends[A],u[A][m+"Start"]=p.starts[A]),t.ids&&(u[A].id=String(t.ids[A]));return M(t,"marker")&&T(r,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),M(t,"marker.line")&&T(r,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(u,t),a(u,t),u}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(o,U,H){U.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib").isArrayOrTypedArray,M=o("../../constants/numerical").BADNUM,T=o("../../registry"),e=o("../../plots/cartesian/axes"),a=o("../../plots/cartesian/constraints").getAxisGroup,n=o("./sieve.js");function r(C,S){for(var k=S.xaxis,E=S.yaxis,F=C._fullLayout,I=C._fullData,D=C.calcdata,R=[],O=[],z=0;z<I.length;z++){var B=I[z];if(B.visible===!0&&T.traceIs(B,"bar")&&B.xaxis===k._id&&B.yaxis===E._id&&(B.orientation==="h"?R.push(D[z]):O.push(D[z]),B._computePh))for(var G=C.calcdata[z],Q=0;Q<G.length;Q++)typeof G[Q].ph0=="function"&&(G[Q].ph0=G[Q].ph0()),typeof G[Q].ph1=="function"&&(G[Q].ph1=G[Q].ph1())}var X={xCat:k.type==="category"||k.type==="multicategory",yCat:E.type==="category"||E.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};t(C,k,E,O,X),t(C,E,k,R,X)}function t(C,S,k,E,F){if(!!E.length){var I,D,R,O,z;switch(h(k,E),F.mode){case"overlay":i(S,k,E,F);break;case"group":for(I=[],D=[],R=0;R<E.length;R++)O=E[R],z=O[0].trace,z.offset===void 0?D.push(O):I.push(O);D.length&&s(C,S,k,D,F),I.length&&i(S,k,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<E.length;R++)O=E[R],z=O[0].trace,z.base===void 0?D.push(O):I.push(O);D.length&&y(C,S,k,D,F),I.length&&i(S,k,I,F);break}b(E,S)}}function h(C,S){var k,E;for(k=0;k<S.length;k++){var F=S[k],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,z=C.type==="category"||C.type==="multicategory"?function(){return null}:C.d2c;if(f(D)){for(E=0;E<Math.min(D.length,F.length);E++)R=z(D[E],0,O),w(R)?(F[E].b=+R,F[E].hasB=1):F[E].b=0;for(;E<F.length;E++)F[E].b=0}else{R=z(D,0,O);var B=w(R);for(R=B?R:0,E=0;E<F.length;E++)F[E].b=R,B&&(F[E].hasB=1)}}}function i(C,S,k,E){for(var F=0;F<k.length;F++){var I=k[F],D=new n([I],{posAxis:C,sepNegVal:!1,overlapNoMerge:!E.norm});d(C,D,E),E.norm?(A(D),g(S,D,E)):x(S,D)}}function s(C,S,k,E,F){var I=new n(E,{posAxis:S,sepNegVal:!1,overlapNoMerge:!F.norm});p(C,S,I,F),_(I,S),F.norm?(A(I),g(k,I,F)):x(k,I)}function y(C,S,k,E,F){var I=new n(E,{posAxis:S,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});d(S,I,F),u(k,I,F);for(var D=0;D<E.length;D++)for(var R=E[D],O=0;O<R.length;O++){var z=R[O];if(z.s!==M){var B=z.b+z.s===I.get(z.p,z.s);B&&(z._outmost=!0)}}F.norm&&g(k,I,F)}function d(C,S,k){for(var E=S.minDiff,F=S.traces,I=E*(1-k.gap),D=I,R=D*(1-(k.groupgap||0)),O=-R/2,z=0;z<F.length;z++){var B=F[z],G=B[0].t;G.barwidth=R,G.poffset=O,G.bargroupwidth=I,G.bardelta=E}S.binWidth=F[0][0].t.barwidth/100,c(S),m(C,S),l(C,S)}function p(C,S,k,E){for(var F=C._fullLayout,I=k.positions,D=k.distinctPositions,R=k.minDiff,O=k.traces,z=O.length,B=I.length!==D.length,G=R*(1-E.gap),Q=a(F,S._id)+O[0][0].trace.orientation,X=F._alignmentOpts[Q]||{},j=0;j<z;j++){var re=O[j],ue=re[0].trace,K=X[ue.alignmentgroup]||{},te=Object.keys(K.offsetGroups||{}).length,Y;te?Y=G/te:Y=B?G/z:G;var V=Y*(1-(E.groupgap||0)),ee;te?ee=((2*ue._offsetIndex+1-te)*Y-V)/2:ee=B?((2*j+1-z)*Y-V)/2:-V/2;var ne=re[0].t;ne.barwidth=V,ne.poffset=ee,ne.bargroupwidth=G,ne.bardelta=R}k.binWidth=O[0][0].t.barwidth/100,c(k),m(S,k),l(S,k,B)}function c(C){var S=C.traces,k,E;for(k=0;k<S.length;k++){var F=S[k],I=F[0],D=I.trace,R=I.t,O=D._offset||D.offset,z=R.poffset,B;if(f(O)){for(B=Array.prototype.slice.call(O,0,F.length),E=0;E<B.length;E++)w(B[E])||(B[E]=z);for(E=B.length;E<F.length;E++)B.push(z);R.poffset=B}else O!==void 0&&(R.poffset=O);var G=D._width||D.width,Q=R.barwidth;if(f(G)){var X=Array.prototype.slice.call(G,0,F.length);for(E=0;E<X.length;E++)w(X[E])||(X[E]=Q);for(E=X.length;E<F.length;E++)X.push(Q);if(R.barwidth=X,O===void 0){for(B=[],E=0;E<F.length;E++)B.push(z+(Q-X[E])/2);R.poffset=B}}else G!==void 0&&(R.barwidth=G,O===void 0&&(R.poffset=z+(Q-G)/2))}}function m(C,S){for(var k=S.traces,E=v(C),F=0;F<k.length;F++)for(var I=k[F],D=I[0].t,R=D.poffset,O=Array.isArray(R),z=D.barwidth,B=Array.isArray(z),G=0;G<I.length;G++){var Q=I[G],X=Q.w=B?z[G]:z;Q[E]=Q.p+(O?R[G]:R)+X/2}}function l(C,S,k){var E=S.traces,F=S.minDiff,I=F/2;e.minDtick(C,S.minDiff,S.distinctPositions[0],k);for(var D=0;D<E.length;D++){var R=E[D],O=R[0],z=O.trace,B=[],G,Q,X,j;for(j=0;j<R.length;j++)G=R[j],Q=G.p-I,X=G.p+I,B.push(Q,X);if(z.width||z.offset){var re=O.t,ue=re.poffset,K=re.barwidth,te=Array.isArray(ue),Y=Array.isArray(K);for(j=0;j<R.length;j++){G=R[j];var V=te?ue[j]:ue,ee=Y?K[j]:K;Q=G.p+V,X=Q+ee,B.push(Q,X)}}z._extremes[C._id]=e.findExtremes(C,B,{padded:!1})}}function x(C,S){for(var k=S.traces,E=v(C),F=0;F<k.length;F++){for(var I=k[F],D=I[0].trace,R=[],O=!1,z=0;z<I.length;z++){var B=I[z],G=B.b,Q=G+B.s;B[E]=Q,R.push(Q),B.hasB&&R.push(G),(!B.hasB||!B.b)&&(O=!0)}D._extremes[C._id]=e.findExtremes(C,R,{tozero:O,padded:!0})}}function u(C,S,k){var E=v(C),F=S.traces,I,D,R,O,z,B;for(O=0;O<F.length;O++)if(I=F[O],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)B=I[z],B.s!==M&&S.put(B.p,-.5*B.s);for(O=0;O<F.length;O++){I=F[O],D=I[0].trace,R=D.type==="funnel";var G=[];for(z=0;z<I.length;z++)if(B=I[z],B.s!==M){var Q;R?Q=B.s:Q=B.s+B.b;var X=S.put(B.p,Q),j=X+Q;B.b=X,B[E]=j,k.norm||(G.push(j),B.hasB&&G.push(X))}k.norm||(D._extremes[C._id]=e.findExtremes(C,G,{tozero:!0,padded:!0}))}}function A(C){for(var S=C.traces,k=0;k<S.length;k++)for(var E=S[k],F=0;F<E.length;F++){var I=E[F];I.s!==M&&C.put(I.p,I.b+I.s)}}function _(C,S){for(var k=C.traces,E=0;E<k.length;E++){var F=k[E],I=F[0].trace;if(I.base===void 0)for(var D=new n([F],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var O=F[R];if(O.p!==M){var z=D.put(O.p,O.b+O.s);z&&(O.b=z)}}}}function g(C,S,k){var E=S.traces,F=v(C),I=k.norm==="fraction"?1:100,D=I/1e9,R=C.l2c(C.c2l(0)),O=k.mode==="stack"?I:R;function z(ee){return w(C.c2l(ee))&&(ee<R-D||ee>O+D||!w(R))}for(var B=0;B<E.length;B++){for(var G=E[B],Q=G[0].trace,X=[],j=!1,re=!1,ue=0;ue<G.length;ue++){var K=G[ue];if(K.s!==M){var te=Math.abs(I/S.get(K.p,K.s));K.b*=te,K.s*=te;var Y=K.b,V=Y+K.s;K[F]=V,X.push(V),re=re||z(V),K.hasB&&(X.push(Y),re=re||z(Y)),(!K.hasB||!K.b)&&(j=!0)}}Q._extremes[C._id]=e.findExtremes(C,X,{tozero:j,padded:re})}}function b(C,S){var k=v(S),E={},F,I,D,R=1/0,O=-1/0;for(F=0;F<C.length;F++)for(D=C[F],I=0;I<D.length;I++){var z=D[I].p;w(z)&&(R=Math.min(R,z),O=Math.max(O,z))}var B=1e4/(O-R),G=E.round=function(te){return String(Math.round(B*(te-R)))};for(F=0;F<C.length;F++){D=C[F],D[0].t.extents=E;var Q=D[0].t.poffset,X=Array.isArray(Q);for(I=0;I<D.length;I++){var j=D[I],re=j[k]-j.w/2;if(w(re)){var ue=j[k]+j.w/2,K=G(j.p);E[K]?E[K]=[Math.min(re,E[K][0]),Math.max(ue,E[K][1])]:E[K]=[re,ue]}j.p0=j.p+(X?Q[I]:Q),j.p1=j.p0+j.w,j.s0=j.b,j.s1=j.s0+j.s}}}function v(C){return C._id.charAt(0)}U.exports={crossTraceCalc:r,setGroupPositions:t}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../registry"),T=o("../scatter/xy_defaults"),e=o("../scatter/period_defaults"),a=o("./style_defaults"),n=o("../../plots/cartesian/constraints").getAxisGroup,r=o("./attributes"),t=w.coerceFont;function h(d,p,c,m){function l(g,b){return w.coerce(d,p,r,g,b)}var x=T(d,p,m,l);if(!x){p.visible=!1;return}e(d,p,m,l),l("xhoverformat"),l("yhoverformat"),l("orientation",p.x&&!p.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var u=l("textposition");y(d,p,m,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(d,p,l,c,m);var A=(p.marker.line||{}).color,_=M.getComponentMethod("errorbars","supplyDefaults");_(d,p,A||f.defaultLine,{axis:"y"}),_(d,p,A||f.defaultLine,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(p,l)}function i(d,p,c,m){var l=p.orientation,x=p[{v:"x",h:"y"}[l]+"axis"],u=n(c,x)+l,A=c._alignmentOpts||{},_=m("alignmentgroup"),g=A[u];g||(g=A[u]={});var b=g[_];b?b.traces.push(p):b=g[_]={traces:[p],alignmentIndex:Object.keys(g).length,offsetGroups:{}};var v=m("offsetgroup"),C=b.offsetGroups,S=C[v];v&&(S||(S=C[v]={offsetIndex:Object.keys(C).length}),p._offsetIndex=S.offsetIndex)}function s(d,p){var c,m;function l(u){return w.coerce(m._input,m,r,u)}if(p.barmode==="group")for(var x=0;x<d.length;x++)m=d[x],m.type==="bar"&&(c=m._input,i(c,m,p,l))}function y(d,p,c,m,l,x){x=x||{};var u=x.moduleHasSelected!==!1,A=x.moduleHasUnselected!==!1,_=x.moduleHasConstrain!==!1,g=x.moduleHasCliponaxis!==!1,b=x.moduleHasTextangle!==!1,v=x.moduleHasInsideanchor!==!1,C=!!x.hasPathbar,S=Array.isArray(l)||l==="auto",k=S||l==="inside",E=S||l==="outside";if(k||E){var F=t(m,"textfont",c.font),I=w.extendFlat({},F),D=d.textfont&&d.textfont.color,R=!D;if(R&&delete I.color,t(m,"insidetextfont",I),C){var O=w.extendFlat({},F);R&&delete O.color,t(m,"pathbar.textfont",O)}E&&t(m,"outsidetextfont",F),u&&m("selected.textfont.color"),A&&m("unselected.textfont.color"),_&&m("constraintext"),g&&m("cliponaxis"),b&&m("textangle"),m("texttemplate")}k&&v&&m("insidetextanchor")}U.exports={supplyDefaults:h,crossTraceDefaults:s,handleGroupingDefaults:i,handleText:y}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(o,U,H){U.exports=function(f,M,T){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),T.orientation==="h"?(f.label=f.y,f.value=f.x):(f.label=f.x,f.value=f.y),f}},{}],663:[function(o,U,H){var w=o("fast-isnumeric"),f=o("tinycolor2"),M=o("../../lib").isArrayOrTypedArray;H.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},H.coerceNumber=function(T,e,a){if(w(e)){e=+e;var n=T.min,r=T.max,t=n!==void 0&&e<n||r!==void 0&&e>r;if(!t)return e}return a!==void 0?a:T.dflt},H.coerceColor=function(T,e,a){return f(e).isValid()?e:a!==void 0?a:T.dflt},H.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},H.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},H.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:M(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(o,U,H){var w=o("../../components/fx"),f=o("../../registry"),M=o("../../components/color"),T=o("../../lib").fillText,e=o("./helpers").getLineWidth,a=o("../../plots/cartesian/axes").hoverLabelText,n=o("../../constants/numerical").BADNUM;function r(i,s,y,d,p){var c=t(i,s,y,d,p);if(c){var m=c.cd,l=m[0].trace,x=m[c.index];return c.color=h(l,x),f.getComponentMethod("errorbars","hoverInfo")(x,l,c),[c]}}function t(i,s,y,d,p){var c=i.cd,m=c[0].trace,l=c[0].t,x=d==="closest",u=m.type==="waterfall",A=i.maxHoverDistance,_=i.maxSpikeDistance,g,b,v,C,S,k,E;m.orientation==="h"?(g=y,b=s,v="y",C="x",S=ue,k=X):(g=s,b=y,v="x",C="y",k=ue,S=X);var F=m[v+"period"],I=x||F;function D(ae){return O(ae,-1)}function R(ae){return O(ae,1)}function O(ae,oe){var be=ae.w;return ae[v]+oe*be/2}function z(ae){return ae[v+"End"]-ae[v+"Start"]}var B=x?D:F?function(ae){return ae.p-z(ae)/2}:function(ae){return Math.min(D(ae),ae.p-l.bardelta/2)},G=x?R:F?function(ae){return ae.p+z(ae)/2}:function(ae){return Math.max(R(ae),ae.p+l.bardelta/2)};function Q(ae,oe,be){return p.finiteRange&&(be=0),w.inbox(ae-g,oe-g,be+Math.min(1,Math.abs(oe-ae)/E)-1)}function X(ae){return Q(B(ae),G(ae),A)}function j(ae){return Q(D(ae),R(ae),_)}function re(ae){var oe=ae[C];if(u){var be=Math.abs(ae.rawS)||0;b>0?oe+=be:b<0&&(oe-=be)}return oe}function ue(ae){var oe=b,be=ae.b,ce=re(ae);return w.inbox(be-oe,ce-oe,A+(ce-oe)/(ce-be)-1)}function K(ae){var oe=b,be=ae.b,ce=re(ae);return w.inbox(be-oe,ce-oe,_+(ce-oe)/(ce-be)-1)}var te=i[v+"a"],Y=i[C+"a"];E=Math.abs(te.r2c(te.range[1])-te.r2c(te.range[0]));function V(ae){return(S(ae)+k(ae))/2}var ee=w.getDistanceFunction(d,S,k,V);if(w.getClosest(c,ee,i),i.index!==!1&&c[i.index].p!==n){I||(B=function(ae){return Math.min(D(ae),ae.p-l.bargroupwidth/2)},G=function(ae){return Math.max(R(ae),ae.p+l.bargroupwidth/2)});var ne=i.index,Z=c[ne],q=m.base?Z.b+Z.s:Z.s;i[C+"0"]=i[C+"1"]=Y.c2p(Z[C],!0),i[C+"LabelVal"]=q;var ie=l.extents[l.extents.round(Z.p)];i[v+"0"]=te.c2p(x?B(Z):ie[0],!0),i[v+"1"]=te.c2p(x?G(Z):ie[1],!0);var se=Z.orig_p!==void 0;return i[v+"LabelVal"]=se?Z.orig_p:Z.p,i.labelLabel=a(te,i[v+"LabelVal"],m[v+"hoverformat"]),i.valueLabel=a(Y,i[C+"LabelVal"],m[C+"hoverformat"]),i.baseLabel=a(Y,Z.b,m[C+"hoverformat"]),i.spikeDistance=(K(Z)+j(Z))/2,i[v+"Spike"]=te.c2p(Z.p,!0),T(Z,m,i),i.hovertemplate=m.hovertemplate,i}}function h(i,s){var y=s.mcc||i.marker.color,d=s.mlcc||i.marker.line.color,p=e(i,s);if(M.opacity(y))return y;if(M.opacity(d)&&p)return d}U.exports={hoverPoints:r,hoverOnBars:t,getTraceColor:h}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults").supplyDefaults,crossTraceDefaults:o("./defaults").crossTraceDefaults,supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc"),crossTraceCalc:o("./cross_trace_calc").crossTraceCalc,colorbar:o("../scatter/marker_colorbar"),arraysToCalcdata:o("./arrays_to_calcdata"),plot:o("./plot").plot,style:o("./style").style,styleOnSelect:o("./style").styleOnSelect,hoverPoints:o("./hover").hoverPoints,eventData:o("./event_data"),selectPoints:o("./select"),moduleType:"trace",name:"bar",basePlotModule:o("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(o,U,H){U.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(o,U,H){var w=o("../../registry"),f=o("../../plots/cartesian/axes"),M=o("../../lib"),T=o("./layout_attributes");U.exports=function(e,a,n){function r(l,x){return M.coerce(e,a,T,l,x)}for(var t=!1,h=!1,i=!1,s={},y=r("barmode"),d=0;d<n.length;d++){var p=n[d];if(w.traceIs(p,"bar")&&p.visible)t=!0;else continue;if(y==="group"){var c=p.xaxis+p.yaxis;s[c]&&(i=!0),s[c]=!0}if(p.visible&&p.type==="histogram"){var m=f.getFromId({_fullLayout:a},p[p.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(h=!0)}}if(!t){delete a.barmode;return}y!=="overlay"&&r("barnorm"),r("bargap",h&&!i?0:.2),r("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../lib"),T=o("../../lib/svg_text_utils"),e=o("../../components/color"),a=o("../../components/drawing"),n=o("../../registry"),r=o("../../plots/cartesian/axes").tickText,t=o("./uniform_text"),h=t.recordMinTextSize,i=t.clearMinTextSize,s=o("./style"),y=o("./helpers"),d=o("./constants"),p=o("./attributes"),c=p.text,m=p.textposition,l=o("../../components/fx/helpers").appendArrayPointValue,x=d.TEXTPAD;function u(B){return B.id}function A(B){if(B.ids)return u}function _(B,G){return B<G?1:-1}function g(B,G,Q,X){var j=[],re=[],ue=X?G:Q,K=X?Q:G;return j[0]=ue.c2p(B.s0,!0),re[0]=K.c2p(B.p0,!0),j[1]=ue.c2p(B.s1,!0),re[1]=K.c2p(B.p1,!0),X?[j,re]:[re,j]}function b(B,G,Q,X){if(!G.uniformtext.mode&&v(Q)){var j;return X&&(j=X()),B.transition().duration(Q.duration).ease(Q.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})}else return B}function v(B){return B&&B.duration>0}function C(B,G,Q,X,j,re){var ue=G.xaxis,K=G.yaxis,te=B._fullLayout;j||(j={mode:te.barmode,norm:te.barmode,gap:te.bargap,groupgap:te.bargroupgap},i("bar",te));var Y=M.makeTraceGroups(X,Q,"trace bars").each(function(V){var ee=w.select(this),ne=V[0].trace,Z=ne.type==="waterfall",q=ne.type==="funnel",ie=ne.type==="bar",se=ie||q,ae=0;Z&&ne.connector.visible&&ne.connector.mode==="between"&&(ae=ne.connector.line.width/2);var oe=ne.orientation==="h",be=v(j),ce=M.ensureSingle(ee,"g","points"),de=A(ne),ye=ce.selectAll("g.point").data(M.identity,de);ye.enter().append("g").classed("point",!0),ye.exit().remove(),ye.each(function(me,Me){var Le=w.select(this),Oe=g(me,ue,K,oe),_e=Oe[0][0],Ee=Oe[0][1],Ze=Oe[1][0],Ge=Oe[1][1],Fe=(oe?Ee-_e:Ge-Ze)===0;Fe&&se&&y.getLineWidth(ne,me)&&(Fe=!1),Fe||(Fe=!f(_e)||!f(Ee)||!f(Ze)||!f(Ge)),me.isBlank=Fe,Fe&&(oe?Ee=_e:Ge=Ze),ae&&!Fe&&(oe?(_e-=_(_e,Ee)*ae,Ee+=_(_e,Ee)*ae):(Ze-=_(Ze,Ge)*ae,Ge+=_(Ze,Ge)*ae));var Re,We;if(ne.type==="waterfall"){if(!Fe){var xt=ne[me.dir].marker;Re=xt.line.width,We=xt.color}}else Re=y.getLineWidth(ne,me),We=me.mc||ne.marker.color;function Nt(Lt){var Ye=w.round(Re/2%1,2);return j.gap===0&&j.groupgap===0?w.round(Math.round(Lt)-Ye,2):Lt}function tr(Lt,Ye,ot){return ot&&Lt===Ye?Lt:Math.abs(Lt-Ye)>=2?Nt(Lt):Lt>Ye?Math.ceil(Lt):Math.floor(Lt)}if(!B._context.staticPlot){var Vt=e.opacity(We),Pt=Vt<1||Re>.01?Nt:tr;_e=Pt(_e,Ee,oe),Ee=Pt(Ee,_e,oe),Ze=Pt(Ze,Ge,!oe),Ge=Pt(Ge,Ze,!oe)}var $t=b(M.ensureSingle(Le,"path"),te,j,re);if($t.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ee-_e)*(Ge-Ze))||Fe&&B._context.staticPlot?"M0,0Z":"M"+_e+","+Ze+"V"+Ge+"H"+Ee+"V"+Ze+"Z").call(a.setClipUrl,G.layerClipId,B),!te.uniformtext.mode&&be){var Ut=a.makePointStyleFns(ne);a.singlePointStyle(me,$t,ne,Ut,B)}S(B,G,Le,V,Me,_e,Ee,Ze,Ge,j,re),G.layerClipId&&a.hideOutsideRangePoint(me,Le.select("text"),ue,K,ne.xcalendar,ne.ycalendar)});var ge=ne.cliponaxis===!1;a.setClipUrl(ee,ge?null:G.layerClipId,B)});n.getComponentMethod("errorbars","plot")(B,Y,G,j)}function S(B,G,Q,X,j,re,ue,K,te,Y,V){var ee=G.xaxis,ne=G.yaxis,Z=B._fullLayout,q;function ie(Ye,ot,Ve){var Ae=M.ensureSingle(Ye,"text").text(ot).attr({class:"bartext bartext-"+q,"text-anchor":"middle","data-notex":1}).call(a.font,Ve).call(T.convertToTspans,B);return Ae}var se=X[0].trace,ae=se.orientation==="h",oe=D(Z,X,j,ee,ne);q=R(se,j);var be=Y.mode==="stack"||Y.mode==="relative",ce=X[j],de=!be||ce._outmost;if(!oe||q==="none"||(ce.isBlank||re===ue||K===te)&&(q==="auto"||q==="inside")){Q.select("text").remove();return}var ye=Z.font,ge=s.getBarColor(X[j],se),me=s.getInsideTextFont(se,j,ye,ge),Me=s.getOutsideTextFont(se,j,ye),Le=Q.datum();ae?ee.type==="log"&&Le.s0<=0&&(ee.range[0]<ee.range[1]?re=0:re=ee._length):ne.type==="log"&&Le.s0<=0&&(ne.range[0]<ne.range[1]?K=ne._length:K=0);var Oe=Math.abs(ue-re)-2*x,_e=Math.abs(te-K)-2*x,Ee,Ze,Ge,Fe,Re;if(q==="outside"&&!de&&!ce.hasB&&(q="inside"),q==="auto")if(de){q="inside",Re=M.ensureUniformFontSize(B,me),Ee=ie(Q,oe,Re),Ze=a.bBox(Ee.node()),Ge=Ze.width,Fe=Ze.height;var We=Ge>0&&Fe>0,xt=Ge<=Oe&&Fe<=_e,Nt=Ge<=_e&&Fe<=Oe,tr=ae?Oe>=Ge*(_e/Fe):_e>=Fe*(Oe/Ge);We&&(xt||Nt||tr)?q="inside":(q="outside",Ee.remove(),Ee=null)}else q="inside";if(!Ee){Re=M.ensureUniformFontSize(B,q==="outside"?Me:me),Ee=ie(Q,oe,Re);var Vt=Ee.attr("transform");if(Ee.attr("transform",""),Ze=a.bBox(Ee.node()),Ge=Ze.width,Fe=Ze.height,Ee.attr("transform",Vt),Ge<=0||Fe<=0){Ee.remove();return}}var Pt=se.textangle,$t,Ut;q==="outside"?(Ut=se.constraintext==="both"||se.constraintext==="outside",$t=I(re,ue,K,te,Ze,{isHorizontal:ae,constrained:Ut,angle:Pt})):(Ut=se.constraintext==="both"||se.constraintext==="inside",$t=F(re,ue,K,te,Ze,{isHorizontal:ae,constrained:Ut,angle:Pt,anchor:se.insidetextanchor})),$t.fontSize=Re.size,h(se.type==="histogram"?"bar":se.type,$t,Z),ce.transform=$t;var Lt=b(Ee,Z,Y,V);M.setTransormAndDisplay(Lt,$t)}function k(B){return B==="auto"?0:B}function E(B,G){var Q=Math.PI/180*G,X=Math.abs(Math.sin(Q)),j=Math.abs(Math.cos(Q));return{x:B.width*j+B.height*X,y:B.width*X+B.height*j}}function F(B,G,Q,X,j,re){var ue=!!re.isHorizontal,K=!!re.constrained,te=re.angle||0,Y=re.anchor||"end",V=Y==="end",ee=Y==="start",ne=re.leftToRight||0,Z=(ne+1)/2,q=1-Z,ie=j.width,se=j.height,ae=Math.abs(G-B),oe=Math.abs(X-Q),be=ae>2*x&&oe>2*x?x:0;ae-=2*be,oe-=2*be;var ce=k(te);te==="auto"&&!(ie<=ae&&se<=oe)&&(ie>ae||se>oe)&&(!(ie>oe||se>ae)||ie<se!=ae<oe)&&(ce+=90);var de=E(j,ce),ye=1;K&&(ye=Math.min(1,ae/de.x,oe/de.y));var ge=j.left*q+j.right*Z,me=(j.top+j.bottom)/2,Me=(B+x)*q+(G-x)*Z,Le=(Q+X)/2,Oe=0,_e=0;if(ee||V){var Ee=(ue?de.x:de.y)/2,Ze=ue?_(B,G):_(Q,X);ue?ee?(Me=B+Ze*be,Oe=-Ze*Ee):(Me=G-Ze*be,Oe=Ze*Ee):ee?(Le=Q+Ze*be,_e=-Ze*Ee):(Le=X-Ze*be,_e=Ze*Ee)}return{textX:ge,textY:me,targetX:Me,targetY:Le,anchorX:Oe,anchorY:_e,scale:ye,rotate:ce}}function I(B,G,Q,X,j,re){var ue=!!re.isHorizontal,K=!!re.constrained,te=re.angle||0,Y=j.width,V=j.height,ee=Math.abs(G-B),ne=Math.abs(X-Q),Z;ue?Z=ne>2*x?x:0:Z=ee>2*x?x:0;var q=1;K&&(q=ue?Math.min(1,ne/V):Math.min(1,ee/Y));var ie=k(te),se=E(j,ie),ae=(ue?se.x:se.y)/2,oe=(j.left+j.right)/2,be=(j.top+j.bottom)/2,ce=(B+G)/2,de=(Q+X)/2,ye=0,ge=0,me=ue?_(G,B):_(Q,X);return ue?(ce=G-me*Z,ye=me*ae):(de=X+me*Z,ge=-me*ae),{textX:oe,textY:be,targetX:ce,targetY:de,anchorX:ye,anchorY:ge,scale:q,rotate:ie}}function D(B,G,Q,X,j){var re=G[0].trace,ue=re.texttemplate,K;return ue?K=O(B,G,Q,X,j):re.textinfo?K=z(G,Q,X,j):K=y.getValue(re.text,Q),y.coerceString(c,K)}function R(B,G){var Q=y.getValue(B.textposition,G);return y.coerceEnumerated(m,Q)}function O(B,G,Q,X,j){var re=G[0].trace,ue=M.castOption(re,Q,"texttemplate");if(!ue)return"";var K=re.type==="histogram",te=re.type==="waterfall",Y=re.type==="funnel",V=re.orientation==="h",ee,ne,Z,q;V?(ee="y",ne=j,Z="x",q=X):(ee="x",ne=X,Z="y",q=j);function ie(ye){return r(ne,ne.c2l(ye),!0).text}function se(ye){return r(q,q.c2l(ye),!0).text}var ae=G[Q],oe={};oe.label=ae.p,oe.labelLabel=oe[ee+"Label"]=ie(ae.p);var be=M.castOption(re,ae.i,"text");(be===0||be)&&(oe.text=be),oe.value=ae.s,oe.valueLabel=oe[Z+"Label"]=se(ae.s);var ce={};l(ce,re,ae.i),(K||ce.x===void 0)&&(ce.x=V?oe.value:oe.label),(K||ce.y===void 0)&&(ce.y=V?oe.label:oe.value),(K||ce.xLabel===void 0)&&(ce.xLabel=V?oe.valueLabel:oe.labelLabel),(K||ce.yLabel===void 0)&&(ce.yLabel=V?oe.labelLabel:oe.valueLabel),te&&(oe.delta=+ae.rawS||ae.s,oe.deltaLabel=se(oe.delta),oe.final=ae.v,oe.finalLabel=se(oe.final),oe.initial=oe.final-oe.delta,oe.initialLabel=se(oe.initial)),Y&&(oe.value=ae.s,oe.valueLabel=se(oe.value),oe.percentInitial=ae.begR,oe.percentInitialLabel=M.formatPercent(ae.begR),oe.percentPrevious=ae.difR,oe.percentPreviousLabel=M.formatPercent(ae.difR),oe.percentTotal=ae.sumR,oe.percenTotalLabel=M.formatPercent(ae.sumR));var de=M.castOption(re,ae.i,"customdata");return de&&(oe.customdata=de),M.texttemplateString(ue,oe,B._d3locale,ce,oe,re._meta||{})}function z(B,G,Q,X){var j=B[0].trace,re=j.orientation==="h",ue=j.type==="waterfall",K=j.type==="funnel";function te(de){var ye=re?X:Q;return r(ye,de,!0).text}function Y(de){var ye=re?Q:X;return r(ye,+de,!0).text}var V=j.textinfo,ee=B[G],ne=V.split("+"),Z=[],q,ie=function(de){return ne.indexOf(de)!==-1};if(ie("label")&&Z.push(te(B[G].p)),ie("text")&&(q=M.castOption(j,ee.i,"text"),(q===0||q)&&Z.push(q)),ue){var se=+ee.rawS||ee.s,ae=ee.v,oe=ae-se;ie("initial")&&Z.push(Y(oe)),ie("delta")&&Z.push(Y(se)),ie("final")&&Z.push(Y(ae))}if(K){ie("value")&&Z.push(Y(ee.s));var be=0;ie("percent initial")&&be++,ie("percent previous")&&be++,ie("percent total")&&be++;var ce=be>1;ie("percent initial")&&(q=M.formatPercent(ee.begR),ce&&(q+=" of initial"),Z.push(q)),ie("percent previous")&&(q=M.formatPercent(ee.difR),ce&&(q+=" of previous"),Z.push(q)),ie("percent total")&&(q=M.formatPercent(ee.sumR),ce&&(q+=" of total"),Z.push(q))}return Z.join("<br>")}U.exports={plot:C,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(o,U,H){U.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=e[0].trace,t=r.type==="funnel",h=r.orientation==="h",i=[],s;if(T===!1)for(s=0;s<e.length;s++)e[s].selected=0;else for(s=0;s<e.length;s++){var y=e[s],d="ct"in y?y.ct:w(y,a,n,h,t);T.contains(d,!1,s,M)?(i.push({pointNumber:s,x:a.c2d(y.x),y:n.c2d(y.y)}),y.selected=1):y.selected=0}return i};function w(f,M,T,e,a){var n=M.c2p(e?f.s0:f.p0,!0),r=M.c2p(e?f.s1:f.p1,!0),t=T.c2p(e?f.p0:f.s0,!0),h=T.c2p(e?f.p1:f.s1,!0);return a?[(n+r)/2,(t+h)/2]:e?[r,(t+h)/2]:[(n+r)/2,h]}},{}],670:[function(o,U,H){U.exports=M;var w=o("../../lib").distinctVals,f=o("../../constants/numerical").BADNUM;function M(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,n=[],r=0;r<T.length;r++){for(var t=T[r],h=0;h<t.length;h++){var i=t[h];i.p!==f&&n.push(i.p)}t[0]&&t[0].width1&&(a=Math.min(t[0].width1,a))}this.positions=n;var s=w(n);this.distinctPositions=s.vals,s.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(s.minDiff,a);var y=(e.posAxis||{}).type;(y==="category"||y==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(e,a){var n=this.getLabel(e,a),r=this.bins[n]||0;return this.bins[n]=r+a,r},M.prototype.get=function(e,a){var n=this.getLabel(e,a);return this.bins[n]||0},M.prototype.getLabel=function(e,a){var n=a<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?e:Math.round(e/this.binWidth);return n+r}},{"../../constants/numerical":491,"../../lib":515}],671:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../components/drawing"),T=o("../../lib"),e=o("../../registry"),a=o("./uniform_text").resizeText,n=o("./attributes"),r=n.textfont,t=n.insidetextfont,h=n.outsidetextfont,i=o("./helpers");function s(b){var v=w.select(b).selectAll("g.barlayer").selectAll("g.trace");a(b,v,"bar");var C=v.size(),S=b._fullLayout;v.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&C>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&w.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(k){var E=w.select(this),F=k[0].trace;y(E,F,b)}),e.getComponentMethod("errorbars","style")(v)}function y(b,v,C){M.pointStyle(b.selectAll("path"),v,C),d(b,v,C)}function d(b,v,C){b.selectAll("text").each(function(S){var k=w.select(this),E=T.ensureUniformFontSize(C,l(k,S,v,C));M.font(k,E)})}function p(b,v,C){var S=v[0].trace;S.selectedpoints?c(C,S,b):(y(C,S,b),e.getComponentMethod("errorbars","style")(C))}function c(b,v,C){M.selectedPointStyle(b.selectAll("path"),v),m(b.selectAll("text"),v,C)}function m(b,v,C){b.each(function(S){var k=w.select(this),E;if(S.selected){E=T.ensureUniformFontSize(C,l(k,S,v,C));var F=v.selected.textfont&&v.selected.textfont.color;F&&(E.color=F),M.font(k,E)}else M.selectedTextStyle(k,v)})}function l(b,v,C,S){var k=S._fullLayout.font,E=C.textfont;if(b.classed("bartext-inside")){var F=g(v,C);E=u(C,v.i,k,F)}else b.classed("bartext-outside")&&(E=A(C,v.i,k));return E}function x(b,v,C){return _(r,b.textfont,v,C)}function u(b,v,C,S){var k=x(b,v,C),E=b._input.textfont===void 0||b._input.textfont.color===void 0||Array.isArray(b.textfont.color)&&b.textfont.color[v]===void 0;return E&&(k={color:f.contrast(S),family:k.family,size:k.size}),_(t,b.insidetextfont,v,k)}function A(b,v,C){var S=x(b,v,C);return _(h,b.outsidetextfont,v,S)}function _(b,v,C,S){v=v||{};var k=i.getValue(v.family,C),E=i.getValue(v.size,C),F=i.getValue(v.color,C);return{family:i.coerceString(b.family,k,S.family),size:i.coerceNumber(b.size,E,S.size),color:i.coerceColor(b.color,F,S.color)}}function g(b,v){return v.type==="waterfall"?v[b.dir].marker.color:b.mcc||b.mc||v.marker.color}U.exports={style:s,styleTextPoints:d,styleOnSelect:p,getInsideTextFont:u,getOutsideTextFont:A,getBarColor:g,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(o,U,H){var w=o("../../components/color"),f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/defaults"),T=o("../../lib").coercePattern;U.exports=function(a,n,r,t,h){var i=r("marker.color",t),s=f(a,"marker");s&&M(a,n,h,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",w.defaultLine),f(a,"marker.line")&&M(a,n,h,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),T(r,"marker.pattern",i,s),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib");function M(n,r,t){var h=n._fullLayout,i=h["_"+t+"Text_minsize"];if(i){var s=h.uniformtext.mode==="hide",y;switch(t){case"funnelarea":case"pie":case"sunburst":y="g.slice";break;case"treemap":case"icicle":y="g.slice, g.pathbar";break;default:y="g.points > g.point"}r.selectAll(y).each(function(d){var p=d.transform;if(p){p.scale=s&&p.hide?0:i/p.fontSize;var c=w.select(this).select("text");f.setTransormAndDisplay(c,p)}})}}function T(n,r,t){if(t.uniformtext.mode){var h=a(n),i=t.uniformtext.minsize,s=r.scale*r.fontSize;r.hide=s<i,t[h]=t[h]||1/0,r.hide||(t[h]=Math.min(t[h],Math.max(s,i)))}}function e(n,r){var t=a(n);r[t]=void 0}function a(n){return"_"+n+"Text_minsize"}U.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:M}},{"../../lib":515,"@plotly/d3":58}],674:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../lib/extend").extendFlat,M=o("../scatterpolar/attributes"),T=o("../bar/attributes");U.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:f({},T.base,{}),offset:f({},T.offset,{}),width:f({},T.width,{}),text:f({},T.text,{}),hovertext:f({},T.hovertext,{}),marker:T.marker,hoverinfo:M.hoverinfo,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(o,U,H){var w=o("../../components/colorscale/helpers").hasColorscale,f=o("../../components/colorscale/calc"),M=o("../bar/arrays_to_calcdata"),T=o("../bar/cross_trace_calc").setGroupPositions,e=o("../scatter/calc_selection"),a=o("../../registry").traceIs,n=o("../../lib").extendFlat;function r(h,i){for(var s=h._fullLayout,y=i.subplot,d=s[y].radialaxis,p=s[y].angularaxis,c=d.makeCalcdata(i,"r"),m=p.makeCalcdata(i,"theta"),l=i._length,x=new Array(l),u=c,A=m,_=0;_<l;_++)x[_]={p:A[_],s:u[_]};function g(b){var v=i[b];v!==void 0&&(i["_"+b]=Array.isArray(v)?p.makeCalcdata(i,b):p.d2c(v,i.thetaunit))}return p.type==="linear"&&(g("width"),g("offset")),w(i,"marker")&&f(h,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),w(i,"marker.line")&&f(h,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(x,i),e(x,i),x}function t(h,i,s){for(var y=h.calcdata,d=[],p=0;p<y.length;p++){var c=y[p],m=c[0].trace;m.visible===!0&&a(m,"bar")&&m.subplot===s&&d.push(c)}var l=n({},i.radialaxis,{_id:"x"}),x=i.angularaxis;T(h,x,l,d,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}U.exports={calc:r,crossTraceCalc:t}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(o,U,H){var w=o("../../lib"),f=o("../scatterpolar/defaults").handleRThetaDefaults,M=o("../bar/style_defaults"),T=o("./attributes");U.exports=function(a,n,r,t){function h(s,y){return w.coerce(a,n,T,s,y)}var i=f(a,n,t,h);if(!i){n.visible=!1;return}h("thetaunit"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate"),M(a,n,h,r,t),w.coerceSelectionMarkerOpacity(n,h)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(o,U,H){var w=o("../../components/fx"),f=o("../../lib"),M=o("../bar/hover").getTraceColor,T=f.fillText,e=o("../scatterpolar/hover").makeHoverPointText,a=o("../../plots/polar/helpers").isPtInsidePolygon;U.exports=function(r,t,h){var i=r.cd,s=i[0].trace,y=r.subplot,d=y.radialAxis,p=y.angularAxis,c=y.vangles,m=c?a:f.isPtInsideSector,l=r.maxHoverDistance,x=p._period||2*Math.PI,u=Math.abs(d.g2p(Math.sqrt(t*t+h*h))),A=Math.atan2(h,t);d.range[0]>d.range[1]&&(A+=Math.PI);var _=function(C){return m(u,A,[C.rp0,C.rp1],[C.thetag0,C.thetag1],c)?l+Math.min(1,Math.abs(C.thetag1-C.thetag0)/x)-1+(C.rp1-u)/(C.rp1-C.rp0)-1:1/0};if(w.getClosest(i,_,r),r.index!==!1){var g=r.index,b=i[g];r.x0=r.x1=b.ct[0],r.y0=r.y1=b.ct[1];var v=f.extendFlat({},b,{r:b.s,theta:b.p});return T(b,s,r),e(v,s,y,r),r.hovertemplate=s.hovertemplate,r.color=M(s,b),r.xLabelVal=r.yLabelVal=void 0,b.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(o,U,H){U.exports={moduleType:"trace",name:"barpolar",basePlotModule:o("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("../scatterpolar/format_labels"),style:o("../bar/style").style,styleOnSelect:o("../bar/style").styleOnSelect,hoverPoints:o("./hover"),selectPoints:o("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(o,U,H){U.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(M,T,e){var a={},n;function r(i,s){return w.coerce(M[n]||{},T[n],f,i,s)}for(var t=0;t<e.length;t++){var h=e[t];h.type==="barpolar"&&h.visible===!0&&(n=h.subplot,a[n]||(r("barmode"),r("bargap"),a[n]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(o,U,H){var w=o("@plotly/d3"),f=o("fast-isnumeric"),M=o("../../lib"),T=o("../../components/drawing"),e=o("../../plots/polar/helpers");U.exports=function(r,t,h){var i=t.xaxis,s=t.yaxis,y=t.radialAxis,d=t.angularAxis,p=a(t),c=t.layers.frontplot.select("g.barlayer");M.makeTraceGroups(c,h,"trace bars").each(function(){var m=w.select(this),l=M.ensureSingle(m,"g","points"),x=l.selectAll("g.point").data(M.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(u){var A=w.select(this),_=u.rp0=y.c2p(u.s0),g=u.rp1=y.c2p(u.s1),b=u.thetag0=d.c2g(u.p0),v=u.thetag1=d.c2g(u.p1),C;if(!f(_)||!f(g)||!f(b)||!f(v)||_===g||b===v)C="M0,0Z";else{var S=y.c2g(u.s1),k=(b+v)/2;u.ct=[i.c2p(S*Math.cos(k)),s.c2p(S*Math.sin(k))],C=p(_,g,b,v)}M.ensureSingle(A,"path").attr("d",C)}),T.setClipUrl(m,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})};function a(n){var r=n.cxx,t=n.cyy;return n.vangles?function(h,i,s,y){var d,p;M.angleDelta(s,y)>0?(d=s,p=y):(d=y,p=s);var c=e.findEnclosingVertexAngles(d,n.vangles)[0],m=e.findEnclosingVertexAngles(p,n.vangles)[1],l=[c,(d+p)/2,m];return e.pathPolygonAnnulus(h,i,d,p,l,r,t)}:function(h,i,s,y){return M.pathAnnulus(h,i,s,y,r,t)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../bar/attributes"),M=o("../../components/color/attributes"),T=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../lib/extend").extendFlat,n=w.marker,r=n.line;U.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},n.angle,{arrayOk:!1,editType:"calc"}),size:a({},n.size,{arrayOk:!1,editType:"calc"}),color:a({},n.color,{arrayOk:!1,editType:"style"}),line:{color:a({},r.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:a({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup,selected:{marker:w.selected.marker,editType:"style"},unselected:{marker:w.unselected.marker,editType:"style"},text:a({},w.text,{}),hovertext:a({},w.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../plots/cartesian/axes"),M=o("../../plots/cartesian/align_period"),T=o("../../lib"),e=o("../../constants/numerical").BADNUM,a=T._;U.exports=function(A,_){var g=A._fullLayout,b=f.getFromId(A,_.xaxis||"x"),v=f.getFromId(A,_.yaxis||"y"),C=[],S=_.type==="violin"?"_numViolins":"_numBoxes",k,E,F,I,D,R,O;_.orientation==="h"?(F=b,I="x",D=v,R="y",O=!!_.yperiodalignment):(F=v,I="y",D=b,R="x",O=!!_.xperiodalignment);var z=n(_,R,D,g[S]),B=z[0],G=z[1],Q=T.distinctVals(B,D),X=Q.vals,j=Q.minDiff/2,re,ue,K,te,Y,V,ee=(_.boxpoints||_.points)==="all"?T.identity:function(Vt){return Vt.v<re.lf||Vt.v>re.uf};if(_._hasPreCompStats){var ne=_[I],Z=function(Vt){return F.d2c((_[Vt]||[])[k])},q=1/0,ie=-1/0;for(k=0;k<_._length;k++){var se=B[k];if(!!w(se)){if(re={},re.pos=re[R]=se,O&&G&&(re.orig_p=G[k]),re.q1=Z("q1"),re.med=Z("median"),re.q3=Z("q3"),ue=[],ne&&T.isArrayOrTypedArray(ne[k]))for(E=0;E<ne[k].length;E++)V=F.d2c(ne[k][E]),V!==e&&(Y={v:V,i:[k,E]},i(Y,_,[k,E]),ue.push(Y));if(re.pts=ue.sort(y),K=re[I]=ue.map(d),te=K.length,re.med!==e&&re.q1!==e&&re.q3!==e&&re.med>=re.q1&&re.q3>=re.med){var ae=Z("lowerfence");re.lf=ae!==e&&ae<=re.q1?ae:p(re,K,te);var oe=Z("upperfence");re.uf=oe!==e&&oe>=re.q3?oe:c(re,K,te);var be=Z("mean");re.mean=be!==e?be:te?T.mean(K,te):(re.q1+re.q3)/2;var ce=Z("sd");re.sd=be!==e&&ce>=0?ce:te?T.stdev(K,te,re.mean):re.q3-re.q1,re.lo=m(re),re.uo=l(re);var de=Z("notchspan");de=de!==e&&de>0?de:x(re,te),re.ln=re.med-de,re.un=re.med+de;var ye=re.lf,ge=re.uf;_.boxpoints&&K.length&&(ye=Math.min(ye,K[0]),ge=Math.max(ge,K[te-1])),_.notched&&(ye=Math.min(ye,re.ln),ge=Math.max(ge,re.un)),re.min=ye,re.max=ge}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+re.q1,"median = "+re.med,"q3 = "+re.q3].join(`
`));var me;re.med!==e?me=re.med:re.q1!==e?re.q3!==e?me=(re.q1+re.q3)/2:me=re.q1:re.q3!==e?me=re.q3:me=0,re.med=me,re.q1=re.q3=me,re.lf=re.uf=me,re.mean=re.sd=me,re.ln=re.un=me,re.min=re.max=me}q=Math.min(q,re.min),ie=Math.max(ie,re.max),re.pts2=ue.filter(ee),C.push(re)}}_._extremes[F._id]=f.findExtremes(F,[q,ie],{padded:!0})}else{var Me=F.makeCalcdata(_,I),Le=r(X,j),Oe=X.length,_e=t(Oe);for(k=0;k<_._length;k++)if(V=Me[k],!!w(V)){var Ee=T.findBin(B[k],Le);Ee>=0&&Ee<Oe&&(Y={v:V,i:k},i(Y,_,k),_e[Ee].push(Y))}var Ze=1/0,Ge=-1/0,Fe=_.quartilemethod,Re=Fe==="exclusive",We=Fe==="inclusive";for(k=0;k<Oe;k++)if(_e[k].length>0){if(re={},re.pos=re[R]=X[k],ue=re.pts=_e[k].sort(y),K=re[I]=ue.map(d),te=K.length,re.min=K[0],re.max=K[te-1],re.mean=T.mean(K,te),re.sd=T.stdev(K,te,re.mean),re.med=T.interp(K,.5),te%2&&(Re||We)){var xt,Nt;Re?(xt=K.slice(0,te/2),Nt=K.slice(te/2+1)):We&&(xt=K.slice(0,te/2+1),Nt=K.slice(te/2)),re.q1=T.interp(xt,.5),re.q3=T.interp(Nt,.5)}else re.q1=T.interp(K,.25),re.q3=T.interp(K,.75);re.lf=p(re,K,te),re.uf=c(re,K,te),re.lo=m(re),re.uo=l(re);var tr=x(re,te);re.ln=re.med-tr,re.un=re.med+tr,Ze=Math.min(Ze,re.ln),Ge=Math.max(Ge,re.un),re.pts2=ue.filter(ee),C.push(re)}_._extremes[F._id]=f.findExtremes(F,_.notched?Me.concat([Ze,Ge]):Me,{padded:!0})}return s(C,_),C.length>0?(C[0].t={num:g[S],dPos:j,posLetter:R,valLetter:I,labels:{med:a(A,"median:"),min:a(A,"min:"),q1:a(A,"q1:"),q3:a(A,"q3:"),max:a(A,"max:"),mean:_.boxmean==="sd"?a(A,"mean \xB1 \u03C3:"):a(A,"mean:"),lf:a(A,"lower fence:"),uf:a(A,"upper fence:")}},g[S]++,C):[{t:{empty:!0}}]};function n(u,A,_,g){var b=A in u,v=A+"0"in u,C="d"+A in u;if(b||v&&C){var S=_.makeCalcdata(u,A),k=M(u,_,A,S).vals;return[k,S]}var E;v?E=u[A+"0"]:"name"in u&&(_.type==="category"||w(u.name)&&["linear","log"].indexOf(_.type)!==-1||T.isDateTime(u.name)&&_.type==="date")?E=u.name:E=g;for(var F=_.type==="multicategory"?_.r2c_just_indices(E):_.d2c(E,0,u[A+"calendar"]),I=u._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function r(u,A){for(var _=u.length,g=new Array(_+1),b=0;b<_;b++)g[b]=u[b]-A;return g[_]=u[_-1]+A,g}function t(u){for(var A=new Array(u),_=0;_<u;_++)A[_]=[];return A}var h={text:"tx",hovertext:"htx"};function i(u,A,_){for(var g in h)T.isArrayOrTypedArray(A[g])&&(Array.isArray(_)?T.isArrayOrTypedArray(A[g][_[0]])&&(u[h[g]]=A[g][_[0]][_[1]]):u[h[g]]=A[g][_])}function s(u,A){if(T.isArrayOrTypedArray(A.selectedpoints))for(var _=0;_<u.length;_++){for(var g=u[_].pts||[],b={},v=0;v<g.length;v++)b[g[v].i]=v;T.tagSelected(g,A,b)}}function y(u,A){return u.v-A.v}function d(u){return u.v}function p(u,A,_){return _===0?u.q1:Math.min(u.q1,A[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,A,!0)+1,_-1)])}function c(u,A,_){return _===0?u.q3:Math.max(u.q3,A[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,A),0)])}function m(u){return 4*u.q1-3*u.q3}function l(u){return 4*u.q3-3*u.q1}function x(u,A){return A===0?0:1.57*(u.q3-u.q1)/Math.sqrt(A)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib"),M=o("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(n,r){for(var t=n.calcdata,h=r.xaxis,i=r.yaxis,s=0;s<T.length;s++){for(var y=T[s],d=y==="h"?i:h,p=[],c=0;c<t.length;c++){var m=t[c],l=m[0].t,x=m[0].trace;x.visible===!0&&(x.type==="box"||x.type==="candlestick")&&!l.empty&&(x.orientation||"v")===y&&x.xaxis===h._id&&x.yaxis===i._id&&p.push(c)}a("box",n,p,d)}}function a(n,r,t,h){var i=r.calcdata,s=r._fullLayout,y=h._id,d=y.charAt(0),p,c,m,l=[],x=0;for(p=0;p<t.length;p++)for(m=i[t[p]],c=0;c<m.length;c++)l.push(h.c2l(m[c].pos,!0)),x+=(m[c].pts2||[]).length;if(!!l.length){var u=f.distinctVals(l);(h.type==="category"||h.type==="multicategory")&&(u.minDiff=1);var A=u.minDiff/2;w.minDtick(h,u.minDiff,u.vals[0],!0);var _=n==="violin"?"_numViolins":"_numBoxes",g=s[_],b=s[n+"mode"]==="group"&&g>1,v=1-s[n+"gap"],C=1-s[n+"groupgap"];for(p=0;p<t.length;p++){m=i[t[p]];var S=m[0].trace,k=m[0].t,E=S.width,F=S.side,I,D,R,O;if(E)I=D=O=E/2,R=0;else if(I=A,b){var z=M(s,h._id)+S.orientation,B=s._alignmentOpts[z]||{},G=B[S.alignmentgroup]||{},Q=Object.keys(G.offsetGroups||{}).length,X=Q||g,j=Q?S._offsetIndex:k.num;D=I*v*C/X,R=2*I*(-.5+(j+.5)/X)*v,O=I*v/X}else D=I*v*C,R=0,O=I;k.dPos=I,k.bPos=R,k.bdPos=D,k.wHover=O;var re,ue,K=R+D,te,Y,V,ee,ne,Z,q=Boolean(E),ie=(S.boxpoints||S.points)&&x>0;if(F==="positive"?(re=I*(E?1:.5),te=K,ue=te=R):F==="negative"?(re=te=R,ue=I*(E?1:.5),Y=K):(re=ue=I,te=Y=K),ie){var se=S.pointpos,ae=S.jitter,oe=S.marker.size/2,be=0;se+ae>=0&&(be=K*(se+ae),be>re?(q=!0,ne=oe,V=be):be>te&&(ne=oe,V=re)),be<=re&&(V=re);var ce=0;se-ae<=0&&(ce=-K*(se-ae),ce>ue?(q=!0,Z=oe,ee=ce):ce>Y&&(Z=oe,ee=ue)),ce<=ue&&(ee=ue)}else V=re,ee=ue;var de=new Array(m.length);for(c=0;c<m.length;c++)de[c]=m[c].pos;S._extremes[y]=w.findExtremes(h,de,{padded:q,vpadminus:ee,vpadplus:V,vpadLinearized:!0,ppadminus:{x:Z,y:ne}[d],ppadplus:{x:ne,y:Z}[d]})}}}U.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=o("../../components/color"),T=o("../scatter/period_defaults"),e=o("../bar/defaults").handleGroupingDefaults,a=o("../../plots/cartesian/axis_autotype"),n=o("./attributes");function r(s,y,d,p){function c(b,v){return w.coerce(s,y,n,b,v)}if(t(s,y,c,p),y.visible!==!1){T(s,y,p,c),c("xhoverformat"),c("yhoverformat");var m=y._hasPreCompStats;m&&(c("lowerfence"),c("upperfence")),c("line.color",(s.marker||{}).color||d),c("line.width"),c("fillcolor",M.addOpacity(y.line.color,.5));var l=!1;if(m){var x=c("mean"),u=c("sd");x&&x.length&&(l=!0,u&&u.length&&(l="sd"))}c("boxmean",l),c("whiskerwidth"),c("width"),c("quartilemethod");var A=!1;if(m){var _=c("notchspan");_&&_.length&&(A=!0)}else w.validate(s.notchwidth,n.notchwidth)&&(A=!0);var g=c("notched",A);g&&c("notchwidth"),h(s,y,c,{prefix:"box"})}}function t(s,y,d,p){function c(Q){var X=0;return Q&&Q.length&&(X+=1,w.isArrayOrTypedArray(Q[0])&&Q[0].length&&(X+=1)),X}function m(Q){return w.validate(s[Q],n[Q])}var l=d("y"),x=d("x"),u;if(y.type==="box"){var A=d("q1"),_=d("median"),g=d("q3");y._hasPreCompStats=A&&A.length&&_&&_.length&&g&&g.length,u=Math.min(w.minRowLength(A),w.minRowLength(_),w.minRowLength(g))}var b=c(l),v=c(x),C=b&&w.minRowLength(l),S=v&&w.minRowLength(x),k=p.calendar,E={autotypenumbers:p.autotypenumbers},F,I;if(y._hasPreCompStats)switch(String(v)+String(b)){case"00":var D=m("x0")||m("dx"),R=m("y0")||m("dy");R&&!D?F="h":F="v",I=u;break;case"10":F="v",I=Math.min(u,S);break;case"20":F="h",I=Math.min(u,x.length);break;case"01":F="h",I=Math.min(u,C);break;case"02":F="v",I=Math.min(u,l.length);break;case"12":F="v",I=Math.min(u,S,l.length);break;case"21":F="h",I=Math.min(u,x.length,C);break;case"11":I=0;break;case"22":var O=!1,z;for(z=0;z<x.length;z++)if(a(x[z],k,E)==="category"){O=!0;break}if(O)F="v",I=Math.min(u,S,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],k,E)==="category"){O=!0;break}O?(F="h",I=Math.min(u,x.length,C)):(F="v",I=Math.min(u,S,l.length))}break}else b>0?(F="v",v>0?I=Math.min(S,C):I=Math.min(C)):v>0?(F="h",I=Math.min(S)):I=0;if(!I){y.visible=!1;return}y._length=I;var B=d("orientation",F);y._hasPreCompStats?B==="v"&&v===0?(d("x0",0),d("dx",1)):B==="h"&&b===0&&(d("y0",0),d("dy",1)):B==="v"&&v===0?d("x0"):B==="h"&&b===0&&d("y0");var G=f.getComponentMethod("calendars","handleTraceDefaults");G(s,y,["x","y"],p)}function h(s,y,d,p){var c=p.prefix,m=w.coerce2(s,y,n,"marker.outliercolor"),l=d("marker.line.outliercolor"),x="outliers";y._hasPreCompStats?x="all":(m||l)&&(x="suspectedoutliers");var u=d(c+"points",x);u?(d("jitter",u==="all"?.3:0),d("pointpos",u==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.angle"),d("marker.color",y.line.color),d("marker.line.color"),d("marker.line.width"),u==="suspectedoutliers"&&(d("marker.line.outliercolor",y.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete y.marker;var A=d("hoveron");(A==="all"||A.indexOf("points")!==-1)&&d("hovertemplate"),w.coerceSelectionMarkerOpacity(y,d)}function i(s,y){var d,p;function c(x){return w.coerce(p._input,p,n,x)}for(var m=0;m<s.length;m++){p=s[m];var l=p.type;(l==="box"||l==="violin")&&(d=p._input,y[l+"mode"]==="group"&&e(d,p,y,c))}}U.exports={supplyDefaults:r,crossTraceDefaults:i,handleSampleDefaults:t,handlePointsDefaults:h}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(o,U,H){U.exports=function(f,M){return M.hoverOnBox&&(f.hoverOnBox=M.hoverOnBox),"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],687:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib"),M=o("../../components/fx"),T=o("../../components/color"),e=f.fillText;function a(t,h,i,s){var y=t.cd,d=y[0].trace,p=d.hoveron,c=[],m;return p.indexOf("boxes")!==-1&&(c=c.concat(n(t,h,i,s))),p.indexOf("points")!==-1&&(m=r(t,h,i)),s==="closest"?m?[m]:c:(m&&c.push(m),c)}function n(t,h,i,s){var y=t.cd,d=t.xa,p=t.ya,c=y[0].trace,m=y[0].t,l=c.type==="violin",x,u,A,_,g,b,v,C,S,k,E,F=m.bdPos,I,D,R=m.wHover,O=function(ce){return A.c2l(ce.pos)+m.bPos-A.c2l(b)};l&&c.side!=="both"?(c.side==="positive"&&(S=function(ce){var de=O(ce);return M.inbox(de,de+R,k)},I=F,D=0),c.side==="negative"&&(S=function(ce){var de=O(ce);return M.inbox(de-R,de,k)},I=0,D=F)):(S=function(ce){var de=O(ce);return M.inbox(de-R,de+R,k)},I=D=F);var z;l?z=function(ce){return M.inbox(ce.span[0]-g,ce.span[1]-g,k)}:z=function(ce){return M.inbox(ce.min-g,ce.max-g,k)},c.orientation==="h"?(g=h,b=i,v=z,C=S,x="y",A=p,u="x",_=d):(g=i,b=h,v=S,C=z,x="x",A=d,u="y",_=p);var B=Math.min(1,F/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));k=t.maxHoverDistance-B,E=t.maxSpikeDistance-B;function G(ce){return(v(ce)+C(ce))/2}var Q=M.getDistanceFunction(s,v,C,G);if(M.getClosest(y,Q,t),t.index===!1)return[];var X=y[t.index],j=c.line.color,re=(c.marker||{}).color;T.opacity(j)&&c.line.width?t.color=j:T.opacity(re)&&c.boxpoints?t.color=re:t.color=c.fillcolor,t[x+"0"]=A.c2p(X.pos+m.bPos-D,!0),t[x+"1"]=A.c2p(X.pos+m.bPos+I,!0),t[x+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var ue=x+"Spike";t.spikeDistance=G(X)*E/k,t[ue]=A.c2p(X.pos,!0);var K=c.boxmean||(c.meanline||{}).visible,te=c.boxpoints||c.points,Y=te&&K?["max","uf","q3","med","mean","q1","lf","min"]:te&&!K?["max","uf","q3","med","q1","lf","min"]:!te&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],V=_.range[1]<_.range[0];c.orientation===(V?"v":"h")&&Y.reverse();for(var ee=t.spikeDistance,ne=t[ue],Z=[],q=0;q<Y.length;q++){var ie=Y[q];if(ie in X){var se=X[ie],ae=_.c2p(se,!0),oe=f.extendFlat({},t);oe.attr=ie,oe[u+"0"]=oe[u+"1"]=ae,oe[u+"LabelVal"]=se,oe[u+"Label"]=(m.labels?m.labels[ie]+" ":"")+w.hoverLabelText(_,se,c[u+"hoverformat"]),oe.hoverOnBox=!0,ie==="mean"&&"sd"in X&&c.boxmean==="sd"&&(oe[u+"err"]=X.sd),oe.hovertemplate=!1,Z.push(oe)}}t.name="",t.spikeDistance=void 0,t[ue]=void 0;for(var be=0;be<Z.length;be++)Z[be].attr!=="med"?(Z[be].name="",Z[be].spikeDistance=void 0,Z[be][ue]=void 0):(Z[be].spikeDistance=ee,Z[be][ue]=ne);return Z}function r(t,h,i){for(var s=t.cd,y=t.xa,d=t.ya,p=s[0].trace,c=y.c2p(h),m=d.c2p(i),l,x=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(y.c2p(z.x)-c)-B,1-3/B)},u=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(d.c2p(z.y)-m)-B,1-3/B)},A=M.quadrature(x,u),_=!1,g,b,v=0;v<s.length;v++){g=s[v];for(var C=0;C<(g.pts||[]).length;C++){b=g.pts[C];var S=A(b);S<=t.distance&&(t.distance=S,_=[v,C])}}if(!_)return!1;g=s[_[0]],b=g.pts[_[1]];var k=y.c2p(b.x,!0),E=d.c2p(b.y,!0),F=b.mrc||1;l=f.extendFlat({},t,{index:b.i,color:(p.marker||{}).color,name:p.name,x0:k-F,x1:k+F,y0:E-F,y1:E+F,spikeDistance:t.distance,hovertemplate:p.hovertemplate});var I=g.orig_p,D=I!==void 0?I:g.pos,R;p.orientation==="h"?(R=d,l.xLabelVal=b.x,l.yLabelVal=D):(R=y,l.xLabelVal=D,l.yLabelVal=b.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(g.pos,!0),e(b,p,l),l}U.exports={hoverPoints:a,hoverOnBoxes:n,hoverOnPoints:r}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults").supplyDefaults,crossTraceDefaults:o("./defaults").crossTraceDefaults,supplyLayoutDefaults:o("./layout_defaults").supplyLayoutDefaults,calc:o("./calc"),crossTraceCalc:o("./cross_trace_calc").crossTraceCalc,plot:o("./plot").plot,style:o("./style").style,styleOnSelect:o("./style").styleOnSelect,hoverPoints:o("./hover").hoverPoints,eventData:o("./event_data"),selectPoints:o("./select"),moduleType:"trace",name:"box",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(o,U,H){U.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("./layout_attributes");function T(a,n,r,t,h){for(var i=h+"Layout",s=!1,y=0;y<r.length;y++){var d=r[y];if(w.traceIs(d,i)){s=!0;break}}!s||(t(h+"mode"),t(h+"gap"),t(h+"groupgap"))}function e(a,n,r){function t(h,i){return f.coerce(a,n,M,h,i)}T(a,n,r,t,"box")}U.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=5,e=.01;function a(h,i,s,y){var d=i.xaxis,p=i.yaxis;f.makeTraceGroups(y,s,"trace boxes").each(function(c){var m=w.select(this),l=c[0],x=l.t,u=l.trace;if(x.wdPos=x.bdPos*u.whiskerwidth,u.visible!==!0||x.empty){m.remove();return}var A,_;u.orientation==="h"?(A=p,_=d):(A=d,_=p),n(m,{pos:A,val:_},u,x),r(m,{x:d,y:p},u,x),t(m,{pos:A,val:_},u,x)})}function n(h,i,s,y){var d=s.orientation==="h",p=i.val,c=i.pos,m=!!c.rangebreaks,l=y.bPos,x=y.wdPos||0,u=y.bPosPxOffset||0,A=s.whiskerwidth||0,_=s.notched||!1,g=_?1-2*s.notchwidth:1,b,v;Array.isArray(y.bdPos)?(b=y.bdPos[0],v=y.bdPos[1]):(b=y.bdPos,v=y.bdPos);var C=h.selectAll("path.box").data(s.type!=="violin"||s.box.visible?f.identity:[]);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),C.exit().remove(),C.each(function(S){if(S.empty)return"M0,0Z";var k=c.c2l(S.pos+l,!0),E=c.l2p(k-b)+u,F=c.l2p(k+v)+u,I=m?(E+F)/2:c.l2p(k)+u,D=s.whiskerwidth,R=m?E*D+(1-D)*I:c.l2p(k-x)+u,O=m?F*D+(1-D)*I:c.l2p(k+x)+u,z=c.l2p(k-b*g)+u,B=c.l2p(k+v*g)+u,G=p.c2p(S.q1,!0),Q=p.c2p(S.q3,!0),X=f.constrain(p.c2p(S.med,!0),Math.min(G,Q)+1,Math.max(G,Q)-1),j=S.lf===void 0||s.boxpoints===!1,re=p.c2p(j?S.min:S.lf,!0),ue=p.c2p(j?S.max:S.uf,!0),K=p.c2p(S.ln,!0),te=p.c2p(S.un,!0);d?w.select(this).attr("d","M"+X+","+z+"V"+B+"M"+G+","+E+"V"+F+(_?"H"+K+"L"+X+","+B+"L"+te+","+F:"")+"H"+Q+"V"+E+(_?"H"+te+"L"+X+","+z+"L"+K+","+E:"")+"ZM"+G+","+I+"H"+re+"M"+Q+","+I+"H"+ue+(A===0?"":"M"+re+","+R+"V"+O+"M"+ue+","+R+"V"+O)):w.select(this).attr("d","M"+z+","+X+"H"+B+"M"+E+","+G+"H"+F+(_?"V"+K+"L"+B+","+X+"L"+F+","+te:"")+"V"+Q+"H"+E+(_?"V"+te+"L"+z+","+X+"L"+E+","+K:"")+"ZM"+I+","+G+"V"+re+"M"+I+","+Q+"V"+ue+(A===0?"":"M"+R+","+re+"H"+O+"M"+R+","+ue+"H"+O))})}function r(h,i,s,y){var d=i.x,p=i.y,c=y.bdPos,m=y.bPos,l=s.boxpoints||s.points;f.seedPseudoRandom();var x=function(_){return _.forEach(function(g){g.t=y,g.trace=s}),_},u=h.selectAll("g.points").data(l?x:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var A=u.selectAll("path").data(function(_){var g,b=_.pts2,v=Math.max((_.max-_.min)/10,_.q3-_.q1),C=v*1e-9,S=v*e,k=[],E=0,F;if(s.jitter){if(v===0)for(E=1,k=new Array(b.length),g=0;g<b.length;g++)k[g]=1;else for(g=0;g<b.length;g++){var I=Math.max(0,g-T),D=b[I].v,R=Math.min(b.length-1,g+T),O=b[R].v;l!=="all"&&(b[g].v<_.lf?O=Math.min(O,_.lf):D=Math.max(D,_.uf));var z=Math.sqrt(S*(R-I)/(O-D+C))||0;z=f.constrain(Math.abs(z),0,1),k.push(z),E=Math.max(z,E)}F=s.jitter*2/(E||1)}for(g=0;g<b.length;g++){var B=b[g],G=B.v,Q=s.jitter?F*k[g]*(f.pseudoRandom()-.5):0,X=_.pos+m+c*(s.pointpos+Q);s.orientation==="h"?(B.y=X,B.x=G):(B.x=X,B.y=G),l==="suspectedoutliers"&&G<_.uo&&G>_.lo&&(B.so=!0)}return b});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(M.translatePoints,d,p)}function t(h,i,s,y){var d=i.val,p=i.pos,c=!!p.rangebreaks,m=y.bPos,l=y.bPosPxOffset||0,x=s.boxmean||(s.meanline||{}).visible,u,A;Array.isArray(y.bdPos)?(u=y.bdPos[0],A=y.bdPos[1]):(u=y.bdPos,A=y.bdPos);var _=h.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?f.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(g){var b=p.c2l(g.pos+m,!0),v=p.l2p(b-u)+l,C=p.l2p(b+A)+l,S=c?(v+C)/2:p.l2p(b)+l,k=d.c2p(g.mean,!0),E=d.c2p(g.mean-g.sd,!0),F=d.c2p(g.mean+g.sd,!0);s.orientation==="h"?w.select(this).attr("d","M"+k+","+v+"V"+C+(x==="sd"?"m0,0L"+E+","+S+"L"+k+","+v+"L"+F+","+S+"Z":"")):w.select(this).attr("d","M"+v+","+k+"H"+C+(x==="sd"?"m0,0L"+S+","+E+"L"+v+","+k+"L"+S+","+F+"Z":""))})}U.exports={plot:a,plotBoxAndWhiskers:n,plotPoints:r,plotBoxMean:t}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(o,U,H){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t;if(M===!1)for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++)T[r].pts[t].selected=0;else for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++){var h=T[r].pts[t],i=e.c2p(h.x),s=a.c2p(h.y);M.contains([i,s],null,h.i,f)?(n.push({pointNumber:h.i,x:e.c2d(h.x),y:a.c2d(h.y)}),h.selected=1):h.selected=0}return n}},{}],693:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../components/drawing");function T(a,n,r){var t=r||w.select(a).selectAll("g.trace.boxes");t.style("opacity",function(h){return h[0].trace.opacity}),t.each(function(h){var i=w.select(this),s=h[0].trace,y=s.line.width;function d(m,l,x,u){m.style("stroke-width",l+"px").call(f.stroke,x).call(f.fill,u)}var p=i.selectAll("path.box");if(s.type==="candlestick")p.each(function(m){if(!m.empty){var l=w.select(this),x=s[m.dir];d(l,x.line.width,x.line.color,x.fillcolor),l.style("opacity",s.selectedpoints&&!m.selected?.3:1)}});else{d(p,y,s.line.color,s.fillcolor),i.selectAll("path.mean").style({"stroke-width":y,"stroke-dasharray":2*y+"px,"+y+"px"}).call(f.stroke,s.line.color);var c=i.selectAll("path.point");M.pointStyle(c,s,a)}})}function e(a,n,r){var t=n[0].trace,h=r.selectAll("path.point");t.selectedpoints?M.selectedPointStyle(h,t):M.pointStyle(h,t,a)}U.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(o,U,H){var w=o("../../lib").extendFlat,f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../ohlc/attributes"),T=o("../box/attributes");function e(a){return{line:{color:w({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}U.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:w({},T.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:w({},T.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../../plots/cartesian/align_period"),T=o("../ohlc/calc").calcCommon;U.exports=function(a,n){var r=a._fullLayout,t=f.getFromId(a,n.xaxis),h=f.getFromId(a,n.yaxis),i=t.makeCalcdata(n,"x"),s=M(n,t,"x",i).vals,y=T(a,n,i,s,h,e);return y.length?(w.extendFlat(y[0].t,{num:r._numBoxes,dPos:w.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,y):[{t:{empty:!0}}]};function e(a,n,r,t){return{min:r,q1:Math.min(a,t),med:t,q3:Math.max(a,t),max:n}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../ohlc/ohlc_defaults"),T=o("../scatter/period_defaults"),e=o("./attributes");U.exports=function(r,t,h,i){function s(d,p){return w.coerce(r,t,e,d,p)}var y=M(r,t,s,i);if(!y){t.visible=!1;return}T(r,t,i,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),a(r,t,s,"increasing"),a(r,t,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),i._requestRangeslider[t.xaxis]=!0};function a(n,r,t,h){var i=t(h+".line.color");t(h+".line.width",r.line.width),t(h+".fillcolor",f.addOpacity(i,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(o,U,H){U.exports={moduleType:"trace",name:"candlestick",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:o("./attributes"),layoutAttributes:o("../box/layout_attributes"),supplyLayoutDefaults:o("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:o("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("../box/plot").plot,layerName:"boxlayer",style:o("../box/style").style,hoverPoints:o("../ohlc/hover").hoverPoints,selectPoints:o("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(o,U,H){var w=o("./axis_defaults"),f=o("../../plot_api/plot_template");U.exports=function(e,a,n,r,t){var h=r("a");h||(r("da"),r("a0"));var i=r("b");i||(r("db"),r("b0")),M(e,a,n,t)};function M(T,e,a,n){var r=["aaxis","baxis"];r.forEach(function(t){var h=t.charAt(0),i=T[t]||{},s=f.newContainer(e,t),y={noTicklabelstep:!0,tickfont:"x",id:h+"axis",letter:h,font:e.font,name:t,data:T[h],calendar:e.calendar,dfltColor:n,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};w(i,s,y),s._categories=s._categories||[],!T[t]&&i.type!=="-"&&(T[t]={type:i.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray;U.exports=function(M){return f(M,0)};function f(M,T){if(!w(M)||T>=10)return null;for(var e=1/0,a=-1/0,n=M.length,r=0;r<n;r++){var t=M[r];if(w(t)){var h=f(t,T+1);h&&(e=Math.min(h[0],e),a=Math.max(h[1],a))}else e=Math.min(t,e),a=Math.max(t,a)}return[e,a]}},{"../../lib":515}],700:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("./axis_attributes"),M=o("../../components/color/attributes"),T=w({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=M.defaultLine,U.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:f,baxis:f,font:T,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray;U.exports=function(f,M,T,e){var a,n,r,t,h,i,s,y,d,p,c,m,l,x=w(T)?"a":"b",u=x==="a"?f.aaxis:f.baxis,A=u.smoothing,_=x==="a"?f.a2i:f.b2j,g=x==="a"?T:e,b=x==="a"?e:T,v=x==="a"?M.a.length:M.b.length,C=x==="a"?M.b.length:M.a.length,S=Math.floor(x==="a"?f.b2j(b):f.a2i(b)),k=x==="a"?function(j){return f.evalxy([],j,S)}:function(j){return f.evalxy([],S,j)};A&&(r=Math.max(0,Math.min(C-2,S)),t=S-r,n=x==="a"?function(j,re){return f.dxydi([],j,r,re,t)}:function(j,re){return f.dxydj([],r,j,t,re)});var E=_(g[0]),F=_(g[1]),I=E<F?1:-1,D=(F-E)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,B=I>0?Math.max:Math.min,G=R(E+D),Q=O(F-D);s=k(E);var X=[[s]];for(a=G;a*I<Q*I;a+=I)h=[],c=B(E,a),m=z(F,a+I),l=m-c,i=Math.max(0,Math.min(v-2,Math.floor(.5*(c+m)))),y=k(m),A&&(d=n(i,c-i),p=n(i,m-i),h.push([s[0]+d[0]/3*l,s[1]+d[1]/3*l]),h.push([y[0]-p[0]/3*l,y[1]-p[1]/3*l])),h.push(y),X.push(h),s=y;return X}},{"../../lib":515}],702:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../../components/color/attributes"),M=o("../../plots/cartesian/layout_attributes"),T=o("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=o("../../plot_api/edit_types").overrideAll,a=o("../../components/drawing/attributes").dash,n=o("../../lib/extend").extendFlat;U.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:w({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:w({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:f.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:w({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(o,U,H){var w=o("./attributes"),f=o("../../components/color").addOpacity,M=o("../../registry"),T=o("../../lib"),e=o("../../plots/cartesian/tick_value_defaults"),a=o("../../plots/cartesian/tick_label_defaults"),n=o("../../plots/cartesian/prefix_suffix_defaults"),r=o("../../plots/cartesian/category_order_defaults"),t=o("../../plots/cartesian/set_convert"),h=o("../../plots/cartesian/axis_autotype");U.exports=function(y,d,p){var c=p.letter,m=p.font||{},l=w[c+"axis"];function x(G,Q){return T.coerce(y,d,l,G,Q)}function u(G,Q){return T.coerce2(y,d,l,G,Q)}p.name&&(d._name=p.name,d._id=p.name),x("autotypenumbers",p.autotypenumbersDflt);var A=x("type");if(A==="-"&&(p.data&&i(d,p.data),d.type==="-"?d.type="linear":A=y.type=d.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",c+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),d.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),d._hovertitle=c,A==="date"){var _=M.getComponentMethod("calendars","handleDefaults");_(y,d,"calendar",p.calendar)}t(d,p.fullLayout),d.c2p=T.identity;var g=x("color",p.dfltColor),b=g===y.color?g:m.color,v=x("title.text");v&&(T.coerceFont(x,"title.font",{family:m.family,size:T.bigFont(m.size),color:b}),x("title.offset")),x("tickangle");var C=x("autorange",!d.isValidRange(y.range));C&&x("rangemode"),x("range"),d.cleanRange(),x("fixedrange"),e(y,d,x,A),n(y,d,x,A,p),a(y,d,x,A,p),r(y,d,x,{data:p.data,dataAttr:c});var S=u("gridcolor",f(g,.3)),k=u("gridwidth"),E=u("griddash"),F=x("showgrid");F||(delete d.gridcolor,delete d.gridwidth,delete d.griddash);var I=u("startlinecolor",g),D=u("startlinewidth",k),R=x("startline",d.showgrid||!!I||!!D);R||(delete d.startlinecolor,delete d.startlinewidth);var O=u("endlinecolor",g),z=u("endlinewidth",k),B=x("endline",d.showgrid||!!O||!!z);return B||(delete d.endlinecolor,delete d.endlinewidth),F?(x("minorgridcount"),x("minorgridwidth",k),x("minorgriddash",E),x("minorgridcolor",f(S,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgriddash,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridwidth,delete d.griddash),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,x("tickmode"),d};function i(s,y){if(s.type==="-"){var d=s._id,p=d.charAt(0),c=p+"calendar",m=s[c];s.type=h(y,m,{autotypenumbers:s.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib").isArray1D,M=o("./cheater_basis"),T=o("./array_minmax"),e=o("./calc_gridlines"),a=o("./calc_labels"),n=o("./calc_clippath"),r=o("../heatmap/clean_2d_array"),t=o("./smooth_fill_2d_array"),h=o("../heatmap/convert_column_xyz"),i=o("./set_convert");U.exports=function(y,d){var p=w.getFromId(y,d.xaxis),c=w.getFromId(y,d.yaxis),m=d.aaxis,l=d.baxis,x=d.x,u=d.y,A=[];x&&f(x)&&A.push("x"),u&&f(u)&&A.push("y"),A.length&&h(d,m,l,"a","b",A);var _=d._a=d._a||d.a,g=d._b=d._b||d.b;x=d._x||d.x,u=d._y||d.y;var b={};if(d._cheater){var v=m.cheatertype==="index"?_.length:_,C=l.cheatertype==="index"?g.length:g;x=M(v,C,d.cheaterslope)}d._x=x=r(x),d._y=u=r(u),t(x,_,g),t(u,_,g),i(d),d.setScale();var S=T(x),k=T(u),E=.5*(S[1]-S[0]),F=.5*(S[1]+S[0]),I=.5*(k[1]-k[0]),D=.5*(k[1]+k[0]),R=1.3;return S=[F-E*R,F+E*R],k=[D-I*R,D+I*R],d._extremes[p._id]=w.findExtremes(p,S,{padded:!0}),d._extremes[c._id]=w.findExtremes(c,k,{padded:!0}),e(d,"a","b"),e(d,"b","a"),a(d,m),a(d,l),b.clipsegments=n(d._xctrl,d._yctrl,m,l),b.x=x,b.y=u,b.a=_,b.b=g,[b]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(o,U,H){U.exports=function(f,M,T,e){var a,n,r,t=[],h=!!T.smoothing,i=!!e.smoothing,s=f[0].length-1,y=f.length-1;for(a=0,n=[],r=[];a<=s;a++)n[a]=f[0][a],r[a]=M[0][a];for(t.push({x:n,y:r,bicubic:h}),a=0,n=[],r=[];a<=y;a++)n[a]=f[a][s],r[a]=M[a][s];for(t.push({x:n,y:r,bicubic:i}),a=s,n=[],r=[];a>=0;a--)n[s-a]=f[y][a],r[s-a]=M[y][a];for(t.push({x:n,y:r,bicubic:h}),a=y,n=[],r=[];a>=0;a--)n[y-a]=f[a][0],r[y-a]=M[a][0];return t.push({x:n,y:r,bicubic:i}),t}},{}],706:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib/extend").extendFlat;U.exports=function(T,e,a){var n,r,t,h,i,s,y,d,p,c,m,l,x,u,A=T["_"+e],_=T[e+"axis"],g=_._gridlines=[],b=_._minorgridlines=[],v=_._boundarylines=[],C=T["_"+a],S=T[a+"axis"];_.tickmode==="array"&&(_.tickvals=A.slice());var k=T._xctrl,E=T._yctrl,F=k[0].length,I=k.length,D=T._a.length,R=T._b.length;w.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var O=_.smoothing?3:1;function z(G){var Q,X,j,re,ue,K,te,Y,V,ee,ne,Z,q=[],ie=[],se={};if(e==="b")for(X=T.b2j(G),j=Math.floor(Math.max(0,Math.min(R-2,X))),re=X-j,se.length=R,se.crossLength=D,se.xy=function(ae){return T.evalxy([],ae,X)},se.dxy=function(ae,oe){return T.dxydi([],ae,j,oe,re)},Q=0;Q<D;Q++)K=Math.min(D-2,Q),te=Q-K,Y=T.evalxy([],Q,X),S.smoothing&&Q>0&&(V=T.dxydi([],Q-1,j,0,re),q.push(ue[0]+V[0]/3),ie.push(ue[1]+V[1]/3),ee=T.dxydi([],Q-1,j,1,re),q.push(Y[0]-ee[0]/3),ie.push(Y[1]-ee[1]/3)),q.push(Y[0]),ie.push(Y[1]),ue=Y;else for(Q=T.a2i(G),K=Math.floor(Math.max(0,Math.min(D-2,Q))),te=Q-K,se.length=D,se.crossLength=R,se.xy=function(ae){return T.evalxy([],Q,ae)},se.dxy=function(ae,oe){return T.dxydj([],K,ae,te,oe)},X=0;X<R;X++)j=Math.min(R-2,X),re=X-j,Y=T.evalxy([],Q,X),S.smoothing&&X>0&&(ne=T.dxydj([],K,X-1,te,0),q.push(ue[0]+ne[0]/3),ie.push(ue[1]+ne[1]/3),Z=T.dxydj([],K,X-1,te,1),q.push(Y[0]-Z[0]/3),ie.push(Y[1]-Z[1]/3)),q.push(Y[0]),ie.push(Y[1]),ue=Y;return se.axisLetter=e,se.axis=_,se.crossAxis=S,se.value=G,se.constvar=a,se.index=d,se.x=q,se.y=ie,se.smoothing=S.smoothing,se}function B(G){var Q,X,j,re,ue,K=[],te=[],Y={};if(Y.length=A.length,Y.crossLength=C.length,e==="b")for(j=Math.max(0,Math.min(R-2,G)),ue=Math.min(1,Math.max(0,G-j)),Y.xy=function(V){return T.evalxy([],V,G)},Y.dxy=function(V,ee){return T.dxydi([],V,j,ee,ue)},Q=0;Q<F;Q++)K[Q]=k[G*O][Q],te[Q]=E[G*O][Q];else for(X=Math.max(0,Math.min(D-2,G)),re=Math.min(1,Math.max(0,G-X)),Y.xy=function(V){return T.evalxy([],G,V)},Y.dxy=function(V,ee){return T.dxydj([],X,V,re,ee)},Q=0;Q<I;Q++)K[Q]=k[Q][G*O],te[Q]=E[Q][G*O];return Y.axisLetter=e,Y.axis=_,Y.crossAxis=S,Y.value=A[G],Y.constvar=a,Y.index=G,Y.x=K,Y.y=te,Y.smoothing=S.smoothing,Y}if(_.tickmode==="array"){for(h=5e-15,i=[Math.floor((A.length-1-_.arraytick0)/_.arraydtick*(1+h)),Math.ceil(-_.arraytick0/_.arraydtick/(1+h))].sort(function(G,Q){return G-Q}),s=i[0]-1,y=i[1]+1,d=s;d<y;d++)r=_.arraytick0+_.arraydtick*d,!(r<0||r>A.length-1)&&g.push(f(B(r),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(d=s;d<y;d++)if(t=_.arraytick0+_.arraydtick*d,m=Math.min(t+_.arraydtick,A.length-1),!(t<0||t>A.length-1)&&!(m<0||m>A.length-1))for(l=A[t],x=A[m],n=0;n<_.minorgridcount;n++)u=m-t,!(u<=0)&&(c=l+(x-l)*(n+1)/(_.minorgridcount+1)*(_.arraydtick/u),!(c<A[0]||c>A[A.length-1])&&b.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash})));_.startline&&v.push(f(B(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(f(B(A.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(h=5e-15,i=[Math.floor((A[A.length-1]-_.tick0)/_.dtick*(1+h)),Math.ceil((A[0]-_.tick0)/_.dtick/(1+h))].sort(function(G,Q){return G-Q}),s=i[0],y=i[1],d=s;d<=y;d++)p=_.tick0+_.dtick*d,g.push(f(z(p),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(d=s-1;d<y+1;d++)for(p=_.tick0+_.dtick*d,n=0;n<_.minorgridcount;n++)c=p+_.dtick*(n+1)/(_.minorgridcount+1),!(c<A[0]||c>A[A.length-1])&&b.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&v.push(f(z(A[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(f(z(A[A.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib/extend").extendFlat;U.exports=function(T,e){var a,n,r,t,h,i=e._labels=[],s=e._gridlines;for(a=0;a<s.length;a++)h=s[a],["start","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,h.value),f(n,{prefix:r,suffix:t,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:a===0,isLast:a===s.length-1}),i.push(n)),["end","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,h.value),f(n,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:a===0,isLast:a===s.length-1}),i.push(n))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(o,U,H){var w=.5;U.exports=function(M,T,e,a){var n=M[0]-T[0],r=M[1]-T[1],t=e[0]-T[0],h=e[1]-T[1],i=Math.pow(n*n+r*r,w/2),s=Math.pow(t*t+h*h,w/2),y=(s*s*n-i*i*t)*a,d=(s*s*r-i*i*h)*a,p=s*(i+s)*3,c=i*(i+s)*3;return[[T[0]+(p&&y/p),T[1]+(p&&d/p)],[T[0]-(c&&y/c),T[1]-(c&&d/c)]]}},{}],709:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray;U.exports=function(f,M,T){var e,a,n,r,t,h,i=[],s=w(f)?f.length:f,y=w(M)?M.length:M,d=w(f)?f:null,p=w(M)?M:null;d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(s-1)),p&&(r=(p.length-1)/(p[p.length-1]-p[0])/(y-1));var c,m=1/0,l=-1/0;for(a=0;a<y;a++)for(i[a]=[],h=p?(p[a]-p[0])*r:a/(y-1),e=0;e<s;e++)t=d?(d[e]-d[0])*n:e/(s-1),c=t-h*T,m=Math.min(c,m),l=Math.max(c,l),i[a][e]=c;var x=1/(l-m),u=-m*x;for(a=0;a<y;a++)for(e=0;e<s;e++)i[a][e]=x*i[a][e]+u;return i}},{"../../lib":515}],710:[function(o,U,H){var w=o("./catmull_rom"),f=o("../../lib").ensureArray;function M(T,e,a){var n=-.5*a[0]+1.5*e[0],r=-.5*a[1]+1.5*e[1];return[(2*n+T[0])/3,(2*r+T[1])/3]}U.exports=function(e,a,n,r,t,h){var i,s,y,d,p,c,m,l,x,u,A=n[0].length,_=n.length,g=t?3*A-2:A,b=h?3*_-2:_;for(e=f(e,b),a=f(a,b),y=0;y<b;y++)e[y]=f(e[y],g),a[y]=f(a[y],g);for(s=0,d=0;s<_;s++,d+=h?3:1)for(p=e[d],c=a[d],m=n[s],l=r[s],i=0,y=0;i<A;i++,y+=t?3:1)p[y]=m[i],c[y]=l[i];if(t)for(s=0,d=0;s<_;s++,d+=h?3:1){for(i=1,y=3;i<A-1;i++,y+=3)x=w([n[s][i-1],r[s][i-1]],[n[s][i],r[s][i]],[n[s][i+1],r[s][i+1]],t),e[d][y-1]=x[0][0],a[d][y-1]=x[0][1],e[d][y+1]=x[1][0],a[d][y+1]=x[1][1];u=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=u[0],a[d][1]=u[1],u=M([e[d][g-1],a[d][g-1]],[e[d][g-3],a[d][g-3]],[e[d][g-4],a[d][g-4]]),e[d][g-2]=u[0],a[d][g-2]=u[1]}if(h)for(y=0;y<g;y++){for(d=3;d<b-3;d+=3)x=w([e[d-3][y],a[d-3][y]],[e[d][y],a[d][y]],[e[d+3][y],a[d+3][y]],h),e[d-1][y]=x[0][0],a[d-1][y]=x[0][1],e[d+1][y]=x[1][0],a[d+1][y]=x[1][1];u=M([e[0][y],a[0][y]],[e[2][y],a[2][y]],[e[3][y],a[3][y]]),e[1][y]=u[0],a[1][y]=u[1],u=M([e[b-1][y],a[b-1][y]],[e[b-3][y],a[b-3][y]],[e[b-4][y],a[b-4][y]]),e[b-2][y]=u[0],a[b-2][y]=u[1]}if(t&&h)for(d=1;d<b;d+=(d+1)%3===0?2:1){for(y=3;y<g-3;y+=3)x=w([e[d][y-3],a[d][y-3]],[e[d][y],a[d][y]],[e[d][y+3],a[d][y+3]],t),e[d][y-1]=.5*(e[d][y-1]+x[0][0]),a[d][y-1]=.5*(a[d][y-1]+x[0][1]),e[d][y+1]=.5*(e[d][y+1]+x[1][0]),a[d][y+1]=.5*(a[d][y+1]+x[1][1]);u=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=.5*(e[d][1]+u[0]),a[d][1]=.5*(a[d][1]+u[1]),u=M([e[d][g-1],a[d][g-1]],[e[d][g-3],a[d][g-3]],[e[d][g-4],a[d][g-4]]),e[d][g-2]=.5*(e[d][g-2]+u[0]),a[d][g-2]=.5*(a[d][g-2]+u[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(o,U,H){U.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(o,U,H){U.exports=function(w,f,M){return f&&M?function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y,d;e*=3,a*=3;var p=n*n,c=1-n,m=c*c,l=c*n*2,x=-3*m,u=3*(m-l),A=3*(l-p),_=3*p,g=r*r,b=g*r,v=1-r,C=v*v,S=C*v;for(d=0;d<w.length;d++)y=w[d],t=x*y[a][e]+u*y[a][e+1]+A*y[a][e+2]+_*y[a][e+3],h=x*y[a+1][e]+u*y[a+1][e+1]+A*y[a+1][e+2]+_*y[a+1][e+3],i=x*y[a+2][e]+u*y[a+2][e+1]+A*y[a+2][e+2]+_*y[a+2][e+3],s=x*y[a+3][e]+u*y[a+3][e+1]+A*y[a+3][e+2]+_*y[a+3][e+3],T[d]=S*t+3*(C*r*h+v*g*i)+b*s;return T}:f?function(T,e,a,n,r){T||(T=[]);var t,h,i,s;e*=3;var y=n*n,d=1-n,p=d*d,c=d*n*2,m=-3*p,l=3*(p-c),x=3*(c-y),u=3*y,A=1-r;for(i=0;i<w.length;i++)s=w[i],t=m*s[a][e]+l*s[a][e+1]+x*s[a][e+2]+u*s[a][e+3],h=m*s[a+1][e]+l*s[a+1][e+1]+x*s[a+1][e+2]+u*s[a+1][e+3],T[i]=A*t+r*h;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y,d;a*=3;var p=r*r,c=p*r,m=1-r,l=m*m,x=l*m;for(y=0;y<w.length;y++)d=w[y],t=d[a][e+1]-d[a][e],h=d[a+1][e+1]-d[a+1][e],i=d[a+2][e+1]-d[a+2][e],s=d[a+3][e+1]-d[a+3][e],T[y]=x*t+3*(l*r*h+m*p*i)+c*s;return T}:function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y=1-r;for(i=0;i<w.length;i++)s=w[i],t=s[a][e+1]-s[a][e],h=s[a+1][e+1]-s[a+1][e],T[i]=y*t+r*h;return T}}},{}],713:[function(o,U,H){U.exports=function(w,f,M){return f&&M?function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y,d;e*=3,a*=3;var p=n*n,c=p*n,m=1-n,l=m*m,x=l*m,u=r*r,A=1-r,_=A*A,g=A*r*2,b=-3*_,v=3*(_-g),C=3*(g-u),S=3*u;for(d=0;d<w.length;d++)y=w[d],t=b*y[a][e]+v*y[a+1][e]+C*y[a+2][e]+S*y[a+3][e],h=b*y[a][e+1]+v*y[a+1][e+1]+C*y[a+2][e+1]+S*y[a+3][e+1],i=b*y[a][e+2]+v*y[a+1][e+2]+C*y[a+2][e+2]+S*y[a+3][e+2],s=b*y[a][e+3]+v*y[a+1][e+3]+C*y[a+2][e+3]+S*y[a+3][e+3],T[d]=x*t+3*(l*n*h+m*p*i)+c*s;return T}:f?function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y,d;e*=3;var p=r*r,c=p*r,m=1-r,l=m*m,x=l*m;for(y=0;y<w.length;y++)d=w[y],t=d[a+1][e]-d[a][e],h=d[a+1][e+1]-d[a][e+1],i=d[a+1][e+2]-d[a][e+2],s=d[a+1][e+3]-d[a][e+3],T[y]=x*t+3*(l*r*h+m*p*i)+c*s;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,h,i,s;a*=3;var y=1-n,d=r*r,p=1-r,c=p*p,m=p*r*2,l=-3*c,x=3*(c-m),u=3*(m-d),A=3*d;for(i=0;i<w.length;i++)s=w[i],t=l*s[a][e]+x*s[a+1][e]+u*s[a+2][e]+A*s[a+3][e],h=l*s[a][e+1]+x*s[a+1][e+1]+u*s[a+2][e+1]+A*s[a+3][e+1],T[i]=y*t+n*h;return T}:function(T,e,a,n,r){T||(T=[]);var t,h,i,s,y=1-n;for(i=0;i<w.length;i++)s=w[i],t=s[a+1][e]-s[a][e],h=s[a+1][e+1]-s[a][e+1],T[i]=y*t+n*h;return T}}},{}],714:[function(o,U,H){U.exports=function(w,f,M,T,e){var a=f-2,n=M-2;return T&&e?function(r,t,h){r||(r=[]);var i,s,y,d,p,c,m=Math.max(0,Math.min(Math.floor(t),a)),l=Math.max(0,Math.min(Math.floor(h),n)),x=Math.max(0,Math.min(1,t-m)),u=Math.max(0,Math.min(1,h-l));m*=3,l*=3;var A=x*x,_=A*x,g=1-x,b=g*g,v=b*g,C=u*u,S=C*u,k=1-u,E=k*k,F=E*k;for(c=0;c<w.length;c++)p=w[c],i=v*p[l][m]+3*(b*x*p[l][m+1]+g*A*p[l][m+2])+_*p[l][m+3],s=v*p[l+1][m]+3*(b*x*p[l+1][m+1]+g*A*p[l+1][m+2])+_*p[l+1][m+3],y=v*p[l+2][m]+3*(b*x*p[l+2][m+1]+g*A*p[l+2][m+2])+_*p[l+2][m+3],d=v*p[l+3][m]+3*(b*x*p[l+3][m+1]+g*A*p[l+3][m+2])+_*p[l+3][m+3],r[c]=F*i+3*(E*u*s+k*C*y)+S*d;return r}:T?function(r,t,h){r||(r=[]);var i=Math.max(0,Math.min(Math.floor(t),a)),s=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-i)),d=Math.max(0,Math.min(1,h-s)),p,c,m,l,x,u;i*=3;var A=y*y,_=A*y,g=1-y,b=g*g,v=b*g,C=1-d;for(x=0;x<w.length;x++)u=w[x],p=C*u[s][i]+d*u[s+1][i],c=C*u[s][i+1]+d*u[s+1][i+1],m=C*u[s][i+2]+d*u[s+1][i+1],l=C*u[s][i+3]+d*u[s+1][i+1],r[x]=v*p+3*(b*y*c+g*A*m)+_*l;return r}:e?function(r,t,h){r||(r=[]);var i=Math.max(0,Math.min(Math.floor(t),a)),s=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-i)),d=Math.max(0,Math.min(1,h-s)),p,c,m,l,x,u;s*=3;var A=d*d,_=A*d,g=1-d,b=g*g,v=b*g,C=1-y;for(x=0;x<w.length;x++)u=w[x],p=C*u[s][i]+y*u[s][i+1],c=C*u[s+1][i]+y*u[s+1][i+1],m=C*u[s+2][i]+y*u[s+2][i+1],l=C*u[s+3][i]+y*u[s+3][i+1],r[x]=v*p+3*(b*d*c+g*A*m)+_*l;return r}:function(r,t,h){r||(r=[]);var i=Math.max(0,Math.min(Math.floor(t),a)),s=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-i)),d=Math.max(0,Math.min(1,h-s)),p,c,m,l,x=1-d,u=1-y;for(m=0;m<w.length;m++)l=w[m],p=u*l[s][i]+y*l[s][i+1],c=u*l[s+1][i]+y*l[s+1][i+1],r[m]=x*p+d*c;return r}}},{}],715:[function(o,U,H){var w=o("../../lib"),f=o("./xy_defaults"),M=o("./ab_defaults"),T=o("./attributes"),e=o("../../components/color/attributes");U.exports=function(n,r,t,h){function i(d,p){return w.coerce(n,r,T,d,p)}r._clipPathId="clip"+r.uid+"carpet";var s=i("color",e.defaultLine);if(w.coerceFont(i,"font"),i("carpet"),M(n,r,h,i,s),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var y=f(n,r,i);y||(r.visible=!1),r._cheater&&i("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),plot:o("./plot"),calc:o("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(o,U,H){U.exports=function(w,f){for(var M=w._fullData.length,T,e=0;e<M;e++){var a=w._fullData[e];if(a.index!==f.index&&a.type==="carpet"&&(T||(T=a),a.carpet===f.carpet))return a}return T}},{}],718:[function(o,U,H){U.exports=function(f,M,T){if(f.length===0)return"";var e,a=[],n=T?3:1;for(e=0;e<f.length;e+=n)a.push(f[e]+","+M[e]),T&&e<f.length-n&&(a.push("C"),a.push([f[e+1]+","+M[e+1],f[e+2]+","+M[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray;U.exports=function(M,T,e){var a;for(w(M)?M.length>T.length&&(M=M.slice(0,T.length)):M=[],a=0;a<T.length;a++)M[a]=e(T[a]);return M}},{"../../lib":515}],720:[function(o,U,H){U.exports=function(f,M,T,e,a,n){var r=a[0]*f.dpdx(M),t=a[1]*f.dpdy(T),h=1,i=1;if(n){var s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),y=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=(a[0]*n[0]+a[1]*n[1])/s/y;i=Math.max(0,d)}var p=Math.atan2(t,r)*180/Math.PI;return p<-90?(p+=180,h=-h):p>90&&(p-=180,h=-h),{angle:p,flip:h,p:f.c2p(e,M,T),offsetMultplier:i}}},{}],721:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("./map_1d_array"),T=o("./makepath"),e=o("./orient_text"),a=o("../../lib/svg_text_utils"),n=o("../../lib"),r=n.strRotate,t=n.strTranslate,h=o("../../constants/alignment");U.exports=function(x,u,A,_){var g=u.xaxis,b=u.yaxis,v=x._fullLayout,C=v._clips;n.makeTraceGroups(_,A,"trace").each(function(S){var k=w.select(this),E=S[0],F=E.trace,I=F.aaxis,D=F.baxis,R=n.ensureSingle(k,"g","minorlayer"),O=n.ensureSingle(k,"g","majorlayer"),z=n.ensureSingle(k,"g","boundarylayer"),B=n.ensureSingle(k,"g","labellayer");k.style("opacity",F.opacity),s(g,b,O,I,"a",I._gridlines),s(g,b,O,D,"b",D._gridlines),s(g,b,R,I,"a",I._minorgridlines),s(g,b,R,D,"b",D._minorgridlines),s(g,b,z,I,"a-boundary",I._boundarylines),s(g,b,z,D,"b-boundary",D._boundarylines);var G=y(x,g,b,F,E,B,I._labels,"a-label"),Q=y(x,g,b,F,E,B,D._labels,"b-label");d(x,B,F,E,g,b,G,Q),i(F,E,C,g,b)})};function i(l,x,u,A,_){var g,b,v,C,S=u.select("#"+l._clipPathId);S.size()||(S=u.append("clipPath").classed("carpetclip",!0));var k=n.ensureSingle(S,"path","carpetboundary"),E=x.clipsegments,F=[];for(C=0;C<E.length;C++)g=E[C],b=M([],g.x,A.c2p),v=M([],g.y,_.c2p),F.push(T(b,v,g.bicubic));var I="M"+F.join("L")+"Z";S.attr("id",l._clipPathId),k.attr("d",I)}function s(l,x,u,A,_,g){var b="const-"+_+"-lines",v=u.selectAll("."+b).data(g);v.enter().append("path").classed(b,!0).style("vector-effect","non-scaling-stroke"),v.each(function(C){var S=C,k=S.x,E=S.y,F=M([],k,l.c2p),I=M([],E,x.c2p),D="M"+T(F,I,S.smoothing),R=w.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",f.dashStyle(S.dash,S.width)).style("fill","none")}),v.exit().remove()}function y(l,x,u,A,_,g,b,v){var C=g.selectAll("text."+v).data(b);C.enter().append("text").classed(v,!0);var S=0,k={};return C.each(function(E,F){var I;if(E.axis.tickangle==="auto")I=e(A,x,u,E.xy,E.dxy);else{var D=(E.axis.tickangle+180)*Math.PI/180;I=e(A,x,u,E.xy,[Math.cos(D),Math.sin(D)])}F||(k={angle:I.angle,flip:I.flip});var R=(E.endAnchor?-1:1)*I.flip,O=w.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(f.font,E.font).text(E.text).call(a.convertToTspans,l),z=f.bBox(this);O.attr("transform",t(I.p[0],I.p[1])+r(I.angle)+t(E.axis.labelpadding*R,z.height*.3)),S=Math.max(S,z.width+E.axis.labelpadding)}),C.exit().remove(),k.maxExtent=S,k}function d(l,x,u,A,_,g,b,v){var C,S,k,E,F=n.aggNums(Math.min,null,u.a),I=n.aggNums(Math.max,null,u.a),D=n.aggNums(Math.min,null,u.b),R=n.aggNums(Math.max,null,u.b);C=.5*(F+I),S=D,k=u.ab2xy(C,S,!0),E=u.dxyda_rough(C,S),b.angle===void 0&&n.extendFlat(b,e(u,_,g,k,u.dxydb_rough(C,S))),m(l,x,u,A,k,E,u.aaxis,_,g,b,"a-title"),C=F,S=.5*(D+R),k=u.ab2xy(C,S,!0),E=u.dxydb_rough(C,S),v.angle===void 0&&n.extendFlat(v,e(u,_,g,k,u.dxyda_rough(C,S))),m(l,x,u,A,k,E,u.baxis,_,g,v,"b-title")}var p=h.LINE_SPACING,c=(1-h.MID_SHIFT)/p+1;function m(l,x,u,A,_,g,b,v,C,S,k){var E=[];b.title.text&&E.push(b.title.text);var F=x.selectAll("text."+k).data(E),I=S.maxExtent;F.enter().append("text").classed(k,!0),F.each(function(){var D=e(u,v,C,_,g);["start","both"].indexOf(b.showticklabels)===-1&&(I=0);var R=b.title.font.size;I+=R+b.title.offset;var O=S.angle+(S.flip<0?180:0),z=(O-D.angle+450)%360,B=z>90&&z<270,G=w.select(this);G.text(b.title.text).call(a.convertToTspans,l),B&&(I=(-a.lineCount(G)+c)*p*R-I),G.attr("transform",t(D.p[0],D.p[1])+r(D.angle)+t(0,I)).attr("text-anchor","middle").call(f.font,b.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(o,U,H){var w=o("./constants"),f=o("../../lib/search").findBin,M=o("./compute_control_points"),T=o("./create_spline_evaluator"),e=o("./create_i_derivative_evaluator"),a=o("./create_j_derivative_evaluator");U.exports=function(r){var t=r._a,h=r._b,i=t.length,s=h.length,y=r.aaxis,d=r.baxis,p=t[0],c=t[i-1],m=h[0],l=h[s-1],x=t[t.length-1]-t[0],u=h[h.length-1]-h[0],A=x*w.RELATIVE_CULL_TOLERANCE,_=u*w.RELATIVE_CULL_TOLERANCE;p-=A,c+=A,m-=_,l+=_,r.isVisible=function(g,b){return g>p&&g<c&&b>m&&b<l},r.isOccluded=function(g,b){return g<p||g>c||b<m||b>l},r.setScale=function(){var g=r._x,b=r._y,v=M(r._xctrl,r._yctrl,g,b,y.smoothing,d.smoothing);r._xctrl=v[0],r._yctrl=v[1],r.evalxy=T([r._xctrl,r._yctrl],i,s,y.smoothing,d.smoothing),r.dxydi=e([r._xctrl,r._yctrl],y.smoothing,d.smoothing),r.dxydj=a([r._xctrl,r._yctrl],y.smoothing,d.smoothing)},r.i2a=function(g){var b=Math.max(0,Math.floor(g[0]),i-2),v=g[0]-b;return(1-v)*t[b]+v*t[b+1]},r.j2b=function(g){var b=Math.max(0,Math.floor(g[1]),i-2),v=g[1]-b;return(1-v)*h[b]+v*h[b+1]},r.ij2ab=function(g){return[r.i2a(g[0]),r.j2b(g[1])]},r.a2i=function(g){var b=Math.max(0,Math.min(f(g,t),i-2)),v=t[b],C=t[b+1];return Math.max(0,Math.min(i-1,b+(g-v)/(C-v)))},r.b2j=function(g){var b=Math.max(0,Math.min(f(g,h),s-2)),v=h[b],C=h[b+1];return Math.max(0,Math.min(s-1,b+(g-v)/(C-v)))},r.ab2ij=function(g){return[r.a2i(g[0]),r.b2j(g[1])]},r.i2c=function(g,b){return r.evalxy([],g,b)},r.ab2xy=function(g,b,v){if(!v&&(g<t[0]||g>t[i-1]|b<h[0]||b>h[s-1]))return[!1,!1];var C=r.a2i(g),S=r.b2j(b),k=r.evalxy([],C,S);if(v){var E=0,F=0,I=[],D,R,O,z;g<t[0]?(D=0,R=0,E=(g-t[0])/(t[1]-t[0])):g>t[i-1]?(D=i-2,R=1,E=(g-t[i-1])/(t[i-1]-t[i-2])):(D=Math.max(0,Math.min(i-2,Math.floor(C))),R=C-D),b<h[0]?(O=0,z=0,F=(b-h[0])/(h[1]-h[0])):b>h[s-1]?(O=s-2,z=1,F=(b-h[s-1])/(h[s-1]-h[s-2])):(O=Math.max(0,Math.min(s-2,Math.floor(S))),z=S-O),E&&(r.dxydi(I,D,O,R,z),k[0]+=I[0]*E,k[1]+=I[1]*E),F&&(r.dxydj(I,D,O,R,z),k[0]+=I[0]*F,k[1]+=I[1]*F)}return k},r.c2p=function(g,b,v){return[b.c2p(g[0]),v.c2p(g[1])]},r.p2x=function(g,b,v){return[b.p2c(g[0]),v.p2c(g[1])]},r.dadi=function(g){var b=Math.max(0,Math.min(t.length-2,g));return t[b+1]-t[b]},r.dbdj=function(g){var b=Math.max(0,Math.min(h.length-2,g));return h[b+1]-h[b]},r.dxyda=function(g,b,v,C){var S=r.dxydi(null,g,b,v,C),k=r.dadi(g,v);return[S[0]/k,S[1]/k]},r.dxydb=function(g,b,v,C){var S=r.dxydj(null,g,b,v,C),k=r.dbdj(b,C);return[S[0]/k,S[1]/k]},r.dxyda_rough=function(g,b,v){var C=x*(v||.1),S=r.ab2xy(g+C,b,!0),k=r.ab2xy(g-C,b,!0);return[(S[0]-k[0])*.5/C,(S[1]-k[1])*.5/C]},r.dxydb_rough=function(g,b,v){var C=u*(v||.1),S=r.ab2xy(g,b+C,!0),k=r.ab2xy(g,b-C,!0);return[(S[0]-k[0])*.5/C,(S[1]-k[1])*.5/C]},r.dpdx=function(g){return g._m},r.dpdy=function(g){return g._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T,e){var a,n,r,t=[],h=[],i=M[0].length,s=M.length;function y(X,j){var re=0,ue,K=0;return X>0&&(ue=M[j][X-1])!==void 0&&(K++,re+=ue),X<i-1&&(ue=M[j][X+1])!==void 0&&(K++,re+=ue),j>0&&(ue=M[j-1][X])!==void 0&&(K++,re+=ue),j<s-1&&(ue=M[j+1][X])!==void 0&&(K++,re+=ue),re/Math.max(1,K)}var d=0;for(a=0;a<i;a++)for(n=0;n<s;n++)M[n][a]===void 0&&(t.push(a),h.push(n),M[n][a]=y(a,n)),d=Math.max(d,Math.abs(M[n][a]));if(!t.length)return M;var p,c,m,l,x,u,A,_,g,b,v,C=1e-5,S=0,k=100,E=0,F=t.length;do{for(S=0,r=0;r<F;r++){a=t[r],n=h[r];var I=0,D=0,R,O,z,B,G,Q;a===0?(G=Math.min(i-1,2),z=T[G],B=T[1],R=M[n][G],O=M[n][1],D+=O+(O-R)*(T[0]-B)/(B-z),I++):a===i-1&&(G=Math.max(0,i-3),z=T[G],B=T[i-2],R=M[n][G],O=M[n][i-2],D+=O+(O-R)*(T[i-1]-B)/(B-z),I++),(a===0||a===i-1)&&n>0&&n<s-1&&(p=e[n+1]-e[n],c=e[n]-e[n-1],D+=(c*M[n+1][a]+p*M[n-1][a])/(c+p),I++),n===0?(Q=Math.min(s-1,2),z=e[Q],B=e[1],R=M[Q][a],O=M[1][a],D+=O+(O-R)*(e[0]-B)/(B-z),I++):n===s-1&&(Q=Math.max(0,s-3),z=e[Q],B=e[s-2],R=M[Q][a],O=M[s-2][a],D+=O+(O-R)*(e[s-1]-B)/(B-z),I++),(n===0||n===s-1)&&a>0&&a<i-1&&(p=T[a+1]-T[a],c=T[a]-T[a-1],D+=(c*M[n][a+1]+p*M[n][a-1])/(c+p),I++),I?D/=I:(m=T[a+1]-T[a],l=T[a]-T[a-1],x=e[n+1]-e[n],u=e[n]-e[n-1],A=m*l*(m+l),_=x*u*(x+u),D=(A*(u*M[n+1][a]+x*M[n-1][a])+_*(l*M[n][a+1]+m*M[n][a-1]))/(_*(l+m)+A*(u+x))),g=D-M[n][a],b=g/d,S+=b*b,v=I?0:.85,M[n][a]+=g*(1+v)}S=Math.sqrt(S)}while(E++<k&&S>C);return w.log("Smoother converged to",S,"after",E,"iterations"),M}},{"../../lib":515}],724:[function(o,U,H){var w=o("../../lib").isArray1D;U.exports=function(M,T,e){var a=e("x"),n=a&&a.length,r=e("y"),t=r&&r.length;if(!n&&!t)return!1;if(T._cheater=!a,(!n||w(a))&&(!t||w(r))){var h=n?a.length:1/0;t&&(h=Math.min(h,r.length)),T.a&&T.a.length&&(h=Math.min(h,T.a.length)),T.b&&T.b.length&&(h=Math.min(h,T.b.length)),T._length=h}else T._length=null;return!0}},{"../../lib":515}],725:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../scattergeo/attributes"),M=o("../../components/colorscale/attributes"),T=o("../../plots/attributes"),e=o("../../components/color/attributes").defaultLine,a=o("../../lib/extend").extendFlat,n=f.marker.line;U.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:f.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},f.geojson,{}),featureidkey:f.featureidkey,text:a({},f.text,{}),hovertext:a({},f.hovertext,{}),marker:{line:{color:a({},n.color,{dflt:e}),width:a({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:f.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:f.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:w(),showlegend:a({},T.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../constants/numerical").BADNUM,M=o("../../components/colorscale/calc"),T=o("../scatter/arrays_to_calcdata"),e=o("../scatter/calc_selection");function a(n){return n&&typeof n=="string"}U.exports=function(r,t){var h=t._length,i=new Array(h),s;t.geojson?s=function(m){return a(m)||w(m)}:s=a;for(var y=0;y<h;y++){var d=i[y]={},p=t.locations[y],c=t.z[y];s(p)&&w(c)?(d.loc=p,d.z=c):(d.loc=null,d.z=f),d.index=y}return T(i,t),M(r,t,{vals:t.z,containerStr:"",cLetter:"z"}),e(i,t),i}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/defaults"),M=o("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("locations"),i=t("z");if(!(h&&h.length&&w.isArrayOrTypedArray(i)&&i.length)){a.visible=!1;return}a._length=Math.min(h.length,i.length);var s=t("geojson"),y;(typeof s=="string"&&s!==""||w.isPlainObject(s))&&(y="geojson-id");var d=t("locationmode",y);d==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate");var p=t("marker.line.width");p&&t("marker.line.color"),t("marker.opacity"),f(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(o,U,H){U.exports=function(f,M,T,e,a){f.location=M.location,f.z=M.z;var n=e[a];return n.fIn&&n.fIn.properties&&(f.properties=n.fIn.properties),f.ct=n.ct,f}},{}],729:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("./attributes"),M=o("../../lib").fillText;U.exports=function(a,n,r){var t=a.cd,h=t[0].trace,i=a.subplot,s,y,d,p,c=[n,r],m=[n+360,r];for(y=0;y<t.length;y++)if(s=t[y],p=!1,s._polygons){for(d=0;d<s._polygons.length;d++)s._polygons[d].contains(c)&&(p=!p),s._polygons[d].contains(m)&&(p=!p);if(p)break}if(!(!p||!s))return a.x0=a.x1=a.xa.c2p(s.ct),a.y0=a.y1=a.ya.c2p(s.ct),a.index=s.index,a.location=s.loc,a.z=s.z,a.zLabel=w.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,a.hovertemplate=s.hovertemplate,T(a,h,s),[a]};function T(e,a,n){if(!a.hovertemplate){var r=n.hi||a.hoverinfo,t=String(n.loc),h=r==="all"?f.hoverinfo.flags:r.split("+"),i=h.indexOf("name")!==-1,s=h.indexOf("location")!==-1,y=h.indexOf("z")!==-1,d=h.indexOf("text")!==-1,p=!i&&s,c=[];p?e.nameOverride=t:(i&&(e.nameOverride=a.name),s&&c.push(t)),y&&c.push(e.zLabel),d&&M(n,a,c),e.extraText=c.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../heatmap/colorbar"),calc:o("./calc"),calcGeoJSON:o("./plot").calcGeoJSON,plot:o("./plot").plot,style:o("./style").style,styleOnSelect:o("./style").styleOnSelect,hoverPoints:o("./hover"),eventData:o("./event_data"),selectPoints:o("./select"),moduleType:"trace",name:"choropleth",basePlotModule:o("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../lib/geo_location_utils"),T=o("../../lib/topojson_utils").getTopojsonFeatures,e=o("../../plots/cartesian/autorange").findExtremes,a=o("./style").style;function n(t,h,i){var s=h.layers.backplot.select(".choroplethlayer");f.makeTraceGroups(s,i,"trace choropleth").each(function(y){var d=w.select(this),p=d.selectAll("path.choroplethlocation").data(f.identity);p.enter().append("path").classed("choroplethlocation",!0),p.exit().remove(),a(t,y)})}function r(t,h){for(var i=t[0].trace,s=h[i.geo],y=s._subplot,d=i.locationmode,p=i._length,c=d==="geojson-id"?M.extractTraceFeature(t):T(i,y.topojson),m=[],l=[],x=0;x<p;x++){var u=t[x],A=d==="geojson-id"?u.fOut:M.locationToFeature(d,u.loc,c);if(A){u.geojson=A,u.ct=A.properties.ct,u._polygons=M.feature2polygons(A);var _=M.computeBbox(A);m.push(_[0],_[2]),l.push(_[1],_[3])}else u.geojson=null}if(s.fitbounds==="geojson"&&d==="geojson-id"){var g=M.computeBbox(M.getTraceGeojson(i));m=[g[0],g[2]],l=[g[1],g[3]]}var b={padded:!0};i._extremes.lon=e(s.lonaxis._ax,m,b),i._extremes.lat=e(s.lataxis._ax,l,b)}U.exports={calcGeoJSON:r,plot:n}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(o,U,H){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t,h,i,s;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++)t=T[r],h=t.ct,h&&(i=e.c2p(h),s=a.c2p(h),M.contains([i,s],null,r,f)?(n.push({pointNumber:r,lon:h[0],lat:h[1]}),t.selected=1):t.selected=0);return n}},{}],733:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../components/drawing"),T=o("../../components/colorscale");function e(r,t){t&&a(r,t)}function a(r,t){var h=t[0].trace,i=t[0].node3,s=i.selectAll(".choroplethlocation"),y=h.marker||{},d=y.line||{},p=T.makeColorScaleFuncFromTrace(h);s.each(function(c){w.select(this).attr("fill",p(c.z)).call(f.stroke,c.mlc||d.color).call(M.dashLine,"",c.mlw||d.width||0).style("opacity",y.opacity)}),M.selectedPointStyle(s,h)}function n(r,t){var h=t[0].node3,i=t[0].trace;i.selectedpoints?M.selectedPointStyle(h.selectAll(".choroplethlocation"),i):a(r,t)}U.exports={style:e,styleOnSelect:n}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(o,U,H){var w=o("../choropleth/attributes"),f=o("../../components/colorscale/attributes"),M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../../plots/attributes"),e=o("../../lib/extend").extendFlat;U.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},w.featureidkey,{}),below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,marker:{line:{color:e({},w.marker.line.color,{editType:"plot"}),width:e({},w.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},w.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},w.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},w.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:w.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},f("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../components/colorscale"),T=o("../../components/drawing"),e=o("../../lib/geojson_utils").makeBlank,a=o("../../lib/geo_location_utils");function n(t){var h=t[0].trace,i=h.visible===!0&&h._length!==0,s={layout:{visibility:"none"},paint:{}},y={layout:{visibility:"none"},paint:{}},d=h._opts={fill:s,line:y,geojson:e()};if(!i)return d;var p=a.extractTraceFeature(t);if(!p)return d;var c=M.makeColorScaleFuncFromTrace(h),m=h.marker,l=m.line||{},x;f.isArrayOrTypedArray(m.opacity)&&(x=function(S){var k=S.mo;return w(k)?+f.constrain(k,0,1):0});var u;f.isArrayOrTypedArray(l.color)&&(u=function(S){return S.mlc});var A;f.isArrayOrTypedArray(l.width)&&(A=function(S){return S.mlw});for(var _=0;_<t.length;_++){var g=t[_],b=g.fOut;if(b){var v=b.properties;v.fc=c(g.z),x&&(v.mo=x(g)),u&&(v.mlc=u(g)),A&&(v.mlw=A(g)),g.ct=v.ct,g._polygons=a.feature2polygons(b)}}var C=x?{type:"identity",property:"mo"}:m.opacity;return f.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),f.extendFlat(y.paint,{"line-color":u?{type:"identity",property:"mlc"}:l.color,"line-width":A?{type:"identity",property:"mlw"}:l.width,"line-opacity":C}),s.layout.visibility="visible",y.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:p},r(t),d}function r(t){var h=t[0].trace,i=h._opts,s;if(h.selectedpoints){for(var y=T.makeSelectedPointStyleFns(h),d=0;d<t.length;d++){var p=t[d];p.fOut&&(p.fOut.properties.mo2=y.selectedOpacityFn(p))}s={type:"identity",property:"mo2"}}else s=f.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return f.extendFlat(i.fill.paint,{"fill-opacity":s}),f.extendFlat(i.line.paint,{"line-opacity":s}),i}U.exports={convert:n,convertOnSelect:r}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/defaults"),M=o("./attributes");U.exports=function(e,a,n,r){function t(d,p){return w.coerce(e,a,M,d,p)}var h=t("locations"),i=t("z"),s=t("geojson");if(!w.isArrayOrTypedArray(h)||!h.length||!w.isArrayOrTypedArray(i)||!i.length||!(typeof s=="string"&&s!==""||w.isPlainObject(s))){a.visible=!1;return}t("featureidkey"),a._length=Math.min(h.length,i.length),t("below"),t("text"),t("hovertext"),t("hovertemplate");var y=t("marker.line.width");y&&t("marker.line.color"),t("marker.opacity"),f(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../heatmap/colorbar"),calc:o("../choropleth/calc"),plot:o("./plot"),hoverPoints:o("../choropleth/hover"),eventData:o("../choropleth/event_data"),selectPoints:o("../choropleth/select"),styleOnSelect:function(w,f){if(f){var M=f[0].trace;M._glTrace.updateOnSelect(f)}},getBelow:function(w,f){for(var M=f.getMapLayers(),T=M.length-2;T>=0;T--){var e=M[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<M.length;a++)if(e=M[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:o("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(o,U,H){var w=o("./convert").convert,f=o("./convert").convertOnSelect,M=o("../../plots/mapbox/constants").traceLayerPrefix;function T(a,n){this.type="choroplethmapbox",this.subplot=a,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",M+n+"-fill"],["line",M+n+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(w(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(f(a))},e._update=function(a){var n=this.subplot,r=this.layerList,t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(a,t),this.below=t);for(var h=0;h<r.length;h++){var i=r[h],s=i[0],y=i[1],d=a[s];n.setOptions(y,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&n.setOptions(y,"setPaintProperty",d.paint)}},e._addLayers=function(a,n){for(var r=this.subplot,t=this.layerList,h=this.sourceId,i=0;i<t.length;i++){var s=t[i],y=s[0],d=a[y];r.addLayer({type:y,id:s[1],source:h,layout:d.layout,paint:d.paint},n)}},e._removeLayers=function(){for(var a=this.subplot.map,n=this.layerList,r=n.length-1;r>=0;r--)a.removeLayer(n[r][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},U.exports=function(n,r){var t=r[0].trace,h=new T(n,t.uid),i=h.sourceId,s=w(r),y=h.below=n.belowLookup["trace-"+t.uid];return n.map.addSource(i,{type:"geojson",data:s.geojson}),h._addLayers(s,y),r[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../mesh3d/attributes"),e=o("../../plots/attributes"),a=o("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,U.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(o,U,H){var w=o("../../components/colorscale/calc");U.exports=function(M,T){for(var e=T.u,a=T.v,n=T.w,r=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,n.length),t=-1/0,h=1/0,i=0;i<r;i++){var s=e[i],y=a[i],d=n[i],p=Math.sqrt(s*s+y*y+d*d);t=Math.max(t,p),h=Math.min(h,p)}T._len=r,T._normMax=t,w(M,T,{vals:[h,t],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(o,U,H){var w=o("../../../stackgl_modules").gl_cone3d,f=o("../../../stackgl_modules").gl_cone3d.createConeMesh,M=o("../../lib").simpleMap,T=o("../../lib/gl_format_color").parseColorScale,e=o("../../components/colorscale").extractOpts,a=o("../../plots/gl3d/zip3");function n(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,c=this.data.x[p],m=this.data.y[p],l=this.data.z[p],x=this.data.u[p],u=this.data.v[p],A=this.data.w[p];d.traceCoordinate=[c,m,l,x,u,A,Math.sqrt(x*x+u*u+A*A)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[p]!==void 0?d.textLabel=_[p]:_&&(d.textLabel=_),!0}};var t={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function s(d,p){var c=d.fullSceneLayout,m=d.dataScale,l={};function x(g,b){var v=c[b],C=m[t[b]];return M(g,function(S){return v.d2l(S)*C})}l.vectors=a(x(p.u,"xaxis"),x(p.v,"yaxis"),x(p.w,"zaxis"),p._len),l.positions=a(x(p.x,"xaxis"),x(p.y,"yaxis"),x(p.z,"zaxis"),p._len);var u=e(p);l.colormap=T(p),l.vertexIntensityBounds=[u.min/p._normMax,u.max/p._normMax],l.coneOffset=h[p.anchor],p.sizemode==="scaled"?l.coneSize=p.sizeref||.5:l.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var A=w(l),_=p.lightposition;return A.lightPosition=[_.x,_.y,_.z],A.ambient=p.lighting.ambient,A.diffuse=p.lighting.diffuse,A.specular=p.lighting.specular,A.roughness=p.lighting.roughness,A.fresnel=p.lighting.fresnel,A.opacity=p.opacity,p._pad=i[p.anchor]*A.vectorScale*A.coneScale*p._normMax,A}r.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(d,p){var c=d.glplot.gl,m=s(d,p),l=f(c,m),x=new n(d,p.uid);return x.mesh=l,x.data=p,l._trace=x,d.glplot.add(l),x}U.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/defaults"),M=o("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("u"),i=t("v"),s=t("w"),y=t("x"),d=t("y"),p=t("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!y||!y.length||!d||!d.length||!p||!p.length){a.visible=!1;return}t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),f(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(o,U,H){U.exports={moduleType:"trace",name:"cone",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:o("./calc"),plot:o("./convert"),eventData:function(w,f){return w.norm=f.traceCoordinate[6],w},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(o,U,H){var w=o("../heatmap/attributes"),f=o("../scatter/attributes"),M=o("../../plots/cartesian/axis_format_attributes"),T=M.axisHoverFormat,e=M.descriptionOnlyNumbers,a=o("../../components/colorscale/attributes"),n=o("../../components/drawing/attributes").dash,r=o("../../plots/font_attributes"),t=o("../../lib/extend").extendFlat,h=o("../../constants/filter_ops"),i=h.COMPARISON_OPS2,s=h.INTERVAL_OPS,y=f.line;U.exports=t({z:w.z,x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,text:w.text,hovertext:w.hovertext,transpose:w.transpose,xtype:w.xtype,ytype:w.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:t({},w.texttemplate,{}),textfont:t({},w.textfont,{}),hoverongaps:w.hoverongaps,connectgaps:t({},w.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(i).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},y.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:t({},y.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(o,U,H){var w=o("../../components/colorscale"),f=o("../heatmap/calc"),M=o("./set_contours"),T=o("./end_plus");U.exports=function(a,n){var r=f(a,n),t=r[0].z;M(n,t);var h=n.contours,i=w.extractOpts(n),s;if(h.coloring==="heatmap"&&i.auto&&n.autocontour===!1){var y=h.start,d=T(h),p=h.size||1,c=Math.floor((d-y)/p)+1;isFinite(p)||(p=1,c=1);var m=y-p/2,l=m+c*p;s=[m,l]}else s=t;return w.calc(a,n,{vals:s,cLetter:"z"}),r}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(o,U,H){U.exports=function(w,f){var M=w[0],T=M.z,e;switch(f.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<w.length;e++){var n=w[e];n.prefixBoundary=!n.edgepaths.length&&(a>n.level||n.starts.length&&a===n.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var r=M.x.length,t=M.y.length,h=-1/0,i=1/0;for(e=0;e<t;e++)i=Math.min(i,T[e][0]),i=Math.min(i,T[e][r-1]),h=Math.max(h,T[e][0]),h=Math.max(h,T[e][r-1]);for(e=1;e<r-1;e++)i=Math.min(i,T[0][e]),i=Math.min(i,T[t-1][e]),h=Math.max(h,T[0][e]),h=Math.max(h,T[t-1][e]);var s=f.value,y,d;switch(f._operation){case">":s>h&&(M.prefixBoundary=!0);break;case"<":(s<i||M.starts.length&&s===i)&&(M.prefixBoundary=!0);break;case"[]":y=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),(d<i||y>h||M.starts.length&&d===i)&&(M.prefixBoundary=!0);break;case"][":y=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),y<i&&d>h&&(M.prefixBoundary=!0);break}break}}},{}],747:[function(o,U,H){var w=o("../../components/colorscale"),f=o("./make_color_map"),M=o("./end_plus");function T(e,a,n){var r=a.contours,t=a.line,h=r.size||1,i=r.coloring,s=f(a,{isColorbar:!0});if(i==="heatmap"){var y=w.extractOpts(a);n._fillgradient=y.reversescale?w.flipScale(y.colorscale):y.colorscale,n._zrange=[y.min,y.max]}else i==="fill"&&(n._fillcolor=s);n._line={color:i==="lines"?s:t.color,width:r.showlines!==!1?t.width:0,dash:t.dash},n._levels={start:r.start,end:M(r),size:h}}U.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(o,U,H){U.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(o,U,H){var w=o("fast-isnumeric"),f=o("./label_defaults"),M=o("../../components/color"),T=M.addOpacity,e=M.opacity,a=o("../../constants/filter_ops"),n=a.CONSTRAINT_REDUCTION,r=a.COMPARISON_OPS2;U.exports=function(i,s,y,d,p,c){var m=s.contours,l,x,u,A=y("contours.operation");if(m._operation=n[A],t(y,m),A==="="?l=m.showlines=!0:(l=y("contours.showlines"),u=y("fillcolor",T((i.line||{}).color||p,.5))),l){var _=u&&e(u)?T(s.fillcolor,1):p;x=y("line.color",_),y("line.width",2),y("line.dash")}y("line.smoothing"),f(y,d,x,c)};function t(h,i){var s;r.indexOf(i.operation)===-1?(h("contours.value",[0,1]),Array.isArray(i.value)?i.value.length>2?i.value=i.value.slice(2):i.length===0?i.value=[0,1]:i.length<2?(s=parseFloat(i.value[0]),i.value=[s,s+1]):i.value=[parseFloat(i.value[0]),parseFloat(i.value[1])]:w(i.value)&&(s=parseFloat(i.value),i.value=[s,s+1])):(h("contours.value",0),w(i.value)||(Array.isArray(i.value)?i.value=parseFloat(i.value[0]):i.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(o,U,H){var w=o("../../constants/filter_ops"),f=o("fast-isnumeric");U.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function M(a,n){var r=Array.isArray(n),t;function h(i){return f(i)?+i:null}return w.COMPARISON_OPS2.indexOf(a)!==-1?t=h(r?n[0]:n):w.INTERVAL_OPS.indexOf(a)!==-1?t=r?[h(n[0]),h(n[1])]:[h(n),h(n)]:w.SET_OPS.indexOf(a)!==-1&&(t=r?n.map(h):[h(n)]),t}function T(a){return function(n){n=M(a,n);var r=Math.min(n[0],n[1]),t=Math.max(n[0],n[1]);return{start:r,end:t,size:t-r}}}function e(a){return function(n){return n=M(a,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(o,U,H){U.exports=function(f,M,T,e){var a=e("contours.start"),n=e("contours.end"),r=a===!1||n===!1,t=T("contours.size"),h;r?h=M.autocontour=!0:h=T("autocontour",!1),(h||!t)&&T("ncontours")}},{}],752:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){var e,a,n,r=function(i){return i.reverse()},t=function(i){return i};switch(T){case"=":case"<":return M;case">":for(M.length!==1&&w.warn("Contour data invalid for the specified inequality operation."),a=M[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);return M;case"][":var h=r;r=t,t=h;case"[]":for(M.length!==2&&w.warn("Contour data invalid for the specified inequality range operation."),a=f(M[0]),n=f(M[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);for(;n.edgepaths.length;)a.edgepaths.push(t(n.edgepaths.shift()));for(;n.paths.length;)a.paths.push(t(n.paths.shift()));for(;n.starts.length;)a.starts.push(t(n.starts.shift()));return[a]}};function f(M){return w.extendFlat({},M,{edgepaths:w.extendDeep([],M.edgepaths),paths:w.extendDeep([],M.paths),starts:w.extendDeep([],M.starts)})}},{"../../lib":515}],753:[function(o,U,H){var w=o("../../lib"),f=o("../heatmap/xyz_defaults"),M=o("../scatter/period_defaults"),T=o("./constraint_defaults"),e=o("./contours_defaults"),a=o("./style_defaults"),n=o("../heatmap/label_defaults"),r=o("./attributes");U.exports=function(h,i,s,y){function d(l,x){return w.coerce(h,i,r,l,x)}function p(l){return w.coerce2(h,i,r,l)}var c=f(h,i,d,y);if(!c){i.visible=!1;return}M(h,i,y,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var m=d("contours.type")==="constraint";d("connectgaps",w.isArray1D(i.z)),m?T(h,i,d,y,s):(e(h,i,d,p),a(h,i,d,y)),i.contours&&i.contours.coloring==="heatmap"&&n(d,y)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(o,U,H){var w=o("../../lib"),f=o("./constraint_mapping"),M=o("./end_plus");U.exports=function(e,a,n){for(var r=e.type==="constraint"?f[e._operation](e.value):e,t=r.size,h=[],i=M(r),s=n.trace._carpetTrace,y=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:n.x,y:n.y},d=r.start;d<i;d+=t)if(h.push(w.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},y)),h.length>1e3){w.warn("Too many contours, clipping at 1000",e);break}return h}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(o,U,H){U.exports=function(f){return f.end+f.size/1e6}},{}],756:[function(o,U,H){var w=o("../../lib"),f=o("./constants");U.exports=function(t,h,i){var s,y,d,p,c;for(h=h||.01,i=i||.01,d=0;d<t.length;d++){for(p=t[d],c=0;c<p.starts.length;c++)y=p.starts[c],e(p,y,"edge",h,i);for(s=0;Object.keys(p.crossings).length&&s<1e4;)s++,y=Object.keys(p.crossings)[0].split(",").map(Number),e(p,y,void 0,h,i);s===1e4&&w.log("Infinite loop in contour?")}};function M(r,t,h,i){return Math.abs(r[0]-t[0])<h&&Math.abs(r[1]-t[1])<i}function T(r,t){var h=r[2]-t[2],i=r[3]-t[3];return Math.sqrt(h*h+i*i)}function e(r,t,h,i,s){var y=t.join(","),d=r.crossings[y],p=a(d,h,t),c=[n(r,t,[-p[0],-p[1]])],m=r.z.length,l=r.z[0].length,x=t.slice(),u=p.slice(),A;for(A=0;A<1e4;A++){if(d>20?(d=f.CHOOSESADDLE[d][(p[0]||p[1])<0?0:1],r.crossings[y]=f.SADDLEREMAINDER[d]):delete r.crossings[y],p=f.NEWDELTA[d],!p){w.log("Found bad marching index:",d,t,r.level);break}c.push(n(r,t,p)),t[0]+=p[0],t[1]+=p[1],y=t.join(","),M(c[c.length-1],c[c.length-2],i,s)&&c.pop();var _=p[0]&&(t[0]<0||t[0]>l-2)||p[1]&&(t[1]<0||t[1]>m-2),g=t[0]===x[0]&&t[1]===x[1]&&p[0]===u[0]&&p[1]===u[1];if(g||h&&_)break;d=r.crossings[y]}A===1e4&&w.log("Infinite loop in contour?");var b=M(c[0],c[c.length-1],i,s),v=0,C=.2*r.smoothing,S=[],k=0,E,F,I,D,R,O,z,B,G,Q,X;for(A=1;A<c.length;A++)z=T(c[A],c[A-1]),v+=z,S.push(z);var j=v/S.length*C;function re(te){return c[te%c.length]}for(A=c.length-2;A>=k;A--)if(E=S[A],E<j){for(I=0,F=A-1;F>=k&&E+S[F]<j;F--)E+=S[F];if(b&&A===c.length-2)for(I=0;I<F&&E+S[I]<j;I++)E+=S[I];R=A-F+I+1,O=Math.floor((A+F+I+2)/2),!b&&A===c.length-2?D=c[c.length-1]:!b&&F===-1?D=c[0]:R%2?D=re(O):D=[(re(O)[0]+re(O+1)[0])/2,(re(O)[1]+re(O+1)[1])/2],c.splice(F+1,A-F+1,D),A=F+1,I&&(k=I),b&&(A===c.length-2?c[I]=c[c.length-1]:A===0&&(c[c.length-1]=c[0]))}for(c.splice(0,k),A=0;A<c.length;A++)c[A].length=2;if(!(c.length<2))if(b)c.pop(),r.paths.push(c);else{h||w.log("Unclosed interior contour?",r.level,x.join(","),c.join("L"));var ue=!1;for(B=0;B<r.edgepaths.length;B++)if(Q=r.edgepaths[B],!ue&&M(Q[0],c[c.length-1],i,s)){c.pop(),ue=!0;var K=!1;for(G=0;G<r.edgepaths.length;G++)if(X=r.edgepaths[G],M(X[X.length-1],c[0],i,s)){K=!0,c.shift(),r.edgepaths.splice(B,1),G===B?r.paths.push(c.concat(X)):(G>B&&G--,r.edgepaths[G]=X.concat(c,Q));break}K||(r.edgepaths[B]=c.concat(Q))}for(B=0;B<r.edgepaths.length&&!ue;B++)Q=r.edgepaths[B],M(Q[Q.length-1],c[0],i,s)&&(c.shift(),r.edgepaths[B]=Q.concat(c),ue=!0);ue||r.edgepaths.push(c)}}function a(r,t,h){var i=0,s=0;return r>20&&t?r===208||r===1114?i=h[0]===0?1:-1:s=h[1]===0?1:-1:f.BOTTOMSTART.indexOf(r)!==-1?s=1:f.LEFTSTART.indexOf(r)!==-1?i=1:f.TOPSTART.indexOf(r)!==-1?s=-1:i=-1,[i,s]}function n(r,t,h){var i=t[0]+Math.max(h[0],0),s=t[1]+Math.max(h[1],0),y=r.z[s][i],d=r.xaxis,p=r.yaxis;if(h[1]){var c=(r.level-y)/(r.z[s][i+1]-y),m=(c!==1?(1-c)*d.c2l(r.x[i]):0)+(c!==0?c*d.c2l(r.x[i+1]):0);return[d.c2p(d.l2c(m),!0),p.c2p(r.y[s],!0),i+c,s]}else{var l=(r.level-y)/(r.z[s+1][i]-y),x=(l!==1?(1-l)*p.c2l(r.y[s]):0)+(l!==0?l*p.c2l(r.y[s+1]):0);return[d.c2p(r.x[i],!0),p.c2p(p.l2c(x),!0),i,s+l]}}},{"../../lib":515,"./constants":748}],757:[function(o,U,H){var w=o("../../components/color"),f=o("../heatmap/hover");U.exports=function(T,e,a,n,r){r||(r={}),r.isContour=!0;var t=f(T,e,a,n,r);return t&&t.forEach(function(h){var i=h.trace;i.contours.type==="constraint"&&(i.fillcolor&&w.opacity(i.fillcolor)?h.color=w.addOpacity(i.fillcolor,1):i.contours.showlines&&w.opacity(i.line.color)&&(h.color=w.addOpacity(i.line.color,1)))}),t}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot").plot,style:o("./style"),colorbar:o("./colorbar"),hoverPoints:o("./hover"),moduleType:"trace",name:"contour",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T,e,a){a||(a={});var n=M("contours.showlabels");if(n){var r=T.font;w.coerceFont(M,"contours.labelfont",{family:r.family,size:r.size,color:e}),M("contours.labelformat")}a.hasHover!==!1&&M("zhoverformat")}},{"../../lib":515}],760:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/colorscale"),M=o("./end_plus");U.exports=function(e){var a=e.contours,n=a.start,r=M(a),t=a.size||1,h=Math.floor((r-n)/t)+1,i=a.coloring==="lines"?0:1,s=f.extractOpts(e);isFinite(t)||(t=1,h=1);var y=s.reversescale?f.flipScale(s.colorscale):s.colorscale,d=y.length,p=new Array(d),c=new Array(d),m,l;if(a.coloring==="heatmap"){var x=s.min,u=s.max;for(l=0;l<d;l++)m=y[l],p[l]=m[0]*(u-x)+x,c[l]=m[1];var A=w.extent([x,u,a.start,a.start+t*(h-1)]),_=A[x<u?0:1],g=A[x<u?1:0];_!==x&&(p.splice(0,0,_),c.splice(0,0,c[0])),g!==u&&(p.push(g),c.push(c[c.length-1]))}else for(l=0;l<d;l++)m=y[l],p[l]=(m[0]*(h+i-1)-i/2)*t+n,c[l]=m[1];return f.makeColorScaleFunc({domain:p,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(o,U,H){var w=o("./constants");U.exports=function(T){var e=T[0].z,a=e.length,n=e[0].length,r=a===2||n===2,t,h,i,s,y,d,p,c,m;for(h=0;h<a-1;h++)for(s=[],h===0&&(s=s.concat(w.BOTTOMSTART)),h===a-2&&(s=s.concat(w.TOPSTART)),t=0;t<n-1;t++)for(i=s.slice(),t===0&&(i=i.concat(w.LEFTSTART)),t===n-2&&(i=i.concat(w.RIGHTSTART)),y=t+","+h,d=[[e[h][t],e[h][t+1]],[e[h+1][t],e[h+1][t+1]]],m=0;m<T.length;m++)c=T[m],p=f(c.level,d),p&&(c.crossings[y]=p,i.indexOf(p)!==-1&&(c.starts.push([t,h]),r&&i.indexOf(p,i.indexOf(p)+1)!==-1&&c.starts.push([t,h])))};function f(M,T){var e=(T[0][0]>M?0:1)+(T[0][1]>M?0:2)+(T[1][1]>M?0:4)+(T[1][0]>M?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return M>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../components/colorscale"),e=o("../../lib/svg_text_utils"),a=o("../../plots/cartesian/axes"),n=o("../../plots/cartesian/set_convert"),r=o("../heatmap/plot"),t=o("./make_crossings"),h=o("./find_all_paths"),i=o("./empty_pathinfo"),s=o("./convert_to_constraints"),y=o("./close_boundaries"),d=o("./constants"),p=d.LABELOPTIMIZER;H.plot=function(b,v,C,S){var k=v.xaxis,E=v.yaxis;f.makeTraceGroups(S,C,"contour").each(function(F){var I=w.select(this),D=F[0],R=D.trace,O=D.x,z=D.y,B=R.contours,G=i(B,v,D),Q=f.ensureSingle(I,"g","heatmapcoloring"),X=[];B.coloring==="heatmap"&&(X=[F]),r(b,v,X,Q),t(G),h(G);var j=k.c2p(O[0],!0),re=k.c2p(O[O.length-1],!0),ue=E.c2p(z[0],!0),K=E.c2p(z[z.length-1],!0),te=[[j,K],[re,K],[re,ue],[j,ue]],Y=G;B.type==="constraint"&&(Y=s(G,B._operation)),c(I,te,B),m(I,Y,te,B),x(I,G,b,D,B),A(I,v,b,D,te)})};function c(g,b,v){var C=f.ensureSingle(g,"g","contourbg"),S=C.selectAll("path").data(v.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function m(g,b,v,C){var S=C.coloring==="fill"||C.type==="constraint"&&C._operation!=="=",k="M"+v.join("L")+"Z";S&&y(b,C);var E=f.ensureSingle(g,"g","contourfill"),F=E.selectAll("path").data(S?b:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?k:"")+l(I,v);D?w.select(this).attr("d",D).style("stroke","none"):w.select(this).remove()})}function l(g,b){var v="",C=0,S=g.edgepaths.map(function(j,re){return re}),k=!0,E,F,I,D,R,O;function z(j){return Math.abs(j[1]-b[0][1])<.01}function B(j){return Math.abs(j[1]-b[2][1])<.01}function G(j){return Math.abs(j[0]-b[0][0])<.01}function Q(j){return Math.abs(j[0]-b[2][0])<.01}for(;S.length;){for(O=M.smoothopen(g.edgepaths[C],g.smoothing),v+=k?O:O.replace(/^M/,"L"),S.splice(S.indexOf(C),1),E=g.edgepaths[C][g.edgepaths[C].length-1],D=-1,I=0;I<4;I++){if(!E){f.log("Missing end?",C,g);break}for(z(E)&&!Q(E)?F=b[1]:G(E)?F=b[0]:B(E)?F=b[3]:Q(E)&&(F=b[2]),R=0;R<g.edgepaths.length;R++){var X=g.edgepaths[R][0];Math.abs(E[0]-F[0])<.01?Math.abs(E[0]-X[0])<.01&&(X[1]-E[1])*(F[1]-X[1])>=0&&(F=X,D=R):Math.abs(E[1]-F[1])<.01?Math.abs(E[1]-X[1])<.01&&(X[0]-E[0])*(F[0]-X[0])>=0&&(F=X,D=R):f.log("endpt to newendpt is not vert. or horz.",E,F,X)}if(E=F,D>=0)break;v+="L"+F}if(D===g.edgepaths.length){f.log("unclosed perimeter path");break}C=D,k=S.indexOf(C)===-1,k&&(C=S[0],v+="Z")}for(C=0;C<g.paths.length;C++)v+=M.smoothclosed(g.paths[C],g.smoothing);return v}function x(g,b,v,C,S){var k=f.ensureSingle(g,"g","contourlines"),E=S.showlines!==!1,F=S.showlabels,I=E&&F,D=H.createLines(k,E||F,b),R=H.createLineClip(k,I,v,C.trace.uid),O=g.selectAll("g.contourlabels").data(F?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),F){var z=[],B=[];f.clearLocationCache();var G=H.labelFormatter(v,C),Q=M.tester.append("text").attr("data-notex",1).call(M.font,S.labelfont),X=b[0].xaxis,j=b[0].yaxis,re=X._length,ue=j._length,K=X.range,te=j.range,Y=f.aggNums(Math.min,null,C.x),V=f.aggNums(Math.max,null,C.x),ee=f.aggNums(Math.min,null,C.y),ne=f.aggNums(Math.max,null,C.y),Z=Math.max(X.c2p(Y,!0),0),q=Math.min(X.c2p(V,!0),re),ie=Math.max(j.c2p(ne,!0),0),se=Math.min(j.c2p(ee,!0),ue),ae={};K[0]<K[1]?(ae.left=Z,ae.right=q):(ae.left=q,ae.right=Z),te[0]<te[1]?(ae.top=ie,ae.bottom=se):(ae.top=se,ae.bottom=ie),ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2,z.push([[ae.left,ae.top],[ae.right,ae.top],[ae.right,ae.bottom],[ae.left,ae.bottom]]);var oe=Math.sqrt(re*re+ue*ue),be=d.LABELDISTANCE*oe/Math.max(1,b.length/d.LABELINCREASE);D.each(function(ce){var de=H.calcTextOpts(ce.level,G,Q,v);w.select(this).selectAll("path").each(function(){var ye=this,ge=f.getVisibleSegment(ye,ae,de.height/2);if(!!ge&&!(ge.len<(de.width+de.height)*d.LABELMIN))for(var me=Math.min(Math.ceil(ge.len/be),d.LABELMAX),Me=0;Me<me;Me++){var Le=H.findBestTextLocation(ye,ge,de,B,ae);if(!Le)break;H.addLabelData(Le,de,B,z)}})}),Q.remove(),H.drawLabels(O,B,v,R,I?z:null)}F&&!E&&D.remove()}H.createLines=function(g,b,v){var C=v[0].smoothing,S=g.selectAll("g.contourlevel").data(b?v:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),b){var k=S.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(F){return M.smoothopen(F,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var E=S.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});E.exit().remove(),E.enter().append("path").classed("closedline",!0),E.attr("d",function(F){return M.smoothclosed(F,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},H.createLineClip=function(g,b,v,C){var S=v._fullLayout._clips,k=b?"clipline"+C:null,E=S.selectAll("#"+k).data(b?[0]:[]);return E.exit().remove(),E.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),M.setClipUrl(g,k,v),E},H.labelFormatter=function(g,b){var v=g._fullLayout,C=b.trace,S=C.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,n(k,v);else{var E=T.extractOpts(C);if(E&&E.colorbar&&E.colorbar._axis)k=E.colorbar._axis;else{if(S.type==="constraint"){var F=S.value;Array.isArray(F)?k.range=[F[0],F[F.length-1]]:k.range=[F,F]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),n(k,v),a.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return a.tickText(k,I).text}},H.calcTextOpts=function(g,b,v,C){var S=b(g);v.text(S).call(e.convertToTspans,C);var k=v.node(),E=M.bBox(k,!0);return{text:S,width:E.width,height:E.height,fontSize:+k.style["font-size"].replace("px",""),level:g,dy:(E.top+E.bottom)/2}},H.findBestTextLocation=function(g,b,v,C,S){var k=v.width,E,F,I,D,R;b.isClosed?(F=b.len/p.INITIALSEARCHPOINTS,E=b.min+F/2,I=b.max):(F=(b.len-k)/(p.INITIALSEARCHPOINTS+1),E=b.min+F+k/2,I=b.max-(F+k)/2);for(var O=1/0,z=0;z<p.ITERATIONS;z++){for(var B=E;B<I;B+=F){var G=f.getTextLocation(g,b.total,B,k),Q=u(G,v,C,S);Q<O&&(O=Q,R=G,D=B)}if(O>p.MAXCOST*2)break;z&&(F/=2),E=D-F/2,I=E+F*1.5}if(O<=p.MAXCOST)return R};function u(g,b,v,C){var S=b.width/2,k=b.height/2,E=g.x,F=g.y,I=g.theta,D=Math.cos(I)*S,R=Math.sin(I)*S,O=(E>C.center?C.right-E:E-C.left)/(D+Math.abs(Math.sin(I)*k)),z=(F>C.middle?C.bottom-F:F-C.top)/(Math.abs(R)+Math.cos(I)*k);if(O<1||z<1)return 1/0;var B=p.EDGECOST*(1/(O-1)+1/(z-1));B+=p.ANGLECOST*I*I;for(var G=E-D,Q=F-R,X=E+D,j=F+R,re=0;re<v.length;re++){var ue=v[re],K=Math.cos(ue.theta)*ue.width/2,te=Math.sin(ue.theta)*ue.width/2,Y=f.segmentDistance(G,Q,X,j,ue.x-K,ue.y-te,ue.x+K,ue.y+te)*2/(b.height+ue.height),V=ue.level===b.level,ee=V?p.SAMELEVELDISTANCE:1;if(Y<=ee)return 1/0;var ne=p.NEIGHBORCOST*(V?p.SAMELEVELFACTOR:1);B+=ne/(Y-ee)}return B}H.addLabelData=function(g,b,v,C){var S=b.fontSize,k=b.width+S/3,E=Math.max(0,b.height-S/3),F=g.x,I=g.y,D=g.theta,R=Math.sin(D),O=Math.cos(D),z=function(G,Q){return[F+G*O-Q*R,I+G*R+Q*O]},B=[z(-k/2,-E/2),z(-k/2,E/2),z(k/2,E/2),z(k/2,-E/2)];v.push({text:b.text,x:F,y:I,dy:b.dy,theta:D,level:b.level,width:k,height:E}),C.push(B)},H.drawLabels=function(g,b,v,C,S){var k=g.selectAll("text").data(b,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;w.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,v)}),S){for(var E="",F=0;F<S.length;F++)E+="M"+S[F].join("L")+"Z";var I=f.ensureSingle(C,"path","");I.attr("d",E)}};function A(g,b,v,C,S){var k=C.trace,E=v._fullLayout._clips,F="clip"+k.uid,I=E.selectAll("#"+F).data(k.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),k.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:C.x,y:C.y,z:_(C),smoothing:0};t([D]),h([D]),y([D],{type:"levels"});var R=f.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+l(D,S))}else F=null;M.setClipUrl(g,F,v)}function _(g){var b=g.trace._emptypoints,v=[],C=g.z.length,S=g.z[0].length,k,E=[],F;for(k=0;k<S;k++)E.push(1);for(k=0;k<C;k++)v.push(E.slice());for(k=0;k<b.length;k++)F=b[k],v[F[0]][F[1]]=0;return g.zmask=v,v}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib");U.exports=function(e,a){var n=e.contours;if(e.autocontour){var r=e.zmin,t=e.zmax;(e.zauto||r===void 0)&&(r=f.aggNums(Math.min,null,a)),(e.zauto||t===void 0)&&(t=f.aggNums(Math.max,null,a));var h=M(r,t,e.ncontours);n.size=h.dtick,n.start=w.tickFirst(h),h.range.reverse(),n.end=w.tickFirst(h),n.start===r&&(n.start+=n.size),n.end===t&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),f.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if(n.type!=="constraint"){var i=n.start,s=n.end,y=e._input.contours;if(i>s&&(n.start=y.start=s,s=n.end=y.end=i,i=n.start),!(n.size>0)){var d;i===s?d=1:d=M(i,s,e.ncontours).dtick,y.size=n.size=d}}};function M(T,e,a){var n={type:"linear",range:[T,e]};return w.autoTicks(n,(e-T)/(a||15)),n}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../heatmap/style"),T=o("./make_color_map");U.exports=function(a){var n=w.select(a).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var t=w.select(this),h=r[0].trace,i=h.contours,s=h.line,y=i.size||1,d=i.start,p=i.type==="constraint",c=!p&&i.coloring==="lines",m=!p&&i.coloring==="fill",l=c||m?T(h):null;t.selectAll("g.contourlevel").each(function(A){w.select(this).selectAll("path").call(f.lineGroupStyle,s.width,c?l(A.level):s.color,s.dash)});var x=i.labelfont;if(t.selectAll("g.contourlabels text").each(function(A){f.font(w.select(this),{family:x.family,size:x.size,color:x.color||(c?l(A.level):s.color)})}),p)t.selectAll("g.contourfill path").style("fill",h.fillcolor);else if(m){var u;t.selectAll("g.contourfill path").style("fill",function(A){return u===void 0&&(u=A.level),l(A.level+.5*y)}),u===void 0&&(u=d),t.selectAll("g.contourbg path").style("fill",l(u-.5*y))}}),M(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(o,U,H){var w=o("../../components/colorscale/defaults"),f=o("./label_defaults");U.exports=function(T,e,a,n,r){var t=a("contours.coloring"),h,i="";t==="fill"&&(h=a("contours.showlines")),h!==!1&&(t!=="lines"&&(i=a("line.color","#000")),a("line.width",.5),a("line.dash")),t!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,w(T,e,n,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),f(a,n,i,r)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(o,U,H){var w=o("../heatmap/attributes"),f=o("../contour/attributes"),M=o("../../components/colorscale/attributes"),T=o("../../lib/extend").extendFlat,e=f.contours;U.exports=T({carpet:{valType:"string",editType:"calc"},z:w.z,a:w.x,a0:w.x0,da:w.dx,b:w.y,b0:w.y0,db:w.dy,text:w.text,hovertext:w.hovertext,transpose:w.transpose,atype:w.xtype,btype:w.ytype,fillcolor:f.fillcolor,autocontour:f.autocontour,ncontours:f.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f.line.color,width:f.line.width,dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(o,U,H){var w=o("../../components/colorscale/calc"),f=o("../../lib"),M=o("../heatmap/convert_column_xyz"),T=o("../heatmap/clean_2d_array"),e=o("../heatmap/interp2d"),a=o("../heatmap/find_empties"),n=o("../heatmap/make_bound_array"),r=o("./defaults"),t=o("../carpet/lookup_carpetid"),h=o("../contour/set_contours");U.exports=function(y,d){var p=d._carpetTrace=t(y,d);if(!(!p||!p.visible||p.visible==="legendonly")){if(!d.a||!d.b){var c=y.data[p.index],m=y.data[d.index];m.a||(m.a=c.a),m.b||(m.b=c.b),r(m,d,d._defaultColor,y._fullLayout)}var l=i(y,d);return h(d,d._z),l}};function i(s,y){var d=y._carpetTrace,p=d.aaxis,c=d.baxis,m,l,x,u,A,_,g;p._minDtick=0,c._minDtick=0,f.isArray1D(y.z)&&M(y,p,c,"a","b",["z"]),m=y._a=y._a||y.a,u=y._b=y._b||y.b,m=m?p.makeCalcdata(y,"_a"):[],u=u?c.makeCalcdata(y,"_b"):[],l=y.a0||0,x=y.da||1,A=y.b0||0,_=y.db||1,g=y._z=T(y._z||y.z,y.transpose),y._emptypoints=a(g),e(g,y._emptypoints);var b=f.maxRowLength(g),v=y.xtype==="scaled"?"":m,C=n(y,v,l,x,b,p),S=y.ytype==="scaled"?"":u,k=n(y,S,A,_,g.length,c),E={a:C,b:k,z:g};return y.contours.type==="levels"&&y.contours.coloring!=="none"&&w(s,y,{vals:g,containerStr:"",cLetter:"z"}),[E]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(o,U,H){var w=o("../../lib"),f=o("../heatmap/xyz_defaults"),M=o("./attributes"),T=o("../contour/constraint_defaults"),e=o("../contour/contours_defaults"),a=o("../contour/style_defaults");U.exports=function(r,t,h,i){function s(c,m){return w.coerce(r,t,M,c,m)}function y(c){return w.coerce2(r,t,M,c)}if(s("carpet"),r.a&&r.b){var d=f(r,t,s,i,"a","b");if(!d){t.visible=!1;return}s("text");var p=s("contours.type")==="constraint";p?T(r,t,s,i,h,{hasHover:!1}):(e(r,t,s,y),a(r,t,s,i,{hasHover:!1}))}else t._defaultColor=h,t._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../contour/colorbar"),calc:o("./calc"),plot:o("./plot"),style:o("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(o,U,H){var w=o("@plotly/d3"),f=o("../carpet/map_1d_array"),M=o("../carpet/makepath"),T=o("../../components/drawing"),e=o("../../lib"),a=o("../contour/make_crossings"),n=o("../contour/find_all_paths"),r=o("../contour/plot"),t=o("../contour/constants"),h=o("../contour/convert_to_constraints"),i=o("../contour/empty_pathinfo"),s=o("../contour/close_boundaries"),y=o("../carpet/lookup_carpetid"),d=o("../carpet/axis_aligned_line");U.exports=function(v,C,S,k){var E=C.xaxis,F=C.yaxis;e.makeTraceGroups(k,S,"contour").each(function(I){var D=w.select(this),R=I[0],O=R.trace,z=O._carpetTrace=y(v,O),B=v.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var G=R.a,Q=R.b,X=O.contours,j=i(X,C,R),re=X.type==="constraint",ue=X._operation,K=re?ue==="="?"lines":"fill":X.coloring;function te(be){var ce=z.ab2xy(be[0],be[1],!0);return[E.c2p(ce[0]),F.c2p(ce[1])]}var Y=[[G[0],Q[Q.length-1]],[G[G.length-1],Q[Q.length-1]],[G[G.length-1],Q[0]],[G[0],Q[0]]];a(j);var V=(G[G.length-1]-G[0])*1e-8,ee=(Q[Q.length-1]-Q[0])*1e-8;n(j,V,ee);var ne=j;X.type==="constraint"&&(ne=h(j,ue)),p(j,te);var Z,q,ie,se,ae=[];for(se=B.clipsegments.length-1;se>=0;se--)Z=B.clipsegments[se],q=f([],Z.x,E.c2p),ie=f([],Z.y,F.c2p),q.reverse(),ie.reverse(),ae.push(M(q,ie,Z.bicubic));var oe="M"+ae.join("L")+"Z";A(D,B.clipsegments,E,F,re,K),_(O,D,E,F,ne,Y,te,z,B,K,oe),c(D,j,v,R,X,C,z),T.setClipUrl(D,z._clipPathId,v)})};function p(b,v){var C,S,k,E,F,I,D,R,O;for(C=0;C<b.length;C++){for(E=b[C],F=E.pedgepaths=[],I=E.ppaths=[],S=0;S<E.edgepaths.length;S++){for(O=E.edgepaths[S],D=[],k=0;k<O.length;k++)D[k]=v(O[k]);F.push(D)}for(S=0;S<E.paths.length;S++){for(O=E.paths[S],R=[],k=0;k<O.length;k++)R[k]=v(O[k]);I.push(R)}}}function c(b,v,C,S,k,E,F){var I=e.ensureSingle(b,"g","contourlines"),D=k.showlines!==!1,R=k.showlabels,O=D&&R,z=r.createLines(I,D||R,v),B=r.createLineClip(I,O,C,S.trace.uid),G=b.selectAll("g.contourlabels").data(R?[0]:[]);if(G.exit().remove(),G.enter().append("g").classed("contourlabels",!0),R){var Q=E.xaxis,X=E.yaxis,j=Q._length,re=X._length,ue=[[[0,0],[j,0],[j,re],[0,re]]],K=[];e.clearLocationCache();var te=r.labelFormatter(C,S),Y=T.tester.append("text").attr("data-notex",1).call(T.font,k.labelfont),V={left:0,right:j,center:j/2,top:0,bottom:re,middle:re/2},ee=Math.sqrt(j*j+re*re),ne=t.LABELDISTANCE*ee/Math.max(1,v.length/t.LABELINCREASE);z.each(function(Z){var q=r.calcTextOpts(Z.level,te,Y,C);w.select(this).selectAll("path").each(function(ie){var se=this,ae=e.getVisibleSegment(se,V,q.height/2);if(!!ae&&(m(se,ie,Z,ae,F,q.height),!(ae.len<(q.width+q.height)*t.LABELMIN)))for(var oe=Math.min(Math.ceil(ae.len/ne),t.LABELMAX),be=0;be<oe;be++){var ce=r.findBestTextLocation(se,ae,q,K,V);if(!ce)break;r.addLabelData(ce,q,K,ue)}})}),Y.remove(),r.drawLabels(G,K,C,B,O?ue:null)}R&&!D&&z.remove()}function m(b,v,C,S,k,E){for(var F,I=0;I<C.pedgepaths.length;I++)v===C.pedgepaths[I]&&(F=C.edgepaths[I]);if(!F)return;var D=k.a[0],R=k.a[k.a.length-1],O=k.b[0],z=k.b[k.b.length-1];function B(re,ue){var K=0,te,Y=.1;return(Math.abs(re[0]-D)<Y||Math.abs(re[0]-R)<Y)&&(te=x(k.dxydb_rough(re[0],re[1],Y)),K=Math.max(K,E*u(ue,te)/2)),(Math.abs(re[1]-O)<Y||Math.abs(re[1]-z)<Y)&&(te=x(k.dxyda_rough(re[0],re[1],Y)),K=Math.max(K,E*u(ue,te)/2)),K}var G=l(b,0,1),Q=l(b,S.total,S.total-1),X=B(F[0],G),j=S.total-B(F[F.length-1],Q);S.min<X&&(S.min=X),S.max>j&&(S.max=j),S.len=S.max-S.min}function l(b,v,C){var S=b.getPointAtLength(v),k=b.getPointAtLength(C),E=k.x-S.x,F=k.y-S.y,I=Math.sqrt(E*E+F*F);return[E/I,F/I]}function x(b){var v=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return[b[0]/v,b[1]/v]}function u(b,v){var C=Math.abs(b[0]*v[0]+b[1]*v[1]),S=Math.sqrt(1-C*C);return S/C}function A(b,v,C,S,k,E){var F,I,D,R,O=e.ensureSingle(b,"g","contourbg"),z=O.selectAll("path").data(E==="fill"&&!k?[0]:[]);z.enter().append("path"),z.exit().remove();var B=[];for(R=0;R<v.length;R++)F=v[R],I=f([],F.x,C.c2p),D=f([],F.y,S.c2p),B.push(M(I,D,F.bicubic));z.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function _(b,v,C,S,k,E,F,I,D,R,O){var z=R==="fill";z&&s(k,b.contours);var B=e.ensureSingle(v,"g","contourfill"),G=B.selectAll("path").data(z?k:[]);G.enter().append("path"),G.exit().remove(),G.each(function(Q){var X=(Q.prefixBoundary?O:"")+g(b,Q,E,F,I,D,C,S);X?w.select(this).attr("d",X).style("stroke","none"):w.select(this).remove()})}function g(b,v,C,S,k,E,F,I){var D,R="",O=v.edgepaths.map(function(ie,se){return se}),z=!0,B,G,Q,X,j,re,ue=Math.abs(C[0][0]-C[2][0])*1e-4,K=Math.abs(C[0][1]-C[2][1])*1e-4;function te(ie){return Math.abs(ie[1]-C[0][1])<K}function Y(ie){return Math.abs(ie[1]-C[2][1])<K}function V(ie){return Math.abs(ie[0]-C[0][0])<ue}function ee(ie){return Math.abs(ie[0]-C[2][0])<ue}function ne(ie,se){var ae,oe,be,ce,de="";for(te(ie)&&!ee(ie)||Y(ie)&&!V(ie)?(ce=k.aaxis,be=d(k,E,[ie[0],se[0]],.5*(ie[1]+se[1]))):(ce=k.baxis,be=d(k,E,.5*(ie[0]+se[0]),[ie[1],se[1]])),ae=1;ae<be.length;ae++)for(de+=ce.smoothing?"C":"L",oe=0;oe<be[ae].length;oe++){var ye=be[ae][oe];de+=[F.c2p(ye[0]),I.c2p(ye[1])]+" "}return de}for(D=0,B=null;O.length;){var Z=v.edgepaths[D][0];for(B&&(R+=ne(B,Z)),re=T.smoothopen(v.edgepaths[D].map(S),v.smoothing),R+=z?re:re.replace(/^M/,"L"),O.splice(O.indexOf(D),1),B=v.edgepaths[D][v.edgepaths[D].length-1],X=-1,Q=0;Q<4;Q++){if(!B){e.log("Missing end?",D,v);break}for(te(B)&&!ee(B)?G=C[1]:V(B)?G=C[0]:Y(B)?G=C[3]:ee(B)&&(G=C[2]),j=0;j<v.edgepaths.length;j++){var q=v.edgepaths[j][0];Math.abs(B[0]-G[0])<ue?Math.abs(B[0]-q[0])<ue&&(q[1]-B[1])*(G[1]-q[1])>=0&&(G=q,X=j):Math.abs(B[1]-G[1])<K?Math.abs(B[1]-q[1])<K&&(q[0]-B[0])*(G[0]-q[0])>=0&&(G=q,X=j):e.log("endpt to newendpt is not vert. or horz.",B,G,q)}if(X>=0)break;R+=ne(B,G),B=G}if(X===v.edgepaths.length){e.log("unclosed perimeter path");break}D=X,z=O.indexOf(D)===-1,z&&(D=O[0],R+=ne(B,G)+"Z",B=null)}for(D=0;D<v.paths.length;D++)R+=T.smoothclosed(v.paths[D].map(S),v.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/template_attributes").hovertemplateAttrs,M=o("../../plots/attributes"),T=o("../scattermapbox/attributes"),e=o("../../lib/extend").extendFlat;U.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:f(),showlegend:e({},M.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib").isArrayOrTypedArray,M=o("../../constants/numerical").BADNUM,T=o("../../components/colorscale/calc"),e=o("../../lib")._;U.exports=function(n,r){for(var t=r._length,h=new Array(t),i=r.z,s=f(i)&&i.length,y=0;y<t;y++){var d=h[y]={},p=r.lon[y],c=r.lat[y];if(d.lonlat=w(p)&&w(c)?[+p,+c]:[M,M],s){var m=i[y];d.z=w(m)?m:M}}return T(n,r,{vals:s?i:[0,1],containerStr:"",cLetter:"z"}),t&&(h[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),h}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../components/color"),T=o("../../components/colorscale"),e=o("../../constants/numerical").BADNUM,a=o("../../lib/geojson_utils").makeBlank;U.exports=function(r){var t=r[0].trace,h=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},s=t._opts={heatmap:i,geojson:a()};if(!h)return s;var y=[],d,p=t.z,c=t.radius,m=f.isArrayOrTypedArray(p)&&p.length,l=f.isArrayOrTypedArray(c);for(d=0;d<r.length;d++){var x=r[d],u=x.lonlat;if(u[0]!==e){var A={};if(m){var _=x.z;A.z=_!==e?_:0}l&&(A.r=w(c[d])&&c[d]>0?+c[d]:0),y.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:A})}}var g=T.extractOpts(t),b=g.reversescale?T.flipScale(g.colorscale):g.colorscale,v=b[0][1],C=M.opacity(v)<1?v:M.addOpacity(v,0),S=["interpolate",["linear"],["heatmap-density"],0,C];for(d=1;d<b.length;d++)S.push(b[d][0],b[d][1]);var k=["interpolate",["linear"],["get","z"],g.min,0,g.max,1];return f.extendFlat(s.heatmap.paint,{"heatmap-weight":m?k:1/(g.max-g.min),"heatmap-color":S,"heatmap-radius":l?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),s.geojson={type:"FeatureCollection",features:y},s.heatmap.layout.visibility="visible",s}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/defaults"),M=o("./attributes");U.exports=function(e,a,n,r){function t(y,d){return w.coerce(e,a,M,y,d)}var h=t("lon")||[],i=t("lat")||[],s=Math.min(h.length,i.length);if(!s){a.visible=!1;return}a._length=s,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),f(e,a,r,t,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(o,U,H){U.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f.z=M.z,f}},{}],776:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../scattermapbox/hover").hoverPoints,M=o("../scattermapbox/hover").getExtraText;U.exports=function(e,a,n){var r=f(e,a,n);if(!!r){var t=r[0],h=t.cd,i=h[0].trace,s=h[t.index];if(delete t.color,"z"in s){var y=t.subplot.mockAxis;t.z=s.z,t.zLabel=w.tickText(y,y.c2l(s.z),"hover").text}return t.extraText=M(i,s,h[0].t.labels),[t]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../heatmap/colorbar"),formatLabels:o("../scattermapbox/format_labels"),calc:o("./calc"),plot:o("./plot"),hoverPoints:o("./hover"),eventData:o("./event_data"),getBelow:function(w,f){for(var M=f.getMapLayers(),T=0;T<M.length;T++){var e=M[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:o("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(o,U,H){var w=o("./convert"),f=o("../../plots/mapbox/constants").traceLayerPrefix;function M(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",f+a+"-heatmap"]],this.below=null}var T=M.prototype;T.update=function(e){var a=this.subplot,n=this.layerList,r=w(e),t=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var h=0;h<n.length;h++){var i=n[h],s=i[0],y=i[1],d=r[s];a.setOptions(y,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(y,"setPaintProperty",d.paint)}},T._addLayers=function(e,a){for(var n=this.subplot,r=this.layerList,t=this.sourceId,h=0;h<r.length;h++){var i=r[h],s=i[0],y=e[s];n.addLayer({type:s,id:i[1],source:t,layout:y.layout,paint:y.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,n=a.length-1;n>=0;n--)e.removeLayer(a[n][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},U.exports=function(a,n){var r=n[0].trace,t=new M(a,r.uid),h=t.sourceId,i=w(n),s=t.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(h,{type:"geojson",data:i.geojson}),t._addLayers(i,s),t}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo"),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":515}],780:[function(o,U,H){var w=o("../bar/attributes"),f=o("../scatter/attributes").line,M=o("../../plots/attributes"),T=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../plots/template_attributes").texttemplateAttrs,n=o("./constants"),r=o("../../lib/extend").extendFlat,t=o("../../components/color");U.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),text:w.text,textposition:w.textposition,insidetextanchor:r({},w.insidetextanchor,{dflt:"middle"}),textangle:r({},w.textangle,{dflt:0}),textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:r({},w.orientation,{}),offset:r({},w.offset,{arrayOk:!1}),width:r({},w.width,{arrayOk:!1}),marker:h(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},f.color,{dflt:t.defaultLine}),width:r({},f.width,{dflt:0,editType:"plot"}),dash:f.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup};function h(){var i=r({},w.marker);return delete i.pattern,i}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../plots/cartesian/align_period"),M=o("./arrays_to_calcdata"),T=o("../scatter/calc_selection"),e=o("../../constants/numerical").BADNUM;U.exports=function(r,t){var h=w.getFromId(r,t.xaxis||"x"),i=w.getFromId(r,t.yaxis||"y"),s,y,d,p,c,m,l,x;t.orientation==="h"?(s=h.makeCalcdata(t,"x"),d=i.makeCalcdata(t,"y"),p=f(t,i,"y",d),c=!!t.yperiodalignment,m="y"):(s=i.makeCalcdata(t,"y"),d=h.makeCalcdata(t,"x"),p=f(t,h,"x",d),c=!!t.xperiodalignment,m="x"),y=p.vals;var u=Math.min(y.length,s.length),A=new Array(u);for(t._base=[],l=0;l<u;l++){s[l]<0&&(s[l]=e);var _=!1;s[l]!==e&&l+1<u&&s[l+1]!==e&&(_=!0),x=A[l]={p:y[l],s:s[l],cNext:_},t._base[l]=-.5*x.s,c&&(A[l].orig_p=d[l],A[l][m+"End"]=p.ends[l],A[l][m+"Start"]=p.starts[l]),t.ids&&(x.id=String(t.ids[l])),l===0&&(A[0].vTotal=0),A[0].vTotal+=a(x.s),x.begR=a(x.s)/a(A[0].s)}var g;for(l=0;l<u;l++)x=A[l],x.s!==e&&(x.sumR=x.s/A[0].vTotal,x.difR=g!==void 0?x.s/g:1,g=x.s);return M(A,t),T(A,t),A};function a(n){return n===e?0:n}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(o,U,H){U.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(o,U,H){var w=o("../bar/cross_trace_calc").setGroupPositions;U.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,h=[],i=[],s=[],y,d;for(d=0;d<a.length;d++){var p=a[d],c=p.orientation==="h";p.visible===!0&&p.xaxis===r._id&&p.yaxis===t._id&&p.type==="funnel"&&(y=n[d],c?s.push(y):i.push(y),h.push(y))}var m={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(w(M,r,t,i,m),w(M,t,r,s,m),d=0;d<h.length;d++){y=h[d];for(var l=0;l<y.length;l++)l+1<y.length&&(y[l].nextP0=y[l+1].p0,y[l].nextS0=y[l+1].s0,y[l].nextP1=y[l+1].p1,y[l].nextS1=y[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(o,U,H){var w=o("../../lib"),f=o("../bar/defaults").handleGroupingDefaults,M=o("../bar/defaults").handleText,T=o("../scatter/xy_defaults"),e=o("../scatter/period_defaults"),a=o("./attributes"),n=o("../../components/color");function r(i,s,y,d){function p(_,g){return w.coerce(i,s,a,_,g)}var c=T(i,s,d,p);if(!c){s.visible=!1;return}e(i,s,d,p),p("xhoverformat"),p("yhoverformat"),p("orientation",s.y&&!s.x?"v":"h"),p("offset"),p("width");var m=p("text");p("hovertext"),p("hovertemplate");var l=p("textposition");M(i,s,d,p,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&p("textinfo",Array.isArray(m)?"text+value":"value");var x=p("marker.color",y);p("marker.line.color",n.defaultLine),p("marker.line.width");var u=p("connector.visible");if(u){p("connector.fillcolor",t(x));var A=p("connector.line.width");A&&(p("connector.line.color"),p("connector.line.dash"))}}function t(i){var s=w.isArrayOrTypedArray(i)?"#000":i;return n.addOpacity(s,.5*n.opacity(s))}function h(i,s){var y,d;function p(m){return w.coerce(d._input,d,a,m)}if(s.funnelmode==="group")for(var c=0;c<i.length;c++)d=i[c],y=d._input,f(y,d,s,p)}U.exports={supplyDefaults:r,crossTraceDefaults:h}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(o,U,H){U.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(f.percentInitial=M.percentInitial),"percentPrevious"in M&&(f.percentPrevious=M.percentPrevious),"percentTotal"in M&&(f.percentTotal=M.percentTotal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],786:[function(o,U,H){var w=o("../../components/color").opacity,f=o("../bar/hover").hoverOnBars,M=o("../../lib").formatPercent;U.exports=function(a,n,r,t,h){var i=f(a,n,r,t,h);if(!!i){var s=i.cd,y=s[0].trace,d=y.orientation==="h",p=i.index,c=s[p],m=d?"x":"y";i[m+"LabelVal"]=c.s,i.percentInitial=c.begR,i.percentInitialLabel=M(c.begR,1),i.percentPrevious=c.difR,i.percentPreviousLabel=M(c.difR,1),i.percentTotal=c.sumR,i.percentTotalLabel=M(c.sumR,1);var l=c.hi||y.hoverinfo,x=[];if(l&&l!=="none"&&l!=="skip"){var u=l==="all",A=l.split("+"),_=function(g){return u||A.indexOf(g)!==-1};_("percent initial")&&x.push(i.percentInitialLabel+" of initial"),_("percent previous")&&x.push(i.percentPreviousLabel+" of previous"),_("percent total")&&x.push(i.percentTotalLabel+" of total")}return i.extraText=x.join("<br>"),i.color=T(y,c),[i]}};function T(e,a){var n=e.marker,r=a.mc||n.color,t=a.mlc||n.line.color,h=a.mlw||n.line.width;if(w(r))return r;if(w(t)&&h)return t}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults").supplyDefaults,crossTraceDefaults:o("./defaults").crossTraceDefaults,supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc"),crossTraceCalc:o("./cross_trace_calc"),plot:o("./plot"),style:o("./style").style,hoverPoints:o("./hover"),eventData:o("./event_data"),selectPoints:o("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:o("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(o,U,H){U.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(M,T,e){var a=!1;function n(h,i){return w.coerce(M,T,f,h,i)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="funnel"){a=!0;break}}a&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../constants/numerical").BADNUM,e=o("../bar/plot"),a=o("../bar/uniform_text").clearMinTextSize;U.exports=function(i,s,y,d){var p=i._fullLayout;a("funnel",p),n(i,s,y,d),r(i,s,y,d),e.plot(i,s,y,d,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})};function n(h,i,s,y){var d=i.xaxis,p=i.yaxis;f.makeTraceGroups(y,s,"trace bars").each(function(c){var m=w.select(this),l=c[0].trace,x=f.ensureSingle(m,"g","regions");if(!l.connector||!l.connector.visible){x.remove();return}var u=l.orientation==="h",A=x.selectAll("g.region").data(f.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=t(g,d,p,u),C=v[0],S=v[1],k="";C[0]!==T&&S[0]!==T&&C[1]!==T&&S[1]!==T&&C[2]!==T&&S[2]!==T&&C[3]!==T&&S[3]!==T&&(u?k+="M"+C[0]+","+S[1]+"L"+C[2]+","+S[2]+"H"+C[3]+"L"+C[1]+","+S[1]+"Z":k+="M"+C[1]+","+S[1]+"L"+C[2]+","+S[3]+"V"+S[2]+"L"+C[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,i.layerClipId,h)}})})}function r(h,i,s,y){var d=i.xaxis,p=i.yaxis;f.makeTraceGroups(y,s,"trace bars").each(function(c){var m=w.select(this),l=c[0].trace,x=f.ensureSingle(m,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){x.remove();return}var u=l.orientation==="h",A=x.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=t(g,d,p,u),C=v[0],S=v[1],k="";C[3]!==void 0&&S[3]!==void 0&&(u?(k+="M"+C[0]+","+S[1]+"L"+C[2]+","+S[2],k+="M"+C[1]+","+S[1]+"L"+C[3]+","+S[2]):(k+="M"+C[1]+","+S[1]+"L"+C[2]+","+S[3],k+="M"+C[1]+","+S[0]+"L"+C[2]+","+S[2])),k===""&&(k="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,i.layerClipId,h)}})})}function t(h,i,s,y){var d=[],p=[],c=y?i:s,m=y?s:i;return d[0]=c.c2p(h.s0,!0),p[0]=m.c2p(h.p0,!0),d[1]=c.c2p(h.s1,!0),p[1]=m.c2p(h.p1,!0),d[2]=c.c2p(h.nextS0,!0),p[2]=m.c2p(h.nextP0,!0),d[3]=c.c2p(h.nextS1,!0),p[3]=m.c2p(h.nextP1,!0),y?[d,p]:[p,d]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../components/color"),T=o("../../constants/interactions").DESELECTDIM,e=o("../bar/style"),a=o("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,h,i){var s=i||w.select(t).selectAll("g.funnellayer").selectAll("g.trace");a(t,s,"funnel"),s.style("opacity",function(y){return y[0].trace.opacity}),s.each(function(y){var d=w.select(this),p=y[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=p.marker;w.select(this).call(M.fill,c.mc||m.color).call(M.stroke,c.mlc||m.line.color).call(f.dashLine,m.line.dash,c.mlw||m.line.width).style("opacity",p.selectedpoints&&!c.selected?T:1)}}),n(d,p,t),d.selectAll(".regions").each(function(){w.select(this).selectAll("path").style("stroke-width",0).call(M.fill,p.connector.fillcolor)}),d.selectAll(".lines").each(function(){var c=p.connector.line;f.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}U.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(o,U,H){var w=o("../pie/attributes"),f=o("../../plots/attributes"),M=o("../../plots/domain").attributes,T=o("../../plots/template_attributes").hovertemplateAttrs,e=o("../../plots/template_attributes").texttemplateAttrs,a=o("../../lib/extend").extendFlat;U.exports={labels:w.labels,label0:w.label0,dlabel:w.dlabel,values:w.values,marker:{colors:w.marker.colors,line:{color:a({},w.marker.line.color,{dflt:null}),width:a({},w.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:w.text,hovertext:w.hovertext,scalegroup:a({},w.scalegroup,{}),textinfo:a({},w.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},w.textposition,{values:["inside","none"],dflt:"inside"}),textfont:w.textfont,insidetextfont:w.insidetextfont,title:{text:w.title.text,font:w.title.font,position:a({},w.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(o,U,H){var w=o("../../plots/plots");H.name="funnelarea",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],794:[function(o,U,H){var w=o("../pie/calc");function f(T,e){return w.calc(T,e)}function M(T){w.crossTraceCalc(T,{type:"funnelarea"})}U.exports={calc:f,crossTraceCalc:M}},{"../pie/calc":912}],795:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../plots/domain").defaults,T=o("../bar/defaults").handleText,e=o("../pie/defaults").handleLabelsAndValues;U.exports=function(n,r,t,h){function i(_,g){return w.coerce(n,r,f,_,g)}var s=i("labels"),y=i("values"),d=e(s,y),p=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(i("label0"),i("dlabel")),!p){r.visible=!1;return}r._length=p;var c=i("marker.line.width");c&&i("marker.line.color",h.paper_bgcolor),i("marker.colors"),i("scalegroup");var m=i("text"),l=i("texttemplate"),x;if(l||(x=i("textinfo",Array.isArray(m)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),l||x&&x!=="none"){var u=i("textposition");T(n,r,h,i,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(r,h,i);var A=i("title.text");A&&(i("title.position"),w.coerceFont(i,"title.font",h.font)),i("aspectratio"),i("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(o,U,H){U.exports={moduleType:"trace",name:"funnelarea",basePlotModule:o("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot"),style:o("./style"),styleOne:o("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(o,U,H){var w=o("../pie/layout_attributes").hiddenlabels;U.exports={hiddenlabels:w,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../lib"),T=M.strScale,e=M.strTranslate,a=o("../../lib/svg_text_utils"),n=o("../bar/plot"),r=n.toMoveInsideBar,t=o("../bar/uniform_text"),h=t.recordMinTextSize,i=t.clearMinTextSize,s=o("../pie/helpers"),y=o("../pie/plot"),d=y.attachFxHandlers,p=y.determineInsideTextFont,c=y.layoutAreas,m=y.prerenderTitles,l=y.positionTitleOutside,x=y.formatSliceLabel;U.exports=function(b,v){var C=b._context.staticPlot,S=b._fullLayout;i("funnelarea",S),m(v,b),c(v,S._size),M.makeTraceGroups(S._funnelarealayer,v,"trace").each(function(k){var E=w.select(this),F=k[0],I=F.trace;_(k),E.each(function(){var D=w.select(this).selectAll("g.slice").data(k);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(O,z){if(O.hidden){w.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var B=F.cx,G=F.cy,Q=w.select(this),X=Q.selectAll("path.surface").data([O]);X.enter().append("path").classed("surface",!0).style({"pointer-events":C?"none":"all"}),Q.call(d,b,k);var j="M"+(B+O.TR[0])+","+(G+O.TR[1])+u(O.TR,O.BR)+u(O.BR,O.BL)+u(O.BL,O.TL)+"Z";X.attr("d",j),x(b,O,F);var re=s.castOption(I.textposition,O.pts),ue=Q.selectAll("g.slicetext").data(O.text&&re!=="none"?[0]:[]);ue.enter().append("g").classed("slicetext",!0),ue.exit().remove(),ue.each(function(){var K=M.ensureSingle(w.select(this),"text","",function(ie){ie.attr("data-notex",1)}),te=M.ensureUniformFontSize(b,p(I,O,S.font));K.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(f.font,te).call(a.convertToTspans,b);var Y=f.bBox(K.node()),V,ee,ne,Z=Math.min(O.BL[1],O.BR[1])+G,q=Math.max(O.TL[1],O.TR[1])+G;ee=Math.max(O.TL[0],O.BL[0])+B,ne=Math.min(O.TR[0],O.BR[0])+B,V=r(ee,ne,Z,q,Y,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),V.fontSize=te.size,h(I.type,V,S),k[z].transform=V,M.setTransormAndDisplay(K,V)})});var R=w.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var O=M.ensureSingle(w.select(this),"text","",function(G){G.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=M.templateString(z,I._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(f.font,I.title.font).call(a.convertToTspans,b);var B=l(F,S._size);O.attr("transform",e(B.x,B.y)+T(Math.min(1,B.scale))+e(B.tx,B.ty))})})})};function u(g,b){var v=b[0]-g[0],C=b[1]-g[1];return"l"+v+","+C}function A(g,b){return[.5*(g[0]+b[0]),.5*(g[1]+b[1])]}function _(g){if(!g.length)return;var b=g[0],v=b.trace,C=v.aspectratio,S=v.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),E=b.vTotal,F=E*k/(1-k),I=E,D=F/E;function R(){var se=Math.sqrt(D);return{x:se,y:-se}}function O(){var se=R();return[se.x,se.y]}var z,B=[];B.push(O());var G,Q;for(G=g.length-1;G>-1;G--)if(Q=g[G],!Q.hidden){var X=Q.v/I;D+=X,B.push(O())}var j=1/0,re=-1/0;for(G=0;G<B.length;G++)z=B[G],j=Math.min(j,z[1]),re=Math.max(re,z[1]);for(G=0;G<B.length;G++)B[G][1]-=(re+j)/2;var ue=B[B.length-1][0],K=b.r,te=(re-j)/2,Y=K/ue,V=K/te*C;for(b.r=V*te,G=0;G<B.length;G++)B[G][0]*=Y,B[G][1]*=V;z=B[0];var ee=[-z[0],z[1]],ne=[z[0],z[1]],Z=0;for(G=g.length-1;G>-1;G--)if(Q=g[G],!Q.hidden){Z+=1;var q=B[Z][0],ie=B[Z][1];Q.TL=[-q,ie],Q.TR=[q,ie],Q.BL=ee,Q.BR=ne,Q.pxmid=A(Q.TR,Q.BR),ee=Q.TL,ne=Q.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(o,U,H){var w=o("@plotly/d3"),f=o("../pie/style_one"),M=o("../bar/uniform_text").resizeText;U.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");M(e,a,"funnelarea"),a.each(function(n){var r=n[0],t=r.trace,h=w.select(this);h.style({opacity:t.opacity}),h.selectAll("path.surface").each(function(i){w.select(this).call(f,i,t)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../../plots/attributes"),M=o("../../plots/font_attributes"),T=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../plots/template_attributes").texttemplateAttrs,n=o("../../components/colorscale/attributes"),r=o("../../lib/extend").extendFlat;U.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},w.x,{impliedEdits:{xtype:"array"}}),x0:r({},w.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},w.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},w.y,{impliedEdits:{ytype:"array"}}),y0:r({},w.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},w.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},w.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},w.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},w.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},w.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},w.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},w.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},f.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../plots/cartesian/axes"),T=o("../../plots/cartesian/align_period"),e=o("../histogram2d/calc"),a=o("../../components/colorscale/calc"),n=o("./convert_column_xyz"),r=o("./clean_2d_array"),t=o("./interp2d"),h=o("./find_empties"),i=o("./make_bound_array"),s=o("../../constants/numerical").BADNUM;U.exports=function(c,m){var l=M.getFromId(c,m.xaxis||"x"),x=M.getFromId(c,m.yaxis||"y"),u=w.traceIs(m,"contour"),A=w.traceIs(m,"histogram"),_=w.traceIs(m,"gl2d"),g=u?"best":m.zsmooth,b,v,C,S,k,E,F,I,D,R,O;if(l._minDtick=0,x._minDtick=0,A)O=e(c,m),S=O.orig_x,b=O.x,v=O.x0,C=O.dx,I=O.orig_y,k=O.y,E=O.y0,F=O.dy,D=O.z;else{var z=m.z;f.isArray1D(z)?(n(m,l,x,"x","y",["z"]),b=m._x,k=m._y,z=m._z):(S=m.x?l.makeCalcdata(m,"x"):[],I=m.y?x.makeCalcdata(m,"y"):[],b=T(m,l,"x",S).vals,k=T(m,x,"y",I).vals,m._x=b,m._y=k),v=m.x0,C=m.dx,E=m.y0,F=m.dy,D=r(z,m,l,x)}(l.rangebreaks||x.rangebreaks)&&(D=d(b,k,D),A||(b=y(b),k=y(k),m._x=b,m._y=k)),!A&&(u||m.connectgaps)&&(m._emptypoints=h(D),t(D,m._emptypoints));function B(ne){g=m._input.zsmooth=m.zsmooth=!1,f.warn('cannot use zsmooth: "fast": '+ne)}if(g==="fast"){if(l.type==="log"||x.type==="log")B("log axis found");else if(!A){if(b.length){var G=(b[b.length-1]-b[0])/(b.length-1),Q=Math.abs(G/100);for(R=0;R<b.length-1;R++)if(Math.abs(b[R+1]-b[R]-G)>Q){B("x scale is not linear");break}}if(k.length&&g==="fast"){var X=(k[k.length-1]-k[0])/(k.length-1),j=Math.abs(X/100);for(R=0;R<k.length-1;R++)if(Math.abs(k[R+1]-k[R]-X)>j){B("y scale is not linear");break}}}}var re=f.maxRowLength(D),ue=m.xtype==="scaled"?"":b,K=i(m,ue,v,C,re,l),te=m.ytype==="scaled"?"":k,Y=i(m,te,E,F,D.length,x);_||(m._extremes[l._id]=M.findExtremes(l,K),m._extremes[x._id]=M.findExtremes(x,Y));var V={x:K,y:Y,z:D,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&S&&(V.orig_x=S),m.yperiodalignment&&I&&(V.orig_y=I),ue&&ue.length===K.length-1&&(V.xCenter=ue),te&&te.length===Y.length-1&&(V.yCenter=te),A&&(V.xRanges=O.xRanges,V.yRanges=O.yRanges,V.pts=O.pts),u||a(c,m,{vals:D,cLetter:"z"}),u&&m.contours&&m.contours.coloring==="heatmap"){var ee={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};V.xfill=i(ee,ue,v,C,re,l),V.yfill=i(ee,te,E,F,D.length,x)}return[V]};function y(p){for(var c=[],m=p.length,l=0;l<m;l++){var x=p[l];x!==s&&c.push(x)}return c}function d(p,c,m){for(var l=[],x=-1,u=0;u<m.length;u++)if(c[u]!==s){x++,l[x]=[];for(var A=0;A<m[u].length;A++)p[A]!==s&&l[x].push(m[u][A])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../constants/numerical").BADNUM;U.exports=function(e,a,n,r){var t,h,i,s,y,d;function p(A){if(!!w(A))return+A}if(a&&a.transpose){for(t=0,y=0;y<e.length;y++)t=Math.max(t,e[y].length);if(t===0)return!1;i=function(A){return A.length},s=function(A,_,g){return(A[g]||[])[_]}}else t=e.length,i=function(A,_){return A[_].length},s=function(A,_,g){return(A[_]||[])[g]};var c=function(A,_,g){return _===M||g===M?M:s(A,_,g)};function m(A){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&A&&A.type==="category"&&a["_"+A._id.charAt(0)].length){var _=A._id.charAt(0),g={},b=a["_"+_+"CategoryMap"]||a[_];for(y=0;y<b.length;y++)g[b[y]]=y;return function(v){var C=g[A._categories[v]];return C+1?C:M}}else return f.identity}var l=m(n),x=m(r);r&&r.type==="category"&&(t=r._categories.length);var u=new Array(t);for(y=0;y<t;y++)for(n&&n.type==="category"?h=n._categories.length:h=i(e,y),u[y]=new Array(h),d=0;d<h;d++)u[y][d]=p(c(e,x(y),l(d)));return u}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(o,U,H){U.exports={min:"zmin",max:"zmax"}},{}],805:[function(o,U,H){var w=o("../../lib"),f=o("../../constants/numerical").BADNUM,M=o("../../plots/cartesian/align_period");U.exports=function(e,a,n,r,t,h){var i=e._length,s=a.makeCalcdata(e,r),y=n.makeCalcdata(e,t);s=M(e,a,r,s).vals,y=M(e,n,t,y).vals;var d=e.text,p=d!==void 0&&w.isArray1D(d),c=e.hovertext,m=c!==void 0&&w.isArray1D(c),l,x,u=w.distinctVals(s),A=u.vals,_=w.distinctVals(y),g=_.vals,b=[],v,C,S=g.length,k=A.length;for(l=0;l<h.length;l++)b[l]=w.init2dArray(S,k);p&&(v=w.init2dArray(S,k)),m&&(C=w.init2dArray(S,k));var E=w.init2dArray(S,k);for(l=0;l<i;l++)if(s[l]!==f&&y[l]!==f){var F=w.findBin(s[l]+u.minDiff/2,A),I=w.findBin(y[l]+_.minDiff/2,g);for(x=0;x<h.length;x++){var D=h[x],R=e[D],O=b[x];O[I][F]=R[l],E[I][F]=l}p&&(v[I][F]=d[l]),m&&(C[I][F]=c[l])}for(e["_"+r]=A,e["_"+t]=g,x=0;x<h.length;x++)e["_"+h[x]]=b[x];p&&(e._text=v),m&&(e._hovertext=C),a&&a.type==="category"&&(e["_"+r+"CategoryMap"]=A.map(function(z){return a._categories[z]})),n&&n.type==="category"&&(e["_"+t+"CategoryMap"]=g.map(function(z){return n._categories[z]})),e._after2before=E}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(o,U,H){var w=o("../../lib"),f=o("./xyz_defaults"),M=o("./label_defaults"),T=o("../scatter/period_defaults"),e=o("./style_defaults"),a=o("../../components/colorscale/defaults"),n=o("./attributes");U.exports=function(t,h,i,s){function y(p,c){return w.coerce(t,h,n,p,c)}var d=f(t,h,y,s);if(!d){h.visible=!1;return}T(t,h,s,y),y("xhoverformat"),y("yhoverformat"),y("text"),y("hovertext"),y("hovertemplate"),M(y,s),e(t,h,y,s),y("hoverongaps"),y("connectgaps",w.isArray1D(h.z)&&h.zsmooth!==!1),a(t,h,s,y,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(o,U,H){var w=o("../../lib").maxRowLength;U.exports=function(M){var T=[],e={},a=[],n=M[0],r=[],t=[0,0,0],h=w(M),i,s,y,d,p,c,m,l;for(s=0;s<M.length;s++)for(i=r,r=n,n=M[s+1]||[],y=0;y<h;y++)r[y]===void 0&&(c=(r[y-1]!==void 0?1:0)+(r[y+1]!==void 0?1:0)+(i[y]!==void 0?1:0)+(n[y]!==void 0?1:0),c?(s===0&&c++,y===0&&c++,s===M.length-1&&c++,y===r.length-1&&c++,c<4&&(e[[s,y]]=[s,y,c]),T.push([s,y,c])):a.push([s,y]));for(;a.length;){for(m={},l=!1,p=a.length-1;p>=0;p--)d=a[p],s=d[0],y=d[1],c=((e[[s-1,y]]||t)[2]+(e[[s+1,y]]||t)[2]+(e[[s,y-1]]||t)[2]+(e[[s,y+1]]||t)[2])/20,c&&(m[d]=[s,y,c],a.splice(p,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(d in m)e[d]=m[d],T.push(m[d])}return T.sort(function(x,u){return u[2]-x[2]})}},{"../../lib":515}],808:[function(o,U,H){var w=o("../../components/fx"),f=o("../../lib"),M=o("../../plots/cartesian/axes"),T=o("../../components/colorscale").extractOpts;U.exports=function(a,n,r,t,h){h||(h={});var i=h.isContour,s=a.cd[0],y=s.trace,d=a.xa,p=a.ya,c=s.x,m=s.y,l=s.z,x=s.xCenter,u=s.yCenter,A=s.zmask,_=y.zhoverformat,g=c,b=m,v,C,S,k;if(a.index!==!1){try{S=Math.round(a.index[1]),k=Math.round(a.index[0])}catch{f.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=l[0].length||k<0||k>l.length)return}else{if(w.inbox(n-c[0],n-c[c.length-1],0)>0||w.inbox(r-m[0],r-m[m.length-1],0)>0)return;if(i){var E;for(g=[2*c[0]-c[1]],E=1;E<c.length;E++)g.push((c[E]+c[E-1])/2);for(g.push([2*c[c.length-1]-c[c.length-2]]),b=[2*m[0]-m[1]],E=1;E<m.length;E++)b.push((m[E]+m[E-1])/2);b.push([2*m[m.length-1]-m[m.length-2]])}S=Math.max(0,Math.min(g.length-2,f.findBin(n,g))),k=Math.max(0,Math.min(b.length-2,f.findBin(r,b)))}var F=d.c2p(c[S]),I=d.c2p(c[S+1]),D=p.c2p(m[k]),R=p.c2p(m[k+1]),O,z;i?(O=s.orig_x||c,z=s.orig_y||m,I=F,v=O[S],R=D,C=z[k]):(O=s.orig_x||x||c,z=s.orig_y||u||m,v=x?O[S]:(O[S]+O[S+1])/2,C=u?z[k]:(z[k]+z[k+1])/2,d&&d.type==="category"&&(v=c[S]),p&&p.type==="category"&&(C=m[k]),y.zsmooth&&(F=I=d.c2p(v),D=R=p.c2p(C)));var B=l[k][S];if(A&&!A[k][S]&&(B=void 0),!(B===void 0&&!y.hoverongaps)){var G;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[k])?G=s.hovertext[k][S]:Array.isArray(s.text)&&Array.isArray(s.text[k])&&(G=s.text[k][S]);var Q=T(y),X={type:"linear",range:[Q.min,Q.max],hoverformat:_,_separators:d._separators,_numFormat:d._numFormat},j=M.tickText(X,B,"hover").text;return[f.extendFlat(a,{index:y._after2before?y._after2before[k][S]:[k,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:v,yLabelVal:C,zLabelVal:B,zLabel:j,text:G})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot"),colorbar:o("./colorbar"),style:o("./style"),hoverPoints:o("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(o,U,H){var w=o("../../lib"),f=.01,M=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}U.exports=function(n,r){var t=1,h;for(e(n,r),h=0;h<r.length&&!(r[h][2]<4);h++);for(r=r.slice(h),h=0;h<100&&t>f;h++)t=e(n,r,T(t));return t>f&&w.log("interp2d didn't converge quickly",t),n};function e(a,n,r){var t=0,h,i,s,y,d,p,c,m,l,x,u,A,_;for(y=0;y<n.length;y++){for(h=n[y],i=h[0],s=h[1],u=a[i][s],x=0,l=0,d=0;d<4;d++)p=M[d],c=a[i+p[0]],c&&(m=c[s+p[1]],m!==void 0&&(x===0?A=_=m:(A=Math.min(A,m),_=Math.max(_,m)),l++,x+=m));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[i][s]=x/l,u===void 0?l<4&&(t=1):(a[i][s]=(1+r)*a[i][s]-r*u,_>A&&(t=Math.max(t,Math.abs(a[i][s]-u)/(_-A))))}return t}},{"../../lib":515}],811:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){M("texttemplate");var e=w.extendFlat({},T.font,{color:"auto",size:"auto"});w.coerceFont(M,"textfont",e)}},{"../../lib":515}],812:[function(o,U,H){var w=o("../../registry"),f=o("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n,r,t){var h=[],i=w.traceIs(T,"contour"),s=w.traceIs(T,"histogram"),y=w.traceIs(T,"gl2d"),d,p,c,m=f(e)&&e.length>1;if(m&&!s&&t.type!=="category"){var l=e.length;if(l<=r){if(i||y)h=e.slice(0,r);else if(r===1)h=[e[0]-.5,e[0]+.5];else{for(h=[1.5*e[0]-.5*e[1]],c=1;c<l;c++)h.push((e[c-1]+e[c])*.5);h.push(1.5*e[l-1]-.5*e[l-2])}if(l<r){var x=h[h.length-1],u=x-h[h.length-2];for(c=l;c<r;c++)x+=u,h.push(x)}}else return i?e.slice(0,r):e.slice(0,r+1)}else{var A=T[t._id.charAt(0)+"calendar"];if(s)d=t.r2c(a,0,A);else if(f(e)&&e.length===1)d=e[0];else if(a===void 0)d=0;else{var _=t.type==="log"?t.d2c:t.r2c;d=_(a,0,A)}for(p=n||1,c=i||y?0:-.5;c<r;c++)h.push(d+p*c)}return h}},{"../../lib":515,"../../registry":647}],813:[function(o,U,H){var w=o("@plotly/d3"),f=o("tinycolor2"),M=o("../../registry"),T=o("../../components/drawing"),e=o("../../plots/cartesian/axes"),a=o("../../lib"),n=o("../../lib/svg_text_utils"),r=o("../scatter/format_labels"),t=o("../../components/color"),h=o("../../components/colorscale").extractOpts,i=o("../../components/colorscale").makeColorScaleFuncFromTrace,s=o("../../constants/xmlns_namespaces"),y=o("../../constants/alignment"),d=y.LINE_SPACING,p="heatmap-label";function c(A){return A.selectAll("g."+p)}function m(A){c(A).remove()}U.exports=function(A,_,g,b){var v=_.xaxis,C=_.yaxis;a.makeTraceGroups(b,g,"hm").each(function(S){var k=w.select(this),E=S[0],F=E.trace,I=F.xgap||0,D=F.ygap||0,R=E.z,O=E.x,z=E.y,B=E.xCenter,G=E.yCenter,Q=M.traceIs(F,"contour"),X=Q?"best":F.zsmooth,j=R.length,re=a.maxRowLength(R),ue=!1,K=!1,te,Y,V,ee,ne,Z,q,ie;for(Z=0;te===void 0&&Z<O.length-1;)te=v.c2p(O[Z]),Z++;for(Z=O.length-1;Y===void 0&&Z>0;)Y=v.c2p(O[Z]),Z--;for(Y<te&&(V=Y,Y=te,te=V,ue=!0),Z=0;ee===void 0&&Z<z.length-1;)ee=C.c2p(z[Z]),Z++;for(Z=z.length-1;ne===void 0&&Z>0;)ne=C.c2p(z[Z]),Z--;if(ne<ee&&(V=ee,ee=ne,ne=V,K=!0),Q&&(B=O,G=z,O=E.xfill,z=E.yfill),X!=="fast"){var se=X==="best"?0:.5;te=Math.max(-se*v._length,te),Y=Math.min((1+se)*v._length,Y),ee=Math.max(-se*C._length,ee),ne=Math.min((1+se)*C._length,ne)}var ae=Math.round(Y-te),oe=Math.round(ne-ee),be=ae<=0||oe<=0;if(be){var ce=k.selectAll("image").data([]);ce.exit().remove(),m(k);return}var de,ye;X==="fast"?(de=re,ye=j):(de=ae,ye=oe);var ge=document.createElement("canvas");ge.width=de,ge.height=ye;var me=ge.getContext("2d"),Me=i(F,{noNumericCheck:!0,returnArray:!0}),Le,Oe;X==="fast"?(Le=ue?function(Ir){return re-1-Ir}:a.identity,Oe=K?function(Ir){return j-1-Ir}:a.identity):(Le=function(Ir){return a.constrain(Math.round(v.c2p(O[Ir])-te),0,ae)},Oe=function(Ir){return a.constrain(Math.round(C.c2p(z[Ir])-ee),0,oe)});var _e=Oe(0),Ee=[_e,_e],Ze=ue?0:1,Ge=K?0:1,Fe=0,Re=0,We=0,xt=0,Nt,tr,Vt,Pt,$t;function Ut(Ir,kr){if(Ir!==void 0){var Kr=Me(Ir);return Kr[0]=Math.round(Kr[0]),Kr[1]=Math.round(Kr[1]),Kr[2]=Math.round(Kr[2]),Fe+=kr,Re+=Kr[0]*kr,We+=Kr[1]*kr,xt+=Kr[2]*kr,Kr}return[0,0,0,0]}function Lt(Ir,kr,Kr,kn){var yn=Ir[Kr.bin0];if(yn===void 0)return Ut(void 0,1);var Yn=Ir[Kr.bin1],In=kr[Kr.bin0],Jn=kr[Kr.bin1],Zn=Yn-yn||0,ba=In-yn||0,Pa;return Yn===void 0?Jn===void 0?Pa=0:In===void 0?Pa=2*(Jn-yn):Pa=(2*Jn-In-yn)*2/3:Jn===void 0?In===void 0?Pa=0:Pa=(2*yn-Yn-In)*2/3:In===void 0?Pa=(2*Jn-Yn-yn)*2/3:Pa=Jn+yn-Yn-In,Ut(yn+Kr.frac*Zn+kn.frac*(ba+Kr.frac*Pa))}if(X){var Ye=0,ot;try{ot=new Uint8Array(ae*oe*4)}catch{ot=new Array(ae*oe*4)}if(X==="best"){var Ve=B||O,Ae=G||z,He=new Array(Ve.length),Je=new Array(Ae.length),tt=new Array(ae),St=B?x:l,_t=G?x:l,kt,jt,Bt;for(Z=0;Z<Ve.length;Z++)He[Z]=Math.round(v.c2p(Ve[Z])-te);for(Z=0;Z<Ae.length;Z++)Je[Z]=Math.round(C.c2p(Ae[Z])-ee);for(Z=0;Z<ae;Z++)tt[Z]=St(Z,He);for(q=0;q<oe;q++)for(kt=_t(q,Je),jt=R[kt.bin0],Bt=R[kt.bin1],Z=0;Z<ae;Z++,Ye+=4)$t=Lt(jt,Bt,tt[Z],kt),u(ot,Ye,$t)}else for(q=0;q<j;q++)for(Pt=R[q],Ee=Oe(q),Z=0;Z<ae;Z++)$t=Ut(Pt[Z],1),Ye=(Ee*ae+Le(Z))*4,u(ot,Ye,$t);var Wt=me.createImageData(ae,oe);try{Wt.data.set(ot)}catch{var Qt=Wt.data,Zt=Qt.length;for(q=0;q<Zt;q++)Qt[q]=ot[q]}me.putImageData(Wt,0,0)}else{var cr=Math.floor(I/2),Xr=Math.floor(D/2);for(q=0;q<j;q++)if(Pt=R[q],Ee.reverse(),Ee[Ge]=Oe(q+1),!(Ee[0]===Ee[1]||Ee[0]===void 0||Ee[1]===void 0))for(tr=Le(0),Nt=[tr,tr],Z=0;Z<re;Z++)Nt.reverse(),Nt[Ze]=Le(Z+1),!(Nt[0]===Nt[1]||Nt[0]===void 0||Nt[1]===void 0)&&(Vt=Pt[Z],$t=Ut(Vt,(Nt[1]-Nt[0])*(Ee[1]-Ee[0])),me.fillStyle="rgba("+$t.join(",")+")",me.fillRect(Nt[0]+cr,Ee[0]+Xr,Nt[1]-Nt[0]-I,Ee[1]-Ee[0]-D))}Re=Math.round(Re/Fe),We=Math.round(We/Fe),xt=Math.round(xt/Fe);var vn=f("rgb("+Re+","+We+","+xt+")");A._hmpixcount=(A._hmpixcount||0)+Fe,A._hmlumcount=(A._hmlumcount||0)+Fe*vn.getLuminance();var en=k.selectAll("image").data(S);en.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),en.attr({height:oe,width:ae,x:te,y:ee,"xlink:href":ge.toDataURL("image/png")}),m(k);var ft=F.texttemplate;if(ft){var ar=h(F),rr={type:"linear",range:[ar.min,ar.max],_separators:v._separators,_numFormat:v._numFormat},Kt=F.type==="histogram2dcontour",Er=F.type==="contour",st=Er?1:0,et=Er?j-1:j,vt=Er?1:0,pt=Er?re-1:re,Ct=[];for(Z=st;Z<et;Z++){var Ht;if(Er)Ht=E.y[Z];else if(Kt){if(Z===0||Z===j-1)continue;Ht=E.y[Z]}else if(E.yCenter)Ht=E.yCenter[Z];else{if(Z+1===j&&E.y[Z+1]===void 0)continue;Ht=(E.y[Z]+E.y[Z+1])/2}var Pe=Math.round(C.c2p(Ht));if(!(0>Pe||Pe>C._length))for(q=vt;q<pt;q++){var ke;if(Er)ke=E.x[q];else if(Kt){if(q===0||q===re-1)continue;ke=E.x[q]}else if(E.xCenter)ke=E.xCenter[q];else{if(q+1===re&&E.x[q+1]===void 0)continue;ke=(E.x[q]+E.x[q+1])/2}var lt=Math.round(v.c2p(ke));if(!(0>lt||lt>v._length)){var ct=r({x:ke,y:Ht},F,A._fullLayout);ct.x=ke,ct.y=Ht;var yt=E.z[Z][q];yt===void 0?(ct.z="",ct.zLabel=""):(ct.z=yt,ct.zLabel=e.tickText(rr,yt,"hover").text);var Rt=E.text&&E.text[Z]&&E.text[Z][q];(Rt===void 0||Rt===!1)&&(Rt=""),ct.text=Rt;var wt=a.texttemplateString(ft,ct,A._fullLayout._d3locale,ct,F._meta||{});if(!!wt){var Dt=wt.split("<br>"),Jt=Dt.length,fr=0;for(ie=0;ie<Jt;ie++)fr=Math.max(fr,Dt[ie].length);Ct.push({l:Jt,c:fr,t:wt,x:lt,y:Pe,z:yt})}}}}var Rr=F.textfont,Sr=Rr.family,Pr=Rr.size,Jr=A._fullLayout.font.size;if(!Pr||Pr==="auto"){var ur=1/0,wr=1/0,Br=0,Yr=0;for(ie=0;ie<Ct.length;ie++){var Dr=Ct[ie];if(Br=Math.max(Br,Dr.l),Yr=Math.max(Yr,Dr.c),ie<Ct.length-1){var at=Ct[ie+1],zt=Math.abs(at.x-Dr.x),qt=Math.abs(at.y-Dr.y);zt&&(ur=Math.min(ur,zt)),qt&&(wr=Math.min(wr,qt))}}!isFinite(ur)||!isFinite(wr)?Pr=Jr:(ur-=I,wr-=D,ur/=Yr,wr/=Br,ur/=d/2,wr/=d,Pr=Math.min(Math.floor(ur),Math.floor(wr),Jr))}if(Pr<=0||!isFinite(Pr))return;var hr=function(Ir){return Ir.x},Ur=function(Ir){return Ir.y-Pr*(Ir.l*d/2-1)},Gr=c(k).data(Ct);Gr.enter().append("g").classed(p,1).append("text").attr("text-anchor","middle").each(function(Ir){var kr=w.select(this),Kr=Rr.color;(!Kr||Kr==="auto")&&(Kr=t.contrast("rgba("+Me(Ir.z).join()+")")),kr.attr("data-notex",1).call(n.positionText,hr(Ir),Ur(Ir)).call(T.font,Sr,Pr,Kr).text(Ir.t).call(n.convertToTspans,A)})}})};function l(A,_){var g=_.length-2,b=a.constrain(a.findBin(A,_),0,g),v=_[b],C=_[b+1],S=a.constrain(b+(A-v)/(C-v)-.5,0,g),k=Math.round(S),E=Math.abs(S-k);return!S||S===g||!E?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:E,bin1:Math.round(k+E/(S-k))}}function x(A,_){var g=_.length-1,b=a.constrain(a.findBin(A,_),0,g),v=_[b],C=_[b+1],S=(A-v)/(C-v)||0;return S<=0?{bin0:b,bin1:b,frac:0}:S<.5?{bin0:b,bin1:b+1,frac:S}:{bin0:b+1,bin1:b,frac:1-S}}function u(A,_,g){A[_]=g[0],A[_+1]=g[1],A[_+2]=g[2],A[_+3]=Math.round(g[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(o,U,H){var w=o("@plotly/d3");U.exports=function(M){w.select(M).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(o,U,H){U.exports=function(f,M,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../registry");U.exports=function(n,r,t,h,i,s){var y=t("z");i=i||"x",s=s||"y";var d,p;if(y===void 0||!y.length)return 0;if(f.isArray1D(n.z)){d=t(i),p=t(s);var c=f.minRowLength(d),m=f.minRowLength(p);if(c===0||m===0)return 0;r._length=Math.min(c,m,y.length)}else{if(d=T(i,t),p=T(s,t),!e(y))return 0;t("transpose"),r._length=null}if(n.type==="heatmapgl")return!0;var l=M.getComponentMethod("calendars","handleTraceDefaults");return l(n,r,[i,s],h),!0};function T(a,n){var r=n(a),t=r?n(a+"type","array"):"scaled";return t==="scaled"&&(n(a+"0"),n("d"+a)),r}function e(a){for(var n=!0,r=!1,t=!1,h,i=0;i<a.length;i++){if(h=a[i],!f.isArrayOrTypedArray(h)){n=!1;break}h.length>0&&(r=!0);for(var s=0;s<h.length;s++)if(w(h[s])){t=!0;break}}return n&&r&&t}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(o,U,H){for(var w=o("../heatmap/attributes"),f=o("../../components/colorscale/attributes"),M=o("../../lib/extend").extendFlat,T=o("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},n=0;n<e.length;n++){var r=e[n];a[r]=w[r]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(a,f("",{cLetter:"z",autoColorDflt:!1})),U.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(o,U,H){var w=o("../../../stackgl_modules").gl_heatmap2d,f=o("../../plots/cartesian/axes"),M=o("../../lib/str2rgbarray");function T(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=w(r.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(r){var t=this.options,h=t.shape,i=r.pointId,s=i%h[0],y=Math.floor(i/h[0]),d=i;return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[s],t.y[y],t.z[d]],textLabel:this.textLabels[i],name:this.name,pointIndex:[y,s],hoverinfo:this.hoverinfo}},e.update=function(r,t){var h=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var i=h.z;this.options.z=[].concat.apply([],i);var s=i[0].length,y=i.length;this.options.shape=[s,y],this.options.x=h.x,this.options.y=h.y,this.options.zsmooth=r.zsmooth;var d=a(r);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var p=this.scene.xaxis,c=this.scene.yaxis,m,l;r.zsmooth===!1&&(m={ppad:h.x[1]-h.x[0]},l={ppad:h.y[1]-h.y[0]}),r._extremes[p._id]=f.findExtremes(p,h.x,m),r._extremes[c._id]=f.findExtremes(c,h.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(r){for(var t=r.colorscale,h=r.zmin,i=r.zmax,s=t.length,y=new Array(s),d=new Array(4*s),p=0;p<s;p++){var c=t[p],m=M(c[1]);y[p]=h+c[0]*(i-h);for(var l=0;l<4;l++)d[4*p+l]=m[l]}return{colorLevels:y,colorValues:d}}function n(r,t,h){var i=new T(r,t.uid);return i.update(t,h),i}U.exports=n},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(o,U,H){var w=o("../../lib"),f=o("../heatmap/xyz_defaults"),M=o("../../components/colorscale/defaults"),T=o("./attributes");U.exports=function(a,n,r,t){function h(s,y){return w.coerce(a,n,T,s,y)}var i=f(a,n,h,t);if(!i){n.visible=!1;return}h("text"),h("zsmooth"),M(a,n,t,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../heatmap/colorbar"),calc:o("../heatmap/calc"),plot:o("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:o("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(o,U,H){var w=o("../bar/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../../plots/template_attributes").texttemplateAttrs,e=o("../../plots/font_attributes"),a=o("./bin_attributes"),n=o("./constants"),r=o("../../lib/extend").extendFlat;U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:f("x"),yhoverformat:f("y"),text:r({},w.text,{}),hovertext:r({},w.hovertext,{}),orientation:w.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:n.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},w.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:w.insidetextanchor,textangle:w.textangle,cliponaxis:w.cliponaxis,constraintext:w.constraintext,marker:w.marker,offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,_deprecated:{bardir:w._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(o,U,H){U.exports=function(f,M){for(var T=f.length,e=0,a=0;a<T;a++)M[a]?(f[a]/=M[a],e+=f[a]):f[a]=null;return e}},{}],823:[function(o,U,H){U.exports=function(f,M){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(o,U,H){var w=o("fast-isnumeric");U.exports={count:function(f,M,T){return T[f]++,1},sum:function(f,M,T,e){var a=e[M];return w(a)?(a=Number(a),T[f]+=a,a):0},avg:function(f,M,T,e,a){var n=e[M];return w(n)&&(n=Number(n),T[f]+=n,a[f]++),0},min:function(f,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[f])){if(T[f]>a){var n=a-T[f];return T[f]=a,n}}else return T[f]=a,a;return 0},max:function(f,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[f])){if(T[f]<a){var n=a-T[f];return T[f]=a,n}}else return T[f]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(o,U,H){var w=o("../../constants/numerical"),f=w.ONEAVGYEAR,M=w.ONEAVGMONTH,T=w.ONEDAY,e=w.ONEHOUR,a=w.ONEMIN,n=w.ONESEC,r=o("../../plots/cartesian/axes").tickIncrement;U.exports=function(d,p,c,m,l){var x=-1.1*p,u=-.1*p,A=d-u,_=c[0],g=c[1],b=Math.min(t(_+u,_+A,m,l),t(g+u,g+A,m,l)),v=Math.min(t(_+x,_+u,m,l),t(g+x,g+u,m,l)),C,S;if(b>v&&v<Math.abs(g-_)/4e3?(C=b,S=!1):(C=Math.min(b,v),S=!0),m.type==="date"&&C>T){var k=C===f?1:6,E=C===f?"M12":"M1";return function(F,I){var D=m.c2d(F,f,l),R=D.indexOf("-",k);R>0&&(D=D.substr(0,R));var O=m.d2c(D,0,l);if(O<F){var z=r(O,E,!1,l);(O+z)/2<F+d&&(O=z)}return I&&S?r(O,E,!0,l):O}}return function(F,I){var D=C*Math.round(F/C);return D+C/10<F&&D+C*.9<F+d&&(D+=C),I&&S&&(D-=C),D}};function t(y,d,p,c){if(y*d<=0)return 1/0;for(var m=Math.abs(d-y),l=p.type==="date",x=h(m,l),u=0;u<10;u++){var A=h(x*80,l);if(x===A)break;if(i(A,y,d,l,p,c))x=A;else break}return x}function h(y,d){return d&&y>n?y>T?y>f*1.1?f:y>M*1.1?M:T:y>e?e:y>a?a:n:Math.pow(10,Math.floor(Math.log(y)/Math.LN10))}function i(y,d,p,c,m,l){if(c&&y>T){var x=s(d,m,l),u=s(p,m,l),A=y===f?0:1;return x[A]!==u[A]}return Math.floor(p/y)-Math.floor(d/y)>.1}function s(y,d,p){var c=d.c2d(y,f,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../registry"),T=o("../../plots/cartesian/axes"),e=o("../bar/arrays_to_calcdata"),a=o("./bin_functions"),n=o("./norm_functions"),r=o("./average"),t=o("./bin_label_vals");function h(p,c){var m=[],l=[],x=c.orientation==="h",u=T.getFromId(p,x?c.yaxis:c.xaxis),A=x?"y":"x",_={x:"y",y:"x"}[A],g=c[A+"calendar"],b=c.cumulative,v,C=i(p,c,u,A),S=C[0],k=C[1],E=typeof S.size=="string",F=[],I=E?F:S,D=[],R=[],O=[],z=0,B=c.histnorm,G=c.histfunc,Q=B.indexOf("density")!==-1,X,j,re;b.enabled&&Q&&(B=B.replace(/ ?density$/,""),Q=!1);var ue=G==="max"||G==="min",K=ue?null:0,te=a.count,Y=n[B],V=!1,ee=function(Oe){return u.r2c(Oe,0,g)},ne;for(f.isArrayOrTypedArray(c[_])&&G!=="count"&&(ne=c[_],V=G==="avg",te=a[G]),v=ee(S.start),j=ee(S.end)+(v-T.tickIncrement(v,S.size,!1,g))/1e6;v<j&&m.length<1e6&&(X=T.tickIncrement(v,S.size,!1,g),m.push((v+X)/2),l.push(K),O.push([]),F.push(v),Q&&D.push(1/(X-v)),V&&R.push(0),!(X<=v));)v=X;F.push(v),!E&&u.type==="date"&&(I={start:ee(I.start),end:ee(I.end),size:I.size}),p._fullLayout._roundFnOpts||(p._fullLayout._roundFnOpts={});var Z=c["_"+A+"bingroup"],q={leftGap:1/0,rightGap:1/0};Z&&(p._fullLayout._roundFnOpts[Z]||(p._fullLayout._roundFnOpts[Z]=q),q=p._fullLayout._roundFnOpts[Z]);var ie=l.length,se=!0,ae=q.leftGap,oe=q.rightGap,be={};for(v=0;v<k.length;v++){var ce=k[v];re=f.findBin(ce,I),re>=0&&re<ie&&(z+=te(re,v,l,ne,R),se&&O[re].length&&ce!==k[O[re][0]]&&(se=!1),O[re].push(v),be[v]=re,ae=Math.min(ae,ce-F[re]),oe=Math.min(oe,F[re+1]-ce))}q.leftGap=ae,q.rightGap=oe;var de;se||(de=function(Oe,_e){return function(){var Ee=p._fullLayout._roundFnOpts[Z];return t(Ee.leftGap,Ee.rightGap,F,u,g)(Oe,_e)}}),V&&(z=r(l,R)),Y&&Y(l,z,D),b.enabled&&d(l,b.direction,b.currentbin);var ye=Math.min(m.length,l.length),ge=[],me=0,Me=ye-1;for(v=0;v<ye;v++)if(l[v]){me=v;break}for(v=ye-1;v>=me;v--)if(l[v]){Me=v;break}for(v=me;v<=Me;v++)if(w(m[v])&&w(l[v])){var Le={p:m[v],s:l[v],b:0};b.enabled||(Le.pts=O[v],se?Le.ph0=Le.ph1=O[v].length?k[O[v][0]]:m[v]:(c._computePh=!0,Le.ph0=de(F[v]),Le.ph1=de(F[v+1],!0))),ge.push(Le)}return ge.length===1&&(ge[0].width1=T.tickIncrement(ge[0].p,S.size,!1,g)-ge[0].p),e(ge,c),f.isArrayOrTypedArray(c.selectedpoints)&&f.tagSelected(ge,c,be),ge}function i(p,c,m,l,x){var u=l+"bins",A=p._fullLayout,_=c["_"+l+"bingroup"],g=A._histogramBinOpts[_],b=A.barmode==="overlay",v,C,S,k,E,F,I,D=function(ce){return m.r2c(ce,0,k)},R=function(ce){return m.c2r(ce,0,k)},O=m.type==="date"?function(ce){return ce||ce===0?f.cleanDate(ce,null,k):null}:function(ce){return w(ce)?Number(ce):null};function z(ce,de,ye){de[ce+"Found"]?(de[ce]=O(de[ce]),de[ce]===null&&(de[ce]=ye[ce])):(F[ce]=de[ce]=ye[ce],f.nestedProperty(C[0],u+"."+ce).set(ye[ce]))}if(c["_"+l+"autoBinFinished"])delete c["_"+l+"autoBinFinished"];else{C=g.traces;var B=[],G=!0,Q=!1,X=!1;for(v=0;v<C.length;v++)if(S=C[v],S.visible){var j=g.dirs[v];E=S["_"+j+"pos0"]=m.makeCalcdata(S,j),B=f.concat(B,E),delete S["_"+l+"autoBinFinished"],c.visible===!0&&(G?G=!1:(delete S._autoBin,S["_"+l+"autoBinFinished"]=1),M.traceIs(S,"2dMap")&&(Q=!0),S.type==="histogram2dcontour"&&(X=!0))}k=C[0][l+"calendar"];var re=T.autoBin(B,m,g.nbins,Q,k,g.sizeFound&&g.size),ue=C[0]._autoBin={};if(F=ue[g.dirs[0]]={},X&&(g.size||(re.start=R(T.tickIncrement(D(re.start),re.size,!0,k))),g.end===void 0&&(re.end=R(T.tickIncrement(D(re.end),re.size,!1,k)))),b&&!M.traceIs(c,"2dMap")&&re._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(x)return[re,E,!0];re=s(p,c,m,l,u)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?re.start=R(T.tickIncrement(D(re.start),re.size,!0,k)):re.end=R(T.tickIncrement(D(re.end),re.size,!1,k))),g.size=re.size,g.sizeFound||(F.size=re.size,f.nestedProperty(C[0],u+".size").set(re.size)),z("start",g,re),z("end",g,re)}E=c["_"+l+"pos0"],delete c["_"+l+"pos0"];var K=c._input[u]||{},te=f.extendFlat({},g),Y=g.start,V=m.r2l(K.start),ee=V!==void 0;if((g.startFound||ee)&&V!==m.r2l(Y)){var ne=ee?V:f.aggNums(Math.min,null,E),Z={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:g.size,tick0:Y,calendar:k,range:[ne,T.tickIncrement(ne,g.size,!1,k)].map(m.l2r)},q=T.tickFirst(Z);q>m.r2l(ne)&&(q=T.tickIncrement(q,g.size,!0,k)),te.start=m.l2r(q),ee||f.nestedProperty(c,u+".start").set(te.start)}var ie=g.end,se=m.r2l(K.end),ae=se!==void 0;if((g.endFound||ae)&&se!==m.r2l(ie)){var oe=ae?se:f.aggNums(Math.max,null,E);te.end=m.l2r(oe),ae||f.nestedProperty(c,u+".start").set(te.end)}var be="autobin"+l;return c._input[be]===!1&&(c._input[u]=f.extendFlat({},c[u]||{}),delete c._input[be],delete c[be]),[te,E]}function s(p,c,m,l,x){var u=p._fullLayout,A=y(p,c),_=!1,g=1/0,b=[c],v,C,S;for(v=0;v<A.length;v++)if(C=A[v],C===c)_=!0;else if(!_)S=u._histogramBinOpts[C["_"+l+"bingroup"]],g=Math.min(g,S.size||C[x].size);else{var k=i(p,C,m,l,!0),E=k[0],F=k[2];C["_"+l+"autoBinFinished"]=1,C["_"+l+"pos0"]=k[1],F?b.push(C):g=Math.min(g,E.size)}var I=new Array(b.length);for(v=0;v<b.length;v++)for(var D=b[v]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[v]=D[R];break}for(isFinite(g)||(g=f.distinctVals(I).minDiff),v=0;v<b.length;v++){C=b[v];var O=C[l+"calendar"],z={start:m.c2r(I[v]-g/2,0,O),end:m.c2r(I[v]+g/2,0,O),size:g};C._input[x]=C[x]=z,S=u._histogramBinOpts[C["_"+l+"bingroup"]],S&&f.extendFlat(S,z)}return c[x]}function y(p,c){for(var m=c.xaxis,l=c.yaxis,x=c.orientation,u=[],A=p._fullData,_=0;_<A.length;_++){var g=A[_];g.type==="histogram"&&g.visible===!0&&g.orientation===x&&g.xaxis===m&&g.yaxis===l&&u.push(g)}return u}function d(p,c,m){var l,x,u;function A(g){u=p[g],p[g]/=2}function _(g){x=p[g],p[g]=u+x/2,u+=x}if(m==="half")if(c==="increasing")for(A(0),l=1;l<p.length;l++)_(l);else for(A(p.length-1),l=p.length-2;l>=0;l--)_(l);else if(c==="increasing"){for(l=1;l<p.length;l++)p[l]+=p[l-1];m==="exclude"&&(p.unshift(0),p.pop())}else{for(l=p.length-2;l>=0;l--)p[l]+=p[l+1];m==="exclude"&&(p.push(0),p.shift())}}U.exports={calc:h,calcAllAutoBins:i}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(o,U,H){U.exports={eventDataKeys:["binNumber"]}},{}],828:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axis_ids"),M=o("../../registry").traceIs,T=o("../bar/defaults").handleGroupingDefaults,e=w.nestedProperty,a=o("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];U.exports=function(h,i){var s=i._histogramBinOpts={},y=[],d={},p=[],c,m,l,x,u,A,_;function g(X,j){return w.coerce(c._input,c,c._module.attributes,X,j)}function b(X){return X.orientation==="v"?"x":"y"}function v(X,j){var re=f.getFromTrace({_fullLayout:i},X,j);return re.type}function C(X,j,re){var ue=X.uid+"__"+re;j||(j=ue);var K=v(X,re),te=X[re+"calendar"]||"",Y=s[j],V=!0;Y&&(K===Y.axType&&te===Y.calendar?(V=!1,Y.traces.push(X),Y.dirs.push(re)):(j=ue,K!==Y.axType&&w.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+K,"axis","with bins on","type:"+Y.axType,"axis."].join(" ")),te!==Y.calendar&&w.warn(["Attempted to group the bins of trace",X.index,"set with a",te,"calendar","with bins",Y.calendar?"on a "+Y.calendar+" calendar":"w/o a set calendar"].join(" ")))),V&&(s[j]={traces:[X],dirs:[re],axType:K,calendar:X[re+"calendar"]||""}),X["_"+re+"bingroup"]=j}for(u=0;u<h.length;u++)c=h[u],M(c,"histogram")&&(y.push(c),delete c._xautoBinFinished,delete c._yautoBinFinished,M(c,"2dMap")||T(c._input,c,i,g));var S=i._alignmentOpts||{};for(u=0;u<y.length;u++){if(c=y[u],l="",!M(c,"2dMap")){if(x=b(c),i.barmode==="group"&&c.alignmentgroup){var k=c[x+"axis"],E=a(i,k)+c.orientation;(S[E]||{})[c.alignmentgroup]&&(l=E)}!l&&i.barmode!=="overlay"&&(l=a(i,c.xaxis)+a(i,c.yaxis)+b(c))}l?(d[l]||(d[l]=[]),d[l].push(c)):p.push(c)}for(l in d){if(m=d[l],m.length===1){p.push(m[0]);continue}var F=!1;for(m.length&&(c=m[0],F=g("bingroup")),l=F||l,u=0;u<m.length;u++){c=m[u];var I=c._input.bingroup;I&&I!==l&&w.warn(["Trace",c.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),c.bingroup=l,C(c,l,b(c))}}for(u=0;u<p.length;u++){c=p[u];var D=g("bingroup");if(M(c,"2dMap"))for(_=0;_<2;_++){x=r[_];var R=g(x+"bingroup",D?D+"__"+x:null);C(c,R,x)}else C(c,D,b(c))}for(l in s){var O=s[l];for(m=O.traces,A=0;A<n.length;A++){var z=n[A],B=z.name,G,Q;if(!(B==="nbins"&&O.sizeFound)){for(u=0;u<m.length;u++){if(c=m[u],x=O.dirs[u],G=z.aStr[x],e(c._input,G).get()!==void 0){O[B]=g(G),O[B+"Found"]=!0;break}Q=(c._autoBin||{})[x]||{},Q[B]&&e(c,G).set(Q[B])}if(B==="start"||B==="end")for(;u<m.length;u++)c=m[u],c["_"+x+"bingroup"]&&(Q=(c._autoBin||{})[x]||{},g(G,Q[B]));B==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(c=m[0],O[B]=g(G))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../components/color"),T=o("../bar/defaults").handleText,e=o("../bar/style_defaults"),a=o("./attributes");U.exports=function(r,t,h,i){function s(v,C){return f.coerce(r,t,a,v,C)}var y=s("x"),d=s("y"),p=s("cumulative.enabled");p&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var c=s("textposition");T(r,t,i,s,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var m=s("orientation",d&&!y?"h":"v"),l=m==="v"?"x":"y",x=m==="v"?"y":"x",u=y&&d?Math.min(f.minRowLength(y)&&f.minRowLength(d)):f.minRowLength(t[l]||[]);if(!u){t.visible=!1;return}t._length=u;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(r,t,["x","y"],i);var _=t[x];_&&s("histfunc"),s("histnorm"),s("autobin"+l),e(r,t,s,h,i),f.coerceSelectionMarkerOpacity(t,s);var g=(t.marker.line||{}).color,b=w.getComponentMethod("errorbars","supplyDefaults");b(r,t,g||M.defaultLine,{axis:"y"}),b(r,t,g||M.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(o,U,H){U.exports=function(f,M,T,e,a){if(f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(f.z=M.zLabelVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),!(T.cumulative||{}).enabled){var n=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;f.pointNumbers=n,f.binNumber=f.pointNumber,delete f.pointNumber,delete f.pointIndex;var r;if(T._indexToPoints){r=[];for(var t=0;t<n.length;t++)r=r.concat(T._indexToPoints[n[t]])}else r=n;f.pointIndices=r}return f}},{}],831:[function(o,U,H){var w=o("../bar/hover").hoverPoints,f=o("../../plots/cartesian/axes").hoverLabelText;U.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var h=T.cd[T.index],i=T.cd[0].trace;if(!i.cumulative.enabled){var s=i.orientation==="h"?"y":"x";T[s+"Label"]=f(T[s+"a"],[h.ph0,h.ph1],i[s+"hoverformat"])}return t}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("../bar/layout_attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("./cross_trace_defaults"),supplyLayoutDefaults:o("../bar/layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("../bar/cross_trace_calc").crossTraceCalc,plot:o("../bar/plot").plot,layerName:"barlayer",style:o("../bar/style").style,styleOnSelect:o("../bar/style").styleOnSelect,colorbar:o("../scatter/marker_colorbar"),hoverPoints:o("./hover"),selectPoints:o("../bar/select"),eventData:o("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:o("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(o,U,H){U.exports={percent:function(w,f){for(var M=w.length,T=100/f,e=0;e<M;e++)w[e]*=T},probability:function(w,f){for(var M=w.length,T=0;T<M;T++)w[T]/=f},density:function(w,f,M,T){var e=w.length;T=T||1;for(var a=0;a<e;a++)w[a]*=M[a]*T},"probability density":function(w,f,M,T){var e=w.length;T&&(f/=T);for(var a=0;a<e;a++)w[a]*=M[a]/f}}},{}],834:[function(o,U,H){var w=o("../histogram/attributes"),f=o("../histogram/bin_attributes"),M=o("../heatmap/attributes"),T=o("../../plots/attributes"),e=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=o("../../plots/template_attributes").hovertemplateAttrs,n=o("../../plots/template_attributes").texttemplateAttrs,r=o("../../components/colorscale/attributes"),t=o("../../lib/extend").extendFlat;U.exports=t({x:w.x,y:w.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:f("x"),nbinsy:w.nbinsy,ybins:f("y"),autobinx:w.autobinx,autobiny:w.autobiny,bingroup:t({},w.bingroup,{}),xbingroup:t({},w.bingroup,{}),ybingroup:t({},w.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:t({},T.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../histogram/bin_functions"),T=o("../histogram/norm_functions"),e=o("../histogram/average"),a=o("../histogram/bin_label_vals"),n=o("../histogram/calc").calcAllAutoBins;U.exports=function(s,y){var d=f.getFromId(s,y.xaxis),p=f.getFromId(s,y.yaxis),c=y.xcalendar,m=y.ycalendar,l=function(Ye){return d.r2c(Ye,0,c)},x=function(Ye){return p.r2c(Ye,0,m)},u=function(Ye){return d.c2r(Ye,0,c)},A=function(Ye){return p.c2r(Ye,0,m)},_,g,b,v,C=n(s,y,d,"x"),S=C[0],k=C[1],E=n(s,y,p,"y"),F=E[0],I=E[1],D=y._length;k.length>D&&k.splice(D,k.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],z=[],B=typeof S.size=="string",G=typeof F.size=="string",Q=[],X=[],j=B?Q:S,re=G?X:F,ue=0,K=[],te=[],Y=y.histnorm,V=y.histfunc,ee=Y.indexOf("density")!==-1,ne=V==="max"||V==="min",Z=ne?null:0,q=M.count,ie=T[Y],se=!1,ae=[],oe=[],be="z"in y?y.z:"marker"in y&&Array.isArray(y.marker.color)?y.marker.color:"";be&&V!=="count"&&(se=V==="avg",q=M[V]);var ce=S.size,de=l(S.start),ye=l(S.end)+(de-f.tickIncrement(de,ce,!1,c))/1e6;for(_=de;_<ye;_=f.tickIncrement(_,ce,!1,c))O.push(Z),Q.push(_),se&&z.push(0);Q.push(_);var ge=O.length,me=(_-de)/ge,Me=u(de+me/2),Le=F.size,Oe=x(F.start),_e=x(F.end)+(Oe-f.tickIncrement(Oe,Le,!1,m))/1e6;for(_=Oe;_<_e;_=f.tickIncrement(_,Le,!1,m)){R.push(O.slice()),X.push(_);var Ee=new Array(ge);for(g=0;g<ge;g++)Ee[g]=[];te.push(Ee),se&&K.push(z.slice())}X.push(_);var Ze=R.length,Ge=(_-Oe)/Ze,Fe=A(Oe+Ge/2);ee&&(ae=r(O.length,j,me,B),oe=r(R.length,re,Ge,G)),!B&&d.type==="date"&&(j=t(l,j)),!G&&p.type==="date"&&(re=t(x,re));var Re=!0,We=!0,xt=new Array(ge),Nt=new Array(Ze),tr=1/0,Vt=1/0,Pt=1/0,$t=1/0;for(_=0;_<D;_++){var Ut=k[_],Lt=I[_];b=w.findBin(Ut,j),v=w.findBin(Lt,re),b>=0&&b<ge&&v>=0&&v<Ze&&(ue+=q(b,_,R[v],be,K[v]),te[v][b].push(_),Re&&(xt[b]===void 0?xt[b]=Ut:xt[b]!==Ut&&(Re=!1)),We&&(Nt[v]===void 0?Nt[v]=Lt:Nt[v]!==Lt&&(We=!1)),tr=Math.min(tr,Ut-Q[b]),Vt=Math.min(Vt,Q[b+1]-Ut),Pt=Math.min(Pt,Lt-X[v]),$t=Math.min($t,X[v+1]-Lt))}if(se)for(v=0;v<Ze;v++)ue+=e(R[v],K[v]);if(ie)for(v=0;v<Ze;v++)ie(R[v],ue,ae,oe[v]);return{x:k,xRanges:h(Q,Re&&xt,tr,Vt,d,c),x0:Me,dx:me,y:I,yRanges:h(X,We&&Nt,Pt,$t,p,m),y0:Fe,dy:Ge,z:R,pts:te}};function r(i,s,y,d){var p=new Array(i),c;if(d)for(c=0;c<i;c++)p[c]=1/(s[c+1]-s[c]);else{var m=1/y;for(c=0;c<i;c++)p[c]=m}return p}function t(i,s){return{start:i(s.start),end:i(s.end),size:s.size}}function h(i,s,y,d,p,c){var m,l=i.length-1,x=new Array(l),u=a(y,d,i,p,c);for(m=0;m<l;m++){var A=(s||[])[m];x[m]=A===void 0?[u(i[m]),u(i[m+1],!0)]:[A,A]}return x}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(o,U,H){var w=o("../../lib"),f=o("./sample_defaults"),M=o("../heatmap/style_defaults"),T=o("../../components/colorscale/defaults"),e=o("../heatmap/label_defaults"),a=o("./attributes");U.exports=function(r,t,h,i){function s(y,d){return w.coerce(r,t,a,y,d)}f(r,t,s,i),t.visible!==!1&&(M(r,t,s,i),T(r,t,i,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),e(s,i),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(o,U,H){var w=o("../heatmap/hover"),f=o("../../plots/cartesian/axes").hoverLabelText;U.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var h=T.index,i=h[0],s=h[1],y=T.cd[0],d=y.trace,p=y.xRanges[s],c=y.yRanges[i];return T.xLabel=f(T.xa,[p[0],p[1]],d.xhoverformat),T.yLabel=f(T.ya,[c[0],c[1]],d.yhoverformat),t}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("../histogram/cross_trace_defaults"),calc:o("../heatmap/calc"),plot:o("../heatmap/plot"),layerName:"heatmaplayer",colorbar:o("../heatmap/colorbar"),style:o("../heatmap/style"),hoverPoints:o("./hover"),eventData:o("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(o,U,H){var w=o("../../registry"),f=o("../../lib");U.exports=function(T,e,a,n){var r=a("x"),t=a("y"),h=f.minRowLength(r),i=f.minRowLength(t);if(!h||!i){e.visible=!1;return}e._length=Math.min(h,i);var s=w.getComponentMethod("calendars","handleTraceDefaults");s(T,e,["x","y"],n);var y=a("z")||a("marker.color");y&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(o,U,H){var w=o("../histogram2d/attributes"),f=o("../contour/attributes"),M=o("../../components/colorscale/attributes"),T=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=o("../../lib/extend").extendFlat;U.exports=e({x:w.x,y:w.y,z:w.z,marker:w.marker,histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:w.xbins,nbinsy:w.nbinsy,ybins:w.ybins,autobinx:w.autobinx,autobiny:w.autobiny,bingroup:w.bingroup,xbingroup:w.xbingroup,ybingroup:w.ybingroup,autocontour:f.autocontour,ncontours:f.ncontours,contours:f.contours,line:{color:f.line.color,width:e({},f.line.width,{dflt:.5}),dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:f.texttemplate,textfont:f.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(o,U,H){var w=o("../../lib"),f=o("../histogram2d/sample_defaults"),M=o("../contour/contours_defaults"),T=o("../contour/style_defaults"),e=o("../heatmap/label_defaults"),a=o("./attributes");U.exports=function(r,t,h,i){function s(d,p){return w.coerce(r,t,a,d,p)}function y(d){return w.coerce2(r,t,a,d)}f(r,t,s,i),t.visible!==!1&&(M(r,t,s,y),T(r,t,s,i),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&e(s,i))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("../histogram/cross_trace_defaults"),calc:o("../contour/calc"),plot:o("../contour/plot").plot,layerName:"contourlayer",style:o("../contour/style"),colorbar:o("../contour/colorbar"),hoverPoints:o("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../../components/colorscale/attributes"),T=o("../../plots/domain").attributes,e=o("../pie/attributes"),a=o("../sunburst/attributes"),n=o("../treemap/attributes"),r=o("../treemap/constants"),t=o("../../lib/extend").extendFlat;U.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:a.marker.colors,line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:n.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(o,U,H){var w=o("../../plots/plots");H.name="icicle",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],845:[function(o,U,H){var w=o("../sunburst/calc");H.calc=function(f,M){return w.calc(f,M)},H.crossTraceCalc=function(f){return w._runCrossTraceCalc("icicle",f)}},{"../sunburst/calc":1060}],846:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../components/color"),T=o("../../plots/domain").defaults,e=o("../bar/defaults").handleText,a=o("../bar/constants").TEXTPAD,n=o("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;U.exports=function(i,s,y,d){function p(b,v){return w.coerce(i,s,f,b,v)}var c=p("labels"),m=p("parents");if(!c||!c.length||!m||!m.length){s.visible=!1;return}var l=p("values");l&&l.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var x=p("text");p("texttemplate"),s.texttemplate||p("textinfo",Array.isArray(x)?"text+label":"label"),p("hovertext"),p("hovertemplate");var u=p("pathbar.visible"),A="auto";e(i,s,d,p,A,{hasPathbar:u,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var _=p("marker.line.width");_&&p("marker.line.color",d.paper_bgcolor),p("marker.colors");var g=s._hasColorscale=r(i,"marker","colors")||(i.marker||{}).coloraxis;g&&t(i,s,d,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",g?1:.7),s._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},u&&(p("pathbar.thickness",s.pathbar.textfont.size+2*a),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(s,d,p),s._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../lib/svg_text_utils"),e=o("./partition"),a=o("./style").styleOne,n=o("../treemap/constants"),r=o("../sunburst/helpers"),t=o("../sunburst/fx"),h=o("../sunburst/plot").formatSliceLabel,i=!1;U.exports=function(y,d,p,c,m){var l=m.width,x=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,g=m.toMoveInsideSlice,b=m.strTransform,v=m.hasTransition,C=m.handleSlicesExit,S=m.makeUpdateSliceInterpolator,k=m.makeUpdateTextInterpolator,E=m.prevEntry,F={},I=y._context.staticPlot,D=y._fullLayout,R=d[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,B=O.textposition.indexOf("right")!==-1,G=O.textposition.indexOf("bottom")!==-1,Q=e(p,[l,x],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),X=Q.descendants(),j=1/0,re=-1/0;X.forEach(function(V){var ee=V.depth;ee>=O._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(j=Math.min(j,ee),re=Math.max(re,ee))}),c=c.data(X,r.getPtId),O._maxVisibleLayers=isFinite(re)?re-j+1:0,c.enter().append("g").classed("slice",!0),C(c,i,F,[l,x],_),c.order();var ue=null;if(v&&E){var K=r.getPtId(E);c.each(function(V){ue===null&&r.getPtId(V)===K&&(ue={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var te=function(){return ue||{x0:0,x1:l,y0:0,y1:x}},Y=c;return v&&(Y=Y.transition().each("end",function(){var V=w.select(this);r.setSliceCursor(V,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(V){V._x0=u(V.x0),V._x1=u(V.x1),V._y0=A(V.y0),V._y1=A(V.y1),V._hoverX=u(V.x1-O.tiling.pad),V._hoverY=A(G?V.y1-O.tiling.pad/2:V.y0+O.tiling.pad/2);var ee=w.select(this),ne=f.ensureSingle(ee,"path","surface",function(se){se.style("pointer-events",I?"none":"all")});v?ne.transition().attrTween("d",function(se){var ae=S(se,i,te(),[l,x],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(oe){return _(ae(oe))}}):ne.attr("d",_),ee.call(t,p,y,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),ne.call(a,V,O,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":V._text=h(V,p,O,d,D)||"";var Z=f.ensureSingle(ee,"g","slicetext"),q=f.ensureSingle(Z,"text","",function(se){se.attr("data-notex",1)}),ie=f.ensureUniformFontSize(y,r.determineTextFont(O,V,D.font));q.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":z?"start":"middle").call(M.font,ie).call(T.convertToTspans,y),V.textBB=M.bBox(q.node()),V.transform=g(V,{fontSize:ie.size}),V.transform.fontSize=ie.size,v?q.transition().attrTween("transform",function(se){var ae=k(se,i,te(),[l,x]);return function(oe){return b(ae(oe))}}):q.attr("transform",b(V))}),ue}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(o,U,H){U.exports={moduleType:"trace",name:"icicle",basePlotModule:o("./base_plot"),categories:[],animatable:!0,attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot"),style:o("./style").style,colorbar:o("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(o,U,H){U.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(o,U,H){var w=o("d3-hierarchy"),f=o("../treemap/flip_tree");U.exports=function(T,e,a){var n=a.flipX,r=a.flipY,t=a.orientation==="h",h=a.maxDepth,i=e[0],s=e[1];h&&(i=(T.height+1)*e[0]/Math.min(T.height+1,h),s=(T.height+1)*e[1]/Math.min(T.height+1,h));var y=w.partition().padding(a.pad.inner).size(t?[e[1],i]:[e[0],s])(T);return(t||n||r)&&f(y,e,{swapXY:t,flipX:n,flipY:r}),y}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(o,U,H){var w=o("../treemap/draw"),f=o("./draw_descendants");U.exports=function(T,e,a,n){return w(T,e,a,n,{type:"icicle",drawDescendants:f})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../lib"),T=o("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._iciclelayer.selectAll(".trace");T(n,r,"icicle"),r.each(function(t){var h=w.select(this),i=t[0],s=i.trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(y){w.select(this).call(a,y,s)})})}function a(n,r,t){var h=r.data.data,i=!r.children,s=h.i,y=M.castOption(t,s,"marker.line.color")||f.defaultLine,d=M.castOption(t,s,"marker.line.width")||0;n.style("stroke-width",d).call(f.fill,h.color).call(f.stroke,y).style("opacity",i?t.leaf.opacity:null)}U.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(o,U,H){for(var w=o("../../plots/attributes"),f=o("../../plots/template_attributes").hovertemplateAttrs,M=o("../../lib/extend").extendFlat,T=o("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],n=[],r=0;r<e.length;r++){var t=T[e[r]];a.push("For the `"+e[r]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),n.push("For the `"+e[r]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}U.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},w.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:f({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(o,U,H){var w=o("../../lib"),f=o("./constants"),M=o("fast-isnumeric"),T=o("../../plots/cartesian/axes"),e=o("../../lib").maxRowLength,a=o("./helpers").getImageSize;U.exports=function(i,s){var y,d;if(s._hasZ)y=s.z.length,d=e(s.z);else if(s._hasSource){var p=a(s.source);y=p.height,d=p.width}var c=T.getFromId(i,s.xaxis||"x"),m=T.getFromId(i,s.yaxis||"y"),l=c.d2c(s.x0)-s.dx/2,x=m.d2c(s.y0)-s.dy/2,u,A=[l,l+d*s.dx],_=[x,x+y*s.dy];if(c&&c.type==="log")for(u=0;u<d;u++)A.push(l+u*s.dx);if(m&&m.type==="log")for(u=0;u<y;u++)_.push(x+u*s.dy);s._extremes[c._id]=T.findExtremes(c,A),s._extremes[m._id]=T.findExtremes(m,_),s._scaler=t(s);var g={x0:l,y0:x,z:s.z,w:d,h:y};return[g]};function n(h,i,s,y){return function(d){return w.constrain((d-h)*i,s,y)}}function r(h,i){return function(s){return w.constrain(s,h,i)}}function t(h){var i=f.colormodel[h.colormodel],s=i.colormodel||h.colormodel,y=s.length;h._sArray=[];for(var d=0;d<y;d++)i.min[d]!==h.zmin[d]||i.max[d]!==h.zmax[d]?h._sArray.push(n(h.zmin[d],(i.max[d]-i.min[d])/(h.zmax[d]-h.zmin[d]),i.min[d],i.max[d])):h._sArray.push(r(i.min[d],i.max[d]));return function(p){for(var c=p.slice(0,y),m=0;m<y;m++){var l=c[m];if(!M(l))return!1;c[m]=h._sArray[m](l)}return c}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(o,U,H){U.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(w){return w.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(w){var f=w.slice(0,3);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(w){var f=w.slice(0,4);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("./constants"),T=o("../../snapshot/helpers").IMAGE_URL_PREFIX;U.exports=function(a,n){function r(i,s){return w.coerce(a,n,f,i,s)}r("source"),n.source&&!n.source.match(T)&&delete n.source,n._hasSource=!!n.source;var t=r("z");if(n._hasZ=!(t===void 0||!t.length||!t[0]||!t[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var h;n._hasZ?(r("colormodel","rgb"),h=M.colormodel[n.colormodel],r("zmin",h.zminDflt||h.min),r("zmax",h.zmaxDflt||h.max)):n._hasSource&&(n.colormodel="rgba256",h=M.colormodel[n.colormodel],n.zmin=h.zminDflt,n.zmax=h.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),n._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(o,U,H){U.exports=function(f,M){return"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f.color=M.color,f.colormodel=M.trace.colormodel,f.z||(f.z=M.color),f}},{}],859:[function(o,U,H){var w=o("probe-image-size/sync"),f=o("../../snapshot/helpers").IMAGE_URL_PREFIX,M=o("buffer/").Buffer;H.getImageSize=function(T){var e=T.replace(f,""),a=new M(e,"base64");return w(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(o,U,H){var w=o("../../components/fx"),f=o("../../lib"),M=o("./constants");U.exports=function(e,a,n){var r=e.cd[0],t=r.trace,h=e.xa,i=e.ya;if(!(w.inbox(a-r.x0,a-(r.x0+r.w*t.dx),0)>0||w.inbox(n-r.y0,n-(r.y0+r.h*t.dy),0)>0)){var s=Math.floor((a-r.x0)/t.dx),y=Math.floor(Math.abs(n-r.y0)/t.dy),d;if(t._hasZ?d=r.z[y][s]:t._hasSource&&(d=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,y,1,1).data),!!d){var p=r.hi||t.hoverinfo,c;if(p){var m=p.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(c=!0)}var l=M.colormodel[t.colormodel],x=l.colormodel||t.colormodel,u=x.length,A=t._scaler(d),_=l.suffix,g=[];(t.hovertemplate||c)&&(g.push("["+[A[0]+_[0],A[1]+_[1],A[2]+_[2]].join(", ")),u===4&&g.push(", "+A[3]+_[3]),g.push("]"),g=g.join(""),e.extraText=x.toUpperCase()+": "+g);var b;Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[y])?b=t.hovertext[y][s]:Array.isArray(t.text)&&Array.isArray(t.text[y])&&(b=t.text[y][s]);var v=i.c2p(r.y0+(y+.5)*t.dy),C=r.x0+(s+.5)*t.dx,S=r.y0+(y+.5)*t.dy,k="["+d.slice(0,t.colormodel.length).join(", ")+"]";return[f.extendFlat(e,{index:[y,s],x0:h.c2p(r.x0+s*t.dx),x1:h.c2p(r.x0+(s+1)*t.dx),y0:v,y1:v,color:A,xVal:C,xLabelVal:C,yVal:S,yLabelVal:S,zLabelVal:k,text:b,hovertemplateLabels:{zLabel:k,colorLabel:g,"color[0]Label":A[0]+_[0],"color[1]Label":A[1]+_[1],"color[2]Label":A[2]+_[2],"color[3]Label":A[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot"),style:o("./style"),hoverPoints:o("./hover"),eventData:o("./event_data"),moduleType:"trace",name:"image",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=f.strTranslate,T=o("../../constants/xmlns_namespaces"),e=o("./constants"),a=f.isIOS()||f.isSafari()||f.isIE();U.exports=function(r,t,h,i){var s=t.xaxis,y=t.yaxis,d=!(a||r._context._exportedPlot);f.makeTraceGroups(i,h,"im").each(function(p){var c=w.select(this),m=p[0],l=m.trace,x=(l.zsmooth==="fast"||l.zsmooth===!1&&d)&&!l._hasZ&&l._hasSource&&s.type==="linear"&&y.type==="linear";l._realImage=x;var u=m.z,A=m.x0,_=m.y0,g=m.w,b=m.h,v=l.dx,C=l.dy,S,k,E,F,I,D;for(D=0;S===void 0&&D<g;)S=s.c2p(A+D*v),D++;for(D=g;k===void 0&&D>0;)k=s.c2p(A+D*v),D--;for(D=0;F===void 0&&D<b;)F=y.c2p(_+D*C),D++;for(D=b;I===void 0&&D>0;)I=y.c2p(_+D*C),D--;if(k<S&&(E=k,k=S,S=E),I<F&&(E=F,F=I,I=E),!x){var R=.5;S=Math.max(-R*s._length,S),k=Math.min((1+R)*s._length,k),F=Math.max(-R*y._length,F),I=Math.min((1+R)*y._length,I)}var O=Math.round(k-S),z=Math.round(I-F),B=O<=0||z<=0;if(B){var G=c.selectAll("image").data([]);G.exit().remove();return}function Q(ne){var Z=document.createElement("canvas");Z.width=O,Z.height=z;var q=Z.getContext("2d",{willReadFrequently:!0}),ie=function(Le){return f.constrain(Math.round(s.c2p(A+Le*v)-S),0,O)},se=function(Le){return f.constrain(Math.round(y.c2p(_+Le*C)-F),0,z)},ae=e.colormodel[l.colormodel],oe=ae.colormodel||l.colormodel,be=ae.fmt,ce;for(D=0;D<m.w;D++){var de=ie(D),ye=ie(D+1);if(!(ye===de||isNaN(ye)||isNaN(de)))for(var ge=0;ge<m.h;ge++){var me=se(ge),Me=se(ge+1);Me===me||isNaN(Me)||isNaN(me)||!ne(D,ge)||(ce=l._scaler(ne(D,ge)),ce?q.fillStyle=oe+"("+be(ce).join(",")+")":q.fillStyle="rgba(0,0,0,0)",q.fillRect(de,me,ye-de,Me-me))}}return Z}var X=c.selectAll("image").data([p]);X.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),X.exit().remove();var j=l.zsmooth===!1?e.pixelatedStyle:"";if(x){var re=f.simpleMap(s.range,s.r2l),ue=f.simpleMap(y.range,y.r2l),K=re[1]<re[0],te=ue[1]>ue[0];if(K||te){var Y=S+O/2,V=F+z/2;j+="transform:"+M(Y+"px",V+"px")+"scale("+(K?-1:1)+","+(te?-1:1)+")"+M(-Y+"px",-V+"px")+";"}}X.attr("style",j);var ee=new Promise(function(ne){if(l._hasZ)ne();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===g&&l._canvas.el.height===b&&l._canvas.source===l.source)ne();else{var Z=document.createElement("canvas");Z.width=g,Z.height=b;var q=Z.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ie=l._image;ie.onload=function(){q.drawImage(ie,0,0),l._canvas={el:Z,source:l.source},ne()},ie.setAttribute("src",l.source)}}).then(function(){var ne,Z;if(l._hasZ)Z=Q(function(se,ae){return u[ae][se]}),ne=Z.toDataURL("image/png");else if(l._hasSource)if(x)ne=l.source;else{var q=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ie=q.getImageData(0,0,g,b).data;Z=Q(function(se,ae){var oe=4*(ae*g+se);return[ie[oe],ie[oe+1],ie[oe+2],ie[oe+3]]}),ne=Z.toDataURL("image/png")}X.attr({"xlink:href":ne,height:z,width:O,x:S,y:F})});r._promises.push(ee)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(o,U,H){var w=o("@plotly/d3");U.exports=function(M){w.select(M).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(o,U,H){var w=o("../../lib/extend").extendFlat,f=o("../../lib/extend").extendDeep,M=o("../../plot_api/edit_types").overrideAll,T=o("../../plots/font_attributes"),e=o("../../components/color/attributes"),a=o("../../plots/domain").attributes,n=o("../../plots/cartesian/layout_attributes"),r=o("../../plot_api/plot_template").templatedArray,t=o("../../constants/delta.js"),h=o("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=T({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},y={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=r("step",f({},s,{range:y}));U.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:w({},i,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:h("value")},font:w({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:h("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:w({},i,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:f({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:y,visible:w({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:w({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:T({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:w({},s.line.color,{}),width:w({},s.line.width,{dflt:1}),editType:"plot"},thickness:w({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(o,U,H){var w=o("../../plots/plots");H.name="indicator",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],866:[function(o,U,H){function w(f,M){var T=[],e=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var a=M._lastValue,n=a;return M._hasDelta&&typeof M.delta.reference=="number"&&(n=M.delta.reference),T[0]={y:e,lastY:a,delta:e-n,relativeDelta:(e-n)/n},T}U.exports={calc:w}},{}],867:[function(o,U,H){U.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../plots/domain").defaults,T=o("../../plot_api/plot_template"),e=o("../../plots/array_container_defaults"),a=o("./constants.js"),n=o("../../plots/cartesian/tick_value_defaults"),r=o("../../plots/cartesian/tick_mark_defaults"),t=o("../../plots/cartesian/tick_label_defaults"),h=o("../../plots/cartesian/prefix_suffix_defaults");function i(y,d,p,c){function m(D,R){return w.coerce(y,d,f,D,R)}M(d,c,m),m("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var l=m("value");d._range=[0,typeof l=="number"?1.5*l:1];var x=new Array(2),u;d._hasNumber&&(m("number.valueformat"),m("number.font.color",c.font.color),m("number.font.family",c.font.family),m("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=a.defaultNumberFontSize,x[0]=!0),m("number.prefix"),m("number.suffix"),u=d.number.font.size);var A;d._hasDelta&&(m("delta.font.color",c.font.color),m("delta.font.family",c.font.family),m("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(u||a.defaultNumberFontSize),x[1]=!0),m("delta.reference",d.value),m("delta.relative"),m("delta.valueformat",d.delta.relative?"2%":""),m("delta.increasing.symbol"),m("delta.increasing.color"),m("delta.decreasing.symbol"),m("delta.decreasing.color"),m("delta.position"),m("delta.prefix"),m("delta.suffix"),A=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||x[0])&&(!d._hasDelta||x[1])||!1,m("title.font.color",c.font.color),m("title.font.family",c.font.family),m("title.font.size",.25*(u||A||a.defaultNumberFontSize)),m("title.text");var _,g,b,v;function C(D,R){return w.coerce(_,g,f.gauge,D,R)}function S(D,R){return w.coerce(b,v,f.gauge.axis,D,R)}if(d._hasGauge){_=y.gauge,_||(_={}),g=T.newContainer(d,"gauge"),C("shape");var k=d._isBullet=d.gauge.shape==="bullet";k||m("title.align","center");var E=d._isAngular=d.gauge.shape==="angular";E||m("align","center"),C("bgcolor",c.paper_bgcolor),C("borderwidth"),C("bordercolor"),C("bar.color"),C("bar.line.color"),C("bar.line.width");var F=a.valueThickness*(d.gauge.shape==="bullet"?.5:1);C("bar.thickness",F),e(_,g,{name:"steps",handleItemDefaults:s}),C("threshold.value"),C("threshold.thickness"),C("threshold.line.width"),C("threshold.line.color"),b={},_&&(b=_.axis||{}),v=T.newContainer(g,"axis"),S("visible"),d._range=S("range",d._range);var I={outerTicks:!0};n(b,v,S,"linear"),h(b,v,S,"linear",I),t(b,v,S,"linear",I),r(b,v,S,I)}else m("title.align","center"),m("align","center"),d._isAngular=d._isBullet=!1;d._length=null}function s(y,d){function p(c,m){return w.coerce(y,d,f.gauge.steps,c,m)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}U.exports={supplyDefaults:i}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(o,U,H){U.exports={moduleType:"trace",name:"indicator",basePlotModule:o("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:o("./attributes"),supplyDefaults:o("./defaults").supplyDefaults,calc:o("./calc").calc,plot:o("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-interpolate").interpolate,M=o("d3-interpolate").interpolateNumber,T=o("../../lib"),e=T.strScale,a=T.strTranslate,n=T.rad2deg,r=o("../../constants/alignment").MID_SHIFT,t=o("../../components/drawing"),h=o("./constants"),i=o("../../lib/svg_text_utils"),s=o("../../plots/cartesian/axes"),y=o("../../plots/cartesian/axis_defaults"),d=o("../../plots/cartesian/position_defaults"),p=o("../../plots/cartesian/layout_attributes"),c=o("../../components/color"),m={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpnµmkMGTPEZY]/;function u(I){return I&&I.duration>0}U.exports=function(D,R,O,z){var B=D._fullLayout,G;u(O)&&z&&(G=z()),T.makeTraceGroups(B._indicatorlayer,R,"trace").each(function(Q){var X=Q[0],j=X.trace,re=w.select(this),ue=j._hasGauge,K=j._isAngular,te=j._isBullet,Y=j.domain,V={w:B._size.w*(Y.x[1]-Y.x[0]),h:B._size.h*(Y.y[1]-Y.y[0]),l:B._size.l+B._size.w*Y.x[0],r:B._size.r+B._size.w*(1-Y.x[1]),t:B._size.t+B._size.h*(1-Y.y[1]),b:B._size.b+B._size.h*Y.y[0]},ee=V.l+V.w/2,ne=V.t+V.h/2,Z=Math.min(V.w/2,V.h),q=h.innerRadius*Z,ie,se,ae,oe=j.align||"center";if(se=ne,!ue)ie=V.l+l[oe]*V.w,ae=function(_e){return S(_e,V.w,V.h)};else if(K&&(ie=ee,se=ne+Z/2,ae=function(_e){return k(_e,.9*q)}),te){var be=h.bulletPadding,ce=1-h.bulletNumberDomainSize+be;ie=V.l+(ce+(1-ce)*l[oe])*V.w,ae=function(_e){return S(_e,(h.bulletNumberDomainSize-be)*V.w,V.h)}}g(D,re,Q,{numbersX:ie,numbersY:se,numbersScaler:ae,transitionOpts:O,onComplete:G});var de,ye;ue&&(de={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},ye={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var ge=re.selectAll("g.angular").data(K?Q:[]);ge.exit().remove();var me=re.selectAll("g.angularaxis").data(K?Q:[]);me.exit().remove(),K&&_(D,re,Q,{radius:Z,innerRadius:q,gauge:ge,layer:me,size:V,gaugeBg:de,gaugeOutline:ye,transitionOpts:O,onComplete:G});var Me=re.selectAll("g.bullet").data(te?Q:[]);Me.exit().remove();var Le=re.selectAll("g.bulletaxis").data(te?Q:[]);Le.exit().remove(),te&&A(D,re,Q,{gauge:Me,layer:Le,size:V,gaugeBg:de,gaugeOutline:ye,transitionOpts:O,onComplete:G});var Oe=re.selectAll("text.title").data(Q);Oe.exit().remove(),Oe.enter().append("text").classed("title",!0),Oe.attr("text-anchor",function(){return te?m.right:m[j.title.align]}).text(j.title.text).call(t.font,j.title.font).call(i.convertToTspans,D),Oe.attr("transform",function(){var _e=V.l+V.w*l[j.title.align],Ee,Ze=h.titlePadding,Ge=t.bBox(Oe.node());if(ue){if(K)if(j.gauge.axis.visible){var Fe=t.bBox(me.node());Ee=Fe.top-Ze-Ge.bottom}else Ee=V.t+V.h/2-Z/2-Ge.bottom-Ze;te&&(Ee=se-(Ge.top+Ge.bottom)/2,_e=V.l-h.bulletPadding*V.w)}else Ee=j._numbersTop-Ze-Ge.bottom;return a(_e,Ee)})})};function A(I,D,R,O){var z=R[0].trace,B=O.gauge,G=O.layer,Q=O.gaugeBg,X=O.gaugeOutline,j=O.size,re=z.domain,ue=O.transitionOpts,K=O.onComplete,te,Y,V,ee,ne;B.enter().append("g").classed("bullet",!0),B.attr("transform",a(j.l,j.t)),G.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),G.selectAll("g.xbulletaxistick,path,text").remove();var Z=j.h,q=z.gauge.bar.thickness*Z,ie=re.x[0],se=re.x[0]+(re.x[1]-re.x[0])*(z._hasNumber||z._hasDelta?1-h.bulletNumberDomainSize:1);te=C(I,z.gauge.axis),te._id="xbulletaxis",te.domain=[ie,se],te.setScale(),Y=s.calcTicks(te),V=s.makeTransTickFn(te),ee=s.getTickSigns(te)[2],ne=j.t+j.h,te.visible&&(s.drawTicks(I,te,{vals:te.ticks==="inside"?s.clipEnds(te,Y):Y,layer:G,path:s.makeTickPath(te,ne,ee),transFn:V}),s.drawLabels(I,te,{vals:Y,layer:G,transFn:V,labelFns:s.makeLabelFns(te,ne)}));function ae(me){me.attr("width",function(Me){return Math.max(0,te.c2p(Me.range[1])-te.c2p(Me.range[0]))}).attr("x",function(Me){return te.c2p(Me.range[0])}).attr("y",function(Me){return .5*(1-Me.thickness)*Z}).attr("height",function(Me){return Me.thickness*Z})}var oe=[Q].concat(z.gauge.steps),be=B.selectAll("g.bg-bullet").data(oe);be.enter().append("g").classed("bg-bullet",!0).append("rect"),be.select("rect").call(ae).call(b),be.exit().remove();var ce=B.selectAll("g.value-bullet").data([z.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",q).attr("y",(Z-q)/2).call(b),u(ue)?ce.select("rect").transition().duration(ue.duration).ease(ue.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).attr("width",Math.max(0,te.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):ce.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,te.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),ce.exit().remove();var de=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),ye=B.selectAll("g.threshold-bullet").data(de);ye.enter().append("g").classed("threshold-bullet",!0).append("line"),ye.select("line").attr("x1",te.c2p(z.gauge.threshold.value)).attr("x2",te.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*Z).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*Z).call(c.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),ye.exit().remove();var ge=B.selectAll("g.gauge-outline").data([X]);ge.enter().append("g").classed("gauge-outline",!0).append("rect"),ge.select("rect").call(ae).call(b),ge.exit().remove()}function _(I,D,R,O){var z=R[0].trace,B=O.size,G=O.radius,Q=O.innerRadius,X=O.gaugeBg,j=O.gaugeOutline,re=[B.l+B.w/2,B.t+B.h/2+G/2],ue=O.gauge,K=O.layer,te=O.transitionOpts,Y=O.onComplete,V=Math.PI/2;function ee(Re){var We=z.gauge.axis.range[0],xt=z.gauge.axis.range[1],Nt=(Re-We)/(xt-We)*Math.PI-V;return Nt<-V?-V:Nt>V?V:Nt}function ne(Re){return w.svg.arc().innerRadius((Q+G)/2-Re/2*(G-Q)).outerRadius((Q+G)/2+Re/2*(G-Q)).startAngle(-V)}function Z(Re){Re.attr("d",function(We){return ne(We.thickness).startAngle(ee(We.range[0])).endAngle(ee(We.range[1]))()})}var q,ie,se,ae;ue.enter().append("g").classed("angular",!0),ue.attr("transform",a(re[0],re[1])),K.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),K.selectAll("g.xangularaxistick,path,text").remove(),q=C(I,z.gauge.axis),q.type="linear",q.range=z.gauge.axis.range,q._id="xangularaxis",q.ticklabeloverflow="allow",q.setScale();var oe=function(Re){return(q.range[0]-Re.x)/(q.range[1]-q.range[0])*Math.PI+Math.PI},be={},ce=s.makeLabelFns(q,0),de=ce.labelStandoff;be.xFn=function(Re){var We=oe(Re);return Math.cos(We)*de},be.yFn=function(Re){var We=oe(Re),xt=Math.sin(We)>0?.2:1;return-Math.sin(We)*(de+Re.fontSize*xt)+Math.abs(Math.cos(We))*(Re.fontSize*r)},be.anchorFn=function(Re){var We=oe(Re),xt=Math.cos(We);return Math.abs(xt)<.1?"middle":xt>0?"start":"end"},be.heightFn=function(Re,We,xt){var Nt=oe(Re);return-.5*(1+Math.sin(Nt))*xt};var ye=function(Re){return a(re[0]+G*Math.cos(Re),re[1]-G*Math.sin(Re))};se=function(Re){return ye(oe(Re))};var ge=function(Re){var We=oe(Re);return ye(We)+"rotate("+-n(We)+")"};if(ie=s.calcTicks(q),ae=s.getTickSigns(q)[2],q.visible){ae=q.ticks==="inside"?-1:1;var me=(q.linewidth||1)/2;s.drawTicks(I,q,{vals:ie,layer:K,path:"M"+ae*me+",0h"+ae*q.ticklen,transFn:ge}),s.drawLabels(I,q,{vals:ie,layer:K,transFn:se,labelFns:be})}var Me=[X].concat(z.gauge.steps),Le=ue.selectAll("g.bg-arc").data(Me);Le.enter().append("g").classed("bg-arc",!0).append("path"),Le.select("path").call(Z).call(b),Le.exit().remove();var Oe=ne(z.gauge.bar.thickness),_e=ue.selectAll("g.value-arc").data([z.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var Ee=_e.select("path");u(te)?(Ee.transition().duration(te.duration).ease(te.easing).each("end",function(){Y&&Y()}).each("interrupt",function(){Y&&Y()}).attrTween("d",v(Oe,ee(R[0].lastY),ee(R[0].y))),z._lastValue=R[0].y):Ee.attr("d",typeof R[0].y=="number"?Oe.endAngle(ee(R[0].y)):"M0,0Z"),Ee.call(b),_e.exit().remove(),Me=[];var Ze=z.gauge.threshold.value;(Ze||Ze===0)&&Me.push({range:[Ze,Ze],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var Ge=ue.selectAll("g.threshold-arc").data(Me);Ge.enter().append("g").classed("threshold-arc",!0).append("path"),Ge.select("path").call(Z).call(b),Ge.exit().remove();var Fe=ue.selectAll("g.gauge-outline").data([j]);Fe.enter().append("g").classed("gauge-outline",!0).append("path"),Fe.select("path").call(Z).call(b),Fe.exit().remove()}function g(I,D,R,O){var z=R[0].trace,B=O.numbersX,G=O.numbersY,Q=z.align||"center",X=m[Q],j=O.transitionOpts,re=O.onComplete,ue=T.ensureSingle(D,"g","numbers"),K,te,Y,V=[];z._hasNumber&&V.push("number"),z._hasDelta&&(V.push("delta"),z.delta.position==="left"&&V.reverse());var ee=ue.selectAll("text").data(V);ee.enter().append("text"),ee.attr("text-anchor",function(){return X}).attr("class",function(ye){return ye}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ee.exit().remove();function ne(ye,ge,me,Me){if(ye.match("s")&&me>=0!=Me>=0&&!ge(me).slice(-1).match(x)&&!ge(Me).slice(-1).match(x)){var Le=ye.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Oe=C(I,{tickformat:Le});return function(_e){return Math.abs(_e)<1?s.tickText(Oe,_e).text:ge(_e)}}else return ge}function Z(){var ye=C(I,{tickformat:z.number.valueformat},z._range);ye.setScale(),s.prepTicks(ye);var ge=function(_e){return s.tickText(ye,_e).text},me=z.number.suffix,Me=z.number.prefix,Le=ue.select("text.number");function Oe(){var _e=typeof R[0].y=="number"?Me+ge(R[0].y)+me:"-";Le.text(_e).call(t.font,z.number.font).call(i.convertToTspans,I)}return u(j)?Le.transition().duration(j.duration).ease(j.easing).each("end",function(){Oe(),re&&re()}).each("interrupt",function(){Oe(),re&&re()}).attrTween("text",function(){var _e=w.select(this),Ee=M(R[0].lastY,R[0].y);z._lastValue=R[0].y;var Ze=ne(z.number.valueformat,ge,R[0].lastY,R[0].y);return function(Ge){_e.text(Me+Ze(Ee(Ge))+me)}}):Oe(),K=E(Me+ge(R[0].y)+me,z.number.font,X,I),Le}function q(){var ye=C(I,{tickformat:z.delta.valueformat},z._range);ye.setScale(),s.prepTicks(ye);var ge=function(Ge){return s.tickText(ye,Ge).text},me=z.delta.suffix,Me=z.delta.prefix,Le=function(Ge){var Fe=z.delta.relative?Ge.relativeDelta:Ge.delta;return Fe},Oe=function(Ge,Fe){return Ge===0||typeof Ge!="number"||isNaN(Ge)?"-":(Ge>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+Me+Fe(Ge)+me},_e=function(Ge){return Ge.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=Le(R[0]));var Ee=ue.select("text.delta");Ee.call(t.font,z.delta.font).call(c.fill,_e({delta:z._deltaLastValue}));function Ze(){Ee.text(Oe(Le(R[0]),ge)).call(c.fill,_e(R[0])).call(i.convertToTspans,I)}return u(j)?Ee.transition().duration(j.duration).ease(j.easing).tween("text",function(){var Ge=w.select(this),Fe=Le(R[0]),Re=z._deltaLastValue,We=ne(z.delta.valueformat,ge,Re,Fe),xt=M(Re,Fe);return z._deltaLastValue=Fe,function(Nt){Ge.text(Oe(xt(Nt),We)),Ge.call(c.fill,_e({delta:xt(Nt)}))}}).each("end",function(){Ze(),re&&re()}).each("interrupt",function(){Ze(),re&&re()}):Ze(),te=E(Oe(Le(R[0]),ge),z.delta.font,X,I),Ee}var ie=z.mode+z.align,se;if(z._hasDelta&&(se=q(),ie+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,ie+=z.delta.increasing.symbol+z.delta.decreasing.symbol,Y=te),z._hasNumber&&(Z(),ie+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,Y=K),z._hasDelta&&z._hasNumber){var ae=[(K.left+K.right)/2,(K.top+K.bottom)/2],oe=[(te.left+te.right)/2,(te.top+te.bottom)/2],be,ce,de=.75*z.delta.font.size;z.delta.position==="left"&&(be=F(z,"deltaPos",0,-1*(K.width*l[z.align]+te.width*(1-l[z.align])+de),ie,Math.min),ce=ae[1]-oe[1],Y={width:K.width+te.width+de,height:Math.max(K.height,te.height),left:te.left+be,right:K.right,top:Math.min(K.top,te.top+ce),bottom:Math.max(K.bottom,te.bottom+ce)}),z.delta.position==="right"&&(be=F(z,"deltaPos",0,K.width*(1-l[z.align])+te.width*l[z.align]+de,ie,Math.max),ce=ae[1]-oe[1],Y={width:K.width+te.width+de,height:Math.max(K.height,te.height),left:K.left,right:te.right+be,top:Math.min(K.top,te.top+ce),bottom:Math.max(K.bottom,te.bottom+ce)}),z.delta.position==="bottom"&&(be=null,ce=te.height,Y={width:Math.max(K.width,te.width),height:K.height+te.height,left:Math.min(K.left,te.left),right:Math.max(K.right,te.right),top:K.bottom-K.height,bottom:K.bottom+te.height}),z.delta.position==="top"&&(be=null,ce=K.top,Y={width:Math.max(K.width,te.width),height:K.height+te.height,left:Math.min(K.left,te.left),right:Math.max(K.right,te.right),top:K.bottom-K.height-te.height,bottom:K.bottom}),se.attr({dx:be,dy:ce})}(z._hasNumber||z._hasDelta)&&ue.attr("transform",function(){var ye=O.numbersScaler(Y);ie+=ye[2];var ge=F(z,"numbersScale",1,ye[0],ie,Math.min),me;z._scaleNumbers||(ge=1),z._isAngular?me=G-ge*Y.bottom:me=G-ge*(Y.top+Y.bottom)/2,z._numbersTop=ge*Y.top+me;var Me=Y[Q];Q==="center"&&(Me=(Y.left+Y.right)/2);var Le=B-ge*Me;return Le=F(z,"numbersTranslate",0,Le,ie,Math.max),a(Le,me)+e(ge)})}function b(I){I.each(function(D){c.stroke(w.select(this),D.line.color)}).each(function(D){c.fill(w.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function v(I,D,R){return function(){var O=f(D,R);return function(z){return I.endAngle(O(z))()}}}function C(I,D,R){var O=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),B={type:"linear",_id:"x"+D._id},G={letter:"x",font:O.font,noHover:!0,noTickson:!0};function Q(X,j){return T.coerce(z,B,p,X,j)}return y(z,B,Q,G,O),d(z,B,Q,G),B}function S(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function k(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function E(I,D,R,O){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),B=w.select(z);return B.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(i.convertToTspans,O).call(t.font,D),t.bBox(B.node())}function F(I,D,R,O,z,B){var G="_cache"+D;I[G]&&I[G].key===z||(I[G]={key:z,value:R});var Q=T.aggNums(B,null,[I[G].value,O],2);return I[G].value=Q,Q}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../mesh3d/attributes"),e=o("../../plots/attributes"),a=o("../../lib/extend").extendFlat,n=o("../../plot_api/edit_types").overrideAll;function r(i){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function t(i){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var h=U.exports=n(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:t(),y:t(),z:t()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),valuehoverformat:f("value",1),showlegend:a({},e.showlegend,{dflt:!1})},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");h.flatshading.dflt=!0,h.lighting.facenormalsepsilon.dflt=0,h.x.editType=h.y.editType=h.z.editType=h.value.editType="calc+clearAxisTypes",h.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(o,U,H){var w=o("../../components/colorscale/calc"),f=o("../streamtube/calc").processGrid,M=o("../streamtube/calc").filter;U.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=M(a.x,a._len),a._y=M(a.y,a._len),a._z=M(a.z,a._len),a._value=M(a.value,a._len);var n=f(a);a._gridFill=n.fill,a._Xs=n.Xs,a._Ys=n.Ys,a._Zs=n.Zs,a._len=n.len;for(var r=1/0,t=-1/0,h=0;h<a._len;h++){var i=a._value[h];r=Math.min(r,i),t=Math.max(t,i)}a._minValues=r,a._maxValues=t,a._vMin=a.isomin===void 0||a.isomin===null?r:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?t:a.isomax,w(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(o,U,H){var w=o("../../../stackgl_modules").gl_mesh3d,f=o("../../lib/gl_format_color").parseColorScale,M=o("../../lib/str2rgbarray"),T=o("../../components/colorscale").extractOpts,e=o("../../plots/gl3d/zip3"),a=function(s,y){for(var d=y.length-1;d>0;d--){var p=Math.min(y[d],y[d-1]),c=Math.max(y[d],y[d-1]);if(c>p&&p<s&&s<=c)return{id:d,distRatio:(c-s)/(c-p)}}return{id:0,distRatio:0}};function n(s,y,d){this.scene=s,this.uid=d,this.mesh=y,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var y=s.data.index,d=this.data._meshX[y],p=this.data._meshY[y],c=this.data._meshZ[y],m=this.data._Ys.length,l=this.data._Zs.length,x=a(d,this.data._Xs).id,u=a(p,this.data._Ys).id,A=a(c,this.data._Zs).id,_=s.index=A+l*u+l*m*x;s.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var g=this.data.hovertext||this.data.text;return Array.isArray(g)&&g[_]!==void 0?s.textLabel=g[_]:g&&(s.textLabel=g),!0}},r.update=function(s){var y=this.scene,d=y.fullSceneLayout;this.data=h(s);function p(u,A,_,g){return A.map(function(b){return u.d2l(b,0,g)*_})}var c=e(p(d.xaxis,s._meshX,y.dataScale[0],s.xcalendar),p(d.yaxis,s._meshY,y.dataScale[1],s.ycalendar),p(d.zaxis,s._meshZ,y.dataScale[2],s.zcalendar)),m=e(s._meshI,s._meshJ,s._meshK),l={positions:c,cells:m,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:M(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},x=T(s);l.vertexIntensity=s._meshIntensity,l.vertexIntensityBounds=[x.min,x.max],l.colormap=f(s),this.mesh.update(l)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(s){s._meshI=[],s._meshJ=[],s._meshK=[];var y=s.surface.show,d=s.spaceframe.show,p=s.surface.fill,c=s.spaceframe.fill,m=!1,l=!1,x=0,u,A,_=s._Xs,g=s._Ys,b=s._Zs,v=_.length,C=g.length,S=b.length,k=t.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),E=function(Ut,Lt,Ye){switch(k){case 5:return Ye+S*Lt+S*C*Ut;case 4:return Ye+S*Ut+S*v*Lt;case 3:return Lt+C*Ye+C*S*Ut;case 2:return Lt+C*Ut+C*v*Ye;case 1:return Ut+v*Ye+v*S*Lt;default:return Ut+v*Lt+v*C*Ye}},F=s._minValues,I=s._maxValues,D=s._vMin,R=s._vMax,O,z,B,G;function Q(Ut,Lt,Ye){for(var ot=G.length,Ve=A;Ve<ot;Ve++)if(Ut===O[Ve]&&Lt===z[Ve]&&Ye===B[Ve])return Ve;return-1}function X(){A=u}function j(){O=[],z=[],B=[],G=[],u=0,X()}function re(Ut,Lt,Ye,ot){return O.push(Ut),z.push(Lt),B.push(Ye),G.push(ot),u++,u-1}function ue(Ut,Lt,Ye){return s._meshI.push(Ut),s._meshJ.push(Lt),s._meshK.push(Ye),x++,x-1}function K(Ut,Lt,Ye){for(var ot=[],Ve=0;Ve<Ut.length;Ve++)ot[Ve]=(Ut[Ve]+Lt[Ve]+Ye[Ve])/3;return ot}function te(Ut,Lt,Ye){for(var ot=[],Ve=0;Ve<Ut.length;Ve++)ot[Ve]=Ut[Ve]*(1-Ye)+Ye*Lt[Ve];return ot}var Y;function V(Ut){Y=Ut}function ee(Ut,Lt){var Ye=Ut[0],ot=Ut[1],Ve=Ut[2],Ae=K(Ye,ot,Ve),He=Math.sqrt(1-Y),Je=te(Ae,Ye,He),tt=te(Ae,ot,He),St=te(Ae,Ve,He),_t=Lt[0],kt=Lt[1],jt=Lt[2];return{xyzv:[[Ye,ot,tt],[tt,Je,Ye],[ot,Ve,St],[St,tt,ot],[Ve,Ye,Je],[Je,St,Ve]],abc:[[_t,kt,-1],[-1,-1,_t],[kt,jt,-1],[-1,-1,kt],[jt,_t,-1],[-1,-1,jt]]}}function ne(Ut,Lt){return Ut==="all"||Ut===null?!0:Ut.indexOf(Lt)>-1}function Z(Ut,Lt){return Ut===null?Lt:Ut}function q(Ut,Lt,Ye){X();var ot=[Lt],Ve=[Ye];if(Y>=1)ot=[Lt],Ve=[Ye];else if(Y>0){var Ae=ee(Lt,Ye);ot=Ae.xyzv,Ve=Ae.abc}for(var He=0;He<ot.length;He++){Lt=ot[He],Ye=Ve[He];for(var Je=[],tt=0;tt<3;tt++){var St=Lt[tt][0],_t=Lt[tt][1],kt=Lt[tt][2],jt=Lt[tt][3],Bt=Ye[tt]>-1?Ye[tt]:Q(St,_t,kt);Bt>-1?Je[tt]=Bt:Je[tt]=re(St,_t,kt,Z(Ut,jt))}ue(Je[0],Je[1],Je[2])}}function ie(Ut,Lt,Ye){var ot=function(Ve,Ae,He){q(Ut,[Lt[Ve],Lt[Ae],Lt[He]],[Ye[Ve],Ye[Ae],Ye[He]])};ot(0,1,2),ot(2,3,0)}function se(Ut,Lt,Ye){var ot=function(Ve,Ae,He){q(Ut,[Lt[Ve],Lt[Ae],Lt[He]],[Ye[Ve],Ye[Ae],Ye[He]])};ot(0,1,2),ot(3,0,1),ot(2,3,0),ot(1,2,3)}function ae(Ut,Lt,Ye,ot){var Ve=Ut[3];Ve<Ye&&(Ve=Ye),Ve>ot&&(Ve=ot);for(var Ae=(Ut[3]-Ve)/(Ut[3]-Lt[3]+1e-9),He=[],Je=0;Je<4;Je++)He[Je]=(1-Ae)*Ut[Je]+Ae*Lt[Je];return He}function oe(Ut,Lt,Ye){return Ut>=Lt&&Ut<=Ye}function be(Ut){var Lt=.001*(R-D);return Ut>=D-Lt&&Ut<=R+Lt}function ce(Ut){for(var Lt=[],Ye=0;Ye<4;Ye++){var ot=Ut[Ye];Lt.push([s._x[ot],s._y[ot],s._z[ot],s._value[ot]])}return Lt}var de=3;function ye(Ut,Lt,Ye,ot,Ve,Ae){Ae||(Ae=1),Ye=[-1,-1,-1];var He=!1,Je=[oe(Lt[0][3],ot,Ve),oe(Lt[1][3],ot,Ve),oe(Lt[2][3],ot,Ve)];if(!Je[0]&&!Je[1]&&!Je[2])return!1;var tt=function(_t,kt,jt){return be(kt[0][3])&&be(kt[1][3])&&be(kt[2][3])?(q(_t,kt,jt),!0):Ae<de?ye(_t,kt,jt,D,R,++Ae):!1};if(Je[0]&&Je[1]&&Je[2])return tt(Ut,Lt,Ye)||He;var St=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(Je[_t[0]]&&Je[_t[1]]&&!Je[_t[2]]){var kt=Lt[_t[0]],jt=Lt[_t[1]],Bt=Lt[_t[2]],Wt=ae(Bt,kt,ot,Ve),Qt=ae(Bt,jt,ot,Ve);He=tt(Ut,[Qt,Wt,kt],[-1,-1,Ye[_t[0]]])||He,He=tt(Ut,[kt,jt,Qt],[Ye[_t[0]],Ye[_t[1]],-1])||He,St=!0}}),St||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(Je[_t[0]]&&!Je[_t[1]]&&!Je[_t[2]]){var kt=Lt[_t[0]],jt=Lt[_t[1]],Bt=Lt[_t[2]],Wt=ae(jt,kt,ot,Ve),Qt=ae(Bt,kt,ot,Ve);He=tt(Ut,[Qt,Wt,kt],[-1,-1,Ye[_t[0]]])||He,St=!0}}),He}function ge(Ut,Lt,Ye,ot){var Ve=!1,Ae=ce(Lt),He=[oe(Ae[0][3],Ye,ot),oe(Ae[1][3],Ye,ot),oe(Ae[2][3],Ye,ot),oe(Ae[3][3],Ye,ot)];if(!He[0]&&!He[1]&&!He[2]&&!He[3])return Ve;if(He[0]&&He[1]&&He[2]&&He[3])return l&&(Ve=se(Ut,Ae,Lt)||Ve),Ve;var Je=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&He[tt[2]]&&!He[tt[3]]){var St=Ae[tt[0]],_t=Ae[tt[1]],kt=Ae[tt[2]],jt=Ae[tt[3]];if(l)Ve=q(Ut,[St,_t,kt],[Lt[tt[0]],Lt[tt[1]],Lt[tt[2]]])||Ve;else{var Bt=ae(jt,St,Ye,ot),Wt=ae(jt,_t,Ye,ot),Qt=ae(jt,kt,Ye,ot);Ve=q(null,[Bt,Wt,Qt],[-1,-1,-1])||Ve}Je=!0}}),Je||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var St=Ae[tt[0]],_t=Ae[tt[1]],kt=Ae[tt[2]],jt=Ae[tt[3]],Bt=ae(kt,St,Ye,ot),Wt=ae(kt,_t,Ye,ot),Qt=ae(jt,_t,Ye,ot),Zt=ae(jt,St,Ye,ot);l?(Ve=q(Ut,[St,Zt,Bt],[Lt[tt[0]],-1,-1])||Ve,Ve=q(Ut,[_t,Wt,Qt],[Lt[tt[1]],-1,-1])||Ve):Ve=ie(null,[Bt,Wt,Qt,Zt],[-1,-1,-1,-1])||Ve,Je=!0}}),Je)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(He[tt[0]]&&!He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var St=Ae[tt[0]],_t=Ae[tt[1]],kt=Ae[tt[2]],jt=Ae[tt[3]],Bt=ae(_t,St,Ye,ot),Wt=ae(kt,St,Ye,ot),Qt=ae(jt,St,Ye,ot);l?(Ve=q(Ut,[St,Bt,Wt],[Lt[tt[0]],-1,-1])||Ve,Ve=q(Ut,[St,Wt,Qt],[Lt[tt[0]],-1,-1])||Ve,Ve=q(Ut,[St,Qt,Bt],[Lt[tt[0]],-1,-1])||Ve):Ve=q(null,[Bt,Wt,Qt],[-1,-1,-1])||Ve,Je=!0}}),Ve}function me(Ut,Lt,Ye,ot,Ve,Ae,He,Je,tt,St,_t){var kt=!1;return m&&(ne(Ut,"A")&&(kt=ge(null,[Lt,Ye,ot,Ae],St,_t)||kt),ne(Ut,"B")&&(kt=ge(null,[Ye,ot,Ve,tt],St,_t)||kt),ne(Ut,"C")&&(kt=ge(null,[Ye,Ae,He,tt],St,_t)||kt),ne(Ut,"D")&&(kt=ge(null,[ot,Ae,Je,tt],St,_t)||kt),ne(Ut,"E")&&(kt=ge(null,[Ye,ot,Ae,tt],St,_t)||kt)),l&&(kt=ge(Ut,[Ye,ot,Ae,tt],St,_t)||kt),kt}function Me(Ut,Lt,Ye,ot,Ve,Ae,He,Je){return[Je[0]===!0?!0:ye(Ut,ce([Lt,Ye,ot]),[Lt,Ye,ot],Ae,He),Je[1]===!0?!0:ye(Ut,ce([ot,Ve,Lt]),[ot,Ve,Lt],Ae,He)]}function Le(Ut,Lt,Ye,ot,Ve,Ae,He,Je,tt){return Je?Me(Ut,Lt,Ye,Ve,ot,Ae,He,tt):Me(Ut,Ye,Ve,ot,Lt,Ae,He,tt)}function Oe(Ut,Lt,Ye,ot,Ve,Ae,He){var Je=!1,tt,St,_t,kt,jt=function(){Je=ye(Ut,[tt,St,_t],[-1,-1,-1],Ve,Ae)||Je,Je=ye(Ut,[_t,kt,tt],[-1,-1,-1],Ve,Ae)||Je},Bt=He[0],Wt=He[1],Qt=He[2];return Bt&&(tt=te(ce([E(Lt,Ye-0,ot-0)])[0],ce([E(Lt-1,Ye-0,ot-0)])[0],Bt),St=te(ce([E(Lt,Ye-0,ot-1)])[0],ce([E(Lt-1,Ye-0,ot-1)])[0],Bt),_t=te(ce([E(Lt,Ye-1,ot-1)])[0],ce([E(Lt-1,Ye-1,ot-1)])[0],Bt),kt=te(ce([E(Lt,Ye-1,ot-0)])[0],ce([E(Lt-1,Ye-1,ot-0)])[0],Bt),jt()),Wt&&(tt=te(ce([E(Lt-0,Ye,ot-0)])[0],ce([E(Lt-0,Ye-1,ot-0)])[0],Wt),St=te(ce([E(Lt-0,Ye,ot-1)])[0],ce([E(Lt-0,Ye-1,ot-1)])[0],Wt),_t=te(ce([E(Lt-1,Ye,ot-1)])[0],ce([E(Lt-1,Ye-1,ot-1)])[0],Wt),kt=te(ce([E(Lt-1,Ye,ot-0)])[0],ce([E(Lt-1,Ye-1,ot-0)])[0],Wt),jt()),Qt&&(tt=te(ce([E(Lt-0,Ye-0,ot)])[0],ce([E(Lt-0,Ye-0,ot-1)])[0],Qt),St=te(ce([E(Lt-0,Ye-1,ot)])[0],ce([E(Lt-0,Ye-1,ot-1)])[0],Qt),_t=te(ce([E(Lt-1,Ye-1,ot)])[0],ce([E(Lt-1,Ye-1,ot-1)])[0],Qt),kt=te(ce([E(Lt-1,Ye-0,ot)])[0],ce([E(Lt-1,Ye-0,ot-1)])[0],Qt),jt()),Je}function _e(Ut,Lt,Ye,ot,Ve,Ae,He,Je,tt,St,_t,kt){var jt=Ut;return kt?(m&&Ut==="even"&&(jt=null),me(jt,Lt,Ye,ot,Ve,Ae,He,Je,tt,St,_t)):(m&&Ut==="odd"&&(jt=null),me(jt,tt,Je,He,Ae,Ve,ot,Ye,Lt,St,_t))}function Ee(Ut,Lt,Ye,ot,Ve){for(var Ae=[],He=0,Je=0;Je<Lt.length;Je++)for(var tt=Lt[Je],St=1;St<S;St++)for(var _t=1;_t<C;_t++)Ae.push(Le(Ut,E(tt,_t-1,St-1),E(tt,_t-1,St),E(tt,_t,St-1),E(tt,_t,St),Ye,ot,(tt+_t+St)%2,Ve&&Ve[He]?Ve[He]:[])),He++;return Ae}function Ze(Ut,Lt,Ye,ot,Ve){for(var Ae=[],He=0,Je=0;Je<Lt.length;Je++)for(var tt=Lt[Je],St=1;St<v;St++)for(var _t=1;_t<S;_t++)Ae.push(Le(Ut,E(St-1,tt,_t-1),E(St,tt,_t-1),E(St-1,tt,_t),E(St,tt,_t),Ye,ot,(St+tt+_t)%2,Ve&&Ve[He]?Ve[He]:[])),He++;return Ae}function Ge(Ut,Lt,Ye,ot,Ve){for(var Ae=[],He=0,Je=0;Je<Lt.length;Je++)for(var tt=Lt[Je],St=1;St<C;St++)for(var _t=1;_t<v;_t++)Ae.push(Le(Ut,E(_t-1,St-1,tt),E(_t-1,St,tt),E(_t,St-1,tt),E(_t,St,tt),Ye,ot,(_t+St+tt)%2,Ve&&Ve[He]?Ve[He]:[])),He++;return Ae}function Fe(Ut,Lt,Ye){for(var ot=1;ot<S;ot++)for(var Ve=1;Ve<C;Ve++)for(var Ae=1;Ae<v;Ae++)_e(Ut,E(Ae-1,Ve-1,ot-1),E(Ae-1,Ve-1,ot),E(Ae-1,Ve,ot-1),E(Ae-1,Ve,ot),E(Ae,Ve-1,ot-1),E(Ae,Ve-1,ot),E(Ae,Ve,ot-1),E(Ae,Ve,ot),Lt,Ye,(Ae+Ve+ot)%2)}function Re(Ut,Lt,Ye){l=!0,Fe(Ut,Lt,Ye),l=!1}function We(Ut,Lt,Ye){m=!0,Fe(Ut,Lt,Ye),m=!1}function xt(Ut,Lt,Ye,ot,Ve,Ae){for(var He=[],Je=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],_t=1;_t<S;_t++)for(var kt=1;kt<C;kt++)He.push(Oe(Ut,St,kt,_t,Ye,ot,Ve[tt],Ae&&Ae[Je]?Ae[Je]:[])),Je++;return He}function Nt(Ut,Lt,Ye,ot,Ve,Ae){for(var He=[],Je=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],_t=1;_t<v;_t++)for(var kt=1;kt<S;kt++)He.push(Oe(Ut,_t,St,kt,Ye,ot,Ve[tt],Ae&&Ae[Je]?Ae[Je]:[])),Je++;return He}function tr(Ut,Lt,Ye,ot,Ve,Ae){for(var He=[],Je=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],_t=1;_t<C;_t++)for(var kt=1;kt<v;kt++)He.push(Oe(Ut,kt,_t,St,Ye,ot,Ve[tt],Ae&&Ae[Je]?Ae[Je]:[])),Je++;return He}function Vt(Ut,Lt){for(var Ye=[],ot=Ut;ot<Lt;ot++)Ye.push(ot);return Ye}function Pt(){for(var Ut=0;Ut<v;Ut++)for(var Lt=0;Lt<C;Lt++)for(var Ye=0;Ye<S;Ye++){var ot=E(Ut,Lt,Ye);re(s._x[ot],s._y[ot],s._z[ot],s._value[ot])}}function $t(){j(),Pt();var Ut=null;if(d&&c&&(V(c),Re(Ut,D,R)),y&&p){V(p);for(var Lt=s.surface.pattern,Ye=s.surface.count,ot=0;ot<Ye;ot++){var Ve=Ye===1?.5:ot/(Ye-1),Ae=(1-Ve)*D+Ve*R,He=Math.abs(Ae-F),Je=Math.abs(Ae-I),tt=He>Je?[F,Ae]:[Ae,I];We(Lt,tt[0],tt[1])}}var St=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(_t){for(var kt=[],jt=0;jt<St.length;jt++){var Bt=0,Wt=St[jt][0],Qt=St[jt][1],Zt=s.slices[_t];if(Zt.show&&Zt.fill){V(Zt.fill);var cr=[],Xr=[],vn=[];if(Zt.locations.length)for(var en=0;en<Zt.locations.length;en++){var ft=a(Zt.locations[en],_t==="x"?_:_t==="y"?g:b);ft.distRatio===0?cr.push(ft.id):ft.id>0&&(Xr.push(ft.id),_t==="x"?vn.push([ft.distRatio,0,0]):_t==="y"?vn.push([0,ft.distRatio,0]):vn.push([0,0,ft.distRatio]))}else _t==="x"?cr=Vt(1,v-1):_t==="y"?cr=Vt(1,C-1):cr=Vt(1,S-1);Xr.length>0&&(_t==="x"?kt[Bt]=xt(Ut,Xr,Wt,Qt,vn,kt[Bt]):_t==="y"?kt[Bt]=Nt(Ut,Xr,Wt,Qt,vn,kt[Bt]):kt[Bt]=tr(Ut,Xr,Wt,Qt,vn,kt[Bt]),Bt++),cr.length>0&&(_t==="x"?kt[Bt]=Ee(Ut,cr,Wt,Qt,kt[Bt]):_t==="y"?kt[Bt]=Ze(Ut,cr,Wt,Qt,kt[Bt]):kt[Bt]=Ge(Ut,cr,Wt,Qt,kt[Bt]),Bt++)}var ar=s.caps[_t];ar.show&&ar.fill&&(V(ar.fill),_t==="x"?kt[Bt]=Ee(Ut,[0,v-1],Wt,Qt,kt[Bt]):_t==="y"?kt[Bt]=Ze(Ut,[0,C-1],Wt,Qt,kt[Bt]):kt[Bt]=Ge(Ut,[0,S-1],Wt,Qt,kt[Bt]),Bt++)}}),x===0&&j(),s._meshX=O,s._meshY=z,s._meshZ=B,s._meshIntensity=G,s._Xs=_,s._Ys=g,s._Zs=b}return $t(),s}function i(s,y){var d=s.glplot.gl,p=w({gl:d}),c=new n(s,p,y.uid);return p._trace=c,c.update(y),s.glplot.add(p),c}U.exports={findNearestOnAxis:a,generateIsoMeshes:h,createIsosurfaceTrace:i}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=o("./attributes"),T=o("../../components/colorscale/defaults");function e(n,r,t,h){function i(s,y){return w.coerce(n,r,M,s,y)}a(n,r,t,h,i)}function a(n,r,t,h,i){var s=i("isomin"),y=i("isomax");y!=null&&s!==void 0&&s!==null&&s>y&&(r.isomin=null,r.isomax=null);var d=i("x"),p=i("y"),c=i("z"),m=i("value");if(!d||!d.length||!p||!p.length||!c||!c.length||!m||!m.length){r.visible=!1;return}var l=f.getComponentMethod("calendars","handleTraceDefaults");l(n,r,["x","y","z"],h),i("valuehoverformat"),["x","y","z"].forEach(function(_){i(_+"hoverformat");var g="caps."+_,b=i(g+".show");b&&i(g+".fill");var v="slices."+_,C=i(v+".show");C&&(i(v+".fill"),i(v+".locations"))});var x=i("spaceframe.show");x&&i("spaceframe.fill");var u=i("surface.show");u&&(i("surface.count"),i("surface.fill"),i("surface.pattern"));var A=i("contour.show");A&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){i(_)}),T(n,r,h,i,{prefix:"",cLetter:"c"}),r._length=null}U.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults").supplyDefaults,calc:o("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:o("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../surface/attributes"),e=o("../../plots/attributes"),a=o("../../lib/extend").extendFlat;U.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},w("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(o,U,H){var w=o("../../components/colorscale/calc");U.exports=function(M,T){T.intensity&&w(M,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(o,U,H){var w=o("../../../stackgl_modules").gl_mesh3d,f=o("../../../stackgl_modules").delaunay_triangulate,M=o("../../../stackgl_modules").alpha_shape,T=o("../../../stackgl_modules").convex_hull,e=o("../../lib/gl_format_color").parseColorScale,a=o("../../lib/str2rgbarray"),n=o("../../components/colorscale").extractOpts,r=o("../../plots/gl3d/zip3");function t(m,l,x){this.scene=m,this.uid=x,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=t.prototype;h.handlePick=function(m){if(m.object===this.mesh){var l=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[l]!==void 0?m.textLabel=x[l]:x&&(m.textLabel=x),!0}};function i(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=a(m[u]);return l}function s(m,l,x,u){for(var A=[],_=l.length,g=0;g<_;g++)A[g]=m.d2l(l[g],0,u)*x;return A}function y(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=Math.round(m[u]);return l}function d(m,l){for(var x=["x","y","z"].indexOf(m),u=[],A=l.length,_=0;_<A;_++)u[_]=[l[_][(x+1)%3],l[_][(x+2)%3]];return f(u)}function p(m,l){for(var x=m.length,u=0;u<x;u++)if(m[u]<=-.5||m[u]>=l-.5)return!1;return!0}h.update=function(m){var l=this.scene,x=l.fullSceneLayout;this.data=m;var u=m.x.length,A=r(s(x.xaxis,m.x,l.dataScale[0],m.xcalendar),s(x.yaxis,m.y,l.dataScale[1],m.ycalendar),s(x.zaxis,m.z,l.dataScale[2],m.zcalendar)),_;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!p(m.i,u)||!p(m.j,u)||!p(m.k,u))return;_=r(y(m.i),y(m.j),y(m.k))}else m.alphahull===0?_=T(A):m.alphahull>0?_=M(m.alphahull,A):_=d(m.delaunayaxis,A);var g={positions:A,cells:_,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:a(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var b=n(m);this.color="#fff";var v=m.intensitymode;g[v+"Intensity"]=m.intensity,g[v+"IntensityBounds"]=[b.min,b.max],g.colormap=e(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],g.vertexColors=i(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],g.cellColors=i(m.facecolor)):(this.color=m.color,g.meshColor=a(m.color));this.mesh.update(g)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(m,l){var x=m.glplot.gl,u=w({gl:x}),A=new t(m,u,l.uid);return u._trace=A,A.update(l),m.glplot.add(u),A}U.exports=c},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../components/colorscale/defaults"),T=o("./attributes");U.exports=function(a,n,r,t){function h(p,c){return f.coerce(a,n,T,p,c)}function i(p){var c=p.map(function(m){var l=h(m);return l&&f.isArrayOrTypedArray(l)?l:null});return c.every(function(m){return m&&m.length===c[0].length})&&c}var s=i(["x","y","z"]);if(!s){n.visible=!1;return}if(i(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var y=w.getComponentMethod("calendars","handleTraceDefaults");y(a,n,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(p){h(p)});var d=h("contour.show");d&&(h("contour.color"),h("contour.width")),"intensity"in a?(h("intensity"),h("intensitymode"),M(a,n,t,h,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in a?h("facecolor"):"vertexcolor"in a?h("vertexcolor"):h("color",r)),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:o("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(o,U,H){var w=o("../../lib").extendFlat,f=o("../scatter/attributes"),M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=o("../../components/drawing/attributes").dash,e=o("../../components/fx/attributes"),a=o("../../constants/delta.js"),n=a.INCREASING.COLOR,r=a.DECREASING.COLOR,t=f.line;function h(i){return{line:{color:w({},t.color,{dflt:i}),width:t.width,dash:T,editType:"style"},editType:"style"}}U.exports={xperiod:f.xperiod,xperiod0:f.xperiod0,xperiodalignment:f.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:w({},t.width,{}),dash:w({},T,{}),editType:"style"},increasing:h(n),decreasing:h(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:w({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(o,U,H){var w=o("../../lib"),f=w._,M=o("../../plots/cartesian/axes"),T=o("../../plots/cartesian/align_period"),e=o("../../constants/numerical").BADNUM;function a(h,i){var s=M.getFromId(h,i.xaxis),y=M.getFromId(h,i.yaxis),d=t(h,s,i),p=i._minDiff;i._minDiff=null;var c=i._origX;i._origX=null;var m=i._xcalc;i._xcalc=null;var l=r(h,i,c,m,y,n);return i._extremes[s._id]=M.findExtremes(s,m,{vpad:p/2}),l.length?(w.extendFlat(l[0].t,{wHover:p/2,tickLen:d}),l):[{t:{empty:!0}}]}function n(h,i,s,y){return{o:h,h:i,l:s,c:y}}function r(h,i,s,y,d,p){for(var c=d.makeCalcdata(i,"open"),m=d.makeCalcdata(i,"high"),l=d.makeCalcdata(i,"low"),x=d.makeCalcdata(i,"close"),u=Array.isArray(i.text),A=Array.isArray(i.hovertext),_=!0,g=null,b=!!i.xperiodalignment,v=[],C=0;C<y.length;C++){var S=y[C],k=c[C],E=m[C],F=l[C],I=x[C];if(S!==e&&k!==e&&E!==e&&F!==e&&I!==e){I===k?g!==null&&I!==g&&(_=I>g):_=I>k,g=I;var D=p(k,E,F,I);D.pos=S,D.yc=(k+I)/2,D.i=C,D.dir=_?"increasing":"decreasing",D.x=D.pos,D.y=[F,E],b&&(D.orig_p=s[C]),u&&(D.tx=i.text[C]),A&&(D.htx=i.hovertext[C]),v.push(D)}else v.push({pos:S,empty:!0})}return i._extremes[d._id]=M.findExtremes(d,w.concat(l,m),{padded:!0}),v.length&&(v[0].t={labels:{open:f(h,"open:")+" ",high:f(h,"high:")+" ",low:f(h,"low:")+" ",close:f(h,"close:")+" "}}),v}function t(h,i,s){var y=s._minDiff;if(!y){var d=h._fullData,p=[];y=1/0;var c;for(c=0;c<d.length;c++){var m=d[c];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===i._id){p.push(m);var l=i.makeCalcdata(m,"x");m._origX=l;var x=T(s,i,"x",l).vals;m._xcalc=x;var u=w.distinctVals(x).minDiff;u&&isFinite(u)&&(y=Math.min(y,u))}}for(y===1/0&&(y=1),c=0;c<p.length;c++)p[c]._minDiff=y}return y*s.tickwidth}U.exports={calc:a,calcCommon:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(o,U,H){var w=o("../../lib"),f=o("./ohlc_defaults"),M=o("../scatter/period_defaults"),T=o("./attributes");U.exports=function(n,r,t,h){function i(y,d){return w.coerce(n,r,T,y,d)}var s=f(n,r,i,h);if(!s){r.visible=!1;return}M(n,r,h,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),i("line.dash"),e(n,r,i,"increasing"),e(n,r,i,"decreasing"),i("text"),i("hovertext"),i("tickwidth"),h._requestRangeslider[r.xaxis]=!0};function e(a,n,r,t){r(t+".line.color"),r(t+".line.width",n.line.width),r(t+".line.dash",n.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../lib"),M=o("../../components/fx"),T=o("../../components/color"),e=o("../../lib").fillText,a=o("../../constants/delta.js"),n={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function r(s,y,d,p){var c=s.cd,m=c[0].trace;return m.hoverlabel.split?h(s,y,d,p):i(s,y,d,p)}function t(s,y,d,p){var c=s.cd,m=s.xa,l=c[0].trace,x=c[0].t,u=l.type,A=u==="ohlc"?"l":"min",_=u==="ohlc"?"h":"max",g,b,v=x.bPos||0,C=function(Q){return Q.pos+v-y},S=x.bdPos||x.tickLen,k=x.wHover,E=Math.min(1,S/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));g=s.maxHoverDistance-E,b=s.maxSpikeDistance-E;function F(Q){var X=C(Q);return M.inbox(X-k,X+k,g)}function I(Q){var X=Q[A],j=Q[_];return X===j||M.inbox(X-d,j-d,g)}function D(Q){return(F(Q)+I(Q))/2}var R=M.getDistanceFunction(p,F,I,D);if(M.getClosest(c,R,s),s.index===!1)return null;var O=c[s.index];if(O.empty)return null;var z=O.dir,B=l[z],G=B.line.color;return T.opacity(G)&&B.line.width?s.color=G:s.color=B.fillcolor,s.x0=m.c2p(O.pos+v-S,!0),s.x1=m.c2p(O.pos+v+S,!0),s.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,s.spikeDistance=D(O)*b/g,s.xSpike=m.c2p(O.pos,!0),s}function h(s,y,d,p){var c=s.cd,m=s.ya,l=c[0].trace,x=c[0].t,u=[],A=t(s,y,d,p);if(!A)return[];var _=A.index,g=c[_],b=g.hi||l.hoverinfo,v=b.split("+"),C=b==="all",S=C||v.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],E={},F=0;F<k.length;F++){var I=k[F],D=l[I][A.index],R=m.c2p(D,!0),O;D in E?(O=E[D],O.yLabel+="<br>"+x.labels[I]+w.hoverLabelText(m,D,l.yhoverformat)):(O=f.extendFlat({},A),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=x.labels[I]+w.hoverLabelText(m,D,l.yhoverformat),O.name="",u.push(O),E[D]=O)}return u}function i(s,y,d,p){var c=s.cd,m=s.ya,l=c[0].trace,x=c[0].t,u=t(s,y,d,p);if(!u)return[];var A=u.index,_=c[A],g=u.index=_.i,b=_.dir;function v(D){return x.labels[D]+w.hoverLabelText(m,l[D][g],l.yhoverformat)}var C=_.hi||l.hoverinfo,S=C.split("+"),k=C==="all",E=k||S.indexOf("y")!==-1,F=k||S.indexOf("text")!==-1,I=E?[v("open"),v("high"),v("low"),v("close")+"  "+n[b]]:[];return F&&e(_,l,I),u.extraText=I.join("<br>"),u.y0=u.y1=m.c2p(_.yc,!0),[u]}U.exports={hoverPoints:r,hoverSplit:h,hoverOnPoints:i}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(o,U,H){U.exports={moduleType:"trace",name:"ohlc",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc").calc,plot:o("./plot"),style:o("./style"),hoverPoints:o("./hover").hoverPoints,selectPoints:o("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(o,U,H){var w=o("../../registry"),f=o("../../lib");U.exports=function(T,e,a,n){var r=a("x"),t=a("open"),h=a("high"),i=a("low"),s=a("close");a("hoverlabel.split");var y=w.getComponentMethod("calendars","handleTraceDefaults");if(y(T,e,["x"],n),!!(t&&h&&i&&s)){var d=Math.min(t.length,h.length,i.length,s.length);return r&&(d=Math.min(d,f.minRowLength(r))),e._length=d,d}}},{"../../lib":515,"../../registry":647}],887:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib");U.exports=function(T,e,a,n){var r=e.yaxis,t=e.xaxis,h=!!t.rangebreaks;f.makeTraceGroups(n,a,"trace ohlc").each(function(i){var s=w.select(this),y=i[0],d=y.t,p=y.trace;if(p.visible!==!0||d.empty){s.remove();return}var c=d.tickLen,m=s.selectAll("path").data(f.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(l){if(l.empty)return"M0,0Z";var x=t.c2p(l.pos-c,!0),u=t.c2p(l.pos+c,!0),A=h?(x+u)/2:t.c2p(l.pos,!0),_=r.c2p(l.o,!0),g=r.c2p(l.h,!0),b=r.c2p(l.l,!0),v=r.c2p(l.c,!0);return"M"+x+","+_+"H"+A+"M"+A+","+g+"V"+b+"M"+u+","+v+"H"+A})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(o,U,H){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t=T[0].t.bPos||0;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++){var h=T[r];M.contains([e.c2p(h.pos+t),a.c2p(h.yc)],null,h.i,f)?(n.push({pointNumber:h.i,x:e.c2d(h.pos),y:a.c2d(h.yc)}),h.selected=1):h.selected=0}return n}},{}],889:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../components/color");U.exports=function(e,a,n){var r=n||w.select(e).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var h=t[0].trace;w.select(this).selectAll("path").each(function(i){if(!i.empty){var s=h[i.dir].line;w.select(this).style("fill","none").call(M.stroke,s.color).call(f.dashLine,s.dash,s.width).style("opacity",h.selectedpoints&&!i.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(o,U,H){var w=o("../../lib/extend").extendFlat,f=o("../../plots/attributes"),M=o("../../plots/font_attributes"),T=o("../../components/colorscale/attributes"),e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../plots/domain").attributes,n=w({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});U.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:w({},f.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(o,U,H){var w=o("../../plots/get_data").getModuleCalcData,f=o("./plot"),M="parcats";H.name=M,H.plot=function(T,e,a,n){var r=w(T.calcdata,M);if(r.length){var t=r[0];f(T,t,a,n)}},H.clean=function(T,e,a,n){var r=n._has&&n._has("parcats"),t=e._has&&e._has("parcats");r&&!t&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(o,U,H){var w=o("../../lib/gup").wrap,f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/calc"),T=o("../../lib/filter_unique.js"),e=o("../../components/drawing"),a=o("../../lib"),n=o("fast-isnumeric");U.exports=function(x,u){var A=a.filterVisible(u.dimensions);if(A.length===0)return[];var _=A.map(function(K){var te;if(K.categoryorder==="trace")te=null;else if(K.categoryorder==="array")te=K.categoryarray;else{te=T(K.values);for(var Y=!0,V=0;V<te.length;V++)if(!n(te[V])){Y=!1;break}te.sort(Y?a.sorterAsc:void 0),K.categoryorder==="category descending"&&(te=te.reverse())}return d(K.values,te)}),g,b,v;a.isArrayOrTypedArray(u.counts)?g=u.counts:g=[u.counts],p(A),A.forEach(function(K,te){c(K,_[te])});var C=u.line,S;C?(f(u,"line")&&M(x,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(C)):S=a.identity;function k(K){var te,Y;return a.isArrayOrTypedArray(C.color)?(te=C.color[K%C.color.length],Y=te):te=C.color,{color:S(te),rawColor:Y}}var E=A[0].values.length,F={},I=_.map(function(K){return K.inds});v=0;var D,R;for(D=0;D<E;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);b=g[D%g.length],v+=b;var z=k(D),B=O+"-"+z.rawColor;F[B]===void 0&&(F[B]=s(O,z.color,z.rawColor)),y(F[B],D,b)}var G=A.map(function(K,te){return t(te,K._index,K._displayindex,K.label,v)});for(D=0;D<E;D++)for(b=g[D%g.length],R=0;R<G.length;R++){var Q=G[R].containerInd,X=_[R].inds[D],j=G[R].categories;if(j[X]===void 0){var re=u.dimensions[Q]._categoryarray[X],ue=u.dimensions[Q]._ticktext[X];j[X]=h(R,X,re,ue)}i(j[X],D,b)}return w(r(G,F,v))};function r(l,x,u){var A=l.map(function(_){return _.categories.length}).reduce(function(_,g){return Math.max(_,g)});return{dimensions:l,paths:x,trace:void 0,maxCats:A,count:u}}function t(l,x,u,A,_){return{dimensionInd:l,containerInd:x,displayInd:u,dimensionLabel:A,count:_,categories:[],dragX:null}}function h(l,x,u,A){return{dimensionInd:l,categoryInd:x,categoryValue:u,displayInd:x,categoryLabel:A,valueInds:[],count:0,dragY:null}}function i(l,x,u){l.valueInds.push(x),l.count+=u}function s(l,x,u){return{categoryInds:l,color:x,rawColor:u,valueInds:[],count:0}}function y(l,x,u){l.valueInds.push(x),l.count+=u}function d(l,x){x==null?x=[]:x=x.map(function(S){return S});var u={},A={},_=[];x.forEach(function(S,k){u[S]=0,A[S]=k});for(var g=0;g<l.length;g++){var b=l[g],v;u[b]===void 0?(u[b]=1,v=x.push(b)-1,A[b]=v):(u[b]++,v=A[b]),_.push(v)}var C=x.map(function(S){return u[S]});return{uniqueValues:x,uniqueCounts:C,inds:_}}function p(l){var x=l.map(function(A){return A.displayindex}),u;if(m(x))for(u=0;u<l.length;u++)l[u]._displayindex=l[u].displayindex;else for(u=0;u<l.length;u++)l[u]._displayindex=u}function c(l,x){l._categoryarray=x.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var u=l._ticktext.length;u<x.uniqueValues.length;u++)l._ticktext.push(x.uniqueValues[u])}function m(l){for(var x=new Array(l.length),u=0;u<l.length;u++){if(l[u]<0||l[u]>=l.length||x[l[u]]!==void 0)return!1;x[l[u]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/defaults"),T=o("../../plots/domain").defaults,e=o("../../plots/array_container_defaults"),a=o("./attributes"),n=o("../parcoords/merge_length");function r(h,i,s,y,d){d("line.shape"),d("line.hovertemplate");var p=d("line.color",y.colorway[0]);if(f(h,"line")&&w.isArrayOrTypedArray(p)){if(p.length)return d("line.colorscale"),M(h,i,y,d,{prefix:"line.",cLetter:"c"}),p.length;i.line.color=s}return 1/0}function t(h,i){function s(x,u){return w.coerce(h,i,a.dimensions,x,u)}var y=s("values"),d=s("visible");if(y&&y.length||(d=i.visible=!1),d){s("label"),s("displayindex",i._index);var p=h.categoryarray,c=Array.isArray(p)&&p.length>0,m;c&&(m="array");var l=s("categoryorder",m);l==="array"?(s("categoryarray"),s("ticktext")):(delete h.categoryarray,delete h.ticktext),!c&&l==="array"&&(i.categoryorder="trace")}}U.exports=function(i,s,y,d){function p(u,A){return w.coerce(i,s,a,u,A)}var c=e(i,s,{name:"dimensions",handleItemDefaults:t}),m=r(i,s,y,d,p);T(s,d,p),(!Array.isArray(c)||!c.length)&&(s.visible=!1),n(s,c,"values",m),p("hoveron"),p("hovertemplate"),p("arrangement"),p("bundlecolors"),p("sortpaths"),p("counts");var l={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};w.coerceFont(p,"labelfont",l);var x={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};w.coerceFont(p,"tickfont",x)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:o("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-interpolate").interpolateNumber,M=o("../../plot_api/plot_api"),T=o("../../components/fx"),e=o("../../lib"),a=e.strTranslate,n=o("../../components/drawing"),r=o("tinycolor2"),t=o("../../lib/svg_text_utils");function h(V,ee,ne,Z){var q=ee._context.staticPlot,ie=V.map(re.bind(0,ee,ne)),se=Z.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",q?"none":"all");var ae=se.selectAll("g.trace.parcats").data(ie,i),oe=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(Ee){return a(Ee.x,Ee.y)}),oe.append("g").attr("class","paths");var be=ae.select("g.paths"),ce=be.selectAll("path.path").data(function(Ee){return Ee.paths},i);ce.attr("fill",function(Ee){return Ee.model.color});var de=ce.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.model.color}).attr("fill-opacity",0);x(de),ce.attr("d",function(Ee){return Ee.svgD}),de.empty()||ce.sort(y),ce.exit().remove(),ce.on("mouseover",d).on("mouseout",p).on("click",l),oe.append("g").attr("class","dimensions");var ye=ae.select("g.dimensions"),ge=ye.selectAll("g.dimension").data(function(Ee){return Ee.dimensions},i);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(Ee){return a(Ee.x,0)}),ge.exit().remove();var me=ge.selectAll("g.category").data(function(Ee){return Ee.categories},i),Me=me.enter().append("g").attr("class","category");me.attr("transform",function(Ee){return a(0,Ee.y)}),Me.append("rect").attr("class","catrect").attr("pointer-events","none"),me.select("rect.catrect").attr("fill","none").attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}),_(Me);var Le=me.selectAll("rect.bandrect").data(function(Ee){return Ee.bands},i);Le.each(function(){e.raiseToTop(this)}),Le.attr("fill",function(Ee){return Ee.color});var Oe=Le.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.color}).attr("fill-opacity",0);Le.attr("fill",function(Ee){return Ee.color}).attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}).attr("y",function(Ee){return Ee.y}).attr("cursor",function(Ee){return Ee.parcatsViewModel.arrangement==="fixed"?"default":Ee.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),b(Oe),Le.exit().remove(),Me.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=ee._fullLayout.paper_bgcolor;me.select("text.catlabel").attr("text-anchor",function(Ee){return s(Ee)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(Ee){return s(Ee)?Ee.width+5:-5}).attr("y",function(Ee){return Ee.height/2}).text(function(Ee){return Ee.model.categoryLabel}).each(function(Ee){n.font(w.select(this),Ee.parcatsViewModel.categorylabelfont),t.convertToTspans(w.select(this),ee)}),Me.append("text").attr("class","dimlabel"),me.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ee){return Ee.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ee){return Ee.width/2}).attr("y",-5).text(function(Ee,Ze){return Ze===0?Ee.parcatsViewModel.model.dimensions[Ee.model.dimensionInd].dimensionLabel:null}).each(function(Ee){n.font(w.select(this),Ee.parcatsViewModel.labelfont)}),me.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),me.exit().remove(),ge.call(w.behavior.drag().origin(function(Ee){return{x:Ee.x,y:0}}).on("dragstart",z).on("drag",B).on("dragend",G)),ae.each(function(Ee){Ee.traceSelection=w.select(this),Ee.pathSelection=w.select(this).selectAll("g.paths").selectAll("path.path"),Ee.dimensionSelection=w.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}U.exports=function(V,ee,ne,Z){h(ne,V,Z,ee)};function i(V){return V.key}function s(V){var ee=V.parcatsViewModel.dimensions.length,ne=V.parcatsViewModel.dimensions[ee-1].model.dimensionInd;return V.model.dimensionInd===ne}function y(V,ee){return V.model.rawColor>ee.model.rawColor?1:V.model.rawColor<ee.model.rawColor?-1:0}function d(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),u(w.select(this));var ee=c(V),ne=m(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:w.event,constraints:ne}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z=w.mouse(this)[0],q=V.parcatsViewModel.graphDiv,ie=V.parcatsViewModel.trace,se=q._fullLayout,ae=se._paperdiv.node().getBoundingClientRect(),oe=V.parcatsViewModel.graphDiv.getBoundingClientRect(),be,ce,de;for(de=0;de<V.leftXs.length-1;de++)if(V.leftXs[de]+V.dimWidths[de]-2<=Z&&Z<=V.leftXs[de+1]+2){var ye=V.parcatsViewModel.dimensions[de],ge=V.parcatsViewModel.dimensions[de+1];be=(ye.x+ye.width+ge.x)/2,ce=(V.topYs[de]+V.topYs[de+1]+V.height)/2;break}var me=V.parcatsViewModel.x+be,Me=V.parcatsViewModel.y+ce,Le=r.mostReadable(V.model.color,["black","white"]),Oe=V.model.count,_e=Oe/V.parcatsViewModel.model.count,Ee={countLabel:Oe,probabilityLabel:_e.toFixed(3)},Ze=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ze.push(["Count:",Ee.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ze.push(["P:",Ee.probabilityLabel].join(" "));var Ge=Ze.join("<br>"),Fe=w.mouse(q)[0];T.loneHover({trace:ie,x:me-ae.left+oe.left,y:Me-ae.top+oe.top,text:Ge,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Le,idealAlign:Fe<me?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Ee,eventData:[{data:ie._input,fullData:ie,count:Oe,probability:_e}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:q})}}}function p(V){if(!V.parcatsViewModel.dragDimension&&(x(w.select(this)),T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(y),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ee=c(V),ne=m(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:w.event,constraints:ne})}}function c(V){for(var ee=[],ne=Q(V.parcatsViewModel),Z=0;Z<V.model.valueInds.length;Z++){var q=V.model.valueInds[Z];ee.push({curveNumber:ne,pointNumber:q})}return ee}function m(V){for(var ee={},ne=V.parcatsViewModel.model.dimensions,Z=0;Z<ne.length;Z++){var q=ne[Z],ie=q.categories[V.model.categoryInds[Z]];ee[q.containerInd]=ie.categoryValue}return V.model.rawColor!==void 0&&(ee.color=V.model.rawColor),ee}function l(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=c(V),ne=m(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:w.event,constraints:ne})}}function x(V){V.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(V){V.attr("fill-opacity",.8).attr("stroke",function(ee){return r.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function A(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function g(V){V.attr("stroke","black").attr("stroke-width",1.5)}function b(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(V){var ee=V.parcatsViewModel.pathSelection,ne=V.categoryViewModel.model.dimensionInd,Z=V.categoryViewModel.model.categoryInd;return ee.filter(function(q){return q.model.categoryInds[ne]===Z&&q.model.color===V.color})}function C(V){var ee=w.select(V.parentNode).selectAll("rect.bandrect");ee.each(function(ne){var Z=v(ne);u(Z),Z.each(function(){e.raiseToTop(this)})}),A(w.select(V.parentNode))}function S(V){var ee=w.select(V).datum(),ne=v(ee);u(ne),ne.each(function(){e.raiseToTop(this)}),w.select(V.parentNode).selectAll("rect.bandrect").filter(function(Z){return Z.color===ee.color}).each(function(){e.raiseToTop(this),g(w.select(this))})}function k(V,ee,ne){var Z=w.select(V).datum(),q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,se=w.select(V.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(be){var ce=v(be);ce.each(function(de){Array.prototype.push.apply(ae,c(de))})});var oe={};oe[q.dimensionInd]=q.categoryValue,ie.emit(ee,{points:ae,event:ne,constraints:oe})}function E(V,ee,ne){var Z=w.select(V).datum(),q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,se=v(Z),ae=[];se.each(function(be){Array.prototype.push.apply(ae,c(be))});var oe={};oe[q.dimensionInd]=q.categoryValue,Z.rawColor!==void 0&&(oe.color=Z.rawColor),ie.emit(ee,{points:ae,event:ne,constraints:oe})}function F(V,ee,ne){V._fullLayout._calcInverseTransform(V);var Z=V._fullLayout._invScaleX,q=V._fullLayout._invScaleY,ie=w.select(ne.parentNode).select("rect.catrect"),se=ie.node().getBoundingClientRect(),ae=ie.datum(),oe=ae.parcatsViewModel,be=oe.model.dimensions[ae.model.dimensionInd],ce=oe.trace,de=se.top+se.height/2,ye,ge;oe.dimensions.length>1&&be.displayInd===oe.dimensions.length-1?(ye=se.left,ge="left"):(ye=se.left+se.width,ge="right");var me=ae.model.count,Me=ae.model.categoryLabel,Le=me/ae.parcatsViewModel.model.count,Oe={countLabel:me,categoryLabel:Me,probabilityLabel:Le.toFixed(3)},_e=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Oe.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Oe.categoryLabel+"):",Oe.probabilityLabel].join(" "));var Ee=_e.join("<br>");return{trace:ce,x:Z*(ye-ee.left),y:q*(de-ee.top),text:Ee,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ge,hovertemplate:ce.hovertemplate,hovertemplateLabels:Oe,eventData:[{data:ce._input,fullData:ce,count:me,category:Me,probability:Le}]}}function I(V,ee,ne){var Z=[];return w.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var q=this;Z.push(F(V,ee,q))}),Z}function D(V,ee,ne){V._fullLayout._calcInverseTransform(V);var Z=V._fullLayout._invScaleX,q=V._fullLayout._invScaleY,ie=ne.getBoundingClientRect(),se=w.select(ne).datum(),ae=se.categoryViewModel,oe=ae.parcatsViewModel,be=oe.model.dimensions[ae.model.dimensionInd],ce=oe.trace,de=ie.y+ie.height/2,ye,ge;oe.dimensions.length>1&&be.displayInd===oe.dimensions.length-1?(ye=ie.left,ge="left"):(ye=ie.left+ie.width,ge="right");var me=ae.model.categoryLabel,Me=se.parcatsViewModel.model.count,Le=0;se.categoryViewModel.bands.forEach(function(Nt){Nt.color===se.color&&(Le+=Nt.count)});var Oe=ae.model.count,_e=0;oe.pathSelection.each(function(Nt){Nt.model.color===se.color&&(_e+=Nt.model.count)});var Ee=Le/Me,Ze=Le/_e,Ge=Le/Oe,Fe={countLabel:Me,categoryLabel:me,probabilityLabel:Ee.toFixed(3)},Re=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Re.push(["Count:",Fe.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Re.push("P(color \u2229 "+me+"): "+Fe.probabilityLabel),Re.push("P("+me+" | color): "+Ze.toFixed(3)),Re.push("P(color | "+me+"): "+Ge.toFixed(3)));var We=Re.join("<br>"),xt=r.mostReadable(se.color,["black","white"]);return{trace:ce,x:Z*(ye-ee.left),y:q*(de-ee.top),text:We,color:se.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:xt,fontSize:10,idealAlign:ge,hovertemplate:ce.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:ce._input,fullData:ce,category:me,count:Me,probability:Ee,categorycount:Oe,colorcount:_e,bandcolorcount:Le}]}}function R(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=w.mouse(this)[1];if(ee<-1)return;var ne=V.parcatsViewModel.graphDiv,Z=ne._fullLayout,q=Z._paperdiv.node().getBoundingClientRect(),ie=V.parcatsViewModel.hoveron,se=this;if(ie==="color"?(S(se),E(se,"plotly_hover",w.event)):(C(se),k(se,"plotly_hover",w.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ae;ie==="category"?ae=F(ne,q,se):ie==="color"?ae=D(ne,q,se):ie==="dimension"&&(ae=I(ne,q,se)),ae&&T.loneHover(ae,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:ne})}}}function O(V){var ee=V.parcatsViewModel;if(!ee.dragDimension&&(x(ee.pathSelection),_(ee.dimensionSelection.selectAll("g.category")),b(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(y),ee.hoverinfoItems.indexOf("skip")===-1)){var ne=V.parcatsViewModel.hoveron,Z=this;ne==="color"?E(Z,"plotly_unhover",w.event):k(Z,"plotly_unhover",w.event)}}function z(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,w.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var ne=w.mouse(this)[0],Z=w.mouse(this)[1];-2<=ne&&ne<=ee.width+2&&-2<=Z&&Z<=ee.height+2&&(V.dragCategoryDisplayInd=ee.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(q){return q.displayInd}),ee.model.dragY=ee.y,e.raiseToTop(this.parentNode),w.select(this.parentNode).selectAll("rect.bandrect").each(function(q){q.y<Z&&Z<=q.y+q.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function B(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var ee=V.dragDimensionDisplayInd,ne=ee-1,Z=ee+1,q=V.parcatsViewModel.dimensions[ee];if(V.dragCategoryDisplayInd!==null){var ie=q.categories[V.dragCategoryDisplayInd];ie.model.dragY+=w.event.dy;var se=ie.model.dragY,ae=ie.model.displayInd,oe=q.categories,be=oe[ae-1],ce=oe[ae+1];be!==void 0&&se<be.y+be.height/2&&(ie.model.displayInd=be.model.displayInd,be.model.displayInd=ae),ce!==void 0&&se+ie.height>ce.y+ce.height/2&&(ie.model.displayInd=ce.model.displayInd,ce.model.displayInd=ae),V.dragCategoryDisplayInd=ie.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){q.model.dragX=w.event.x;var de=V.parcatsViewModel.dimensions[ne],ye=V.parcatsViewModel.dimensions[Z];de!==void 0&&q.model.dragX<de.x+de.width&&(q.model.displayInd=de.model.displayInd,de.model.displayInd=ee),ye!==void 0&&q.model.dragX+q.width>ye.x&&(q.model.displayInd=ye.model.displayInd,ye.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=q.model.displayInd}te(V.parcatsViewModel),K(V.parcatsViewModel),j(V.parcatsViewModel),X(V.parcatsViewModel)}}function G(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){w.select(this).selectAll("text").attr("font-weight","normal");var ee={},ne=Q(V.parcatsViewModel),Z=V.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),q=V.initialDragDimensionDisplayInds.some(function(ye,ge){return ye!==Z[ge]});q&&Z.forEach(function(ye,ge){var me=V.parcatsViewModel.model.dimensions[ge].containerInd;ee["dimensions["+me+"].displayindex"]=ye});var ie=!1;if(V.dragCategoryDisplayInd!==null){var se=V.model.categories.map(function(ye){return ye.displayInd});if(ie=V.initialDragCategoryDisplayInds.some(function(ye,ge){return ye!==se[ge]}),ie){var ae=V.model.categories.slice().sort(function(ye,ge){return ye.displayInd-ge.displayInd}),oe=ae.map(function(ye){return ye.categoryValue}),be=ae.map(function(ye){return ye.categoryLabel});ee["dimensions["+V.model.containerInd+"].categoryarray"]=[oe],ee["dimensions["+V.model.containerInd+"].ticktext"]=[be],ee["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?E(V.potentialClickBand,"plotly_click",w.event.sourceEvent):k(V.potentialClickBand,"plotly_click",w.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null){var ce=V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd];ce.model.dragY=null,V.dragCategoryDisplayInd=null}V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,te(V.parcatsViewModel),K(V.parcatsViewModel);var de=w.transition().duration(300).ease("cubic-in-out");de.each(function(){j(V.parcatsViewModel,!0),X(V.parcatsViewModel,!0)}).each("end",function(){(q||ie)&&M.restyle(V.parcatsViewModel.graphDiv,ee,[ne])})}}function Q(V){for(var ee,ne=V.graphDiv._fullData,Z=0;Z<ne.length;Z++)if(V.key===ne[Z].uid){ee=Z;break}return ee}function X(V,ee){ee===void 0&&(ee=!1);function ne(Z){return ee?Z.transition():Z}V.pathSelection.data(function(Z){return Z.paths},i),ne(V.pathSelection).attr("d",function(Z){return Z.svgD})}function j(V,ee){ee===void 0&&(ee=!1);function ne(oe){return ee?oe.transition():oe}V.dimensionSelection.data(function(oe){return oe.dimensions},i);var Z=V.dimensionSelection.selectAll("g.category").data(function(oe){return oe.categories},i);ne(V.dimensionSelection).attr("transform",function(oe){return a(oe.x,0)}),ne(Z).attr("transform",function(oe){return a(0,oe.y)});var q=Z.select(".dimlabel");q.text(function(oe,be){return be===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null});var ie=Z.select(".catlabel");ie.attr("text-anchor",function(oe){return s(oe)?"start":"end"}).attr("x",function(oe){return s(oe)?oe.width+5:-5}).each(function(oe){var be,ce;s(oe)?(be=oe.width+5,ce="start"):(be=-5,ce="end"),w.select(this).selectAll("tspan").attr("x",be).attr("text-anchor",ce)});var se=Z.selectAll("rect.bandrect").data(function(oe){return oe.bands},i),ae=se.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);se.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}),b(ae),se.each(function(){e.raiseToTop(this)}),se.exit().remove()}function re(V,ee,ne){var Z=ne[0],q=ee.margin||{l:80,r:80,t:100,b:80},ie=Z.trace,se=ie.domain,ae=ee.width,oe=ee.height,be=Math.floor(ae*(se.x[1]-se.x[0])),ce=Math.floor(oe*(se.y[1]-se.y[0])),de=se.x[0]*ae+q.l,ye=ee.height-se.y[1]*ee.height+q.t,ge=ie.line.shape,me;ie.hoverinfo==="all"?me=["count","probability"]:me=(ie.hoverinfo||"").split("+");var Me={trace:ie,key:ie.uid,model:Z,x:de,y:ye,width:be,height:ce,hoveron:ie.hoveron,hoverinfoItems:me,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:ge,dragDimension:null,margin:q,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(te(Me),K(Me)),Me}function ue(V,ee,ne,Z,q){var ie=[],se=[],ae,oe;for(oe=0;oe<ne.length-1;oe++)ae=f(ne[oe]+V[oe],V[oe+1]),ie.push(ae(q)),se.push(ae(1-q));var be="M "+V[0]+","+ee[0];for(be+="l"+ne[0]+",0 ",oe=1;oe<ne.length;oe++)be+="C"+ie[oe-1]+","+ee[oe-1]+" "+se[oe-1]+","+ee[oe]+" "+V[oe]+","+ee[oe],be+="l"+ne[oe]+",0 ";for(be+="l0,"+Z+" ",be+="l -"+ne[ne.length-1]+",0 ",oe=ne.length-2;oe>=0;oe--)be+="C"+se[oe]+","+(ee[oe+1]+Z)+" "+ie[oe]+","+(ee[oe]+Z)+" "+(V[oe]+ne[oe])+","+(ee[oe]+Z),be+="l-"+ne[oe]+",0 ";return be+="Z",be}function K(V){var ee=V.dimensions,ne=V.model,Z=ee.map(function(Pt){return Pt.categories.map(function($t){return $t.y})}),q=V.model.dimensions.map(function(Pt){return Pt.categories.map(function($t){return $t.displayInd})}),ie=V.model.dimensions.map(function(Pt){return Pt.displayInd}),se=V.dimensions.map(function(Pt){return Pt.model.dimensionInd}),ae=ee.map(function(Pt){return Pt.x}),oe=ee.map(function(Pt){return Pt.width}),be=[];for(var ce in ne.paths)ne.paths.hasOwnProperty(ce)&&be.push(ne.paths[ce]);function de(Pt){var $t=Pt.categoryInds.map(function(Lt,Ye){return q[Ye][Lt]}),Ut=se.map(function(Lt){return $t[Lt]});return Ut}be.sort(function(Pt,$t){var Ut=de(Pt),Lt=de($t);return V.sortpaths==="backward"&&(Ut.reverse(),Lt.reverse()),Ut.push(Pt.valueInds[0]),Lt.push($t.valueInds[0]),V.bundlecolors&&(Ut.unshift(Pt.rawColor),Lt.unshift($t.rawColor)),Ut<Lt?-1:Ut>Lt?1:0});for(var ye=new Array(be.length),ge=ee[0].model.count,me=ee[0].categories.map(function(Pt){return Pt.height}).reduce(function(Pt,$t){return Pt+$t}),Me=0;Me<be.length;Me++){var Le=be[Me],Oe;ge>0?Oe=me*(Le.count/ge):Oe=0;for(var _e=new Array(Z.length),Ee=0;Ee<Le.categoryInds.length;Ee++){var Ze=Le.categoryInds[Ee],Ge=q[Ee][Ze],Fe=ie[Ee];_e[Fe]=Z[Fe][Ge],Z[Fe][Ge]+=Oe;var Re=V.dimensions[Fe].categories[Ge],We=Re.bands.length,xt=Re.bands[We-1];if(xt===void 0||Le.rawColor!==xt.rawColor){var Nt=xt===void 0?0:xt.y+xt.height;Re.bands.push({key:Nt,color:Le.color,rawColor:Le.rawColor,height:Oe,width:Re.width,count:Le.count,y:Nt,categoryViewModel:Re,parcatsViewModel:V})}else{var tr=Re.bands[We-1];tr.height+=Oe,tr.count+=Le.count}}var Vt;V.pathShape==="hspline"?Vt=ue(ae,_e,oe,Oe,.5):Vt=ue(ae,_e,oe,Oe,0),ye[Me]={key:Le.valueInds[0],model:Le,height:Oe,leftXs:ae,topYs:_e,dimWidths:oe,svgD:Vt,parcatsViewModel:V}}V.paths=ye}function te(V){var ee=V.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});ee.sort(function(se,ae){return se.displayInd-ae.displayInd});var ne=[];for(var Z in ee){var q=ee[Z].dimensionInd,ie=V.model.dimensions[q];ne.push(Y(V,ie))}V.dimensions=ne}function Y(V,ee){var ne=40,Z=16,q=V.model.dimensions.length,ie=ee.displayInd,se,ae,oe;q>1?se=(V.width-2*ne-Z)/(q-1):se=0,ae=ne,oe=ae+se*ie;var be=[],ce=V.model.maxCats,de=ee.categories.length,ye=8,ge=ee.count,me=V.height-ye*(ce-1),Me,Le,Oe,_e,Ee,Ze=(ce-de)*ye/2,Ge=ee.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Ge.sort(function(Fe,Re){return Fe.displayInd-Re.displayInd}),Ee=0;Ee<de;Ee++)_e=Ge[Ee].categoryInd,Le=ee.categories[_e],ge>0?Me=Le.count/ge*me:Me=0,Oe={key:Le.valueInds[0],model:Le,width:Z,height:Me,y:Le.dragY!==null?Le.dragY:Ze,bands:[],parcatsViewModel:V},Ze=Ze+Me+ye,be.push(Oe);return{key:ee.dimensionInd,x:ee.dragX!==null?ee.dragX:oe,y:0,width:Z,model:ee,categories:be,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(o,U,H){var w=o("./parcats");U.exports=function(M,T,e,a){var n=M._fullLayout,r=n._paper,t=n._size;w(M,r,T,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},e,a)}},{"./parcats":895}],897:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/cartesian/layout_attributes"),M=o("../../plots/font_attributes"),T=o("../../plots/domain").attributes,e=o("../../lib/extend").extendFlat,a=o("../../plot_api/plot_template").templatedArray;U.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},f.tickvals,{editType:"plot"}),ticktext:e({},f.ticktext,{editType:"plot"}),tickformat:e({},f.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},w("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(o,U,H){var w=o("./constants"),f=o("@plotly/d3"),M=o("../../lib/gup").keyFun,T=o("../../lib/gup").repeat,e=o("../../lib").sorterAsc,a=o("../../lib").strTranslate,n=w.bar.snapRatio;function r(G,Q){return G*(1-n)+Q*n}var t=w.bar.snapClose;function h(G,Q){return G*(1-t)+Q*t}function i(G,Q,X,j){if(s(X,j))return X;var re=G?-1:1,ue=0,K=Q.length-1;if(re<0){var te=ue;ue=K,K=te}for(var Y=Q[ue],V=Y,ee=ue;re*ee<re*K;ee+=re){var ne=ee+re,Z=Q[ne];if(re*X<re*h(Y,Z))return r(Y,V);if(re*X<re*Z||ne===K)return r(Z,Y);V=Y,Y=Z}}function s(G,Q){for(var X=0;X<Q.length;X++)if(G>=Q[X][0]&&G<=Q[X][1])return!0;return!1}function y(G){G.attr("x",-w.bar.captureWidth/2).attr("width",w.bar.captureWidth)}function d(G){G.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(G){if(!G.brush.filterSpecified)return"0,"+G.height;for(var Q=c(G.brush.filter.getConsolidated(),G.height),X=[0],j,re,ue,K=Q.length?Q[0][0]:null,te=0;te<Q.length;te++)j=Q[te],re=j[1]-j[0],X.push(K),X.push(re),ue=te+1,ue<Q.length&&(K=Q[ue][0]-j[1]);return X.push(G.height),X}function c(G,Q){return G.map(function(X){return X.map(function(j){return Math.max(0,j*Q)}).sort(e)})}function m(G,Q){var X=w.bar.handleHeight;if(!(Q>G[1]+X||Q<G[0]-X))return Q>=.9*G[1]+.1*G[0]?"n":Q<=.9*G[0]+.1*G[1]?"s":"ns"}function l(){f.select(document.body).style("cursor",null)}function x(G){G.attr("stroke-dasharray",p)}function u(G,Q){var X=f.select(G).selectAll(".highlight, .highlight-shadow"),j=Q?X.transition().duration(w.bar.snapDuration).each("end",Q):X;x(j)}function A(G,Q){var X=G.brush,j=X.filterSpecified,re=NaN,ue={},K;if(j){var te=G.height,Y=X.filter.getConsolidated(),V=c(Y,te),ee=NaN,ne=NaN,Z=NaN;for(K=0;K<=V.length;K++){var q=V[K];if(q&&q[0]<=Q&&Q<=q[1]){ee=K;break}else if(ne=K?K-1:NaN,q&&q[0]>Q){Z=K;break}}if(re=ee,isNaN(re)&&(isNaN(ne)||isNaN(Z)?re=isNaN(ne)?Z:ne:re=Q-V[ne][1]<V[Z][0]-Q?ne:Z),!isNaN(re)){var ie=V[re],se=m(ie,Q);se&&(ue.interval=Y[re],ue.intervalPix=ie,ue.region=se)}}if(G.ordinal&&!ue.region){var ae=G.unitTickvals,oe=G.unitToPaddedPx.invert(Q);for(K=0;K<ae.length;K++){var be=[ae[Math.max(K-1,0)]*.25+ae[K]*.75,ae[Math.min(K+1,ae.length-1)]*.25+ae[K]*.75];if(oe>=be[0]&&oe<=be[1]){ue.clickableOrdinalRange=be;break}}}return ue}function _(G,Q){f.event.sourceEvent.stopPropagation();var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=Q.unitToPaddedPx.invert(X),re=Q.brush,ue=A(Q,X),K=ue.interval,te=re.svgBrush;if(te.wasDragged=!1,te.grabbingBar=ue.region==="ns",te.grabbingBar){var Y=K.map(Q.unitToPaddedPx);te.grabPoint=X-Y[0]-w.verticalPadding,te.barLength=Y[1]-Y[0]}te.clickableOrdinalRange=ue.clickableOrdinalRange,te.stayingIntervals=Q.multiselect&&re.filterSpecified?re.filter.getConsolidated():[],K&&(te.stayingIntervals=te.stayingIntervals.filter(function(V){return V[0]!==K[0]&&V[1]!==K[1]})),te.startExtent=ue.region?K[ue.region==="s"?1:0]:j,Q.parent.inBrushDrag=!0,te.brushStartCallback()}function g(G,Q){f.event.sourceEvent.stopPropagation();var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=Q.brush.svgBrush;j.wasDragged=!0,j._dragging=!0,j.grabbingBar?j.newExtent=[X-j.grabPoint,X+j.barLength-j.grabPoint].map(Q.unitToPaddedPx.invert):j.newExtent=[j.startExtent,Q.unitToPaddedPx.invert(X)].sort(e),Q.brush.filterSpecified=!0,j.extent=j.stayingIntervals.concat([j.newExtent]),j.brushCallback(Q),u(G.parentNode)}function b(G,Q){var X=Q.brush,j=X.filter,re=X.svgBrush;re._dragging||(v(G,Q),g(G,Q),Q.brush.svgBrush.wasDragged=!1),re._dragging=!1;var ue=f.event;ue.sourceEvent.stopPropagation();var K=re.grabbingBar;if(re.grabbingBar=!1,re.grabLocation=void 0,Q.parent.inBrushDrag=!1,l(),!re.wasDragged){re.wasDragged=void 0,re.clickableOrdinalRange?X.filterSpecified&&Q.multiselect?re.extent.push(re.clickableOrdinalRange):(re.extent=[re.clickableOrdinalRange],X.filterSpecified=!0):K?(re.extent=re.stayingIntervals,re.extent.length===0&&I(X)):I(X),re.brushCallback(Q),u(G.parentNode),re.brushEndCallback(X.filterSpecified?j.getConsolidated():[]);return}var te=function(){j.set(j.getConsolidated())};if(Q.ordinal){var Y=Q.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),re.newExtent=[i(0,Y,re.newExtent[0],re.stayingIntervals),i(1,Y,re.newExtent[1],re.stayingIntervals)];var V=re.newExtent[1]>re.newExtent[0];re.extent=re.stayingIntervals.concat(V?[re.newExtent]:[]),re.extent.length||I(X),re.brushCallback(Q),V?u(G.parentNode,te):(te(),u(G.parentNode))}else te();re.brushEndCallback(X.filterSpecified?j.getConsolidated():[])}function v(G,Q){var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=A(Q,X),re="crosshair";j.clickableOrdinalRange?re="pointer":j.region&&(re=j.region+"-resize"),f.select(document.body).style("cursor",re)}function C(G){G.on("mousemove",function(Q){f.event.preventDefault(),Q.parent.inBrushDrag||v(this,Q)}).on("mouseleave",function(Q){Q.parent.inBrushDrag||l()}).call(f.behavior.drag().on("dragstart",function(Q){_(this,Q)}).on("drag",function(Q){g(this,Q)}).on("dragend",function(Q){b(this,Q)}))}function S(G,Q){return G[0]-Q[0]}function k(G,Q,X){var j=X._context.staticPlot,re=G.selectAll(".background").data(T);re.enter().append("rect").classed("background",!0).call(y).call(d).style("pointer-events",j?"none":"auto").attr("transform",a(0,w.verticalPadding)),re.call(C).attr("height",function(te){return te.height-w.verticalPadding});var ue=G.selectAll(".highlight-shadow").data(T);ue.enter().append("line").classed("highlight-shadow",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width+w.bar.strokeWidth).attr("stroke",Q).attr("opacity",w.bar.strokeOpacity).attr("stroke-linecap","butt"),ue.attr("y1",function(te){return te.height}).call(x);var K=G.selectAll(".highlight").data(T);K.enter().append("line").classed("highlight",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width-w.bar.strokeWidth).attr("stroke",w.bar.fillColor).attr("opacity",w.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(te){return te.height}).call(x)}function E(G,Q,X){var j=G.selectAll("."+w.cn.axisBrush).data(T,M);j.enter().append("g").classed(w.cn.axisBrush,!0),k(j,Q,X)}function F(G){return G.svgBrush.extent.map(function(Q){return Q.slice()})}function I(G){G.filterSpecified=!1,G.svgBrush.extent=[[-1/0,1/0]]}function D(G){return function(X){var j=X.brush,re=F(j),ue=re.slice();j.filter.set(ue),G()}}function R(G){for(var Q=G.slice(),X=[],j,re=Q.shift();re;){for(j=re.slice();(re=Q.shift())&&re[0]<=j[1];)j[1]=Math.max(j[1],re[1]);X.push(j)}return X.length===1&&X[0][0]>X[0][1]&&(X=[]),X}function O(){var G=[],Q,X;return{set:function(j){G=j.map(function(re){return re.slice().sort(e)}).sort(S),G.length===1&&G[0][0]===-1/0&&G[0][1]===1/0&&(G=[[0,-1]]),Q=R(G),X=G.reduce(function(re,ue){return[Math.min(re[0],ue[0]),Math.max(re[1],ue[1])]},[1/0,-1/0])},get:function(){return G.slice()},getConsolidated:function(){return Q},getBounds:function(){return X}}}function z(G,Q,X,j,re,ue){var K=O();return K.set(X),{filter:K,filterSpecified:Q,svgBrush:{extent:[],brushStartCallback:j,brushCallback:D(re),brushEndCallback:ue}}}function B(G,Q){if(Array.isArray(G[0])?(G=G.map(function(j){return j.sort(e)}),Q.multiselect?G=R(G.sort(S)):G=[G[0]]):G=[G.sort(e)],Q.tickvals){var X=Q.tickvals.slice().sort(e);if(G=G.map(function(j){var re=[i(0,X,j[0],[]),i(1,X,j[1],[])];if(re[1]>re[0])return re}).filter(function(j){return j}),!G.length)return}return G.length>1?G:G[0]}U.exports={makeBrush:z,ensureAxisBrush:E,cleanRanges:B}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:o("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../plots/get_data").getModuleCalcData,M=o("./plot"),T=o("../../constants/xmlns_namespaces");H.name="parcoords",H.plot=function(e){var a=f(e.calcdata,"parcoords")[0];a.length&&M(e,a)},H.clean=function(e,a,n,r){var t=r._has&&r._has("parcoords"),h=a._has&&a._has("parcoords");t&&!h&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},H.toSVG=function(e){var a=e._fullLayout._glimages,n=w.select(e).selectAll(".svg-container"),r=n.filter(function(h,i){return i===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function t(){var h=this,i=h.toDataURL("image/png"),s=a.append("svg:image");s.attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:h.style.width,height:h.style.height})}r.each(t),window.setTimeout(function(){w.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray,f=o("../../components/colorscale"),M=o("../../lib/gup").wrap;U.exports=function(a,n){var r,t;return f.hasColorscale(n,"line")&&w(n.line.color)?(r=n.line.color,t=f.extractOpts(n.line).colorscale,f.calc(a,n,{vals:r,containerStr:"line",cLetter:"c"})):(r=T(n._length),t=[[0,n.line.color],[1,n.line.color]]),M({lineColor:r,cscale:t})};function T(e){for(var a=new Array(e),n=0;n<e;n++)a[n]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(o,U,H){U.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/defaults"),T=o("../../plots/domain").defaults,e=o("../../plots/array_container_defaults"),a=o("../../plots/cartesian/axes"),n=o("./attributes"),r=o("./axisbrush"),t=o("./constants").maxDimensionCount,h=o("./merge_length");function i(y,d,p,c,m){var l=m("line.color",p);if(f(y,"line")&&w.isArrayOrTypedArray(l)){if(l.length)return m("line.colorscale"),M(y,d,c,m,{prefix:"line.",cLetter:"c"}),l.length;d.line.color=p}return 1/0}function s(y,d,p,c){function m(_,g){return w.coerce(y,d,n.dimensions,_,g)}var l=m("values"),x=m("visible");if(l&&l.length||(x=d.visible=!1),x){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var u=m("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},a.setConvert(d._ax,c.layout),m("multiselect");var A=m("constraintrange");A&&(d.constraintrange=r.cleanRanges(A,d))}}U.exports=function(d,p,c,m){function l(g,b){return w.coerce(d,p,n,g,b)}var x=d.dimensions;Array.isArray(x)&&x.length>t&&(w.log("parcoords traces support up to "+t+" dimensions at the moment"),x.splice(t));var u=e(d,p,{name:"dimensions",layout:m,handleItemDefaults:s}),A=i(d,p,c,m,l);T(p,m,l),(!Array.isArray(u)||!u.length)&&(p.visible=!1),h(p,u,"values",A);var _={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};w.coerceFont(l,"labelfont",_),w.coerceFont(l,"tickfont",_),w.coerceFont(l,"rangefont",_),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(o,U,H){var w=o("../../lib").isTypedArray;H.convertTypedArray=function(f){return w(f)?Array.prototype.slice.call(f):f},H.isOrdinal=function(f){return!!f.tickvals},H.isVisible=function(f){return f.visible||!("visible"in f)}},{"../../lib":515}],905:[function(o,U,H){var w=o("./base_index");w.plot=o("./plot"),U.exports=w},{"./base_index":899,"./plot":909}],906:[function(o,U,H){var w=o("glslify"),f=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),M=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=o("./constants").maxDimensionCount,e=o("../../lib"),a=1e-6,n=2048,r=new Uint8Array(4),t=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(v){v.read({x:0,y:0,width:1,height:1,data:r})}function s(v,C,S,k,E){var F=v._gl;F.enable(F.SCISSOR_TEST),F.scissor(C,S,k,E),v.clear({color:[0,0,0,0],depth:1})}function y(v,C,S,k,E,F){var I=F.key;function D(R){var O=Math.min(k,E-R*k);R===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],s(v,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!S.clearOnly&&(F.count=2*O,F.offset=2*R*k,C(F),R*k+O<E&&(S.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(i(v),S.drawCompleted=!0),D(0)}function d(v){return Math.max(a,Math.min(1-a,v))}function p(v,C){for(var S=new Array(256),k=0;k<256;k++)S[k]=v(k/255).concat(C);return S}function c(v,C){return(v>>>8*C)%256/255}function m(v,C,S){for(var k=new Array(v*(T+4)),E=0,F=0;F<v;F++){for(var I=0;I<T;I++)k[E++]=I<C.length?C[I].paddedUnitValues[F]:.5;k[E++]=c(F,2),k[E++]=c(F,1),k[E++]=c(F,0),k[E++]=d(S[F])}return k}function l(v,C,S){for(var k=new Array(C*8),E=0,F=0;F<C;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=v*4+D,O=S[F*64+R];R===63&&I===0&&(O*=-1),k[E++]=O}return k}function x(v){var C="0"+v;return C.substr(C.length-2)}function u(v){return v<T?"p"+x(v+1)+"_"+x(v+4):"colors"}function A(v,C,S){for(var k=0;k<=T;k+=4)v[u(k)](l(k/4,C,S))}function _(v){for(var C={},S=0;S<=T;S+=4)C[u(S)]=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return C}function g(v,C,S,k,E,F,I,D,R,O,z,B,G,Q){for(var X=[[],[]],j=0;j<64;j++)X[0][j]=j===E?1:0,X[1][j]=j===F?1:0;I*=Q,D*=Q,R*=Q,O*=Q;var re=v.lines.canvasOverdrag*Q,ue=v.domain,K=v.canvasWidth*Q,te=v.canvasHeight*Q,Y=v.pad.l*Q,V=v.pad.b*Q,ee=v.layoutHeight*Q,ne=v.layoutWidth*Q,Z=v.deselectedLines.color,q=v.deselectedLines.opacity,ie=e.extendFlat({key:z,resolution:[K,te],viewBoxPos:[I+re,D],viewBoxSize:[R,O],i0:E,i1:F,dim0A:X[0].slice(0,16),dim0B:X[0].slice(16,32),dim0C:X[0].slice(32,48),dim0D:X[0].slice(48,64),dim1A:X[1].slice(0,16),dim1B:X[1].slice(16,32),dim1C:X[1].slice(32,48),dim1D:X[1].slice(48,64),drwLayer:B,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,q!=="auto"?Z[3]*q:Math.max(1/255,Math.pow(1/v.lines.color.length,1/3))],scissorX:(k===C?0:I+re)+(Y-re)+ne*ue.x[0],scissorWidth:(k===S?K-I+re:R+.5)+(k===C?I+re:0),scissorY:D+V+ee*ue.y[0],scissorHeight:O,viewportX:Y-re+ne*ue.x[0],viewportY:V+ee*ue.y[0],viewportWidth:K,viewportHeight:te},G);return ie}function b(v){var C=n-1,S=Math.max(0,Math.floor(v[0]*C),0),k=Math.min(C,Math.ceil(v[1]*C),C);return[Math.min(S,k),Math.max(S,k)]}U.exports=function(v,C){var S=C.context,k=C.pick,E=C.regl,F=E._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],C.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,z,B,G,Q=_(E),X,j=E.texture(h),re=[];K(C);var ue=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:f,frag:M,primitive:"lines",lineWidth:D,attributes:Q,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:j,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function K(Z){O=Z.model,z=Z.viewModel,B=z.dimensions.slice(),G=B[0]?B[0].values.length:0;var q=O.lines,ie=k?q.color.map(function(ae,oe){return oe/q.color.length}):q.color,se=m(G,B,ie);A(Q,G,se),!S&&!k&&(j=E.texture(e.extendFlat({data:p(O.unitToColor,255)},h)))}function te(Z){var q,ie,se,ae=[[],[]];for(se=0;se<64;se++){var oe=!Z&&se<B.length?B[se].brush.filter.getBounds():[-1/0,1/0];ae[0][se]=oe[0],ae[1][se]=oe[1]}var be=n*8,ce=new Array(be);for(q=0;q<be;q++)ce[q]=255;if(!Z)for(q=0;q<B.length;q++){var de=q%8,ye=(q-de)/8,ge=Math.pow(2,de),me=B[q],Me=me.brush.filter.get();if(!(Me.length<2)){var Le=b(Me[0])[1];for(ie=1;ie<Me.length;ie++){var Oe=b(Me[ie]);for(se=Le+1;se<Oe[0];se++)ce[se*8+ye]&=~ge;Le=Math.max(Le,Oe[1])}}}var _e={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return X?X(_e):X=E.texture(_e),{maskTexture:X,maskHeight:n,loA:ae[0].slice(0,16),loB:ae[0].slice(16,32),loC:ae[0].slice(32,48),loD:ae[0].slice(48,64),hiA:ae[1].slice(0,16),hiB:ae[1].slice(16,32),hiC:ae[1].slice(32,48),hiD:ae[1].slice(48,64)}}function Y(Z,q,ie){var se=Z.length,ae,oe,be,ce=1/0,de=-1/0;for(ae=0;ae<se;ae++)Z[ae].dim0.canvasX<ce&&(ce=Z[ae].dim0.canvasX,oe=ae),Z[ae].dim1.canvasX>de&&(de=Z[ae].dim1.canvasX,be=ae);se===0&&s(E,0,0,O.canvasWidth,O.canvasHeight);var ye=te(S);for(ae=0;ae<se;ae++){var ge=Z[ae],me=ge.dim0.crossfilterDimensionIndex,Me=ge.dim1.crossfilterDimensionIndex,Le=ge.canvasX,Oe=ge.canvasY,_e=Le+ge.panelSizeX,Ee=ge.plotGlPixelRatio;if(q||!re[me]||re[me][0]!==Le||re[me][1]!==_e){re[me]=[Le,_e];var Ze=g(O,oe,be,ae,me,Me,Le,Oe,ge.panelSizeX,ge.panelSizeY,ge.dim0.crossfilterDimensionIndex,S?0:k?2:1,ye,Ee);R.clearOnly=ie;var Ge=q?O.lines.blockLineCount:G;y(E,ue,R,Ge,G,Ze)}}}function V(Z,q){return E.read({x:Z,y:q,width:1,height:1,data:t}),t}function ee(Z,q,ie,se){var ae=new Uint8Array(4*ie*se);return E.read({x:Z,y:q,width:ie,height:se,data:ae}),ae}function ne(){v.style["pointer-events"]="none",j.destroy(),X&&X.destroy();for(var Z in Q)Q[Z].destroy()}return{render:Y,readPixel:V,readPixels:ee,destroy:ne,update:K}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(o,U,H){U.exports=function(w,f,M,T){T||(T=1/0);var e,a;for(e=0;e<f.length;e++)a=f[e],a.visible&&(T=Math.min(T,a[M].length));for(T===1/0&&(T=0),w._length=T,e=0;e<f.length;e++)a=f[e],a.visible&&(a._length=T);return T}},{}],908:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=f.numberFormat,T=o("color-rgba"),e=o("../../plots/cartesian/axes"),a=f.strRotate,n=f.strTranslate,r=o("../../lib/svg_text_utils"),t=o("../../components/drawing"),h=o("../../components/colorscale"),i=o("../../lib/gup"),s=i.keyFun,y=i.repeat,d=i.unwrap,p=o("./helpers"),c=o("./constants"),m=o("./axisbrush"),l=o("./lines");function x(X,j,re){return f.aggNums(X,null,j,re)}function u(X,j){return _(x(Math.min,X,j),x(Math.max,X,j))}function A(X){var j=X.range;return j?_(j[0],j[1]):u(X.values,X._length)}function _(X,j){return(isNaN(X)||!isFinite(X))&&(X=0),(isNaN(j)||!isFinite(j))&&(j=0),X===j&&(X===0?(X-=1,j+=1):(X*=.9,j*=1.1)),[X,j]}function g(X,j){return j?function(re,ue){var K=j[ue];return K==null?X(re):K}:X}function b(X,j,re,ue,K){var te=A(re);return ue?w.scale.ordinal().domain(ue.map(g(M(re.tickformat),K))).range(ue.map(function(Y){var V=(Y-te[0])/(te[1]-te[0]);return X-j+V*(2*j-X)})):w.scale.linear().domain(te).range([X-j,j])}function v(X,j){return w.scale.linear().range([j,X-j])}function C(X,j){return w.scale.linear().domain(A(X)).range([j,1-j])}function S(X){if(!!X.tickvals){var j=A(X);return w.scale.ordinal().domain(X.tickvals).range(X.tickvals.map(function(re){return(re-j[0])/(j[1]-j[0])}))}}function k(X){var j=X.map(function(te){return te[0]}),re=X.map(function(te){var Y=T(te[1]);return w.rgb("rgb("+Y[0]+","+Y[1]+","+Y[2]+")")}),ue=function(te){return function(Y){return Y[te]}},K="rgb".split("").map(function(te){return w.scale.linear().clamp(!0).domain(j).range(re.map(ue(te)))});return function(te){return K.map(function(Y){return Y(te)})}}function E(X){return X.dimensions.some(function(j){return j.brush.filterSpecified})}function F(X,j,re){var ue=d(j),K=ue.trace,te=p.convertTypedArray(ue.lineColor),Y=K.line,V={color:T(K.unselected.line.color),opacity:K.unselected.line.opacity},ee=h.extractOpts(Y),ne=ee.reversescale?h.flipScale(ue.cscale):ue.cscale,Z=K.domain,q=K.dimensions,ie=X.width,se=K.labelangle,ae=K.labelside,oe=K.labelfont,be=K.tickfont,ce=K.rangefont,de=f.extendDeepNoArrays({},Y,{color:te.map(w.scale.linear().domain(A({values:te,range:[ee.min,ee.max],_length:K._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ye=Math.floor(ie*(Z.x[1]-Z.x[0])),ge=Math.floor(X.height*(Z.y[1]-Z.y[0])),me=X.margin||{l:80,r:80,t:100,b:80},Me=ye,Le=ge;return{key:re,colCount:q.filter(p.isVisible).length,dimensions:q,tickDistance:c.tickDistance,unitToColor:k(ne),lines:de,deselectedLines:V,labelAngle:se,labelSide:ae,labelFont:oe,tickFont:be,rangeFont:ce,layoutWidth:ie,layoutHeight:X.height,domain:Z,translateX:Z.x[0]*ie,translateY:X.height-Z.y[1]*X.height,pad:me,canvasWidth:Me*c.canvasPixelRatio+2*de.canvasOverdrag,canvasHeight:Le*c.canvasPixelRatio,width:Me,height:Le,canvasPixelRatio:c.canvasPixelRatio}}function I(X,j,re){var ue=re.width,K=re.height,te=re.dimensions,Y=re.canvasPixelRatio,V=function(ie){return ue*ie/Math.max(1,re.colCount-1)},ee=c.verticalPadding/K,ne=v(K,c.verticalPadding),Z={key:re.key,xScale:V,model:re,inBrushDrag:!1},q={};return Z.dimensions=te.filter(p.isVisible).map(function(ie,se){var ae=C(ie,ee),oe=q[ie.label];q[ie.label]=(oe||0)+1;var be=ie.label+(oe?"__"+oe:""),ce=ie.constraintrange,de=ce&&ce.length;de&&!Array.isArray(ce[0])&&(ce=[ce]);var ye=de?ce.map(function(Fe){return Fe.map(ae)}):[[-1/0,1/0]],ge=function(){var Fe=Z;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Re=E(Fe);!X.contextShown()&&Re?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),X.contextShown(!0)):X.contextShown()&&!Re&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),X.contextShown(!1))},me=ie.values;me.length>ie._length&&(me=me.slice(0,ie._length));var Me=ie.tickvals,Le;function Oe(Fe,Re){return{val:Fe,text:Le[Re]}}function _e(Fe,Re){return Fe.val-Re.val}if(Array.isArray(Me)&&Me.length){Le=ie.ticktext,!Array.isArray(Le)||!Le.length?Le=Me.map(M(ie.tickformat)):Le.length>Me.length?Le=Le.slice(0,Me.length):Me.length>Le.length&&(Me=Me.slice(0,Le.length));for(var Ee=1;Ee<Me.length;Ee++)if(Me[Ee]<Me[Ee-1]){for(var Ze=Me.map(Oe).sort(_e),Ge=0;Ge<Me.length;Ge++)Me[Ge]=Ze[Ge].val,Le[Ge]=Ze[Ge].text;break}}else Me=void 0;return me=p.convertTypedArray(me),{key:be,label:ie.label,tickFormat:ie.tickformat,tickvals:Me,ticktext:Le,ordinal:p.isOrdinal(ie),multiselect:ie.multiselect,xIndex:se,crossfilterDimensionIndex:se,visibleIndex:ie._index,height:K,values:me,paddedUnitValues:me.map(ae),unitTickvals:Me&&Me.map(ae),xScale:V,x:V(se),canvasX:V(se)*Y,unitToPaddedPx:ne,domainScale:b(K,c.verticalPadding,ie,Me,Le),ordinalScale:S(ie),parent:Z,model:re,brush:m.makeBrush(X,de,ye,function(){X.linePickActive(!1)},ge,function(Fe){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),X.linePickActive(!0),j&&j.filterChanged){var Re=ae.invert,We=Fe.map(function(xt){return xt.map(Re).sort(f.sorterAsc)}).sort(function(xt,Nt){return xt[0]-Nt[0]});j.filterChanged(Z.key,ie._index,We)}})}}),Z}function D(X){X.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var X=!0,j=!1;return{linePickActive:function(re){return arguments.length?X=!!re:X},contextShown:function(re){return arguments.length?j=!!re:j}}}function O(X,j){var re=j==="top"?1:-1,ue=X*Math.PI/180,K=Math.sin(ue),te=Math.cos(ue);return{dir:re,dx:K,dy:te,degrees:X}}function z(X,j,re){for(var ue=j.panels||(j.panels=[]),K=X.data(),te=0;te<K.length-1;te++){var Y=ue[te]||(ue[te]={}),V=K[te],ee=K[te+1];Y.dim0=V,Y.dim1=ee,Y.canvasX=V.canvasX,Y.panelSizeX=ee.canvasX-V.canvasX,Y.panelSizeY=j.model.canvasHeight,Y.y=0,Y.canvasY=0,Y.plotGlPixelRatio=re}}function B(X){for(var j=0;j<X.length;j++)for(var re=0;re<X[j].length;re++)for(var ue=X[j][re].trace,K=ue.dimensions,te=0;te<K.length;te++){var Y=K[te].values,V=K[te]._ax;V&&(V.range?V.range=_(V.range[0],V.range[1]):V.range=u(Y,ue._length),V.dtick||(V.dtick=.01*(Math.abs(V.range[1]-V.range[0])||1)),V.tickformat=K[te].tickformat,e.calcTicks(V),V.cleanRange())}}function G(X,j){return e.tickText(X._ax,j,!1).text}function Q(X,j){if(X.ordinal)return"";var re=X.domainScale.domain(),ue=re[j?re.length-1:0];return G(X.model.dimensions[X.visibleIndex],ue)}U.exports=function(j,re,ue,K){var te=j._context.staticPlot,Y=j._fullLayout,V=Y._toppaper,ee=Y._glcontainer,ne=j._context.plotGlPixelRatio,Z=j._fullLayout.paper_bgcolor;B(re);var q=R(),ie=re.filter(function(Ge){return d(Ge).trace.visible}).map(F.bind(0,ue)).map(I.bind(0,q,K));ee.each(function(Ge,Fe){return f.extendFlat(Ge,ie[Fe])});var se=ee.selectAll(".gl-canvas").each(function(Ge){Ge.viewModel=ie[0],Ge.viewModel.plotGlPixelRatio=ne,Ge.viewModel.paperColor=Z,Ge.model=Ge.viewModel?Ge.viewModel.model:null}),ae=null,oe=se.filter(function(Ge){return Ge.pick});oe.style("pointer-events",te?"none":"auto").on("mousemove",function(Ge){if(q.linePickActive()&&Ge.lineLayer&&K&&K.hover){var Fe=w.event,Re=this.width,We=this.height,xt=w.mouse(this),Nt=xt[0],tr=xt[1];if(Nt<0||tr<0||Nt>=Re||tr>=We)return;var Vt=Ge.lineLayer.readPixel(Nt,We-1-tr),Pt=Vt[3]!==0,$t=Pt?Vt[2]+256*(Vt[1]+256*Vt[0]):null,Ut={x:Nt,y:tr,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:Ge.model.key,curveNumber:$t};$t!==ae&&(Pt?K.hover(Ut):K.unhover&&K.unhover(Ut),ae=$t)}}),se.style("opacity",function(Ge){return Ge.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var be=V.selectAll("."+c.cn.parcoords).data(ie,s);be.exit().remove(),be.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),be.attr("transform",function(Ge){return n(Ge.model.translateX,Ge.model.translateY)});var ce=be.selectAll("."+c.cn.parcoordsControlView).data(y,s);ce.enter().append("g").classed(c.cn.parcoordsControlView,!0),ce.attr("transform",function(Ge){return n(Ge.model.pad.l,Ge.model.pad.t)});var de=ce.selectAll("."+c.cn.yAxis).data(function(Ge){return Ge.dimensions},s);de.enter().append("g").classed(c.cn.yAxis,!0),ce.each(function(Ge){z(de,Ge,ne)}),se.each(function(Ge){if(Ge.viewModel){!Ge.lineLayer||K?Ge.lineLayer=l(this,Ge):Ge.lineLayer.update(Ge),(Ge.key||Ge.key===0)&&(Ge.viewModel[Ge.key]=Ge.lineLayer);var Fe=!Ge.context||K;Ge.lineLayer.render(Ge.viewModel.panels,Fe)}}),de.attr("transform",function(Ge){return n(Ge.xScale(Ge.xIndex),0)}),de.call(w.behavior.drag().origin(function(Ge){return Ge}).on("drag",function(Ge){var Fe=Ge.parent;q.linePickActive(!1),Ge.x=Math.max(-c.overdrag,Math.min(Ge.model.width+c.overdrag,w.event.x)),Ge.canvasX=Ge.x*Ge.model.canvasPixelRatio,de.sort(function(Re,We){return Re.x-We.x}).each(function(Re,We){Re.xIndex=We,Re.x=Ge===Re?Re.x:Re.xScale(Re.xIndex),Re.canvasX=Re.x*Re.model.canvasPixelRatio}),z(de,Fe,ne),de.filter(function(Re){return Math.abs(Ge.xIndex-Re.xIndex)!==0}).attr("transform",function(Re){return n(Re.xScale(Re.xIndex),0)}),w.select(this).attr("transform",n(Ge.x,0)),de.each(function(Re,We,xt){xt===Ge.parent.key&&(Fe.dimensions[We]=Re)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(Ge){var Fe=Ge.parent;Ge.x=Ge.xScale(Ge.xIndex),Ge.canvasX=Ge.x*Ge.model.canvasPixelRatio,z(de,Fe,ne),w.select(this).attr("transform",function(Re){return n(Re.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!E(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),q.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(Fe.key,Fe.dimensions.map(function(Re){return Re.crossfilterDimensionIndex}))})),de.exit().remove();var ye=de.selectAll("."+c.cn.axisOverlays).data(y,s);ye.enter().append("g").classed(c.cn.axisOverlays,!0),ye.selectAll("."+c.cn.axis).remove();var ge=ye.selectAll("."+c.cn.axis).data(y,s);ge.enter().append("g").classed(c.cn.axis,!0),ge.each(function(Ge){var Fe=Ge.model.height/Ge.model.tickDistance,Re=Ge.domainScale,We=Re.domain();w.select(this).call(w.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,Ge.tickFormat).tickValues(Ge.ordinal?We:null).tickFormat(function(xt){return p.isOrdinal(Ge)?xt:G(Ge.model.dimensions[Ge.visibleIndex],xt)}).scale(Re)),t.font(ge.selectAll("text"),Ge.model.tickFont)}),ge.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ge.selectAll("text").style("text-shadow",r.makeTextShadow(Z)).style("cursor","default");var me=ye.selectAll("."+c.cn.axisHeading).data(y,s);me.enter().append("g").classed(c.cn.axisHeading,!0);var Me=me.selectAll("."+c.cn.axisTitle).data(y,s);Me.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),Me.text(function(Ge){return Ge.label}).each(function(Ge){var Fe=w.select(this);t.font(Fe,Ge.model.labelFont),r.convertToTspans(Fe,j)}).attr("transform",function(Ge){var Fe=O(Ge.model.labelAngle,Ge.model.labelSide),Re=c.axisTitleOffset;return(Fe.dir>0?"":n(0,2*Re+Ge.model.height))+a(Fe.degrees)+n(-Re*Fe.dx,-Re*Fe.dy)}).attr("text-anchor",function(Ge){var Fe=O(Ge.model.labelAngle,Ge.model.labelSide),Re=Math.abs(Fe.dx),We=Math.abs(Fe.dy);return 2*Re>We?Fe.dir*Fe.dx<0?"start":"end":"middle"});var Le=ye.selectAll("."+c.cn.axisExtent).data(y,s);Le.enter().append("g").classed(c.cn.axisExtent,!0);var Oe=Le.selectAll("."+c.cn.axisExtentTop).data(y,s);Oe.enter().append("g").classed(c.cn.axisExtentTop,!0),Oe.attr("transform",n(0,-c.axisExtentOffset));var _e=Oe.selectAll("."+c.cn.axisExtentTopText).data(y,s);_e.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(D),_e.text(function(Ge){return Q(Ge,!0)}).each(function(Ge){t.font(w.select(this),Ge.model.rangeFont)});var Ee=Le.selectAll("."+c.cn.axisExtentBottom).data(y,s);Ee.enter().append("g").classed(c.cn.axisExtentBottom,!0),Ee.attr("transform",function(Ge){return n(0,Ge.model.height+c.axisExtentOffset)});var Ze=Ee.selectAll("."+c.cn.axisExtentBottomText).data(y,s);Ze.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ze.text(function(Ge){return Q(Ge,!1)}).each(function(Ge){t.font(w.select(this),Ge.model.rangeFont)}),m.ensureAxisBrush(ye,Z,j)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(o,U,n){var w=o("./parcoords"),f=o("../../lib/prepare_regl"),M=o("./helpers").isVisible,T={};function e(r,t,h){var i=t.indexOf(h),s=r.indexOf(i);return s===-1&&(s+=t.length),s}function a(r,t){return function(i,s){return e(r,t,i)-e(r,t,s)}}var n=U.exports=function(t,h){var i=t._fullLayout,s=f(t,[],T);if(!!s){var y={},d={},p={},c={},m=i._size;h.forEach(function(_,g){var b=_[0].trace;p[g]=b.index;var v=c[g]=b._fullInput.index;y[g]=t.data[v].dimensions,d[g]=t.data[v].dimensions.slice()});var l=function(_,g,b){var v=d[_][g],C=b.map(function(D){return D.slice()}),S="dimensions["+g+"].constraintrange",k=i._tracePreGUI[t._fullData[p[_]]._fullInput.uid];if(k[S]===void 0){var E=v.constraintrange;k[S]=E||null}var F=t._fullData[p[_]].dimensions[g];C.length?(C.length===1&&(C=C[0]),v.constraintrange=C,F.constraintrange=C.slice(),C=[C]):(delete v.constraintrange,delete F.constraintrange,C=null);var I={};I[S]=C,t.emit("plotly_restyle",[I,[c[_]]])},x=function(_){t.emit("plotly_hover",_)},u=function(_){t.emit("plotly_unhover",_)},A=function(_,g){var b=a(g,d[_].filter(M));y[_].sort(b),d[_].filter(function(v){return!M(v)}).sort(function(v){return d[_].indexOf(v)}).forEach(function(v){y[_].splice(y[_].indexOf(v),1),y[_].splice(d[_].indexOf(v),0,v)}),t.emit("plotly_restyle",[{dimensions:[y[_]]},[c[_]]])};w(t,h,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:l,hover:x,unhover:u,axesMoved:A})}};n.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(o,U,H){var w=o("../../plots/attributes"),f=o("../../plots/domain").attributes,M=o("../../plots/font_attributes"),T=o("../../components/color/attributes"),e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../plots/template_attributes").texttemplateAttrs,n=o("../../lib/extend").extendFlat,r=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});U.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},w.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},r,{}),outsidetextfont:n({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:f({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(o,U,H){var w=o("../../plots/plots");H.name="pie",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],912:[function(o,U,H){var w=o("fast-isnumeric"),f=o("tinycolor2"),M=o("../../components/color"),T={};function e(t,h){var i=[],s=t._fullLayout,y=s.hiddenlabels||[],d=h.labels,p=h.marker.colors||[],c=h.values,m=h._length,l=h._hasValues&&m,x,u;if(h.dlabel)for(d=new Array(m),x=0;x<m;x++)d[x]=String(h.label0+x*h.dlabel);var A={},_=a(s["_"+h.type+"colormap"]),g=0,b=!1;for(x=0;x<m;x++){var v,C,S;if(l){if(v=c[x],!w(v))continue;v=+v}else v=1;C=d[x],(C===void 0||C==="")&&(C=x),C=String(C);var k=A[C];k===void 0?(A[C]=i.length,S=y.indexOf(C)!==-1,S||(g+=v),i.push({v,label:C,color:_(p[x],C),i:x,pts:[x],hidden:S})):(b=!0,u=i[k],u.v+=v,u.pts.push(x),u.hidden||(g+=v),u.color===!1&&p[x]&&(u.color=_(p[x],C)))}i=i.filter(function(F){return F.v>=0});var E=h.type==="funnelarea"?b:h.sort;return E&&i.sort(function(F,I){return I.v-F.v}),i[0]&&(i[0].vTotal=g),i}function a(t){return function(i,s){return!i||(i=f(i),!i.isValid())?!1:(i=M.addOpacity(i,i.getAlpha()),t[s]||(t[s]=i),i)}}function n(t,h){var i=(h||{}).type;i||(i="pie");var s=t._fullLayout,y=t.calcdata,d=s[i+"colorway"],p=s["_"+i+"colormap"];s["extend"+i+"colors"]&&(d=r(d,T));for(var c=0,m=0;m<y.length;m++){var l=y[m],x=l[0].trace.type;if(x===i)for(var u=0;u<l.length;u++){var A=l[u];A.color===!1&&(p[A.label]?A.color=p[A.label]:(p[A.label]=A.color=d[c%d.length],c++))}}}function r(t,h){var i,s=JSON.stringify(t),y=h[s];if(!y){for(y=t.slice(),i=0;i<t.length;i++)y.push(f(t[i]).lighten(20).toHexString());for(i=0;i<t.length;i++)y.push(f(t[i]).darken(20).toHexString());h[s]=y}return y}U.exports={calc:e,crossTraceCalc:n,makePullColorFn:a,generateExtendedColors:r}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("./attributes"),T=o("../../plots/domain").defaults,e=o("../bar/defaults").handleText;function a(r,t){var h=Array.isArray(r),i=f.isArrayOrTypedArray(t),s=Math.min(h?r.length:1/0,i?t.length:1/0);if(isFinite(s)||(s=0),s&&i){for(var y,d=0;d<s;d++){var p=t[d];if(w(p)&&p>0){y=!0;break}}y||(s=0)}return{hasLabels:h,hasValues:i,len:s}}function n(r,t,h,i){function s(S,k){return f.coerce(r,t,M,S,k)}var y=s("labels"),d=s("values"),p=a(y,d),c=p.len;if(t._hasLabels=p.hasLabels,t._hasValues=p.hasValues,!t._hasLabels&&t._hasValues&&(s("label0"),s("dlabel")),!c){t.visible=!1;return}t._length=c;var m=s("marker.line.width");m&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var l=s("text"),x=s("texttemplate"),u;if(x||(u=s("textinfo",Array.isArray(l)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),x||u&&u!=="none"){var A=s("textposition");e(r,t,i,s,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(A)||A==="auto",g=_||A==="outside";g&&s("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&s("insidetextorientation")}T(t,i,s);var b=s("hole"),v=s("title.text");if(v){var C=s("title.position",b?"middle center":"top center");!b&&C==="middle center"&&(t.title.position="top center"),f.coerceFont(s,"title.font",i.font)}s("sort"),s("direction"),s("rotation"),s("pull")}U.exports={handleLabelsAndValues:a,supplyDefaults:n}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(o,U,H){var w=o("../../components/fx/helpers").appendArrayMultiPointValues;U.exports=function(M,T){var e={curveNumber:T.index,pointNumbers:M.pts,data:T._input,fullData:T,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(e.pointNumber=e.i=M.pts[0]),w(e,T,M.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(o,U,H){var w=o("../../lib");function f(M){return M.indexOf("e")!==-1?M.replace(/[.]?0+e/,"e"):M.indexOf(".")!==-1?M.replace(/[.]?0+$/,""):M}H.formatPiePercent=function(T,e){var a=f((T*100).toPrecision(3));return w.numSeparate(a,e)+"%"},H.formatPieValue=function(T,e){var a=f(T.toPrecision(10));return w.numSeparate(a,e)},H.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var n=T[e[a]];if(n||n===0||n==="")return n}},H.castOption=function(T,e){if(Array.isArray(T))return H.getFirstFilled(T,e);if(T)return T},H.getRotationAngle=function(M){return(M==="auto"?0:M)*Math.PI/180}},{"../../lib":515}],916:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults").supplyDefaults,supplyLayoutDefaults:o("./layout_defaults"),layoutAttributes:o("./layout_attributes"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot").plot,style:o("./style"),styleOne:o("./style_one"),moduleType:"trace",name:"pie",basePlotModule:o("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(o,U,H){U.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../plots/plots"),M=o("../../components/fx"),T=o("../../components/color"),e=o("../../components/drawing"),a=o("../../lib"),n=a.strScale,r=a.strTranslate,t=o("../../lib/svg_text_utils"),h=o("../bar/uniform_text"),i=h.recordMinTextSize,s=h.clearMinTextSize,y=o("../bar/constants").TEXTPAD,d=o("./helpers"),p=o("./event_data"),c=o("../../lib").isValidTextValue;function m(te,Y){var V=te._context.staticPlot,ee=te._fullLayout,ne=ee._size;s("pie",ee),_(Y,te),Q(Y,ne);var Z=a.makeTraceGroups(ee._pielayer,Y,"trace").each(function(q){var ie=w.select(this),se=q[0],ae=se.trace;j(q),ie.attr("stroke-linejoin","round"),ie.each(function(){var oe=w.select(this).selectAll("g.slice").data(q);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var be=[[[],[]],[[],[]]],ce=!1;oe.each(function(_e,Ee){if(_e.hidden){w.select(this).selectAll("path,g").remove();return}_e.pointNumber=_e.i,_e.curveNumber=ae.index,be[_e.pxmid[1]<0?0:1][_e.pxmid[0]<0?0:1].push(_e);var Ze=se.cx,Ge=se.cy,Fe=w.select(this),Re=Fe.selectAll("path.surface").data([_e]);if(Re.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),Fe.call(x,te,q),ae.pull){var We=+d.castOption(ae.pull,_e.pts)||0;We>0&&(Ze+=We*_e.pxmid[0],Ge+=We*_e.pxmid[1])}_e.cxFinal=Ze,_e.cyFinal=Ge;function xt(Lt,Ye,ot,Ve){var Ae=Ve*(Ye[0]-Lt[0]),He=Ve*(Ye[1]-Lt[1]);return"a"+Ve*se.r+","+Ve*se.r+" 0 "+_e.largeArc+(ot?" 1 ":" 0 ")+Ae+","+He}var Nt=ae.hole;if(_e.v===se.vTotal){var tr="M"+(Ze+_e.px0[0])+","+(Ge+_e.px0[1])+xt(_e.px0,_e.pxmid,!0,1)+xt(_e.pxmid,_e.px0,!0,1)+"Z";Nt?Re.attr("d","M"+(Ze+Nt*_e.px0[0])+","+(Ge+Nt*_e.px0[1])+xt(_e.px0,_e.pxmid,!1,Nt)+xt(_e.pxmid,_e.px0,!1,Nt)+"Z"+tr):Re.attr("d",tr)}else{var Vt=xt(_e.px0,_e.px1,!0,1);if(Nt){var Pt=1-Nt;Re.attr("d","M"+(Ze+Nt*_e.px1[0])+","+(Ge+Nt*_e.px1[1])+xt(_e.px1,_e.px0,!1,Nt)+"l"+Pt*_e.px0[0]+","+Pt*_e.px0[1]+Vt+"Z")}else Re.attr("d","M"+Ze+","+Ge+"l"+_e.px0[0]+","+_e.px0[1]+Vt+"Z")}ue(te,_e,se);var $t=d.castOption(ae.textposition,_e.pts),Ut=Fe.selectAll("g.slicetext").data(_e.text&&$t!=="none"?[0]:[]);Ut.enter().append("g").classed("slicetext",!0),Ut.exit().remove(),Ut.each(function(){var Lt=a.ensureSingle(w.select(this),"text","",function(St){St.attr("data-notex",1)}),Ye=a.ensureUniformFontSize(te,$t==="outside"?u(ae,_e,ee.font):A(ae,_e,ee.font));Lt.text(_e.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Ye).call(t.convertToTspans,te);var ot=e.bBox(Lt.node()),Ve;if($t==="outside")Ve=I(ot,_e);else if(Ve=g(ot,_e,se),$t==="auto"&&Ve.scale<1){var Ae=a.ensureUniformFontSize(te,ae.outsidetextfont);Lt.call(e.font,Ae),ot=e.bBox(Lt.node()),Ve=I(ot,_e)}var He=Ve.textPosAngle,Je=He===void 0?_e.pxmid:re(se.r,He);if(Ve.targetX=Ze+Je[0]*Ve.rCenter+(Ve.x||0),Ve.targetY=Ge+Je[1]*Ve.rCenter+(Ve.y||0),K(Ve,ot),Ve.outside){var tt=Ve.targetY;_e.yLabelMin=tt-ot.height/2,_e.yLabelMid=tt,_e.yLabelMax=tt+ot.height/2,_e.labelExtraX=0,_e.labelExtraY=0,ce=!0}Ve.fontSize=Ye.size,i(ae.type,Ve,ee),q[Ee].transform=Ve,a.setTransormAndDisplay(Lt,Ve)})});var de=w.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(de.enter().append("g").classed("titletext",!0),de.exit().remove(),de.each(function(){var _e=a.ensureSingle(w.select(this),"text","",function(Ge){Ge.attr("data-notex",1)}),Ee=ae.title.text;ae._meta&&(Ee=a.templateString(Ee,ae._meta)),_e.text(Ee).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(t.convertToTspans,te);var Ze;ae.title.position==="middle center"?Ze=D(se):Ze=R(se,ne),_e.attr("transform",r(Ze.x,Ze.y)+n(Math.min(1,Ze.scale))+r(Ze.tx,Ze.ty))}),ce&&G(be,ae),l(oe,ae),ce&&ae.automargin){var ye=e.bBox(ie.node()),ge=ae.domain,me=ne.w*(ge.x[1]-ge.x[0]),Me=ne.h*(ge.y[1]-ge.y[0]),Le=(.5*me-se.r)/ne.w,Oe=(.5*Me-se.r)/ne.h;f.autoMargin(te,"pie."+ae.uid+".automargin",{xl:ge.x[0]-Le,xr:ge.x[1]+Le,yb:ge.y[0]-Oe,yt:ge.y[1]+Oe,l:Math.max(se.cx-se.r-ye.left,0),r:Math.max(ye.right-(se.cx+se.r),0),b:Math.max(ye.bottom-(se.cy+se.r),0),t:Math.max(se.cy-se.r-ye.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var q=w.select(this);q.attr("dy")&&q.attr("dy",q.attr("dy"))})},0)}function l(te,Y){te.each(function(V){var ee=w.select(this);if(!V.labelExtraX&&!V.labelExtraY){ee.select("path.textline").remove();return}var ne=ee.select("g.slicetext text");V.transform.targetX+=V.labelExtraX,V.transform.targetY+=V.labelExtraY,a.setTransormAndDisplay(ne,V.transform);var Z=V.cxFinal+V.pxmid[0],q=V.cyFinal+V.pxmid[1],ie="M"+Z+","+q,se=(V.yLabelMax-V.yLabelMin)*(V.pxmid[0]<0?-1:1)/4;if(V.labelExtraX){var ae=V.labelExtraX*V.pxmid[1]/V.pxmid[0],oe=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);Math.abs(ae)>Math.abs(oe)?ie+="l"+oe*V.pxmid[0]/V.pxmid[1]+","+oe+"H"+(Z+V.labelExtraX+se):ie+="l"+V.labelExtraX+","+ae+"v"+(oe-ae)+"h"+se}else ie+="V"+(V.yLabelMid+V.labelExtraY)+"h"+se;a.ensureSingle(ee,"path","textline").call(T.stroke,Y.outsidetextfont.color).attr({"stroke-width":Math.min(2,Y.outsidetextfont.size/8),d:ie,fill:"none"})})}function x(te,Y,V){var ee=V[0],ne=ee.cx,Z=ee.cy,q=ee.trace,ie=q.type==="funnelarea";"_hasHoverLabel"in q||(q._hasHoverLabel=!1),"_hasHoverEvent"in q||(q._hasHoverEvent=!1),te.on("mouseover",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index];if(!(Y._dragging||ae.hovermode===!1)){var be=oe.hoverinfo;if(Array.isArray(be)&&(be=M.castHoverinfo({hoverinfo:[d.castOption(be,se.pts)],_module:q._module},ae,0)),be==="all"&&(be="label+text+value+percent+name"),oe.hovertemplate||be!=="none"&&be!=="skip"&&be){var ce=se.rInscribed||0,de=ne+se.pxmid[0]*(1-ce),ye=Z+se.pxmid[1]*(1-ce),ge=ae.separators,me=[];if(be&&be.indexOf("label")!==-1&&me.push(se.label),se.text=d.castOption(oe.hovertext||oe.text,se.pts),be&&be.indexOf("text")!==-1){var Me=se.text;a.isValidTextValue(Me)&&me.push(Me)}se.value=se.v,se.valueLabel=d.formatPieValue(se.v,ge),be&&be.indexOf("value")!==-1&&me.push(se.valueLabel),se.percent=se.v/ee.vTotal,se.percentLabel=d.formatPiePercent(se.percent,ge),be&&be.indexOf("percent")!==-1&&me.push(se.percentLabel);var Le=oe.hoverlabel,Oe=Le.font,_e=[];M.loneHover({trace:q,x0:de-ce*ee.r,x1:de+ce*ee.r,y:ye,_x0:ie?ne+se.TL[0]:de-ce*ee.r,_x1:ie?ne+se.TR[0]:de+ce*ee.r,_y0:ie?Z+se.TL[1]:ye-ce*ee.r,_y1:ie?Z+se.BL[1]:ye+ce*ee.r,text:me.join("<br>"),name:oe.hovertemplate||be.indexOf("name")!==-1?oe.name:void 0,idealAlign:se.pxmid[0]<0?"left":"right",color:d.castOption(Le.bgcolor,se.pts)||se.color,borderColor:d.castOption(Le.bordercolor,se.pts),fontFamily:d.castOption(Oe.family,se.pts),fontSize:d.castOption(Oe.size,se.pts),fontColor:d.castOption(Oe.color,se.pts),nameLength:d.castOption(Le.namelength,se.pts),textAlign:d.castOption(Le.align,se.pts),hovertemplate:d.castOption(oe.hovertemplate,se.pts),hovertemplateLabels:se,eventData:[p(se,oe)]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:Y,inOut_bbox:_e}),se.bbox=_e[0],q._hasHoverLabel=!0}q._hasHoverEvent=!0,Y.emit("plotly_hover",{points:[p(se,oe)],event:w.event})}}),te.on("mouseout",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index],be=w.select(this).datum();q._hasHoverEvent&&(se.originalEvent=w.event,Y.emit("plotly_unhover",{points:[p(be,oe)],event:w.event}),q._hasHoverEvent=!1),q._hasHoverLabel&&(M.loneUnhover(ae._hoverlayer.node()),q._hasHoverLabel=!1)}),te.on("click",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index];Y._dragging||ae.hovermode===!1||(Y._hoverdata=[p(se,oe)],M.click(Y,w.event))})}function u(te,Y,V){var ee=d.castOption(te.outsidetextfont.color,Y.pts)||d.castOption(te.textfont.color,Y.pts)||V.color,ne=d.castOption(te.outsidetextfont.family,Y.pts)||d.castOption(te.textfont.family,Y.pts)||V.family,Z=d.castOption(te.outsidetextfont.size,Y.pts)||d.castOption(te.textfont.size,Y.pts)||V.size;return{color:ee,family:ne,size:Z}}function A(te,Y,V){var ee=d.castOption(te.insidetextfont.color,Y.pts);!ee&&te._input.textfont&&(ee=d.castOption(te._input.textfont.color,Y.pts));var ne=d.castOption(te.insidetextfont.family,Y.pts)||d.castOption(te.textfont.family,Y.pts)||V.family,Z=d.castOption(te.insidetextfont.size,Y.pts)||d.castOption(te.textfont.size,Y.pts)||V.size;return{color:ee||T.contrast(Y.color),family:ne,size:Z}}function _(te,Y){for(var V,ee,ne=0;ne<te.length;ne++)if(V=te[ne][0],ee=V.trace,ee.title.text){var Z=ee.title.text;ee._meta&&(Z=a.templateString(Z,ee._meta));var q=e.tester.append("text").attr("data-notex",1).text(Z).call(e.font,ee.title.font).call(t.convertToTspans,Y),ie=e.bBox(q.node(),!0);V.titleBox={width:ie.width,height:ie.height},q.remove()}}function g(te,Y,V){var ee=V.r||Y.rpx1,ne=Y.rInscribed,Z=Y.startangle===Y.stopangle;if(Z)return{rCenter:1-ne,scale:0,rotate:0,textPosAngle:0};var q=Y.ring,ie=q===1&&Math.abs(Y.startangle-Y.stopangle)===Math.PI*2,se=Y.halfangle,ae=Y.midangle,oe=V.trace.insidetextorientation,be=oe==="horizontal",ce=oe==="tangential",de=oe==="radial",ye=oe==="auto",ge=[],me;if(!ye){var Me=function(Fe,Re){if(b(Y,Fe)){var We=Math.abs(Fe-Y.startangle),xt=Math.abs(Fe-Y.stopangle),Nt=We<xt?We:xt;Re==="tan"?me=C(te,ee,q,Nt,0):me=v(te,ee,q,Nt,Math.PI/2),me.textPosAngle=Fe,ge.push(me)}},Le;if(be||ce){for(Le=4;Le>=-4;Le-=2)Me(Math.PI*Le,"tan");for(Le=4;Le>=-4;Le-=2)Me(Math.PI*(Le+1),"tan")}if(be||de){for(Le=4;Le>=-4;Le-=2)Me(Math.PI*(Le+1.5),"rad");for(Le=4;Le>=-4;Le-=2)Me(Math.PI*(Le+.5),"rad")}}if(ie||ye||be){var Oe=Math.sqrt(te.width*te.width+te.height*te.height);if(me={scale:ne*ee*2/Oe,rCenter:1-ne,rotate:0},me.textPosAngle=(Y.startangle+Y.stopangle)/2,me.scale>=1)return me;ge.push(me)}(ye||de)&&(me=v(te,ee,q,se,ae),me.textPosAngle=(Y.startangle+Y.stopangle)/2,ge.push(me)),(ye||ce)&&(me=C(te,ee,q,se,ae),me.textPosAngle=(Y.startangle+Y.stopangle)/2,ge.push(me));for(var _e=0,Ee=0,Ze=0;Ze<ge.length;Ze++){var Ge=ge[Ze].scale;if(Ee<Ge&&(Ee=Ge,_e=Ze),!ye&&Ee>=1)break}return ge[_e]}function b(te,Y){var V=te.startangle,ee=te.stopangle;return V>Y&&Y>ee||V<Y&&Y<ee}function v(te,Y,V,ee,ne){Y=Math.max(0,Y-2*y);var Z=te.width/te.height,q=E(Z,ee,Y,V);return{scale:q*2/te.height,rCenter:S(Z,q/Y),rotate:k(ne)}}function C(te,Y,V,ee,ne){Y=Math.max(0,Y-2*y);var Z=te.height/te.width,q=E(Z,ee,Y,V);return{scale:q*2/te.width,rCenter:S(Z,q/Y),rotate:k(ne+Math.PI/2)}}function S(te,Y){return Math.cos(Y)-te*Y}function k(te){return(180/Math.PI*te+720)%180-90}function E(te,Y,V,ee){var ne=te+1/(2*Math.tan(Y));return V*Math.min(1/(Math.sqrt(ne*ne+.5)+ne),ee/(Math.sqrt(te*te+ee/2)+te))}function F(te,Y){return te.v===Y.vTotal&&!Y.trace.hole?1:Math.min(1/(1+1/Math.sin(te.halfangle)),te.ring/2)}function I(te,Y){var V=Y.pxmid[0],ee=Y.pxmid[1],ne=te.width/2,Z=te.height/2;return V<0&&(ne*=-1),ee<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:ne+Math.abs(Z)*(ne>0?1:-1)/2,y:Z/(1+V*V/(ee*ee)),outside:!0}}function D(te){var Y=Math.sqrt(te.titleBox.width*te.titleBox.width+te.titleBox.height*te.titleBox.height);return{x:te.cx,y:te.cy,scale:te.trace.hole*te.r*2/Y,tx:0,ty:-te.titleBox.height/2+te.trace.title.font.size}}function R(te,Y){var V=1,ee=1,ne,Z=te.trace,q={x:te.cx,y:te.cy},ie={tx:0,ty:0};ie.ty+=Z.title.font.size,ne=B(Z),Z.title.position.indexOf("top")!==-1?(q.y-=(1+ne)*te.r,ie.ty-=te.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(q.y+=(1+ne)*te.r);var se=O(te.r,te.trace.aspectratio),ae=Y.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(ae=ae+se,q.x-=(1+ne)*se,ie.tx+=te.titleBox.width/2):Z.title.position.indexOf("center")!==-1?ae*=2:Z.title.position.indexOf("right")!==-1&&(ae=ae+se,q.x+=(1+ne)*se,ie.tx-=te.titleBox.width/2),V=ae/te.titleBox.width,ee=z(te,Y)/te.titleBox.height,{x:q.x,y:q.y,scale:Math.min(V,ee),tx:ie.tx,ty:ie.ty}}function O(te,Y){return te/(Y===void 0?1:Y)}function z(te,Y){var V=te.trace,ee=Y.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(te.titleBox.height,ee/2)}function B(te){var Y=te.pull;if(!Y)return 0;var V;if(Array.isArray(Y))for(Y=0,V=0;V<te.pull.length;V++)te.pull[V]>Y&&(Y=te.pull[V]);return Y}function G(te,Y){var V,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye;function ge(Oe,_e){return Oe.pxmid[1]-_e.pxmid[1]}function me(Oe,_e){return _e.pxmid[1]-Oe.pxmid[1]}function Me(Oe,_e){_e||(_e={});var Ee=_e.labelExtraY+(ee?_e.yLabelMax:_e.yLabelMin),Ze=ee?Oe.yLabelMin:Oe.yLabelMax,Ge=ee?Oe.yLabelMax:Oe.yLabelMin,Fe=Oe.cyFinal+q(Oe.px0[1],Oe.px1[1]),Re=Ee-Ze,We,xt,Nt,tr,Vt,Pt;if(Re*se>0&&(Oe.labelExtraY=Re),!!Array.isArray(Y.pull))for(xt=0;xt<be.length;xt++)Nt=be[xt],!(Nt===Oe||(d.castOption(Y.pull,Oe.pts)||0)>=(d.castOption(Y.pull,Nt.pts)||0))&&((Oe.pxmid[1]-Nt.pxmid[1])*se>0?(tr=Nt.cyFinal+q(Nt.px0[1],Nt.px1[1]),Re=tr-Ze-Oe.labelExtraY,Re*se>0&&(Oe.labelExtraY+=Re)):(Ge+Oe.labelExtraY-Fe)*se>0&&(We=3*ie*Math.abs(xt-be.indexOf(Oe)),Vt=Nt.cxFinal+Z(Nt.px0[0],Nt.px1[0]),Pt=Vt+We-(Oe.cxFinal+Oe.pxmid[0])-Oe.labelExtraX,Pt*ie>0&&(Oe.labelExtraX+=Pt)))}for(ee=0;ee<2;ee++)for(ne=ee?ge:me,q=ee?Math.max:Math.min,se=ee?1:-1,V=0;V<2;V++){for(Z=V?Math.max:Math.min,ie=V?1:-1,ae=te[ee][V],ae.sort(ne),oe=te[1-ee][V],be=oe.concat(ae),de=[],ce=0;ce<ae.length;ce++)ae[ce].yLabelMid!==void 0&&de.push(ae[ce]);for(ye=!1,ce=0;ee&&ce<oe.length;ce++)if(oe[ce].yLabelMid!==void 0){ye=oe[ce];break}for(ce=0;ce<de.length;ce++){var Le=ce&&de[ce-1];ye&&!ce&&(Le=ye),Me(de[ce],Le)}}}function Q(te,Y){for(var V=[],ee=0;ee<te.length;ee++){var ne=te[ee][0],Z=ne.trace,q=Z.domain,ie=Y.w*(q.x[1]-q.x[0]),se=Y.h*(q.y[1]-q.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(se-=z(ne,Y));var ae=ie/2,oe=se/2;Z.type==="funnelarea"&&!Z.scalegroup&&(oe/=Z.aspectratio),ne.r=Math.min(ae,oe)/(1+B(Z)),ne.cx=Y.l+Y.w*(Z.domain.x[1]+Z.domain.x[0])/2,ne.cy=Y.t+Y.h*(1-Z.domain.y[0])-se/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(ne.cy-=z(ne,Y)),Z.scalegroup&&V.indexOf(Z.scalegroup)===-1&&V.push(Z.scalegroup)}X(te,V)}function X(te,Y){for(var V,ee,ne,Z=0;Z<Y.length;Z++){var q=1/0,ie=Y[Z];for(ee=0;ee<te.length;ee++)if(V=te[ee][0],ne=V.trace,ne.scalegroup===ie){var se;if(ne.type==="pie")se=V.r*V.r;else if(ne.type==="funnelarea"){var ae,oe;ne.aspectratio>1?(ae=V.r,oe=ae/ne.aspectratio):(oe=V.r,ae=oe*ne.aspectratio),ae*=(1+ne.baseratio)/2,se=ae*oe}q=Math.min(q,se/V.vTotal)}for(ee=0;ee<te.length;ee++)if(V=te[ee][0],ne=V.trace,ne.scalegroup===ie){var be=q*V.vTotal;ne.type==="funnelarea"&&(be/=(1+ne.baseratio)/2,be/=ne.aspectratio),V.r=Math.sqrt(be)}}}function j(te){var Y=te[0],V=Y.r,ee=Y.trace,ne=d.getRotationAngle(ee.rotation),Z=2*Math.PI/Y.vTotal,q="px0",ie="px1",se,ae,oe;if(ee.direction==="counterclockwise"){for(se=0;se<te.length&&te[se].hidden;se++);if(se===te.length)return;ne+=Z*te[se].v,Z*=-1,q="px1",ie="px0"}for(oe=re(V,ne),se=0;se<te.length;se++)ae=te[se],!ae.hidden&&(ae[q]=oe,ae.startangle=ne,ne+=Z*ae.v/2,ae.pxmid=re(V,ne),ae.midangle=ne,ne+=Z*ae.v/2,oe=re(V,ne),ae.stopangle=ne,ae[ie]=oe,ae.largeArc=ae.v>Y.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/Y.vTotal,.5),ae.ring=1-ee.hole,ae.rInscribed=F(ae,Y))}function re(te,Y){return[te*Math.sin(Y),-te*Math.cos(Y)]}function ue(te,Y,V){var ee=te._fullLayout,ne=V.trace,Z=ne.texttemplate,q=ne.textinfo;if(!Z&&q&&q!=="none"){var ie=q.split("+"),se=function(_e){return ie.indexOf(_e)!==-1},ae=se("label"),oe=se("text"),be=se("value"),ce=se("percent"),de=ee.separators,ye;if(ye=ae?[Y.label]:[],oe){var ge=d.getFirstFilled(ne.text,Y.pts);c(ge)&&ye.push(ge)}be&&ye.push(d.formatPieValue(Y.v,de)),ce&&ye.push(d.formatPiePercent(Y.v/V.vTotal,de)),Y.text=ye.join("<br>")}function me(_e){return{label:_e.label,value:_e.v,valueLabel:d.formatPieValue(_e.v,ee.separators),percent:_e.v/V.vTotal,percentLabel:d.formatPiePercent(_e.v/V.vTotal,ee.separators),color:_e.color,text:_e.text,customdata:a.castOption(ne,_e.i,"customdata")}}if(Z){var Me=a.castOption(ne,Y.i,"texttemplate");if(!Me)Y.text="";else{var Le=me(Y),Oe=d.getFirstFilled(ne.text,Y.pts);(c(Oe)||Oe==="")&&(Le.text=Oe),Y.text=a.texttemplateString(Me,Le,te._fullLayout._d3locale,Le,ne._meta||{})}}}function K(te,Y){var V=te.rotate*Math.PI/180,ee=Math.cos(V),ne=Math.sin(V),Z=(Y.left+Y.right)/2,q=(Y.top+Y.bottom)/2;te.textX=Z*ee-q*ne,te.textY=Z*ne+q*ee,te.noCenter=!0}U.exports={plot:m,formatSliceLabel:ue,transformInsideText:g,determineInsideTextFont:A,positionTitleOutside:R,prerenderTitles:_,layoutAreas:Q,attachFxHandlers:x,computeTransform:K}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(o,U,H){var w=o("@plotly/d3"),f=o("./style_one"),M=o("../bar/uniform_text").resizeText;U.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");M(e,a,"pie"),a.each(function(n){var r=n[0],t=r.trace,h=w.select(this);h.style({opacity:t.opacity}),h.selectAll("path.surface").each(function(i){w.select(this).call(f,i,t)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(o,U,H){var w=o("../../components/color"),f=o("./helpers").castOption;U.exports=function(T,e,a){var n=a.marker.line,r=f(n.color,e.pts)||w.defaultLine,t=f(n.width,e.pts)||0;T.style("stroke-width",t).call(w.fill,e.color).call(w.stroke,r)}},{"../../components/color":367,"./helpers":915}],922:[function(o,U,H){var w=o("../scatter/attributes");U.exports={x:w.x,y:w.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:w.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(o,U,H){var w=o("../../../stackgl_modules").gl_pointcloud2d,f=o("../../lib/str2rgbarray"),M=o("../../plots/cartesian/autorange").findExtremes,T=o("../scatter/get_trace_color");function e(r,t){this.scene=r,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=w(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(r){var t=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},a.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=T(r,{})},a.updateFast=function(r){var t=this.xData=this.pickXData=r.x,h=this.yData=this.pickYData=r.y,i=this.pickXYData=r.xy,s=r.xbounds&&r.ybounds,y=r.indices,d,p,c,m=this.bounds,l,x,u;if(i){if(c=i,d=i.length>>>1,s)m[0]=r.xbounds[0],m[2]=r.xbounds[1],m[1]=r.ybounds[0],m[3]=r.ybounds[1];else for(u=0;u<d;u++)l=c[u*2],x=c[u*2+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);if(y)p=y;else for(p=new Int32Array(d),u=0;u<d;u++)p[u]=u}else for(d=t.length,c=new Float32Array(2*d),p=new Int32Array(d),u=0;u<d;u++)l=t[u],x=h[u],p[u]=u,c[u*2]=l,c[u*2+1]=x,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);this.idToIndex=p,this.pointcloudOptions.idToIndex=p,this.pointcloudOptions.positions=c;var A=f(r.marker.color),_=f(r.marker.border.color),g=r.opacity*r.marker.opacity;A[3]*=g,this.pointcloudOptions.color=A;var b=r.marker.blend;if(b===null){var v=100;b=t.length<v||h.length<v}this.pointcloudOptions.blend=b,_[3]*=g,this.pointcloudOptions.borderColor=_;var C=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,E=this.scene.yaxis,F=S/2||.5;r._extremes[k._id]=M(k,[m[0],m[2]],{ppad:F}),r._extremes[E._id]=M(E,[m[1],m[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function n(r,t){var h=new e(r,t.uid);return h.update(t),h}U.exports=n},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(o,U,H){var w=o("../../lib"),f=o("./attributes");U.exports=function(T,e,a){function n(r,t){return w.coerce(T,e,f,r,t)}n("x"),n("y"),n("xbounds"),n("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),n("text"),n("marker.color",a),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",a),n("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("../scatter3d/calc"),plot:o("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:o("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(o,U,H){var w=o("../../plots/font_attributes"),f=o("../../plots/attributes"),M=o("../../components/color/attributes"),T=o("../../components/fx/attributes"),e=o("../../plots/domain").attributes,a=o("../../plots/template_attributes").hovertemplateAttrs,n=o("../../components/colorscale/attributes"),r=o("../../plot_api/plot_template").templatedArray,t=o("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=o("../../lib/extend").extendFlat,i=o("../../plot_api/edit_types").overrideAll,s=U.exports=i({hoverinfo:h({},f.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:w({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:h(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");s.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(o,U,H){var w=o("../../plot_api/edit_types").overrideAll,f=o("../../plots/get_data").getModuleCalcData,M=o("./plot"),T=o("../../components/fx/layout_attributes"),e=o("../../lib/setcursor"),a=o("../../components/dragelement"),n=o("../../components/selections").prepSelect,r=o("../../lib"),t=o("../../registry"),h="sankey";H.name=h,H.baseLayoutAttrOverrides=w({hoverlabel:T.hoverlabel},"plot","nested"),H.plot=function(s){var y=f(s.calcdata,h)[0];M(s,y),H.updateFx(s)},H.clean=function(s,y,d,p){var c=p._has&&p._has(h),m=y._has&&y._has(h);c&&!m&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},H.updateFx=function(s){for(var y=0;y<s._fullData.length;y++)i(s,y)};function i(s,y){var d=s._fullData[y],p=s._fullLayout,c=p.dragmode,m=p.dragmode==="pan"?"move":"crosshair",l=d._bgRect;if(!!l&&!(c==="pan"||c==="zoom")){e(l,m);var x={_id:"x",c2p:r.identity,_offset:d._sankey.translateX,_length:d._sankey.width},u={_id:"y",c2p:r.identity,_offset:d._sankey.translateY,_length:d._sankey.height},A={gd:s,element:l.node(),plotinfo:{id:y,xaxis:x,yaxis:u,fillRangeItems:r.noop},subplot:y,xaxes:[x],yaxes:[u],doneFnCompleted:function(_){var g=s._fullData[y],b,v=g.node.groups.slice(),C=[];function S(I){for(var D=g._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var k=0;k<_.length;k++){var E=S(_[k].pointNumber);if(!!E)if(E.group){for(var F=0;F<E.childrenNodes.length;F++)C.push(E.childrenNodes[F].pointNumber);v[E.pointNumber-g.node._count]=!1}else C.push(E.pointNumber)}b=v.filter(Boolean).concat([C]),t.call("_guiRestyle",s,{"node.groups":[b]},y)}};A.prepFn=function(_,g,b){n(_,g,b,A,c)},a.init(A)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(o,U,H){var w=o("strongly-connected-components"),f=o("../../lib"),M=o("../../lib/gup").wrap,T=f.isArrayOrTypedArray,e=f.isIndex,a=o("../../components/colorscale");function n(t){var h=t.node,i=t.link,s=[],y=T(i.color),d=T(i.customdata),p={},c={},m=i.colorscales.length,l;for(l=0;l<m;l++){var x=i.colorscales[l],u=a.extractScale(x,{cLetter:"c"}),A=a.makeColorScaleFunc(u);c[x.label]=A}var _=0;for(l=0;l<i.value.length;l++)i.source[l]>_&&(_=i.source[l]),i.target[l]>_&&(_=i.target[l]);var g=_+1;t.node._count=g;var b,v=t.node.groups,C={};for(l=0;l<v.length;l++){var S=v[l];for(b=0;b<S.length;b++){var k=S[b],E=g+l;C.hasOwnProperty(k)?f.warn("Node "+k+" is already part of a group."):C[k]=E}}var F={source:[],target:[]};for(l=0;l<i.value.length;l++){var I=i.value[l],D=i.source[l],R=i.target[l];if(!!(I>0&&e(D,g)&&e(R,g))&&!(C.hasOwnProperty(D)&&C.hasOwnProperty(R)&&C[D]===C[R])){C.hasOwnProperty(R)&&(R=C[R]),C.hasOwnProperty(D)&&(D=C[D]),D=+D,R=+R,p[D]=p[R]=!0;var O="";i.label&&i.label[l]&&(O=i.label[l]);var z=null;O&&c.hasOwnProperty(O)&&(z=c[O]),s.push({pointNumber:l,label:O,color:y?i.color[l]:i.color,customdata:d?i.customdata[l]:i.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var B=g+v.length,G=T(h.color),Q=T(h.customdata),X=[];for(l=0;l<B;l++)if(!!p[l]){var j=h.label[l];X.push({group:l>g-1,childrenNodes:[],pointNumber:l,label:j,color:G?h.color[l]:h.color,customdata:Q?h.customdata[l]:h.customdata})}var re=!1;return r(B,F.source,F.target)&&(re=!0),{circular:re,links:s,nodes:X,groups:v,groupLookup:C}}function r(t,h,i){for(var s=f.init2dArray(t,0),y=0;y<Math.min(h.length,i.length);y++)if(f.isIndex(h[y],t)&&f.isIndex(i[y],t)){if(h[y]===i[y])return!0;s[h[y]].push(i[y])}var d=w(s);return d.components.some(function(p){return p.length>1})}U.exports=function(h,i){var s=n(i);return M({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(o,U,H){U.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../components/color"),T=o("tinycolor2"),e=o("../../plots/domain").defaults,a=o("../../components/fx/hoverlabel_defaults"),n=o("../../plot_api/plot_template"),r=o("../../plots/array_container_defaults");U.exports=function(i,s,y,d){function p(S,k){return w.coerce(i,s,f,S,k)}var c=w.extendDeep(d.hoverlabel,i.hoverlabel),m=i.node,l=n.newContainer(s,"node");function x(S,k){return w.coerce(m,l,f.node,S,k)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",i.hoverinfo),a(m,l,x,c),x("hovertemplate");var u=d.colorway,A=function(S){return u[S%u.length]};x("color",l.label.map(function(S,k){return M.addOpacity(A(k),.8)})),x("customdata");var _=i.link||{},g=n.newContainer(s,"link");function b(S,k){return w.coerce(_,g,f.link,S,k)}b("label"),b("arrowlen"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",i.hoverinfo),a(_,g,b,c),b("hovertemplate");var v=T(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",w.repeat(v,g.value.length)),b("customdata"),r(_,g,{name:"colorscales",handleItemDefaults:t}),e(s,d,p),p("orientation"),p("valueformat"),p("valuesuffix");var C;l.x.length&&l.y.length&&(C="freeform"),p("arrangement",C),w.coerceFont(p,"textfont",w.extendFlat({},d.font)),s._length=null};function t(h,i){function s(y,d){return w.coerce(h,i,f.link.colorscales,y,d)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot"),moduleType:"trace",name:"sankey",basePlotModule:o("./base_plot"),selectPoints:o("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=f.numberFormat,T=o("./render"),e=o("../../components/fx"),a=o("../../components/color"),n=o("./constants").cn,r=f._;function t(u){return u!==""}function h(u,A){return u.filter(function(_){return _.key===A.traceId})}function i(u,A){w.select(u).select("path").style("fill-opacity",A),w.select(u).select("rect").style("fill-opacity",A)}function s(u){w.select(u).select("text.name").style("fill","black")}function y(u){return function(A){return u.node.sourceLinks.indexOf(A.link)!==-1||u.node.targetLinks.indexOf(A.link)!==-1}}function d(u){return function(A){return A.node.sourceLinks.indexOf(u.link)!==-1||A.node.targetLinks.indexOf(u.link)!==-1}}function p(u,A,_){A&&_&&h(_,A).selectAll("."+n.sankeyLink).filter(y(A)).call(m.bind(0,A,_,!1))}function c(u,A,_){A&&_&&h(_,A).selectAll("."+n.sankeyLink).filter(y(A)).call(l.bind(0,A,_,!1))}function m(u,A,_,g){var b=g.datum().link.label;g.style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),b&&h(A,u).selectAll("."+n.sankeyLink).filter(function(v){return v.link.label===b}).style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),_&&h(A,u).selectAll("."+n.sankeyNode).filter(d(u)).call(p)}function l(u,A,_,g){var b=g.datum().link.label;g.style("fill-opacity",function(v){return v.tinyColorAlpha}),b&&h(A,u).selectAll("."+n.sankeyLink).filter(function(v){return v.link.label===b}).style("fill-opacity",function(v){return v.tinyColorAlpha}),_&&h(A,u).selectAll(n.sankeyNode).filter(d(u)).call(c)}function x(u,A){var _=u.hoverlabel||{},g=f.nestedProperty(_,A).get();return Array.isArray(g)?!1:g}U.exports=function(A,_){for(var g=A._fullLayout,b=g._paper,v=g._size,C=0;C<A._fullData.length;C++)if(!!A._fullData[C].visible&&A._fullData[C].type===n.sankey&&!A._fullData[C]._viewInitial){var S=A._fullData[C].node;A._fullData[C]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(re,ue){var K=ue.link;K.originalEvent=w.event,A._hoverdata=[K],e.click(A,{target:!0})},E=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(m.bind(0,ue,K,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,A.emit("plotly_hover",{event:w.event,points:[ue.link]})))},F=r(A,"source:")+" ",I=r(A,"target:")+" ",D=r(A,"concentration:")+" ",R=r(A,"incoming flow count:")+" ",O=r(A,"outgoing flow count:")+" ",z=function(re,ue){if(A._fullLayout.hovermode===!1)return;var K=ue.link.trace.link;if(K.hoverinfo==="none"||K.hoverinfo==="skip")return;var te=[];function Y(se){var ae,oe;se.circular?(ae=(se.circularPathData.leftInnerExtent+se.circularPathData.rightInnerExtent)/2,oe=se.circularPathData.verticalFullExtent):(ae=(se.source.x1+se.target.x0)/2,oe=(se.y0+se.y1)/2);var be=[ae,oe];return se.trace.orientation==="v"&&be.reverse(),be[0]+=ue.parent.translateX,be[1]+=ue.parent.translateY,be}for(var V=0,ee=0;ee<ue.flow.links.length;ee++){var ne=ue.flow.links[ee];if(!(A._fullLayout.hovermode==="closest"&&ue.link.pointNumber!==ne.pointNumber)){ue.link.pointNumber===ne.pointNumber&&(V=ee),ne.fullData=ne.trace,K=ue.link.trace.link;var Z=Y(ne),q={valueLabel:M(ue.valueFormat)(ne.value)+ue.valueSuffix};te.push({x:Z[0],y:Z[1],name:q.valueLabel,text:[ne.label||"",F+ne.source.label,I+ne.target.label,ne.concentrationscale?D+M("%0.2f")(ne.flow.labelConcentration):""].filter(t).join("<br>"),color:x(K,"bgcolor")||a.addOpacity(ne.color,1),borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:w.event.x<Z[0]?"right":"left",hovertemplate:K.hovertemplate,hovertemplateLabels:q,eventData:[ne]})}}var ie=e.loneHover(te,{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:A,anchorIndex:V});ie.each(function(){var se=this;ue.link.concentrationscale||i(se,.65),s(se)})},B=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(l.bind(0,ue,K,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,A.emit("plotly_unhover",{event:w.event,points:[ue.link]})),e.loneUnhover(g._hoverlayer.node()))},G=function(re,ue,K){var te=ue.node;te.originalEvent=w.event,A._hoverdata=[te],w.select(re).call(c,ue,K),e.click(A,{target:!0})},Q=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(p,ue,K),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,A.emit("plotly_hover",{event:w.event,points:[ue.node]})))},X=function(re,ue){if(A._fullLayout.hovermode!==!1){var K=ue.node.trace.node;if(!(K.hoverinfo==="none"||K.hoverinfo==="skip")){var te=w.select(re).select("."+n.nodeRect),Y=A._fullLayout._paperdiv.node().getBoundingClientRect(),V=te.node().getBoundingClientRect(),ee=V.left-2-Y.left,ne=V.right+2-Y.left,Z=V.top+V.height/4-Y.top,q={valueLabel:M(ue.valueFormat)(ue.node.value)+ue.valueSuffix};ue.node.fullData=ue.node.trace,A._fullLayout._calcInverseTransform(A);var ie=A._fullLayout._invScaleX,se=A._fullLayout._invScaleY,ae=e.loneHover({x0:ie*ee,x1:ie*ne,y:se*Z,name:M(ue.valueFormat)(ue.node.value)+ue.valueSuffix,text:[ue.node.label,R+ue.node.targetLinks.length,O+ue.node.sourceLinks.length].filter(t).join("<br>"),color:x(K,"bgcolor")||ue.tinyColorHue,borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:"left",hovertemplate:K.hovertemplate,hovertemplateLabels:q,eventData:[ue.node]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:A});i(ae,.85),s(ae)}}},j=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(c,ue,K),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,A.emit("plotly_unhover",{event:w.event,points:[ue.node]})),e.loneUnhover(g._hoverlayer.node()))};T(A,b,_,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:E,follow:z,unhover:B,select:k},nodeEvents:{hover:Q,follow:X,unhover:j,select:G}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(o,U,H){var w=o("d3-force"),f=o("d3-interpolate").interpolateNumber,M=o("@plotly/d3"),T=o("@plotly/d3-sankey"),e=o("@plotly/d3-sankey-circular"),a=o("./constants"),n=o("tinycolor2"),r=o("../../components/color"),t=o("../../components/drawing"),h=o("../../lib"),i=h.strTranslate,s=h.strRotate,y=o("../../lib/gup"),d=y.keyFun,p=y.repeat,c=y.unwrap,m=o("../../lib/svg_text_utils"),l=o("../../registry"),x=o("../../constants/alignment"),u=x.CAP_SHIFT,A=x.LINE_SPACING,_=3;function g(Y,V,ee){var ne=c(V),Z=ne.trace,q=Z.domain,ie=Z.orientation==="h",se=Z.node.pad,ae=Z.node.thickness,oe=Y.width*(q.x[1]-q.x[0]),be=Y.height*(q.y[1]-q.y[0]),ce=ne._nodes,de=ne._links,ye=ne.circular,ge;ye?ge=e.sankeyCircular().circularLinkGap(0):ge=T.sankey(),ge.iterations(a.sankeyIterations).size(ie?[oe,be]:[be,oe]).nodeWidth(ae).nodePadding(se).nodeId(function(Vt){return Vt.pointNumber}).nodes(ce).links(de);var me=ge();ge.nodePadding()<se&&h.warn("node.pad was reduced to ",ge.nodePadding()," to fit within the figure.");var Me,Le,Oe;for(var _e in ne._groupLookup){var Ee=parseInt(ne._groupLookup[_e]),Ze;for(Me=0;Me<me.nodes.length;Me++)if(me.nodes[Me].pointNumber===Ee){Ze=me.nodes[Me];break}if(!!Ze){var Ge={pointNumber:parseInt(_e),x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};me.nodes.unshift(Ge),Ze.childrenNodes.unshift(Ge)}}function Fe(){for(Me=0;Me<me.nodes.length;Me++){var Vt=me.nodes[Me],Pt={},$t,Ut;for(Le=0;Le<Vt.targetLinks.length;Le++)Ut=Vt.targetLinks[Le],$t=Ut.source.pointNumber+":"+Ut.target.pointNumber,Pt.hasOwnProperty($t)||(Pt[$t]=[]),Pt[$t].push(Ut);var Lt=Object.keys(Pt);for(Le=0;Le<Lt.length;Le++){$t=Lt[Le];var Ye=Pt[$t],ot=0,Ve={};for(Oe=0;Oe<Ye.length;Oe++)Ut=Ye[Oe],Ve[Ut.label]||(Ve[Ut.label]=0),Ve[Ut.label]+=Ut.value,ot+=Ut.value;for(Oe=0;Oe<Ye.length;Oe++)Ut=Ye[Oe],Ut.flow={value:ot,labelConcentration:Ve[Ut.label]/ot,concentration:Ut.value/ot,links:Ye},Ut.concentrationscale&&(Ut.color=n(Ut.concentrationscale(Ut.flow.labelConcentration)))}var Ae=0;for(Le=0;Le<Vt.sourceLinks.length;Le++)Ae+=Vt.sourceLinks[Le].value;for(Le=0;Le<Vt.sourceLinks.length;Le++)Ut=Vt.sourceLinks[Le],Ut.concentrationOut=Ut.value/Ae;var He=0;for(Le=0;Le<Vt.targetLinks.length;Le++)He+=Vt.targetLinks[Le].value;for(Le=0;Le<Vt.targetLinks.length;Le++)Ut=Vt.targetLinks[Le],Ut.concenrationIn=Ut.value/He}}Fe();function Re(Vt){Vt.forEach(function(Pt){var $t,Ut,Lt=0,Ye=Pt.length,ot;for(Pt.sort(function(Ve,Ae){return Ve.y0-Ae.y0}),ot=0;ot<Ye;++ot)$t=Pt[ot],$t.y0>=Lt||(Ut=Lt-$t.y0,Ut>1e-6&&($t.y0+=Ut,$t.y1+=Ut)),Lt=$t.y1+se})}function We(Vt){var Pt=Vt.map(function(Ae,He){return{x0:Ae.x0,index:He}}).sort(function(Ae,He){return Ae.x0-He.x0}),$t=[],Ut=-1,Lt,Ye=-1/0,ot;for(Me=0;Me<Pt.length;Me++){var Ve=Vt[Pt[Me].index];Ve.x0>Ye+ae&&(Ut+=1,Lt=Ve.x0),Ye=Ve.x0,$t[Ut]||($t[Ut]=[]),$t[Ut].push(Ve),ot=Lt-Ve.x0,Ve.x0+=ot,Ve.x1+=ot}return $t}if(Z.node.x.length&&Z.node.y.length){for(Me=0;Me<Math.min(Z.node.x.length,Z.node.y.length,me.nodes.length);Me++)if(Z.node.x[Me]&&Z.node.y[Me]){var xt=[Z.node.x[Me]*oe,Z.node.y[Me]*be];me.nodes[Me].x0=xt[0]-ae/2,me.nodes[Me].x1=xt[0]+ae/2;var Nt=me.nodes[Me].y1-me.nodes[Me].y0;me.nodes[Me].y0=xt[1]-Nt/2,me.nodes[Me].y1=xt[1]+Nt/2}if(Z.arrangement==="snap"){ce=me.nodes;var tr=We(ce);Re(tr)}ge.update(me)}return{circular:ye,key:ee,trace:Z,guid:h.randstr(),horizontal:ie,width:oe,height:be,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:q.x[0]*Y.width+Y.margin.l,translateY:Y.height-q.y[1]*Y.height+Y.margin.t,dragParallel:ie?be:oe,dragPerpendicular:ie?oe:be,arrangement:Z.arrangement,sankey:ge,graph:me,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function b(Y,V,ee){var ne=n(V.color),Z=V.source.label+"|"+V.target.label,q=Z+"__"+ee;return V.trace=Y.trace,V.curveNumber=Y.trace.index,{circular:Y.circular,key:q,traceId:Y.key,pointNumber:V.pointNumber,link:V,tinyColorHue:r.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),linkPath:C,linkLineColor:Y.linkLineColor,linkLineWidth:Y.linkLineWidth,linkArrowLength:Y.linkArrowLength,valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,parent:Y,interactionState:Y.interactionState,flow:V.flow}}function v(Y,V){var ee="",ne=Y.width/2,Z=Y.circularPathData;return Y.circularLinkType==="top"?ee="M "+(Z.targetX-V)+" "+(Z.targetY+ne)+" L"+(Z.rightInnerExtent-V)+" "+(Z.targetY+ne)+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightSmallArcRadius+ne)+" 0 0 1 "+(Z.rightFullExtent-ne-V)+" "+(Z.targetY-Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-ne-V)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightLargeArcRadius+ne)+" 0 0 1 "+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent-ne)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent-ne)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftLargeArcRadius+ne)+" 0 0 1 "+(Z.leftFullExtent+ne)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+ne)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftSmallArcRadius+ne)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.sourceY+ne)+"L"+Z.sourceX+" "+(Z.sourceY+ne)+"L"+Z.sourceX+" "+(Z.sourceY-ne)+"L"+Z.leftInnerExtent+" "+(Z.sourceY-ne)+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftSmallArcRadius-ne)+" 0 0 0 "+(Z.leftFullExtent-ne)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-ne)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftLargeArcRadius-ne)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent+ne)+"L"+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent+ne)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightLargeArcRadius-ne)+" 0 0 0 "+(Z.rightFullExtent+ne-V)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+ne-V)+" "+(Z.targetY-Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightSmallArcRadius-ne)+" 0 0 0 "+(Z.rightInnerExtent-V)+" "+(Z.targetY-ne)+"L"+(Z.targetX-V)+" "+(Z.targetY-ne)+(V>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z":ee="M "+(Z.targetX-V)+" "+(Z.targetY-ne)+" L"+(Z.rightInnerExtent-V)+" "+(Z.targetY-ne)+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightSmallArcRadius+ne)+" 0 0 0 "+(Z.rightFullExtent-ne-V)+" "+(Z.targetY+Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-ne-V)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightLargeArcRadius+ne)+" 0 0 0 "+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent+ne)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent+ne)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftLargeArcRadius+ne)+" 0 0 0 "+(Z.leftFullExtent+ne)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+ne)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftSmallArcRadius+ne)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.sourceY-ne)+"L"+Z.sourceX+" "+(Z.sourceY-ne)+"L"+Z.sourceX+" "+(Z.sourceY+ne)+"L"+Z.leftInnerExtent+" "+(Z.sourceY+ne)+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftSmallArcRadius-ne)+" 0 0 1 "+(Z.leftFullExtent-ne)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-ne)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftLargeArcRadius-ne)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent-ne)+"L"+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent-ne)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightLargeArcRadius-ne)+" 0 0 1 "+(Z.rightFullExtent+ne-V)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+ne-V)+" "+(Z.targetY+Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightSmallArcRadius-ne)+" 0 0 1 "+(Z.rightInnerExtent-V)+" "+(Z.targetY+ne)+"L"+(Z.targetX-V)+" "+(Z.targetY+ne)+(V>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z",ee}function C(){var Y=.5;function V(ee){var ne=ee.linkArrowLength;if(ee.link.circular)return v(ee.link,ne);var Z=Math.abs((ee.link.target.x0-ee.link.source.x1)/2);ne>Z&&(ne=Z);var q=ee.link.source.x1,ie=ee.link.target.x0-ne,se=f(q,ie),ae=se(Y),oe=se(1-Y),be=ee.link.y0-ee.link.width/2,ce=ee.link.y0+ee.link.width/2,de=ee.link.y1-ee.link.width/2,ye=ee.link.y1+ee.link.width/2,ge="M"+q+","+be,me="C"+ae+","+be+" "+oe+","+de+" "+ie+","+de,Me="C"+oe+","+ye+" "+ae+","+ce+" "+q+","+ce,Le=ne>0?"L"+(ie+ne)+","+(de+ee.link.width/2):"";return Le+="L"+ie+","+ye,ge+me+Le+Me+"Z"}return V}function S(Y,V){var ee=n(V.color),ne=a.nodePadAcross,Z=Y.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var q=V.dx,ie=Math.max(.5,V.dy),se="node_"+V.pointNumber;return V.group&&(se=h.randstr()),V.trace=Y.trace,V.curveNumber=Y.trace.index,{index:V.pointNumber,key:se,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:Y.key,trace:Y.trace,node:V,nodePad:Y.nodePad,nodeLineColor:Y.nodeLineColor,nodeLineWidth:Y.nodeLineWidth,textFont:Y.textFont,size:Y.horizontal?Y.height:Y.width,visibleWidth:Math.ceil(q),visibleHeight:ie,zoneX:-ne,zoneY:-Z,zoneWidth:q+2*ne,zoneHeight:ie+2*Z,labelY:Y.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:Y.width,forceLayouts:Y.forceLayouts,horizontal:Y.horizontal,darkBackground:ee.getBrightness()<=128,tinyColorHue:r.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,graph:Y.graph,arrangement:Y.arrangement,uniqueNodeLabelPathId:[Y.guid,Y.key,se].join("_"),interactionState:Y.interactionState,figure:Y}}function k(Y){Y.attr("transform",function(V){return i(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function E(Y){Y.call(k)}function F(Y,V){Y.call(E),V.attr("d",C())}function I(Y){Y.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function D(Y){return Y.link.width>1||Y.linkLineWidth>0}function R(Y){var V=i(Y.translateX,Y.translateY);return V+(Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(Y,V,ee){Y.on(".basic",null).on("mouseover.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.hover(this,ne,V),ne.interactionState.hovered=[this,ne])}).on("mousemove.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.follow(this,ne),ne.interactionState.hovered=[this,ne])}).on("mouseout.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.unhover(this,ne,V),ne.interactionState.hovered=!1)}).on("click.basic",function(ne){ne.interactionState.hovered&&(ee.unhover(this,ne,V),ne.interactionState.hovered=!1),!ne.interactionState.dragInProgress&&!ne.partOfGroup&&ee.select(this,ne,V)})}function z(Y,V,ee,ne){var Z=M.behavior.drag().origin(function(q){return{x:q.node.x0+q.visibleWidth/2,y:q.node.y0+q.visibleHeight/2}}).on("dragstart",function(q){if(q.arrangement!=="fixed"&&(h.ensureSingle(ne._fullLayout._infolayer,"g","dragcover",function(se){ne._fullLayout._dragCover=se}),h.raiseToTop(this),q.interactionState.dragInProgress=q.node,re(q.node),q.interactionState.hovered&&(ee.nodeEvents.unhover.apply(0,q.interactionState.hovered),q.interactionState.hovered=!1),q.arrangement==="snap")){var ie=q.traceId+"|"+q.key;q.forceLayouts[ie]?q.forceLayouts[ie].alpha(1):B(Y,ie,q),G(Y,V,q,ie,ne)}}).on("drag",function(q){if(q.arrangement!=="fixed"){var ie=M.event.x,se=M.event.y;q.arrangement==="snap"?(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2,q.node.y0=se-q.visibleHeight/2,q.node.y1=se+q.visibleHeight/2):(q.arrangement==="freeform"&&(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2),se=Math.max(0,Math.min(q.size-q.visibleHeight/2,se)),q.node.y0=se-q.visibleHeight/2,q.node.y1=se+q.visibleHeight/2),re(q.node),q.arrangement!=="snap"&&(q.sankey.update(q.graph),F(Y.filter(ue(q)),V))}}).on("dragend",function(q){if(q.arrangement!=="fixed"){q.interactionState.dragInProgress=!1;for(var ie=0;ie<q.node.childrenNodes.length;ie++)q.node.childrenNodes[ie].x=q.node.x,q.node.childrenNodes[ie].y=q.node.y;q.arrangement!=="snap"&&X(q,ne)}});Y.on(".drag",null).call(Z)}function B(Y,V,ee,ne){K(ee.graph.nodes);var Z=ee.graph.nodes.filter(function(q){return q.originalX===ee.node.originalX}).filter(function(q){return!q.partOfGroup});ee.forceLayouts[V]=w.forceSimulation(Z).alphaDecay(0).force("collide",w.forceCollide().radius(function(q){return q.dy/2+ee.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",Q(Y,V,Z,ee)).stop()}function G(Y,V,ee,ne,Z){window.requestAnimationFrame(function q(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)ee.forceLayouts[ne].tick();var se=ee.graph.nodes;if(te(se),ee.sankey.update(ee.graph),F(Y.filter(ue(ee)),V),ee.forceLayouts[ne].alpha()>0)window.requestAnimationFrame(q);else{var ae=ee.node.originalX;ee.node.x0=ae-ee.visibleWidth/2,ee.node.x1=ae+ee.visibleWidth/2,X(ee,Z)}})}function Q(Y,V,ee,ne){return function(){for(var q=0,ie=0;ie<ee.length;ie++){var se=ee[ie];se===ne.interactionState.dragInProgress?(se.x=se.lastDraggedX,se.y=se.lastDraggedY):(se.vx=(se.originalX-se.x)/a.forceTicksPerFrame,se.y=Math.min(ne.size-se.dy/2,Math.max(se.dy/2,se.y))),q=Math.max(q,Math.abs(se.vx),Math.abs(se.vy))}!ne.interactionState.dragInProgress&&q<.1&&ne.forceLayouts[V].alpha()>0&&ne.forceLayouts[V].alpha(0)}}function X(Y,V){for(var ee=[],ne=[],Z=0;Z<Y.graph.nodes.length;Z++){var q=(Y.graph.nodes[Z].x0+Y.graph.nodes[Z].x1)/2,ie=(Y.graph.nodes[Z].y0+Y.graph.nodes[Z].y1)/2;ee.push(q/Y.figure.width),ne.push(ie/Y.figure.height)}l.call("_guiRestyle",V,{"node.x":[ee],"node.y":[ne]},Y.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function j(Y){var V=[],ee;for(ee=0;ee<Y.length;ee++)Y[ee].originalX=(Y[ee].x0+Y[ee].x1)/2,Y[ee].originalY=(Y[ee].y0+Y[ee].y1)/2,V.indexOf(Y[ee].originalX)===-1&&V.push(Y[ee].originalX);for(V.sort(function(ne,Z){return ne-Z}),ee=0;ee<Y.length;ee++)Y[ee].originalLayerIndex=V.indexOf(Y[ee].originalX),Y[ee].originalLayer=Y[ee].originalLayerIndex/(V.length-1)}function re(Y){Y.lastDraggedX=Y.x0+Y.dx/2,Y.lastDraggedY=Y.y0+Y.dy/2}function ue(Y){return function(V){return V.node.originalX===Y.node.originalX}}function K(Y){for(var V=0;V<Y.length;V++)Y[V].y=(Y[V].y0+Y[V].y1)/2,Y[V].x=(Y[V].x0+Y[V].x1)/2}function te(Y){for(var V=0;V<Y.length;V++)Y[V].y0=Y[V].y-Y[V].dy/2,Y[V].y1=Y[V].y0+Y[V].dy,Y[V].x0=Y[V].x-Y[V].dx/2,Y[V].x1=Y[V].x0+Y[V].dx}U.exports=function(Y,V,ee,ne,Z){var q=Y._context.staticPlot,ie=!1;h.ensureSingle(Y._fullLayout._infolayer,"g","first-render",function(){ie=!0});var se=Y._fullLayout._dragCover,ae=ee.filter(function(Me){return c(Me).trace.visible}).map(g.bind(null,ne)),oe=V.selectAll("."+a.cn.sankey).data(ae,d);oe.exit().remove(),oe.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",q?"none":"auto").attr("transform",R),oe.each(function(Me,Le){Y._fullData[Le]._sankey=Me;var Oe="bgsankey-"+Me.trace.uid+"-"+Le;h.ensureSingle(Y._fullLayout._draggers,"rect",Oe),Y._fullData[Le]._bgRect=M.select("."+Oe),Y._fullData[Le]._bgRect.style("pointer-events",q?"none":"all").attr("width",Me.width).attr("height",Me.height).attr("x",Me.translateX).attr("y",Me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(a.ease).duration(a.duration).attr("transform",R);var be=oe.selectAll("."+a.cn.sankeyLinks).data(p,d);be.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ce=be.selectAll("."+a.cn.sankeyLink).data(function(Me){var Le=Me.graph.links;return Le.filter(function(Oe){return Oe.value}).map(b.bind(null,Me))},d);ce.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,oe,Z.linkEvents),ce.style("stroke",function(Me){return D(Me)?r.tinyRGB(n(Me.linkLineColor)):Me.tinyColorHue}).style("stroke-opacity",function(Me){return D(Me)?r.opacity(Me.linkLineColor):Me.tinyColorAlpha}).style("fill",function(Me){return Me.tinyColorHue}).style("fill-opacity",function(Me){return Me.tinyColorAlpha}).style("stroke-width",function(Me){return D(Me)?Me.linkLineWidth:1}).attr("d",C()),ce.style("opacity",function(){return Y._context.staticPlot||ie||se?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ce.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var de=oe.selectAll("."+a.cn.sankeyNodeSet).data(p,d);de.enter().append("g").classed(a.cn.sankeyNodeSet,!0),de.style("cursor",function(Me){switch(Me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=de.selectAll("."+a.cn.sankeyNode).data(function(Me){var Le=Me.graph.nodes;return j(Le),Le.map(S.bind(null,Me))},d);ye.enter().append("g").classed(a.cn.sankeyNode,!0).call(k).style("opacity",function(Me){return(Y._context.staticPlot||ie)&&!Me.partOfGroup?1:0}),ye.call(O,oe,Z.nodeEvents).call(z,ce,Z,Y),ye.transition().ease(a.ease).duration(a.duration).call(k).style("opacity",function(Me){return Me.partOfGroup?0:1}),ye.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ge=ye.selectAll("."+a.cn.nodeRect).data(p);ge.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ge.style("stroke-width",function(Me){return Me.nodeLineWidth}).style("stroke",function(Me){return r.tinyRGB(n(Me.nodeLineColor))}).style("stroke-opacity",function(Me){return r.opacity(Me.nodeLineColor)}).style("fill",function(Me){return Me.tinyColorHue}).style("fill-opacity",function(Me){return Me.tinyColorAlpha}),ge.transition().ease(a.ease).duration(a.duration).call(I);var me=ye.selectAll("."+a.cn.nodeLabel).data(p);me.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),me.attr("data-notex",1).text(function(Me){return Me.node.label}).each(function(Me){var Le=M.select(this);t.font(Le,Me.textFont),m.convertToTspans(Le,Y)}).style("text-shadow",m.makeTextShadow(Y._fullLayout.paper_bgcolor)).attr("text-anchor",function(Me){return Me.horizontal&&Me.left?"end":"start"}).attr("transform",function(Me){var Le=M.select(this),Oe=m.lineCount(Le),_e=Me.textFont.size*((Oe-1)*A-u),Ee=Me.nodeLineWidth/2+_,Ze=((Me.horizontal?Me.visibleHeight:Me.visibleWidth)-_e)/2;Me.horizontal&&(Me.left?Ee=-Ee:Ee+=Me.visibleWidth);var Ge=Me.horizontal?"":"scale(-1,1)"+s(90);return i(Me.horizontal?Ee:Ze,Me.horizontal?Ze:Ee)+Ge}),me.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(o,U,H){U.exports=function(f,M){for(var T=f.cd,e=[],a=T[0].trace,n=a._sankey.graph.nodes,r=0;r<n.length;r++){var t=n[r];if(!t.partOfGroup){var h=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];a.orientation==="v"&&h.reverse(),M&&M.contains(h,!1,r,f)&&e.push({pointNumber:t.pointNumber})}}return e}},{}],935:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.texttemplate,M,"txt"),w.mergeArray(T.hovertext,M,"htx"),w.mergeArray(T.customdata,M,"data"),w.mergeArray(T.textposition,M,"tp"),T.textfont&&(w.mergeArrayCastPositive(T.textfont.size,M,"ts"),w.mergeArray(T.textfont.color,M,"tc"),w.mergeArray(T.textfont.family,M,"tf"));var a=T.marker;if(a){w.mergeArrayCastPositive(a.size,M,"ms"),w.mergeArrayCastPositive(a.opacity,M,"mo"),w.mergeArray(a.symbol,M,"mx"),w.mergeArray(a.angle,M,"ma"),w.mergeArray(a.standoff,M,"mf"),w.mergeArray(a.color,M,"mc");var n=a.line;a.line&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"));var r=a.gradient;r&&r.type!=="none"&&(w.mergeArray(r.type,M,"mgt"),w.mergeArray(r.color,M,"mgc"))}}},{"../../lib":515}],936:[function(o,U,H){var w=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../../components/colorscale/attributes"),e=o("../../plots/font_attributes"),a=o("../../components/drawing/attributes").dash,n=o("../../components/drawing/attributes").pattern,r=o("../../components/drawing"),t=o("./constants"),h=o("../../lib/extend").extendFlat;function i(d){return{valType:"any",dflt:0,editType:"calc"}}function s(d){return{valType:"any",editType:"calc"}}function y(d){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:i(),yperiod:i(),xperiod0:s(),yperiod0:s(),xperiodalignment:y(),yperiodalignment:y(),xhoverformat:w("x"),yhoverformat:w("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:f({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:h({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:h({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:h({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../plots/cartesian/axes"),T=o("../../plots/cartesian/align_period"),e=o("../../constants/numerical").BADNUM,a=o("./subtypes"),n=o("./colorscale_calc"),r=o("./arrays_to_calcdata"),t=o("./calc_selection");function h(c,m){var l=c._fullLayout,x=m._xA=M.getFromId(c,m.xaxis||"x","x"),u=m._yA=M.getFromId(c,m.yaxis||"y","y"),A=x.makeCalcdata(m,"x"),_=u.makeCalcdata(m,"y"),g=T(m,x,"x",A),b=T(m,u,"y",_),v=g.vals,C=b.vals,S=m._length,k=new Array(S),E=m.ids,F=p(m,l,x,u),I=!1,D,R,O,z,B,G;y(l,m);var Q="x",X="y",j;if(F)f.pushUnique(F.traceIndices,m._expandedIndex),D=F.orientation==="v",D?(X="s",j="x"):(Q="s",j="y"),B=F.stackgaps==="interpolate";else{var re=s(m,S);i(c,m,x,u,v,C,re)}var ue=!!m.xperiodalignment,K=!!m.yperiodalignment;for(R=0;R<S;R++){var te=k[R]={},Y=w(v[R]),V=w(C[R]);Y&&V?(te[Q]=v[R],te[X]=C[R],ue&&(te.orig_x=A[R],te.xEnd=g.ends[R],te.xStart=g.starts[R]),K&&(te.orig_y=_[R],te.yEnd=b.ends[R],te.yStart=b.starts[R])):F&&(D?Y:V)?(te[j]=D?v[R]:C[R],te.gap=!0,B?(te.s=e,I=!0):te.s=0):te[Q]=te[X]=e,E&&(te.id=String(E[R]))}if(r(k,m),n(c,m),t(k,m),F){for(R=0;R<k.length;)k[R][j]===e?k.splice(R,1):R++;if(f.sort(k,function(q,ie){return q[j]-ie[j]||q.i-ie.i}),I){for(R=0;R<k.length-1&&k[R].gap;)R++;for(G=k[R].s,G||(G=k[R].s=0),O=0;O<R;O++)k[O].s=G;for(z=k.length-1;z>R&&k[z].gap;)z--;for(G=k[z].s,O=k.length-1;O>z;O--)k[O].s=G;for(;R<z;)if(R++,k[R].gap){for(O=R+1;k[O].gap;)O++;for(var ee=k[R-1][j],ne=k[R-1].s,Z=(k[O].s-ne)/(k[O][j]-ee);R<O;)k[R].s=ne+(k[R][j]-ee)*Z,R++}}}return k}function i(c,m,l,x,u,A,_){var g=m._length,b=c._fullLayout,v=l._id,C=x._id,S=b._firstScatter[d(m)]===m.uid,k=(p(m,b,l,x)||{}).orientation,E=m.fill;l._minDtick=0,x._minDtick=0;var F={padded:!0},I={padded:!0};_&&(F.ppad=I.ppad=_);var D=g<2||u[0]!==u[g-1]||A[0]!==A[g-1];D&&(E==="tozerox"||E==="tonextx"&&(S||k==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(E==="tonexty"||E==="tozeroy"||!a.hasMarkers(m)&&!a.hasText(m))&&(F.padded=!1,F.ppad=0),D&&(E==="tozeroy"||E==="tonexty"&&(S||k==="v"))?I.tozero=!0:(E==="tonextx"||E==="tozerox")&&(I.padded=!1),v&&(m._extremes[v]=M.findExtremes(l,u,F)),C&&(m._extremes[C]=M.findExtremes(x,A,I))}function s(c,m){if(!!a.hasMarkers(c)){var l=c.marker,x=1.6*(c.marker.sizeref||1),u;if(c.marker.sizemode==="area"?u=function(v){return Math.max(Math.sqrt((v||0)/x),3)}:u=function(v){return Math.max((v||0)/x,3)},f.isArrayOrTypedArray(l.size)){var A={type:"linear"};M.setConvert(A);for(var _=A.makeCalcdata(c.marker,"size"),g=new Array(m),b=0;b<m;b++)g[b]=u(_[b]);return g}else return u(l.size)}}function y(c,m){var l=d(m),x=c._firstScatter;x[l]||(x[l]=m.uid)}function d(c){var m=c.stackgroup;return c.xaxis+c.yaxis+c.type+(m?"-"+m:"")}function p(c,m,l,x){var u=c.stackgroup;if(!!u){var A=m._scatterStackOpts[l._id+x._id][u],_=A.orientation==="v"?x:l;if(_.type==="linear"||_.type==="log")return A}}U.exports={calc:h,calcMarkerSize:s,calcAxisExpansion:i,setFirstScatter:y,getStackOpts:p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){w.isArrayOrTypedArray(T.selectedpoints)&&w.tagSelected(M,T)}},{"../../lib":515}],939:[function(o,U,H){var w=o("../../components/colorscale/helpers").hasColorscale,f=o("../../components/colorscale/calc"),M=o("./subtypes");U.exports=function(e,a){M.hasLines(a)&&w(a,"line")&&f(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(a)&&(w(a,"marker")&&f(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),w(a,"marker.line")&&f(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(o,U,H){U.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(o,U,H){var w=o("./calc");U.exports=function(e,a){var n=a.xaxis,r=a.yaxis,t=n._id+r._id,h=e._fullLayout._scatterStackOpts[t];if(!!h){var i=e.calcdata,s,y,d,p,c,m,l,x,u,A,_,g,b,v,C;for(var S in h){A=h[S];var k=A.traceIndices;if(!!k.length){for(_=A.stackgaps==="interpolate",g=A.groupnorm,A.orientation==="v"?(b="x",v="y"):(b="y",v="x"),C=new Array(k.length),s=0;s<C.length;s++)C[s]=!1;m=i[k[0]];var E=new Array(m.length);for(s=0;s<m.length;s++)E[s]=m[s][b];for(s=1;s<k.length;s++){for(c=i[k[s]],y=d=0;y<c.length;y++){for(l=c[y][b];l>E[d]&&d<E.length;d++)f(c,y,E[d],s,C,_,b),y++;if(l!==E[d]){for(p=0;p<s;p++)f(i[k[p]],d,l,p,C,_,b);E.splice(d,0,l)}d++}for(;d<E.length;d++)f(c,y,E[d],s,C,_,b),y++}var F=E.length;for(y=0;y<m.length;y++){for(x=m[y][v]=m[y].s,s=1;s<k.length;s++)c=i[k[s]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=F,x+=c[y].s,c[y][v]=x;if(g)for(u=(g==="fraction"?x:x/100)||1,s=0;s<k.length;s++){var I=i[k[s]][y];I[v]/=u,I.sNorm=I.s/u}}for(s=0;s<k.length;s++){c=i[k[s]];var D=c[0].trace,R=w.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&C[s]||O){var z=R;for(R=new Array(F),y=0;y<F;y++)R[y]=c[y].gap?0:O?z[c[y].i]:z}var B=new Array(F),G=new Array(F);for(y=0;y<F;y++)B[y]=c[y].x,G[y]=c[y].y;w.calcAxisExpansion(e,D,n,r,B,G,R),c[0].t.orientation=A.orientation}}}}};function f(T,e,a,n,r,t,h){r[n]=!0;var i={i:null,gap:!0,s:0};if(i[h]=a,T.splice(e,0,i),e&&a===T[e-1][h]){var s=T[e-1];i.s=s.s,i.i=s.i,i.gap=s.gap}else t&&(i.s=M(T,e,a,h));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function M(T,e,a,n){var r=T[e-1],t=T[e+1];return t?r?r.s+(t.s-r.s)*(a-r[n])/(t[n]-r[n]):t.s:r.s}},{"./calc":937}],942:[function(o,U,H){U.exports=function(f){for(var M=0;M<f.length;M++){var T=f[M];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=M-1;a>=0;a--){var n=f[a];if(n.type==="scatter"&&n.xaxis===T.xaxis&&n.yaxis===T.yaxis){n.opacity=void 0;break}}}}}},{}],943:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=o("./attributes"),T=o("./constants"),e=o("./subtypes"),a=o("./xy_defaults"),n=o("./period_defaults"),r=o("./stack_defaults"),t=o("./marker_defaults"),h=o("./line_defaults"),i=o("./line_shape_defaults"),s=o("./text_defaults"),y=o("./fillcolor_defaults"),d=o("../../lib").coercePattern;U.exports=function(c,m,l,x){function u(k,E){return w.coerce(c,m,M,k,E)}var A=a(c,m,x,u);if(A||(m.visible=!1),!!m.visible){n(c,m,x,u),u("xhoverformat"),u("yhoverformat");var _=r(c,m,x,u),g=!_&&A<T.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",g),e.hasLines(m)&&(h(c,m,l,x,u,{backoff:!0}),i(c,m,u),u("connectgaps"),u("line.simplify")),e.hasMarkers(m)&&t(c,m,l,x,u,{gradient:!0}),e.hasText(m)&&(u("texttemplate"),s(c,m,x,u));var b=[];(e.hasMarkers(m)||e.hasText(m))&&(u("cliponaxis"),u("marker.maxdisplayed"),b.push("points")),u("fill",_?_.fillDflt:"none"),m.fill!=="none"&&(y(c,m,l,u),e.hasLines(m)||i(c,m,u),d(u,"fillpattern",m.fillcolor,!1));var v=(m.line||{}).color,C=(m.marker||{}).color;(m.fill==="tonext"||m.fill==="toself")&&b.push("fills"),u("hoveron",b.join("+")||"points"),m.hoveron!=="fills"&&u("hovertemplate");var S=f.getComponentMethod("errorbars","supplyDefaults");S(c,m,v||C||l,{axis:"y"}),S(c,m,v||C||l,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(m,u)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(o,U,H){var w=o("../../components/color"),f=o("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n){var r=!1;if(e.marker){var t=e.marker.color,h=(e.marker.line||{}).color;t&&!f(t)?r=t:h&&!f(h)&&(r=h)}n("fillcolor",w.addOpacity((e.line||{}).color||r||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(o,U,H){var w=o("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n={_fullLayout:e},r=w.getFromTrace(n,T,"x"),t=w.getFromTrace(n,T,"y");return a.xLabel=w.tickText(r,r.c2l(M.x),!0).text,a.yLabel=w.tickText(t,t.c2l(M.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(o,U,H){var w=o("../../components/color"),f=o("./subtypes");U.exports=function(T,e){var a,n;if(T.mode==="lines")return a=T.line.color,a&&w.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var r=e.mcc||(T.marker||{}).color,t=e.mlcc||((T.marker||{}).line||{}).color;return n=r&&w.opacity(r)?r:t&&w.opacity(t)&&(e.mlw||((T.marker||{}).line||{}).width)?t:"",n?w.opacity(n)<.3?w.addOpacity(n,.3):n:(a=(T.line||{}).color,a&&w.opacity(a)&&f.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(o,U,H){var w=o("../../lib"),f=o("../../components/fx"),M=o("../../registry"),T=o("./get_trace_color"),e=o("../../components/color"),a=w.fillText;U.exports=function(r,t,h,i){var s=r.cd,y=s[0].trace,d=r.xa,p=r.ya,c=d.c2p(t),m=p.c2p(h),l=[c,m],x=y.hoveron||"",u=y.mode.indexOf("markers")!==-1?3:.5,A=!!y.xperiodalignment,_=!!y.yperiodalignment;if(x.indexOf("points")!==-1){var g=function(ae){if(A){var oe=d.c2p(ae.xStart),be=d.c2p(ae.xEnd);return c>=Math.min(oe,be)&&c<=Math.max(oe,be)?0:1/0}var ce=Math.max(3,ae.mrc||0),de=1-1/ce,ye=Math.abs(d.c2p(ae.x)-c);return ye<ce?de*ye/ce:ye-ce+de},b=function(ae){if(_){var oe=p.c2p(ae.yStart),be=p.c2p(ae.yEnd);return m>=Math.min(oe,be)&&m<=Math.max(oe,be)?0:1/0}var ce=Math.max(3,ae.mrc||0),de=1-1/ce,ye=Math.abs(p.c2p(ae.y)-m);return ye<ce?de*ye/ce:ye-ce+de},v=function(ae){var oe=Math.max(u,ae.mrc||0),be=d.c2p(ae.x)-c,ce=p.c2p(ae.y)-m;return Math.max(Math.sqrt(be*be+ce*ce)-oe,1-u/oe)},C=f.getDistanceFunction(i,g,b,v);if(f.getClosest(s,C,r),r.index!==!1){var S=s[r.index],k=d.c2p(S.x,!0),E=p.c2p(S.y,!0),F=S.mrc||1;r.index=S.i;var I=s[0].t.orientation,D=I&&(S.sNorm||S.s),R=I==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,O=I==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return w.extendFlat(r,{color:T(y,S),x0:k-F,x1:k+F,xLabelVal:R,y0:E-F,y1:E+F,yLabelVal:O,spikeDistance:v(S),hovertemplate:y.hovertemplate}),a(S,y,r),M.getComponentMethod("errorbars","hoverInfo")(S,y,r),[r]}}if(x.indexOf("fills")!==-1&&y._polygons){var z=y._polygons,B=[],G=!1,Q=1/0,X=-1/0,j=1/0,re=-1/0,ue,K,te,Y,V,ee,ne,Z,q;for(ue=0;ue<z.length;ue++)te=z[ue],te.contains(l)&&(G=!G,B.push(te),j=Math.min(j,te.ymin),re=Math.max(re,te.ymax));if(G){j=Math.max(j,0),re=Math.min(re,p._length);var ie=(j+re)/2;for(ue=0;ue<B.length;ue++)for(Y=B[ue].pts,K=1;K<Y.length;K++)Z=Y[K-1][1],q=Y[K][1],Z>ie!=q>=ie&&(ee=Y[K-1][0],ne=Y[K][0],q-Z&&(V=ee+(ne-ee)*(ie-Z)/(q-Z),Q=Math.min(Q,V),X=Math.max(X,V)));Q=Math.max(Q,0),X=Math.min(X,d._length);var se=e.defaultLine;return e.opacity(y.fillcolor)?se=y.fillcolor:e.opacity((y.line||{}).color)&&(se=y.line.color),w.extendFlat(r,{distance:r.maxHoverDistance,x0:Q,x1:X,y0:ie,y1:ie,color:se,hovertemplate:!1}),delete r.index,y.text&&!Array.isArray(y.text)?r.text=String(y.text):r.text=y.name,[r]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(o,U,H){var w=o("./subtypes");U.exports={hasLines:w.hasLines,hasMarkers:w.hasMarkers,hasText:w.hasText,isBubble:w.isBubble,attributes:o("./attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("./cross_trace_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./cross_trace_calc"),arraysToCalcdata:o("./arrays_to_calcdata"),plot:o("./plot"),colorbar:o("./marker_colorbar"),formatLabels:o("./format_labels"),style:o("./style").style,styleOnSelect:o("./style").styleOnSelect,hoverPoints:o("./hover"),selectPoints:o("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(o,U,H){var w=o("../../lib").isArrayOrTypedArray,f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/defaults");U.exports=function(e,a,n,r,t,h){h||(h={});var i=(e.marker||{}).color;if(t("line.color",n),f(e,"line"))M(e,a,r,t,{prefix:"line.",cLetter:"c"});else{var s=(w(i)?!1:i)||n;t("line.color",s)}t("line.width"),h.noDash||t("line.dash"),h.backoff&&t("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(o,U,H){var w=o("../../components/drawing"),f=o("../../constants/numerical"),M=f.BADNUM,T=f.LOG_CLIP,e=T+.5,a=T-.5,n=o("../../lib"),r=n.segmentsIntersect,t=n.constrain,h=o("./constants");U.exports=function(s,y){var d=y.trace||{},p=y.xaxis,c=y.yaxis,m=p.type==="log",l=c.type==="log",x=p._length,u=c._length,A=y.backoff,_=d.marker,g=y.connectGaps,b=y.baseTolerance,v=y.shape,C=v==="linear",S=d.fill&&d.fill!=="none",k=[],E=h.minTolerance,F=s.length,I=new Array(F),D=0,R,O,z,B,G,Q,X,j,re,ue,K,te,Y,V,ee,ne;function Z(kt){var jt=s[kt];if(!jt)return!1;var Bt=y.linearized?p.l2p(jt.x):p.c2p(jt.x),Wt=y.linearized?c.l2p(jt.y):c.c2p(jt.y);if(Bt===M){if(m&&(Bt=p.c2p(jt.x,!0)),Bt===M)return!1;l&&Wt===M&&(Bt*=Math.abs(p._m*u*(p._m>0?e:a)/(c._m*x*(c._m>0?e:a)))),Bt*=1e3}if(Wt===M){if(l&&(Wt=c.c2p(jt.y,!0)),Wt===M)return!1;Wt*=1e3}return[Bt,Wt]}function q(kt,jt,Bt,Wt){var Qt=Bt-kt,Zt=Wt-jt,cr=.5-kt,Xr=.5-jt,vn=Qt*Qt+Zt*Zt,en=Qt*cr+Zt*Xr;if(en>0&&en<vn){var ft=cr*Zt-Xr*Qt;if(ft*ft<vn)return!0}}var ie,se;function ae(kt,jt){var Bt=kt[0]/x,Wt=kt[1]/u,Qt=Math.max(0,-Bt,Bt-1,-Wt,Wt-1);return Qt&&ie!==void 0&&q(Bt,Wt,ie,se)&&(Qt=0),Qt&&jt&&q(Bt,Wt,jt[0]/x,jt[1]/u)&&(Qt=0),(1+h.toleranceGrowth*Qt)*b}function oe(kt,jt){var Bt=kt[0]-jt[0],Wt=kt[1]-jt[1];return Math.sqrt(Bt*Bt+Wt*Wt)}var be=h.maxScreensAway,ce=-x*be,de=x*(1+be),ye=-u*be,ge=u*(1+be),me=[[ce,ye,de,ye],[de,ye,de,ge],[de,ge,ce,ge],[ce,ge,ce,ye]],Me,Le,Oe,_e,Ee,Ze;function Ge(kt,jt){for(var Bt=[],Wt=0,Qt=0;Qt<4;Qt++){var Zt=me[Qt],cr=r(kt[0],kt[1],jt[0],jt[1],Zt[0],Zt[1],Zt[2],Zt[3]);cr&&(!Wt||Math.abs(cr.x-Bt[0][0])>1||Math.abs(cr.y-Bt[0][1])>1)&&(cr=[cr.x,cr.y],Wt&&oe(cr,kt)<oe(Bt[0],kt)?Bt.unshift(cr):Bt.push(cr),Wt++)}return Bt}function Fe(kt){if(kt[0]<ce||kt[0]>de||kt[1]<ye||kt[1]>ge)return[t(kt[0],ce,de),t(kt[1],ye,ge)]}function Re(kt,jt){if(kt[0]===jt[0]&&(kt[0]===ce||kt[0]===de)||kt[1]===jt[1]&&(kt[1]===ye||kt[1]===ge))return!0}function We(kt,jt){var Bt=[],Wt=Fe(kt),Qt=Fe(jt);return Wt&&Qt&&Re(Wt,Qt)||(Wt&&Bt.push(Wt),Qt&&Bt.push(Qt)),Bt}function xt(kt,jt,Bt){return function(Wt,Qt){var Zt=Fe(Wt),cr=Fe(Qt),Xr=[];if(Zt&&cr&&Re(Zt,cr))return Xr;Zt&&Xr.push(Zt),cr&&Xr.push(cr);var vn=2*n.constrain((Wt[kt]+Qt[kt])/2,jt,Bt)-((Zt||Wt)[kt]+(cr||Qt)[kt]);if(vn){var en;Zt&&cr?en=vn>0==Zt[kt]>cr[kt]?Zt:cr:en=Zt||cr,en[kt]+=vn}return Xr}}var Nt;v==="linear"||v==="spline"?Nt=Ge:v==="hv"||v==="vh"?Nt=We:v==="hvh"?Nt=xt(0,ce,de):v==="vhv"&&(Nt=xt(1,ye,ge));function tr(kt,jt){var Bt=jt[0]-kt[0],Wt=(jt[1]-kt[1])/Bt,Qt=(kt[1]*jt[0]-jt[1]*kt[0])/Bt;return Qt>0?[Wt>0?ce:de,ge]:[Wt>0?de:ce,ye]}function Vt(kt){var jt=kt[0],Bt=kt[1],Wt=jt===I[D-1][0],Qt=Bt===I[D-1][1];if(!(Wt&&Qt))if(D>1){var Zt=jt===I[D-2][0],cr=Bt===I[D-2][1];Wt&&(jt===ce||jt===de)&&Zt?cr?D--:I[D-1]=kt:Qt&&(Bt===ye||Bt===ge)&&cr?Zt?D--:I[D-1]=kt:I[D++]=kt}else I[D++]=kt}function Pt(kt){I[D-1][0]!==kt[0]&&I[D-1][1]!==kt[1]&&Vt([Oe,_e]),Vt(kt),Ee=null,Oe=_e=0}var $t=n.isArrayOrTypedArray(_);function Ut(kt){if(kt&&A&&(kt.i=R,kt.d=s,kt.trace=d,kt.marker=$t?_[kt.i]:_,kt.backoff=A),ie=kt[0]/x,se=kt[1]/u,Me=kt[0]<ce?ce:kt[0]>de?de:0,Le=kt[1]<ye?ye:kt[1]>ge?ge:0,Me||Le){if(!D)I[D++]=[Me||kt[0],Le||kt[1]];else if(Ee){var jt=Nt(Ee,kt);jt.length>1&&(Pt(jt[0]),I[D++]=jt[1])}else Ze=Nt(I[D-1],kt)[0],I[D++]=Ze;var Bt=I[D-1];Me&&Le&&(Bt[0]!==Me||Bt[1]!==Le)?(Ee&&(Oe!==Me&&_e!==Le?Vt(Oe&&_e?tr(Ee,kt):[Oe||Me,_e||Le]):Oe&&_e&&Vt([Oe,_e])),Vt([Me,Le])):Oe-Me&&_e-Le&&Vt([Me||Oe,Le||_e]),Ee=kt,Oe=Me,_e=Le}else Ee&&Pt(Nt(Ee,kt)[0]),I[D++]=kt}for(R=0;R<F;R++)if(O=Z(R),!!O){for(D=0,Ee=null,Ut(O),R++;R<F;R++){if(B=Z(R),!B){if(g)continue;break}if(!C||!y.simplify){Ut(B);continue}var Lt=Z(R+1);if(ue=oe(B,O),!(!(S&&(D===0||D===F-1))&&ue<ae(B,Lt)*E)){for(j=[(B[0]-O[0])/ue,(B[1]-O[1])/ue],G=O,K=ue,te=V=ee=0,X=!1,z=B,R++;R<s.length;R++){if(Q=Lt,Lt=Z(R+1),!Q){if(g)continue;break}if(re=[Q[0]-O[0],Q[1]-O[1]],ne=re[0]*j[1]-re[1]*j[0],V=Math.min(V,ne),ee=Math.max(ee,ne),ee-V>ae(Q,Lt))break;z=Q,Y=re[0]*j[0]+re[1]*j[1],Y>K?(K=Y,B=Q,X=!1):Y<te&&(te=Y,G=Q,X=!0)}if(X?(Ut(B),z!==G&&Ut(G)):(G!==O&&Ut(G),z!==B&&Ut(B)),Ut(z),R>=s.length||!Q)break;Ut(Q),O=Q}}Ee&&Vt([Oe||Ee[0],_e||Ee[1]]),k.push(I.slice(0,D))}var Ye=v.slice(v.length-1);if(A&&Ye!=="h"&&Ye!=="v"){for(var ot=!1,Ve=-1,Ae=[],He=0;He<k.length;He++)for(var Je=0;Je<k[He].length-1;Je++){var tt=k[He][Je],St=k[He][Je+1],_t=w.applyBackoff(St,tt);(_t[0]!==St[0]||_t[1]!==St[1])&&(ot=!0),Ae[Ve+1]||(Ve++,Ae[Ve]=[tt,[_t[0],_t[1]]])}return ot?Ae:k}return k}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(o,U,H){U.exports=function(f,M,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(o,U,H){var w={tonextx:1,tonexty:1,tonext:1};U.exports=function(M,T,e){var a,n,r,t,h,i={},s=!1,y=-1,d=0,p=-1;for(n=0;n<e.length;n++)a=e[n][0].trace,r=a.stackgroup||"",r?r in i?h=i[r]:(h=i[r]=d,d++):a.fill in w&&p>=0?h=p:(h=p=d,d++),h<y&&(s=!0),a._groupIndex=y=h;var c=e.slice();s&&c.sort(function(l,x){var u=l[0].trace,A=x[0].trace;return u._groupIndex-A._groupIndex||u.index-A.index});var m={};for(n=0;n<c.length;n++)a=c[n][0].trace,r=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in w&&(t=m[r],a._prevtrace=t||null,t&&(t._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),m[r]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return c}},{}],953:[function(o,U,H){var w=o("fast-isnumeric");U.exports=function(M,T){T||(T=2);var e=M.marker,a=e.sizeref||1,n=e.sizemin||0,r=e.sizemode==="area"?function(t){return Math.sqrt(t/a)}:function(t){return t/a};return function(t){var h=r(t/T);return w(h)&&h>0?Math.max(h,n):0}}},{"fast-isnumeric":190}],954:[function(o,U,H){U.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(o,U,H){var w=o("../../components/color"),f=o("../../components/colorscale/helpers").hasColorscale,M=o("../../components/colorscale/defaults"),T=o("./subtypes");U.exports=function(a,n,r,t,h,i){var s=T.isBubble(a),y=(a.line||{}).color,d;if(i=i||{},y&&(r=y),h("marker.symbol"),h("marker.opacity",s?.7:1),h("marker.size"),i.noAngle||(h("marker.angle"),i.noAngleRef||h("marker.angleref"),i.noStandOff||h("marker.standoff")),h("marker.color",r),f(a,"marker")&&M(a,n,t,h,{prefix:"marker.",cLetter:"c"}),i.noSelect||(h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size")),i.noLine||(y&&!Array.isArray(y)&&n.marker.color!==y?d=y:s?d=w.background:d=w.defaultLine,h("marker.line.color",d),f(a,"marker.line")&&M(a,n,t,h,{prefix:"marker.line.",cLetter:"c"}),h("marker.line.width",s?1:0)),s&&(h("marker.sizeref"),h("marker.sizemin"),h("marker.sizemode")),i.gradient){var p=h("marker.gradient.type");p!=="none"&&h("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(o,U,H){var w=o("../../lib").dateTick0,f=o("../../constants/numerical"),M=f.ONEWEEK;function T(e,a){return e%M===0?w(a,1):w(a,0)}U.exports=function(a,n,r,t,h){if(h||(h={x:!0,y:!0}),h.x){var i=t("xperiod");i&&(t("xperiod0",T(i,n.xcalendar)),t("xperiodalignment"))}if(h.y){var s=t("yperiod");s&&(t("yperiod0",T(s,n.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../lib"),T=M.ensureSingle,e=M.identity,a=o("../../components/drawing"),n=o("./subtypes"),r=o("./line_points"),t=o("./link_traces"),h=o("../../lib/polygon").tester;U.exports=function(p,c,m,l,x,u){var A,_,g=!x,b=!!x&&x.duration>0,v=t(p,c,m);if(A=l.selectAll("g.trace").data(v,function(S){return S[0].trace.uid}),A.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),A.order(),i(p,A,c),b){u&&(_=u());var C=w.transition().duration(x.duration).ease(x.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});C.each(function(){l.selectAll("g.trace").each(function(S,k){s(p,k,c,S,v,this,x)})})}else A.each(function(S,k){s(p,k,c,S,v,this,x)});g&&A.exit().remove(),l.selectAll("path:not([d])").remove()};function i(d,p,c){p.each(function(m){var l=T(w.select(this),"g","fills");a.setClipUrl(l,c.layerClipId,d);var x=m[0].trace,u=[];x._ownfill&&u.push("_ownFill"),x._nexttrace&&u.push("_nextFill");var A=l.selectAll("g").data(u,e);A.enter().append("g"),A.exit().each(function(_){x[_]=null}).remove(),A.order().each(function(_){x[_]=T(w.select(this),"path","js-fill")})})}function s(d,p,c,m,l,x,u){var A;y(d,p,c,m,l);var _=!!u&&u.duration>0;function g(Oe){return _?Oe.transition():Oe}var b=c.xaxis,v=c.yaxis,C=m[0].trace,S=C.line,k=w.select(x),E=T(k,"g","errorbars"),F=T(k,"g","lines"),I=T(k,"g","points"),D=T(k,"g","text");if(f.getComponentMethod("errorbars","plot")(d,E,c,u),C.visible!==!0)return;g(k).style("opacity",C.opacity);var R,O,z=C.fill.charAt(C.fill.length-1);z!=="x"&&z!=="y"&&(z=""),m[0][c.isRangePlot?"nodeRangePlot3":"node3"]=k;var B="",G=[],Q=C._prevtrace;Q&&(B=Q._prevRevpath||"",O=Q._nextFill,G=Q._polygons);var X,j,re="",ue="",K,te,Y,V,ee,ne,Z,q=[],ie=M.noop;if(R=C._ownFill,n.hasLines(C)||C.fill!=="none"){for(O&&O.datum(m),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(K=a.steps(S.shape),te=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?K=te=function(Oe){var _e=Oe[Oe.length-1];return Oe.length>1&&Oe[0][0]===_e[0]&&Oe[0][1]===_e[1]?a.smoothclosed(Oe.slice(1),S.smoothing):a.smoothopen(Oe,S.smoothing)}:K=te=function(Oe){return"M"+Oe.join("L")},Y=function(Oe){return te(Oe.reverse())},q=r(m,{xaxis:b,yaxis:v,trace:C,connectGaps:C.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:C.fill}),Z=C._polygons=new Array(q.length),A=0;A<q.length;A++)C._polygons[A]=h(q[A]);q.length&&(V=q[0][0],ee=q[q.length-1],ne=ee[ee.length-1]),ie=function(Oe){return function(_e){if(X=K(_e),j=Y(_e),re?z?(re+="L"+X.substr(1),ue=j+("L"+ue.substr(1))):(re+="Z"+X,ue=j+"Z"+ue):(re=X,ue=j),n.hasLines(C)&&_e.length>1){var Ee=w.select(this);if(Ee.datum(m),Oe)g(Ee.style("opacity",0).attr("d",X).call(a.lineGroupStyle)).style("opacity",1);else{var Ze=g(Ee);Ze.attr("d",X),a.singleLineStyle(m,Ze)}}}}}var se=F.selectAll(".js-line").data(q);g(se.exit()).style("opacity",0).remove(),se.each(ie(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(se,c.layerClipId,d);function ae(Oe){g(Oe).attr("d","M0,0Z")}q.length?(R?(R.datum(m),V&&ne&&(z?(z==="y"?V[1]=ne[1]=v.c2p(0,!0):z==="x"&&(V[0]=ne[0]=b.c2p(0,!0)),g(R).attr("d","M"+ne+"L"+V+"L"+re.substr(1)).call(a.singleFillStyle,d)):g(R).attr("d",re+"Z").call(a.singleFillStyle,d))):O&&(C.fill.substr(0,6)==="tonext"&&re&&B?(C.fill==="tonext"?g(O).attr("d",re+"Z"+B+"Z").call(a.singleFillStyle,d):g(O).attr("d",re+"L"+B.substr(1)+"Z").call(a.singleFillStyle,d),C._polygons=C._polygons.concat(G)):(ae(O),C._polygons=null)),C._prevRevpath=ue,C._prevPolygons=Z):(R?ae(R):O&&ae(O),C._polygons=C._prevRevpath=C._prevPolygons=null);function oe(Oe){return Oe.filter(function(_e){return!_e.gap&&_e.vis})}function be(Oe){return Oe.filter(function(_e){return _e.vis})}function ce(Oe){return Oe.filter(function(_e){return!_e.gap})}function de(Oe){return Oe.id}function ye(Oe){if(Oe.ids)return de}function ge(){return!1}function me(Oe,_e,Ee){var Ze,Ge,Fe,Re=Ee[0].trace,We=n.hasMarkers(Re),xt=n.hasText(Re),Nt=ye(Re),tr=ge,Vt=ge;if(We||xt){var Pt=e,$t=Re.stackgroup,Ut=$t&&d._fullLayout._scatterStackOpts[b._id+v._id][$t].stackgaps==="infer zero";Re.marker.maxdisplayed||Re._needsCull?Pt=Ut?be:oe:$t&&!Ut&&(Pt=ce),We&&(tr=Pt),xt&&(Vt=Pt)}Ge=Oe.selectAll("path.point"),Ze=Ge.data(tr,Nt);var Lt=Ze.enter().append("path").classed("point",!0);_&&Lt.call(a.pointStyle,Re,d).call(a.translatePoints,b,v).style("opacity",0).transition().style("opacity",1),Ze.order();var Ye;We&&(Ye=a.makePointStyleFns(Re)),Ze.each(function(ot){var Ve=w.select(this),Ae=g(Ve);Fe=a.translatePoint(ot,Ae,b,v),Fe?(a.singlePointStyle(ot,Ae,Re,Ye,d),c.layerClipId&&a.hideOutsideRangePoint(ot,Ae,b,v,Re.xcalendar,Re.ycalendar),Re.customdata&&Ve.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):Ae.remove()}),_?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),Ge=_e.selectAll("g"),Ze=Ge.data(Vt,Nt),Ze.enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(ot){var Ve=w.select(this),Ae=g(Ve.select("text"));Fe=a.translatePoint(ot,Ae,b,v),Fe?c.layerClipId&&a.hideOutsideRangePoint(ot,Ve,b,v,Re.xcalendar,Re.ycalendar):Ve.remove()}),Ze.selectAll("text").call(a.textPointStyle,Re,d).each(function(ot){var Ve=b.c2p(ot.x),Ae=v.c2p(ot.y);w.select(this).selectAll("tspan.line").each(function(){g(w.select(this)).attr({x:Ve,y:Ae})})}),Ze.exit().remove()}I.datum(m),D.datum(m),me(I,D,m);var Me=C.cliponaxis===!1,Le=Me?null:c.layerClipId;a.setClipUrl(I,Le,d),a.setClipUrl(D,Le,d)}function y(d,p,c,m,l){var x=c.xaxis,u=c.yaxis,A=w.extent(M.simpleMap(x.range,x.r2c)),_=w.extent(M.simpleMap(u.range,u.r2c)),g=m[0].trace;if(!!n.hasMarkers(g)){var b=g.marker.maxdisplayed;if(b!==0){var v=m.filter(function(E){return E.x>=A[0]&&E.x<=A[1]&&E.y>=_[0]&&E.y<=_[1]}),C=Math.ceil(v.length/b),S=0;l.forEach(function(E,F){var I=E[0].trace;n.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<p&&S++});var k=Math.round(S*C/3+Math.floor(S/3)*C/7.1);m.forEach(function(E){delete E.vis}),v.forEach(function(E,F){Math.round((F+k)%C)===0&&(E.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(o,U,H){var w=o("./subtypes");U.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=[],t=e[0].trace,h,i,s,y,d=!w.hasMarkers(t)&&!w.hasText(t);if(d)return[];if(T===!1)for(h=0;h<e.length;h++)e[h].selected=0;else for(h=0;h<e.length;h++)i=e[h],s=a.c2p(i.x),y=n.c2p(i.y),i.i!==null&&T.contains([s,y],!1,h,M)?(r.push({pointNumber:i.i,x:a.c2d(i.x),y:n.c2d(i.y)}),i.selected=1):i.selected=0;return r}},{"./subtypes":961}],959:[function(o,U,H){var w=["orientation","groupnorm","stackgaps"];U.exports=function(M,T,e,a){var n=e._scatterStackOpts,r=a("stackgroup");if(r){var t=T.xaxis+T.yaxis,h=n[t];h||(h=n[t]={});var i=h[r],s=!1;i?i.traces.push(T):(i=h[r]={traceIndices:[],traces:[T]},s=!0);for(var y={orientation:T.x&&!T.y?"h":"v"},d=0;d<w.length;d++){var p=w[d],c=p+"Found";if(!i[c]){var m=M[p]!==void 0,l=p==="orientation";if((m||s)&&(i[p]=a(p,y[p]),l&&(i.fillDflt=i[p]==="h"?"tonextx":"tonexty"),m&&(i[c]=!0,!s&&(delete i.traces[0][p],l))))for(var x=0;x<i.traces.length-1;x++){var u=i.traces[x];u._input.fill!==u.fill&&(u.fill=i.fillDflt)}}}return i}}},{}],960:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../registry");function T(r){var t=w.select(r).selectAll("g.trace.scatter");t.style("opacity",function(h){return h[0].trace.opacity}),t.selectAll("g.points").each(function(h){var i=w.select(this),s=h.trace||h[0].trace;e(i,s,r)}),t.selectAll("g.text").each(function(h){var i=w.select(this),s=h.trace||h[0].trace;a(i,s,r)}),t.selectAll("g.trace path.js-line").call(f.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(f.fillGroupStyle,r),M.getComponentMethod("errorbars","style")(t)}function e(r,t,h){f.pointStyle(r.selectAll("path.point"),t,h)}function a(r,t,h){f.textPointStyle(r.selectAll("text"),t,h)}function n(r,t,h){var i=t[0].trace;i.selectedpoints?(f.selectedPointStyle(h.selectAll("path.point"),i),f.selectedTextStyle(h.selectAll("text"),i)):(e(h,i,r),a(h,i,r))}U.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:n}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(o,U,H){var w=o("../../lib");U.exports={hasLines:function(f){return f.visible&&f.mode&&f.mode.indexOf("lines")!==-1},hasMarkers:function(f){return f.visible&&(f.mode&&f.mode.indexOf("markers")!==-1||f.type==="splom")},hasText:function(f){return f.visible&&f.mode&&f.mode.indexOf("text")!==-1},isBubble:function(f){return w.isPlainObject(f.marker)&&w.isArrayOrTypedArray(f.marker.size)}}},{"../../lib":515}],962:[function(o,U,H){var w=o("../../lib");U.exports=function(f,M,T,e,a){a=a||{},e("textposition"),w.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(o,U,H){var w=o("../../lib"),f=o("../../registry");U.exports=function(T,e,a,n){var r=n("x"),t=n("y"),h,i=f.getComponentMethod("calendars","handleTraceDefaults");if(i(T,e,["x","y"],a),r){var s=w.minRowLength(r);t?h=Math.min(s,w.minRowLength(t)):(h=s,n("y0"),n("dy"))}else{if(!t)return 0;h=w.minRowLength(t),n("x0"),n("dx")}return e._length=h,h}},{"../../lib":515,"../../registry":647}],964:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../../components/colorscale/attributes"),M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=o("../../plots/template_attributes").hovertemplateAttrs,e=o("../../plots/template_attributes").texttemplateAttrs,a=o("../../plots/attributes"),n=o("../../constants/gl3d_dashes"),r=o("../../constants/gl3d_markers"),t=o("../../lib/extend").extendFlat,h=o("../../plot_api/edit_types").overrideAll,i=o("../../lib/sort_object_keys"),s=w.line,y=w.marker,d=y.line,p=t({width:s.width,dash:{valType:"enumerated",values:i(n),dflt:"solid"}},f("line"));function c(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var m=U.exports=h({x:w.x,y:w.y,z:{valType:"data_array"},text:t({},w.text,{}),texttemplate:e({},{}),hovertext:t({},w.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:t({},w.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:c(),y:c(),z:c()},connectgaps:w.connectgaps,line:p,marker:t({symbol:{valType:"enumerated",values:i(r),dflt:"circle",arrayOk:!0},size:t({},y.size,{dflt:8}),sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:t({},y.opacity,{arrayOk:!1}),colorbar:y.colorbar,line:t({width:t({},d.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:t({},w.textposition,{dflt:"top center"}),textfont:{color:w.textfont.color,size:w.textfont.size,family:t({},w.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:t({},a.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(o,U,H){var w=o("../scatter/arrays_to_calcdata"),f=o("../scatter/colorscale_calc");U.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return w(a,e),f(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(o,U,H){var w=o("../../registry");function f(e,a,n,r){if(!a||!a.visible)return null;for(var t=w.getComponentMethod("errorbars","makeComputeError")(a),h=new Array(e.length),i=0;i<e.length;i++){var s=t(+e[i],i);if(r.type==="log"){var y=r.c2l(e[i]),d=e[i]-s[0],p=e[i]+s[1];if(h[i]=[(r.c2l(d,!0)-y)*n,(r.c2l(p,!0)-y)*n],d>0){var c=r.c2l(d);r._lowerLogErrorBound||(r._lowerLogErrorBound=c),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,c)}}else h[i]=[-s[0]*n,s[1]*n]}return h}function M(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,n){var r=[f(e.x,e.error_x,a[0],n.xaxis),f(e.y,e.error_y,a[1],n.yaxis),f(e.z,e.error_z,a[2],n.zaxis)],t=M(r);if(t===0)return null;for(var h=new Array(t),i=0;i<t;i++){for(var s=[[0,0,0],[0,0,0]],y=0;y<3;y++)if(r[y])for(var d=0;d<2;d++)s[d][y]=r[y][i][d];h[i]=s}return h}U.exports=T},{"../../registry":647}],967:[function(o,U,H){var w=o("../../../stackgl_modules").gl_line3d,f=o("../../../stackgl_modules").gl_scatter3d,M=o("../../../stackgl_modules").gl_error3d,T=o("../../../stackgl_modules").gl_mesh3d,e=o("../../../stackgl_modules").delaunay_triangulate,a=o("../../lib"),n=o("../../lib/str2rgbarray"),r=o("../../lib/gl_format_color").formatColor,t=o("../scatter/make_bubble_size_func"),h=o("../../constants/gl3d_dashes"),i=o("../../constants/gl3d_markers"),s=o("../../plots/cartesian/axes"),y=o("../../components/fx/helpers").appendArrayPointValue,d=o("./calc_errors");function p(E,F){this.scene=E,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;c.handlePick=function(E){if(E.object&&(E.object===this.linePlot||E.object===this.delaunayMesh||E.object===this.textMarkers||E.object===this.scatterPlot)){var F=E.index=E.data.index;return E.object.highlight&&E.object.highlight(null),this.scatterPlot&&(E.object=this.scatterPlot,this.scatterPlot.highlight(E.data)),E.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(E.textLabel=this.textLabels[F]):E.textLabel=this.textLabels),E.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(E,F,I){var D=(I+1)%3,R=(I+2)%3,O=[],z=[],B;for(B=0;B<E.length;++B){var G=E[B];isNaN(G[D])||!isFinite(G[D])||isNaN(G[R])||!isFinite(G[R])||(O.push([G[D],G[R]]),z.push(B))}var Q=e(O);for(B=0;B<Q.length;++B)for(var X=Q[B],j=0;j<X.length;++j)X[j]=z[X[j]];return{positions:E,cells:Q,meshColor:F}}function l(E){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=E[R];O&&O.copy_zstyle!==!1&&E[2].visible!==!1&&(O=E[2]),!(!O||!O.visible)&&(F[R]=O.width/2,I[R]=n(O.color),D[R]=O.thickness)}return{capSize:F,color:I,lineWidth:D}}function x(E){return E==null?0:E.indexOf("left")>-1?-1:E.indexOf("right")>-1?1:0}function u(E){return E==null?0:E.indexOf("top")>-1?-1:E.indexOf("bottom")>-1?1:0}function A(E){var F=0,I=0,D=[F,I];if(Array.isArray(E))for(var R=0;R<E.length;R++)D[R]=[F,I],E[R]&&(D[R][0]=x(E[R]),D[R][1]=u(E[R]));else D[0]=x(E),D[1]=u(E);return D}function _(E,F){return F(E*4)}function g(E){return i[E]}function b(E,F,I,D,R){var O=null;if(a.isArrayOrTypedArray(E)){O=[];for(var z=0;z<F;z++)E[z]===void 0?O[z]=D:O[z]=I(E[z],R)}else O=I(E,a.identity);return O}function v(E,F){var I=[],D=E.fullSceneLayout,R=E.dataScale,O=D.xaxis,z=D.yaxis,B=D.zaxis,G=F.marker,Q=F.line,X=F.x||[],j=F.y||[],re=F.z||[],ue=X.length,K=F.xcalendar,te=F.ycalendar,Y=F.zcalendar,V,ee,ne,Z,q,ie;for(q=0;q<ue;q++)V=O.d2l(X[q],0,K)*R[0],ee=z.d2l(j[q],0,te)*R[1],ne=B.d2l(re[q],0,Y)*R[2],I[q]=[V,ee,ne];if(Array.isArray(F.text))ie=F.text;else if(F.text!==void 0)for(ie=new Array(ue),q=0;q<ue;q++)ie[q]=F.text;function se(Ge,Fe){var Re=D[Ge];return s.tickText(Re,Re.d2l(Fe),!0).text}var ae=F.texttemplate;if(ae){var oe=E.fullLayout,be=oe._d3locale,ce=Array.isArray(ae),de=ce?Math.min(ae.length,ue):ue,ye=ce?function(Ge){return ae[Ge]}:function(){return ae};for(ie=new Array(de),q=0;q<de;q++){var ge={x:X[q],y:j[q],z:re[q]},me={xLabel:se("xaxis",X[q]),yLabel:se("yaxis",j[q]),zLabel:se("zaxis",re[q])},Me={};y(Me,F,q);var Le=F._meta||{};ie[q]=a.texttemplateString(ye(q),me,be,Me,ge,Le)}}if(Z={position:I,mode:F.mode,text:ie},"line"in F&&(Z.lineColor=r(Q,1,ue),Z.lineWidth=Q.width,Z.lineDashes=Q.dash),"marker"in F){var Oe=t(F);Z.scatterColor=r(G,1,ue),Z.scatterSize=b(G.size,ue,_,20,Oe),Z.scatterMarker=b(G.symbol,ue,g,"\u25CF"),Z.scatterLineWidth=G.line.width,Z.scatterLineColor=r(G.line,1,ue),Z.scatterAngle=0}"textposition"in F&&(Z.textOffset=A(F.textposition),Z.textColor=r(F.textfont,1,ue),Z.textSize=b(F.textfont.size,ue,a.identity,12),Z.textFont=F.textfont.family,Z.textAngle=0);var _e=["x","y","z"];for(Z.project=[!1,!1,!1],Z.projectScale=[1,1,1],Z.projectOpacity=[1,1,1],q=0;q<3;++q){var Ee=F.projection[_e[q]];(Z.project[q]=Ee.show)&&(Z.projectOpacity[q]=Ee.opacity,Z.projectScale[q]=Ee.scale)}Z.errorBounds=d(F,R,D);var Ze=l([F.error_x,F.error_y,F.error_z]);return Z.errorColor=Ze.color,Z.errorLineWidth=Ze.lineWidth,Z.errorCapSize=Ze.capSize,Z.delaunayAxis=F.surfaceaxis,Z.delaunayColor=n(F.surfacecolor),Z}function C(E){if(a.isArrayOrTypedArray(E)){var F=E[0];return a.isArrayOrTypedArray(F)&&(E=F),"rgb("+E.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(E){return a.isArrayOrTypedArray(E)?E.length===4&&typeof E[0]=="number"?C(E):E.map(C):null}c.update=function(E){var F=this.scene.glplot.gl,I,D,R,O,z=h.solid;this.data=E;var B=v(this.scene,E);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in h&&(z=h[B.lineDashes]),this.color=S(B.scatterColor)||S(B.lineColor),this.dataPoints=B.position,I={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:E.opacity,connectGaps:E.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=w(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=E.opacity;if(E.marker&&E.marker.opacity&&(G*=E.marker.opacity),D={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:G,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=f(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:E.opacity},this.textLabels=E.hovertext||E.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=f(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:E.opacity},this.errorBars?B.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=M(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var Q=m(B.position,B.delaunayColor,B.delaunayAxis);Q.opacity=E.opacity,this.delaunayMesh?this.delaunayMesh.update(Q):(Q.gl=F,this.delaunayMesh=T(Q),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(E,F){var I=new p(E,F.uid);return I.update(F),I}U.exports=k},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../scatter/subtypes"),T=o("../scatter/marker_defaults"),e=o("../scatter/line_defaults"),a=o("../scatter/text_defaults"),n=o("./attributes");U.exports=function(h,i,s,y){function d(_,g){return f.coerce(h,i,n,_,g)}var p=r(h,i,d,y);if(!p){i.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),M.hasLines(i)&&(d("connectgaps"),e(h,i,s,y,d)),M.hasMarkers(i)&&T(h,i,s,y,d,{noSelect:!0,noAngle:!0}),M.hasText(i)&&(d("texttemplate"),a(h,i,y,d,{noSelect:!0}));var c=(i.line||{}).color,m=(i.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",c||m);for(var l=["x","y","z"],x=0;x<3;++x){var u="projection."+l[x];d(u+".show")&&(d(u+".opacity"),d(u+".scale"))}var A=w.getComponentMethod("errorbars","supplyDefaults");A(h,i,c||m||s,{axis:"z"}),A(h,i,c||m||s,{axis:"y",inherit:"z"}),A(h,i,c||m||s,{axis:"x",inherit:"z"})};function r(t,h,i,s){var y=0,d=i("x"),p=i("y"),c=i("z"),m=w.getComponentMethod("calendars","handleTraceDefaults");return m(t,h,["x","y","z"],s),d&&p&&c&&(y=Math.min(d.length,p.length,c.length),h._length=h._xlength=h._ylength=h._zlength=y),y}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(o,U,H){U.exports={plot:o("./convert"),attributes:o("./attributes"),markerSymbols:o("../../constants/gl3d_markers"),supplyDefaults:o("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:o("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../../plots/attributes"),M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../../plots/template_attributes").texttemplateAttrs,e=o("../../components/colorscale/attributes"),a=o("../../lib/extend").extendFlat,n=w.marker,r=w.line,t=n.line;U.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},w.mode,{dflt:"markers"}),text:a({},w.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},w.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,backoff:r.backoff,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:w.connectgaps,fill:a({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,angle:n.angle,angleref:n.angleref,standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:t.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:a({},f.hoverinfo,{flags:["a","b","text","name"]}),hoveron:w.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../scatter/colorscale_calc"),M=o("../scatter/arrays_to_calcdata"),T=o("../scatter/calc_selection"),e=o("../scatter/calc").calcMarkerSize,a=o("../carpet/lookup_carpetid");U.exports=function(r,t){var h=t._carpetTrace=a(r,t);if(!(!h||!h.visible||h.visible==="legendonly")){var i;t.xaxis=h.xaxis,t.yaxis=h.yaxis;var s=t._length,y=new Array(s),d,p,c=!1;for(i=0;i<s;i++)if(d=t.a[i],p=t.b[i],w(d)&&w(p)){var m=h.ab2xy(+d,+p,!0),l=h.isVisible(+d,+p);l||(c=!0),y[i]={x:m[0],y:m[1],a:d,b:p,vis:l}}else y[i]={x:!1,y:!1};return t._needsCull=c,y[0].carpet=h,y[0].trace=t,e(t,s),f(r,t),M(y,t),T(y,t),y}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/constants"),M=o("../scatter/subtypes"),T=o("../scatter/marker_defaults"),e=o("../scatter/line_defaults"),a=o("../scatter/line_shape_defaults"),n=o("../scatter/text_defaults"),r=o("../scatter/fillcolor_defaults"),t=o("./attributes");U.exports=function(i,s,y,d){function p(_,g){return w.coerce(i,s,t,_,g)}p("carpet"),s.xaxis="x",s.yaxis="y";var c=p("a"),m=p("b"),l=Math.min(c.length,m.length);if(!l){s.visible=!1;return}s._length=l,p("text"),p("texttemplate"),p("hovertext");var x=l<f.PTS_LINESONLY?"lines+markers":"lines";p("mode",x),M.hasLines(s)&&(e(i,s,y,d,p,{backoff:!0}),a(i,s,p),p("connectgaps")),M.hasMarkers(s)&&T(i,s,y,d,p,{gradient:!0}),M.hasText(s)&&n(i,s,d,p);var u=[];(M.hasMarkers(s)||M.hasText(s))&&(p("marker.maxdisplayed"),u.push("points")),p("fill"),s.fill!=="none"&&(r(i,s,y,p),M.hasLines(s)||a(i,s,p)),(s.fill==="tonext"||s.fill==="toself")&&u.push("fills");var A=p("hoveron",u.join("+")||"points");A!=="fills"&&p("hovertemplate"),w.coerceSelectionMarkerOpacity(s,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(o,U,H){U.exports=function(f,M,T,e,a){var n=e[a];return f.a=n.a,f.b=n.b,f.y=n.y,f}},{}],974:[function(o,U,H){U.exports=function(f,M){var T={},e=M._carpet,a=e.ab2ij([f.a,f.b]),n=Math.floor(a[0]),r=a[0]-n,t=Math.floor(a[1]),h=a[1]-t,i=e.evalxy([],n,t,r,h);return T.yLabel=i[1].toFixed(3),T}},{}],975:[function(o,U,H){var w=o("../scatter/hover"),f=o("../../lib").fillText;U.exports=function(T,e,a,n){var r=w(T,e,a,n);if(!r||r[0].index===!1)return;var t=r[0];if(t.index===void 0){var h=1-t.y0/T.ya._length,i=T.xa._length,s=i*h/2,y=i-s;return t.x0=Math.max(Math.min(t.x0,y),s),t.x1=Math.max(Math.min(t.x1,y),s),r}var d=t.cd[t.index];t.a=d.a,t.b=d.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var p=t.trace,c=p._carpet,m=p._module.formatLabels(d,p);t.yLabel=m.yLabel,delete t.text;var l=[];function x(_,g){var b;_.labelprefix&&_.labelprefix.length>0?b=_.labelprefix.replace(/ = $/,""):b=_._hovertitle,l.push(b+": "+g.toFixed(3)+_.labelsuffix)}if(!p.hovertemplate){var u=d.hi||p.hoverinfo,A=u.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&x(c.aaxis,d.a),A.indexOf("b")!==-1&&x(c.baxis,d.b),l.push("y: "+t.yLabel),A.indexOf("text")!==-1&&f(d,p,l),t.extraText=l.join("<br>")}return r}},{"../../lib":515,"../scatter/hover":947}],976:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),plot:o("./plot"),style:o("../scatter/style").style,styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover"),selectPoints:o("../scatter/select"),eventData:o("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:o("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(o,U,H){var w=o("../scatter/plot"),f=o("../../plots/cartesian/axes"),M=o("../../components/drawing");U.exports=function(e,a,n,r){var t,h,i,s=n[0][0].carpet,y=f.getFromId(e,s.xaxis||"x"),d=f.getFromId(e,s.yaxis||"y"),p={xaxis:y,yaxis:d,plot:a.plot};for(t=0;t<n.length;t++)h=n[t][0].trace,h._xA=y,h._yA=d;for(w(e,p,n,r),t=0;t<n.length;t++)h=n[t][0].trace,i=r.selectAll("g.trace"+h.uid+" .js-line"),M.setClipUrl(i,n[t][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../scatter/attributes"),T=o("../../plots/attributes"),e=o("../../components/colorscale/attributes"),a=o("../../components/drawing/attributes").dash,n=o("../../lib/extend").extendFlat,r=o("../../plot_api/edit_types").overrideAll,t=M.marker,h=M.line,i=t.line;U.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:h.color,width:h.width,dash:a},connectgaps:M.connectgaps,marker:n({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:n({},t.angleref,{values:["previous","up","north"]}),standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:n({width:i.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../constants/numerical").BADNUM,M=o("../scatter/colorscale_calc"),T=o("../scatter/arrays_to_calcdata"),e=o("../scatter/calc_selection"),a=o("../../lib")._;function n(r){return r&&typeof r=="string"}U.exports=function(t,h){var i=Array.isArray(h.locations),s=i?h.locations.length:h._length,y=new Array(s),d;h.geojson?d=function(u){return n(u)||w(u)}:d=n;for(var p=0;p<s;p++){var c=y[p]={};if(i){var m=h.locations[p];c.loc=d(m)?m:null}else{var l=h.lon[p],x=h.lat[p];w(l)&&w(x)?c.lonlat=[+l,+x]:c.lonlat=[f,f]}}return T(y,h),M(t,h),e(y,h),s&&(y[0].t={labels:{lat:a(t,"lat:")+" ",lon:a(t,"lon:")+" "}}),y}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../scatter/marker_defaults"),T=o("../scatter/line_defaults"),e=o("../scatter/text_defaults"),a=o("../scatter/fillcolor_defaults"),n=o("./attributes");U.exports=function(t,h,i,s){function y(A,_){return w.coerce(t,h,n,A,_)}var d=y("locations"),p;if(d&&d.length){var c=y("geojson"),m;(typeof c=="string"&&c!==""||w.isPlainObject(c))&&(m="geojson-id");var l=y("locationmode",m);l==="geojson-id"&&y("featureidkey"),p=d.length}else{var x=y("lon")||[],u=y("lat")||[];p=Math.min(x.length,u.length)}if(!p){h.visible=!1;return}h._length=p,y("text"),y("hovertext"),y("hovertemplate"),y("mode"),f.hasLines(h)&&(T(t,h,i,s,y),y("connectgaps")),f.hasMarkers(h)&&M(t,h,i,s,y,{gradient:!0}),f.hasText(h)&&(y("texttemplate"),e(t,h,s,y)),y("fill"),h.fill!=="none"&&a(t,h,i,y),w.coerceSelectionMarkerOpacity(h,y)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(o,U,H){U.exports=function(f,M,T,e,a){f.lon=M.lon,f.lat=M.lat,f.location=M.loc?M.loc:null;var n=e[a];return n.fIn&&n.fIn.properties&&(f.properties=n.fIn.properties),f}},{}],982:[function(o,U,H){var w=o("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.geo]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(o,U,H){var w=o("../../components/fx"),f=o("../../constants/numerical").BADNUM,M=o("../scatter/get_trace_color"),T=o("../../lib").fillText,e=o("./attributes");U.exports=function(r,t,h){var i=r.cd,s=i[0].trace,y=r.xa,d=r.ya,p=r.subplot,c=p.projection.isLonLatOverEdges,m=p.project;function l(v){var C=v.lonlat;if(C[0]===f||c(C))return 1/0;var S=m(C),k=m([t,h]),E=Math.abs(S[0]-k[0]),F=Math.abs(S[1]-k[1]),I=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(E*E+F*F)-I,1-3/I)}if(w.getClosest(i,l,r),r.index!==!1){var x=i[r.index],u=x.lonlat,A=[y.c2p(u),d.c2p(u)],_=x.mrc||1;r.x0=A[0]-_,r.x1=A[0]+_,r.y0=A[1]-_,r.y1=A[1]+_,r.loc=x.loc,r.lon=u[0],r.lat=u[1];var g={};g[s.geo]={_subplot:p};var b=s._module.formatLabels(x,s,g);return r.lonLabel=b.lonLabel,r.latLabel=b.latLabel,r.color=M(s,x),r.extraText=a(s,x,r,i[0].t.labels),r.hovertemplate=s.hovertemplate,[r]}};function a(n,r,t,h){if(n.hovertemplate)return;var i=r.hi||n.hoverinfo,s=i==="all"?e.hoverinfo.flags:i.split("+"),y=s.indexOf("location")!==-1&&Array.isArray(n.locations),d=s.indexOf("lon")!==-1,p=s.indexOf("lat")!==-1,c=s.indexOf("text")!==-1,m=[];function l(x){return x+"\xB0"}return y?m.push(r.loc):d&&p?m.push("("+l(t.latLabel)+", "+l(t.lonLabel)+")"):d?m.push(h.lon+l(t.lonLabel)):p&&m.push(h.lat+l(t.latLabel)),c&&T(r,n,m),m.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),calcGeoJSON:o("./plot").calcGeoJSON,plot:o("./plot").plot,style:o("./style"),styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover"),eventData:o("./event_data"),selectPoints:o("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:o("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../lib/topojson_utils").getTopojsonFeatures,T=o("../../lib/geojson_utils"),e=o("../../lib/geo_location_utils"),a=o("../../plots/cartesian/autorange").findExtremes,n=o("../../constants/numerical").BADNUM,r=o("../scatter/calc").calcMarkerSize,t=o("../scatter/subtypes"),h=o("./style");function i(y,d,p){var c=d.layers.frontplot.select(".scatterlayer"),m=f.makeTraceGroups(c,p,"trace scattergeo");function l(x,u){x.lonlat[0]===n&&w.select(u).remove()}m.selectAll("*").remove(),m.each(function(x){var u=w.select(this),A=x[0].trace;if(t.hasLines(A)||A.fill!=="none"){var _=T.calcTraceToLineCoords(x),g=A.fill!=="none"?T.makePolygon(_):T.makeLine(_);u.selectAll("path.js-line").data([{geojson:g,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(A)&&u.selectAll("path.point").data(f.identity).enter().append("path").classed("point",!0).each(function(b){l(b,this)}),t.hasText(A)&&u.selectAll("g").data(f.identity).enter().append("g").append("text").each(function(b){l(b,this)}),h(y,x)})}function s(y,d){var p=y[0].trace,c=d[p.geo],m=c._subplot,l=p._length,x,u;if(Array.isArray(p.locations)){var A=p.locationmode,_=A==="geojson-id"?e.extractTraceFeature(y):M(p,m.topojson);for(x=0;x<l;x++){u=y[x];var g=A==="geojson-id"?u.fOut:e.locationToFeature(A,u.loc,_);u.lonlat=g?g.properties.ct:[n,n]}}var b={padded:!0},v,C;if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(p));v=[S[0],S[2]],C=[S[1],S[3]]}else{for(v=new Array(l),C=new Array(l),x=0;x<l;x++)u=y[x],v[x]=u.lonlat[0],C[x]=u.lonlat[1];b.ppad=r(p,l)}p._extremes.lon=a(c.lonaxis._ax,v,b),p._extremes.lat=a(c.lataxis._ax,C,b)}U.exports={calcGeoJSON:s,plot:i}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(o,U,H){var w=o("../scatter/subtypes"),f=o("../../constants/numerical").BADNUM;U.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],h=a[0].trace,i,s,y,d,p,c=!w.hasMarkers(h)&&!w.hasText(h);if(c)return[];if(e===!1)for(p=0;p<a.length;p++)a[p].selected=0;else for(p=0;p<a.length;p++)i=a[p],s=i.lonlat,s[0]!==f&&(y=n.c2p(s),d=r.c2p(s),e.contains([y,d],null,p,T)?(t.push({pointNumber:p,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return t}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../components/color"),T=o("../scatter/style"),e=T.stylePoints,a=T.styleText;U.exports=function(t,h){h&&n(t,h)};function n(r,t){var h=t[0].trace,i=t[0].node3;i.style("opacity",t[0].trace.opacity),e(i,h,r),a(i,h,r),i.selectAll("path.js-line").style("fill","none").each(function(s){var y=w.select(this),d=s.trace,p=d.line||{};y.call(M.stroke,p.color).call(f.dashLine,p.dash||"",p.width||0),d.fill!=="none"&&y.call(M.fill,d.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(o,U,H){var w=o("../../plots/attributes"),f=o("../scatter/attributes"),M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=o("../../components/colorscale/attributes"),e=o("../../lib/sort_object_keys"),a=o("../../lib/extend").extendFlat,n=o("../../plot_api/edit_types").overrideAll,r=o("./constants").DASHES,t=f.line,h=f.marker,i=h.line,s=U.exports=n({x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:f.text,hovertext:f.hovertext,textposition:f.textposition,textfont:f.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(r),dflt:"solid"}},marker:a({},T("marker"),{symbol:h.symbol,angle:h.angle,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:h.opacity,colorbar:h.colorbar,line:a({},T("marker.line"),{width:i.width})}),connectgaps:f.connectgaps,fill:a({},f.fill,{dflt:"none"}),fillcolor:f.fillcolor,selected:{marker:f.selected.marker,textfont:f.selected.textfont},unselected:{marker:f.unselected.marker,textfont:f.unselected.textfont},opacity:w.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=f.hovertemplate,s.texttemplate=f.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(o,U,H){var w=o("./hover");U.exports={moduleType:"trace",name:"scattergl",basePlotModule:o("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("../scatter/cross_trace_defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),hoverPoints:w.hoverPoints,selectPoints:o("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(o,U,H){var w=o("@plotly/point-cluster"),f=o("../../lib"),M=o("../../plots/cartesian/axis_ids"),T=o("../../plots/cartesian/autorange").findExtremes,e=o("../../plots/cartesian/align_period"),a=o("../scatter/calc"),n=a.calcMarkerSize,r=a.calcAxisExpansion,t=a.setFirstScatter,h=o("../scatter/colorscale_calc"),i=o("./convert"),s=o("./scene_update"),y=o("../../constants/numerical").BADNUM,d=o("./constants").TOO_MANY_POINTS;U.exports=function(l,x){var u=l._fullLayout,A=x._xA=M.getFromId(l,x.xaxis,"x"),_=x._yA=M.getFromId(l,x.yaxis,"y"),g=u._plots[x.xaxis+x.yaxis],b=x._length,v=b>=d,C=b*2,S={},k,E=A.makeCalcdata(x,"x"),F=_.makeCalcdata(x,"y"),I=e(x,A,"x",E),D=e(x,_,"y",F),R=I.vals,O=D.vals;x._x=R,x._y=O,x.xperiodalignment&&(x._origX=E,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=F,x._yStarts=D.starts,x._yEnds=D.ends);var z=new Array(C),B=new Array(b);for(k=0;k<b;k++)z[k*2]=R[k]===y?NaN:R[k],z[k*2+1]=O[k]===y?NaN:O[k],B[k]=k;if(A.type==="log")for(k=0;k<C;k+=2)z[k]=A.c2l(z[k]);if(_.type==="log")for(k=1;k<C;k+=2)z[k]=_.c2l(z[k]);v&&A.type!=="log"&&_.type!=="log"?S.tree=w(z):S.ids=B,h(l,x);var G=c(l,g,x,z,R,O),Q=s(l,g);t(u,x);var X;return v?G.marker&&(X=G.marker.sizeAvg||Math.max(G.marker.size,3)):X=n(x,b),r(l,x,A,_,R,O,X),G.errorX&&p(x,A,G.errorX),G.errorY&&p(x,_,G.errorY),G.fill&&!Q.fill2d&&(Q.fill2d=!0),G.marker&&!Q.scatter2d&&(Q.scatter2d=!0),G.line&&!Q.line2d&&(Q.line2d=!0),(G.errorX||G.errorY)&&!Q.error2d&&(Q.error2d=!0),G.text&&!Q.glText&&(Q.glText=!0),G.marker&&(G.marker.snap=b),Q.lineOptions.push(G.line),Q.errorXOptions.push(G.errorX),Q.errorYOptions.push(G.errorY),Q.fillOptions.push(G.fill),Q.markerOptions.push(G.marker),Q.markerSelectedOptions.push(G.markerSel),Q.markerUnselectedOptions.push(G.markerUnsel),Q.textOptions.push(G.text),Q.textSelectedOptions.push(G.textSel),Q.textUnselectedOptions.push(G.textUnsel),Q.selectBatch.push([]),Q.unselectBatch.push([]),S._scene=Q,S.index=Q.count,S.x=R,S.y=O,S.positions=z,Q.count++,[{x:!1,y:!1,t:S,trace:x}]};function p(m,l,x){var u=m._extremes[l._id],A=T(l,x._bnds,{padded:!0});u.min=u.min.concat(A.min),u.max=u.max.concat(A.max)}function c(m,l,x,u,A,_){var g=i.style(m,x);if(g.marker&&(g.marker.positions=u),g.line&&u.length>1&&f.extendFlat(g.line,i.linePositions(m,x,u)),g.errorX||g.errorY){var b=i.errorBarPositions(m,x,u,A,_);g.errorX&&f.extendFlat(g.errorX,b.x),g.errorY&&f.extendFlat(g.errorY,b.y)}return g.text&&(f.extendFlat(g.text,{positions:u},i.textPosition(m,x,g.text,g.marker)),f.extendFlat(g.textSel,{positions:u},i.textPosition(m,x,g.text,g.markerSel)),f.extendFlat(g.textUnsel,{positions:u},i.textPosition(m,x,g.text,g.markerUnsel))),g}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(o,U,H){var w=20;U.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:w,SYMBOL_STROKE:w/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(o,U,H){var w=o("fast-isnumeric"),f=o("svg-path-sdf"),M=o("color-normalize"),T=o("../../registry"),e=o("../../lib"),a=o("../../components/drawing"),n=o("../../plots/cartesian/axis_ids"),r=o("../../lib/gl_format_color").formatColor,t=o("../scatter/subtypes"),h=o("../scatter/make_bubble_size_func"),i=o("./helpers"),s=o("./constants"),y=o("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=o("../../components/fx/helpers").appendArrayPointValue;function c(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(t.hasText(D)&&(O.text=m(I,D),O.textSel=u(I,D,D.selected),O.textUnsel=u(I,D,D.unselected)),t.hasMarkers(D)&&(O.marker=l(I,D),O.markerSel=x(I,D,D.selected),O.markerUnsel=x(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var B=D.marker.opacity;for(O.markerUnsel.opacity=new Array(B.length),R=0;R<B.length;R++)O.markerUnsel.opacity[R]=y*B[R]}if(t.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var G=(s.DASHES[D.line.dash]||[1]).slice();for(R=0;R<G.length;++R)G[R]*=D.line.width*z;O.line.dashes=G}return D.error_x&&D.error_x.visible&&(O.errorX=A(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(O.errorY=A(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function m(I,D){var R=I._fullLayout,O=D._length,z=D.textfont,B=D.textposition,G=Array.isArray(B)?B:[B],Q=z.color,X=z.size,j=z.family,re={},ue,K=I._context.plotGlPixelRatio,te=D.texttemplate;if(te){re.text=[];var Y=R._d3locale,V=Array.isArray(te),ee=V?Math.min(te.length,O):O,ne=V?function(be){return te[be]}:function(){return te};for(ue=0;ue<ee;ue++){var Z={i:ue},q=D._module.formatLabels(Z,D,R),ie={};p(ie,D,ue);var se=D._meta||{};re.text.push(e.texttemplateString(ne(ue),q,Y,ie,Z,se))}}else Array.isArray(D.text)&&D.text.length<O?re.text=D.text.slice():re.text=D.text;if(Array.isArray(re.text))for(ue=re.text.length;ue<O;ue++)re.text[ue]="";for(re.opacity=D.opacity,re.font={},re.align=[],re.baseline=[],ue=0;ue<G.length;ue++){var ae=G[ue].split(/\s+/);switch(ae[1]){case"left":re.align.push("right");break;case"right":re.align.push("left");break;default:re.align.push(ae[1])}switch(ae[0]){case"top":re.baseline.push("bottom");break;case"bottom":re.baseline.push("top");break;default:re.baseline.push(ae[0])}}if(Array.isArray(Q))for(re.color=new Array(O),ue=0;ue<O;ue++)re.color[ue]=Q[ue];else re.color=Q;if(e.isArrayOrTypedArray(X)||Array.isArray(j))for(re.font=new Array(O),ue=0;ue<O;ue++){var oe=re.font[ue]={};oe.size=(e.isTypedArray(X)?X[ue]:Array.isArray(X)?w(X[ue])?X[ue]:0:X)*K,oe.family=Array.isArray(j)?j[ue]:j}else re.font={size:X*K,family:j};return re}function l(I,D){var R=D._length,O=D.marker,z={},B,G=e.isArrayOrTypedArray(O.symbol),Q=e.isArrayOrTypedArray(O.angle),X=e.isArrayOrTypedArray(O.color),j=e.isArrayOrTypedArray(O.line.color),re=e.isArrayOrTypedArray(O.opacity),ue=e.isArrayOrTypedArray(O.size),K=e.isArrayOrTypedArray(O.line.width),te;if(G||(te=i.isOpenSymbol(O.symbol)),G||X||j||re||Q){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var Y=O.symbol,V=O.angle,ee=r(O,O.opacity,R),ne=r(O.line,O.opacity,R);if(!Array.isArray(ne[0])){var Z=ne;for(ne=Array(R),B=0;B<R;B++)ne[B]=Z}if(!Array.isArray(ee[0])){var q=ee;for(ee=Array(R),B=0;B<R;B++)ee[B]=q}if(!Array.isArray(Y)){var ie=Y;for(Y=Array(R),B=0;B<R;B++)Y[B]=ie}if(!Array.isArray(V)){var se=V;for(V=Array(R),B=0;B<R;B++)V[B]=se}for(z.symbols=Y,z.angles=V,z.colors=ee,z.borderColors=ne,B=0;B<R;B++)G&&(te=i.isOpenSymbol(O.symbol[B])),te&&(ne[B]=ee[B].slice(),ee[B]=ee[B].slice(),ee[B][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),B=0;B<R;B++)z.markers[B]=S({mx:z.symbols[B],ma:z.angles[B]},D)}else te?(z.color=M(O.color,"uint8"),z.color[3]=0,z.borderColor=M(O.color,"uint8")):(z.color=M(O.color,"uint8"),z.borderColor=M(O.line.color,"uint8")),z.opacity=D.opacity*O.opacity,z.marker=S({mx:O.symbol,ma:O.angle},D);var ae=1,oe=h(D,ae),be;if(ue||K){var ce=z.sizes=new Array(R),de=z.borderSizes=new Array(R),ye=0,ge;if(ue){for(B=0;B<R;B++)ce[B]=oe(O.size[B]),ye+=ce[B];ge=ye/R}else for(be=oe(O.size),B=0;B<R;B++)ce[B]=be;if(K)for(B=0;B<R;B++)de[B]=O.line.width[B];else for(be=O.line.width,B=0;B<R;B++)de[B]=be;z.sizeAvg=ge}else z.size=oe(O&&O.size||10),z.borderSizes=oe(O.line.width);return z}function x(I,D,R){var O=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},O,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function u(I,D,R){var O={};if(!R)return O;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),O=m(I,z)}return O}function A(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var _=s.SYMBOL_SDF_SIZE,g=s.SYMBOL_SIZE,b=s.SYMBOL_STROKE,v={},C=a.symbolFuncs[0](g*.05);function S(I,D){var R=I.mx;if(R==="circle")return null;var O,z,B=a.symbolNumber(R),G=a.symbolFuncs[B%100],Q=!!a.symbolNoDot[B%100],X=!!a.symbolNoFill[B%100],j=i.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),v[R])return v[R];var re=a.getMarkerAngle(I,D);return j&&!Q?O=G(g*1.1,re)+C:O=G(g,re),z=f(O,{w:_,h:_,viewBox:[-g,-g,g,g],stroke:X?b:-b}),v[R]=z,z||null}function k(I,D,R){var O=R.length,z=O/2,B,G;if(t.hasLines(D)&&z)if(D.line.shape==="hv"){for(B=[],G=0;G<z-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?B.push(R[G*2+2],R[G*2+1]):B.push(NaN,NaN));B.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(B=[],G=0;G<z-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?B.push(R[G*2],R[G*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var Q=(R[G*2]+R[G*2+2])/2;B.push(R[G*2],R[G*2+1],Q,R[G*2+1],Q,R[G*2+3])}B.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(B=[],G=0;G<z-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?B.push(R[G*2],R[G*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var X=(R[G*2+1]+R[G*2+3])/2;B.push(R[G*2],R[G*2+1],R[G*2],X,R[G*2+2],X)}B.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(B=[],G=0;G<z-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?B.push(R[G*2],R[G*2+3]):B.push(NaN,NaN));B.push(R[O-2],R[O-1])}else B=R;var j=!1;for(G=0;G<B.length;G++)if(isNaN(B[G])){j=!0;break}var re=j||B.length>s.TOO_MANY_POINTS||t.hasMarkers(D)?"rect":"round";if(j&&D.connectgaps){var ue=B[0],K=B[1];for(G=0;G<B.length;G+=2)isNaN(B[G])||isNaN(B[G+1])?(B[G]=ue,B[G+1]=K):(ue=B[G],K=B[G+1])}return{join:re,positions:B}}function E(I,D,R,O,z){var B=T.getComponentMethod("errorbars","makeComputeError"),G=n.getFromId(I,D.xaxis,"x"),Q=n.getFromId(I,D.yaxis,"y"),X=R.length/2,j={};function re(ue,K){var te=K._id.charAt(0),Y=D["error_"+te];if(Y&&Y.visible&&(K.type==="linear"||K.type==="log")){for(var V=B(Y),ee={x:0,y:1}[te],ne={x:[0,1,2,3],y:[2,3,0,1]}[te],Z=new Float64Array(4*X),q=1/0,ie=-1/0,se=0,ae=0;se<X;se++,ae+=4){var oe=ue[se];if(w(oe)){var be=R[se*2+ee],ce=V(oe,se),de=ce[0],ye=ce[1];if(w(de)&&w(ye)){var ge=oe-de,me=oe+ye;Z[ae+ne[0]]=be-K.c2l(ge),Z[ae+ne[1]]=K.c2l(me)-be,Z[ae+ne[2]]=0,Z[ae+ne[3]]=0,q=Math.min(q,oe-de),ie=Math.max(ie,oe+ye)}}}j[te]={positions:R,errors:Z,_bnds:[q,ie]}}}return re(O,G),re(z,Q),j}function F(I,D,R,O){var z=D._length,B={},G;if(t.hasMarkers(D)){var Q=R.font,X=R.align,j=R.baseline;for(B.offset=new Array(z),G=0;G<z;G++){var re=O.sizes?O.sizes[G]:O.size,ue=Array.isArray(Q)?Q[G].size:Q.size,K=Array.isArray(X)?X.length>1?X[G]:X[0]:X,te=Array.isArray(j)?j.length>1?j[G]:j[0]:j,Y=d[K],V=d[te],ee=re?re/.8+1:0,ne=-V*ee-V*.5;B.offset[G]=[Y*ee/ue,ne/ue]}}return B}U.exports={style:c,markerStyle:l,markerSelection:x,linePositions:k,errorBarPositions:E,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(o,U,H){var w=o("../../lib"),f=o("../../registry"),M=o("./helpers"),T=o("./attributes"),e=o("../scatter/constants"),a=o("../scatter/subtypes"),n=o("../scatter/xy_defaults"),r=o("../scatter/period_defaults"),t=o("../scatter/marker_defaults"),h=o("../scatter/line_defaults"),i=o("../scatter/fillcolor_defaults"),s=o("../scatter/text_defaults");U.exports=function(d,p,c,m){function l(C,S){return w.coerce(d,p,T,C,S)}var x=d.marker?M.isOpenSymbol(d.marker.symbol):!1,u=a.isBubble(d),A=n(d,p,m,l);if(!A){p.visible=!1;return}r(d,p,m,l),l("xhoverformat"),l("yhoverformat");var _=A<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",_),a.hasLines(p)&&(l("connectgaps"),h(d,p,c,m,l),l("line.shape")),a.hasMarkers(p)&&(t(d,p,c,m,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",x||u?1:0)),a.hasText(p)&&(l("texttemplate"),s(d,p,m,l));var g=(p.line||{}).color,b=(p.marker||{}).color;l("fill"),p.fill!=="none"&&i(d,p,c,l);var v=f.getComponentMethod("errorbars","supplyDefaults");v(d,p,g||b||c,{axis:"y"}),v(d,p,g||b||c,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(p,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],n=a.trace,r=a.t,t=r._scene,h=r.index,i=t.selectBatch[h],s=t.unselectBatch[h],y=t.textOptions[h],d=t.textSelectedOptions[h]||{},p=t.textUnselectedOptions[h]||{},c=w.extendFlat({},y),m,l;if(i.length||s.length){var x=d.color,u=p.color,A=y.color,_=Array.isArray(A);for(c.color=new Array(n._length),m=0;m<i.length;m++)l=i[m],c.color[l]=x||(_?A[l]:A);for(m=0;m<s.length;m++){l=s[m];var g=_?A[l]:A;c.color[l]=u||(x?g:f.addOpacity(g,M))}}t.glText[h].update(c)}U.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(o,U,H){var w=o("../scatter/format_labels");U.exports=function(M,T,e){var a=M.i;return"x"in M||(M.x=T._x[a]),"y"in M||(M.y=T._y[a]),w(M,T,e)}},{"../scatter/format_labels":945}],996:[function(o,U,H){var w=o("./constants");H.isOpenSymbol=function(f){return typeof f=="string"?w.OPEN_RE.test(f):f%200>100},H.isDotSymbol=function(f){return typeof f=="string"?w.DOT_RE.test(f):f>200}},{"./constants":991}],997:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../scatter/get_trace_color");function T(a,n,r,t){var h=a.cd,i=h[0].t,s=h[0].trace,y=a.xa,d=a.ya,p=i.x,c=i.y,m=y.c2p(n),l=d.c2p(r),x=a.distance,u;if(i.tree){var A=y.p2c(m-x),_=y.p2c(m+x),g=d.p2c(l-x),b=d.p2c(l+x);t==="x"?u=i.tree.range(Math.min(A,_),Math.min(d._rl[0],d._rl[1]),Math.max(A,_),Math.max(d._rl[0],d._rl[1])):u=i.tree.range(Math.min(A,_),Math.min(g,b),Math.max(A,_),Math.max(g,b))}else u=i.ids;var v,C,S,k,E,F,I,D,R,O=x;if(t==="x"){var z=!!s.xperiodalignment,B=!!s.yperiodalignment;for(E=0;E<u.length;E++){if(v=u[E],S=p[v],F=Math.abs(y.c2p(S)-m),z){var G=y.c2p(s._xStarts[v]),Q=y.c2p(s._xEnds[v]);F=m>=Math.min(G,Q)&&m<=Math.max(G,Q)?0:1/0}if(F<O){if(O=F,k=c[v],I=d.c2p(k)-l,B){var X=d.c2p(s._yStarts[v]),j=d.c2p(s._yEnds[v]);I=l>=Math.min(X,j)&&l<=Math.max(X,j)?0:1/0}R=Math.sqrt(F*F+I*I),C=u[E]}}}else for(E=u.length-1;E>-1;E--)v=u[E],S=p[v],k=c[v],F=y.c2p(S)-m,I=d.c2p(k)-l,D=Math.sqrt(F*F+I*I),D<O&&(O=R=D,C=v);return a.index=C,a.distance=O,a.dxy=R,C===void 0?[a]:[e(a,p,c,s)]}function e(a,n,r,t){var h=a.xa,i=a.ya,s=a.distance,y=a.dxy,d=a.index,p={pointNumber:d,x:n[d],y:r[d]};p.tx=Array.isArray(t.text)?t.text[d]:t.text,p.htx=Array.isArray(t.hovertext)?t.hovertext[d]:t.hovertext,p.data=Array.isArray(t.customdata)?t.customdata[d]:t.customdata,p.tp=Array.isArray(t.textposition)?t.textposition[d]:t.textposition;var c=t.textfont;c&&(p.ts=f.isArrayOrTypedArray(c.size)?c.size[d]:c.size,p.tc=Array.isArray(c.color)?c.color[d]:c.color,p.tf=Array.isArray(c.family)?c.family[d]:c.family);var m=t.marker;m&&(p.ms=f.isArrayOrTypedArray(m.size)?m.size[d]:m.size,p.mo=f.isArrayOrTypedArray(m.opacity)?m.opacity[d]:m.opacity,p.mx=f.isArrayOrTypedArray(m.symbol)?m.symbol[d]:m.symbol,p.ma=f.isArrayOrTypedArray(m.angle)?m.angle[d]:m.angle,p.mc=f.isArrayOrTypedArray(m.color)?m.color[d]:m.color);var l=m&&m.line;l&&(p.mlc=Array.isArray(l.color)?l.color[d]:l.color,p.mlw=f.isArrayOrTypedArray(l.width)?l.width[d]:l.width);var x=m&&m.gradient;x&&x.type!=="none"&&(p.mgt=Array.isArray(x.type)?x.type[d]:x.type,p.mgc=Array.isArray(x.color)?x.color[d]:x.color);var u=h.c2p(p.x,!0),A=i.c2p(p.y,!0),_=p.mrc||1,g=t.hoverlabel;g&&(p.hbg=Array.isArray(g.bgcolor)?g.bgcolor[d]:g.bgcolor,p.hbc=Array.isArray(g.bordercolor)?g.bordercolor[d]:g.bordercolor,p.hts=f.isArrayOrTypedArray(g.font.size)?g.font.size[d]:g.font.size,p.htc=Array.isArray(g.font.color)?g.font.color[d]:g.font.color,p.htf=Array.isArray(g.font.family)?g.font.family[d]:g.font.family,p.hnl=f.isArrayOrTypedArray(g.namelength)?g.namelength[d]:g.namelength);var b=t.hoverinfo;b&&(p.hi=Array.isArray(b)?b[d]:b);var v=t.hovertemplate;v&&(p.ht=Array.isArray(v)?v[d]:v);var C={};C[a.index]=p;var S=t._origX,k=t._origY,E=f.extendFlat({},a,{color:M(t,p),x0:u-_,x1:u+_,xLabelVal:S?S[d]:p.x,y0:A-_,y1:A+_,yLabelVal:k?k[d]:p.y,cd:C,distance:s,spikeDistance:y,hovertemplate:p.ht});return p.htx?E.text=p.htx:p.tx?E.text=p.tx:t.text&&(E.text=t.text),f.fillText(p,t,E),w.getComponentMethod("errorbars","hoverInfo")(p,t,E),E}U.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(o,U,H){arguments[4][905][0].apply(H,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(o,U,y){var w=o("regl-scatter2d"),f=o("regl-line2d"),M=o("regl-error2d"),T=o("gl-text"),e=o("../../lib"),a=o("../../components/dragelement/helpers").selectMode,n=o("../../lib/prepare_regl"),r=o("../scatter/subtypes"),t=o("../scatter/link_traces"),h=o("./edit_style").styleTextSelection,i={};function s(d,p,c,m){var l=d._size,x=d.width*m,u=d.height*m,A=l.l*m,_=l.b*m,g=l.r*m,b=l.t*m,v=l.w*m,C=l.h*m;return[A+p.domain[0]*v,_+c.domain[0]*C,x-g-(1-p.domain[1])*v,u-b-(1-c.domain[1])*C]}var y=U.exports=function(p,c,m){if(!!m.length){var l=p._fullLayout,x=c._scene,u=c.xaxis,A=c.yaxis,_,g;if(!!x){var b=n(p,["ANGLE_instanced_arrays","OES_element_index_uint"],i);if(!b){x.init();return}var v=x.count,C=l._glcanvas.data()[0].regl;if(t(p,c,m),x.dirty){if(x.error2d===!0&&(x.error2d=M(C)),x.line2d===!0&&(x.line2d=f(C)),x.scatter2d===!0&&(x.scatter2d=w(C)),x.fill2d===!0&&(x.fill2d=f(C)),x.glText===!0)for(x.glText=new Array(v),_=0;_<v;_++)x.glText[_]=new T(C);if(x.glText){if(v>x.glText.length){var S=v-x.glText.length;for(_=0;_<S;_++)x.glText.push(new T(C))}else if(v<x.glText.length){var k=x.glText.length-v,E=x.glText.splice(v,k);E.forEach(function(Z){Z.destroy()})}for(_=0;_<v;_++)x.glText[_].update(x.textOptions[_])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(Z){if(Z&&Z.positions){for(var q=Z.positions,ie=0;ie<q.length&&(isNaN(q[ie])||isNaN(q[ie+1]));)ie+=2;for(var se=q.length-2;se>ie&&(isNaN(q[se])||isNaN(q[se+1]));)se-=2;Z.positions=q.slice(ie,se+2)}return Z}),x.line2d.update(x.lineOptions)),x.error2d){var F=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(F)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,v),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(Z,q){var ie=m[q];if(!(!Z||!ie||!ie[0]||!ie[0].trace)){var se=ie[0],ae=se.trace,oe=se.t,be=x.lineOptions[q],ce,de,ye=[];ae._ownfill&&ye.push(q),ae._nexttrace&&ye.push(q+1),ye.length&&(x.fillOrder[q]=ye);var ge=[],me=be&&be.positions||oe.positions,Me,Le;if(ae.fill==="tozeroy"){for(Me=0;Me<me.length&&isNaN(me[Me+1]);)Me+=2;for(Le=me.length-2;Le>Me&&isNaN(me[Le+1]);)Le-=2;me[Me+1]!==0&&(ge=[me[Me],0]),ge=ge.concat(me.slice(Me,Le+2)),me[Le+1]!==0&&(ge=ge.concat([me[Le],0]))}else if(ae.fill==="tozerox"){for(Me=0;Me<me.length&&isNaN(me[Me]);)Me+=2;for(Le=me.length-2;Le>Me&&isNaN(me[Le]);)Le-=2;me[Me]!==0&&(ge=[0,me[Me+1]]),ge=ge.concat(me.slice(Me,Le+2)),me[Le]!==0&&(ge=ge.concat([0,me[Le+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(ge=[],ce=0,Z.splitNull=!0,de=0;de<me.length;de+=2)(isNaN(me[de])||isNaN(me[de+1]))&&(ge=ge.concat(me.slice(ce,de)),ge.push(me[ce],me[ce+1]),ge.push(null,null),ce=de+2);ge=ge.concat(me.slice(ce)),ce&&ge.push(me[ce],me[ce+1])}else{var Oe=ae._nexttrace;if(Oe){var _e=x.lineOptions[q+1];if(_e){var Ee=_e.positions;if(ae.fill==="tonexty"){for(ge=me.slice(),q=Math.floor(Ee.length/2);q--;){var Ze=Ee[q*2],Ge=Ee[q*2+1];isNaN(Ze)||isNaN(Ge)||ge.push(Ze,Ge)}Z.fill=Oe.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var Fe=x.lineOptions[q-1].positions,Re=ge.length/2;ce=Re;var We=[ce];for(de=0;de<Fe.length;de+=2)(isNaN(Fe[de])||isNaN(Fe[de+1]))&&(We.push(de/2+Re+1),ce=de+2);ge=ge.concat(Fe),Z.hole=We}return Z.fillmode=ae.fill,Z.opacity=ae.opacity,Z.positions=ge,Z}}),x.fill2d.update(x.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(_=0;_<v;_++){var O=m[_][0],z=O.trace,B=O.t,G=B.index,Q=z._length,X=B.x,j=B.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var re=x.selectBatch[G]=e.selIndices2selPoints(z),ue={};for(g=0;g<re.length;g++)ue[re[g]]=1;var K=[];for(g=0;g<Q;g++)ue[g]||K.push(g);x.unselectBatch[G]=K}var te=B.xpx=new Array(Q),Y=B.ypx=new Array(Q);for(g=0;g<Q;g++)te[g]=u.c2p(X[g]),Y[g]=A.c2p(j[g])}else B.xpx=B.ypx=null}if(D){if(x.select2d||(x.select2d=w(l._glcanvas.data()[1].regl)),x.scatter2d){var V=new Array(v);for(_=0;_<v;_++)V[_]=x.selectBatch[_].length||x.unselectBatch[_].length?x.markerUnselectedOptions[_]:{};x.scatter2d.update(V)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&m.forEach(function(Z){var q=((Z||[])[0]||{}).trace||{};r.hasText(q)&&h(Z)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var ee={viewport:s(l,u,A,p._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(A._rl||A.range)[0],(u._rl||u.range)[1],(A._rl||A.range)[1]]},ne=e.repeat(ee,x.count);x.fill2d&&x.fill2d.update(ne),x.line2d&&x.line2d.update(ne),x.error2d&&x.error2d.update(ne.concat(ne)),x.scatter2d&&x.scatter2d.update(ne),x.select2d&&x.select2d.update(ne),x.glText&&x.glText.forEach(function(Z){Z.update(ee)})}}};y.reglPrecompiled=i},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){w.extendFlat(e,n,a)},e.init(),e.update=function(t){var h=w.repeat(t,e.count);if(e.fill2d&&e.fill2d.update(h),e.scatter2d&&e.scatter2d.update(h),e.line2d&&e.line2d.update(h),e.error2d&&e.error2d.update(h.concat(h)),e.select2d&&e.select2d.update(h),e.glText)for(var i=0;i<e.count;i++)e.glText[i].update(t)},e.draw=function(){for(var t=e.count,h=e.fill2d,i=e.error2d,s=e.line2d,y=e.scatter2d,d=e.glText,p=e.select2d,c=e.selectBatch,m=e.unselectBatch,l=0;l<t;l++){if(h&&e.fillOrder[l]&&h.draw(e.fillOrder[l]),s&&e.lineOptions[l]&&s.draw(l),i&&(e.errorXOptions[l]&&i.draw(l),e.errorYOptions[l]&&i.draw(l+t)),y&&e.markerOptions[l])if(m[l].length){var x=w.repeat([],e.count);x[l]=m[l],y.draw(x)}else c[l].length||y.draw(l);d[l]&&e.textOptions[l]&&d[l].render()}p&&p.draw(c),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(t){t.destroy&&t.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||w.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(o,U,H){var w=o("../scatter/subtypes"),f=o("./edit_style").styleTextSelection;U.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],h=a[0].trace,i=a[0].t,s=h._length,y=i.x,d=i.y,p=i._scene,c=i.index;if(!p)return t;var m=w.hasText(h),l=w.hasMarkers(h),x=!l&&!m;if(h.visible!==!0||x)return t;var u=[],A=[];if(e!==!1&&!e.degenerate)for(var _=0;_<s;_++)e.contains([i.xpx[_],i.ypx[_]],!1,_,T)?(u.push(_),t.push({pointNumber:_,x:n.c2d(y[_]),y:r.c2d(d[_])})):A.push(_);if(l){var g=p.scatter2d;if(!u.length&&!A.length){var b=new Array(p.count);b[c]=p.markerOptions[c],g.update.apply(g,b)}else if(!p.selectBatch[c].length&&!p.unselectBatch[c].length){var v=new Array(p.count);v[c]=p.markerUnselectedOptions[c],g.update.apply(g,v)}}return p.selectBatch[c]=u,p.unselectBatch[c]=A,m&&f(a),t}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../scattergeo/attributes"),T=o("../scatter/attributes"),e=o("../../plots/mapbox/layout_attributes"),a=o("../../plots/attributes"),n=o("../../components/colorscale/attributes"),r=o("../../lib/extend").extendFlat,t=o("../../plot_api/edit_types").overrideAll,h=o("../../plots/mapbox/layout_attributes"),i=M.line,s=M.marker;U.exports=t({lon:M.lon,lat:M.lat,cluster:{enabled:{valType:"boolean"},maxzoom:r({},h.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:r({},s.opacity,{dflt:1})},mode:r({},T.mode,{dflt:"markers"}),text:r({},T.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},T.hovertext,{}),line:{color:i.color,width:i.width},connectgaps:T.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},n("marker")),fill:M.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:r({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../lib"),M=o("../../constants/numerical").BADNUM,T=o("../../lib/geojson_utils"),e=o("../../components/colorscale"),a=o("../../components/drawing"),n=o("../scatter/make_bubble_size_func"),r=o("../scatter/subtypes"),t=o("../../plots/mapbox/convert_text_opts"),h=o("../../components/fx/helpers").appendArrayPointValue,i=o("../../lib/svg_text_utils").NEWLINES,s=o("../../lib/svg_text_utils").BR_TAG_ALL;U.exports=function(A,_){var g=_[0].trace,b=g.visible===!0&&g._length!==0,v=g.fill!=="none",C=r.hasLines(g),S=r.hasMarkers(g),k=r.hasText(g),E=S&&g.marker.symbol==="circle",F=S&&g.marker.symbol!=="circle",I=g.cluster&&g.cluster.enabled,D=y("fill"),R=y("line"),O=y("circle"),z=y("symbol"),B={fill:D,line:R,circle:O,symbol:z};if(!b)return B;var G;if((v||C)&&(G=T.calcTraceToLineCoords(_)),v&&(D.geojson=T.makePolygon(G),D.layout.visibility="visible",f.extendFlat(D.paint,{"fill-color":g.fillcolor})),C&&(R.geojson=T.makeLine(G),R.layout.visibility="visible",f.extendFlat(R.paint,{"line-width":g.line.width,"line-color":g.line.color,"line-opacity":g.opacity})),E){var Q=d(_);O.geojson=Q.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(g.cluster.color,g.cluster.step),"circle-radius":x(g.cluster.size,g.cluster.step),"circle-opacity":x(g.cluster.opacity,g.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),f.extendFlat(O.paint,{"circle-color":Q.mcc,"circle-radius":Q.mrc,"circle-opacity":Q.mo})}if(E&&I&&(O.filter=["!",["has","point_count"]]),(F||k)&&(z.geojson=p(_,A),f.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(f.extendFlat(z.layout,{"icon-size":g.marker.size/10}),"angle"in g.marker&&g.marker.angle!=="auto"&&f.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=g.marker.allowoverlap,f.extendFlat(z.paint,{"icon-opacity":g.opacity*g.marker.opacity,"icon-color":g.marker.color})),k)){var X=(g.marker||{}).size,j=t(g.textposition,X);f.extendFlat(z.layout,{"text-size":g.textfont.size,"text-anchor":j.anchor,"text-offset":j.offset}),f.extendFlat(z.paint,{"text-color":g.textfont.color,"text-opacity":g.opacity})}return B};function y(u){return{type:u,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function d(u){var A=u[0].trace,_=A.marker,g=A.selectedpoints,b=f.isArrayOrTypedArray(_.color),v=f.isArrayOrTypedArray(_.size),C=f.isArrayOrTypedArray(_.opacity),S;function k(X){return A.opacity*X}function E(X){return X/2}var F;b&&(e.hasColorscale(A,"marker")?F=e.makeColorScaleFuncFromTrace(_):F=f.identity);var I;v&&(I=n(A));var D;C&&(D=function(X){var j=w(X)?+f.constrain(X,0,1):0;return k(j)});var R=[];for(S=0;S<u.length;S++){var O=u[S],z=O.lonlat;if(!l(z)){var B={};F&&(B.mcc=O.mcc=F(O.mc)),I&&(B.mrc=O.mrc=I(O.ms)),D&&(B.mo=D(O.mo)),g&&(B.selected=O.selected||0),R.push({type:"Feature",id:S+1,geometry:{type:"Point",coordinates:z},properties:B})}}var G;if(g)for(G=a.makeSelectedPointStyleFns(A),S=0;S<R.length;S++){var Q=R[S].properties;G.selectedOpacityFn&&(Q.mo=k(G.selectedOpacityFn(Q))),G.selectedColorFn&&(Q.mcc=G.selectedColorFn(Q)),G.selectedSizeFn&&(Q.mrc=G.selectedSizeFn(Q))}return{geojson:{type:"FeatureCollection",features:R},mcc:b||G&&G.selectedColorFn?{type:"identity",property:"mcc"}:_.color,mrc:v||G&&G.selectedSizeFn?{type:"identity",property:"mrc"}:E(_.size),mo:C||G&&G.selectedOpacityFn?{type:"identity",property:"mo"}:k(_.opacity)}}function p(u,A){for(var _=A._fullLayout,g=u[0].trace,b=g.marker||{},v=b.symbol,C=b.angle,S=v!=="circle"?c(v):m,k=C!=="auto"?c(C,!0):m,E=r.hasText(g)?c(g.text):m,F=[],I=0;I<u.length;I++){var D=u[I];if(!l(D.lonlat)){var R=g.texttemplate,O;if(R){var z=Array.isArray(R)?R[I]||"":R,B=g._module.formatLabels(D,g,_),G={};h(G,g,D.i);var Q=g._meta||{};O=f.texttemplateString(z,B,_._d3locale,G,D,Q)}else O=E(I);O&&(O=O.replace(i,"").replace(s,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:S(I),angle:k(I),text:O}})}}return{type:"FeatureCollection",features:F}}function c(u,A){return f.isArrayOrTypedArray(u)?A?function(_){return w(u[_])?+u[_]:0}:function(_){return u[_]}:u?function(){return u}:m}function m(){return""}function l(u){return u[0]===M}function x(u,A){var _;if(f.isArrayOrTypedArray(u)&&f.isArrayOrTypedArray(A)){_=["step",["get","point_count"],u[0]];for(var g=1;g<u.length;g++)_.push(A[g-1],u[g])}else _=u;return _}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../scatter/marker_defaults"),T=o("../scatter/line_defaults"),e=o("../scatter/text_defaults"),a=o("../scatter/fillcolor_defaults"),n=o("./attributes");U.exports=function(h,i,s,y){function d(b,v){return w.coerce(h,i,n,b,v)}function p(b,v){return w.coerce2(h,i,n,b,v)}var c=r(h,i,d);if(!c){i.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),f.hasLines(i)&&(T(h,i,s,y,d,{noDash:!0}),d("connectgaps")),f.hasMarkers(i)){M(h,i,s,y,d,{noLine:!0,noAngle:!0}),d("marker.allowoverlap"),d("marker.angle");var m=i.marker;m.symbol!=="circle"&&(w.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),w.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}var l=p("cluster.maxzoom"),x=p("cluster.step"),u=p("cluster.color",i.marker&&i.marker.color||s),A=p("cluster.size"),_=p("cluster.opacity"),g=l!==!1||x!==!1||u!==!1||A!==!1||_!==!1;d("cluster.enabled",g),f.hasText(i)&&e(h,i,y,d,{noSelect:!0}),d("fill"),i.fill!=="none"&&a(h,i,s,d),w.coerceSelectionMarkerOpacity(i,d)};function r(t,h,i){var s=i("lon")||[],y=i("lat")||[],d=Math.min(s.length,y.length);return h._length=d,d}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(o,U,H){U.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f}},{}],1006:[function(o,U,H){var w=o("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(o,U,H){var w=o("../../components/fx"),f=o("../../lib"),M=o("../scatter/get_trace_color"),T=f.fillText,e=o("../../constants/numerical").BADNUM,a=o("../../plots/mapbox/constants").traceLayerPrefix;function n(t,h,i){var s=t.cd,y=s[0].trace,d=t.xa,p=t.ya,c=t.subplot,m=[],l=a+y.uid+"-circle",x=y.cluster&&y.cluster.enabled;if(x){var u=c.map.queryRenderedFeatures(null,{layers:[l]});m=u.map(function(R){return R.id})}var A=h>=0?Math.floor((h+180)/360):Math.ceil((h-180)/360),_=A*360,g=h-_;function b(R){var O=R.lonlat;if(O[0]===e||x&&m.indexOf(R.i+1)===-1)return 1/0;var z=f.modHalf(O[0],360),B=O[1],G=c.project([z,B]),Q=G.x-d.c2p([g,B]),X=G.y-p.c2p([z,i]),j=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(Q*Q+X*X)-j,1-3/j)}if(w.getClosest(s,b,t),t.index!==!1){var v=s[t.index],C=v.lonlat,S=[f.modHalf(C[0],360)+_,C[1]],k=d.c2p(S),E=p.c2p(S),F=v.mrc||1;t.x0=k-F,t.x1=k+F,t.y0=E-F,t.y1=E+F;var I={};I[y.subplot]={_subplot:c};var D=y._module.formatLabels(v,y,I);return t.lonLabel=D.lonLabel,t.latLabel=D.latLabel,t.color=M(y,v),t.extraText=r(y,v,s[0].t.labels),t.hovertemplate=y.hovertemplate,[t]}}function r(t,h,i){if(t.hovertemplate)return;var s=h.hi||t.hoverinfo,y=s.split("+"),d=y.indexOf("all")!==-1,p=y.indexOf("lon")!==-1,c=y.indexOf("lat")!==-1,m=h.lonlat,l=[];function x(u){return u+"\xB0"}return d||p&&c?l.push("("+x(m[1])+", "+x(m[0])+")"):p?l.push(i.lon+x(m[0])):c&&l.push(i.lat+x(m[1])),(d||y.indexOf("text")!==-1)&&T(h,t,l),l.join("<br>")}U.exports={hoverPoints:n,getExtraText:r}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("../scattergeo/calc"),plot:o("./plot"),hoverPoints:o("./hover").hoverPoints,eventData:o("./event_data"),selectPoints:o("./select"),styleOnSelect:function(w,f){if(f){var M=f[0].trace;M._glTrace.update(f)}},moduleType:"trace",name:"scattermapbox",basePlotModule:o("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(o,U,H){var w=o("../../lib"),f=o("./convert"),M=o("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(n,r,t){this.type="scattermapbox",this.subplot=n,this.uid=r,this.clusterEnabled=t,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol",cluster:"source-"+r+"-circle",clusterCount:"source-"+r+"-circle"},this.layerIds={fill:M+r+"-fill",line:M+r+"-line",circle:M+r+"-circle",symbol:M+r+"-symbol",cluster:M+r+"-cluster",clusterCount:M+r+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(n,r,t){var h={type:"geojson",data:r.geojson};t&&t.enabled&&w.extendFlat(h,{cluster:!0,clusterMaxZoom:t.maxzoom}),this.subplot.map.addSource(this.sourceIds[n],h)},a.setSourceData=function(n,r){this.subplot.map.getSource(this.sourceIds[n]).setData(r.geojson)},a.addLayer=function(n,r,t){var h={type:r.type,id:this.layerIds[n],source:this.sourceIds[n],layout:r.layout,paint:r.paint};r.filter&&(h.filter=r.filter),this.subplot.addLayer(h,t)},a.update=function(r){var t=r[0].trace,h=this.subplot,i=h.map,s=f(h.gd,r),y=h.belowLookup["trace-"+this.uid],d,p,c,m=!!(t.cluster&&t.cluster.enabled),l=!!this.clusterEnabled;if(y!==this.below){var x=T.nonCluster;for(d=x.length-1;d>=0;d--)p=x[d],i.removeLayer(this.layerIds[p]);for(d=0;d<x.length;d++)p=x[d],c=s[p],this.addLayer(p,c,y);this.below=y}else if(m&&!l){for(d=T.nonCluster.length-1;d>=0;d--)p=T.nonCluster[d],i.removeLayer(this.layerIds[p]),i.removeSource(this.sourceIds[p]);for(this.addSource("circle",s.circle,t.cluster),d=0;d<T.cluster.length;d++)p=T.cluster[d],c=s[p],this.addLayer(p,c,y);this.clusterEnabled=m}else if(!m&&l){for(d=0;d<T.cluster.length;d++)p=T.cluster[d],i.removeLayer(this.layerIds[p]);for(i.removeSource(this.sourceIds.circle),d=0;d<T.nonCluster.length;d++)p=T.nonCluster[d],c=s[p],this.addSource(p,c,t.cluster),this.addLayer(p,c,y);this.clusterEnabled=m}r[0].trace._glTrace=this},a.dispose=function(){for(var r=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,h=t.length-1;h>=0;h--){var i=t[h];r.removeLayer(this.layerIds[i]),r.removeSource(this.sourceIds[i])}},U.exports=function(r,t){var h=t[0].trace,i=h.cluster&&h.cluster.enabled,s=new e(r,h.uid,i),y=f(r.gd,t),d=s.below=r.belowLookup["trace-"+h.uid],p,c,m;if(i)for(s.addSource("circle",y.circle,h.cluster),p=0;p<T.cluster.length;p++)c=T.cluster[p],m=y[c],s.addLayer(c,m,d);else for(p=0;p<T.nonCluster.length;p++)c=T.nonCluster[p],m=y[c],s.addSource(c,m,h.cluster),s.addLayer(c,m,d);return t[0].trace._glTrace=s,s}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../../constants/numerical").BADNUM;U.exports=function(e,a){var n=e.cd,r=e.xaxis,t=e.yaxis,h=[],i=n[0].trace,s;if(!f.hasMarkers(i))return[];if(a===!1)for(s=0;s<n.length;s++)n[s].selected=0;else for(s=0;s<n.length;s++){var y=n[s],d=y.lonlat;if(d[0]!==M){var p=[w.modHalf(d[0],360),d[1]],c=[r.c2p(p),t.c2p(p)];a.contains(c,null,s,e)?(h.push({pointNumber:s,lon:d[0],lat:d[1]}),y.selected=1):y.selected=0}}return h}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../../lib/extend").extendFlat,T=o("../scatter/attributes"),e=o("../../plots/attributes"),a=T.line;U.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../constants/numerical").BADNUM,M=o("../../plots/cartesian/axes"),T=o("../scatter/colorscale_calc"),e=o("../scatter/arrays_to_calcdata"),a=o("../scatter/calc_selection"),n=o("../scatter/calc").calcMarkerSize;U.exports=function(t,h){for(var i=t._fullLayout,s=h.subplot,y=i[s].radialaxis,d=i[s].angularaxis,p=y.makeCalcdata(h,"r"),c=d.makeCalcdata(h,"theta"),m=h._length,l=new Array(m),x=0;x<m;x++){var u=p[x],A=c[x],_=l[x]={};w(u)&&w(A)?(_.r=u,_.theta=A):_.r=f}var g=n(h,m);return h._extremes.x=M.findExtremes(y,p,{ppad:g}),T(t,h),e(l,h),a(l,h),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../scatter/marker_defaults"),T=o("../scatter/line_defaults"),e=o("../scatter/line_shape_defaults"),a=o("../scatter/text_defaults"),n=o("../scatter/fillcolor_defaults"),r=o("../scatter/constants").PTS_LINESONLY,t=o("./attributes");function h(s,y,d,p){function c(x,u){return w.coerce(s,y,t,x,u)}var m=i(s,y,p,c);if(!m){y.visible=!1;return}c("thetaunit"),c("mode",m<r?"lines+markers":"lines"),c("text"),c("hovertext"),y.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(y)&&(T(s,y,d,p,c,{backoff:!0}),e(s,y,c),c("connectgaps")),f.hasMarkers(y)&&M(s,y,d,p,c,{gradient:!0}),f.hasText(y)&&(c("texttemplate"),a(s,y,p,c));var l=[];(f.hasMarkers(y)||f.hasText(y))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),y.fill!=="none"&&(n(s,y,d,c),f.hasLines(y)||e(s,y,c)),(y.fill==="tonext"||y.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(y,c)}function i(s,y,d,p){var c=p("r"),m=p("theta"),l;if(c)m?l=Math.min(c.length,m.length):(l=c.length,p("theta0"),p("dtheta"));else{if(!m)return 0;l=y.theta.length,p("r0"),p("dr")}return y._length=l,l}U.exports={handleRThetaDefaults:i,supplyDefaults:h}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes");U.exports=function(T,e,a){var n={},r=a[e.subplot]._subplot,t,h;r?(t=r.radialAxis,h=r.angularAxis):(r=a[e.subplot],t=r.radialaxis,h=r.angularaxis);var i=t.c2l(T.r);n.rLabel=f.tickText(t,i,!0).text;var s=h.thetaunit==="degrees"?w.rad2deg(T.theta):T.theta;return n.thetaLabel=f.tickText(h,s,!0).text,n}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(o,U,H){var w=o("../scatter/hover");function f(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var h=T.subplot,i=t.cd[t.index],s=t.trace;if(!!h.isPtInside(i))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(i,s,h,t),t.hovertemplate=s.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="r",t._hovertitle="\u03B8";var h={};h[e.subplot]={_subplot:a};var i=e._module.formatLabels(T,e,h);n.rLabel=i.rLabel,n.thetaLabel=i.thetaLabel;var s=T.hi||e.hoverinfo,y=[];function d(c,m){y.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var p=s.split("+");p.indexOf("all")!==-1&&(p=["r","theta","text"]),p.indexOf("r")!==-1&&d(r,n.rLabel),p.indexOf("theta")!==-1&&d(t,n.thetaLabel),p.indexOf("text")!==-1&&n.text&&(y.push(n.text),delete n.text),n.extraText=y.join("<br>")}}U.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1016:[function(o,U,H){U.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:o("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:o("./attributes"),supplyDefaults:o("./defaults").supplyDefaults,colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),plot:o("./plot"),style:o("../scatter/style").style,styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover").hoverPoints,selectPoints:o("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(o,U,H){var w=o("../scatter/plot"),f=o("../../constants/numerical").BADNUM;U.exports=function(T,e,a){for(var n=e.layers.frontplot.select("g.scatterlayer"),r=e.xaxis,t=e.yaxis,h={xaxis:r,yaxis:t,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},i=e.radialAxis,s=e.angularAxis,y=0;y<a.length;y++)for(var d=a[y],p=0;p<d.length;p++){p===0&&(d[0].trace._xA=r,d[0].trace._yA=t);var c=d[p],m=c.r;if(m===f)c.x=c.y=f;else{var l=i.c2g(m),x=s.c2g(c.theta);c.x=l*Math.cos(x),c.y=l*Math.sin(x)}}w(T,h,a,n)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(o,U,H){var w=o("../scatterpolar/attributes"),f=o("../scattergl/attributes"),M=o("../../plots/template_attributes").texttemplateAttrs;U.exports={mode:w.mode,r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,text:w.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,hovertemplate:w.hovertemplate,line:f.line,connectgaps:f.connectgaps,marker:f.marker,fill:f.fill,fillcolor:f.fillcolor,textposition:f.textposition,textfont:f.textfont,hoverinfo:w.hoverinfo,selected:w.selected,unselected:w.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(o,U,H){U.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:o("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),hoverPoints:o("./hover").hoverPoints,selectPoints:o("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(o,U,H){var w=o("../scatter/colorscale_calc"),f=o("../scatter/calc").calcMarkerSize,M=o("../scattergl/convert"),T=o("../../plots/cartesian/axes"),e=o("../scattergl/constants").TOO_MANY_POINTS;U.exports=function(n,r){var t=n._fullLayout,h=r.subplot,i=t[h].radialaxis,s=t[h].angularaxis,y=r._r=i.makeCalcdata(r,"r"),d=r._theta=s.makeCalcdata(r,"theta"),p=r._length,c={};p<y.length&&(y=y.slice(0,p)),p<d.length&&(d=d.slice(0,p)),c.r=y,c.theta=d,w(n,r);var m=c.opts=M.style(n,r),l;return p<e?l=f(r,p):m.marker&&(l=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),r._extremes.x=T.findExtremes(i,y,{ppad:l}),[{x:!1,y:!1,t:c,trace:r}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../scatterpolar/defaults").handleRThetaDefaults,T=o("../scatter/marker_defaults"),e=o("../scatter/line_defaults"),a=o("../scatter/text_defaults"),n=o("../scatter/fillcolor_defaults"),r=o("../scatter/constants").PTS_LINESONLY,t=o("./attributes");U.exports=function(i,s,y,d){function p(m,l){return w.coerce(i,s,t,m,l)}var c=M(i,s,d,p);if(!c){s.visible=!1;return}p("thetaunit"),p("mode",c<r?"lines+markers":"lines"),p("text"),p("hovertext"),s.hoveron!=="fills"&&p("hovertemplate"),f.hasLines(s)&&(e(i,s,y,d,p),p("connectgaps")),f.hasMarkers(s)&&T(i,s,y,d,p,{noAngleRef:!0,noStandOff:!0}),f.hasText(s)&&(p("texttemplate"),a(i,s,d,p)),p("fill"),s.fill!=="none"&&n(i,s,y,p),w.coerceSelectionMarkerOpacity(s,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(o,U,H){var w=o("../scatterpolar/format_labels");U.exports=function(M,T,e){var a=M.i;return"r"in M||(M.r=T._r[a]),"theta"in M||(M.theta=T._theta[a]),w(M,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(o,U,H){var w=o("../scattergl/hover"),f=o("../scatterpolar/hover").makeHoverPointText;function M(T,e,a,n){var r=T.cd,t=r[0].t,h=t.r,i=t.theta,s=w.hoverPoints(T,e,a,n);if(!(!s||s[0].index===!1)){var y=s[0];if(y.index===void 0)return s;var d=T.subplot,p=y.cd[y.index],c=y.trace;if(p.r=h[y.index],p.theta=i[y.index],!!d.isPtInside(p))return y.xLabelVal=void 0,y.yLabelVal=void 0,f(p,c,d,y),s}}U.exports={hoverPoints:M}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(o,U,H){arguments[4][905][0].apply(H,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(o,U,H){var w=o("@plotly/point-cluster"),f=o("fast-isnumeric"),M=o("../scattergl/plot"),T=o("../scattergl/scene_update"),e=o("../scattergl/convert"),a=o("../../lib"),n=o("../scattergl/constants").TOO_MANY_POINTS,r={};U.exports=function(h,i,s){if(!!s.length){var y=i.radialAxis,d=i.angularAxis,p=T(h,i);return s.forEach(function(c){if(!(!c||!c[0]||!c[0].trace)){var m=c[0],l=m.trace,x=m.t,u=l._length,A=x.r,_=x.theta,g=x.opts,b,v=A.slice(),C=_.slice();for(b=0;b<A.length;b++)i.isPtInside({r:A[b],theta:_[b]})||(v[b]=NaN,C[b]=NaN);var S=new Array(u*2),k=Array(u),E=Array(u);for(b=0;b<u;b++){var F=v[b],I,D;if(f(F)){var R=y.c2g(F),O=d.c2g(C[b],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;k[b]=S[b*2]=I,E[b]=S[b*2+1]=D}x.tree=w(S),g.marker&&u>=n&&(g.marker.cluster=x.tree),g.marker&&(g.markerSel.positions=g.markerUnsel.positions=g.marker.positions=S),g.line&&S.length>1&&a.extendFlat(g.line,e.linePositions(h,l,S)),g.text&&(a.extendFlat(g.text,{positions:S},e.textPosition(h,l,g.text,g.marker)),a.extendFlat(g.textSel,{positions:S},e.textPosition(h,l,g.text,g.markerSel)),a.extendFlat(g.textUnsel,{positions:S},e.textPosition(h,l,g.text,g.markerUnsel))),g.fill&&!p.fill2d&&(p.fill2d=!0),g.marker&&!p.scatter2d&&(p.scatter2d=!0),g.line&&!p.line2d&&(p.line2d=!0),g.text&&!p.glText&&(p.glText=!0),p.lineOptions.push(g.line),p.fillOptions.push(g.fill),p.markerOptions.push(g.marker),p.markerSelectedOptions.push(g.markerSel),p.markerUnselectedOptions.push(g.markerUnsel),p.textOptions.push(g.text),p.textSelectedOptions.push(g.textSel),p.textUnselectedOptions.push(g.textUnsel),p.selectBatch.push([]),p.unselectBatch.push([]),x.x=k,x.y=E,x.rawx=k,x.rawy=E,x.r=A,x.theta=_,x.positions=S,x._scene=p,x.index=p.count,p.count++}}),M(h,i,s)}},U.exports.reglPrecompiled=r},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../../lib/extend").extendFlat,T=o("../scatter/attributes"),e=o("../../plots/attributes"),a=T.line;U.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../../constants/numerical").BADNUM,M=o("../scatter/colorscale_calc"),T=o("../scatter/arrays_to_calcdata"),e=o("../scatter/calc_selection"),a=o("../scatter/calc").calcMarkerSize;U.exports=function(r,t){for(var h=r._fullLayout,i=t.subplot,s=h[i].realaxis,y=h[i].imaginaryaxis,d=s.makeCalcdata(t,"real"),p=y.makeCalcdata(t,"imag"),c=t._length,m=new Array(c),l=0;l<c;l++){var x=d[l],u=p[l],A=m[l]={};w(x)&&w(u)?(A.real=x,A.imag=u):A.real=f}return a(t,c),M(r,t),T(m,t),e(m,t),m}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/subtypes"),M=o("../scatter/marker_defaults"),T=o("../scatter/line_defaults"),e=o("../scatter/line_shape_defaults"),a=o("../scatter/text_defaults"),n=o("../scatter/fillcolor_defaults"),r=o("../scatter/constants").PTS_LINESONLY,t=o("./attributes");U.exports=function(s,y,d,p){function c(x,u){return w.coerce(s,y,t,x,u)}var m=h(s,y,p,c);if(!m){y.visible=!1;return}c("mode",m<r?"lines+markers":"lines"),c("text"),c("hovertext"),y.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(y)&&(T(s,y,d,p,c,{backoff:!0}),e(s,y,c),c("connectgaps")),f.hasMarkers(y)&&M(s,y,d,p,c,{gradient:!0}),f.hasText(y)&&(c("texttemplate"),a(s,y,p,c));var l=[];(f.hasMarkers(y)||f.hasText(y))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),y.fill!=="none"&&(n(s,y,d,c),f.hasLines(y)||e(s,y,c)),(y.fill==="tonext"||y.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(y,c)};function h(i,s,y,d){var p=d("real"),c=d("imag"),m;return p&&c&&(m=Math.min(p.length,c.length)),s._length=m,m}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(o,U,H){var w=o("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.realLabel=w.tickText(n.radialAxis,M.real,!0).text,a.imagLabel=w.tickText(n.angularAxis,M.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(o,U,H){var w=o("../scatter/hover");function f(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var h=T.subplot,i=t.cd[t.index],s=t.trace;if(!!h.isPtInside(i))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(i,s,h,t),t.hovertemplate=s.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="real",t._hovertitle="imag";var h={};h[e.subplot]={_subplot:a};var i=e._module.formatLabels(T,e,h);n.realLabel=i.realLabel,n.imagLabel=i.imagLabel;var s=T.hi||e.hoverinfo,y=[];function d(c,m){y.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var p=s.split("+");p.indexOf("all")!==-1&&(p=["real","imag","text"]),p.indexOf("real")!==-1&&d(r,n.realLabel),p.indexOf("imag")!==-1&&d(t,n.imagLabel),p.indexOf("text")!==-1&&n.text&&(y.push(n.text),delete n.text),n.extraText=y.join("<br>")}}U.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1031:[function(o,U,H){U.exports={moduleType:"trace",name:"scattersmith",basePlotModule:o("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),plot:o("./plot"),style:o("../scatter/style").style,styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover").hoverPoints,selectPoints:o("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(o,U,H){var w=o("../scatter/plot"),f=o("../../constants/numerical").BADNUM,M=o("../../plots/smith/helpers"),T=M.smith;U.exports=function(a,n,r){for(var t=n.layers.frontplot.select("g.scatterlayer"),h=n.xaxis,i=n.yaxis,s={xaxis:h,yaxis:i,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},y=0;y<r.length;y++)for(var d=r[y],p=0;p<d.length;p++){p===0&&(d[0].trace._xA=h,d[0].trace._yA=i);var c=d[p],m=c.real;if(m===f)c.x=c.y=f;else{var l=T([m,c.imag]);c.x=l[0],c.y=l[1]}}w(a,s,r,t)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../scatter/attributes"),T=o("../../plots/attributes"),e=o("../../components/colorscale/attributes"),a=o("../../components/drawing/attributes").dash,n=o("../../lib/extend").extendFlat,r=M.marker,t=M.line,h=r.line;U.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},M.hovertext,{}),line:{color:t.color,width:t.width,dash:a,backoff:t.backoff,shape:n({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:n({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:n({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:r.angleref,standoff:r.standoff,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:n({width:h.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:w()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(o,U,H){var w=o("fast-isnumeric"),f=o("../scatter/colorscale_calc"),M=o("../scatter/arrays_to_calcdata"),T=o("../scatter/calc_selection"),e=o("../scatter/calc").calcMarkerSize,a=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};U.exports=function(t,h){var i=t._fullLayout[h.subplot],s=i.sum,y=h.sum||s,d={a:h.a,b:h.b,c:h.c},p,c,m,l,x,u;for(p=0;p<a.length;p++)if(m=a[p],!d[m]){for(x=d[n[m][0]],u=d[n[m][1]],l=new Array(x.length),c=0;c<x.length;c++)l[c]=y-x[c]-u[c];d[m]=l}var A=h._length,_=new Array(A),g,b,v,C,S,k;for(p=0;p<A;p++)g=d.a[p],b=d.b[p],v=d.c[p],w(g)&&w(b)&&w(v)?(g=+g,b=+b,v=+v,C=s/(g+b+v),C!==1&&(g*=C,b*=C,v*=C),k=g,S=v-b,_[p]={x:S,y:k,a:g,b,c:v}):_[p]={x:!1,y:!1};return e(h,A),f(t,h),M(_,h),T(_,h),_}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/constants"),M=o("../scatter/subtypes"),T=o("../scatter/marker_defaults"),e=o("../scatter/line_defaults"),a=o("../scatter/line_shape_defaults"),n=o("../scatter/text_defaults"),r=o("../scatter/fillcolor_defaults"),t=o("./attributes");U.exports=function(i,s,y,d){function p(_,g){return w.coerce(i,s,t,_,g)}var c=p("a"),m=p("b"),l=p("c"),x;if(c?(x=c.length,m?(x=Math.min(x,m.length),l&&(x=Math.min(x,l.length))):l?x=Math.min(x,l.length):x=0):m&&l&&(x=Math.min(m.length,l.length)),!x){s.visible=!1;return}s._length=x,p("sum"),p("text"),p("hovertext"),s.hoveron!=="fills"&&p("hovertemplate");var u=x<f.PTS_LINESONLY?"lines+markers":"lines";p("mode",u),M.hasLines(s)&&(e(i,s,y,d,p,{backoff:!0}),a(i,s,p),p("connectgaps")),M.hasMarkers(s)&&T(i,s,y,d,p,{gradient:!0}),M.hasText(s)&&(p("texttemplate"),n(i,s,d,p));var A=[];(M.hasMarkers(s)||M.hasText(s))&&(p("cliponaxis"),p("marker.maxdisplayed"),A.push("points")),p("fill"),s.fill!=="none"&&(r(i,s,y,p),M.hasLines(s)||a(i,s,p)),(s.fill==="tonext"||s.fill==="toself")&&A.push("fills"),p("hoveron",A.join("+")||"points"),w.coerceSelectionMarkerOpacity(s,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(o,U,H){U.exports=function(f,M,T,e,a){if(M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),e[a]){var n=e[a];f.a=n.a,f.b=n.b,f.c=n.c}else f.a=M.a,f.b=M.b,f.c=M.c;return f}},{}],1037:[function(o,U,H){var w=o("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.aLabel=w.tickText(n.aaxis,M.a,!0).text,a.bLabel=w.tickText(n.baxis,M.b,!0).text,a.cLabel=w.tickText(n.caxis,M.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(o,U,H){var w=o("../scatter/hover");U.exports=function(M,T,e,a){var n=w(M,T,e,a);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var t=1-r.y0/M.ya._length,h=M.xa._length,i=h*t/2,s=h-i;return r.x0=Math.max(Math.min(r.x0,s),i),r.x1=Math.max(Math.min(r.x1,s),i),n}var y=r.cd[r.index],d=r.trace,p=r.subplot;r.a=y.a,r.b=y.b,r.c=y.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var c={};c[d.subplot]={_subplot:p};var m=d._module.formatLabels(y,d,c);r.aLabel=m.aLabel,r.bLabel=m.bLabel,r.cLabel=m.cLabel;var l=y.hi||d.hoverinfo,x=[];function u(_,g){x.push(_._hovertitle+": "+g)}if(!d.hovertemplate){var A=l.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&u(p.aaxis,r.aLabel),A.indexOf("b")!==-1&&u(p.baxis,r.bLabel),A.indexOf("c")!==-1&&u(p.caxis,r.cLabel)}return r.extraText=x.join("<br>"),r.hovertemplate=d.hovertemplate,n}},{"../scatter/hover":947}],1039:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),formatLabels:o("./format_labels"),calc:o("./calc"),plot:o("./plot"),style:o("../scatter/style").style,styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover"),selectPoints:o("../scatter/select"),eventData:o("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:o("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(o,U,H){var w=o("../scatter/plot");U.exports=function(M,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var n=T.xaxis,r=T.yaxis,t={xaxis:n,yaxis:r,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},h=T.layers.frontplot.select("g.scatterlayer"),i=0;i<e.length;i++){var s=e[i];s.length&&(s[0].trace._xA=n,s[0].trace._yA=r)}w(M,t,e,h)}},{"../scatter/plot":957}],1041:[function(o,U,H){var w=o("../scatter/attributes"),f=o("../../components/colorscale/attributes"),M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=o("../../plots/template_attributes").hovertemplateAttrs,e=o("../scattergl/attributes"),a=o("../../plots/cartesian/constants").idRegex,n=o("../../plot_api/plot_template").templatedArray,r=o("../../lib/extend").extendFlat,t=w.marker,h=t.line,i=r(f("marker.line",{editTypeOverride:"calc"}),{width:r({},h.width,{editType:"calc"}),editType:"calc"}),s=r(f("marker"),{symbol:t.symbol,angle:t.angle,size:r({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:i,editType:"calc"});s.color.editType=s.cmin.editType=s.cmax.editType="style";function y(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[d],editType:"plot"}}}U.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},e.text,{}),hovertext:r({},e.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),marker:s,xaxes:y("x"),yaxes:y("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(o,U,H){var w=o("../../registry"),f=o("../../components/grid");U.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:o("../scatter/marker_colorbar"),calc:o("./calc"),plot:o("./plot"),hoverPoints:o("./hover").hoverPoints,selectPoints:o("./select"),editStyle:o("./edit_style"),meta:{}},w.register(f)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(o,U,H){var w=o("regl-line2d"),f=o("../../registry"),M=o("../../lib/prepare_regl"),T=o("../../plots/get_data").getModuleCalcData,e=o("../../plots/cartesian"),a=o("../../plots/cartesian/axis_ids").getFromId,n=o("../../plots/cartesian/axes").shouldShowZeroLine,r="splom",t={};function h(c){var m=c._fullLayout,l=f.getModule(r),x=T(c.calcdata,l)[0],u=M(c,["ANGLE_instanced_arrays","OES_element_index_uint"],t);!u||(m._hasOnlyLargeSploms&&y(c),l.plot(c,{},x))}function i(c){var m=c.calcdata,l=c._fullLayout;l._hasOnlyLargeSploms&&y(c);for(var x=0;x<m.length;x++){var u=m[x][0],A=u.trace,_=l._splomScenes[A.uid];A.type==="splom"&&_&&_.matrix&&s(c,A,_)}}function s(c,m,l){for(var x=l.matrixOptions.data.length,u=m._visibleDims,A=l.viewOpts.ranges=new Array(x),_=0;_<u.length;_++){var g=u[_],b=A[_]=new Array(4),v=a(c,m._diag[g][0]);v&&(b[0]=v.r2l(v.range[0]),b[2]=v.r2l(v.range[1]));var C=a(c,m._diag[g][1]);C&&(b[1]=C.r2l(C.range[0]),b[3]=C.r2l(C.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:A},{ranges:A}):l.matrix.update({ranges:A})}function y(c){var m=c._fullLayout,l=m._glcanvas.data()[0].regl,x=m._splomGrid;x||(x=m._splomGrid=w(l)),x.update(d(c))}function d(c){var m=c._context.plotGlPixelRatio,l=c._fullLayout,x=l._size,u=[0,0,l.width*m,l.height*m],A={},_;function g(Q,X,j,re,ue,K){j*=m,re*=m,ue*=m,K*=m;var te=X[Q+"color"],Y=X[Q+"width"],V=String(te+Y);V in A?A[V].data.push(NaN,NaN,j,re,ue,K):A[V]={data:[j,re,ue,K],join:"rect",thickness:Y*m,color:te,viewport:u,range:u,overlay:!1}}for(_ in l._splomSubplots){var b=l._plots[_],v=b.xaxis,C=b.yaxis,S=v._gridVals,k=C._gridVals,E=v._offset,F=v._length,I=C._length,D=x.b+C.domain[0]*x.h,R=-C._m,O=-R*C.r2l(C.range[0],C.calendar),z,B;if(v.showgrid)for(_=0;_<S.length;_++)z=E+v.l2p(S[_].x),g("grid",v,z,D,z,D+I);if(C.showgrid)for(_=0;_<k.length;_++)B=D+O+R*k[_].x,g("grid",C,E,B,E+F,B);n(c,v,C)&&(z=E+v.l2p(0),g("zeroline",v,z,D,z,D+I)),n(c,C,v)&&(B=D+O+0,g("zeroline",C,E,B,E+F,B))}var G=[];for(_ in A)G.push(A[_]);return G}function p(c,m,l,x){var u={},A;if(x._splomScenes){for(A=0;A<c.length;A++){var _=c[A];_.type==="splom"&&(u[_.uid]=1)}for(A=0;A<l.length;A++){var g=l[A];if(!u[g.uid]){var b=x._splomScenes[g.uid];b&&b.destroy&&b.destroy(),x._splomScenes[g.uid]=null,delete x._splomScenes[g.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!m._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),e.clean(c,m,l,x)}U.exports={name:r,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:h,drag:i,updateGrid:y,clean:p,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:t}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axis_ids"),M=o("../scatter/calc").calcMarkerSize,T=o("../scatter/calc").calcAxisExpansion,e=o("../scatter/colorscale_calc"),a=o("../scattergl/convert").markerSelection,n=o("../scattergl/convert").markerStyle,r=o("./scene_update"),t=o("../../constants/numerical").BADNUM,h=o("../scattergl/constants").TOO_MANY_POINTS;U.exports=function(s,y){var d=y.dimensions,p=y._length,c={},m=c.cdata=[],l=c.data=[],x=y._visibleDims=[],u,A,_,g,b;function v(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:y.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===t?NaN:D[R];m.push(D),l.push(F.type==="log"?w.simpleMap(D,F.c2l):D)}for(u=0;u<d.length;u++)if(_=d[u],_.visible){if(g=f.getFromId(s,y._diag[u][0]),b=f.getFromId(s,y._diag[u][1]),g&&b&&g.type!==b.type){w.log("Skipping splom dimension "+u+" with conflicting axis types");continue}g?(v(g,_),b&&b.type==="category"&&(b._categories=g._categories.slice())):v(b,_),x.push(u)}e(s,y),w.extendFlat(c,n(s,y));var C=m.length,S=C*p>h,k;for(S?k=c.sizeAvg||Math.max(c.size,3):k=M(y,p),A=0;A<x.length;A++)u=x[A],_=d[u],g=f.getFromId(s,y._diag[u][0])||{},b=f.getFromId(s,y._diag[u][1])||{},T(s,y,g,b,m[A],m[A],k);var E=r(s,y);return E.matrix||(E.matrix=!0),E.matrixOptions=c,E.selectedOptions=a(s,y,y.selected),E.unselectedOptions=a(s,y,y.unselected),[{x:!1,y:!1,t:{},trace:y}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/array_container_defaults"),M=o("./attributes"),T=o("../scatter/subtypes"),e=o("../scatter/marker_defaults"),a=o("../parcoords/merge_length"),n=o("../scattergl/helpers").isOpenSymbol;U.exports=function(i,s,y,d){function p(g,b){return w.coerce(i,s,M,g,b)}var c=f(i,s,{name:"dimensions",handleItemDefaults:r}),m=p("diagonal.visible"),l=p("showupperhalf"),x=p("showlowerhalf"),u=a(s,c,"values");if(!u||!m&&!l&&!x){s.visible=!1;return}p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),e(i,s,y,d,p,{noAngleRef:!0,noStandOff:!0});var A=n(s.marker.symbol),_=T.isBubble(s);p("marker.line.width",A||_?1:0),t(i,s,d,p),w.coerceSelectionMarkerOpacity(s,p)};function r(h,i){function s(d,p){return w.coerce(h,i,M.dimensions,d,p)}s("label");var y=s("values");y&&y.length?s("visible"):i.visible=!1,s("axis.type"),s("axis.matches")}function t(h,i,s,y){var d=i.dimensions,p=d.length,c=i.showupperhalf,m=i.showlowerhalf,l=i.diagonal.visible,x,u,A=new Array(p),_=new Array(p);for(x=0;x<p;x++){var g=x?x+1:"";A[x]="x"+g,_[x]="y"+g}var b=y("xaxes",A),v=y("yaxes",_),C=i._diag=new Array(p);i._xaxes={},i._yaxes={};var S=[],k=[];function E(Q,X,j,re){if(!!Q){var ue=Q.charAt(0),K=s._splomAxes[ue];if(i["_"+ue+"axes"][Q]=1,re.push(Q),!(Q in K)){var te=K[Q]={};j&&(te.label=j.label||"",j.visible&&j.axis&&(j.axis.type&&(te.type=j.axis.type),j.axis.matches&&(te.matches=X)))}}}var F=!l&&!m,I=!l&&!c;for(i._axesDim={},x=0;x<p;x++){var D=d[x],R=x===0,O=x===p-1,z=R&&F||O&&I?void 0:b[x],B=R&&I||O&&F?void 0:v[x];E(z,B,D,S),E(B,z,D,k),C[x]=[z,B],i._axesDim[z]=x,i._axesDim[B]=x}for(x=0;x<S.length;x++)for(u=0;u<k.length;u++){var G=S[x]+k[u];(x>u&&c||x<u&&m||x===u&&(l||!m||!c))&&(s._splomSubplots[G]=1)}(!m||!l&&c&&m)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(o,U,H){var w=o("../../lib"),f=o("../scatter/colorscale_calc"),M=o("../scattergl/convert").markerStyle;U.exports=function(e,a){var n=a.trace,r=e._fullLayout._splomScenes[n.uid];if(r){f(e,n),w.extendFlat(r.matrixOptions,M(e,n));var t=w.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(t,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(o,U,H){H.getDimIndex=function(f,M){for(var T=M._id,e=T.charAt(0),a={x:0,y:1}[e],n=f._visibleDims,r=0;r<n.length;r++){var t=n[r];if(f._diag[t][a]===T)return r}return!1}},{}],1048:[function(o,U,H){var w=o("./helpers"),f=o("../scattergl/hover").calcHover;function M(T,e,a){var n=T.cd,r=n[0].trace,t=T.scene,h=t.matrixOptions.cdata,i=T.xa,s=T.ya,y=i.c2p(e),d=s.c2p(a),p=T.distance,c=w.getDimIndex(r,i),m=w.getDimIndex(r,s);if(c===!1||m===!1)return[T];for(var l=h[c],x=h[m],u,A,_=p,g=0;g<l.length;g++){var b=l[g],v=x[g],C=i.c2p(b)-y,S=s.c2p(v)-d,k=Math.sqrt(C*C+S*S);k<_&&(_=A=k,u=g)}return T.index=u,T.distance=_,T.dxy=A,u===void 0?[T]:[f(T,l,x,r)]}U.exports={hoverPoints:M}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(o,U,H){var w=o("./base_index");w.basePlotModule=o("./base_plot"),U.exports=w},{"./base_index":1042,"./base_plot":1043}],1050:[function(o,U,H){var w=o("regl-splom"),f=o("../../lib"),M=o("../../plots/cartesian/axis_ids"),T=o("../../components/dragelement/helpers").selectMode;U.exports=function(n,r,t){if(!!t.length)for(var h=0;h<t.length;h++)e(n,t[h][0])};function e(a,n){var r=a._fullLayout,t=r._size,h=n.trace,i=n.t,s=r._splomScenes[h.uid],y=s.matrixOptions,d=y.cdata,p=r._glcanvas.data()[0].regl,c=r.dragmode,m,l,x,u,A;if(d.length!==0){y.lower=h.showupperhalf,y.upper=h.showlowerhalf,y.diagonal=h.diagonal.visible;var _=h._visibleDims,g=d.length,b=s.viewOpts={};for(b.ranges=new Array(g),b.domains=new Array(g),A=0;A<_.length;A++){x=_[A];var v=b.ranges[A]=new Array(4),C=b.domains[A]=new Array(4);m=M.getFromId(a,h._diag[x][0]),m&&(v[0]=m._rl[0],v[2]=m._rl[1],C[0]=m.domain[0],C[2]=m.domain[1]),l=M.getFromId(a,h._diag[x][1]),l&&(v[1]=l._rl[0],v[3]=l._rl[1],C[1]=l.domain[0],C[3]=l.domain[1])}var S=a._context.plotGlPixelRatio,k=t.l*S,E=t.b*S,F=t.w*S,I=t.h*S;b.viewport=[k,E,F+k,I+E],s.matrix===!0&&(s.matrix=w(p));var D=r.clickmode.indexOf("select")>-1,R=T(c)||!!h.selectedpoints||D,O=!0;if(R){var z=h._length;if(h.selectedpoints){s.selectBatch=h.selectedpoints;var B=h.selectedpoints,G={};for(x=0;x<B.length;x++)G[B[x]]=!0;var Q=[];for(x=0;x<z;x++)G[x]||Q.push(x);s.unselectBatch=Q}var X=i.xpx=new Array(g),j=i.ypx=new Array(g);for(A=0;A<_.length;A++){if(x=_[A],m=M.getFromId(a,h._diag[x][0]),m)for(X[A]=new Array(z),u=0;u<z;u++)X[A][u]=m.c2p(d[A][u]);if(l=M.getFromId(a,h._diag[x][1]),l)for(j[A]=new Array(z),u=0;u<z;u++)j[A][u]=l.c2p(d[A][u])}if(s.selectBatch.length||s.unselectBatch.length){var re=f.extendFlat({},y,s.unselectedOptions,b),ue=f.extendFlat({},y,s.selectedOptions,b);s.matrix.update(re,ue),O=!1}}else i.xpx=i.ypx=null;if(O){var K=f.extendFlat({},y,b);s.matrix.update(K,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(o,U,H){var w=o("../../lib");U.exports=function(M,T){var e=M._fullLayout,a=T.uid,n=e._splomScenes;n||(n=e._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},t={matrix:!1,selectBatch:[],unselectBatch:[]},h=n[T.uid];return h||(h=n[a]=w.extendFlat({},r,t),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw()),h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy(),h.matrixOptions=null,h.selectBatch=null,h.unselectBatch=null,h=null}),h.dirty||w.extendFlat(h,r),h}},{"../../lib":515}],1052:[function(o,U,H){var w=o("../../lib"),f=w.pushUnique,M=o("../scatter/subtypes"),T=o("./helpers");U.exports=function(a,n){var r=a.cd,t=r[0].trace,h=r[0].t,i=a.scene,s=i.matrixOptions.cdata,y=a.xaxis,d=a.yaxis,p=[];if(!i)return p;var c=!M.hasMarkers(t)&&!M.hasText(t);if(t.visible!==!0||c)return p;var m=T.getDimIndex(t,y),l=T.getDimIndex(t,d);if(m===!1||l===!1)return p;var x=h.xpx[m],u=h.ypx[l],A=s[m],_=s[l],g=(a.scene.selectBatch||[]).slice(),b=[];if(n!==!1&&!n.degenerate)for(var v=0;v<A.length;v++)n.contains([x[v],u[v]],null,v,a)?(p.push({pointNumber:v,x:A[v],y:_[v]}),f(g,v)):g.indexOf(v)!==-1?f(g,v):b.push(v);var C=i.matrixOptions;return!g.length&&!b.length?i.matrix.update(C,null):!i.selectBatch.length&&!i.unselectBatch.length&&i.matrix.update(i.unselectedOptions,w.extendFlat({},C,i.selectedOptions,i.viewOpts)),i.selectBatch=g,i.unselectBatch=b,p}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=o("../../plots/template_attributes").hovertemplateAttrs,T=o("../mesh3d/attributes"),e=o("../../plots/attributes"),a=o("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,U.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/calc");function M(n,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=a(r.u,r._len),r._v=a(r.v,r._len),r._w=a(r.w,r._len),r._x=a(r.x,r._len),r._y=a(r.y,r._len),r._z=a(r.z,r._len);var t=T(r);r._gridFill=t.fill,r._Xs=t.Xs,r._Ys=t.Ys,r._Zs=t.Zs,r._len=t.len;var h=0,i,s,y;r.starts&&(i=a(r.starts.x||[]),s=a(r.starts.y||[]),y=a(r.starts.z||[]),h=Math.min(i.length,s.length,y.length)),r._startsX=i||[],r._startsY=s||[],r._startsZ=y||[];var d=0,p=1/0,c;for(c=0;c<r._len;c++){var m=r._u[c],l=r._v[c],x=r._w[c],u=Math.sqrt(m*m+l*l+x*x);d=Math.max(d,u),p=Math.min(p,u)}for(f(n,r,{vals:[p,d],containerStr:"",cLetter:"c"}),c=0;c<h;c++){var A=i[c];t.xMax=Math.max(t.xMax,A),t.xMin=Math.min(t.xMin,A);var _=s[c];t.yMax=Math.max(t.yMax,_),t.yMin=Math.min(t.yMin,_);var g=y[c];t.zMax=Math.max(t.zMax,g),t.zMin=Math.min(t.zMin,g)}r._slen=h,r._normMax=d,r._xbnds=[t.xMin,t.xMax],r._ybnds=[t.yMin,t.yMax],r._zbnds=[t.zMin,t.zMax]}function T(n){var r=n._x,t=n._y,h=n._z,i=n._len,s,y,d,p=-1/0,c=1/0,m=-1/0,l=1/0,x=-1/0,u=1/0,A="",_,g,b,v,C,S,k,E,F;for(i&&(v=r[0],S=t[0],E=h[0]),i>1&&(C=r[i-1],k=t[i-1],F=h[i-1]),s=0;s<i;s++)p=Math.max(p,r[s]),c=Math.min(c,r[s]),m=Math.max(m,t[s]),l=Math.min(l,t[s]),x=Math.max(x,h[s]),u=Math.min(u,h[s]),!_&&r[s]!==v&&(_=!0,A+="x"),!g&&t[s]!==S&&(g=!0,A+="y"),!b&&h[s]!==E&&(b=!0,A+="z");_||(A+="x"),g||(A+="y"),b||(A+="z");var I=e(n._x),D=e(n._y),R=e(n._z);A=A.replace("x",(v>C?"-":"+")+"x"),A=A.replace("y",(S>k?"-":"+")+"y"),A=A.replace("z",(E>F?"-":"+")+"z");var O=function(){i=0,I=[],D=[],R=[]};(!i||i<I.length*D.length*R.length)&&O();var z=function(ae){return ae==="x"?r:ae==="y"?t:h},B=function(ae){return ae==="x"?I:ae==="y"?D:R},G=function(ae){return ae[i-1]<ae[0]?-1:1},Q=z(A[1]),X=z(A[3]),j=z(A[5]),re=B(A[1]).length,ue=B(A[3]).length,K=B(A[5]).length,te=!1,Y=function(ae,oe,be){return re*(ue*ae+oe)+be},V=G(z(A[1])),ee=G(z(A[3])),ne=G(z(A[5]));for(s=0;s<K-1;s++){for(y=0;y<ue-1;y++){for(d=0;d<re-1;d++){var Z=Y(s,y,d),q=Y(s,y,d+1),ie=Y(s,y+1,d),se=Y(s+1,y,d);if((!(Q[Z]*V<Q[q]*V)||!(X[Z]*ee<X[ie]*ee)||!(j[Z]*ne<j[se]*ne))&&(te=!0),te)break}if(te)break}if(te)break}return te&&(w.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:c,yMin:l,zMin:u,xMax:p,yMax:m,zMax:x,Xs:I,Ys:D,Zs:R,len:i,fill:A}}function e(n){return w.distinctVals(n).vals}function a(n,r){if(r===void 0&&(r=n.length),w.isTypedArray(n))return n.subarray(0,r);for(var t=[],h=0;h<r;h++)t[h]=+n[h];return t}U.exports={calc:M,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(o,U,H){var w=o("../../../stackgl_modules").gl_streamtube3d,f=w.createTubeMesh,M=o("../../lib"),T=o("../../lib/gl_format_color").parseColorScale,e=o("../../components/colorscale").extractOpts,a=o("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function r(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var t=r.prototype;t.handlePick=function(d){var p=this.scene.fullSceneLayout,c=this.scene.dataScale;function m(u,A){var _=p[A],g=c[n[A]];return _.l2c(u)/g}if(d.object===this.mesh){var l=d.data.position,x=d.data.velocity;return d.traceCoordinate=[m(l[0],"xaxis"),m(l[1],"yaxis"),m(l[2],"zaxis"),m(x[0],"xaxis"),m(x[1],"yaxis"),m(x[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function h(d){var p=d.length,c;return p>2?c=d.slice(1,p-1):p===2?c=[(d[0]+d[1])/2]:c=d,c}function i(d){var p=d.length;return p===1?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function s(d,p){var c=d.fullSceneLayout,m=d.dataScale,l=p._len,x={};function u(ue,K){var te=c[K],Y=m[n[K]];return M.simpleMap(ue,function(V){return te.d2l(V)*Y})}if(x.vectors=a(u(p._u,"xaxis"),u(p._v,"yaxis"),u(p._w,"zaxis"),l),!l)return{positions:[],cells:[]};var A=u(p._Xs,"xaxis"),_=u(p._Ys,"yaxis"),g=u(p._Zs,"zaxis");x.meshgrid=[A,_,g],x.gridFill=p._gridFill;var b=p._slen;if(b)x.startingPositions=a(u(p._startsX,"xaxis"),u(p._startsY,"yaxis"),u(p._startsZ,"zaxis"));else{for(var v=_[0],C=h(A),S=h(g),k=new Array(C.length*S.length),E=0,F=0;F<C.length;F++)for(var I=0;I<S.length;I++)k[E++]=[C[F],v,S[I]];x.startingPositions=k}x.colormap=T(p),x.tubeSize=p.sizeref,x.maxLength=p.maxdisplayed;var D=u(p._xbnds,"xaxis"),R=u(p._ybnds,"yaxis"),O=u(p._zbnds,"zaxis"),z=i(A),B=i(_),G=i(g),Q=[[D[0]-z[0],R[0]-B[0],O[0]-G[0]],[D[1]+z[1],R[1]+B[1],O[1]+G[1]]],X=w(x,Q),j=e(p);X.vertexIntensityBounds=[j.min/p._normMax,j.max/p._normMax];var re=p.lightposition;return X.lightPosition=[re.x,re.y,re.z],X.ambient=p.lighting.ambient,X.diffuse=p.lighting.diffuse,X.specular=p.lighting.specular,X.roughness=p.lighting.roughness,X.fresnel=p.lighting.fresnel,X.opacity=p.opacity,p._pad=X.tubeScale*p.sizeref*2,X}t.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(d,p){var c=d.glplot.gl,m=s(d,p),l=f(c,m),x=new r(d,p.uid);return x.mesh=l,x.data=p,l._trace=x,d.glplot.add(l),x}U.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(o,U,H){var w=o("../../lib"),f=o("../../components/colorscale/defaults"),M=o("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("u"),i=t("v"),s=t("w"),y=t("x"),d=t("y"),p=t("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!y||!y.length||!d||!d.length||!p||!p.length){a.visible=!1;return}t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),f(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(o,U,H){U.exports={moduleType:"trace",name:"streamtube",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:o("./attributes"),supplyDefaults:o("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:o("./calc").calc,plot:o("./convert"),eventData:function(w,f){return w.tubex=w.x,w.tubey=w.y,w.tubez=w.z,w.tubeu=f.traceCoordinate[3],w.tubev=f.traceCoordinate[4],w.tubew=f.traceCoordinate[5],w.norm=f.traceCoordinate[6],w.divergence=f.traceCoordinate[7],delete w.x,delete w.y,delete w.z,w},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(o,U,H){var w=o("../../plots/attributes"),f=o("../../plots/template_attributes").hovertemplateAttrs,M=o("../../plots/template_attributes").texttemplateAttrs,T=o("../../components/colorscale/attributes"),e=o("../../plots/domain").attributes,a=o("../pie/attributes"),n=o("./constants"),r=o("../../lib/extend").extendFlat;U.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},a.marker.line.color,{dflt:null}),width:r({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:r({},w.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:f({},{keys:n.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:r({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(o,U,H){var w=o("../../plots/plots");H.name="sunburst",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],1060:[function(o,U,H){var w=o("d3-hierarchy"),f=o("fast-isnumeric"),M=o("../../lib"),T=o("../../components/colorscale").makeColorScaleFuncFromTrace,e=o("../pie/calc").makePullColorFn,a=o("../pie/calc").generateExtendedColors,n=o("../../components/colorscale").calc,r=o("../../constants/numerical").ALMOST_EQUAL,t={},h={},i={};H.calc=function(y,d){var p=y._fullLayout,c=d.ids,m=M.isArrayOrTypedArray(c),l=d.labels,x=d.parents,u=d.values,A=M.isArrayOrTypedArray(u),_=[],g={},b={},v=function(V,ee){g[V]?g[V].push(ee):g[V]=[ee],b[ee]=1},C=function(V){return V||typeof V=="number"},S=function(V){return!A||f(u[V])&&u[V]>=0},k,E,F;m?(k=Math.min(c.length,x.length),E=function(V){return C(c[V])&&S(V)},F=function(V){return String(c[V])}):(k=Math.min(l.length,x.length),E=function(V){return C(l[V])&&S(V)},F=function(V){return String(l[V])}),A&&(k=Math.min(k,u.length));for(var I=0;I<k;I++)if(E(I)){var D=F(I),R=C(x[I])?String(x[I]):"",O={i:I,id:D,pid:R,label:C(l[I])?String(l[I]):""};A&&(O.v=+u[I]),_.push(O),v(R,D)}if(g[""]){if(g[""].length>1){for(var G=M.randstr(),Q=0;Q<_.length;Q++)_[Q].pid===""&&(_[Q].pid=G);_.unshift({hasMultipleRoots:!0,id:G,pid:"",label:""})}}else{var z=[],B;for(B in g)b[B]||z.push(B);if(z.length===1)B=z[0],_.unshift({hasImpliedRoot:!0,id:B,pid:"",label:B});else return M.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",z.join(", ")].join(" "))}var X;try{X=w.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(_)}catch(V){return M.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",V.message].join(" "))}var j=w.hierarchy(X),re=!1;if(A)switch(d.branchvalues){case"remainder":j.sum(function(V){return V.data.v});break;case"total":j.each(function(V){var ee=V.data.data,ne=ee.v;if(V.children){var Z=V.children.reduce(function(q,ie){return q+ie.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&(ne=Z),ne<Z*r)return re=!0,M.warn(["Total value for node",V.data.data.id,"of",d.name,"is smaller than the sum of its children.",`
parent value =`,ne,`
children sum =`,Z].join(" "))}V.value=ne});break}else s(j,d,{branches:d.count.indexOf("branches")!==-1,leaves:d.count.indexOf("leaves")!==-1});if(!re){d.sort&&j.sort(function(V,ee){return ee.value-V.value});var ue,K,te=d.marker.colors||[],Y=!!te.length;return d._hasColorscale?(Y||(te=A?d.values:d._values),n(y,d,{vals:te,containerStr:"marker",cLetter:"c"}),K=T(d.marker)):ue=e(p["_"+d.type+"colormap"]),j.each(function(V){var ee=V.data.data;ee.color=d._hasColorscale?K(te[ee.i]):ue(te[ee.i],ee.id)}),_[0].hierarchy=j,_}},H._runCrossTraceCalc=function(y,d){var p=d._fullLayout,c=d.calcdata,m=p[y+"colorway"],l=p["_"+y+"colormap"];p["extend"+y+"colors"]&&(m=a(m,y==="icicle"?i:y==="treemap"?h:t));var x=0,u;function A(v){var C=v.data.data,S=C.id;C.color===!1&&(l[S]?C.color=l[S]:v.parent?v.parent.parent?C.color=v.parent.data.data.color:(l[S]=C.color=m[x%m.length],x++):C.color=u)}for(var _=0;_<c.length;_++){var g=c[_],b=g[0];b.trace.type===y&&b.hierarchy&&(u=b.trace.root.color,b.hierarchy.each(A))}},H.crossTraceCalc=function(y){return H._runCrossTraceCalc("sunburst",y)};function s(y,d,p){var c=0,m=y.children;if(m){for(var l=m.length,x=0;x<l;x++)c+=s(m[x],d,p);p.branches&&c++}else p.leaves&&c++;return y.value=y.data.data.value=c,d._values||(d._values=[]),d._values[y.data.data.i]=c,c}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(o,U,H){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../plots/domain").defaults,T=o("../bar/defaults").handleText,e=o("../../components/colorscale"),a=e.hasColorscale,n=e.handleDefaults;U.exports=function(t,h,i,s){function y(A,_){return w.coerce(t,h,f,A,_)}var d=y("labels"),p=y("parents");if(!d||!d.length||!p||!p.length){h.visible=!1;return}var c=y("values");c&&c.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var m=y("marker.line.width");m&&y("marker.line.color",s.paper_bgcolor),y("marker.colors");var l=h._hasColorscale=a(t,"marker","colors")||(t.marker||{}).coloraxis;l&&n(t,h,s,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",l?1:.7);var x=y("text");y("texttemplate"),h.texttemplate||y("textinfo",Array.isArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var u="auto";T(t,h,s,y,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("insidetextorientation"),y("sort"),y("rotation"),y("root.color"),M(h,s,y),h._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../registry"),M=o("../../components/fx/helpers").appendArrayPointValue,T=o("../../components/fx"),e=o("../../lib"),a=o("../../lib/events"),n=o("./helpers"),r=o("../pie/helpers"),t=r.formatPieValue;U.exports=function(s,y,d,p,c){var m=p[0],l=m.trace,x=m.hierarchy,u=l.type==="sunburst",A=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var _=function(v){var C=d._fullLayout;if(!(d._dragging||C.hovermode===!1)){var S=d._fullData[l.index],k=v.data.data,E=k.i,F=n.isHierarchyRoot(v),I=n.getParent(x,v),D=n.getValue(v),R=function(q){return e.castOption(S,E,q)},O=R("hovertemplate"),z=T.castHoverinfo(S,C,E),B=C.separators,G;if(O||z&&z!=="none"&&z!=="skip"){var Q,X;u&&(Q=m.cx+v.pxmid[0]*(1-v.rInscribed),X=m.cy+v.pxmid[1]*(1-v.rInscribed)),A&&(Q=v._hoverX,X=v._hoverY);var j={},re=[],ue=[],K=function(q){return re.indexOf(q)!==-1};z&&(re=z==="all"?S._module.attributes.hoverinfo.flags:z.split("+")),j.label=k.label,K("label")&&j.label&&ue.push(j.label),k.hasOwnProperty("v")&&(j.value=k.v,j.valueLabel=t(j.value,B),K("value")&&ue.push(j.valueLabel)),j.currentPath=v.currentPath=n.getPath(v.data),K("current path")&&!F&&ue.push(j.currentPath);var te,Y=[],V=function(){Y.indexOf(te)===-1&&(ue.push(te),Y.push(te))};j.percentParent=v.percentParent=D/n.getValue(I),j.parent=v.parentString=n.getPtLabel(I),K("percent parent")&&(te=n.formatPercent(j.percentParent,B)+" of "+j.parent,V()),j.percentEntry=v.percentEntry=D/n.getValue(y),j.entry=v.entry=n.getPtLabel(y),K("percent entry")&&!F&&!v.onPathbar&&(te=n.formatPercent(j.percentEntry,B)+" of "+j.entry,V()),j.percentRoot=v.percentRoot=D/n.getValue(x),j.root=v.root=n.getPtLabel(x),K("percent root")&&!F&&(te=n.formatPercent(j.percentRoot,B)+" of "+j.root,V()),j.text=R("hovertext")||R("text"),K("text")&&(te=j.text,e.isValidTextValue(te)&&ue.push(te)),G=[h(v,S,c.eventDataKeys)];var ee={trace:S,y:X,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:ue.join("<br>"),name:O||K("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||k.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:j,eventData:G};u&&(ee.x0=Q-v.rInscribed*v.rpx1,ee.x1=Q+v.rInscribed*v.rpx1,ee.idealAlign=v.pxmid[0]<0?"left":"right"),A&&(ee.x=Q,ee.idealAlign=Q<0?"left":"right");var ne=[];T.loneHover(ee,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:d,inOut_bbox:ne}),G[0].bbox=ne[0],l._hasHoverLabel=!0}if(A){var Z=s.select("path.surface");c.styleOne(Z,v,S,{hovered:!0})}l._hasHoverEvent=!0,d.emit("plotly_hover",{points:G||[h(v,S,c.eventDataKeys)],event:w.event})}},g=function(v){var C=d._fullLayout,S=d._fullData[l.index],k=w.select(this).datum();if(l._hasHoverEvent&&(v.originalEvent=w.event,d.emit("plotly_unhover",{points:[h(k,S,c.eventDataKeys)],event:w.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(C._hoverlayer.node()),l._hasHoverLabel=!1),A){var E=s.select("path.surface");c.styleOne(E,k,S,{hovered:!1})}},b=function(v){var C=d._fullLayout,S=d._fullData[l.index],k=u&&(n.isHierarchyRoot(v)||n.isLeaf(v)),E=n.getPtId(v),F=n.isEntry(v)?n.findEntryWithChild(x,E):n.findEntryWithLevel(x,E),I=n.getPtId(F),D={points:[h(v,S,c.eventDataKeys)],event:w.event};k||(D.nextLevel=I);var R=a.triggerHandler(d,"plotly_"+l.type+"click",D);if(R!==!1&&C.hovermode&&(d._hoverdata=[h(v,S,c.eventDataKeys)],T.click(d,w.event)),!k&&R!==!1&&!d._dragging&&!d._transitioning){f.call("_storeDirectGUIEdit",S,C._tracePreGUI[S.uid],{level:S.level});var O={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(C._hoverlayer.node()),f.call("animate",d,O,z)}};s.on("mouseover",_),s.on("mouseout",g),s.on("click",b)};function h(i,s,y){for(var d=i.data.data,p={curveNumber:s.index,pointNumber:d.i,data:s._input,fullData:s},c=0;c<y.length;c++){var m=y[c];m in i&&(p[m]=i[m])}return"parentString"in i&&!n.isHierarchyRoot(i)&&(p.parent=i.parentString),M(p,s,d.i),p}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../../lib/setcursor"),T=o("../pie/helpers");H.findEntryWithLevel=function(r,t){var h;return t&&r.eachAfter(function(i){if(H.getPtId(i)===t)return h=i.copy()}),h||r},H.findEntryWithChild=function(r,t){var h;return r.eachAfter(function(i){for(var s=i.children||[],y=0;y<s.length;y++){var d=s[y];if(H.getPtId(d)===t)return h=i.copy()}}),h||r},H.isEntry=function(r){return!r.parent},H.isLeaf=function(r){return!r.children},H.getPtId=function(r){return r.data.data.id},H.getPtLabel=function(r){return r.data.data.label},H.getValue=function(r){return r.value},H.isHierarchyRoot=function(r){return n(r)===""},H.setSliceCursor=function(r,t,h){var i=h.isTransitioning;if(!i){var s=r.datum();i=h.hideOnRoot&&H.isHierarchyRoot(s)||h.hideOnLeaves&&H.isLeaf(s)}M(r,i?null:"pointer")};function e(r,t,h){return{color:H.getOutsideTextFontKey("color",r,t,h),family:H.getOutsideTextFontKey("family",r,t,h),size:H.getOutsideTextFontKey("size",r,t,h)}}function a(r,t,h,i){var s=(i||{}).onPathbar,y=t.data.data,d=y.i,p=w.castOption(r,d,(s?"pathbar.textfont":"insidetextfont")+".color");return!p&&r._input.textfont&&(p=w.castOption(r._input,d,"textfont.color")),{color:p||f.contrast(y.color),family:H.getInsideTextFontKey("family",r,t,h,i),size:H.getInsideTextFontKey("size",r,t,h,i)}}H.getInsideTextFontKey=function(r,t,h,i,s){var y=(s||{}).onPathbar,d=y?"pathbar.textfont":"insidetextfont",p=h.data.data.i;return w.castOption(t,p,d+"."+r)||w.castOption(t,p,"textfont."+r)||i.size},H.getOutsideTextFontKey=function(r,t,h,i){var s=h.data.data.i;return w.castOption(t,s,"outsidetextfont."+r)||w.castOption(t,s,"textfont."+r)||i.size},H.isOutsideText=function(r,t){return!r._hasColorscale&&H.isHierarchyRoot(t)},H.determineTextFont=function(r,t,h,i){return H.isOutsideText(r,t)?e(r,t,h):a(r,t,h,i)},H.hasTransition=function(r){return!!(r&&r.duration>0)},H.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},H.isHeader=function(r,t){return!(H.isLeaf(r)||r.depth===t._maxDepth-1)};function n(r){return r.data.data.pid}H.getParent=function(r,t){return H.findEntryWithLevel(r,n(t))},H.listPath=function(r,t){var h=r.parent;if(!h)return[];var i=t?[h.data[t]]:[h];return H.listPath(h,t).concat(i)},H.getPath=function(r){return H.listPath(r,"label").join("/")+"/"},H.formatValue=T.formatPieValue,H.formatPercent=function(r,t){var h=w.formatPercent(r,0);return h==="0%"&&(h=T.formatPiePercent(r,t)),h}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(o,U,H){U.exports={moduleType:"trace",name:"sunburst",basePlotModule:o("./base_plot"),categories:[],animatable:!0,attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot").plot,style:o("./style").style,colorbar:o("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(o,U,H){U.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-hierarchy"),M=o("d3-interpolate").interpolate,T=o("../../components/drawing"),e=o("../../lib"),a=o("../../lib/svg_text_utils"),n=o("../bar/uniform_text"),r=n.recordMinTextSize,t=n.clearMinTextSize,h=o("../pie/plot"),i=o("../pie/helpers").getRotationAngle,s=h.computeTransform,y=h.transformInsideText,d=o("./style").styleOne,p=o("../bar/style").resizeText,c=o("./fx"),m=o("./constants"),l=o("./helpers");H.plot=function(b,v,C,S){var k=b._fullLayout,E=k._sunburstlayer,F,I,D=!C,R=!k.uniformtext.mode&&l.hasTransition(C);if(t("sunburst",k),F=E.selectAll("g.trace.sunburst").data(v,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){S&&(I=S());var O=w.transition().duration(C.duration).ease(C.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){E.selectAll("g.trace").each(function(z){x(b,z,this,C)})})}else F.each(function(z){x(b,z,this,C)}),k.uniformtext.mode&&p(b,k._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function x(b,v,C,S){var k=b._context.staticPlot,E=b._fullLayout,F=!E.uniformtext.mode&&l.hasTransition(S),I=w.select(C),D=I.selectAll("g.slice"),R=v[0],O=R.trace,z=R.hierarchy,B=l.findEntryWithLevel(z,O.level),G=l.getMaxDepth(O),Q=E._size,X=O.domain,j=Q.w*(X.x[1]-X.x[0]),re=Q.h*(X.y[1]-X.y[0]),ue=.5*Math.min(j,re),K=R.cx=Q.l+Q.w*(X.x[1]+X.x[0])/2,te=R.cy=Q.t+Q.h*(1-X.y[0])-re/2;if(!B)return D.remove();var Y=null,V={};F&&D.each(function(Ee){V[l.getPtId(Ee)]={rpx0:Ee.rpx0,rpx1:Ee.rpx1,x0:Ee.x0,x1:Ee.x1,transform:Ee.transform},!Y&&l.isEntry(Ee)&&(Y=Ee)});var ee=u(B).descendants(),ne=B.height+1,Z=0,q=G;R.hasMultipleRoots&&l.isHierarchyRoot(B)&&(ee=ee.slice(1),ne-=1,Z=1,q+=1),ee=ee.filter(function(Ee){return Ee.y1<=q});var ie=i(O.rotation);ie&&ee.forEach(function(Ee){Ee.x0+=ie,Ee.x1+=ie});var se=Math.min(ne,G),ae=function(Ee){return(Ee-Z)/se*ue},oe=function(Ee,Ze){return[Ee*Math.cos(Ze),-Ee*Math.sin(Ze)]},be=function(Ee){return e.pathAnnulus(Ee.rpx0,Ee.rpx1,Ee.x0,Ee.x1,K,te)},ce=function(Ee){return K+_(Ee)[0]*(Ee.transform.rCenter||0)+(Ee.transform.x||0)},de=function(Ee){return te+_(Ee)[1]*(Ee.transform.rCenter||0)+(Ee.transform.y||0)};D=D.data(ee,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Ee=w.select(this),Ze=Ee.select("path.surface");Ze.transition().attrTween("d",function(Fe){var Re=Me(Fe);return function(We){return be(Re(We))}});var Ge=Ee.select("g.slicetext");Ge.attr("opacity",0)}).remove():D.exit().remove(),D.order();var ye=null;if(F&&Y){var ge=l.getPtId(Y);D.each(function(Ee){ye===null&&l.getPtId(Ee)===ge&&(ye=Ee.x1)})}var me=D;F&&(me=me.transition().each("end",function(){var Ee=w.select(this);l.setSliceCursor(Ee,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),me.each(function(Ee){var Ze=w.select(this),Ge=e.ensureSingle(Ze,"path","surface",function(tr){tr.style("pointer-events",k?"none":"all")});Ee.rpx0=ae(Ee.y0),Ee.rpx1=ae(Ee.y1),Ee.xmid=(Ee.x0+Ee.x1)/2,Ee.pxmid=oe(Ee.rpx1,Ee.xmid),Ee.midangle=-(Ee.xmid-Math.PI/2),Ee.startangle=-(Ee.x0-Math.PI/2),Ee.stopangle=-(Ee.x1-Math.PI/2),Ee.halfangle=.5*Math.min(e.angleDelta(Ee.x0,Ee.x1)||Math.PI,Math.PI),Ee.ring=1-Ee.rpx0/Ee.rpx1,Ee.rInscribed=A(Ee),F?Ge.transition().attrTween("d",function(tr){var Vt=Le(tr);return function(Pt){return be(Vt(Pt))}}):Ge.attr("d",be),Ze.call(c,B,b,v,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:b._transitioning}),Ge.call(d,Ee,O);var Fe=e.ensureSingle(Ze,"g","slicetext"),Re=e.ensureSingle(Fe,"text","",function(tr){tr.attr("data-notex",1)}),We=e.ensureUniformFontSize(b,l.determineTextFont(O,Ee,E.font));Re.text(H.formatSliceLabel(Ee,B,O,v,E)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,We).call(a.convertToTspans,b);var xt=T.bBox(Re.node());Ee.transform=y(xt,Ee,R),Ee.transform.targetX=ce(Ee),Ee.transform.targetY=de(Ee);var Nt=function(tr,Vt){var Pt=tr.transform;return s(Pt,Vt),Pt.fontSize=We.size,r(O.type,Pt,E),e.getTextTransform(Pt)};F?Re.transition().attrTween("transform",function(tr){var Vt=Oe(tr);return function(Pt){return Nt(Vt(Pt),xt)}}):Re.attr("transform",Nt(Ee,xt))});function Me(Ee){var Ze=l.getPtId(Ee),Ge=V[Ze],Fe=V[l.getPtId(B)],Re;if(Fe){var We=(Ee.x1>Fe.x1?2*Math.PI:0)+ie;Re=Ee.rpx1<Fe.rpx1?{x0:Ee.x0,x1:Ee.x1,rpx0:0,rpx1:0}:{x0:We,x1:We,rpx0:Ee.rpx0,rpx1:Ee.rpx1}}else{var xt,Nt=l.getPtId(Ee.parent);D.each(function(Ut){if(l.getPtId(Ut)===Nt)return xt=Ut});var tr=xt.children,Vt;tr.forEach(function(Ut,Lt){if(l.getPtId(Ut)===Ze)return Vt=Lt});var Pt=tr.length,$t=M(xt.x0,xt.x1);Re={rpx0:ue,rpx1:ue,x0:$t(Vt/Pt),x1:$t((Vt+1)/Pt)}}return M(Ge,Re)}function Le(Ee){var Ze=V[l.getPtId(Ee)],Ge,Fe={x0:Ee.x0,x1:Ee.x1,rpx0:Ee.rpx0,rpx1:Ee.rpx1};if(Ze)Ge=Ze;else if(Y)if(Ee.parent)if(ye){var Re=(Ee.x1>ye?2*Math.PI:0)+ie;Ge={x0:Re,x1:Re}}else Ge={rpx0:ue,rpx1:ue},e.extendFlat(Ge,_e(Ee));else Ge={rpx0:0,rpx1:0};else Ge={x0:ie,x1:ie};return M(Ge,Fe)}function Oe(Ee){var Ze=V[l.getPtId(Ee)],Ge,Fe=Ee.transform;if(Ze)Ge=Ze;else if(Ge={rpx1:Ee.rpx1,transform:{textPosAngle:Fe.textPosAngle,scale:0,rotate:Fe.rotate,rCenter:Fe.rCenter,x:Fe.x,y:Fe.y}},Y)if(Ee.parent)if(ye){var Re=Ee.x1>ye?2*Math.PI:0;Ge.x0=Ge.x1=Re}else e.extendFlat(Ge,_e(Ee));else Ge.x0=Ge.x1=ie;else Ge.x0=Ge.x1=ie;var We=M(Ge.transform.textPosAngle,Ee.transform.textPosAngle),xt=M(Ge.rpx1,Ee.rpx1),Nt=M(Ge.x0,Ee.x0),tr=M(Ge.x1,Ee.x1),Vt=M(Ge.transform.scale,Fe.scale),Pt=M(Ge.transform.rotate,Fe.rotate),$t=Fe.rCenter===0?3:Ge.transform.rCenter===0?1/3:1,Ut=M(Ge.transform.rCenter,Fe.rCenter),Lt=function(Ye){return Ut(Math.pow(Ye,$t))};return function(Ye){var ot=xt(Ye),Ve=Nt(Ye),Ae=tr(Ye),He=Lt(Ye),Je=oe(ot,(Ve+Ae)/2),tt=We(Ye),St={pxmid:Je,rpx1:ot,transform:{textPosAngle:tt,rCenter:He,x:Fe.x,y:Fe.y}};return r(O.type,Fe,E),{transform:{targetX:ce(St),targetY:de(St),scale:Vt(Ye),rotate:Pt(Ye),rCenter:He}}}}function _e(Ee){var Ze=Ee.parent,Ge=V[l.getPtId(Ze)],Fe={};if(Ge){var Re=Ze.children,We=Re.indexOf(Ee),xt=Re.length,Nt=M(Ge.x0,Ge.x1);Fe.x0=Nt(We/xt),Fe.x1=Nt(We/xt)}else Fe.x0=Fe.x1=0;return Fe}}function u(b){return f.partition().size([2*Math.PI,b.height+1])(b)}H.formatSliceLabel=function(b,v,C,S,k){var E=C.texttemplate,F=C.textinfo;if(!E&&(!F||F==="none"))return"";var I=k.separators,D=S[0],R=b.data.data,O=D.hierarchy,z=l.isHierarchyRoot(b),B=l.getParent(O,b),G=l.getValue(b);if(!E){var Q=F.split("+"),X=function(Z){return Q.indexOf(Z)!==-1},j=[],re;if(X("label")&&R.label&&j.push(R.label),R.hasOwnProperty("v")&&X("value")&&j.push(l.formatValue(R.v,I)),!z){X("current path")&&j.push(l.getPath(b.data));var ue=0;X("percent parent")&&ue++,X("percent entry")&&ue++,X("percent root")&&ue++;var K=ue>1;if(ue){var te,Y=function(Z){re=l.formatPercent(te,I),K&&(re+=" of "+Z),j.push(re)};X("percent parent")&&!z&&(te=G/l.getValue(B),Y("parent")),X("percent entry")&&(te=G/l.getValue(v),Y("entry")),X("percent root")&&(te=G/l.getValue(O),Y("root"))}}return X("text")&&(re=e.castOption(C,R.i,"text"),e.isValidTextValue(re)&&j.push(re)),j.join("<br>")}var V=e.castOption(C,R.i,"texttemplate");if(!V)return"";var ee={};R.label&&(ee.label=R.label),R.hasOwnProperty("v")&&(ee.value=R.v,ee.valueLabel=l.formatValue(R.v,I)),ee.currentPath=l.getPath(b.data),z||(ee.percentParent=G/l.getValue(B),ee.percentParentLabel=l.formatPercent(ee.percentParent,I),ee.parent=l.getPtLabel(B)),ee.percentEntry=G/l.getValue(v),ee.percentEntryLabel=l.formatPercent(ee.percentEntry,I),ee.entry=l.getPtLabel(v),ee.percentRoot=G/l.getValue(O),ee.percentRootLabel=l.formatPercent(ee.percentRoot,I),ee.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(ee.color=R.color);var ne=e.castOption(C,R.i,"text");return(e.isValidTextValue(ne)||ne==="")&&(ee.text=ne),ee.customdata=e.castOption(C,R.i,"customdata"),e.texttemplateString(V,ee,k._d3locale,ee,C._meta||{})};function A(b){return b.rpx0===0&&e.isFullCircle([b.x0,b.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(b.halfangle)),b.ring/2))}function _(b){return g(b.rpx1,b.transform.textPosAngle)}function g(b,v){return[b*Math.sin(v),-b*Math.cos(v)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../lib"),T=o("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._sunburstlayer.selectAll(".trace");T(n,r,"sunburst"),r.each(function(t){var h=w.select(this),i=t[0],s=i.trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(y){w.select(this).call(a,y,s)})})}function a(n,r,t){var h=r.data.data,i=!r.children,s=h.i,y=M.castOption(t,s,"marker.line.color")||f.defaultLine,d=M.castOption(t,s,"marker.line.width")||0;n.style("stroke-width",d).call(f.fill,h.color).call(f.stroke,y).style("opacity",i?t.leaf.opacity:null)}U.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(o,U,H){var w=o("../../components/color"),f=o("../../components/colorscale/attributes"),M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=o("../../plots/template_attributes").hovertemplateAttrs,e=o("../../plots/attributes"),a=o("../../lib/extend").extendFlat,n=o("../../plot_api/edit_types").overrideAll;function r(i){return{valType:"boolean",dflt:!1}}function t(i){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:w.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:w.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var h=U.exports=n(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},f("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},f.zauto,{}),zmin:a({},f.zmin,{}),zmax:a({},f.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes",h.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(o,U,H){var w=o("../../components/colorscale/calc");U.exports=function(M,T){T.surfacecolor?w(M,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):w(M,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(o,U,H){var w=o("../../../stackgl_modules").gl_surface3d,f=o("../../../stackgl_modules").ndarray,M=o("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=o("../heatmap/interp2d"),e=o("../heatmap/find_empties"),a=o("../../lib").isArrayOrTypedArray,n=o("../../lib/gl_format_color").parseColorScale,r=o("../../lib/str2rgbarray"),t=o("../../components/colorscale").extractOpts;function h(S,k,E){this.scene=S,this.uid=E,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=h.prototype;i.getXat=function(S,k,E,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return E===void 0?I:F.d2l(I,0,E)},i.getYat=function(S,k,E,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return E===void 0?I:F.d2l(I,0,E)},i.getZat=function(S,k,E,F){var I=this.data.z[k][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][S]),E===void 0?I:F.d2l(I,0,E)},i.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,E=(S.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(E),this.data._ylength-1),0);S.index=[F,I],S.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],S.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][F]!==void 0?S.textLabel=O[I][F]:O?S.textLabel=O:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function s(S){var k=S[0].rgb,E=S[S.length-1].rgb;return k[0]===E[0]&&k[1]===E[1]&&k[2]===E[2]&&k[3]===E[3]}var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(S,k){if(S<k)return 0;for(var E=0;Math.floor(S%k)===0;)S/=k,E++;return E}function p(S){for(var k=[],E=0;E<y.length;E++){var F=y[E];k.push(d(S,F))}return k}function c(S){for(var k=p(S),E=S,F=0;F<y.length;F++)if(k[F]>0){E=y[F];break}return E}function m(S,k){if(!(S<1||k<1)){for(var E=p(S),F=p(k),I=1,D=0;D<y.length;D++)I*=Math.pow(y[D],Math.max(E[D],F[D]));return I}}function l(S){if(S.length!==0){for(var k=1,E=0;E<S.length;E++)k=m(k,S[E]);return k}}i.calcXnums=function(S){var k,E=[];for(k=1;k<S;k++){var F=this.getXat(k-1,0),I=this.getXat(k,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?E[k-1]=Math.abs(I-F):E[k-1]=0}var D=0;for(k=1;k<S;k++)D+=E[k-1];for(k=1;k<S;k++)E[k-1]===0?E[k-1]=1:E[k-1]=Math.round(D/E[k-1]);return E},i.calcYnums=function(S){var k,E=[];for(k=1;k<S;k++){var F=this.getYat(0,k-1),I=this.getYat(0,k);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?E[k-1]=Math.abs(I-F):E[k-1]=0}var D=0;for(k=1;k<S;k++)D+=E[k-1];for(k=1;k<S;k++)E[k-1]===0?E[k-1]=1:E[k-1]=Math.round(D/E[k-1]);return E};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=x[9],A=x[13];i.estimateScale=function(S,k){for(var E=k===0?this.calcXnums(S):this.calcYnums(S),F=1+l(E);F<u;)F*=2;for(;F>A;)F--,F/=c(F),F++,F<u&&(F=A);var I=Math.round(F/S);return I>1?I:1};function _(S,k,E){var F=E[8]+E[2]*k[0]+E[5]*k[1];return S[0]=(E[6]+E[0]*k[0]+E[3]*k[1])/F,S[1]=(E[7]+E[1]*k[0]+E[4]*k[1])/F,S}function g(S,k,E){return b(S,k,_,E),S}function b(S,k,E,F){for(var I=[0,0],D=S.shape[0],R=S.shape[1],O=0;O<D;O++)for(var z=0;z<R;z++)E(I,[O,z],F),S.set(O,z,M(k,I[0],I[1]));return S}i.refineCoords=function(S){for(var k=this.dataScaleX,E=this.dataScaleY,F=S[0].shape[0],I=S[0].shape[1],D=Math.floor(S[0].shape[0]*k+1)|0,R=Math.floor(S[0].shape[1]*E+1)|0,O=1+F+1,z=1+I+1,B=f(new Float32Array(O*z),[O,z]),G=[1/k,0,0,0,1/E,0,0,0,1],Q=0;Q<S.length;++Q){this.surface.padField(B,S[Q]);var X=f(new Float32Array(D*R),[D,R]);g(X,B,G),S[Q]=X}};function v(S,k){for(var E=!1,F=0;F<S.length;F++)if(k===S[F]){E=!0;break}E===!1&&S.push(k)}i.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],E=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(E=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(k[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],v(S[F],D);if(E){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=k[F]?S[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},i.update=function(S){var k=this.scene,E=k.fullSceneLayout,F=this.surface,I=n(S),D=k.dataScale,R=S.z[0].length,O=S._ylength,z=k.contourLevels;this.data=S;var B,G,Q,X,j=[];for(B=0;B<3;B++)for(j[B]=[],G=0;G<R;G++)j[B][G]=[];for(G=0;G<R;G++)for(Q=0;Q<O;Q++)j[0][G][Q]=this.getXat(G,Q,S.xcalendar,E.xaxis),j[1][G][Q]=this.getYat(G,Q,S.ycalendar,E.yaxis),j[2][G][Q]=this.getZat(G,Q,S.zcalendar,E.zaxis);if(S.connectgaps)for(S._emptypoints=e(j[2]),T(j[2],S._emptypoints),S._interpolatedZ=[],G=0;G<R;G++)for(S._interpolatedZ[G]=[],Q=0;Q<O;Q++)S._interpolatedZ[G][Q]=j[2][G][Q];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X==null?j[B][G][Q]=NaN:X=j[B][G][Q]*=D[B];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X!=null&&(this.minValues[B]>X&&(this.minValues[B]=X),this.maxValues[B]<X&&(this.maxValues[B]=X));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X!=null&&(j[B][G][Q]-=this.objectOffset[B]);var re=[f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O])];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)re[B].set(G,Q,j[B][G][Q]);j=[];var ue={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},K=t(S);if(ue.intensityBounds=[K.min,K.max],S.surfacecolor){var te=f(new Float32Array(R*O),[R,O]);for(G=0;G<R;G++)for(Q=0;Q<O;Q++)te.set(G,Q,S.surfacecolor[Q][G]);re.push(te)}else ue.intensityBounds[0]*=D[2],ue.intensityBounds[1]*=D[2];(A<re[0].shape[0]||A<re[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(re[0].shape[0],0),this.dataScaleY=this.estimateScale(re[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(re)),S.surfacecolor&&(ue.intensity=re.pop());var Y=[!0,!0,!0],V=["x","y","z"];for(B=0;B<3;++B){var ee=S.contours[V[B]];Y[B]=ee.highlight,ue.showContour[B]=ee.show||ee.highlight,ue.showContour[B]&&(ue.contourProject[B]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[B]=!0,ue.levels[B]=z[B],F.highlightColor[B]=ue.contourColor[B]=r(ee.color),ee.usecolormap?F.highlightTint[B]=ue.contourTint[B]=0:F.highlightTint[B]=ue.contourTint[B]=1,ue.contourWidth[B]=ee.width,this.contourStart[B]=ee.start,this.contourEnd[B]=ee.end,this.contourSize[B]=ee.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),ee.highlight&&(ue.dynamicColor[B]=r(ee.highlightcolor),ue.dynamicWidth[B]=ee.highlightwidth))}s(I)&&(ue.vertexColor=!0),ue.objectOffset=this.objectOffset,ue.coords=re,F.update(ue),F.visible=S.visible,F.enableDynamic=Y,F.enableHighlight=Y,F.snapToData=!0,"lighting"in S&&(F.ambientLight=S.lighting.ambient,F.diffuseLight=S.lighting.diffuse,F.specularLight=S.lighting.specular,F.roughness=S.lighting.roughness,F.fresnel=S.lighting.fresnel),"lightposition"in S&&(F.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function C(S,k){var E=S.glplot.gl,F=w({gl:E}),I=new h(S,F,k.uid);return F._trace=I,I.update(k),S.glplot.add(F),I}U.exports=C},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(o,U,H){var w=o("../../registry"),f=o("../../lib"),M=o("../../components/colorscale/defaults"),T=o("./attributes"),e=.1;function a(i,s){for(var y=[],d=32,p=0;p<d;p++){var c=p/(d-1),m=s+(1-s)*(1-Math.pow(Math.sin(i*c*Math.PI),2));y.push([c,Math.max(0,Math.min(1,m))])}return y}function n(i){var s=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var y=0;y<i.length;y++){var d=i[y];if(d.length!==2||+d[0]<s)return!1;s=+d[0]}return!0}function r(i,s,y,d){var p,c;function m(S,k){return f.coerce(i,s,T,S,k)}var l=m("x"),x=m("y"),u=m("z");if(!u||!u.length||(l?l.length<1:!1)||(x?x.length<1:!1)){s.visible=!1;return}s._xlength=Array.isArray(l)&&f.isArrayOrTypedArray(l[0])?u.length:u[0].length,s._ylength=u.length;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(i,s,["x","y","z"],d),m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),m("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){m(S)});var _=m("surfacecolor"),g=["x","y","z"];for(p=0;p<3;++p){var b="contours."+g[p],v=m(b+".show"),C=m(b+".highlight");if(v||C)for(c=0;c<3;++c)m(b+".project."+g[c]);v&&(m(b+".color"),m(b+".width"),m(b+".usecolormap")),C&&(m(b+".highlightcolor"),m(b+".highlightwidth")),m(b+".start"),m(b+".end"),m(b+".size")}_||(h(i,"zmin","cmin"),h(i,"zmax","cmax"),h(i,"zauto","cauto")),M(i,s,d,m,{prefix:"",cLetter:"c"}),t(i,s,d,m),s._length=null}function t(i,s,y,d){var p=d("opacityscale");p==="max"?s.opacityscale=[[0,e],[1,1]]:p==="min"?s.opacityscale=[[0,1],[1,e]]:p==="extremes"?s.opacityscale=a(1,e):n(p)||(s.opacityscale=void 0)}function h(i,s,y){s in i&&!(y in i)&&(i[y]=i[s])}U.exports={supplyDefaults:r,opacityscaleDefaults:t}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:o("./calc"),plot:o("./convert"),moduleType:"trace",name:"surface",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(o,U,H){var w=o("../../components/annotations/attributes"),f=o("../../lib/extend").extendFlat,M=o("../../plot_api/edit_types").overrideAll,T=o("../../plots/font_attributes"),e=o("../../plots/domain").attributes,a=o("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,n=U.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:f({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:f({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))}},"calc","from-root");n.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(o,U,H){var w=o("../../plots/get_data").getModuleCalcData,f=o("./plot"),M="table";H.name=M,H.plot=function(T){var e=w(T.calcdata,M)[0];e.length&&f(T,e)},H.clean=function(T,e,a,n){var r=n._has&&n._has(M),t=e._has&&e._has(M);r&&!t&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(o,U,H){var w=o("../../lib/gup").wrap;U.exports=function(){return w({})}},{"../../lib/gup":512}],1078:[function(o,U,H){U.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(o,U,H){var w=o("./constants"),f=o("../../lib/extend").extendFlat,M=o("fast-isnumeric");U.exports=function(y,d){var p=a(d.cells.values),c=function(G){return G.slice(d.header.values.length,G.length)},m=a(d.header.values);m.length&&!m[0].length&&(m[0]=[""],m=a(m));var l=m.concat(c(p).map(function(){return n((m[0]||[""]).length)})),x=d.domain,u=Math.floor(y._fullLayout._size.w*(x.x[1]-x.x[0])),A=Math.floor(y._fullLayout._size.h*(x.y[1]-x.y[0])),_=d.header.values.length?l[0].map(function(){return d.header.height}):[w.emptyHeaderHeight],g=p.length?p[0].map(function(){return d.cells.height}):[],b=_.reduce(e,0),v=A-b,C=v+w.uplift,S=h(g,C),k=h(_,b),E=t(k,[]),F=t(S,E),I={},D=d._fullInput.columnorder.concat(c(p.map(function(G,Q){return Q}))),R=l.map(function(G,Q){var X=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(Q,d.columnwidth.length-1)]:d.columnwidth;return M(X)?Number(X):1}),O=R.reduce(e,0);R=R.map(function(G){return G/O*u});var z=Math.max(T(d.header.line.width),T(d.cells.line.width)),B={key:d.uid+y._context.staticPlot,translateX:x.x[0]*y._fullLayout._size.w,translateY:y._fullLayout._size.h*(1-x.y[1]),size:y._fullLayout._size,width:u,maxLineWidth:z,height:A,columnOrder:D,groupHeight:A,rowBlocks:F,headerRowBlocks:E,scrollY:0,cells:f({},d.cells,{values:p}),headerCells:f({},d.header,{values:l}),gdColumns:l.map(function(G){return G[0]}),gdColumnsOriginalOrder:l.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(G,Q){var X=I[G];I[G]=(X||0)+1;var j=G+"__"+I[G];return{key:j,label:G,specIndex:Q,xIndex:D[Q],xScale:r,x:void 0,calcdata:void 0,columnWidth:R[Q]}})};return B.columns.forEach(function(G){G.calcdata=B,G.x=r(G)}),B};function T(s){if(Array.isArray(s)){for(var y=0,d=0;d<s.length;d++)y=Math.max(y,T(s[d]));return y}return s}function e(s,y){return s+y}function a(s){var y=s.slice(),d=1/0,p=0,c;for(c=0;c<y.length;c++)Array.isArray(y[c])||(y[c]=[y[c]]),d=Math.min(d,y[c].length),p=Math.max(p,y[c].length);if(d!==p)for(c=0;c<y.length;c++){var m=p-y[c].length;m&&(y[c]=y[c].concat(n(m)))}return y}function n(s){for(var y=new Array(s),d=0;d<s;d++)y[d]="";return y}function r(s){return s.calcdata.columns.reduce(function(y,d){return d.xIndex<s.xIndex?y+d.columnWidth:y},0)}function t(s,y){var d=Object.keys(s);return d.map(function(p){return f({},s[p],{auxiliaryBlocks:y})})}function h(s,y){for(var d={},p,c=0,m=0,l=i(),x=0,u=0,A=0;A<s.length;A++)p=s[A],l.rows.push({rowIndex:A,rowHeight:p}),m+=p,(m>=y||A===s.length-1)&&(d[c]=l,l.key=u++,l.firstRowIndex=x,l.lastRowIndex=A,l=i(),c+=m,x=A+1,m=0);return d}function i(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(o,U,H){var w=o("../../lib/extend").extendFlat;H.splitToPanels=function(M){var T=[0,0],e=w({},M,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:w({},M.calcdata,{cells:M.calcdata.headerCells})}),a=w({},M,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),n=w({},M,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks});return[a,n,e]},H.splitToCells=function(M){var T=f(M);return(M.values||[]).slice(T[0],T[1]).map(function(e,a){var n=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+n,key:T[0]+a,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:e}})};function f(M){var T=M.rowBlocks[M.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../plots/domain").defaults;function T(e,a){for(var n=e.columnorder||[],r=e.header.values.length,t=n.slice(0,r),h=t.slice().sort(function(y,d){return y-d}),i=t.map(function(y){return h.indexOf(y)}),s=i.length;s<r;s++)i.push(s);a("columnorder",i)}U.exports=function(a,n,r,t){function h(i,s){return w.coerce(a,n,f,i,s)}M(n,t,h),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),w.coerceFont(h,"header.font",w.extendFlat({},t.font)),T(n,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),w.coerceFont(h,"cells.font",w.extendFlat({},t.font)),n._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("./calc"),plot:o("./plot"),moduleType:"trace",name:"table",basePlotModule:o("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(o,U,H){var w=o("./constants"),f=o("@plotly/d3"),M=o("../../lib"),T=M.numberFormat,e=o("../../lib/gup"),a=o("../../components/drawing"),n=o("../../lib/svg_text_utils"),r=o("../../lib").raiseToTop,t=o("../../lib").strTranslate,h=o("../../lib").cancelTransition,i=o("./data_preparation_helper"),s=o("./data_split_helpers"),y=o("../../components/color");U.exports=function(ie,se){var ae=!ie._context.staticPlot,oe=ie._fullLayout._paper.selectAll("."+w.cn.table).data(se.map(function(Fe){var Re=e.unwrap(Fe),We=Re.trace;return i(ie,We)}),e.keyFun);oe.exit().remove(),oe.enter().append("g").classed(w.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),oe.attr("width",function(Fe){return Fe.width+Fe.size.l+Fe.size.r}).attr("height",function(Fe){return Fe.height+Fe.size.t+Fe.size.b}).attr("transform",function(Fe){return t(Fe.translateX,Fe.translateY)});var be=oe.selectAll("."+w.cn.tableControlView).data(e.repeat,e.keyFun),ce=be.enter().append("g").classed(w.cn.tableControlView,!0).style("box-sizing","content-box");if(ae){var de="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(Fe){be.filter(function(Re){return Fe===Re}).call(l,ie)}).on(de,function(Fe){if(!Fe.scrollbarState.wheeling){Fe.scrollbarState.wheeling=!0;var Re=Fe.scrollY+f.event.deltaY,We=X(ie,be,null,Re)(Fe);We||(f.event.stopPropagation(),f.event.preventDefault()),Fe.scrollbarState.wheeling=!1}}).call(l,ie,!0)}be.attr("transform",function(Fe){return t(Fe.size.l,Fe.size.t)});var ye=be.selectAll("."+w.cn.scrollBackground).data(e.repeat,e.keyFun);ye.enter().append("rect").classed(w.cn.scrollBackground,!0).attr("fill","none"),ye.attr("width",function(Fe){return Fe.width}).attr("height",function(Fe){return Fe.height}),be.each(function(Fe){a.setClipUrl(f.select(this),p(ie,Fe),ie)});var ge=be.selectAll("."+w.cn.yColumn).data(function(Fe){return Fe.columns},e.keyFun);ge.enter().append("g").classed(w.cn.yColumn,!0),ge.exit().remove(),ge.attr("transform",function(Fe){return t(Fe.x,0)}),ae&&ge.call(f.behavior.drag().origin(function(Fe){var Re=f.select(this);return R(Re,Fe,-w.uplift),r(this),Fe.calcdata.columnDragInProgress=!0,l(be.filter(function(We){return Fe.calcdata.key===We.key}),ie),Fe}).on("drag",function(Fe){var Re=f.select(this),We=function(tr){return(Fe===tr?f.event.x:tr.x)+tr.columnWidth/2};Fe.x=Math.max(-w.overdrag,Math.min(Fe.calcdata.width+w.overdrag-Fe.columnWidth,f.event.x));var xt=m(ge).filter(function(tr){return tr.calcdata.key===Fe.calcdata.key}),Nt=xt.sort(function(tr,Vt){return We(tr)-We(Vt)});Nt.forEach(function(tr,Vt){tr.xIndex=Vt,tr.x=Fe===tr?tr.x:tr.xScale(tr)}),ge.filter(function(tr){return Fe!==tr}).transition().ease(w.transitionEase).duration(w.transitionDuration).attr("transform",function(tr){return t(tr.x,0)}),Re.call(h).attr("transform",t(Fe.x,-w.uplift))}).on("dragend",function(Fe){var Re=f.select(this),We=Fe.calcdata;Fe.x=Fe.xScale(Fe),Fe.calcdata.columnDragInProgress=!1,R(Re,Fe,0),I(ie,We,We.columns.map(function(xt){return xt.xIndex}))})),ge.each(function(Fe){a.setClipUrl(f.select(this),c(ie,Fe),ie)});var me=ge.selectAll("."+w.cn.columnBlock).data(s.splitToPanels,e.keyFun);me.enter().append("g").classed(w.cn.columnBlock,!0).attr("id",function(Fe){return Fe.key}),me.style("cursor",function(Fe){return Fe.dragHandle?"ew-resize":Fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Me=me.filter(z),Le=me.filter(O);ae&&Le.call(f.behavior.drag().origin(function(Fe){return f.event.stopPropagation(),Fe}).on("drag",X(ie,be,-1)).on("dragend",function(){})),x(ie,be,Me,me),x(ie,be,Le,me);var Oe=be.selectAll("."+w.cn.scrollAreaClip).data(e.repeat,e.keyFun);Oe.enter().append("clipPath").classed(w.cn.scrollAreaClip,!0).attr("id",function(Fe){return p(ie,Fe)});var _e=Oe.selectAll("."+w.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);_e.enter().append("rect").classed(w.cn.scrollAreaClipRect,!0).attr("x",-w.overdrag).attr("y",-w.uplift).attr("fill","none"),_e.attr("width",function(Fe){return Fe.width+2*w.overdrag}).attr("height",function(Fe){return Fe.height+w.uplift});var Ee=ge.selectAll("."+w.cn.columnBoundary).data(e.repeat,e.keyFun);Ee.enter().append("g").classed(w.cn.columnBoundary,!0);var Ze=ge.selectAll("."+w.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ze.enter().append("clipPath").classed(w.cn.columnBoundaryClippath,!0),Ze.attr("id",function(Fe){return c(ie,Fe)});var Ge=Ze.selectAll("."+w.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Ge.enter().append("rect").classed(w.cn.columnBoundaryRect,!0).attr("fill","none"),Ge.attr("width",function(Fe){return Fe.columnWidth+2*d(Fe)}).attr("height",function(Fe){return Fe.calcdata.height+2*d(Fe)+w.uplift}).attr("x",function(Fe){return-d(Fe)}).attr("y",function(Fe){return-d(Fe)}),Q(null,Le,be)};function d(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function p(q,ie){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function c(q,ie){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function m(q){return[].concat.apply([],q.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function l(q,ie,se){function ae(ge){var me=ge.rowBlocks;return Y(me,me.length-1)+(me.length?V(me[me.length-1],1/0):1)}var oe=q.selectAll("."+w.cn.scrollbarKit).data(e.repeat,e.keyFun);oe.enter().append("g").classed(w.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),oe.each(function(ge){var me=ge.scrollbarState;me.totalHeight=ae(ge),me.scrollableAreaHeight=ge.groupHeight-B(ge),me.currentlyVisibleHeight=Math.min(me.totalHeight,me.scrollableAreaHeight),me.ratio=me.currentlyVisibleHeight/me.totalHeight,me.barLength=Math.max(me.ratio*me.currentlyVisibleHeight,w.goldenRatio*w.scrollbarWidth),me.barWiggleRoom=me.currentlyVisibleHeight-me.barLength,me.wiggleRoom=Math.max(0,me.totalHeight-me.scrollableAreaHeight),me.topY=me.barWiggleRoom===0?0:ge.scrollY/me.wiggleRoom*me.barWiggleRoom,me.bottomY=me.topY+me.barLength,me.dragMultiplier=me.wiggleRoom/me.barWiggleRoom}).attr("transform",function(ge){var me=ge.width+w.scrollbarWidth/2+w.scrollbarOffset;return t(me,B(ge))});var be=oe.selectAll("."+w.cn.scrollbar).data(e.repeat,e.keyFun);be.enter().append("g").classed(w.cn.scrollbar,!0);var ce=be.selectAll("."+w.cn.scrollbarSlider).data(e.repeat,e.keyFun);ce.enter().append("g").classed(w.cn.scrollbarSlider,!0),ce.attr("transform",function(ge){return t(0,ge.scrollbarState.topY||0)});var de=ce.selectAll("."+w.cn.scrollbarGlyph).data(e.repeat,e.keyFun);de.enter().append("line").classed(w.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",w.scrollbarWidth).attr("stroke-linecap","round").attr("y1",w.scrollbarWidth/2),de.attr("y2",function(ge){return ge.scrollbarState.barLength-w.scrollbarWidth/2}).attr("stroke-opacity",function(ge){return ge.columnDragInProgress||!ge.scrollbarState.barWiggleRoom||se?0:.4}),de.transition().delay(0).duration(0),de.transition().delay(w.scrollbarHideDelay).duration(w.scrollbarHideDuration).attr("stroke-opacity",0);var ye=be.selectAll("."+w.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);ye.enter().append("line").classed(w.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",w.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ge){var me=f.event.y,Me=this.getBoundingClientRect(),Le=ge.scrollbarState,Oe=me-Me.top,_e=f.scale.linear().domain([0,Le.scrollableAreaHeight]).range([0,Le.totalHeight]).clamp(!0);Le.topY<=Oe&&Oe<=Le.bottomY||X(ie,q,null,_e(Oe-Le.barLength/2))(ge)}).call(f.behavior.drag().origin(function(ge){return f.event.stopPropagation(),ge.scrollbarState.scrollbarScrollInProgress=!0,ge}).on("drag",X(ie,q)).on("dragend",function(){})),ye.attr("y2",function(ge){return ge.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(de.remove(),ye.remove())}function x(q,ie,se,ae){var oe=u(se),be=A(oe);v(be);var ce=_(be);S(ce);var de=b(be),ye=g(de);C(ye),k(ye,ie,ae,q),te(be)}function u(q){var ie=q.selectAll("."+w.cn.columnCells).data(e.repeat,e.keyFun);return ie.enter().append("g").classed(w.cn.columnCells,!0),ie.exit().remove(),ie}function A(q){var ie=q.selectAll("."+w.cn.columnCell).data(s.splitToCells,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(w.cn.columnCell,!0),ie.exit().remove(),ie}function _(q){var ie=q.selectAll("."+w.cn.cellRect).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("rect").classed(w.cn.cellRect,!0),ie}function g(q){var ie=q.selectAll("."+w.cn.cellText).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("text").classed(w.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){f.event.stopPropagation()}),ie}function b(q){var ie=q.selectAll("."+w.cn.cellTextHolder).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(w.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function v(q){q.each(function(ie,se){var ae=ie.calcdata.cells.font,oe=ie.column.specIndex,be={size:D(ae.size,oe,se),color:D(ae.color,oe,se),family:D(ae.family,oe,se)};ie.rowNumber=ie.key,ie.align=D(ie.calcdata.cells.align,oe,se),ie.cellBorderWidth=D(ie.calcdata.cells.line.width,oe,se),ie.font=be})}function C(q){q.each(function(ie){a.font(f.select(this),ie.font)})}function S(q){q.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var se=f.select(this);y.stroke(se,D(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),y.fill(se,D(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function k(q,ie,se,ae){q.text(function(oe){var be=oe.column.specIndex,ce=oe.rowNumber,de=oe.value,ye=typeof de=="string",ge=ye&&de.match(/<br>/i),me=!ye||ge;oe.mayHaveMarkup=ye&&de.match(/[<&>]/);var Me=E(de);oe.latex=Me;var Le=Me?"":D(oe.calcdata.cells.prefix,be,ce)||"",Oe=Me?"":D(oe.calcdata.cells.suffix,be,ce)||"",_e=Me?null:D(oe.calcdata.cells.format,be,ce)||null,Ee=Le+(_e?T(_e)(oe.value):oe.value)+Oe,Ze;oe.wrappingNeeded=!oe.wrapped&&!me&&!Me&&(Ze=F(Ee)),oe.cellHeightMayIncrease=ge||Me||oe.mayHaveMarkup||(Ze===void 0?F(Ee):Ze),oe.needsConvertToTspans=oe.mayHaveMarkup||oe.wrappingNeeded||oe.latex;var Ge;if(oe.wrappingNeeded){var Fe=w.wrapSplitCharacter===" "?Ee.replace(/<a href=/ig,"<a_href="):Ee,Re=Fe.split(w.wrapSplitCharacter),We=w.wrapSplitCharacter===" "?Re.map(function(xt){return xt.replace(/<a_href=/ig,"<a href=")}):Re;oe.fragments=We.map(function(xt){return{text:xt,width:null}}),oe.fragments.push({fragment:w.wrapSpacer,width:null}),Ge=We.join(w.lineBreaker)+w.lineBreaker+w.wrapSpacer}else delete oe.fragments,Ge=Ee;return Ge}).attr("dy",function(oe){return oe.needsConvertToTspans?0:"0.75em"}).each(function(oe){var be=this,ce=f.select(be),de=oe.wrappingNeeded?re:ue;oe.needsConvertToTspans?n.convertToTspans(ce,ae,de(se,be,ie,ae,oe)):f.select(be.parentNode).attr("transform",function(ye){return t(K(ye),w.cellPad)}).attr("text-anchor",function(ye){return{left:"start",center:"middle",right:"end"}[ye.align]})})}function E(q){return typeof q=="string"&&q.match(w.latexCheck)}function F(q){return q.indexOf(w.wrapSplitCharacter)!==-1}function I(q,ie,se){var ae=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(oe,be){return se[ae.indexOf(oe)]-se[ae.indexOf(be)]}),ie.columnorder=se,q.emit("plotly_restyle")}function D(q,ie,se){if(Array.isArray(q)){var ae=q[Math.min(ie,q.length-1)];return Array.isArray(ae)?ae[Math.min(se,ae.length-1)]:ae}else return q}function R(q,ie,se){q.transition().ease(w.releaseTransitionEase).duration(w.releaseTransitionDuration).attr("transform",t(ie.x,se))}function O(q){return q.type==="cells"}function z(q){return q.type==="header"}function B(q){var ie=q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(se,ae){return se+V(ae,1/0)},0)}function G(q,ie,se){for(var ae=[],oe=0,be=0;be<q.length;be++){for(var ce=q[be],de=ce.rows,ye=0,ge=0;ge<de.length;ge++)ye+=de[ge].rowHeight;ce.allRowsHeight=ye;var me=oe+ye,Me=ie,Le=Me+se;Me<me&&Le>oe&&ae.push(be),oe+=ye}return ae}function Q(q,ie,se){var ae=m(ie)[0];if(ae!==void 0){var oe=ae.rowBlocks,be=ae.calcdata,ce=Y(oe,oe.length),de=ae.calcdata.groupHeight-B(ae),ye=be.scrollY=Math.max(0,Math.min(ce-de,be.scrollY)),ge=G(oe,ye,de);ge.length===1&&(ge[0]===oe.length-1?ge.unshift(ge[0]-1):ge.push(ge[0]+1)),ge[0]%2&&ge.reverse(),ie.each(function(me,Me){me.page=ge[Me],me.scrollY=ye}),ie.attr("transform",function(me){var Me=Y(me.rowBlocks,me.page)-me.scrollY;return t(0,Me)}),q&&(j(q,se,ie,ge,ae.prevPages,ae,0),j(q,se,ie,ge,ae.prevPages,ae,1),l(se,q))}}function X(q,ie,se,ae){return function(be){var ce=be.calcdata?be.calcdata:be,de=ie.filter(function(Me){return ce.key===Me.key}),ye=se||ce.scrollbarState.dragMultiplier,ge=ce.scrollY;ce.scrollY=ae===void 0?ce.scrollY+ye*f.event.dy:ae;var me=de.selectAll("."+w.cn.yColumn).selectAll("."+w.cn.columnBlock).filter(O);return Q(q,me,de),ce.scrollY===ge}}function j(q,ie,se,ae,oe,be,ce){var de=ae[ce]!==oe[ce];de&&(clearTimeout(be.currentRepaint[ce]),be.currentRepaint[ce]=setTimeout(function(){var ye=se.filter(function(ge,me){return me===ce&&ae[me]!==oe[me]});x(q,ie,ye,se),oe[ce]=ae[ce]}))}function re(q,ie,se,ae){return function(){var be=f.select(ie.parentNode);be.each(function(ce){var de=ce.fragments;be.selectAll("tspan.line").each(function(Ee,Ze){de[Ze].width=this.getComputedTextLength()});var ye=de[de.length-1].width,ge=de.slice(0,-1),me=[],Me,Le,Oe=0,_e=ce.column.columnWidth-2*w.cellPad;for(ce.value="";ge.length;)Me=ge.shift(),Le=Me.width+ye,Oe+Le>_e&&(ce.value+=me.join(w.wrapSpacer)+w.lineBreaker,me=[],Oe=0),me.push(Me.text),Oe+=Le;Oe&&(ce.value+=me.join(w.wrapSpacer)),ce.wrapped=!0}),be.selectAll("tspan.line").remove(),k(be.select("."+w.cn.cellText),se,q,ae),f.select(ie.parentNode.parentNode).call(te)}}function ue(q,ie,se,ae,oe){return function(){if(!oe.settledY){var ce=f.select(ie.parentNode),de=ne(oe),ye=oe.key-de.firstRowIndex,ge=de.rows[ye].rowHeight,me=oe.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*w.cellPad:ge,Me=Math.max(me,ge),Le=Me-de.rows[ye].rowHeight;Le&&(de.rows[ye].rowHeight=Me,q.selectAll("."+w.cn.columnCell).call(te),Q(null,q.filter(O),0),l(se,ae,!0)),ce.attr("transform",function(){var Oe=this,_e=Oe.parentNode,Ee=_e.getBoundingClientRect(),Ze=f.select(Oe.parentNode).select("."+w.cn.cellRect).node().getBoundingClientRect(),Ge=Oe.transform.baseVal.consolidate(),Fe=Ze.top-Ee.top+(Ge?Ge.matrix.f:w.cellPad);return t(K(oe,f.select(Oe.parentNode).select("."+w.cn.cellTextHolder).node().getBoundingClientRect().width),Fe)}),oe.settledY=!0}}}function K(q,ie){switch(q.align){case"left":return w.cellPad;case"right":return q.column.columnWidth-(ie||0)-w.cellPad;case"center":return(q.column.columnWidth-(ie||0))/2;default:return w.cellPad}}function te(q){q.attr("transform",function(ie){var se=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,de){return ce+V(de,1/0)},0),ae=ne(ie),oe=V(ae,ie.key),be=oe+se;return t(0,be)}).selectAll("."+w.cn.cellRect).attr("height",function(ie){return Z(ne(ie),ie.key).rowHeight})}function Y(q,ie){for(var se=0,ae=ie-1;ae>=0;ae--)se+=ee(q[ae]);return se}function V(q,ie){for(var se=0,ae=0;ae<q.rows.length&&q.rows[ae].rowIndex<ie;ae++)se+=q.rows[ae].rowHeight;return se}function ee(q){var ie=q.allRowsHeight;if(ie!==void 0)return ie;for(var se=0,ae=0;ae<q.rows.length;ae++)se+=q.rows[ae].rowHeight;return q.allRowsHeight=se,se}function ne(q){return q.rowBlocks[q.page]}function Z(q,ie){return q.rows[ie-q.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(o,U,H){var w=o("../../plots/template_attributes").hovertemplateAttrs,f=o("../../plots/template_attributes").texttemplateAttrs,M=o("../../components/colorscale/attributes"),T=o("../../plots/domain").attributes,e=o("../pie/attributes"),a=o("../sunburst/attributes"),n=o("./constants"),r=o("../../lib/extend").extendFlat;U.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(o,U,H){var w=o("../../plots/plots");H.name="treemap",H.plot=function(f,M,T,e){w.plotBasePlot(H.name,f,M,T,e)},H.clean=function(f,M,T,e){w.cleanBasePlot(H.name,f,M,T,e)}},{"../../plots/plots":628}],1086:[function(o,U,H){var w=o("../sunburst/calc");H.calc=function(f,M){return w.calc(f,M)},H.crossTraceCalc=function(f){return w._runCrossTraceCalc("treemap",f)}},{"../sunburst/calc":1060}],1087:[function(o,U,H){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../../components/color"),T=o("../../plots/domain").defaults,e=o("../bar/defaults").handleText,a=o("../bar/constants").TEXTPAD,n=o("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;U.exports=function(i,s,y,d){function p(k,E){return w.coerce(i,s,f,k,E)}var c=p("labels"),m=p("parents");if(!c||!c.length||!m||!m.length){s.visible=!1;return}var l=p("values");l&&l.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var x=p("tiling.packing");x==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),s.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var A=p("pathbar.visible"),_="auto";e(i,s,d,p,_,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var g=s.textposition.indexOf("bottom")!==-1,b=p("marker.line.width");b&&p("marker.line.color",d.paper_bgcolor);var v=p("marker.colors"),C=s._hasColorscale=r(i,"marker","colors")||(i.marker||{}).coloraxis;C?t(i,s,d,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(v||[]).length);var S=s.textfont.size*2;p("marker.pad.t",g?S/4:S),p("marker.pad.l",S/4),p("marker.pad.r",S/4),p("marker.pad.b",g?S:S/4),s._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},A&&(p("pathbar.thickness",s.pathbar.textfont.size+2*a),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(s,d,p),s._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(o,U,H){var w=o("@plotly/d3"),f=o("../sunburst/helpers"),M=o("../bar/uniform_text"),T=M.clearMinTextSize,e=o("../bar/style").resizeText,a=o("./plot_one");U.exports=function(r,t,h,i,s){var y=s.type,d=s.drawDescendants,p=r._fullLayout,c=p["_"+y+"layer"],m,l,x=!h;if(T(y,p),m=c.selectAll("g.trace."+y).data(t,function(A){return A[0].trace.uid}),m.enter().append("g").classed("trace",!0).classed(y,!0),m.order(),!p.uniformtext.mode&&f.hasTransition(h)){i&&(l=i());var u=w.transition().duration(h.duration).ease(h.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});u.each(function(){c.selectAll("g.trace").each(function(A){a(r,A,this,h,d)})})}else m.each(function(A){a(r,A,this,h,d)}),p.uniformtext.mode&&e(r,c.selectAll(".trace"),y);x&&m.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../lib/svg_text_utils"),e=o("./partition"),a=o("./style").styleOne,n=o("./constants"),r=o("../sunburst/helpers"),t=o("../sunburst/fx"),h=!0;U.exports=function(s,y,d,p,c){var m=c.barDifY,l=c.width,x=c.height,u=c.viewX,A=c.viewY,_=c.pathSlice,g=c.toMoveInsideSlice,b=c.strTransform,v=c.hasTransition,C=c.handleSlicesExit,S=c.makeUpdateSliceInterpolator,k=c.makeUpdateTextInterpolator,E={},F=s._context.staticPlot,I=s._fullLayout,D=y[0],R=D.trace,O=D.hierarchy,z=l/R._entryDepth,B=r.listPath(d.data,"id"),G=e(O.copy(),[l,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();G=G.filter(function(X){var j=B.indexOf(X.data.id);return j===-1?!1:(X.x0=z*j,X.x1=z*(j+1),X.y0=m,X.y1=m+x,X.onPathbar=!0,!0)}),G.reverse(),p=p.data(G,r.getPtId),p.enter().append("g").classed("pathbar",!0),C(p,h,E,[l,x],_),p.order();var Q=p;v&&(Q=Q.transition().each("end",function(){var X=w.select(this);r.setSliceCursor(X,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(X){X._x0=u(X.x0),X._x1=u(X.x1),X._y0=A(X.y0),X._y1=A(X.y1),X._hoverX=u(X.x1-Math.min(l,x)/2),X._hoverY=A(X.y1-x/2);var j=w.select(this),re=f.ensureSingle(j,"path","surface",function(Y){Y.style("pointer-events",F?"none":"all")});v?re.transition().attrTween("d",function(Y){var V=S(Y,h,E,[l,x]);return function(ee){return _(V(ee))}}):re.attr("d",_),j.call(t,d,s,y,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),re.call(a,X,R,{hovered:!1}),X._text=(r.getPtLabel(X)||"").split("<br>").join(" ")||"";var ue=f.ensureSingle(j,"g","slicetext"),K=f.ensureSingle(ue,"text","",function(Y){Y.attr("data-notex",1)}),te=f.ensureUniformFontSize(s,r.determineTextFont(R,X,I.font,{onPathbar:!0}));K.text(X._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,te).call(T.convertToTspans,s),X.textBB=M.bBox(K.node()),X.transform=g(X,{fontSize:te.size,onPathbar:!0}),X.transform.fontSize=te.size,v?K.transition().attrTween("transform",function(Y){var V=k(Y,h,E,[l,x]);return function(ee){return b(V(ee))}}):K.attr("transform",b(X))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../lib/svg_text_utils"),e=o("./partition"),a=o("./style").styleOne,n=o("./constants"),r=o("../sunburst/helpers"),t=o("../sunburst/fx"),h=o("../sunburst/plot").formatSliceLabel,i=!1;U.exports=function(y,d,p,c,m){var l=m.width,x=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,g=m.toMoveInsideSlice,b=m.strTransform,v=m.hasTransition,C=m.handleSlicesExit,S=m.makeUpdateSliceInterpolator,k=m.makeUpdateTextInterpolator,E=m.prevEntry,F={},I=y._context.staticPlot,D=y._fullLayout,R=d[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,B=O.textposition.indexOf("right")!==-1,G=O.textposition.indexOf("bottom")!==-1,Q=!G&&!O.marker.pad.t||G&&!O.marker.pad.b,X=e(p,[l,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),j=X.descendants(),re=1/0,ue=-1/0;j.forEach(function(ee){var ne=ee.depth;ne>=O._maxDepth?(ee.x0=ee.x1=(ee.x0+ee.x1)/2,ee.y0=ee.y1=(ee.y0+ee.y1)/2):(re=Math.min(re,ne),ue=Math.max(ue,ne))}),c=c.data(j,r.getPtId),O._maxVisibleLayers=isFinite(ue)?ue-re+1:0,c.enter().append("g").classed("slice",!0),C(c,i,F,[l,x],_),c.order();var K=null;if(v&&E){var te=r.getPtId(E);c.each(function(ee){K===null&&r.getPtId(ee)===te&&(K={x0:ee.x0,x1:ee.x1,y0:ee.y0,y1:ee.y1})})}var Y=function(){return K||{x0:0,x1:l,y0:0,y1:x}},V=c;return v&&(V=V.transition().each("end",function(){var ee=w.select(this);r.setSliceCursor(ee,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(ee){var ne=r.isHeader(ee,O);ee._x0=u(ee.x0),ee._x1=u(ee.x1),ee._y0=A(ee.y0),ee._y1=A(ee.y1),ee._hoverX=u(ee.x1-O.marker.pad.r),ee._hoverY=A(G?ee.y1-O.marker.pad.b/2:ee.y0+O.marker.pad.t/2);var Z=w.select(this),q=f.ensureSingle(Z,"path","surface",function(oe){oe.style("pointer-events",I?"none":"all")});v?q.transition().attrTween("d",function(oe){var be=S(oe,i,Y(),[l,x]);return function(ce){return _(be(ce))}}):q.attr("d",_),Z.call(t,p,y,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),q.call(a,ee,O,{hovered:!1}),ee.x0===ee.x1||ee.y0===ee.y1?ee._text="":ne?ee._text=Q?"":r.getPtLabel(ee)||"":ee._text=h(ee,p,O,d,D)||"";var ie=f.ensureSingle(Z,"g","slicetext"),se=f.ensureSingle(ie,"text","",function(oe){oe.attr("data-notex",1)}),ae=f.ensureUniformFontSize(y,r.determineTextFont(O,ee,D.font));se.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":z||ne?"start":"middle").call(M.font,ae).call(T.convertToTspans,y),ee.textBB=M.bBox(se.node()),ee.transform=g(ee,{fontSize:ae.size,isHeader:ne}),ee.transform.fontSize=ae.size,v?se.transition().attrTween("transform",function(oe){var be=k(oe,i,Y(),[l,x]);return function(ce){return b(be(ce))}}):se.attr("transform",b(ee))}),K}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(o,U,H){U.exports=function w(f,M,T){var e;T.swapXY&&(e=f.x0,f.x0=f.y0,f.y0=e,e=f.x1,f.x1=f.y1,f.y1=e),T.flipX&&(e=f.x0,f.x0=M[0]-f.x1,f.x1=M[0]-e),T.flipY&&(e=f.y0,f.y0=M[1]-f.y1,f.y1=M[1]-e);var a=f.children;if(a)for(var n=0;n<a.length;n++)w(a[n],M,T)}},{}],1093:[function(o,U,H){U.exports={moduleType:"trace",name:"treemap",basePlotModule:o("./base_plot"),categories:[],animatable:!0,attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc").calc,crossTraceCalc:o("./calc").crossTraceCalc,plot:o("./plot"),style:o("./style").style,colorbar:o("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(o,U,H){U.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(o,U,H){var w=o("d3-hierarchy"),f=o("./flip_tree");U.exports=function(e,a,n){var r=n.flipX,t=n.flipY,h=n.packing==="dice-slice",i=n.pad[t?"bottom":"top"],s=n.pad[r?"right":"left"],y=n.pad[r?"left":"right"],d=n.pad[t?"top":"bottom"],p;h&&(p=s,s=i,i=p,p=y,y=d,d=p);var c=w.treemap().tile(M(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(s).paddingRight(y).paddingTop(i).paddingBottom(d).size(h?[a[1],a[0]]:a)(e);return(h||r||t)&&f(c,a,{swapXY:h,flipX:r,flipY:t}),c};function M(T,e){switch(T){case"squarify":return w.treemapSquarify.ratio(e);case"binary":return w.treemapBinary;case"dice":return w.treemapDice;case"slice":return w.treemapSlice;default:return w.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(o,U,H){var w=o("./draw"),f=o("./draw_descendants");U.exports=function(T,e,a,n){return w(T,e,a,n,{type:"treemap",drawDescendants:f})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(o,U,H){var w=o("@plotly/d3"),f=o("d3-interpolate").interpolate,M=o("../sunburst/helpers"),T=o("../../lib"),e=o("../bar/constants").TEXTPAD,a=o("../bar/plot"),n=a.toMoveInsideBar,r=o("../bar/uniform_text"),t=r.recordMinTextSize,h=o("./constants"),i=o("./draw_ancestors");function s(y){return M.isHierarchyRoot(y)?"":M.getPtId(y)}U.exports=function(d,p,c,m,l){var x=d._fullLayout,u=p[0],A=u.trace,_=A.type,g=_==="icicle",b=u.hierarchy,v=M.findEntryWithLevel(b,A.level),C=w.select(c),S=C.selectAll("g.pathbar"),k=C.selectAll("g.slice");if(!v){S.remove(),k.remove();return}var E=M.isHierarchyRoot(v),F=!x.uniformtext.mode&&M.hasTransition(m),I=M.getMaxDepth(A),D=function(We){return We.data.depth-v.data.depth<I},R=x._size,O=A.domain,z=R.w*(O.x[1]-O.x[0]),B=R.h*(O.y[1]-O.y[0]),G=z,Q=A.pathbar.thickness,X=A.marker.line.width+h.gapWithPathbar,j=A.pathbar.visible?A.pathbar.side.indexOf("bottom")>-1?B+X:-(Q+X):0,re={x0:G,x1:G,y0:j,y1:j+Q},ue=function(We,xt,Nt){var tr=A.tiling.pad,Vt=function(Lt){return Lt-tr<=xt.x0},Pt=function(Lt){return Lt+tr>=xt.x1},$t=function(Lt){return Lt-tr<=xt.y0},Ut=function(Lt){return Lt+tr>=xt.y1};return We.x0===xt.x0&&We.x1===xt.x1&&We.y0===xt.y0&&We.y1===xt.y1?{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1}:{x0:Vt(We.x0-tr)?0:Pt(We.x0-tr)?Nt[0]:We.x0,x1:Vt(We.x1+tr)?0:Pt(We.x1+tr)?Nt[0]:We.x1,y0:$t(We.y0-tr)?0:Ut(We.y0-tr)?Nt[1]:We.y0,y1:$t(We.y1+tr)?0:Ut(We.y1+tr)?Nt[1]:We.y1}},K=null,te={},Y={},V=null,ee=function(We,xt){return xt?te[s(We)]:Y[s(We)]},ne=function(We,xt,Nt,tr){if(xt)return te[s(b)]||re;var Vt=Y[A.level]||Nt;return D(We)?ue(We,Vt,tr):{}};u.hasMultipleRoots&&E&&I++,A._maxDepth=I,A._backgroundColor=x.paper_bgcolor,A._entryDepth=v.data.depth,A._atRootLevel=E;var Z=-z/2+R.l+R.w*(O.x[1]+O.x[0])/2,q=-B/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),ie=function(We){return Z+We},se=function(We){return q+We},ae=se(0),oe=ie(0),be=function(We){return oe+We},ce=function(We){return ae+We};function de(We,xt){return We+","+xt}var ye=be(0),ge=function(We){We.x=Math.max(ye,We.x)},me=A.pathbar.edgeshape,Me=function(We){var xt=be(Math.max(Math.min(We.x0,We.x0),0)),Nt=be(Math.min(Math.max(We.x1,We.x1),G)),tr=ce(We.y0),Vt=ce(We.y1),Pt=Q/2,$t={},Ut={};$t.x=xt,Ut.x=Nt,$t.y=Ut.y=(tr+Vt)/2;var Lt={x:xt,y:tr},Ye={x:Nt,y:tr},ot={x:Nt,y:Vt},Ve={x:xt,y:Vt};return me===">"?(Lt.x-=Pt,Ye.x-=Pt,ot.x-=Pt,Ve.x-=Pt):me==="/"?(ot.x-=Pt,Ve.x-=Pt,$t.x-=Pt/2,Ut.x-=Pt/2):me==="\\"?(Lt.x-=Pt,Ye.x-=Pt,$t.x-=Pt/2,Ut.x-=Pt/2):me==="<"&&($t.x-=Pt,Ut.x-=Pt),ge(Lt),ge(Ve),ge($t),ge(Ye),ge(ot),ge(Ut),"M"+de(Lt.x,Lt.y)+"L"+de(Ye.x,Ye.y)+"L"+de(Ut.x,Ut.y)+"L"+de(ot.x,ot.y)+"L"+de(Ve.x,Ve.y)+"L"+de($t.x,$t.y)+"Z"},Le=function(We){var xt=ie(We.x0),Nt=ie(We.x1),tr=se(We.y0),Vt=se(We.y1),Pt=Nt-xt,$t=Vt-tr;if(!Pt||!$t)return"";var Ut=0,Lt=Pt>2*Ut&&$t>2*Ut?Ut:0,Ye=function(ot,Ve){return Lt?"a"+de(Lt,Lt)+" 0 0 1 "+de(ot,Ve):""};return"M"+de(xt,tr+Lt)+Ye(Lt,-Lt)+"L"+de(Nt-Lt,tr)+Ye(Lt,Lt)+"L"+de(Nt,Vt-Lt)+Ye(-Lt,Lt)+"L"+de(xt+Lt,Vt)+Ye(-Lt,-Lt)+"Z"},Oe=function(We,xt){var Nt=We.x0,tr=We.x1,Vt=We.y0,Pt=We.y1,$t=We.textBB,Ut=function(kt){return A.textposition.indexOf(kt)!==-1},Lt=Ut("bottom"),Ye=Ut("top")||xt.isHeader&&!Lt,ot=Ye?"start":Lt?"end":"middle",Ve=Ut("right"),Ae=Ut("left")||xt.onPathbar,He=Ae?-1:Ve?1:0,Je=A[g?"tiling":"marker"].pad;if(xt.isHeader){if(Nt+=(g?Je:Je.l)-e,tr-=(g?Je:Je.r)-e,Nt>=tr){var tt=(Nt+tr)/2;Nt=tt,tr=tt}var St;Lt?(St=Pt-(g?Je:Je.b),Vt<St&&St<Pt&&(Vt=St)):(St=Vt+(g?Je:Je.t),Vt<St&&St<Pt&&(Pt=St))}var _t=n(Nt,tr,Vt,Pt,$t,{isHorizontal:!1,constrained:!0,angle:0,anchor:ot,leftToRight:He});return _t.fontSize=xt.fontSize,_t.targetX=ie(_t.targetX),_t.targetY=se(_t.targetY),isNaN(_t.targetX)||isNaN(_t.targetY)?{}:(Nt!==tr&&Vt!==Pt&&t(A.type,_t,x),{scale:_t.scale,rotate:_t.rotate,textX:_t.textX,textY:_t.textY,anchorX:_t.anchorX,anchorY:_t.anchorY,targetX:_t.targetX,targetY:_t.targetY})},_e=function(We,xt){for(var Nt,tr=0,Vt=We;!Nt&&tr<I;)tr++,Vt=Vt.parent,Vt?Nt=ee(Vt,xt):tr=I;return Nt||{}},Ee=function(We,xt,Nt,tr){var Vt=ee(We,xt),Pt;if(xt)Pt=re;else{var $t=ee(v,xt);$t?Pt=ue(We,$t,tr):Pt={}}return f(Vt,Pt)},Ze=function(We,xt,Nt,tr,Vt){var Pt=ee(We,xt),$t;if(Pt)$t=Pt;else if(xt)$t=re;else if(K)if(We.parent){var Ut=V||Nt;Ut&&!xt?$t=ue(We,Ut,tr):($t={},T.extendFlat($t,_e(We,xt)))}else $t=T.extendFlat({},We),g&&(Vt.orientation==="h"?Vt.flipX?$t.x0=We.x1:$t.x1=0:Vt.flipY?$t.y0=We.y1:$t.y1=0);else $t={};return f($t,{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1})},Ge=function(We,xt,Nt,tr){var Vt=ee(We,xt),Pt={},$t=ne(We,xt,Nt,tr);T.extendFlat(Pt,{transform:Oe({x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1,textBB:We.textBB,_text:We._text},{isHeader:M.isHeader(We,A)})}),Vt?Pt=Vt:We.parent&&T.extendFlat(Pt,_e(We,xt));var Ut=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&t(A.type,Ut,x),f(Pt,{transform:{scale:Ut.scale,rotate:Ut.rotate,textX:Ut.textX,textY:Ut.textY,anchorX:Ut.anchorX,anchorY:Ut.anchorY,targetX:Ut.targetX,targetY:Ut.targetY}})},Fe=function(We,xt,Nt,tr,Vt){var Pt=tr[0],$t=tr[1];F?We.exit().transition().each(function(){var Ut=w.select(this),Lt=Ut.select("path.surface");Lt.transition().attrTween("d",function(ot){var Ve=Ee(ot,xt,Nt,[Pt,$t]);return function(Ae){return Vt(Ve(Ae))}});var Ye=Ut.select("g.slicetext");Ye.attr("opacity",0)}).remove():We.exit().remove()},Re=function(We){var xt=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&t(A.type,xt,x),T.getTextTransform({textX:xt.textX,textY:xt.textY,anchorX:xt.anchorX,anchorY:xt.anchorY,targetX:xt.targetX,targetY:xt.targetY,scale:xt.scale,rotate:xt.rotate})};F&&(S.each(function(We){te[s(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(te[s(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate})}),k.each(function(We){Y[s(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(Y[s(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate}),!K&&M.isEntry(We)&&(K=We)})),V=l(d,p,v,k,{width:z,height:B,viewX:ie,viewY:se,pathSlice:Le,toMoveInsideSlice:Oe,prevEntry:K,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:Ge,handleSlicesExit:Fe,hasTransition:F,strTransform:Re}),A.pathbar.visible?i(d,p,v,S,{barDifY:j,width:G,height:Q,viewX:be,viewY:ce,pathSlice:Me,toMoveInsideSlice:Oe,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:Ge,handleSlicesExit:Fe,hasTransition:F,strTransform:Re}):S.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../../lib"),T=o("../sunburst/helpers"),e=o("../bar/uniform_text").resizeText;function a(r){var t=r._fullLayout._treemaplayer.selectAll(".trace");e(r,t,"treemap"),t.each(function(h){var i=w.select(this),s=h[0],y=s.trace;i.style("opacity",y.opacity),i.selectAll("path.surface").each(function(d){w.select(this).call(n,d,y,{hovered:!1})})})}function n(r,t,h,i){var s=(i||{}).hovered,y=t.data.data,d=y.i,p,c,m=y.color,l=T.isHierarchyRoot(t),x=1;if(s)p=h._hovered.marker.line.color,c=h._hovered.marker.line.width;else if(l&&m===h.root.color)x=100,p="rgba(0,0,0,0)",c=0;else if(p=M.castOption(h,d,"marker.line.color")||f.defaultLine,c=M.castOption(h,d,"marker.line.width")||0,!h._hasColorscale&&!t.onPathbar){var u=h.marker.depthfade;if(u){var A=f.combine(f.addOpacity(h._backgroundColor,.75),m),_;if(u===!0){var g=T.getMaxDepth(h);isFinite(g)?T.isLeaf(t)?_=0:_=h._maxVisibleLayers-(t.data.depth-h._entryDepth):_=t.data.height+1}else _=t.data.depth-h._entryDepth,h._atRootLevel||_++;if(_>0)for(var b=0;b<_;b++){var v=.5*b/_;m=f.combine(f.addOpacity(A,v),m)}}}r.style("stroke-width",c).call(f.fill,m).call(f.stroke,p).style("opacity",x)}U.exports={style:a,styleOne:n}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(o,U,H){var w=o("../box/attributes"),f=o("../../lib/extend").extendFlat,M=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat;U.exports={y:w.y,x:w.x,x0:w.x0,y0:w.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:f({},w.name,{}),orientation:f({},w.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,points:f({},w.boxpoints,{}),jitter:f({},w.jitter,{}),pointpos:f({},w.pointpos,{}),width:f({},w.width,{}),marker:w.marker,text:w.text,hovertext:w.hovertext,hovertemplate:w.hovertemplate,quartilemethod:w.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(o,U,H){var w=o("../../lib"),f=o("../../plots/cartesian/axes"),M=o("../box/calc"),T=o("./helpers"),e=o("../../constants/numerical").BADNUM;U.exports=function(h,i){var s=M(h,i);if(s[0].t.empty)return s;for(var y=h._fullLayout,d=f.getFromId(h,i[i.orientation==="h"?"xaxis":"yaxis"]),p=1/0,c=-1/0,m=0,l=0,x=0;x<s.length;x++){var u=s[x],A=u.pts.map(T.extractVal),_=u.bandwidth=n(i,u,A),g=u.span=r(i,u,d,_);if(u.min===u.max&&_===0)g=u.span=[u.min,u.max],u.density=[{v:1,t:g[0]}],u.bandwidth=_,m=Math.max(m,1);else{var b=g[1]-g[0],v=Math.ceil(b/(_/3)),C=b/v;if(!isFinite(C)||!isFinite(v))return w.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var S=T.makeKDE(u,i,A);u.density=new Array(v);for(var k=0,E=g[0];E<g[1]+C/2;k++,E+=C){var F=S(E);u.density[k]={v:F,t:E},m=Math.max(m,F)}}l=Math.max(l,A.length),p=Math.min(p,g[0]),c=Math.max(c,g[1])}var I=f.findExtremes(d,[p,c],{padded:!0});if(i._extremes[d._id]=I,i.width)s[0].t.maxKDE=m;else{var D=y._violinScaleGroupStats,R=i.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,m),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:m,maxCount:l}}return s[0].t.labels.kde=w._(h,"kde:"),s};function a(t,h,i){var s=Math.min(h,i/1.349);return 1.059*s*Math.pow(t,-.2)}function n(t,h,i){var s=h.max-h.min;if(!s)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,s/1e4);var y=i.length,d=w.stdev(i,y-1,h.mean);return Math.max(a(y,d,h.q3-h.q1),s/100)}function r(t,h,i,s){var y=t.spanmode,d=t.span||[],p=[h.min,h.max],c=[h.min-2*s,h.max+2*s],m;function l(u){var A=d[u],_=i.type==="multicategory"?i.r2c(A):i.d2c(A,0,t[h.valLetter+"calendar"]);return _===e?c[u]:_}y==="soft"?m=c:y==="hard"?m=p:m=[l(0),l(1)];var x={type:"linear",range:m};return f.setConvert(x),x.cleanRange(),m}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(o,U,H){var w=o("../box/cross_trace_calc").setPositionOffset,f=["v","h"];U.exports=function(T,e){for(var a=T.calcdata,n=e.xaxis,r=e.yaxis,t=0;t<f.length;t++){for(var h=f[t],i=h==="h"?r:n,s=[],y=0;y<a.length;y++){var d=a[y],p=d[0].t,c=d[0].trace;c.visible===!0&&c.type==="violin"&&!p.empty&&c.orientation===h&&c.xaxis===n._id&&c.yaxis===r._id&&s.push(y)}w("violin",T,s,i)}}},{"../box/cross_trace_calc":684}],1103:[function(o,U,H){var w=o("../../lib"),f=o("../../components/color"),M=o("../box/defaults"),T=o("./attributes");U.exports=function(a,n,r,t){function h(C,S){return w.coerce(a,n,T,C,S)}function i(C,S){return w.coerce2(a,n,T,C,S)}if(M.handleSampleDefaults(a,n,h,t),n.visible!==!1){h("bandwidth"),h("side");var s=h("width");s||(h("scalegroup",n.name),h("scalemode"));var y=h("span"),d;Array.isArray(y)&&(d="manual"),h("spanmode",d);var p=h("line.color",(a.marker||{}).color||r),c=h("line.width"),m=h("fillcolor",f.addOpacity(n.line.color,.5));M.handlePointsDefaults(a,n,h,{prefix:""});var l=i("box.width"),x=i("box.fillcolor",m),u=i("box.line.color",p),A=i("box.line.width",c),_=h("box.visible",Boolean(l||x||u||A));_||(n.box={visible:!1});var g=i("meanline.color",p),b=i("meanline.width",c),v=h("meanline.visible",Boolean(g||b));v||(n.meanline={visible:!1}),h("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(o,U,H){var w=o("../../lib"),f={gaussian:function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)}};H.makeKDE=function(M,T,e){var a=e.length,n=f.gaussian,r=M.bandwidth,t=1/(a*r);return function(h){for(var i=0,s=0;s<a;s++)i+=n((h-e[s])/r);return t*i}},H.getPositionOnKdePath=function(M,T,e){var a,n;T.orientation==="h"?(a="y",n="x"):(a="x",n="y");var r=w.findPointOnPath(M.path,e,n,{pathLength:M.pathLength}),t=M.posCenterPx,h=r[a],i=T.side==="both"?2*t-h:t;return[h,i]},H.getKdeValue=function(M,T,e){var a=M.pts.map(H.extractVal),n=H.makeKDE(M,T,a);return n(e)/M.posDensityScale},H.extractVal=function(M){return M.v}},{"../../lib":515}],1105:[function(o,U,H){var w=o("../../components/color"),f=o("../../lib"),M=o("../../plots/cartesian/axes"),T=o("../box/hover"),e=o("./helpers");U.exports=function(n,r,t,h,i){i||(i={});var s=i.hoverLayer,y=n.cd,d=y[0].trace,p=d.hoveron,c=p.indexOf("violins")!==-1,m=p.indexOf("kde")!==-1,l=[],x,u;if(c||m){var A=T.hoverOnBoxes(n,r,t,h);if(m&&A.length>0){var _=n.xa,g=n.ya,b,v,C,S,k;d.orientation==="h"?(k=r,b="y",C=g,v="x",S=_):(k=t,b="x",C=_,v="y",S=g);var E=y[n.index];if(k>=E.span[0]&&k<=E.span[1]){var F=f.extendFlat({},n),I=S.c2p(k,!0),D=e.getKdeValue(E,d,k),R=e.getPositionOnKdePath(E,d,I),O=C._offset,z=C._length;F[b+"0"]=R[0],F[b+"1"]=R[1],F[v+"0"]=F[v+"1"]=I,F[v+"Label"]=v+": "+M.hoverLabelText(S,k,d[v+"hoverformat"])+", "+y[0].t.labels.kde+" "+D.toFixed(3);for(var B=0,G=0;G<A.length;G++)if(A[G].attr==="med"){B=G;break}F.spikeDistance=A[B].spikeDistance;var Q=b+"Spike";F[Q]=A[B][Q],A[B].spikeDistance=void 0,A[B][Q]=void 0,F.hovertemplate=!1,l.push(F),u={},u[b+"1"]=f.constrain(O+R[0],O,O+z),u[b+"2"]=f.constrain(O+R[1],O,O+z),u[v+"1"]=u[v+"2"]=S._offset+I}}c&&(l=l.concat(A))}p.indexOf("points")!==-1&&(x=T.hoverOnPoints(n,r,t));var X=s.selectAll(".violinline-"+d.uid).data(u?[0]:[]);return X.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(u).call(w.stroke,n.color),h==="closest"?x?[x]:l:(x&&l.push(x),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults"),crossTraceDefaults:o("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc"),crossTraceCalc:o("./cross_trace_calc"),plot:o("./plot"),style:o("./style"),styleOnSelect:o("../scatter/style").styleOnSelect,hoverPoints:o("./hover"),selectPoints:o("../box/select"),moduleType:"trace",name:"violin",basePlotModule:o("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(o,U,H){var w=o("../box/layout_attributes"),f=o("../../lib").extendFlat;U.exports={violinmode:f({},w.boxmode,{}),violingap:f({},w.boxgap,{}),violingroupgap:f({},w.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes"),M=o("../box/layout_defaults");U.exports=function(e,a,n){function r(t,h){return w.coerce(e,a,f,t,h)}M._supply(e,a,n,r,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../box/plot"),e=o("../scatter/line_points"),a=o("./helpers");U.exports=function(r,t,h,i){var s=r._fullLayout,y=t.xaxis,d=t.yaxis;function p(c,m){var l=e(c,{xaxis:y,yaxis:d,trace:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(l[0],1)}f.makeTraceGroups(i,h,"trace violins").each(function(c){var m=w.select(this),l=c[0],x=l.t,u=l.trace;if(u.visible!==!0||x.empty){m.remove();return}var A=x.bPos,_=x.bdPos,g=t[x.valLetter+"axis"],b=t[x.posLetter+"axis"],v=u.side==="both",C=v||u.side==="positive",S=v||u.side==="negative",k=m.selectAll("path.violin").data(f.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(B){var G=w.select(this),Q=B.density,X=Q.length,j=b.c2l(B.pos+A,!0),re=b.l2p(j),ue;if(u.width)ue=x.maxKDE/_;else{var K=s._violinScaleGroupStats[u.scalegroup];ue=u.scalemode==="count"?K.maxKDE/_*(K.maxCount/B.pts.length):K.maxKDE/_}var te,Y,V,ee,ne,Z,q;if(C){for(Z=new Array(X),ee=0;ee<X;ee++)q=Z[ee]={},q[x.posLetter]=j+Q[ee].v/ue,q[x.valLetter]=g.c2l(Q[ee].t,!0);te=p(Z,u)}if(S){for(Z=new Array(X),ne=0,ee=X-1;ne<X;ne++,ee--)q=Z[ne]={},q[x.posLetter]=j-Q[ee].v/ue,q[x.valLetter]=g.c2l(Q[ee].t,!0);Y=p(Z,u)}if(v)V=te+"L"+Y.substr(1)+"Z";else{var ie=[re,g.c2p(Q[0].t)],se=[re,g.c2p(Q[X-1].t)];u.orientation==="h"&&(ie.reverse(),se.reverse()),C?V="M"+ie+"L"+te.substr(1)+"L"+se:V="M"+se+"L"+Y.substr(1)+"L"+ie}G.attr("d",V),B.posCenterPx=re,B.posDensityScale=ue*_,B.path=G.node(),B.pathLength=B.path.getTotalLength()/(v?2:1)});var E=u.box,F=E.width,I=(E.line||{}).width,D,R;v?(D=_*F,R=0):C?(D=[0,_*F/2],R=I*{x:1,y:-1}[x.posLetter]):(D=[_*F/2,0],R=I*{x:-1,y:1}[x.posLetter]),T.plotBoxAndWhiskers(m,{pos:b,val:g},u,{bPos:A,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(m,{pos:b,val:g},u,{bPos:A,bdPos:D,bPosPxOffset:R});var O;!u.box.visible&&u.meanline.visible&&(O=f.identity);var z=m.selectAll("path.meanline").data(O||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(B){var G=g.c2p(B.mean,!0),Q=a.getPositionOnKdePath(B,u,G);w.select(this).attr("d",u.orientation==="h"?"M"+G+","+Q[0]+"V"+Q[1]:"M"+Q[0]+","+G+"H"+Q[1])}),T.plotPoints(m,{x:y,y:d},u,x)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/color"),M=o("../scatter/style").stylePoints;U.exports=function(e){var a=w.select(e).selectAll("g.trace.violins");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var r=n[0].trace,t=w.select(this),h=r.box||{},i=h.line||{},s=r.meanline||{},y=s.width;t.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(f.stroke,r.line.color).call(f.fill,r.fillcolor),t.selectAll("path.box").style("stroke-width",i.width+"px").call(f.stroke,i.color).call(f.fill,h.fillcolor);var d={"stroke-width":y+"px","stroke-dasharray":2*y+"px,"+y+"px"};t.selectAll("path.mean").style(d).call(f.stroke,s.color),t.selectAll("path.meanline").style(d).call(f.stroke,s.color),M(t,r,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(o,U,H){var w=o("../../components/colorscale/attributes"),f=o("../isosurface/attributes"),M=o("../surface/attributes"),T=o("../../plots/attributes"),e=o("../../lib/extend").extendFlat,a=o("../../plot_api/edit_types").overrideAll,n=U.exports=a(e({x:f.x,y:f.y,z:f.z,value:f.value,isomin:f.isomin,isomax:f.isomax,surface:f.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:f.slices,caps:f.caps,text:f.text,hovertext:f.hovertext,xhoverformat:f.xhoverformat,yhoverformat:f.yhoverformat,zhoverformat:f.zhoverformat,valuehoverformat:f.valuehoverformat,hovertemplate:f.hovertemplate},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:f.colorbar,opacity:f.opacity,opacityscale:M.opacityscale,lightposition:f.lightposition,lighting:f.lighting,flatshading:f.flatshading,contour:f.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(o,U,H){var w=o("../../../stackgl_modules").gl_mesh3d,f=o("../../lib/gl_format_color").parseColorScale,M=o("../../lib/str2rgbarray"),T=o("../../components/colorscale").extractOpts,e=o("../../plots/gl3d/zip3"),a=o("../isosurface/convert").findNearestOnAxis,n=o("../isosurface/convert").generateIsoMeshes;function r(i,s,y){this.scene=i,this.uid=y,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var t=r.prototype;t.handlePick=function(i){if(i.object===this.mesh){var s=i.data.index,y=this.data._meshX[s],d=this.data._meshY[s],p=this.data._meshZ[s],c=this.data._Ys.length,m=this.data._Zs.length,l=a(y,this.data._Xs).id,x=a(d,this.data._Ys).id,u=a(p,this.data._Zs).id,A=i.index=u+m*x+m*c*l;i.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[A]!==void 0?i.textLabel=_[A]:_&&(i.textLabel=_),!0}},t.update=function(i){var s=this.scene,y=s.fullSceneLayout;this.data=n(i);function d(x,u,A,_){return u.map(function(g){return x.d2l(g,0,_)*A})}var p=e(d(y.xaxis,i._meshX,s.dataScale[0],i.xcalendar),d(y.yaxis,i._meshY,s.dataScale[1],i.ycalendar),d(y.zaxis,i._meshZ,s.dataScale[2],i.zcalendar)),c=e(i._meshI,i._meshJ,i._meshK),m={positions:p,cells:c,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:M(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},l=T(i);m.vertexIntensity=i._meshIntensity,m.vertexIntensityBounds=[l.min,l.max],m.colormap=f(i),this.mesh.update(m)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(i,s){var y=i.glplot.gl,d=w({gl:y}),p=new r(i,d,s.uid);return d._trace=p,p.update(s),i.glplot.add(d),p}U.exports=h},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(o,U,H){var w=o("../../lib"),f=o("./attributes"),M=o("../isosurface/defaults").supplyIsoDefaults,T=o("../surface/defaults").opacityscaleDefaults;U.exports=function(a,n,r,t){function h(i,s){return w.coerce(a,n,f,i,s)}M(a,n,r,t,h),T(a,n,t,h)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(o,U,H){U.exports={attributes:o("./attributes"),supplyDefaults:o("./defaults"),calc:o("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:o("./convert"),moduleType:"trace",name:"volume",basePlotModule:o("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(o,U,H){var w=o("../bar/attributes"),f=o("../scatter/attributes").line,M=o("../../plots/attributes"),T=o("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=o("../../plots/template_attributes").hovertemplateAttrs,a=o("../../plots/template_attributes").texttemplateAttrs,n=o("./constants"),r=o("../../lib/extend").extendFlat,t=o("../../components/color");function h(i){return{marker:{color:r({},w.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},w.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},w.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}U.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:w.text,textposition:w.textposition,insidetextanchor:w.insidetextanchor,textangle:w.textangle,textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:w.orientation,offset:w.offset,width:w.width,increasing:h(),decreasing:h(),totals:h(),connector:{line:{color:r({},f.color,{dflt:t.defaultLine}),width:r({},f.width,{editType:"plot"}),dash:f.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(o,U,H){var w=o("../../plots/cartesian/axes"),f=o("../../plots/cartesian/align_period"),M=o("../../lib").mergeArray,T=o("../scatter/calc_selection"),e=o("../../constants/numerical").BADNUM;function a(r){return r==="a"||r==="absolute"}function n(r){return r==="t"||r==="total"}U.exports=function(t,h){var i=w.getFromId(t,h.xaxis||"x"),s=w.getFromId(t,h.yaxis||"y"),y,d,p,c,m,l;h.orientation==="h"?(y=i.makeCalcdata(h,"x"),p=s.makeCalcdata(h,"y"),c=f(h,s,"y",p),m=!!h.yperiodalignment,l="y"):(y=s.makeCalcdata(h,"y"),p=i.makeCalcdata(h,"x"),c=f(h,i,"x",p),m=!!h.xperiodalignment,l="x"),d=c.vals;for(var x=Math.min(d.length,y.length),u=new Array(x),A=0,_,g=!1,b=0;b<x;b++){var v=y[b]||0,C=!1;(y[b]!==e||n(h.measure[b])||a(h.measure[b]))&&b+1<x&&(y[b+1]!==e||n(h.measure[b+1])||a(h.measure[b+1]))&&(C=!0);var S=u[b]={i:b,p:d[b],s:v,rawS:v,cNext:C};a(h.measure[b])?(A=S.s,S.isSum=!0,S.dir="totals",S.s=A):n(h.measure[b])?(S.isSum=!0,S.dir="totals",S.s=A):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",_=S.s,S.s=A+_,A+=_),S.dir==="totals"&&(g=!0),m&&(u[b].orig_p=p[b],u[b][l+"End"]=c.ends[b],u[b][l+"Start"]=c.starts[b]),h.ids&&(S.id=String(h.ids[b])),S.v=(h.base||0)+A}return u.length&&(u[0].hasTotals=g),M(h.text,u,"tx"),M(h.hovertext,u,"htx"),T(u,h),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(o,U,H){U.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(o,U,H){var w=o("../bar/cross_trace_calc").setGroupPositions;U.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,h=[],i=[],s=[],y,d;for(d=0;d<a.length;d++){var p=a[d];p.visible===!0&&p.xaxis===r._id&&p.yaxis===t._id&&p.type==="waterfall"&&(y=n[d],p.orientation==="h"?s.push(y):i.push(y),h.push(y))}var c={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(w(M,r,t,i,c),w(M,t,r,s,c),d=0;d<h.length;d++){y=h[d];for(var m=0;m<y.length;m++){var l=y[m];l.isSum===!1&&(l.s0+=m===0?0:y[m-1].s),m+1<y.length&&(y[m].nextP0=y[m+1].p0,y[m].nextS0=y[m+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(o,U,H){var w=o("../../lib"),f=o("../bar/defaults").handleGroupingDefaults,M=o("../bar/defaults").handleText,T=o("../scatter/xy_defaults"),e=o("../scatter/period_defaults"),a=o("./attributes"),n=o("../../components/color"),r=o("../../constants/delta.js"),t=r.INCREASING.COLOR,h=r.DECREASING.COLOR,i="#4499FF";function s(p,c,m){p(c+".marker.color",m),p(c+".marker.line.color",n.defaultLine),p(c+".marker.line.width")}function y(p,c,m,l){function x(b,v){return w.coerce(p,c,a,b,v)}var u=T(p,c,l,x);if(!u){c.visible=!1;return}e(p,c,l,x),x("xhoverformat"),x("yhoverformat"),x("measure"),x("orientation",c.x&&!c.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var A=x("textposition");M(p,c,l,x,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c.textposition!=="none"&&(x("texttemplate"),c.texttemplate||x("textinfo")),s(x,"increasing",t),s(x,"decreasing",h),s(x,"totals",i);var _=x("connector.visible");if(_){x("connector.mode");var g=x("connector.line.width");g&&(x("connector.line.color"),x("connector.line.dash"))}}function d(p,c){var m,l;function x(A){return w.coerce(l._input,l,a,A)}if(c.waterfallmode==="group")for(var u=0;u<p.length;u++)l=p[u],m=l._input,f(m,l,c,x)}U.exports={supplyDefaults:y,crossTraceDefaults:d}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(o,U,H){U.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"initial"in M&&(f.initial=M.initial),"delta"in M&&(f.delta=M.delta),"final"in M&&(f.final=M.final),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],1121:[function(o,U,H){var w=o("../../plots/cartesian/axes").hoverLabelText,f=o("../../components/color").opacity,M=o("../bar/hover").hoverOnBars,T=o("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};U.exports=function(r,t,h,i,s){var y=M(r,t,h,i,s);if(!y)return;var d=y.cd,p=d[0].trace,c=p.orientation==="h",m=c?"x":"y",l=c?r.xa:r.ya;function x(E){return w(l,E,p[m+"hoverformat"])}var u=y.index,A=d[u],_=A.isSum?A.b+A.s:A.rawS;if(!A.isSum){y.initial=A.b+A.s-_,y.delta=_,y.final=y.initial+y.delta;var g=x(Math.abs(y.delta));y.deltaLabel=_<0?"("+g+")":g,y.finalLabel=x(y.final),y.initialLabel=x(y.initial)}var b=A.hi||p.hoverinfo,v=[];if(b&&b!=="none"&&b!=="skip"){var C=b==="all",S=b.split("+"),k=function(E){return C||S.indexOf(E)!==-1};A.isSum||(k("final")&&(c?!k("x"):!k("y"))&&v.push(y.finalLabel),k("delta")&&(_<0?v.push(y.deltaLabel+" "+e.decreasing):v.push(y.deltaLabel+" "+e.increasing)),k("initial")&&v.push("Initial: "+y.initialLabel))}return v.length&&(y.extraText=v.join("<br>")),y.color=a(p,A),[y]};function a(n,r){var t=n[r.dir].marker,h=t.color,i=t.line.color,s=t.line.width;if(f(h))return h;if(f(i)&&s)return i}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(o,U,H){U.exports={attributes:o("./attributes"),layoutAttributes:o("./layout_attributes"),supplyDefaults:o("./defaults").supplyDefaults,crossTraceDefaults:o("./defaults").crossTraceDefaults,supplyLayoutDefaults:o("./layout_defaults"),calc:o("./calc"),crossTraceCalc:o("./cross_trace_calc"),plot:o("./plot"),style:o("./style").style,hoverPoints:o("./hover"),eventData:o("./event_data"),selectPoints:o("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:o("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(o,U,H){U.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(o,U,H){var w=o("../../lib"),f=o("./layout_attributes");U.exports=function(M,T,e){var a=!1;function n(h,i){return w.coerce(M,T,f,h,i)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="waterfall"){a=!0;break}}a&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../lib"),M=o("../../components/drawing"),T=o("../../constants/numerical").BADNUM,e=o("../bar/plot"),a=o("../bar/uniform_text").clearMinTextSize;U.exports=function(h,i,s,y){var d=h._fullLayout;a("waterfall",d),e.plot(h,i,s,y,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),n(h,i,s,y)};function n(t,h,i,s){var y=h.xaxis,d=h.yaxis;f.makeTraceGroups(s,i,"trace bars").each(function(p){var c=w.select(this),m=p[0].trace,l=f.ensureSingle(c,"g","lines");if(!m.connector||!m.connector.visible){l.remove();return}var x=m.orientation==="h",u=m.connector.mode,A=l.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=r(g,y,d,x),C=v[0],S=v[1],k="";C[0]!==T&&S[0]!==T&&C[1]!==T&&S[1]!==T&&(u==="spanning"&&!g.isSum&&b>0&&(x?k+="M"+C[0]+","+S[1]+"V"+S[0]:k+="M"+C[1]+","+S[0]+"H"+C[0]),u!=="between"&&(g.isSum||b<_-1)&&(x?k+="M"+C[1]+","+S[0]+"V"+S[1]:k+="M"+C[0]+","+S[1]+"H"+C[1]),C[2]!==T&&S[2]!==T&&(x?k+="M"+C[1]+","+S[1]+"V"+S[2]:k+="M"+C[1]+","+S[1]+"H"+C[2])),k===""&&(k="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,h.layerClipId,t)}})})}function r(t,h,i,s){var y=[],d=[],p=s?h:i,c=s?i:h;return y[0]=p.c2p(t.s0,!0),d[0]=c.c2p(t.p0,!0),y[1]=p.c2p(t.s1,!0),d[1]=c.c2p(t.p1,!0),y[2]=p.c2p(t.nextS0,!0),d[2]=c.c2p(t.nextP0,!0),s?[y,d]:[d,y]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(o,U,H){var w=o("@plotly/d3"),f=o("../../components/drawing"),M=o("../../components/color"),T=o("../../constants/interactions").DESELECTDIM,e=o("../bar/style"),a=o("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,h,i){var s=i||w.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");a(t,s,"waterfall"),s.style("opacity",function(y){return y[0].trace.opacity}),s.each(function(y){var d=w.select(this),p=y[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=p[c.dir].marker;w.select(this).call(M.fill,m.color).call(M.stroke,m.line.color).call(f.dashLine,m.line.dash,m.line.width).style("opacity",p.selectedpoints&&!c.selected?T:1)}}),n(d,p,t),d.selectAll(".lines").each(function(){var c=p.connector.line;f.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}U.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(o,U,H){var w=o("../plots/cartesian/axes"),f=o("../lib"),M=o("../plot_api/plot_schema"),T=o("./helpers").pointsAccessorFunction,e=o("../constants/numerical").BADNUM;H.moduleType="transform",H.name="aggregate";var a=H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=a.aggregations;H.supplyDefaults=function(y,d){var p={},c;function m(E,F){return f.coerce(y,p,a,E,F)}var l=m("enabled");if(!l)return p;var x=M.findArrayAttributes(d),u={};for(c=0;c<x.length;c++)u[x[c]]=1;var A=m("groups");if(!Array.isArray(A)){if(!u[A])return p.enabled=!1,p;u[A]=0}var _=y.aggregations||[],g=p.aggregations=new Array(_.length),b;function v(E,F){return f.coerce(_[c],b,n,E,F)}for(c=0;c<_.length;c++){b={_index:c};var C=v("target"),S=v("func"),k=v("enabled");k&&C&&(u[C]||S==="count"&&u[C]===void 0)?(S==="stddev"&&v("funcmode"),u[C]=0,g[c]=b):g[c]={enabled:!1,_index:c}}for(c=0;c<x.length;c++)u[x[c]]&&g.push({target:x[c],func:n.func.dflt,enabled:!0,_index:-1});return p},H.calcTransform=function(y,d,p){if(!!p.enabled){var c=p.groups,m=f.getTargetArray(d,{target:c});if(!!m){var l,x,u,A,_={},g={},b=[],v=T(d.transforms,p),C=m.length;for(d._length&&(C=Math.min(C,d._length)),l=0;l<C;l++)x=m[l],u=_[x],u===void 0?(_[x]=b.length,A=[l],b.push(A),g[_[x]]=v(l)):(b[u].push(l),g[_[x]]=(g[_[x]]||[]).concat(v(l)));p._indexToPoints=g;var S=p.aggregations;for(l=0;l<S.length;l++)r(y,d,b,S[l]);typeof c=="string"&&r(y,d,b,{target:c,func:"first",enabled:!0}),d._length=b.length}}};function r(y,d,p,c){if(!!c.enabled){for(var m=c.target,l=f.nestedProperty(d,m),x=l.get(),u=w.getDataConversions(y,d,m,x),A=t(c,u),_=new Array(p.length),g=0;g<p.length;g++)_[g]=A(x,p[g]);l.set(_),c.func==="count"&&f.pushUnique(d._arrayAttrs,m)}}function t(y,d){var p=y.func,c=d.d2c,m=d.c2d;switch(p){case"count":return h;case"first":return i;case"last":return s;case"sum":return function(l,x){for(var u=0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u+=_)}return m(u)};case"avg":return function(l,x){for(var u=0,A=0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u+=g,A++)}return A?m(u/A):e};case"min":return function(l,x){for(var u=1/0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u=Math.min(u,_))}return u===1/0?e:m(u)};case"max":return function(l,x){for(var u=-1/0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u=Math.max(u,_))}return u===-1/0?e:m(u)};case"range":return function(l,x){for(var u=1/0,A=-1/0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u=Math.min(u,g),A=Math.max(A,g))}return A===-1/0||u===1/0?e:m(A-u)};case"change":return function(l,x){var u=c(l[x[0]]),A=c(l[x[x.length-1]]);return u===e||A===e?e:m(A-u)};case"median":return function(l,x){for(var u=[],A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&u.push(_)}if(!u.length)return e;u.sort(f.sorterAsc);var g=(u.length-1)/2;return m((u[Math.floor(g)]+u[Math.ceil(g)])/2)};case"mode":return function(l,x){for(var u={},A=0,_=e,g=0;g<x.length;g++){var b=c(l[x[g]]);if(b!==e){var v=u[b]=(u[b]||0)+1;v>A&&(A=v,_=b)}}return A?m(_):e};case"rms":return function(l,x){for(var u=0,A=0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u+=g*g,A++)}return A?m(Math.sqrt(u/A)):e};case"stddev":return function(l,x){var u=0,A=0,_=1,g=e,b;for(b=0;b<x.length&&g===e;b++)g=c(l[x[b]]);if(g===e)return e;for(;b<x.length;b++){var v=c(l[x[b]]);if(v!==e){var C=v-g;u+=C,A+=C*C,_++}}var S=y.funcmode==="sample"?_-1:_;return S?Math.sqrt((A-u*u/_)/S):0}}}function h(y,d){return d.length}function i(y,d){return y[d[0]]}function s(y,d){return y[d[d.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(o,U,H){var w=o("../lib"),f=o("../registry"),M=o("../plots/cartesian/axes"),T=o("./helpers").pointsAccessorFunction,e=o("../constants/filter_ops"),a=e.COMPARISON_OPS,n=e.INTERVAL_OPS,r=e.SET_OPS;H.moduleType="transform",H.name="filter",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(n).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},H.supplyDefaults=function(h){var i={};function s(c,m){return w.coerce(h,i,H.attributes,c,m)}var y=s("enabled");if(y){var d=s("target");if(w.isArrayOrTypedArray(d)&&d.length===0)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var p=f.getComponentMethod("calendars","handleDefaults");p(h,i,"valuecalendar",null),p(h,i,"targetcalendar",null)}return i},H.calcTransform=function(h,i,s){if(!s.enabled)return;var y=w.getTargetArray(i,s);if(!y)return;var d=s.target,p=y.length;i._length&&(p=Math.min(p,i._length));var c=s.targetcalendar,m=i._arrayAttrs,l=s.preservegaps;if(typeof d=="string"){var x=w.nestedProperty(i,d+"calendar").get();x&&(c=x)}var u=M.getDataToCoordFunc(h,i,d,y),A=t(s,u,c),_={},g={},b=0;function v(I,D){for(var R=0;R<m.length;R++){var O=w.nestedProperty(i,m[R]);I(O,D)}}var C,S;l?(C=function(I){_[I.astr]=w.extendDeep([],I.get()),I.set(new Array(p))},S=function(I,D){var R=_[I.astr][D];I.get()[D]=R}):(C=function(I){_[I.astr]=w.extendDeep([],I.get()),I.set([])},S=function(I,D){var R=_[I.astr][D];I.get().push(R)}),v(C);for(var k=T(i.transforms,s),E=0;E<p;E++){var F=A(y[E]);F?(v(S,E),g[b++]=k(E)):l&&b++}s._indexToPoints=g,i._length=b};function t(h,i,s){var y=h.operation,d=h.value,p=Array.isArray(d);function c(u){return u.indexOf(y)!==-1}var m=function(u){return i(u,0,h.valuecalendar)},l=function(u){return i(u,0,s)},x;switch(c(a)?x=m(p?d[0]:d):c(n)?x=p?[m(d[0]),m(d[1])]:[m(d),m(d)]:c(r)&&(x=p?d.map(m):[m(d)]),y){case"=":return function(u){return l(u)===x};case"!=":return function(u){return l(u)!==x};case"<":return function(u){return l(u)<x};case"<=":return function(u){return l(u)<=x};case">":return function(u){return l(u)>x};case">=":return function(u){return l(u)>=x};case"[]":return function(u){var A=l(u);return A>=x[0]&&A<=x[1]};case"()":return function(u){var A=l(u);return A>x[0]&&A<x[1]};case"[)":return function(u){var A=l(u);return A>=x[0]&&A<x[1]};case"(]":return function(u){var A=l(u);return A>x[0]&&A<=x[1]};case"][":return function(u){var A=l(u);return A<=x[0]||A>=x[1]};case")(":return function(u){var A=l(u);return A<x[0]||A>x[1]};case"](":return function(u){var A=l(u);return A<=x[0]||A>x[1]};case")[":return function(u){var A=l(u);return A<x[0]||A>=x[1]};case"{}":return function(u){return x.indexOf(l(u))!==-1};case"}{":return function(u){return x.indexOf(l(u))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(o,U,H){var w=o("../lib"),f=o("../plot_api/plot_schema"),M=o("../plots/plots"),T=o("./helpers").pointsAccessorFunction;H.moduleType="transform",H.name="groupby",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},H.supplyDefaults=function(a,n,r){var t,h={};function i(m,l){return w.coerce(a,h,H.attributes,m,l)}var s=i("enabled");if(!s)return h;i("groups"),i("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var y=a.styles,d=h.styles=[];if(y)for(t=0;t<y.length;t++){var p=d[t]={};w.coerce(y[t],d[t],H.attributes.styles,"target");var c=w.coerce(y[t],d[t],H.attributes.styles,"value");w.isPlainObject(c)?p.value=w.extendDeep({},c):c&&delete p.value}return h},H.transform=function(a,n){var r,t,h,i=[];for(t=0;t<a.length;t++)for(r=e(a[t],n),h=0;h<r.length;h++)i.push(r[h]);return i};function e(a,n){var r,t,h,i,s,y,d,p,c,m,l=n.transform,x=n.transformIndex,u=a.transforms[x].groups,A=T(a.transforms,l);if(!w.isArrayOrTypedArray(u)||u.length===0)return[a];var _=w.filterUnique(u),g=new Array(_.length),b=u.length,v=f.findArrayAttributes(a),C=l.styles||[],S={};for(r=0;r<C.length;r++)S[C[r].target]=C[r].value;l.styles&&(m=w.keyedContainer(l,"styles","target","value.name"));var k={},E={};for(r=0;r<_.length;r++){y=_[r],k[y]=r,E[y]=0,d=g[r]=w.extendDeepNoArrays({},a),d._group=y,d.transforms[x]._indexToPoints={};var F=null;for(m&&(F=m.get(y)),F||F===""?d.name=F:d.name=w.templateString(l.nameformat,{trace:a.name,group:y}),p=d.transforms,d.transforms=[],t=0;t<p.length;t++)d.transforms[t]=w.extendDeepNoArrays({},p[t]);for(t=0;t<v.length;t++)w.nestedProperty(d,v[t]).set([])}for(h=0;h<v.length;h++){for(i=v[h],t=0,c=[];t<_.length;t++)c[t]=w.nestedProperty(g[t],i).get();for(s=w.nestedProperty(a,i).get(),t=0;t<b;t++)c[k[u[t]]].push(s[t])}for(t=0;t<b;t++){d=g[k[u[t]]];var I=d.transforms[x]._indexToPoints;I[E[u[t]]]=A(t),E[u[t]]++}for(r=0;r<_.length;r++)y=_[r],d=g[r],M.clearExpandedTraceDefaultColors(d),d=w.extendDeepNoArrays(d,S[y]||{});return g}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(o,U,H){H.pointsAccessorFunction=function(w,f){for(var M,T,e=0;e<w.length&&(M=w[e],M!==f);e++)!M._indexToPoints||M.enabled===!1||(T=M._indexToPoints);var a=T?function(n){return T[n]}:function(n){return[n]};return a}},{}],1131:[function(o,U,H){var w=o("../lib"),f=o("../plots/cartesian/axes"),M=o("./helpers").pointsAccessorFunction,T=o("../constants/numerical").BADNUM;H.moduleType="transform",H.name="sort",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},H.supplyDefaults=function(n){var r={};function t(i,s){return w.coerce(n,r,H.attributes,i,s)}var h=t("enabled");return h&&(t("target"),t("order")),r},H.calcTransform=function(n,r,t){if(!!t.enabled){var h=w.getTargetArray(r,t);if(!!h){var i=t.target,s=h.length;r._length&&(s=Math.min(s,r._length));var y=r._arrayAttrs,d=f.getDataToCoordFunc(n,r,i,h),p=e(t,h,d,s),c=M(r.transforms,t),m={},l,x;for(l=0;l<y.length;l++){var u=w.nestedProperty(r,y[l]),A=u.get(),_=new Array(s);for(x=0;x<s;x++)_[x]=A[p[x]];u.set(_)}for(x=0;x<s;x++)m[x]=c(p[x]);t._indexToPoints=m,r._length=s}}};function e(n,r,t,h){var i=new Array(h),s=new Array(h),y;for(y=0;y<h;y++)i[y]={v:r[y],i:y};for(i.sort(a(n,t)),y=0;y<h;y++)s[y]=i[y].i;return s}function a(n,r){switch(n.order){case"ascending":return function(t,h){var i=r(t.v),s=r(h.v);return i===T?1:s===T?-1:i-s};case"descending":return function(t,h){var i=r(t.v),s=r(h.v);return i===T?1:s===T?-1:s-i}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(o,U,H){H.version="2.16.1"},{}],1133:[function(o,U,H){(function(w){(function(){(function(f){if(typeof H=="object"&&typeof U<"u")U.exports=f();else{var M;typeof window<"u"?M=window:typeof w<"u"?M=w:typeof self<"u"?M=self:M=this,M.stackgl=f()}})(function(){return function(){function f(M,T,e){function a(t,h){if(!T[t]){if(!M[t]){var i=typeof o=="function"&&o;if(!h&&i)return i(t,!0);if(n)return n(t,!0);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}var y=T[t]={exports:{}};M[t][0].call(y.exports,function(d){var p=M[t][1][d];return a(p||d)},y,y.exports,f,M,T,e)}return T[t].exports}for(var n=typeof o=="function"&&o,r=0;r<e.length;r++)a(e[r]);return a}return f}()({1:[function(f,M,T){T.byteLength=s,T.toByteArray=d,T.fromByteArray=m;for(var e=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,h=r.length;t<h;++t)e[t]=r[t],a[r.charCodeAt(t)]=t;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function i(l){var x=l.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=l.indexOf("=");u===-1&&(u=x);var A=u===x?0:4-u%4;return[u,A]}function s(l){var x=i(l),u=x[0],A=x[1];return(u+A)*3/4-A}function y(l,x,u){return(x+u)*3/4-u}function d(l){var x,u=i(l),A=u[0],_=u[1],g=new n(y(l,A,_)),b=0,v=_>0?A-4:A,C;for(C=0;C<v;C+=4)x=a[l.charCodeAt(C)]<<18|a[l.charCodeAt(C+1)]<<12|a[l.charCodeAt(C+2)]<<6|a[l.charCodeAt(C+3)],g[b++]=x>>16&255,g[b++]=x>>8&255,g[b++]=x&255;return _===2&&(x=a[l.charCodeAt(C)]<<2|a[l.charCodeAt(C+1)]>>4,g[b++]=x&255),_===1&&(x=a[l.charCodeAt(C)]<<10|a[l.charCodeAt(C+1)]<<4|a[l.charCodeAt(C+2)]>>2,g[b++]=x>>8&255,g[b++]=x&255),g}function p(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function c(l,x,u){for(var A,_=[],g=x;g<u;g+=3)A=(l[g]<<16&16711680)+(l[g+1]<<8&65280)+(l[g+2]&255),_.push(p(A));return _.join("")}function m(l){for(var x,u=l.length,A=u%3,_=[],g=16383,b=0,v=u-A;b<v;b+=g)_.push(c(l,b,b+g>v?v:b+g));return A===1?(x=l[u-1],_.push(e[x>>2]+e[x<<4&63]+"==")):A===2&&(x=(l[u-2]<<8)+l[u-1],_.push(e[x>>10]+e[x>>4&63]+e[x<<2&63]+"=")),_.join("")}},{}],2:[function(f,M,T){},{}],3:[function(f,M,T){(function(e){(function(){var a=f("base64-js"),n=f("ieee754");T.Buffer=i,T.SlowBuffer=A,T.INSPECT_MAX_BYTES=50;var r=2147483647;T.kMaxLength=r,i.TYPED_ARRAY_SUPPORT=t(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function h(ce){if(ce>r)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var de=new Uint8Array(ce);return de.__proto__=i.prototype,de}function i(ce,de,ye){if(typeof ce=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ce)}return s(ce,de,ye)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function s(ce,de,ye){if(typeof ce=="string")return c(ce,de);if(ArrayBuffer.isView(ce))return m(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(oe(ce,ArrayBuffer)||ce&&oe(ce.buffer,ArrayBuffer))return l(ce,de,ye);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=ce.valueOf&&ce.valueOf();if(ge!=null&&ge!==ce)return i.from(ge,de,ye);var me=x(ce);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return i.from(ce[Symbol.toPrimitive]("string"),de,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}i.from=function(ce,de,ye){return s(ce,de,ye)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function y(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function d(ce,de,ye){return y(ce),ce<=0?h(ce):de!==void 0?typeof ye=="string"?h(ce).fill(de,ye):h(ce).fill(de):h(ce)}i.alloc=function(ce,de,ye){return d(ce,de,ye)};function p(ce){return y(ce),h(ce<0?0:u(ce)|0)}i.allocUnsafe=function(ce){return p(ce)},i.allocUnsafeSlow=function(ce){return p(ce)};function c(ce,de){if((typeof de!="string"||de==="")&&(de="utf8"),!i.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var ye=_(ce,de)|0,ge=h(ye),me=ge.write(ce,de);return me!==ye&&(ge=ge.slice(0,me)),ge}function m(ce){for(var de=ce.length<0?0:u(ce.length)|0,ye=h(de),ge=0;ge<de;ge+=1)ye[ge]=ce[ge]&255;return ye}function l(ce,de,ye){if(de<0||ce.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<de+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return de===void 0&&ye===void 0?ge=new Uint8Array(ce):ye===void 0?ge=new Uint8Array(ce,de):ge=new Uint8Array(ce,de,ye),ge.__proto__=i.prototype,ge}function x(ce){if(i.isBuffer(ce)){var de=u(ce.length)|0,ye=h(de);return ye.length===0||ce.copy(ye,0,0,de),ye}if(ce.length!==void 0)return typeof ce.length!="number"||be(ce.length)?h(0):m(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return m(ce.data)}function u(ce){if(ce>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ce|0}function A(ce){return+ce!=ce&&(ce=0),i.alloc(+ce)}i.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==i.prototype},i.compare=function(de,ye){if(oe(de,Uint8Array)&&(de=i.from(de,de.offset,de.byteLength)),oe(ye,Uint8Array)&&(ye=i.from(ye,ye.offset,ye.byteLength)),!i.isBuffer(de)||!i.isBuffer(ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===ye)return 0;for(var ge=de.length,me=ye.length,Me=0,Le=Math.min(ge,me);Me<Le;++Me)if(de[Me]!==ye[Me]){ge=de[Me],me=ye[Me];break}return ge<me?-1:me<ge?1:0},i.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(de,ye){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return i.alloc(0);var ge;if(ye===void 0)for(ye=0,ge=0;ge<de.length;++ge)ye+=de[ge].length;var me=i.allocUnsafe(ye),Me=0;for(ge=0;ge<de.length;++ge){var Le=de[ge];if(oe(Le,Uint8Array)&&(Le=i.from(Le)),!i.isBuffer(Le))throw new TypeError('"list" argument must be an Array of Buffers');Le.copy(me,Me),Me+=Le.length}return me};function _(ce,de){if(i.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||oe(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var ye=ce.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&ye===0)return 0;for(var me=!1;;)switch(de){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return Z(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye*2;case"hex":return ye>>>1;case"base64":return se(ce).length;default:if(me)return ge?-1:Z(ce).length;de=(""+de).toLowerCase(),me=!0}}i.byteLength=_;function g(ce,de,ye){var ge=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0,de>>>=0,ye<=de))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return X(this,de,ye);case"utf8":case"utf-8":return O(this,de,ye);case"ascii":return G(this,de,ye);case"latin1":case"binary":return Q(this,de,ye);case"base64":return R(this,de,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,de,ye);default:if(ge)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ge=!0}}i.prototype._isBuffer=!0;function b(ce,de,ye){var ge=ce[de];ce[de]=ce[ye],ce[ye]=ge}i.prototype.swap16=function(){var de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ye=0;ye<de;ye+=2)b(this,ye,ye+1);return this},i.prototype.swap32=function(){var de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ye=0;ye<de;ye+=4)b(this,ye,ye+3),b(this,ye+1,ye+2);return this},i.prototype.swap64=function(){var de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ye=0;ye<de;ye+=8)b(this,ye,ye+7),b(this,ye+1,ye+6),b(this,ye+2,ye+5),b(this,ye+3,ye+4);return this},i.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?O(this,0,de):g.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(de){if(!i.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:i.compare(this,de)===0},i.prototype.inspect=function(){var de="",ye=T.INSPECT_MAX_BYTES;return de=this.toString("hex",0,ye).replace(/(.{2})/g,"$1 ").trim(),this.length>ye&&(de+=" ... "),"<Buffer "+de+">"},i.prototype.compare=function(de,ye,ge,me,Me){if(oe(de,Uint8Array)&&(de=i.from(de,de.offset,de.byteLength)),!i.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(ye===void 0&&(ye=0),ge===void 0&&(ge=de?de.length:0),me===void 0&&(me=0),Me===void 0&&(Me=this.length),ye<0||ge>de.length||me<0||Me>this.length)throw new RangeError("out of range index");if(me>=Me&&ye>=ge)return 0;if(me>=Me)return-1;if(ye>=ge)return 1;if(ye>>>=0,ge>>>=0,me>>>=0,Me>>>=0,this===de)return 0;for(var Le=Me-me,Oe=ge-ye,_e=Math.min(Le,Oe),Ee=this.slice(me,Me),Ze=de.slice(ye,ge),Ge=0;Ge<_e;++Ge)if(Ee[Ge]!==Ze[Ge]){Le=Ee[Ge],Oe=Ze[Ge];break}return Le<Oe?-1:Oe<Le?1:0};function v(ce,de,ye,ge,me){if(ce.length===0)return-1;if(typeof ye=="string"?(ge=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ye=+ye,be(ye)&&(ye=me?0:ce.length-1),ye<0&&(ye=ce.length+ye),ye>=ce.length){if(me)return-1;ye=ce.length-1}else if(ye<0)if(me)ye=0;else return-1;if(typeof de=="string"&&(de=i.from(de,ge)),i.isBuffer(de))return de.length===0?-1:C(ce,de,ye,ge,me);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(ce,de,ye):Uint8Array.prototype.lastIndexOf.call(ce,de,ye):C(ce,[de],ye,ge,me);throw new TypeError("val must be string, number or Buffer")}function C(ce,de,ye,ge,me){var Me=1,Le=ce.length,Oe=de.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(ce.length<2||de.length<2)return-1;Me=2,Le/=2,Oe/=2,ye/=2}function _e(Re,We){return Me===1?Re[We]:Re.readUInt16BE(We*Me)}var Ee;if(me){var Ze=-1;for(Ee=ye;Ee<Le;Ee++)if(_e(ce,Ee)===_e(de,Ze===-1?0:Ee-Ze)){if(Ze===-1&&(Ze=Ee),Ee-Ze+1===Oe)return Ze*Me}else Ze!==-1&&(Ee-=Ee-Ze),Ze=-1}else for(ye+Oe>Le&&(ye=Le-Oe),Ee=ye;Ee>=0;Ee--){for(var Ge=!0,Fe=0;Fe<Oe;Fe++)if(_e(ce,Ee+Fe)!==_e(de,Fe)){Ge=!1;break}if(Ge)return Ee}return-1}i.prototype.includes=function(de,ye,ge){return this.indexOf(de,ye,ge)!==-1},i.prototype.indexOf=function(de,ye,ge){return v(this,de,ye,ge,!0)},i.prototype.lastIndexOf=function(de,ye,ge){return v(this,de,ye,ge,!1)};function S(ce,de,ye,ge){ye=Number(ye)||0;var me=ce.length-ye;ge?(ge=Number(ge),ge>me&&(ge=me)):ge=me;var Me=de.length;ge>Me/2&&(ge=Me/2);for(var Le=0;Le<ge;++Le){var Oe=parseInt(de.substr(Le*2,2),16);if(be(Oe))return Le;ce[ye+Le]=Oe}return Le}function k(ce,de,ye,ge){return ae(Z(de,ce.length-ye),ce,ye,ge)}function E(ce,de,ye,ge){return ae(q(de),ce,ye,ge)}function F(ce,de,ye,ge){return E(ce,de,ye,ge)}function I(ce,de,ye,ge){return ae(se(de),ce,ye,ge)}function D(ce,de,ye,ge){return ae(ie(de,ce.length-ye),ce,ye,ge)}i.prototype.write=function(de,ye,ge,me){if(ye===void 0)me="utf8",ge=this.length,ye=0;else if(ge===void 0&&typeof ye=="string")me=ye,ge=this.length,ye=0;else if(isFinite(ye))ye=ye>>>0,isFinite(ge)?(ge=ge>>>0,me===void 0&&(me="utf8")):(me=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Me=this.length-ye;if((ge===void 0||ge>Me)&&(ge=Me),de.length>0&&(ge<0||ye<0)||ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var Le=!1;;)switch(me){case"hex":return S(this,de,ye,ge);case"utf8":case"utf-8":return k(this,de,ye,ge);case"ascii":return E(this,de,ye,ge);case"latin1":case"binary":return F(this,de,ye,ge);case"base64":return I(this,de,ye,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,de,ye,ge);default:if(Le)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Le=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(ce,de,ye){return de===0&&ye===ce.length?a.fromByteArray(ce):a.fromByteArray(ce.slice(de,ye))}function O(ce,de,ye){ye=Math.min(ce.length,ye);for(var ge=[],me=de;me<ye;){var Me=ce[me],Le=null,Oe=Me>239?4:Me>223?3:Me>191?2:1;if(me+Oe<=ye){var _e,Ee,Ze,Ge;switch(Oe){case 1:Me<128&&(Le=Me);break;case 2:_e=ce[me+1],(_e&192)===128&&(Ge=(Me&31)<<6|_e&63,Ge>127&&(Le=Ge));break;case 3:_e=ce[me+1],Ee=ce[me+2],(_e&192)===128&&(Ee&192)===128&&(Ge=(Me&15)<<12|(_e&63)<<6|Ee&63,Ge>2047&&(Ge<55296||Ge>57343)&&(Le=Ge));break;case 4:_e=ce[me+1],Ee=ce[me+2],Ze=ce[me+3],(_e&192)===128&&(Ee&192)===128&&(Ze&192)===128&&(Ge=(Me&15)<<18|(_e&63)<<12|(Ee&63)<<6|Ze&63,Ge>65535&&Ge<1114112&&(Le=Ge))}}Le===null?(Le=65533,Oe=1):Le>65535&&(Le-=65536,ge.push(Le>>>10&1023|55296),Le=56320|Le&1023),ge.push(Le),me+=Oe}return B(ge)}var z=4096;function B(ce){var de=ce.length;if(de<=z)return String.fromCharCode.apply(String,ce);for(var ye="",ge=0;ge<de;)ye+=String.fromCharCode.apply(String,ce.slice(ge,ge+=z));return ye}function G(ce,de,ye){var ge="";ye=Math.min(ce.length,ye);for(var me=de;me<ye;++me)ge+=String.fromCharCode(ce[me]&127);return ge}function Q(ce,de,ye){var ge="";ye=Math.min(ce.length,ye);for(var me=de;me<ye;++me)ge+=String.fromCharCode(ce[me]);return ge}function X(ce,de,ye){var ge=ce.length;(!de||de<0)&&(de=0),(!ye||ye<0||ye>ge)&&(ye=ge);for(var me="",Me=de;Me<ye;++Me)me+=ne(ce[Me]);return me}function j(ce,de,ye){for(var ge=ce.slice(de,ye),me="",Me=0;Me<ge.length;Me+=2)me+=String.fromCharCode(ge[Me]+ge[Me+1]*256);return me}i.prototype.slice=function(de,ye){var ge=this.length;de=~~de,ye=ye===void 0?ge:~~ye,de<0?(de+=ge,de<0&&(de=0)):de>ge&&(de=ge),ye<0?(ye+=ge,ye<0&&(ye=0)):ye>ge&&(ye=ge),ye<de&&(ye=de);var me=this.subarray(de,ye);return me.__proto__=i.prototype,me};function re(ce,de,ye){if(ce%1!==0||ce<0)throw new RangeError("offset is not uint");if(ce+de>ye)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de],Me=1,Le=0;++Le<ye&&(Me*=256);)me+=this[de+Le]*Me;return me},i.prototype.readUIntBE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de+--ye],Me=1;ye>0&&(Me*=256);)me+=this[de+--ye]*Me;return me},i.prototype.readUInt8=function(de,ye){return de=de>>>0,ye||re(de,1,this.length),this[de]},i.prototype.readUInt16LE=function(de,ye){return de=de>>>0,ye||re(de,2,this.length),this[de]|this[de+1]<<8},i.prototype.readUInt16BE=function(de,ye){return de=de>>>0,ye||re(de,2,this.length),this[de]<<8|this[de+1]},i.prototype.readUInt32LE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},i.prototype.readUInt32BE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},i.prototype.readIntLE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de],Me=1,Le=0;++Le<ye&&(Me*=256);)me+=this[de+Le]*Me;return Me*=128,me>=Me&&(me-=Math.pow(2,8*ye)),me},i.prototype.readIntBE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=ye,Me=1,Le=this[de+--me];me>0&&(Me*=256);)Le+=this[de+--me]*Me;return Me*=128,Le>=Me&&(Le-=Math.pow(2,8*ye)),Le},i.prototype.readInt8=function(de,ye){return de=de>>>0,ye||re(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},i.prototype.readInt16LE=function(de,ye){de=de>>>0,ye||re(de,2,this.length);var ge=this[de]|this[de+1]<<8;return ge&32768?ge|4294901760:ge},i.prototype.readInt16BE=function(de,ye){de=de>>>0,ye||re(de,2,this.length);var ge=this[de+1]|this[de]<<8;return ge&32768?ge|4294901760:ge},i.prototype.readInt32LE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},i.prototype.readInt32BE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},i.prototype.readFloatLE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),n.read(this,de,!0,23,4)},i.prototype.readFloatBE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),n.read(this,de,!1,23,4)},i.prototype.readDoubleLE=function(de,ye){return de=de>>>0,ye||re(de,8,this.length),n.read(this,de,!0,52,8)},i.prototype.readDoubleBE=function(de,ye){return de=de>>>0,ye||re(de,8,this.length),n.read(this,de,!1,52,8)};function ue(ce,de,ye,ge,me,Me){if(!i.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>me||de<Me)throw new RangeError('"value" argument is out of bounds');if(ye+ge>ce.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,ge=ge>>>0,!me){var Me=Math.pow(2,8*ge)-1;ue(this,de,ye,ge,Me,0)}var Le=1,Oe=0;for(this[ye]=de&255;++Oe<ge&&(Le*=256);)this[ye+Oe]=de/Le&255;return ye+ge},i.prototype.writeUIntBE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,ge=ge>>>0,!me){var Me=Math.pow(2,8*ge)-1;ue(this,de,ye,ge,Me,0)}var Le=ge-1,Oe=1;for(this[ye+Le]=de&255;--Le>=0&&(Oe*=256);)this[ye+Le]=de/Oe&255;return ye+ge},i.prototype.writeUInt8=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,1,255,0),this[ye]=de&255,ye+1},i.prototype.writeUInt16LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,65535,0),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},i.prototype.writeUInt16BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,65535,0),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},i.prototype.writeUInt32LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,4294967295,0),this[ye+3]=de>>>24,this[ye+2]=de>>>16,this[ye+1]=de>>>8,this[ye]=de&255,ye+4},i.prototype.writeUInt32BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,4294967295,0),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4},i.prototype.writeIntLE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,!me){var Me=Math.pow(2,8*ge-1);ue(this,de,ye,ge,Me-1,-Me)}var Le=0,Oe=1,_e=0;for(this[ye]=de&255;++Le<ge&&(Oe*=256);)de<0&&_e===0&&this[ye+Le-1]!==0&&(_e=1),this[ye+Le]=(de/Oe>>0)-_e&255;return ye+ge},i.prototype.writeIntBE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,!me){var Me=Math.pow(2,8*ge-1);ue(this,de,ye,ge,Me-1,-Me)}var Le=ge-1,Oe=1,_e=0;for(this[ye+Le]=de&255;--Le>=0&&(Oe*=256);)de<0&&_e===0&&this[ye+Le+1]!==0&&(_e=1),this[ye+Le]=(de/Oe>>0)-_e&255;return ye+ge},i.prototype.writeInt8=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,1,127,-128),de<0&&(de=255+de+1),this[ye]=de&255,ye+1},i.prototype.writeInt16LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,32767,-32768),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},i.prototype.writeInt16BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,32767,-32768),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},i.prototype.writeInt32LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,2147483647,-2147483648),this[ye]=de&255,this[ye+1]=de>>>8,this[ye+2]=de>>>16,this[ye+3]=de>>>24,ye+4},i.prototype.writeInt32BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4};function K(ce,de,ye,ge,me,Me){if(ye+ge>ce.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function te(ce,de,ye,ge,me){return de=+de,ye=ye>>>0,me||K(ce,de,ye,4),n.write(ce,de,ye,ge,23,4),ye+4}i.prototype.writeFloatLE=function(de,ye,ge){return te(this,de,ye,!0,ge)},i.prototype.writeFloatBE=function(de,ye,ge){return te(this,de,ye,!1,ge)};function Y(ce,de,ye,ge,me){return de=+de,ye=ye>>>0,me||K(ce,de,ye,8),n.write(ce,de,ye,ge,52,8),ye+8}i.prototype.writeDoubleLE=function(de,ye,ge){return Y(this,de,ye,!0,ge)},i.prototype.writeDoubleBE=function(de,ye,ge){return Y(this,de,ye,!1,ge)},i.prototype.copy=function(de,ye,ge,me){if(!i.isBuffer(de))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!me&&me!==0&&(me=this.length),ye>=de.length&&(ye=de.length),ye||(ye=0),me>0&&me<ge&&(me=ge),me===ge||de.length===0||this.length===0)return 0;if(ye<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),de.length-ye<me-ge&&(me=de.length-ye+ge);var Me=me-ge;if(this===de&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ye,ge,me);else if(this===de&&ge<ye&&ye<me)for(var Le=Me-1;Le>=0;--Le)de[Le+ye]=this[Le+ge];else Uint8Array.prototype.set.call(de,this.subarray(ge,me),ye);return Me},i.prototype.fill=function(de,ye,ge,me){if(typeof de=="string"){if(typeof ye=="string"?(me=ye,ye=0,ge=this.length):typeof ge=="string"&&(me=ge,ge=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!i.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(de.length===1){var Me=de.charCodeAt(0);(me==="utf8"&&Me<128||me==="latin1")&&(de=Me)}}else typeof de=="number"&&(de=de&255);if(ye<0||this.length<ye||this.length<ge)throw new RangeError("Out of range index");if(ge<=ye)return this;ye=ye>>>0,ge=ge===void 0?this.length:ge>>>0,de||(de=0);var Le;if(typeof de=="number")for(Le=ye;Le<ge;++Le)this[Le]=de;else{var Oe=i.isBuffer(de)?de:i.from(de,me),_e=Oe.length;if(_e===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Le=0;Le<ge-ye;++Le)this[Le+ye]=Oe[Le%_e]}return this};var V=/[^+/0-9A-Za-z-_]/g;function ee(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(V,""),ce.length<2)return"";for(;ce.length%4!==0;)ce=ce+"=";return ce}function ne(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function Z(ce,de){de=de||1/0;for(var ye,ge=ce.length,me=null,Me=[],Le=0;Le<ge;++Le){if(ye=ce.charCodeAt(Le),ye>55295&&ye<57344){if(!me){if(ye>56319){(de-=3)>-1&&Me.push(239,191,189);continue}else if(Le+1===ge){(de-=3)>-1&&Me.push(239,191,189);continue}me=ye;continue}if(ye<56320){(de-=3)>-1&&Me.push(239,191,189),me=ye;continue}ye=(me-55296<<10|ye-56320)+65536}else me&&(de-=3)>-1&&Me.push(239,191,189);if(me=null,ye<128){if((de-=1)<0)break;Me.push(ye)}else if(ye<2048){if((de-=2)<0)break;Me.push(ye>>6|192,ye&63|128)}else if(ye<65536){if((de-=3)<0)break;Me.push(ye>>12|224,ye>>6&63|128,ye&63|128)}else if(ye<1114112){if((de-=4)<0)break;Me.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,ye&63|128)}else throw new Error("Invalid code point")}return Me}function q(ce){for(var de=[],ye=0;ye<ce.length;++ye)de.push(ce.charCodeAt(ye)&255);return de}function ie(ce,de){for(var ye,ge,me,Me=[],Le=0;Le<ce.length&&!((de-=2)<0);++Le)ye=ce.charCodeAt(Le),ge=ye>>8,me=ye%256,Me.push(me),Me.push(ge);return Me}function se(ce){return a.toByteArray(ee(ce))}function ae(ce,de,ye,ge){for(var me=0;me<ge&&!(me+ye>=de.length||me>=ce.length);++me)de[me+ye]=ce[me];return me}function oe(ce,de){return ce instanceof de||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===de.name}function be(ce){return ce!==ce}}).call(this)}).call(this,f("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(f,M,T){T.read=function(e,a,n,r,t){var h,i,s=t*8-r-1,y=(1<<s)-1,d=y>>1,p=-7,c=n?t-1:0,m=n?-1:1,l=e[a+c];for(c+=m,h=l&(1<<-p)-1,l>>=-p,p+=s;p>0;h=h*256+e[a+c],c+=m,p-=8);for(i=h&(1<<-p)-1,h>>=-p,p+=r;p>0;i=i*256+e[a+c],c+=m,p-=8);if(h===0)h=1-d;else{if(h===y)return i?NaN:(l?-1:1)*(1/0);i=i+Math.pow(2,r),h=h-d}return(l?-1:1)*i*Math.pow(2,h-r)},T.write=function(e,a,n,r,t,h){var i,s,y,d=h*8-t-1,p=(1<<d)-1,c=p>>1,m=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:h-1,x=r?1:-1,u=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(s=isNaN(a)?1:0,i=p):(i=Math.floor(Math.log(a)/Math.LN2),a*(y=Math.pow(2,-i))<1&&(i--,y*=2),i+c>=1?a+=m/y:a+=m*Math.pow(2,1-c),a*y>=2&&(i++,y/=2),i+c>=p?(s=0,i=p):i+c>=1?(s=(a*y-1)*Math.pow(2,t),i=i+c):(s=a*Math.pow(2,c-1)*Math.pow(2,t),i=0));t>=8;e[n+l]=s&255,l+=x,s/=256,t-=8);for(i=i<<t|s,d+=t;d>0;e[n+l]=i&255,l+=x,i/=256,d-=8);e[n+l-x]|=u*128}},{}],5:[function(f,M,T){var e=M.exports={},a,n;function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=r}catch{a=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=t}catch{n=t}})();function h(u){if(a===setTimeout)return setTimeout(u,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(u,0);try{return a(u,0)}catch{try{return a.call(null,u,0)}catch{return a.call(this,u,0)}}}function i(u){if(n===clearTimeout)return clearTimeout(u);if((n===t||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(u);try{return n(u)}catch{try{return n.call(null,u)}catch{return n.call(this,u)}}}var s=[],y=!1,d,p=-1;function c(){!y||!d||(y=!1,d.length?s=d.concat(s):p=-1,s.length&&m())}function m(){if(!y){var u=h(c);y=!0;for(var A=s.length;A;){for(d=s,s=[];++p<A;)d&&d[p].run();p=-1,A=s.length}d=null,y=!1,i(u)}}e.nextTick=function(u){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];s.push(new l(u,A)),s.length===1&&!y&&h(m)};function l(u,A){this.fun=u,this.array=A}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(u){return[]},e.binding=function(u){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(u){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(f,M,T){M.exports={alpha_shape:f("alpha-shape"),convex_hull:f("convex-hull"),delaunay_triangulate:f("delaunay-triangulate"),gl_cone3d:f("gl-cone3d"),gl_error3d:f("gl-error3d"),gl_heatmap2d:f("gl-heatmap2d"),gl_line3d:f("gl-line3d"),gl_mesh3d:f("gl-mesh3d"),gl_plot2d:f("gl-plot2d"),gl_plot3d:f("gl-plot3d"),gl_pointcloud2d:f("gl-pointcloud2d"),gl_scatter3d:f("gl-scatter3d"),gl_select_box:f("gl-select-box"),gl_spikes2d:f("gl-spikes2d"),gl_streamtube3d:f("gl-streamtube3d"),gl_surface3d:f("gl-surface3d"),ndarray:f("ndarray"),ndarray_linear_interpolate:f("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(f,M,T){M.exports=h;var e=f("turntable-camera-controller"),a=f("orbit-camera-controller"),n=f("matrix-camera-controller");function r(i,s){this._controllerNames=Object.keys(i),this._controllerList=this._controllerNames.map(function(y){return i[y]}),this._mode=s,this._active=i[s],this._active||(this._mode="turntable",this._active=i.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=r.prototype;t.flush=function(i){for(var s=this._controllerList,y=0;y<s.length;++y)s[y].flush(i)},t.idle=function(i){for(var s=this._controllerList,y=0;y<s.length;++y)s[y].idle(i)},t.lookAt=function(i,s,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].lookAt(i,s,y,d)},t.rotate=function(i,s,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].rotate(i,s,y,d)},t.pan=function(i,s,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].pan(i,s,y,d)},t.translate=function(i,s,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].translate(i,s,y,d)},t.setMatrix=function(i,s){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setMatrix(i,s)},t.setDistanceLimits=function(i,s){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setDistanceLimits(i,s)},t.setDistance=function(i,s){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setDistance(i,s)},t.recalcMatrix=function(i){this._active.recalcMatrix(i)},t.getDistance=function(i){return this._active.getDistance(i)},t.getDistanceLimits=function(i){return this._active.getDistanceLimits(i)},t.lastT=function(){return this._active.lastT()},t.setMode=function(i){if(i!==this._mode){var s=this._controllerNames.indexOf(i);if(!(s<0)){var y=this._active,d=this._controllerList[s],p=Math.max(y.lastT(),d.lastT());y.recalcMatrix(p),d.setMatrix(p,y.computedMatrix),this._active=d,this._mode=i,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function h(i){i=i||{};var s=i.eye||[0,0,1],y=i.center||[0,0,0],d=i.up||[0,1,0],p=i.distanceLimits||[0,1/0],c=i.mode||"turntable",m=e(),l=a(),x=n();return m.setDistanceLimits(p[0],p[1]),m.lookAt(0,s,y,d),l.setDistanceLimits(p[0],p[1]),l.lookAt(0,s,y,d),x.setDistanceLimits(p[0],p[1]),x.lookAt(0,s,y,d),new r({turntable:m,orbit:l,matrix:x},c)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(f,M,T){var e=typeof WeakMap>"u"?f("weak-map"):WeakMap,a=f("gl-buffer"),n=f("gl-vao"),r=new e;function t(h){var i=r.get(h),s=i&&(i._triangleBuffer.handle||i._triangleBuffer.buffer);if(!s||!h.isBuffer(s)){var y=a(h,new Float32Array([-1,-1,-1,4,4,-1]));i=n(h,[{buffer:y,type:h.FLOAT,size:2}]),i._triangleBuffer=y,r.set(h,i)}i.bind(),h.drawArrays(h.TRIANGLES,0,3),i.unbind()}M.exports=t},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(f,M,T){var e=f("pad-left");M.exports=a;function a(n,r,t){r=typeof r=="number"?r:1,t=t||": ";var h=n.split(/\r?\n/),i=String(h.length+r-1).length;return h.map(function(s,y){var d=y+r,p=String(d).length,c=e(d,i-p);return c+t+s}).join(`
`)}},{"pad-left":264}],10:[function(f,M,T){M.exports=n;var e=f("robust-orientation");function a(r,t){for(var h=new Array(t+1),i=0;i<r.length;++i)h[i]=r[i];for(var i=0;i<=r.length;++i){for(var s=r.length;s<=t;++s){for(var y=new Array(t),d=0;d<t;++d)y[d]=Math.pow(s+1-i,d);h[s]=y}var p=e.apply(void 0,h);if(p)return!0}return!1}function n(r){var t=r.length;if(t===0)return[];if(t===1)return[0];for(var h=r[0].length,i=[r[0]],s=[0],y=1;y<t;++y){if(i.push(r[y]),!a(i,h)){i.pop();continue}if(s.push(y),s.length===h+1)return s}return s}},{"robust-orientation":284}],11:[function(f,M,T){M.exports=n;var e=f("delaunay-triangulate"),a=f("circumradius");function n(r,t){return e(t).filter(function(h){for(var i=new Array(h.length),s=0;s<h.length;++s)i[s]=t[h[s]];return a(i)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(f,M,T){M.exports=n;var e=f("alpha-complex"),a=f("simplicial-complex-boundary");function n(r,t){return a(e(r,t))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(f,M,T){M.exports=function(a){return atob(a)}},{}],14:[function(f,M,T){M.exports=n;var e=f("robust-linear-solve");function a(r){for(var t=0,h=0;h<r.length;++h)t+=r[h];return t}function n(r,t){for(var h=t.length,i=new Array(h+1),s=0;s<h;++s){for(var y=new Array(h+1),d=0;d<=h;++d)y[d]=r[d][s];i[s]=y}i[h]=new Array(h+1);for(var s=0;s<=h;++s)i[h][s]=1;for(var p=new Array(h+1),s=0;s<h;++s)p[s]=t[s];p[h]=1;var c=e(i,p),m=a(c[h+1]);m===0&&(m=1);for(var l=new Array(h+1),s=0;s<=h;++s)l[s]=a(c[s])/m;return l}},{"robust-linear-solve":283}],15:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(f,M,T){M.exports=e;function e(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],17:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]),n[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(f,M,T){var e=f("./is-rat"),a=f("./lib/is-bn"),n=f("./lib/num-to-bn"),r=f("./lib/str-to-bn"),t=f("./lib/rationalize"),h=f("./div");M.exports=i;function i(s,y){if(e(s))return y?h(s,i(y)):[s[0].clone(),s[1].clone()];var d=0,p,c;if(a(s))p=s.clone();else if(typeof s=="string")p=r(s);else{if(s===0)return[n(0),n(1)];if(s===Math.floor(s))p=n(s);else{for(;s!==Math.floor(s);)s=s*Math.pow(2,256),d-=256;p=n(s)}}if(e(y))p.mul(y[1]),c=y[0].clone();else if(a(y))c=y.clone();else if(typeof y=="string")c=r(y);else if(!y)c=n(1);else if(y===Math.floor(y))c=n(y);else{for(;y!==Math.floor(y);)y=y*Math.pow(2,256),d+=256;c=n(y)}return d>0?p=p.ushln(d):d<0&&(c=c.ushln(-d)),t(p,c)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(f,M,T){var e=f("./lib/is-bn");M.exports=a;function a(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(f,M,T){var e=f("./bn-sign");M.exports=a;function a(n){var r=n.length,t=n.words,h=0;if(r===1)h=t[0];else if(r===2)h=t[0]+t[1]*67108864;else for(var i=0;i<r;i++){var s=t[i];h+=s*Math.pow(67108864,i)}return e(n)*h}},{"./bn-sign":20}],22:[function(f,M,T){var e=f("double-bits"),a=f("bit-twiddle").countTrailingZeros;M.exports=n;function n(r){var t=a(e.lo(r));if(t<32)return t;var h=a(e.hi(r));return h>20?52:h+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(f,M,T){f("bn.js"),M.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(f,M,T){var e=f("bn.js"),a=f("double-bits");M.exports=n;function n(r){var t=a.exponent(r);return t<52?new e(r):new e(r*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":33,"double-bits":64}],25:[function(f,M,T){var e=f("./num-to-bn"),a=f("./bn-sign");M.exports=n;function n(r,t){var h=a(r),i=a(t);if(h===0)return[e(0),e(1)];if(i===0)return[e(0),e(0)];i<0&&(r=r.neg(),t=t.neg());var s=r.gcd(t);return s.cmpn(1)?[r.div(s),t.div(s)]:[r,t]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(n){return new e(n)}},{"bn.js":33}],27:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[0]),n[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(f,M,T){var e=f("./lib/bn-sign");M.exports=a;function a(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(f,M,T){var e=f("./lib/bn-to-num"),a=f("./lib/ctz");M.exports=n;function n(r){var t=r[0],h=r[1];if(t.cmpn(0)===0)return 0;var i=t.abs().divmod(h.abs()),s=i.div,y=e(s),d=i.mod,p=t.negative!==h.negative?-1:1;if(d.cmpn(0)===0)return p*y;if(y){var c=a(y)+4,m=e(d.ushln(c).divRound(h));return p*(y+m*Math.pow(2,-c))}else{var l=h.bitLength()-d.bitLength()+53,m=e(d.ushln(l).divRound(h));return l<1023?p*m*Math.pow(2,-l):(m*=Math.pow(2,-1023),p*m*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(f,M,T){function e(i,s,y,d,p){for(var c=p+1;d<=p;){var m=d+p>>>1,l=i[m],x=y!==void 0?y(l,s):l-s;x>=0?(c=m,p=m-1):d=m+1}return c}function a(i,s,y,d,p){for(var c=p+1;d<=p;){var m=d+p>>>1,l=i[m],x=y!==void 0?y(l,s):l-s;x>0?(c=m,p=m-1):d=m+1}return c}function n(i,s,y,d,p){for(var c=d-1;d<=p;){var m=d+p>>>1,l=i[m],x=y!==void 0?y(l,s):l-s;x<0?(c=m,d=m+1):p=m-1}return c}function r(i,s,y,d,p){for(var c=d-1;d<=p;){var m=d+p>>>1,l=i[m],x=y!==void 0?y(l,s):l-s;x<=0?(c=m,d=m+1):p=m-1}return c}function t(i,s,y,d,p){for(;d<=p;){var c=d+p>>>1,m=i[c],l=y!==void 0?y(m,s):m-s;if(l===0)return c;l<=0?d=c+1:p=c-1}return-1}function h(i,s,y,d,p,c){return typeof y=="function"?c(i,s,y,d===void 0?0:d|0,p===void 0?i.length-1:p|0):c(i,s,void 0,y===void 0?0:y|0,d===void 0?i.length-1:d|0)}M.exports={ge:function(i,s,y,d,p){return h(i,s,y,d,p,e)},gt:function(i,s,y,d,p){return h(i,s,y,d,p,a)},lt:function(i,s,y,d,p){return h(i,s,y,d,p,n)},le:function(i,s,y,d,p){return h(i,s,y,d,p,r)},eq:function(i,s,y,d,p){return h(i,s,y,d,p,t)}}},{}],32:[function(f,M,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(r){return(r>0)-(r<0)},T.abs=function(r){var t=r>>e-1;return(r^t)-t},T.min=function(r,t){return t^(r^t)&-(r<t)},T.max=function(r,t){return r^(r^t)&-(r<t)},T.isPow2=function(r){return!(r&r-1)&&!!r},T.log2=function(r){var t,h;return t=(r>65535)<<4,r>>>=t,h=(r>255)<<3,r>>>=h,t|=h,h=(r>15)<<2,r>>>=h,t|=h,h=(r>3)<<1,r>>>=h,t|=h,t|r>>1},T.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},T.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function a(r){var t=32;return r&=-r,r&&t--,r&65535&&(t-=16),r&16711935&&(t-=8),r&252645135&&(t-=4),r&858993459&&(t-=2),r&1431655765&&(t-=1),t}T.countTrailingZeros=a,T.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},T.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},T.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var n=new Array(256);(function(r){for(var t=0;t<256;++t){var h=t,i=t,s=7;for(h>>>=1;h;h>>>=1)i<<=1,i|=h&1,--s;r[t]=i<<s&255}})(n),T.reverse=function(r){return n[r&255]<<24|n[r>>>8&255]<<16|n[r>>>16&255]<<8|n[r>>>24&255]},T.interleave2=function(r,t){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1},T.deinterleave2=function(r,t){return r=r>>>t&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},T.interleave3=function(r,t,h){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r|=t<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,r|h<<2},T.deinterleave3=function(r,t){return r=r>>>t&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},T.nextCombination=function(r){var t=r|r-1;return t+1|(~t&-~t)-1>>>a(r)+1}},{}],33:[function(f,M,T){(function(e,a){function n(I,D){if(!I)throw new Error(D||"Assertion failed")}function r(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function t(I,D,R){if(t.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=t:a.BN=t,t.BN=t,t.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=f("buffer").Buffer}catch{}t.isBN=function(D){return D instanceof t?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===t.wordSize&&Array.isArray(D.words)},t.max=function(D,R){return D.cmp(R)>0?D:R},t.min=function(D,R){return D.cmp(R)<0?D:R},t.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,O):(this._parseBase(D,R,z),O==="le"&&this._initArray(this.toArray(),R,O)))},t.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},t.prototype._initArray=function(D,R,O){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var B,G,Q=0;if(O==="be")for(z=D.length-1,B=0;z>=0;z-=3)G=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[B]|=G<<Q&67108863,this.words[B+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,B++);else if(O==="le")for(z=0,B=0;z<D.length;z+=3)G=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[B]|=G<<Q&67108863,this.words[B+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,B++);return this.strip()};function i(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function s(I,D,R){var O=i(I,R);return R-1>=D&&(O|=i(I,R-1)<<4),O}t.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var B=0,G=0,Q;if(O==="be")for(z=D.length-1;z>=R;z-=2)Q=s(D,R,z)<<B,this.words[G]|=Q&67108863,B>=18?(B-=18,G+=1,this.words[G]|=Q>>>26):B+=8;else{var X=D.length-R;for(z=X%2===0?R+1:R;z<D.length;z+=2)Q=s(D,R,z)<<B,this.words[G]|=Q&67108863,B>=18?(B-=18,G+=1,this.words[G]|=Q>>>26):B+=8}this.strip()};function y(I,D,R,O){for(var z=0,B=Math.min(I.length,R),G=D;G<B;G++){var Q=I.charCodeAt(G)-48;z*=O,Q>=49?z+=Q-49+10:Q>=17?z+=Q-17+10:z+=Q}return z}t.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var z=0,B=1;B<=67108863;B*=R)z++;z--,B=B/R|0;for(var G=D.length-O,Q=G%z,X=Math.min(G,G-Q)+O,j=0,re=O;re<X;re+=z)j=y(D,re,re+z,R),this.imuln(B),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(Q!==0){var ue=1;for(j=y(D,re,D.length,R),re=0;re<Q;re++)ue*=R;this.imuln(ue),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this.strip()},t.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},t.prototype.clone=function(){var D=new t(null);return this.copy(D),D},t.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var z=0,B=0,G=0;G<this.length;G++){var Q=this.words[G],X=((Q<<z|B)&16777215).toString(16);B=Q>>>24-z&16777215,B!==0||G!==this.length-1?O=d[6-X.length]+X+O:O=X+O,z+=2,z>=26&&(z-=26,G--)}for(B!==0&&(O=B.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var j=p[D],re=c[D];O="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var K=ue.modn(re).toString(D);ue=ue.idivn(re),ue.isZero()?O=K+O:O=d[j-K.length]+K+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}n(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(D,R){return n(typeof h<"u"),this.toArrayLike(h,D,R)},t.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},t.prototype.toArrayLike=function(D,R,O){var z=this.byteLength(),B=O||Math.max(1,z);n(z<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0"),this.strip();var G=R==="le",Q=new D(B),X,j,re=this.clone();if(G){for(j=0;!re.isZero();j++)X=re.andln(255),re.iushrn(8),Q[j]=X;for(;j<B;j++)Q[j]=0}else{for(j=0;j<B-z;j++)Q[j]=0;for(j=0;!re.isZero();j++)X=re.andln(255),re.iushrn(8),Q[B-j-1]=X}return Q},Math.clz32?t.prototype._countBits=function(D){return 32-Math.clz32(D)}:t.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},t.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},t.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function m(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,z=R%26;D[R]=(I.words[O]&1<<z)>>>z}return D}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},t.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},t.prototype.ior=function(D){return n((this.negative|D.negative)===0),this.iuor(D)},t.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},t.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},t.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},t.prototype.iand=function(D){return n((this.negative|D.negative)===0),this.iuand(D)},t.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},t.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},t.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var z=0;z<O.length;z++)this.words[z]=R.words[z]^O.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},t.prototype.ixor=function(D){return n((this.negative|D.negative)===0),this.iuxor(D)},t.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},t.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},t.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},t.prototype.notn=function(D){return this.clone().inotn(D)},t.prototype.setn=function(D,R){n(typeof D=="number"&&D>=0);var O=D/26|0,z=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},t.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,z;this.length>D.length?(O=this,z=D):(O=D,z=this);for(var B=0,G=0;G<z.length;G++)R=(O.words[G]|0)+(z.words[G]|0)+B,this.words[G]=R&67108863,B=R>>>26;for(;B!==0&&G<O.length;G++)R=(O.words[G]|0)+B,this.words[G]=R&67108863,B=R>>>26;if(this.length=O.length,B!==0)this.words[this.length]=B,this.length++;else if(O!==this)for(;G<O.length;G++)this.words[G]=O.words[G];return this},t.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},t.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,B;O>0?(z=this,B=D):(z=D,B=this);for(var G=0,Q=0;Q<B.length;Q++)R=(z.words[Q]|0)-(B.words[Q]|0)+G,G=R>>26,this.words[Q]=R&67108863;for(;G!==0&&Q<z.length;Q++)R=(z.words[Q]|0)+G,G=R>>26,this.words[Q]=R&67108863;if(G===0&&Q<z.length&&z!==this)for(;Q<z.length;Q++)this.words[Q]=z.words[Q];return this.length=Math.max(this.length,Q),z!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var z=I.words[0]|0,B=D.words[0]|0,G=z*B,Q=G&67108863,X=G/67108864|0;R.words[0]=Q;for(var j=1;j<O;j++){for(var re=X>>>26,ue=X&67108863,K=Math.min(j,D.length-1),te=Math.max(0,j-I.length+1);te<=K;te++){var Y=j-te|0;z=I.words[Y]|0,B=D.words[te]|0,G=z*B+ue,re+=G/67108864|0,ue=G&67108863}R.words[j]=ue|0,X=re|0}return X!==0?R.words[j]=X|0:R.length--,R.strip()}var x=function(D,R,O){var z=D.words,B=R.words,G=O.words,Q=0,X,j,re,ue=z[0]|0,K=ue&8191,te=ue>>>13,Y=z[1]|0,V=Y&8191,ee=Y>>>13,ne=z[2]|0,Z=ne&8191,q=ne>>>13,ie=z[3]|0,se=ie&8191,ae=ie>>>13,oe=z[4]|0,be=oe&8191,ce=oe>>>13,de=z[5]|0,ye=de&8191,ge=de>>>13,me=z[6]|0,Me=me&8191,Le=me>>>13,Oe=z[7]|0,_e=Oe&8191,Ee=Oe>>>13,Ze=z[8]|0,Ge=Ze&8191,Fe=Ze>>>13,Re=z[9]|0,We=Re&8191,xt=Re>>>13,Nt=B[0]|0,tr=Nt&8191,Vt=Nt>>>13,Pt=B[1]|0,$t=Pt&8191,Ut=Pt>>>13,Lt=B[2]|0,Ye=Lt&8191,ot=Lt>>>13,Ve=B[3]|0,Ae=Ve&8191,He=Ve>>>13,Je=B[4]|0,tt=Je&8191,St=Je>>>13,_t=B[5]|0,kt=_t&8191,jt=_t>>>13,Bt=B[6]|0,Wt=Bt&8191,Qt=Bt>>>13,Zt=B[7]|0,cr=Zt&8191,Xr=Zt>>>13,vn=B[8]|0,en=vn&8191,ft=vn>>>13,ar=B[9]|0,rr=ar&8191,Kt=ar>>>13;O.negative=D.negative^R.negative,O.length=19,X=Math.imul(K,tr),j=Math.imul(K,Vt),j=j+Math.imul(te,tr)|0,re=Math.imul(te,Vt);var Er=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Er>>>26)|0,Er&=67108863,X=Math.imul(V,tr),j=Math.imul(V,Vt),j=j+Math.imul(ee,tr)|0,re=Math.imul(ee,Vt),X=X+Math.imul(K,$t)|0,j=j+Math.imul(K,Ut)|0,j=j+Math.imul(te,$t)|0,re=re+Math.imul(te,Ut)|0;var st=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(st>>>26)|0,st&=67108863,X=Math.imul(Z,tr),j=Math.imul(Z,Vt),j=j+Math.imul(q,tr)|0,re=Math.imul(q,Vt),X=X+Math.imul(V,$t)|0,j=j+Math.imul(V,Ut)|0,j=j+Math.imul(ee,$t)|0,re=re+Math.imul(ee,Ut)|0,X=X+Math.imul(K,Ye)|0,j=j+Math.imul(K,ot)|0,j=j+Math.imul(te,Ye)|0,re=re+Math.imul(te,ot)|0;var et=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(et>>>26)|0,et&=67108863,X=Math.imul(se,tr),j=Math.imul(se,Vt),j=j+Math.imul(ae,tr)|0,re=Math.imul(ae,Vt),X=X+Math.imul(Z,$t)|0,j=j+Math.imul(Z,Ut)|0,j=j+Math.imul(q,$t)|0,re=re+Math.imul(q,Ut)|0,X=X+Math.imul(V,Ye)|0,j=j+Math.imul(V,ot)|0,j=j+Math.imul(ee,Ye)|0,re=re+Math.imul(ee,ot)|0,X=X+Math.imul(K,Ae)|0,j=j+Math.imul(K,He)|0,j=j+Math.imul(te,Ae)|0,re=re+Math.imul(te,He)|0;var vt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(vt>>>26)|0,vt&=67108863,X=Math.imul(be,tr),j=Math.imul(be,Vt),j=j+Math.imul(ce,tr)|0,re=Math.imul(ce,Vt),X=X+Math.imul(se,$t)|0,j=j+Math.imul(se,Ut)|0,j=j+Math.imul(ae,$t)|0,re=re+Math.imul(ae,Ut)|0,X=X+Math.imul(Z,Ye)|0,j=j+Math.imul(Z,ot)|0,j=j+Math.imul(q,Ye)|0,re=re+Math.imul(q,ot)|0,X=X+Math.imul(V,Ae)|0,j=j+Math.imul(V,He)|0,j=j+Math.imul(ee,Ae)|0,re=re+Math.imul(ee,He)|0,X=X+Math.imul(K,tt)|0,j=j+Math.imul(K,St)|0,j=j+Math.imul(te,tt)|0,re=re+Math.imul(te,St)|0;var pt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(pt>>>26)|0,pt&=67108863,X=Math.imul(ye,tr),j=Math.imul(ye,Vt),j=j+Math.imul(ge,tr)|0,re=Math.imul(ge,Vt),X=X+Math.imul(be,$t)|0,j=j+Math.imul(be,Ut)|0,j=j+Math.imul(ce,$t)|0,re=re+Math.imul(ce,Ut)|0,X=X+Math.imul(se,Ye)|0,j=j+Math.imul(se,ot)|0,j=j+Math.imul(ae,Ye)|0,re=re+Math.imul(ae,ot)|0,X=X+Math.imul(Z,Ae)|0,j=j+Math.imul(Z,He)|0,j=j+Math.imul(q,Ae)|0,re=re+Math.imul(q,He)|0,X=X+Math.imul(V,tt)|0,j=j+Math.imul(V,St)|0,j=j+Math.imul(ee,tt)|0,re=re+Math.imul(ee,St)|0,X=X+Math.imul(K,kt)|0,j=j+Math.imul(K,jt)|0,j=j+Math.imul(te,kt)|0,re=re+Math.imul(te,jt)|0;var Ct=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,X=Math.imul(Me,tr),j=Math.imul(Me,Vt),j=j+Math.imul(Le,tr)|0,re=Math.imul(Le,Vt),X=X+Math.imul(ye,$t)|0,j=j+Math.imul(ye,Ut)|0,j=j+Math.imul(ge,$t)|0,re=re+Math.imul(ge,Ut)|0,X=X+Math.imul(be,Ye)|0,j=j+Math.imul(be,ot)|0,j=j+Math.imul(ce,Ye)|0,re=re+Math.imul(ce,ot)|0,X=X+Math.imul(se,Ae)|0,j=j+Math.imul(se,He)|0,j=j+Math.imul(ae,Ae)|0,re=re+Math.imul(ae,He)|0,X=X+Math.imul(Z,tt)|0,j=j+Math.imul(Z,St)|0,j=j+Math.imul(q,tt)|0,re=re+Math.imul(q,St)|0,X=X+Math.imul(V,kt)|0,j=j+Math.imul(V,jt)|0,j=j+Math.imul(ee,kt)|0,re=re+Math.imul(ee,jt)|0,X=X+Math.imul(K,Wt)|0,j=j+Math.imul(K,Qt)|0,j=j+Math.imul(te,Wt)|0,re=re+Math.imul(te,Qt)|0;var Ht=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,X=Math.imul(_e,tr),j=Math.imul(_e,Vt),j=j+Math.imul(Ee,tr)|0,re=Math.imul(Ee,Vt),X=X+Math.imul(Me,$t)|0,j=j+Math.imul(Me,Ut)|0,j=j+Math.imul(Le,$t)|0,re=re+Math.imul(Le,Ut)|0,X=X+Math.imul(ye,Ye)|0,j=j+Math.imul(ye,ot)|0,j=j+Math.imul(ge,Ye)|0,re=re+Math.imul(ge,ot)|0,X=X+Math.imul(be,Ae)|0,j=j+Math.imul(be,He)|0,j=j+Math.imul(ce,Ae)|0,re=re+Math.imul(ce,He)|0,X=X+Math.imul(se,tt)|0,j=j+Math.imul(se,St)|0,j=j+Math.imul(ae,tt)|0,re=re+Math.imul(ae,St)|0,X=X+Math.imul(Z,kt)|0,j=j+Math.imul(Z,jt)|0,j=j+Math.imul(q,kt)|0,re=re+Math.imul(q,jt)|0,X=X+Math.imul(V,Wt)|0,j=j+Math.imul(V,Qt)|0,j=j+Math.imul(ee,Wt)|0,re=re+Math.imul(ee,Qt)|0,X=X+Math.imul(K,cr)|0,j=j+Math.imul(K,Xr)|0,j=j+Math.imul(te,cr)|0,re=re+Math.imul(te,Xr)|0;var Pe=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,X=Math.imul(Ge,tr),j=Math.imul(Ge,Vt),j=j+Math.imul(Fe,tr)|0,re=Math.imul(Fe,Vt),X=X+Math.imul(_e,$t)|0,j=j+Math.imul(_e,Ut)|0,j=j+Math.imul(Ee,$t)|0,re=re+Math.imul(Ee,Ut)|0,X=X+Math.imul(Me,Ye)|0,j=j+Math.imul(Me,ot)|0,j=j+Math.imul(Le,Ye)|0,re=re+Math.imul(Le,ot)|0,X=X+Math.imul(ye,Ae)|0,j=j+Math.imul(ye,He)|0,j=j+Math.imul(ge,Ae)|0,re=re+Math.imul(ge,He)|0,X=X+Math.imul(be,tt)|0,j=j+Math.imul(be,St)|0,j=j+Math.imul(ce,tt)|0,re=re+Math.imul(ce,St)|0,X=X+Math.imul(se,kt)|0,j=j+Math.imul(se,jt)|0,j=j+Math.imul(ae,kt)|0,re=re+Math.imul(ae,jt)|0,X=X+Math.imul(Z,Wt)|0,j=j+Math.imul(Z,Qt)|0,j=j+Math.imul(q,Wt)|0,re=re+Math.imul(q,Qt)|0,X=X+Math.imul(V,cr)|0,j=j+Math.imul(V,Xr)|0,j=j+Math.imul(ee,cr)|0,re=re+Math.imul(ee,Xr)|0,X=X+Math.imul(K,en)|0,j=j+Math.imul(K,ft)|0,j=j+Math.imul(te,en)|0,re=re+Math.imul(te,ft)|0;var ke=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(ke>>>26)|0,ke&=67108863,X=Math.imul(We,tr),j=Math.imul(We,Vt),j=j+Math.imul(xt,tr)|0,re=Math.imul(xt,Vt),X=X+Math.imul(Ge,$t)|0,j=j+Math.imul(Ge,Ut)|0,j=j+Math.imul(Fe,$t)|0,re=re+Math.imul(Fe,Ut)|0,X=X+Math.imul(_e,Ye)|0,j=j+Math.imul(_e,ot)|0,j=j+Math.imul(Ee,Ye)|0,re=re+Math.imul(Ee,ot)|0,X=X+Math.imul(Me,Ae)|0,j=j+Math.imul(Me,He)|0,j=j+Math.imul(Le,Ae)|0,re=re+Math.imul(Le,He)|0,X=X+Math.imul(ye,tt)|0,j=j+Math.imul(ye,St)|0,j=j+Math.imul(ge,tt)|0,re=re+Math.imul(ge,St)|0,X=X+Math.imul(be,kt)|0,j=j+Math.imul(be,jt)|0,j=j+Math.imul(ce,kt)|0,re=re+Math.imul(ce,jt)|0,X=X+Math.imul(se,Wt)|0,j=j+Math.imul(se,Qt)|0,j=j+Math.imul(ae,Wt)|0,re=re+Math.imul(ae,Qt)|0,X=X+Math.imul(Z,cr)|0,j=j+Math.imul(Z,Xr)|0,j=j+Math.imul(q,cr)|0,re=re+Math.imul(q,Xr)|0,X=X+Math.imul(V,en)|0,j=j+Math.imul(V,ft)|0,j=j+Math.imul(ee,en)|0,re=re+Math.imul(ee,ft)|0,X=X+Math.imul(K,rr)|0,j=j+Math.imul(K,Kt)|0,j=j+Math.imul(te,rr)|0,re=re+Math.imul(te,Kt)|0;var lt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,X=Math.imul(We,$t),j=Math.imul(We,Ut),j=j+Math.imul(xt,$t)|0,re=Math.imul(xt,Ut),X=X+Math.imul(Ge,Ye)|0,j=j+Math.imul(Ge,ot)|0,j=j+Math.imul(Fe,Ye)|0,re=re+Math.imul(Fe,ot)|0,X=X+Math.imul(_e,Ae)|0,j=j+Math.imul(_e,He)|0,j=j+Math.imul(Ee,Ae)|0,re=re+Math.imul(Ee,He)|0,X=X+Math.imul(Me,tt)|0,j=j+Math.imul(Me,St)|0,j=j+Math.imul(Le,tt)|0,re=re+Math.imul(Le,St)|0,X=X+Math.imul(ye,kt)|0,j=j+Math.imul(ye,jt)|0,j=j+Math.imul(ge,kt)|0,re=re+Math.imul(ge,jt)|0,X=X+Math.imul(be,Wt)|0,j=j+Math.imul(be,Qt)|0,j=j+Math.imul(ce,Wt)|0,re=re+Math.imul(ce,Qt)|0,X=X+Math.imul(se,cr)|0,j=j+Math.imul(se,Xr)|0,j=j+Math.imul(ae,cr)|0,re=re+Math.imul(ae,Xr)|0,X=X+Math.imul(Z,en)|0,j=j+Math.imul(Z,ft)|0,j=j+Math.imul(q,en)|0,re=re+Math.imul(q,ft)|0,X=X+Math.imul(V,rr)|0,j=j+Math.imul(V,Kt)|0,j=j+Math.imul(ee,rr)|0,re=re+Math.imul(ee,Kt)|0;var ct=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(ct>>>26)|0,ct&=67108863,X=Math.imul(We,Ye),j=Math.imul(We,ot),j=j+Math.imul(xt,Ye)|0,re=Math.imul(xt,ot),X=X+Math.imul(Ge,Ae)|0,j=j+Math.imul(Ge,He)|0,j=j+Math.imul(Fe,Ae)|0,re=re+Math.imul(Fe,He)|0,X=X+Math.imul(_e,tt)|0,j=j+Math.imul(_e,St)|0,j=j+Math.imul(Ee,tt)|0,re=re+Math.imul(Ee,St)|0,X=X+Math.imul(Me,kt)|0,j=j+Math.imul(Me,jt)|0,j=j+Math.imul(Le,kt)|0,re=re+Math.imul(Le,jt)|0,X=X+Math.imul(ye,Wt)|0,j=j+Math.imul(ye,Qt)|0,j=j+Math.imul(ge,Wt)|0,re=re+Math.imul(ge,Qt)|0,X=X+Math.imul(be,cr)|0,j=j+Math.imul(be,Xr)|0,j=j+Math.imul(ce,cr)|0,re=re+Math.imul(ce,Xr)|0,X=X+Math.imul(se,en)|0,j=j+Math.imul(se,ft)|0,j=j+Math.imul(ae,en)|0,re=re+Math.imul(ae,ft)|0,X=X+Math.imul(Z,rr)|0,j=j+Math.imul(Z,Kt)|0,j=j+Math.imul(q,rr)|0,re=re+Math.imul(q,Kt)|0;var yt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,X=Math.imul(We,Ae),j=Math.imul(We,He),j=j+Math.imul(xt,Ae)|0,re=Math.imul(xt,He),X=X+Math.imul(Ge,tt)|0,j=j+Math.imul(Ge,St)|0,j=j+Math.imul(Fe,tt)|0,re=re+Math.imul(Fe,St)|0,X=X+Math.imul(_e,kt)|0,j=j+Math.imul(_e,jt)|0,j=j+Math.imul(Ee,kt)|0,re=re+Math.imul(Ee,jt)|0,X=X+Math.imul(Me,Wt)|0,j=j+Math.imul(Me,Qt)|0,j=j+Math.imul(Le,Wt)|0,re=re+Math.imul(Le,Qt)|0,X=X+Math.imul(ye,cr)|0,j=j+Math.imul(ye,Xr)|0,j=j+Math.imul(ge,cr)|0,re=re+Math.imul(ge,Xr)|0,X=X+Math.imul(be,en)|0,j=j+Math.imul(be,ft)|0,j=j+Math.imul(ce,en)|0,re=re+Math.imul(ce,ft)|0,X=X+Math.imul(se,rr)|0,j=j+Math.imul(se,Kt)|0,j=j+Math.imul(ae,rr)|0,re=re+Math.imul(ae,Kt)|0;var Rt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,X=Math.imul(We,tt),j=Math.imul(We,St),j=j+Math.imul(xt,tt)|0,re=Math.imul(xt,St),X=X+Math.imul(Ge,kt)|0,j=j+Math.imul(Ge,jt)|0,j=j+Math.imul(Fe,kt)|0,re=re+Math.imul(Fe,jt)|0,X=X+Math.imul(_e,Wt)|0,j=j+Math.imul(_e,Qt)|0,j=j+Math.imul(Ee,Wt)|0,re=re+Math.imul(Ee,Qt)|0,X=X+Math.imul(Me,cr)|0,j=j+Math.imul(Me,Xr)|0,j=j+Math.imul(Le,cr)|0,re=re+Math.imul(Le,Xr)|0,X=X+Math.imul(ye,en)|0,j=j+Math.imul(ye,ft)|0,j=j+Math.imul(ge,en)|0,re=re+Math.imul(ge,ft)|0,X=X+Math.imul(be,rr)|0,j=j+Math.imul(be,Kt)|0,j=j+Math.imul(ce,rr)|0,re=re+Math.imul(ce,Kt)|0;var wt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,X=Math.imul(We,kt),j=Math.imul(We,jt),j=j+Math.imul(xt,kt)|0,re=Math.imul(xt,jt),X=X+Math.imul(Ge,Wt)|0,j=j+Math.imul(Ge,Qt)|0,j=j+Math.imul(Fe,Wt)|0,re=re+Math.imul(Fe,Qt)|0,X=X+Math.imul(_e,cr)|0,j=j+Math.imul(_e,Xr)|0,j=j+Math.imul(Ee,cr)|0,re=re+Math.imul(Ee,Xr)|0,X=X+Math.imul(Me,en)|0,j=j+Math.imul(Me,ft)|0,j=j+Math.imul(Le,en)|0,re=re+Math.imul(Le,ft)|0,X=X+Math.imul(ye,rr)|0,j=j+Math.imul(ye,Kt)|0,j=j+Math.imul(ge,rr)|0,re=re+Math.imul(ge,Kt)|0;var Dt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,X=Math.imul(We,Wt),j=Math.imul(We,Qt),j=j+Math.imul(xt,Wt)|0,re=Math.imul(xt,Qt),X=X+Math.imul(Ge,cr)|0,j=j+Math.imul(Ge,Xr)|0,j=j+Math.imul(Fe,cr)|0,re=re+Math.imul(Fe,Xr)|0,X=X+Math.imul(_e,en)|0,j=j+Math.imul(_e,ft)|0,j=j+Math.imul(Ee,en)|0,re=re+Math.imul(Ee,ft)|0,X=X+Math.imul(Me,rr)|0,j=j+Math.imul(Me,Kt)|0,j=j+Math.imul(Le,rr)|0,re=re+Math.imul(Le,Kt)|0;var Jt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,X=Math.imul(We,cr),j=Math.imul(We,Xr),j=j+Math.imul(xt,cr)|0,re=Math.imul(xt,Xr),X=X+Math.imul(Ge,en)|0,j=j+Math.imul(Ge,ft)|0,j=j+Math.imul(Fe,en)|0,re=re+Math.imul(Fe,ft)|0,X=X+Math.imul(_e,rr)|0,j=j+Math.imul(_e,Kt)|0,j=j+Math.imul(Ee,rr)|0,re=re+Math.imul(Ee,Kt)|0;var fr=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(fr>>>26)|0,fr&=67108863,X=Math.imul(We,en),j=Math.imul(We,ft),j=j+Math.imul(xt,en)|0,re=Math.imul(xt,ft),X=X+Math.imul(Ge,rr)|0,j=j+Math.imul(Ge,Kt)|0,j=j+Math.imul(Fe,rr)|0,re=re+Math.imul(Fe,Kt)|0;var Rr=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,X=Math.imul(We,rr),j=Math.imul(We,Kt),j=j+Math.imul(xt,rr)|0,re=Math.imul(xt,Kt);var Sr=(Q+X|0)+((j&8191)<<13)|0;return Q=(re+(j>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,G[0]=Er,G[1]=st,G[2]=et,G[3]=vt,G[4]=pt,G[5]=Ct,G[6]=Ht,G[7]=Pe,G[8]=ke,G[9]=lt,G[10]=ct,G[11]=yt,G[12]=Rt,G[13]=wt,G[14]=Dt,G[15]=Jt,G[16]=fr,G[17]=Rr,G[18]=Sr,Q!==0&&(G[19]=Q,O.length++),O};Math.imul||(x=l);function u(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,z=0,B=0;B<R.length-1;B++){var G=z;z=0;for(var Q=O&67108863,X=Math.min(B,D.length-1),j=Math.max(0,B-I.length+1);j<=X;j++){var re=B-j,ue=I.words[re]|0,K=D.words[j]|0,te=ue*K,Y=te&67108863;G=G+(te/67108864|0)|0,Y=Y+Q|0,Q=Y&67108863,G=G+(Y>>>26)|0,z+=G>>>26,G&=67108863}R.words[B]=Q,O=G,G=z}return O!==0?R.words[B]=O:R.length--,R.strip()}function A(I,D,R){var O=new _;return O.mulp(I,D,R)}t.prototype.mulTo=function(D,R){var O,z=this.length+D.length;return this.length===10&&D.length===10?O=x(this,D,R):z<63?O=l(this,D,R):z<1024?O=u(this,D,R):O=A(this,D,R),O};function _(I,D){this.x=I,this.y=D}_.prototype.makeRBT=function(D){for(var R=new Array(D),O=t.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,O,D);return R},_.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var z=0,B=0;B<R;B++)z|=(D&1)<<R-B-1,D>>=1;return z},_.prototype.permute=function(D,R,O,z,B,G){for(var Q=0;Q<G;Q++)z[Q]=R[D[Q]],B[Q]=O[D[Q]]},_.prototype.transform=function(D,R,O,z,B,G){this.permute(G,D,R,O,z,B);for(var Q=1;Q<B;Q<<=1)for(var X=Q<<1,j=Math.cos(2*Math.PI/X),re=Math.sin(2*Math.PI/X),ue=0;ue<B;ue+=X)for(var K=j,te=re,Y=0;Y<Q;Y++){var V=O[ue+Y],ee=z[ue+Y],ne=O[ue+Y+Q],Z=z[ue+Y+Q],q=K*ne-te*Z;Z=K*Z+te*ne,ne=q,O[ue+Y]=V+ne,z[ue+Y]=ee+Z,O[ue+Y+Q]=V-ne,z[ue+Y+Q]=ee-Z,Y!==X&&(q=j*K-re*te,te=j*te+re*K,K=q)}},_.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,z=O&1,B=0;for(O=O/2|0;O;O=O>>>1)B++;return 1<<B+1+z},_.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var z=0;z<O/2;z++){var B=D[z];D[z]=D[O-z-1],D[O-z-1]=B,B=R[z],R[z]=-R[O-z-1],R[O-z-1]=-B}},_.prototype.normalize13b=function(D,R){for(var O=0,z=0;z<R/2;z++){var B=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+O;D[z]=B&67108863,B<67108864?O=0:O=B/67108864|0}return D},_.prototype.convert13b=function(D,R,O,z){for(var B=0,G=0;G<R;G++)B=B+(D[G]|0),O[2*G]=B&8191,B=B>>>13,O[2*G+1]=B&8191,B=B>>>13;for(G=2*R;G<z;++G)O[G]=0;n(B===0),n((B&-8192)===0)},_.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},_.prototype.mulp=function(D,R,O){var z=2*this.guessLen13b(D.length,R.length),B=this.makeRBT(z),G=this.stub(z),Q=new Array(z),X=new Array(z),j=new Array(z),re=new Array(z),ue=new Array(z),K=new Array(z),te=O.words;te.length=z,this.convert13b(D.words,D.length,Q,z),this.convert13b(R.words,R.length,re,z),this.transform(Q,G,X,j,z,B),this.transform(re,G,ue,K,z,B);for(var Y=0;Y<z;Y++){var V=X[Y]*ue[Y]-j[Y]*K[Y];j[Y]=X[Y]*K[Y]+j[Y]*ue[Y],X[Y]=V}return this.conjugate(X,j,z),this.transform(X,j,te,G,z,B),this.conjugate(te,G,z),this.normalize13b(te,z),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},t.prototype.mul=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},t.prototype.mulf=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),A(this,D,R)},t.prototype.imul=function(D){return this.clone().mulTo(D,this)},t.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var R=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*D,B=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=B>>>26,this.words[O]=B&67108863}return R!==0&&(this.words[O]=R,this.length++),this},t.prototype.muln=function(D){return this.clone().imuln(D)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(D){var R=m(D);if(R.length===0)return new t(1);for(var O=this,z=0;z<R.length&&R[z]===0;z++,O=O.sqr());if(++z<R.length)for(var B=O.sqr();z<R.length;z++,B=B.sqr())R[z]!==0&&(O=O.mul(B));return O},t.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=67108863>>>26-R<<26-R,B;if(R!==0){var G=0;for(B=0;B<this.length;B++){var Q=this.words[B]&z,X=(this.words[B]|0)-Q<<R;this.words[B]=X|G,G=Q>>>26-R}G&&(this.words[B]=G,this.length++)}if(O!==0){for(B=this.length-1;B>=0;B--)this.words[B+O]=this.words[B];for(B=0;B<O;B++)this.words[B]=0;this.length+=O}return this.strip()},t.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},t.prototype.iushrn=function(D,R,O){n(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var B=D%26,G=Math.min((D-B)/26,this.length),Q=67108863^67108863>>>B<<B,X=O;if(z-=G,z=Math.max(0,z),X){for(var j=0;j<G;j++)X.words[j]=this.words[j];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,j=0;j<this.length;j++)this.words[j]=this.words[j+G];else this.words[0]=0,this.length=1;var re=0;for(j=this.length-1;j>=0&&(re!==0||j>=z);j--){var ue=this.words[j]|0;this.words[j]=re<<26-B|ue>>>B,re=ue&Q}return X&&re!==0&&(X.words[X.length++]=re),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(D,R,O){return n(this.negative===0),this.iushrn(D,R,O)},t.prototype.shln=function(D){return this.clone().ishln(D)},t.prototype.ushln=function(D){return this.clone().iushln(D)},t.prototype.shrn=function(D){return this.clone().ishrn(D)},t.prototype.ushrn=function(D){return this.clone().iushrn(D)},t.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return!1;var B=this.words[O];return!!(B&z)},t.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},t.prototype.maskn=function(D){return this.clone().imaskn(D)},t.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},t.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},t.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},t.prototype.addn=function(D){return this.clone().iaddn(D)},t.prototype.subn=function(D){return this.clone().isubn(D)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(D,R,O){var z=D.length+O,B;this._expand(z);var G,Q=0;for(B=0;B<D.length;B++){G=(this.words[B+O]|0)+Q;var X=(D.words[B]|0)*R;G-=X&67108863,Q=(G>>26)-(X/67108864|0),this.words[B+O]=G&67108863}for(;B<this.length-O;B++)G=(this.words[B+O]|0)+Q,Q=G>>26,this.words[B+O]=G&67108863;if(Q===0)return this.strip();for(n(Q===-1),Q=0,B=0;B<this.length;B++)G=-(this.words[B]|0)+Q,Q=G>>26,this.words[B]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(D,R){var O=this.length-D.length,z=this.clone(),B=D,G=B.words[B.length-1]|0,Q=this._countBits(G);O=26-Q,O!==0&&(B=B.ushln(O),z.iushln(O),G=B.words[B.length-1]|0);var X=z.length-B.length,j;if(R!=="mod"){j=new t(null),j.length=X+1,j.words=new Array(j.length);for(var re=0;re<j.length;re++)j.words[re]=0}var ue=z.clone()._ishlnsubmul(B,1,X);ue.negative===0&&(z=ue,j&&(j.words[X]=1));for(var K=X-1;K>=0;K--){var te=(z.words[B.length+K]|0)*67108864+(z.words[B.length+K-1]|0);for(te=Math.min(te/G|0,67108863),z._ishlnsubmul(B,te,K);z.negative!==0;)te--,z.negative=0,z._ishlnsubmul(B,1,K),z.isZero()||(z.negative^=1);j&&(j.words[K]=te)}return j&&j.strip(),z.strip(),R!=="div"&&O!==0&&z.iushrn(O),{div:j||null,mod:z}},t.prototype.divmod=function(D,R,O){if(n(!D.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var z,B,G;return this.negative!==0&&D.negative===0?(G=this.neg().divmod(D,R),R!=="mod"&&(z=G.div.neg()),R!=="div"&&(B=G.mod.neg(),O&&B.negative!==0&&B.iadd(D)),{div:z,mod:B}):this.negative===0&&D.negative!==0?(G=this.divmod(D.neg(),R),R!=="mod"&&(z=G.div.neg()),{div:z,mod:G.mod}):(this.negative&D.negative)!==0?(G=this.neg().divmod(D.neg(),R),R!=="div"&&(B=G.mod.neg(),O&&B.negative!==0&&B.isub(D)),{div:G.div,mod:B}):D.length>this.length||this.cmp(D)<0?{div:new t(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new t(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new t(this.modn(D.words[0]))}:this._wordDiv(D,R)},t.prototype.div=function(D){return this.divmod(D,"div",!1).div},t.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},t.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},t.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),B=D.andln(1),G=O.cmp(z);return G<0||B===1&&G===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},t.prototype.modn=function(D){n(D<=67108863);for(var R=(1<<26)%D,O=0,z=this.length-1;z>=0;z--)O=(R*O+(this.words[z]|0))%D;return O},t.prototype.idivn=function(D){n(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+R*67108864;this.words[O]=z/D|0,R=z%D}return this.strip()},t.prototype.divn=function(D){return this.clone().idivn(D)},t.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new t(1),B=new t(0),G=new t(0),Q=new t(1),X=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++X;for(var j=O.clone(),re=R.clone();!R.isZero();){for(var ue=0,K=1;(R.words[0]&K)===0&&ue<26;++ue,K<<=1);if(ue>0)for(R.iushrn(ue);ue-- >0;)(z.isOdd()||B.isOdd())&&(z.iadd(j),B.isub(re)),z.iushrn(1),B.iushrn(1);for(var te=0,Y=1;(O.words[0]&Y)===0&&te<26;++te,Y<<=1);if(te>0)for(O.iushrn(te);te-- >0;)(G.isOdd()||Q.isOdd())&&(G.iadd(j),Q.isub(re)),G.iushrn(1),Q.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(G),B.isub(Q)):(O.isub(R),G.isub(z),Q.isub(B))}return{a:G,b:Q,gcd:O.iushln(X)}},t.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new t(1),B=new t(0),G=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var Q=0,X=1;(R.words[0]&X)===0&&Q<26;++Q,X<<=1);if(Q>0)for(R.iushrn(Q);Q-- >0;)z.isOdd()&&z.iadd(G),z.iushrn(1);for(var j=0,re=1;(O.words[0]&re)===0&&j<26;++j,re<<=1);if(j>0)for(O.iushrn(j);j-- >0;)B.isOdd()&&B.iadd(G),B.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(B)):(O.isub(R),B.isub(z))}var ue;return R.cmpn(1)===0?ue=z:ue=B,ue.cmpn(0)<0&&ue.iadd(D),ue},t.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var z=0;R.isEven()&&O.isEven();z++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var B=R.cmp(O);if(B<0){var G=R;R=O,O=G}else if(B===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(z)},t.prototype.invm=function(D){return this.egcd(D).a.umod(D)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(D){return this.words[0]&D},t.prototype.bincn=function(D){n(typeof D=="number");var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var B=z,G=O;B!==0&&G<this.length;G++){var Q=this.words[G]|0;Q+=B,B=Q>>>26,Q&=67108863,this.words[G]=Q}return B!==0&&(this.words[G]=B,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),n(D<=67108863,"Number is too big");var z=this.words[0]|0;O=z===D?0:z<D?-1:1}return this.negative!==0?-O|0:O},t.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},t.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,B=D.words[O]|0;if(z!==B){z<B?R=-1:z>B&&(R=1);break}}return R},t.prototype.gtn=function(D){return this.cmpn(D)===1},t.prototype.gt=function(D){return this.cmp(D)===1},t.prototype.gten=function(D){return this.cmpn(D)>=0},t.prototype.gte=function(D){return this.cmp(D)>=0},t.prototype.ltn=function(D){return this.cmpn(D)===-1},t.prototype.lt=function(D){return this.cmp(D)===-1},t.prototype.lten=function(D){return this.cmpn(D)<=0},t.prototype.lte=function(D){return this.cmp(D)<=0},t.prototype.eqn=function(D){return this.cmpn(D)===0},t.prototype.eq=function(D){return this.cmp(D)===0},t.red=function(D){return new E(D)},t.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},t.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(D){return this.red=D,this},t.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},t.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},t.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},t.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},t.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},t.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},t.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},t.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},t.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var g={k256:null,p224:null,p192:null,p25519:null};function b(I,D){this.name=I,this.p=new t(D,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}b.prototype._tmp=function(){var D=new t(null);return D.words=new Array(Math.ceil(this.n/13)),D},b.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var z=O<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},b.prototype.split=function(D,R){D.iushrn(this.n,0,R)},b.prototype.imulK=function(D){return D.imul(this.k)};function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(v,b),v.prototype.split=function(D,R){for(var O=4194303,z=Math.min(D.length,9),B=0;B<z;B++)R.words[B]=D.words[B];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var G=D.words[9];for(R.words[R.length++]=G&O,B=10;B<D.length;B++){var Q=D.words[B]|0;D.words[B-10]=(Q&O)<<4|G>>>22,G=Q}G>>>=22,D.words[B-10]=G,G===0&&D.length>10?D.length-=10:D.length-=9},v.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var z=D.words[O]|0;R+=z*977,D.words[O]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function C(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(C,b);function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,b);function k(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(k,b),k.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var z=(D.words[O]|0)*19+R,B=z&67108863;z>>>=26,D.words[O]=B,R=z}return R!==0&&(D.words[D.length++]=R),D},t._prime=function(D){if(g[D])return g[D];var R;if(D==="k256")R=new v;else if(D==="p224")R=new C;else if(D==="p192")R=new S;else if(D==="p25519")R=new k;else throw new Error("Unknown prime "+D);return g[D]=R,R};function E(I){if(typeof I=="string"){var D=t._prime(I);this.m=D.p,this.prime=D}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}E.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},E.prototype._verify2=function(D,R){n((D.negative|R.negative)===0,"red works only with positives"),n(D.red&&D.red===R.red,"red works only with red numbers")},E.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},E.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},E.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},E.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},E.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},E.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},E.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},E.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},E.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},E.prototype.isqr=function(D){return this.imul(D,D.clone())},E.prototype.sqr=function(D){return this.mul(D,D)},E.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var O=this.m.add(new t(1)).iushrn(2);return this.pow(D,O)}for(var z=this.m.subn(1),B=0;!z.isZero()&&z.andln(1)===0;)B++,z.iushrn(1);n(!z.isZero());var G=new t(1).toRed(this),Q=G.redNeg(),X=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new t(2*j*j).toRed(this);this.pow(j,X).cmp(Q)!==0;)j.redIAdd(Q);for(var re=this.pow(j,z),ue=this.pow(D,z.addn(1).iushrn(1)),K=this.pow(D,z),te=B;K.cmp(G)!==0;){for(var Y=K,V=0;Y.cmp(G)!==0;V++)Y=Y.redSqr();n(V<te);var ee=this.pow(re,new t(1).iushln(te-V-1));ue=ue.redMul(ee),re=ee.redSqr(),K=K.redMul(re),te=V}return ue},E.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},E.prototype.pow=function(D,R){if(R.isZero())return new t(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,z=new Array(1<<O);z[0]=new t(1).toRed(this),z[1]=D;for(var B=2;B<z.length;B++)z[B]=this.mul(z[B-1],D);var G=z[0],Q=0,X=0,j=R.bitLength()%26;for(j===0&&(j=26),B=R.length-1;B>=0;B--){for(var re=R.words[B],ue=j-1;ue>=0;ue--){var K=re>>ue&1;if(G!==z[0]&&(G=this.sqr(G)),K===0&&Q===0){X=0;continue}Q<<=1,Q|=K,X++,!(X!==O&&(B!==0||ue!==0))&&(G=this.mul(G,z[Q]),X=0,Q=0)}j=26}return G},E.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},E.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},t.mont=function(D){return new F(D)};function F(I){E.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(F,E),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=O.isub(z).iushrn(this.shift),G=B;return B.cmp(this.m)>=0?G=B.isub(this.m):B.cmpn(0)<0&&(G=B.iadd(this.m)),G._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new t(0)._forceRed(this);var O=D.mul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=O.isub(z).iushrn(this.shift),G=B;return B.cmp(this.m)>=0?G=B.isub(this.m):B.cmpn(0)<0&&(G=B.iadd(this.m)),G._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof M>"u"||M,this)},{buffer:2}],34:[function(f,M,T){M.exports=e;function e(a){var n,r,t,h=a.length,i=0;for(n=0;n<h;++n)i+=a[n].length;var s=new Array(i),y=0;for(n=0;n<h;++n){var d=a[n],p=d.length;for(r=0;r<p;++r){var c=s[y++]=new Array(p-1),m=0;for(t=0;t<p;++t)t!==r&&(c[m++]=d[t]);if(r&1){var l=c[1];c[1]=c[0],c[0]=l}}}return s}},{}],35:[function(f,M,T){M.exports=p;var e=f("typedarray-pool"),a=f("./lib/sweep"),n=f("./lib/intersect");function r(c,m){for(var l=0;l<c;++l)if(!(m[l]<=m[l+c]))return!0;return!1}function t(c,m,l,x){for(var u=0,A=0,_=0,g=c.length;_<g;++_){var b=c[_];if(!r(m,b)){for(var v=0;v<2*m;++v)l[u++]=b[v];x[A++]=_}}return A}function h(c,m,l,x){var u=c.length,A=m.length;if(!(u<=0||A<=0)){var _=c[0].length>>>1;if(!(_<=0)){var g,b=e.mallocDouble(2*_*u),v=e.mallocInt32(u);if(u=t(c,_,b,v),u>0){if(_===1&&x)a.init(u),g=a.sweepComplete(_,l,0,u,b,v,0,u,b,v);else{var C=e.mallocDouble(2*_*A),S=e.mallocInt32(A);A=t(m,_,C,S),A>0&&(a.init(u+A),_===1?g=a.sweepBipartite(_,l,0,u,b,v,0,A,C,S):g=n(_,l,x,u,b,v,A,C,S),e.free(C),e.free(S))}e.free(b),e.free(v)}return g}}}var i;function s(c,m){i.push([c,m])}function y(c){return i=[],h(c,c,s,!0),i}function d(c,m){return i=[],h(c,m,s,!1),i}function p(c,m,l){switch(arguments.length){case 1:return y(c);case 2:return typeof m=="function"?h(c,c,m,!0):d(c,m);case 3:return h(c,m,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(f,M,T){function e(){function r(i,s,y,d,p,c,m,l,x,u,A){for(var _=2*i,g=d,b=_*d;g<p;++g,b+=_){var v=c[s+b],C=c[s+b+i],S=m[g];e:for(var k=l,E=_*l;k<x;++k,E+=_){var F=u[s+E],I=u[s+E+i],D=A[k];if(!(I<v||C<F)){for(var R=s+1;R<i;++R){var O=c[R+b],z=c[R+i+b],B=u[R+E],G=u[R+i+E];if(z<B||G<O)continue e}var Q=y(S,D);if(Q!==void 0)return Q}}}}function t(i,s,y,d,p,c,m,l,x,u,A){for(var _=2*i,g=l,b=_*l;g<x;++g,b+=_){var v=u[s+b],C=u[s+b+i],S=A[g];e:for(var k=d,E=_*d;k<p;++k,E+=_){var F=c[s+E],I=c[s+E+i],D=m[k];if(!(C<F||I<v)){for(var R=s+1;R<i;++R){var O=c[R+E],z=c[R+i+E],B=u[R+b],G=u[R+i+b];if(z<B||G<O)continue e}var Q=y(D,S);if(Q!==void 0)return Q}}}}function h(i,s,y,d,p,c,m,l,x,u,A){return p-d>x-l?r(i,s,y,d,p,c,m,l,x,u,A):t(i,s,y,d,p,c,m,l,x,u,A)}return h}function a(){function r(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=c,C=b*c;v<m;++v,C+=b){var S=l[d+C],k=l[d+C+y],E=x[v];e:for(var F=u,I=b*u;F<A;++F,I+=b){var D=_[d+I],R=g[F];if(!(D<=S||k<D)){for(var O=d+1;O<y;++O){var z=l[O+C],B=l[O+y+C],G=_[O+I],Q=_[O+y+I];if(B<G||Q<z)continue e}var X=p(R,E);if(X!==void 0)return X}}}}function t(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=c,C=b*c;v<m;++v,C+=b){var S=l[d+C],k=l[d+C+y],E=x[v];e:for(var F=u,I=b*u;F<A;++F,I+=b){var D=_[d+I],R=g[F];if(!(D<S||k<D)){for(var O=d+1;O<y;++O){var z=l[O+C],B=l[O+y+C],G=_[O+I],Q=_[O+y+I];if(B<G||Q<z)continue e}var X=p(E,R);if(X!==void 0)return X}}}}function h(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=u,C=b*u;v<A;++v,C+=b){var S=_[d+C],k=g[v];e:for(var E=c,F=b*c;E<m;++E,F+=b){var I=l[d+F],D=l[d+F+y],R=x[E];if(!(S<=I||D<S)){for(var O=d+1;O<y;++O){var z=l[O+F],B=l[O+y+F],G=_[O+C],Q=_[O+y+C];if(B<G||Q<z)continue e}var X=p(k,R);if(X!==void 0)return X}}}}function i(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=u,C=b*u;v<A;++v,C+=b){var S=_[d+C],k=g[v];e:for(var E=c,F=b*c;E<m;++E,F+=b){var I=l[d+F],D=l[d+F+y],R=x[E];if(!(S<I||D<S)){for(var O=d+1;O<y;++O){var z=l[O+F],B=l[O+y+F],G=_[O+C],Q=_[O+y+C];if(B<G||Q<z)continue e}var X=p(R,k);if(X!==void 0)return X}}}}function s(y,d,p,c,m,l,x,u,A,_,g,b){return l-m>_-A?c?r(y,d,p,m,l,x,u,A,_,g,b):t(y,d,p,m,l,x,u,A,_,g,b):c?h(y,d,p,m,l,x,u,A,_,g,b):i(y,d,p,m,l,x,u,A,_,g,b)}return s}function n(r){return r?e():a()}T.partial=n(!1),T.full=n(!0)},{}],37:[function(f,M,T){M.exports=I;var e=f("typedarray-pool"),a=f("bit-twiddle"),n=f("./brute"),r=n.partial,t=n.full,h=f("./sweep"),i=f("./median"),s=f("./partition"),y=128,d=1<<22,p=1<<22,c=s("!(lo>=p0)&&!(p1>=hi)"),m=s("lo===p0"),l=s("lo<p0"),x=s("hi<=p0"),u=s("lo<=p0&&p0<=hi"),A=s("lo<p0&&p0<=hi"),_=6,g=2,b=1024,v=e.mallocInt32(b),C=e.mallocDouble(b);function S(D,R){var O=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(_*O);v.length<z&&(e.free(v),v=e.mallocInt32(z));var B=a.nextPow2(g*O);C.length<B&&(e.free(C),C=e.mallocDouble(B))}function k(D,R,O,z,B,G,Q,X,j){var re=_*D;v[re]=R,v[re+1]=O,v[re+2]=z,v[re+3]=B,v[re+4]=G,v[re+5]=Q;var ue=g*D;C[ue]=X,C[ue+1]=j}function E(D,R,O,z,B,G,Q,X,j,re,ue){var K=2*D,te=j*K,Y=re[te+R];e:for(var V=B,ee=B*K;V<G;++V,ee+=K){var ne=Q[ee+R],Z=Q[ee+R+D];if(!(Y<ne||Z<Y)&&!(z&&Y===ne)){for(var q=X[V],ie=R+1;ie<D;++ie){var ne=Q[ee+ie],Z=Q[ee+ie+D],se=re[te+ie],ae=re[te+ie+D];if(Z<se||ae<ne)continue e}var oe;if(z?oe=O(ue,q):oe=O(q,ue),oe!==void 0)return oe}}}function F(D,R,O,z,B,G,Q,X,j,re){var ue=2*D,K=X*ue,te=j[K+R];e:for(var Y=z,V=z*ue;Y<B;++Y,V+=ue){var ee=Q[Y];if(ee!==re){var ne=G[V+R],Z=G[V+R+D];if(!(te<ne||Z<te)){for(var q=R+1;q<D;++q){var ne=G[V+q],Z=G[V+q+D],ie=j[K+q],se=j[K+q+D];if(Z<ie||se<ne)continue e}var ae=O(ee,re);if(ae!==void 0)return ae}}}}function I(D,R,O,z,B,G,Q,X,j){S(D,z+Q);var re=0,ue=2*D,K;for(k(re++,0,0,z,0,Q,O?16:0,-1/0,1/0),O||k(re++,0,0,Q,0,z,1,-1/0,1/0);re>0;){re-=1;var te=re*_,Y=v[te],V=v[te+1],ee=v[te+2],ne=v[te+3],Z=v[te+4],q=v[te+5],ie=re*g,se=C[ie],ae=C[ie+1],oe=q&1,be=!!(q&16),ce=B,de=G,ye=X,ge=j;if(oe&&(ce=X,de=j,ye=B,ge=G),!(q&2&&(ee=l(D,Y,V,ee,ce,de,ae),V>=ee))&&!(q&4&&(V=x(D,Y,V,ee,ce,de,se),V>=ee))){var me=ee-V,Me=Z-ne;if(be){if(D*me*(me+Me)<p){if(K=h.scanComplete(D,Y,R,V,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}}else if(D*Math.min(me,Me)<y){if(K=r(D,Y,R,oe,V,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}else if(D*me*Me<d){if(K=h.scanBipartite(D,Y,R,oe,V,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}var Le=c(D,Y,V,ee,ce,de,se,ae);if(V<Le)if(D*(Le-V)<y){if(K=t(D,Y+1,R,V,Le,ce,de,ne,Z,ye,ge),K!==void 0)return K}else if(Y===D-2){if(oe?K=h.sweepBipartite(D,R,ne,Z,ye,ge,V,Le,ce,de):K=h.sweepBipartite(D,R,V,Le,ce,de,ne,Z,ye,ge),K!==void 0)return K}else k(re++,Y+1,V,Le,ne,Z,oe,-1/0,1/0),k(re++,Y+1,ne,Z,V,Le,oe^1,-1/0,1/0);if(Le<ee){var Oe=i(D,Y,ne,Z,ye,ge),_e=ye[ue*Oe+Y],Ee=m(D,Y,Oe,Z,ye,ge,_e);if(Ee<Z&&k(re++,Y,Le,ee,Ee,Z,(oe|4)+(be?16:0),_e,ae),ne<Oe&&k(re++,Y,Le,ee,ne,Oe,(oe|2)+(be?16:0),se,_e),Oe+1===Ee){if(be?K=F(D,Y,R,Le,ee,ce,de,Oe,ye,ge[Oe]):K=E(D,Y,R,oe,Le,ee,ce,de,Oe,ye,ge[Oe]),K!==void 0)return K}else if(Oe<Ee){var Ze;if(be){if(Ze=u(D,Y,Le,ee,ce,de,_e),Le<Ze){var Ge=m(D,Y,Le,Ze,ce,de,_e);if(Y===D-2){if(Le<Ge&&(K=h.sweepComplete(D,R,Le,Ge,ce,de,Oe,Ee,ye,ge),K!==void 0)||Ge<Ze&&(K=h.sweepBipartite(D,R,Ge,Ze,ce,de,Oe,Ee,ye,ge),K!==void 0))return K}else Le<Ge&&k(re++,Y+1,Le,Ge,Oe,Ee,16,-1/0,1/0),Ge<Ze&&(k(re++,Y+1,Ge,Ze,Oe,Ee,0,-1/0,1/0),k(re++,Y+1,Oe,Ee,Ge,Ze,1,-1/0,1/0))}}else oe?Ze=A(D,Y,Le,ee,ce,de,_e):Ze=u(D,Y,Le,ee,ce,de,_e),Le<Ze&&(Y===D-2?oe?K=h.sweepBipartite(D,R,Oe,Ee,ye,ge,Le,Ze,ce,de):K=h.sweepBipartite(D,R,Le,Ze,ce,de,Oe,Ee,ye,ge):(k(re++,Y+1,Le,Ze,Oe,Ee,oe,-1/0,1/0),k(re++,Y+1,Oe,Ee,Le,Ze,oe^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(f,M,T){M.exports=t;var e=f("./partition"),a=e("lo<p0"),n=8;function r(h,i,s,y,d,p){for(var c=2*h,m=c*(s+1)+i,l=s+1;l<y;++l,m+=c)for(var x=d[m],u=l,A=c*(l-1);u>s&&d[A+i]>x;--u,A-=c){for(var _=A,g=A+c,b=0;b<c;++b,++_,++g){var v=d[_];d[_]=d[g],d[g]=v}var C=p[u];p[u]=p[u-1],p[u-1]=C}}function t(h,i,s,y,d,p){if(y<=s+1)return s;for(var c=s,m=y,l=y+s>>>1,x=2*h,u=l,A=d[x*l+i];c<m;){if(m-c<n){r(h,i,c,m,d,p),A=d[x*l+i];break}var _=m-c,g=Math.random()*_+c|0,b=d[x*g+i],v=Math.random()*_+c|0,C=d[x*v+i],S=Math.random()*_+c|0,k=d[x*S+i];b<=C?k>=C?(u=v,A=C):b>=k?(u=g,A=b):(u=S,A=k):C>=k?(u=v,A=C):k>=b?(u=g,A=b):(u=S,A=k);for(var I=x*(m-1),D=x*u,E=0;E<x;++E,++I,++D){var F=d[I];d[I]=d[D],d[D]=F}var R=p[m-1];p[m-1]=p[u],p[u]=R,u=a(h,i,c,m-1,d,p,A);for(var I=x*(m-1),D=x*u,E=0;E<x;++E,++I,++D){var F=d[I];d[I]=d[D],d[D]=F}var R=p[m-1];if(p[m-1]=p[u],p[u]=R,l<u){for(m=u-1;c<m&&d[x*(m-1)+i]===A;)m-=1;m+=1}else if(u<l)for(c=u+1;c<m&&d[x*c+i]===A;)c+=1;else break}return a(h,i,s,l,d,p,d[x*l+i])}},{"./partition":39}],39:[function(f,M,T){M.exports=a;var e={"lo===p0":n,"lo<p0":r,"lo<=p0":t,"hi<=p0":h,"lo<p0&&p0<=hi":s,"lo<=p0&&p0<=hi":i,"!(lo>=p0)&&!(p1>=hi)":y};function a(d){return e[d]}function n(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+v];if(k===u)if(b===S)b+=1,g+=A;else{for(var E=0;A>E;++E){var F=l[_+E];l[_+E]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function r(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+v];if(k<u)if(b===S)b+=1,g+=A;else{for(var E=0;A>E;++E){var F=l[_+E];l[_+E]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function t(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+C];if(k<=u)if(b===S)b+=1,g+=A;else{for(var E=0;A>E;++E){var F=l[_+E];l[_+E]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function h(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+C];if(k<=u)if(b===S)b+=1,g+=A;else{for(var E=0;A>E;++E){var F=l[_+E];l[_+E]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function i(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+v],E=l[_+C];if(k<=u&&u<=E)if(b===S)b+=1,g+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[g],l[g++]=I}var D=x[S];x[S]=x[b],x[b++]=D}}return b}function s(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,C=d+p,S=c;m>S;++S,_+=A){var k=l[_+v],E=l[_+C];if(k<u&&u<=E)if(b===S)b+=1,g+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[g],l[g++]=I}var D=x[S];x[S]=x[b],x[b++]=D}}return b}function y(d,p,c,m,l,x,u,A){for(var _=2*d,g=_*c,b=g,v=c,C=p,S=d+p,k=c;m>k;++k,g+=_){var E=l[g+C],F=l[g+S];if(!(E>=u)&&!(A>=F))if(v===k)v+=1,b+=_;else{for(var I=0;_>I;++I){var D=l[g+I];l[g+I]=l[b],l[b++]=D}var R=x[k];x[k]=x[v],x[v++]=R}}return v}},{}],40:[function(f,M,T){M.exports=a;var e=32;function a(p,c){c<=4*e?n(0,c-1,p):d(0,c-1,p)}function n(p,c,m){for(var l=2*(p+1),x=p+1;x<=c;++x){for(var u=m[l++],A=m[l++],_=x,g=l-2;_-- >p;){var b=m[g-2],v=m[g-1];if(b<u)break;if(b===u&&v<A)break;m[g]=b,m[g+1]=v,g-=2}m[g]=u,m[g+1]=A}}function r(p,c,m){p*=2,c*=2;var l=m[p],x=m[p+1];m[p]=m[c],m[p+1]=m[c+1],m[c]=l,m[c+1]=x}function t(p,c,m){p*=2,c*=2,m[p]=m[c],m[p+1]=m[c+1]}function h(p,c,m,l){p*=2,c*=2,m*=2;var x=l[p],u=l[p+1];l[p]=l[c],l[p+1]=l[c+1],l[c]=l[m],l[c+1]=l[m+1],l[m]=x,l[m+1]=u}function i(p,c,m,l,x){p*=2,c*=2,x[p]=x[c],x[c]=m,x[p+1]=x[c+1],x[c+1]=l}function s(p,c,m){p*=2,c*=2;var l=m[p],x=m[c];return l<x?!1:l===x?m[p+1]>m[c+1]:!0}function y(p,c,m,l){p*=2;var x=l[p];return x<c?!0:x===c?l[p+1]<m:!1}function d(p,c,m){var l=(c-p+1)/6|0,x=p+l,u=c-l,A=p+c>>1,_=A-l,g=A+l,b=x,v=_,C=A,S=g,k=u,E=p+1,F=c-1,I=0;s(b,v,m)&&(I=b,b=v,v=I),s(S,k,m)&&(I=S,S=k,k=I),s(b,C,m)&&(I=b,b=C,C=I),s(v,C,m)&&(I=v,v=C,C=I),s(b,S,m)&&(I=b,b=S,S=I),s(C,S,m)&&(I=C,C=S,S=I),s(v,k,m)&&(I=v,v=k,k=I),s(v,C,m)&&(I=v,v=C,C=I),s(S,k,m)&&(I=S,S=k,k=I);for(var D=m[2*v],R=m[2*v+1],O=m[2*S],z=m[2*S+1],B=2*b,G=2*C,Q=2*k,X=2*x,j=2*A,re=2*u,ue=0;ue<2;++ue){var K=m[B+ue],te=m[G+ue],Y=m[Q+ue];m[X+ue]=K,m[j+ue]=te,m[re+ue]=Y}t(_,p,m),t(g,c,m);for(var V=E;V<=F;++V)if(y(V,D,R,m))V!==E&&r(V,E,m),++E;else if(!y(V,O,z,m))for(;;)if(y(F,O,z,m)){y(F,D,R,m)?(h(V,E,F,m),++E,--F):(r(V,F,m),--F);break}else{if(--F<V)break;continue}i(p,E-1,D,R,m),i(c,F+1,O,z,m),E-2-p<=e?n(p,E-2,m):d(p,E-2,m),c-(F+2)<=e?n(F+2,c,m):d(F+2,c,m),F-E<=e?n(E,F,m):d(E,F,m)}},{}],41:[function(f,M,T){M.exports={init:m,sweepBipartite:u,sweepComplete:A,scanBipartite:_,scanComplete:g};var e=f("typedarray-pool"),a=f("bit-twiddle"),n=f("./sort"),r=1<<28,t=1024,h=e.mallocInt32(t),i=e.mallocInt32(t),s=e.mallocInt32(t),y=e.mallocInt32(t),d=e.mallocInt32(t),p=e.mallocInt32(t),c=e.mallocDouble(t*8);function m(b){var v=a.nextPow2(b);h.length<v&&(e.free(h),h=e.mallocInt32(v)),i.length<v&&(e.free(i),i=e.mallocInt32(v)),s.length<v&&(e.free(s),s=e.mallocInt32(v)),y.length<v&&(e.free(y),y=e.mallocInt32(v)),d.length<v&&(e.free(d),d=e.mallocInt32(v)),p.length<v&&(e.free(p),p=e.mallocInt32(v));var C=8*v;c.length<C&&(e.free(c),c=e.mallocDouble(C))}function l(b,v,C,S){var k=v[S],E=b[C-1];b[k]=E,v[E]=k}function x(b,v,C,S){b[C]=S,v[S]=C}function u(b,v,C,S,k,E,F,I,D,R){for(var O=0,z=2*b,B=b-1,G=z-1,Q=C;Q<S;++Q){var X=E[Q],j=z*Q;c[O++]=k[j+B],c[O++]=-(X+1),c[O++]=k[j+G],c[O++]=X}for(var Q=F;Q<I;++Q){var X=R[Q]+r,re=z*Q;c[O++]=D[re+B],c[O++]=-X,c[O++]=D[re+G],c[O++]=X}var ue=O>>>1;n(c,ue);for(var K=0,te=0,Q=0;Q<ue;++Q){var Y=c[2*Q+1]|0;if(Y>=r)Y=Y-r|0,l(s,y,te--,Y);else if(Y>=0)l(h,i,K--,Y);else if(Y<=-r){Y=-Y-r|0;for(var V=0;V<K;++V){var ee=v(h[V],Y);if(ee!==void 0)return ee}x(s,y,te++,Y)}else{Y=-Y-1|0;for(var V=0;V<te;++V){var ee=v(Y,s[V]);if(ee!==void 0)return ee}x(h,i,K++,Y)}}}function A(b,v,C,S,k,E,F,I,D,R){for(var O=0,z=2*b,B=b-1,G=z-1,Q=C;Q<S;++Q){var X=E[Q]+1<<1,j=z*Q;c[O++]=k[j+B],c[O++]=-X,c[O++]=k[j+G],c[O++]=X}for(var Q=F;Q<I;++Q){var X=R[Q]+1<<1,re=z*Q;c[O++]=D[re+B],c[O++]=-X|1,c[O++]=D[re+G],c[O++]=X|1}var ue=O>>>1;n(c,ue);for(var K=0,te=0,Y=0,Q=0;Q<ue;++Q){var V=c[2*Q+1]|0,ee=V&1;if(Q<ue-1&&V>>1===c[2*Q+3]>>1&&(ee=2,Q+=1),V<0){for(var ne=-(V>>1)-1,Z=0;Z<Y;++Z){var q=v(d[Z],ne);if(q!==void 0)return q}if(ee!==0)for(var Z=0;Z<K;++Z){var q=v(h[Z],ne);if(q!==void 0)return q}if(ee!==1)for(var Z=0;Z<te;++Z){var q=v(s[Z],ne);if(q!==void 0)return q}ee===0?x(h,i,K++,ne):ee===1?x(s,y,te++,ne):ee===2&&x(d,p,Y++,ne)}else{var ne=(V>>1)-1;ee===0?l(h,i,K--,ne):ee===1?l(s,y,te--,ne):ee===2&&l(d,p,Y--,ne)}}}function _(b,v,C,S,k,E,F,I,D,R,O,z){var B=0,G=2*b,Q=v,X=v+b,j=1,re=1;S?re=r:j=r;for(var ue=k;ue<E;++ue){var K=ue+j,te=G*ue;c[B++]=F[te+Q],c[B++]=-K,c[B++]=F[te+X],c[B++]=K}for(var ue=D;ue<R;++ue){var K=ue+re,Y=G*ue;c[B++]=O[Y+Q],c[B++]=-K}var V=B>>>1;n(c,V);for(var ee=0,ue=0;ue<V;++ue){var ne=c[2*ue+1]|0;if(ne<0){var K=-ne,Z=!1;if(K>=r?(Z=!S,K-=r):(Z=!!S,K-=1),Z)x(h,i,ee++,K);else{var q=z[K],ie=G*K,se=O[ie+v+1],ae=O[ie+v+1+b];e:for(var oe=0;oe<ee;++oe){var be=h[oe],ce=G*be;if(!(ae<F[ce+v+1]||F[ce+v+1+b]<se)){for(var de=v+2;de<b;++de)if(O[ie+de+b]<F[ce+de]||F[ce+de+b]<O[ie+de])continue e;var ye=I[be],ge;if(S?ge=C(q,ye):ge=C(ye,q),ge!==void 0)return ge}}}}else l(h,i,ee--,ne-j)}}function g(b,v,C,S,k,E,F,I,D,R,O){for(var z=0,B=2*b,G=v,Q=v+b,X=S;X<k;++X){var j=X+r,re=B*X;c[z++]=E[re+G],c[z++]=-j,c[z++]=E[re+Q],c[z++]=j}for(var X=I;X<D;++X){var j=X+1,ue=B*X;c[z++]=R[ue+G],c[z++]=-j}var K=z>>>1;n(c,K);for(var te=0,X=0;X<K;++X){var Y=c[2*X+1]|0;if(Y<0){var j=-Y;if(j>=r)h[te++]=j-r;else{j-=1;var V=O[j],ee=B*j,ne=R[ee+v+1],Z=R[ee+v+1+b];e:for(var q=0;q<te;++q){var ie=h[q],se=F[ie];if(se===V)break;var ae=B*ie;if(!(Z<E[ae+v+1]||E[ae+v+1+b]<ne)){for(var oe=v+2;oe<b;++oe)if(R[ee+oe+b]<E[ae+oe]||E[ae+oe+b]<R[ee+oe])continue e;var be=C(se,V);if(be!==void 0)return be}}}}else{for(var j=Y-r,q=te-1;q>=0;--q)if(h[q]===j){for(var oe=q+1;oe<te;++oe)h[oe-1]=h[oe];break}--te}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(f,M,T){var e=f("./lib/monotone"),a=f("./lib/triangulation"),n=f("./lib/delaunay"),r=f("./lib/filter");M.exports=y;function t(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function h(d,p){return d[0]-p[0]||d[1]-p[1]}function i(d){return d.map(t).sort(h)}function s(d,p,c){return p in d?d[p]:c}function y(d,p,c){Array.isArray(p)?(c=c||{},p=p||[]):(c=p||{},p=[]);var m=!!s(c,"delaunay",!0),l=!!s(c,"interior",!0),x=!!s(c,"exterior",!0),u=!!s(c,"infinity",!1);if(!l&&!x||d.length===0)return[];var A=e(d,p);if(m||l!==x||u){for(var _=a(d.length,i(p)),g=0;g<A.length;++g){var b=A[g];_.addTriangle(b[0],b[1],b[2])}return m&&n(d,_),x?l?u?r(_,0,u):_.cells():r(_,1,u):r(_,-1)}else return A}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(f,M,T){var e=f("robust-in-sphere")[4];f("binary-search-bounds"),M.exports=n;function a(r,t,h,i,s,y){var d=t.opposite(i,s);if(!(d<0)){if(s<i){var p=i;i=s,s=p,p=y,y=d,d=p}t.isConstraint(i,s)||e(r[i],r[s],r[y],r[d])<0&&h.push(i,s)}}function n(r,t){for(var h=[],i=r.length,s=t.stars,y=0;y<i;++y)for(var d=s[y],p=1;p<d.length;p+=2){var c=d[p];if(!(c<y)&&!t.isConstraint(y,c)){for(var m=d[p-1],l=-1,x=1;x<d.length;x+=2)if(d[x-1]===c){l=d[x];break}l<0||e(r[y],r[c],r[m],r[l])<0&&h.push(y,c)}}for(;h.length>0;){for(var c=h.pop(),y=h.pop(),m=-1,l=-1,d=s[y],u=1;u<d.length;u+=2){var A=d[u-1],_=d[u];A===c?l=_:_===c&&(m=A)}m<0||l<0||e(r[y],r[c],r[m],r[l])>=0||(t.flip(y,c),a(r,t,h,m,y,l),a(r,t,h,y,l,m),a(r,t,h,l,c,m),a(r,t,h,c,m,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(f,M,T){var e=f("binary-search-bounds");M.exports=i;function a(s,y,d,p,c,m,l){this.cells=s,this.neighbor=y,this.flags=p,this.constraint=d,this.active=c,this.next=m,this.boundary=l}var n=a.prototype;function r(s,y){return s[0]-y[0]||s[1]-y[1]||s[2]-y[2]}n.locate=function(){var s=[0,0,0];return function(y,d,p){var c=y,m=d,l=p;return d<p?d<y&&(c=d,m=p,l=y):p<y&&(c=p,m=y,l=d),c<0?-1:(s[0]=c,s[1]=m,s[2]=l,e.eq(this.cells,s,r))}}();function t(s,y){for(var d=s.cells(),p=d.length,c=0;c<p;++c){var m=d[c],l=m[0],x=m[1],u=m[2];x<u?x<l&&(m[0]=x,m[1]=u,m[2]=l):u<l&&(m[0]=u,m[1]=l,m[2]=x)}d.sort(r);for(var A=new Array(p),c=0;c<A.length;++c)A[c]=0;var _=[],g=[],b=new Array(3*p),v=new Array(3*p),C=null;y&&(C=[]);for(var S=new a(d,b,v,A,_,g,C),c=0;c<p;++c)for(var m=d[c],k=0;k<3;++k){var l=m[k],x=m[(k+1)%3],E=b[3*c+k]=S.locate(x,l,s.opposite(x,l)),F=v[3*c+k]=s.isConstraint(l,x);E<0&&(F?g.push(c):(_.push(c),A[c]=1),y&&C.push([x,l,-1]))}return S}function h(s,y,d){for(var p=0,c=0;c<s.length;++c)y[c]===d&&(s[p++]=s[c]);return s.length=p,s}function i(s,y,d){var p=t(s,d);if(y===0)return d?p.cells.concat(p.boundary):p.cells;for(var c=1,m=p.active,l=p.next,x=p.flags,u=p.cells,A=p.constraint,_=p.neighbor;m.length>0||l.length>0;){for(;m.length>0;){var g=m.pop();if(x[g]!==-c){x[g]=c,u[g];for(var b=0;b<3;++b){var v=_[3*g+b];v>=0&&x[v]===0&&(A[3*g+b]?l.push(v):(m.push(v),x[v]=c))}}}var C=l;l=m,m=C,l.length=0,c=-c}var S=h(u,x,y);return d?S.concat(p.boundary):S}},{"binary-search-bounds":31}],45:[function(f,M,T){var e=f("binary-search-bounds"),a=f("robust-orientation")[3],n=0,r=1,t=2;M.exports=l;function h(x,u,A,_,g){this.a=x,this.b=u,this.idx=A,this.lowerIds=_,this.upperIds=g}function i(x,u,A,_){this.a=x,this.b=u,this.type=A,this.idx=_}function s(x,u){var A=x.a[0]-u.a[0]||x.a[1]-u.a[1]||x.type-u.type;return A||x.type!==n&&(A=a(x.a,x.b,u.b),A)?A:x.idx-u.idx}function y(x,u){return a(x.a,x.b,u)}function d(x,u,A,_,g){for(var b=e.lt(u,_,y),v=e.gt(u,_,y),C=b;C<v;++C){for(var S=u[C],k=S.lowerIds,F=k.length;F>1&&a(A[k[F-2]],A[k[F-1]],_)>0;)x.push([k[F-1],k[F-2],g]),F-=1;k.length=F,k.push(g);for(var E=S.upperIds,F=E.length;F>1&&a(A[E[F-2]],A[E[F-1]],_)<0;)x.push([E[F-2],E[F-1],g]),F-=1;E.length=F,E.push(g)}}function p(x,u){var A;return x.a[0]<u.a[0]?A=a(x.a,x.b,u.a):A=a(u.b,u.a,x.a),A||(u.b[0]<x.b[0]?A=a(x.a,x.b,u.b):A=a(u.b,u.a,x.b),A||x.idx-u.idx)}function c(x,u,A){var _=e.le(x,A,p),g=x[_],b=g.upperIds,v=b[b.length-1];g.upperIds=[v],x.splice(_+1,0,new h(A.a,A.b,A.idx,[v],b))}function m(x,u,A){var _=A.a;A.a=A.b,A.b=_;var g=e.eq(x,A,p),b=x[g],v=x[g-1];v.upperIds=b.upperIds,x.splice(g,1)}function l(x,u){for(var A=x.length,_=u.length,g=[],b=0;b<A;++b)g.push(new i(x[b],null,n,b));for(var b=0;b<_;++b){var v=u[b],C=x[v[0]],S=x[v[1]];C[0]<S[0]?g.push(new i(C,S,t,b),new i(S,C,r,b)):C[0]>S[0]&&g.push(new i(S,C,t,b),new i(C,S,r,b))}g.sort(s);for(var k=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52),E=[new h([k,1],[k,0],-1,[],[])],F=[],b=0,I=g.length;b<I;++b){var D=g[b],R=D.type;R===n?d(F,E,x,D.a,D.idx):R===t?c(E,x,D):m(E,x,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(f,M,T){var e=f("binary-search-bounds");M.exports=t;function a(h,i){this.stars=h,this.edges=i}var n=a.prototype;function r(h,i,s){for(var y=1,d=h.length;y<d;y+=2)if(h[y-1]===i&&h[y]===s){h[y-1]=h[d-2],h[y]=h[d-1],h.length=d-2;return}}n.isConstraint=function(){var h=[0,0];function i(s,y){return s[0]-y[0]||s[1]-y[1]}return function(s,y){return h[0]=Math.min(s,y),h[1]=Math.max(s,y),e.eq(this.edges,h,i)>=0}}(),n.removeTriangle=function(h,i,s){var y=this.stars;r(y[h],i,s),r(y[i],s,h),r(y[s],h,i)},n.addTriangle=function(h,i,s){var y=this.stars;y[h].push(i,s),y[i].push(s,h),y[s].push(h,i)},n.opposite=function(h,i){for(var s=this.stars[i],y=1,d=s.length;y<d;y+=2)if(s[y]===h)return s[y-1];return-1},n.flip=function(h,i){var s=this.opposite(h,i),y=this.opposite(i,h);this.removeTriangle(h,i,s),this.removeTriangle(i,h,y),this.addTriangle(h,y,s),this.addTriangle(i,s,y)},n.edges=function(){for(var h=this.stars,i=[],s=0,y=h.length;s<y;++s)for(var d=h[s],p=0,c=d.length;p<c;p+=2)i.push([d[p],d[p+1]]);return i},n.cells=function(){for(var h=this.stars,i=[],s=0,y=h.length;s<y;++s)for(var d=h[s],p=0,c=d.length;p<c;p+=2){var m=d[p],l=d[p+1];s<Math.min(m,l)&&i.push([s,m,l])}return i};function t(h,i){for(var s=new Array(h),y=0;y<h;++y)s[y]=[];return new a(s,i)}},{"binary-search-bounds":31}],47:[function(f,M,T){M.exports=e;function e(a){for(var n=1,r=1;r<a.length;++r)for(var t=0;t<r;++t)if(a[r]<a[t])n=-n;else if(a[t]===a[r])return 0;return n}},{}],48:[function(f,M,T){var e=f("dup"),a=f("robust-linear-solve");function n(h,i){for(var s=0,y=h.length,d=0;d<y;++d)s+=h[d]*i[d];return s}function r(h){var i=h.length;if(i===0)return[];h[0].length;var s=e([h.length+1,h.length+1],1),y=e([h.length+1],1);s[i][i]=0;for(var d=0;d<i;++d){for(var p=0;p<=d;++p)s[p][d]=s[d][p]=2*n(h[d],h[p]);y[d]=n(h[d],h[d])}for(var c=a(s,y),m=0,l=c[i+1],d=0;d<l.length;++d)m+=l[d];for(var x=new Array(i),d=0;d<i;++d){for(var l=c[d],u=0,p=0;p<l.length;++p)u+=l[p];x[d]=u/m}return x}function t(h){if(h.length===0)return[];for(var i=h[0].length,s=e([i]),y=r(h),d=0;d<h.length;++d)for(var p=0;p<i;++p)s[p]+=h[d][p]*y[d];return s}t.barycenetric=r,M.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(f,M,T){M.exports=a;var e=f("circumcenter");function a(n){for(var r=e(n),t=0,h=0;h<n.length;++h)for(var i=n[h],s=0;s<r.length;++s)t+=Math.pow(i[s]-r[s],2);return Math.sqrt(t/n.length)}},{circumcenter:48}],50:[function(f,M,T){M.exports=C;var e=f("union-find"),a=f("box-intersect"),n=f("robust-segment-intersect"),r=f("big-rat"),t=f("big-rat/cmp"),h=f("big-rat/to-float"),i=f("rat-vec"),s=f("nextafter"),y=f("./lib/rat-seg-intersect");function d(S){var k=h(S);return[s(k,-1/0),s(k,1/0)]}function p(S,k){for(var E=new Array(k.length),F=0;F<k.length;++F){var I=k[F],D=S[I[0]],R=S[I[1]];E[F]=[s(Math.min(D[0],R[0]),-1/0),s(Math.min(D[1],R[1]),-1/0),s(Math.max(D[0],R[0]),1/0),s(Math.max(D[1],R[1]),1/0)]}return E}function c(S){for(var k=new Array(S.length),E=0;E<S.length;++E){var F=S[E];k[E]=[s(F[0],-1/0),s(F[1],-1/0),s(F[0],1/0),s(F[1],1/0)]}return k}function m(S,k,E){var F=[];return a(E,function(I,D){var R=k[I],O=k[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var z=S[R[0]],B=S[R[1]],G=S[O[0]],Q=S[O[1]];n(z,B,G,Q)&&F.push([I,D])}}),F}function l(S,k,E,F){var I=[];return a(E,F,function(D,R){var O=k[D];if(!(O[0]===R||O[1]===R)){var z=S[R],B=S[O[0]],G=S[O[1]];n(B,G,z,z)&&I.push([D,R])}}),I}function x(S,k,E,F,I){var D,R,O=S.map(function(ie){return[r(ie[0]),r(ie[1])]});for(D=0;D<E.length;++D){var z=E[D];R=z[0];var B=z[1],G=k[R],Q=k[B],X=y(i(S[G[0]]),i(S[G[1]]),i(S[Q[0]]),i(S[Q[1]]));if(!!X){var j=S.length;S.push([h(X[0]),h(X[1])]),O.push(X),F.push([R,j],[B,j])}}for(F.sort(function(ie,se){if(ie[0]!==se[0])return ie[0]-se[0];var ae=O[ie[1]],oe=O[se[1]];return t(ae[0],oe[0])||t(ae[1],oe[1])}),D=F.length-1;D>=0;--D){var re=F[D];R=re[0];var ue=k[R],K=ue[0],te=ue[1],Y=S[K],V=S[te];if((Y[0]-V[0]||Y[1]-V[1])<0){var ee=K;K=te,te=ee}ue[0]=K;var ne=ue[1]=re[1],Z;for(I&&(Z=ue[2]);D>0&&F[D-1][0]===R;){var re=F[--D],q=re[1];I?k.push([ne,q,Z]):k.push([ne,q]),ne=q}I?k.push([ne,te,Z]):k.push([ne,te])}return O}function u(S,k,E){for(var F=k.length,I=new e(F),D=[],R=0;R<k.length;++R){var O=k[R],z=d(O[0]),B=d(O[1]);D.push([s(z[0],-1/0),s(B[0],-1/0),s(z[1],1/0),s(B[1],1/0)])}a(D,function(re,ue){I.link(re,ue)});for(var G=!0,Q=new Array(F),R=0;R<F;++R){var X=I.find(R);X!==R&&(G=!1,S[X]=[Math.min(S[R][0],S[X][0]),Math.min(S[R][1],S[X][1])])}if(G)return null;for(var j=0,R=0;R<F;++R){var X=I.find(R);X===R?(Q[R]=j,S[j++]=S[R]):Q[R]=-1}S.length=j;for(var R=0;R<F;++R)Q[R]<0&&(Q[R]=Q[I.find(R)]);return Q}function A(S,k){return S[0]-k[0]||S[1]-k[1]}function _(S,k){var E=S[0]-k[0]||S[1]-k[1];return E||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function g(S,k,E){if(S.length!==0){if(k)for(var F=0;F<S.length;++F){var I=S[F],D=k[I[0]],R=k[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<S.length;++F){var I=S[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}E?S.sort(_):S.sort(A);for(var O=1,F=1;F<S.length;++F){var z=S[F-1],B=S[F];B[0]===z[0]&&B[1]===z[1]&&(!E||B[2]===z[2])||(S[O++]=B)}S.length=O}}function b(S,k,E){var F=u(S,[],c(S));return g(k,F,E),!!F}function v(S,k,E){var F=p(S,k),I=m(S,k,F),D=c(S),R=l(S,k,F,D),O=x(S,k,I,R,E),z=u(S,O);return g(k,z,E),z?!0:I.length>0||R.length>0}function C(S,k,E){var F;if(E){F=k;for(var I=new Array(k.length),D=0;D<k.length;++D){var R=k[D];I[D]=[R[0],R[1],E[D]]}k=I}for(var O=b(S,k,!!E);v(S,k,!!E);)O=!0;if(!!E&&O){F.length=0,E.length=0;for(var D=0;D<k.length;++D){var R=k[D];F.push([R[0],R[1]]),E.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(f,M,T){M.exports=y;var e=f("big-rat/mul"),a=f("big-rat/div"),n=f("big-rat/sub"),r=f("big-rat/sign"),t=f("rat-vec/sub"),h=f("rat-vec/add"),i=f("rat-vec/muls");function s(d,p){return n(e(d[0],p[1]),e(d[1],p[0]))}function y(d,p,c,m){var l=t(p,d),x=t(m,c),u=s(l,x);if(r(u)===0)return null;var A=t(d,c),_=s(x,A),g=a(_,u),b=i(l,g),v=h(d,b);return v}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(f,M,T){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(f,M,T){var e=f("./colorScale"),a=f("lerp");M.exports=n;function n(i){var s,y,d,p,c,m,l,x,g,u,A;if(i||(i={}),x=(i.nshades||72)-1,l=i.format||"hex",m=i.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!e[m])throw Error(m+" not a supported colorscale");c=e[m]}else if(Array.isArray(m))c=m.slice();else throw Error("unsupported colormap option",m);if(c.length>x+1)throw new Error(m+" map requires nshades to be at least size "+c.length);Array.isArray(i.alpha)?i.alpha.length!==2?u=[1,1]:u=i.alpha.slice():typeof i.alpha=="number"?u=[i.alpha,i.alpha]:u=[1,1],s=c.map(function(C){return Math.round(C.index*x)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var _=c.map(function(C,S){var k=c[S].index,E=c[S].rgb.slice();return E.length===4&&E[3]>=0&&E[3]<=1||(E[3]=u[0]+(u[1]-u[0])*k),E}),g=[];for(A=0;A<s.length-1;++A){p=s[A+1]-s[A],y=_[A],d=_[A+1];for(var b=0;b<p;b++){var v=b/p;g.push([Math.round(a(y[0],d[0],v)),Math.round(a(y[1],d[1],v)),Math.round(a(y[2],d[2],v)),a(y[3],d[3],v)])}}return g.push(c[c.length-1].rgb.concat(u[1])),l==="hex"?g=g.map(t):l==="rgbaString"?g=g.map(h):l==="float"&&(g=g.map(r)),g}function r(i){return[i[0]/255,i[1]/255,i[2]/255,i[3]]}function t(i){for(var s,y="#",d=0;d<3;++d)s=i[d],s=s.toString(16),y+=("00"+s).substr(s.length);return y}function h(i){return"rgba("+i.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(f,M,T){M.exports=i;var e=f("robust-orientation"),a=f("signum"),n=f("two-sum"),r=f("robust-product"),t=f("robust-sum");function h(s,y,d){var p=n(s[0],-y[0]),c=n(s[1],-y[1]),m=n(d[0],-y[0]),l=n(d[1],-y[1]),x=t(r(p,m),r(c,l));return x[x.length-1]>=0}function i(s,y,d,p){var c=e(y,d,p);if(c===0){var m=a(e(s,y,d)),l=a(e(s,y,p));if(m===l){if(m===0){var x=h(s,y,d),u=h(s,y,p);return x===u?0:x?1:-1}return 0}else{if(l===0)return m>0||h(s,y,p)?-1:1;if(m===0)return l>0||h(s,y,d)?1:-1}return a(l-m)}var A=e(s,y,d);if(A>0)return c>0&&e(s,y,p)>0?1:-1;if(A<0)return c>0||e(s,y,p)>0?1:-1;var _=e(s,y,p);return _>0||h(s,y,d)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(f,M,T){M.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(f,M,T){M.exports=n;var e=Math.min;function a(r,t){return r-t}function n(r,t){var h=r.length,i=r.length-t.length;if(i)return i;switch(h){case 0:return 0;case 1:return r[0]-t[0];case 2:return r[0]+r[1]-t[0]-t[1]||e(r[0],r[1])-e(t[0],t[1]);case 3:var s=r[0]+r[1],y=t[0]+t[1];if(i=s+r[2]-(y+t[2]),i)return i;var d=e(r[0],r[1]),p=e(t[0],t[1]);return e(d,r[2])-e(p,t[2])||e(d+r[2],s)-e(p+t[2],y);case 4:var c=r[0],m=r[1],l=r[2],x=r[3],u=t[0],A=t[1],_=t[2],g=t[3];return c+m+l+x-(u+A+_+g)||e(c,m,l,x)-e(u,A,_,g,u)||e(c+m,c+l,c+x,m+l,m+x,l+x)-e(u+A,u+_,u+g,A+_,A+g,_+g)||e(c+m+l,c+m+x,c+l+x,m+l+x)-e(u+A+_,u+A+g,u+_+g,A+_+g);default:for(var b=r.slice().sort(a),v=t.slice().sort(a),C=0;C<h;++C)if(i=b[C]-v[C],i)return i;return 0}}},{}],57:[function(f,M,T){var e=f("compare-cell"),a=f("cell-orientation");M.exports=n;function n(r,t){return e(r,t)||a(r)-a(t)}},{"cell-orientation":47,"compare-cell":56}],58:[function(f,M,T){var e=f("./lib/ch1d"),a=f("./lib/ch2d"),n=f("./lib/chnd");M.exports=r;function r(t){var h=t.length;if(h===0)return[];if(h===1)return[[0]];var i=t[0].length;return i===0?[]:i===1?e(t):i===2?a(t):n(t,i)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(f,M,T){M.exports=e;function e(a){for(var n=0,r=0,t=1;t<a.length;++t)a[t][0]<a[n][0]&&(n=t),a[t][0]>a[r][0]&&(r=t);return n<r?[[n],[r]]:n>r?[[r],[n]]:[[n]]}},{}],60:[function(f,M,T){M.exports=a;var e=f("monotone-convex-hull-2d");function a(n){var r=e(n),t=r.length;if(t<=2)return[];for(var h=new Array(t),i=r[t-1],s=0;s<t;++s){var y=r[s];h[s]=[i,y],i=y}return h}},{"monotone-convex-hull-2d":246}],61:[function(f,M,T){M.exports=t;var e=f("incremental-convex-hull"),a=f("affine-hull");function n(h,i){for(var s=h.length,y=new Array(s),d=0;d<i.length;++d)y[d]=h[i[d]];for(var p=i.length,d=0;d<s;++d)i.indexOf(d)<0&&(y[p++]=h[d]);return y}function r(h,i){for(var s=h.length,y=i.length,d=0;d<s;++d)for(var p=h[d],c=0;c<p.length;++c){var m=p[c];if(m<y)p[c]=i[m];else{m=m-y;for(var l=0;l<y;++l)m>=i[l]&&(m+=1);p[c]=m}}return h}function t(h,i){try{return e(h,!0)}catch{var s=a(h);if(s.length<=i)return[];var y=n(h,s),d=e(y,!0);return r(d,s)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(f,M,T){function e(n,r,t,h,i,s){var y=6*i*i-6*i,d=3*i*i-4*i+1,p=-6*i*i+6*i,c=3*i*i-2*i;if(n.length){s||(s=new Array(n.length));for(var m=n.length-1;m>=0;--m)s[m]=y*n[m]+d*r[m]+p*t[m]+c*h[m];return s}return y*n+d*r+p*t[m]+c*h}function a(n,r,t,h,i,s){var y=i-1,d=i*i,p=y*y,c=(1+2*i)*p,m=i*p,l=d*(3-2*i),x=d*y;if(n.length){s||(s=new Array(n.length));for(var u=n.length-1;u>=0;--u)s[u]=c*n[u]+m*r[u]+l*t[u]+x*h[u];return s}return c*n+m*r+l*t+x*h}M.exports=a,M.exports.derivative=e},{}],63:[function(f,M,T){var e=f("incremental-convex-hull"),a=f("uniq");M.exports=h;function n(i,s){this.point=i,this.index=s}function r(i,s){for(var y=i.point,d=s.point,p=y.length,c=0;c<p;++c){var m=d[c]-y[c];if(m)return m}return 0}function t(i,s,y){if(i===1)return y?[[-1,0]]:[];var d=s.map(function(x,u){return[x[0],u]});d.sort(function(x,u){return x[0]-u[0]});for(var p=new Array(i-1),c=1;c<i;++c){var m=d[c-1],l=d[c];p[c-1]=[m[1],l[1]]}return y&&p.push([-1,p[0][1]],[p[i-1][1],-1]),p}function h(i,s){var y=i.length;if(y===0)return[];var d=i[0].length;if(d<1)return[];if(d===1)return t(y,i,s);for(var p=new Array(y),c=1,m=0;m<y;++m){for(var l=i[m],x=new Array(d+1),u=0,A=0;A<d;++A){var _=l[A];x[A]=_,u+=_*_}x[d]=u,p[m]=new n(x,m),c=Math.max(u,c)}a(p,r),y=p.length;for(var g=new Array(y+d+1),b=new Array(y+d+1),v=(d+1)*(d+1)*c,C=new Array(d+1),m=0;m<=d;++m)C[m]=0;C[d]=v,g[0]=C.slice(),b[0]=-1;for(var m=0;m<=d;++m){var x=C.slice();x[m]=1,g[m+1]=x,b[m+1]=-1}for(var m=0;m<y;++m){var S=p[m];g[m+d+1]=S.point,b[m+d+1]=S.index}var k=e(g,!1);if(s?k=k.filter(function(E){for(var F=0,I=0;I<=d;++I){var D=b[E[I]];if(D<0&&++F>=2)return!1;E[I]=D}return!0}):k=k.filter(function(E){for(var F=0;F<=d;++F){var I=b[E[F]];if(I<0)return!1;E[F]=I}return!0}),d&1)for(var m=0;m<k.length;++m){var S=k[m],x=S[0];S[0]=S[1],S[1]=x}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(f,M,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),r=new Uint32Array(n.buffer);if(n[0]=1,a=!0,r[1]===1072693248){let h=function(y,d){return r[0]=y,r[1]=d,n[0]},i=function(y){return n[0]=y,r[0]},s=function(y){return n[0]=y,r[1]};M.exports=function(d){return n[0]=d,[r[0],r[1]]},M.exports.pack=h,M.exports.lo=i,M.exports.hi=s}else if(r[0]===1072693248){let h=function(y,d){return r[1]=y,r[0]=d,n[0]},i=function(y){return n[0]=y,r[1]},s=function(y){return n[0]=y,r[0]};M.exports=function(d){return n[0]=d,[r[1],r[0]]},M.exports.pack=h,M.exports.lo=i,M.exports.hi=s}else a=!1}if(!a){let h=function(y,d){return t.writeUInt32LE(y,0,!0),t.writeUInt32LE(d,4,!0),t.readDoubleLE(0,!0)},i=function(y){return t.writeDoubleLE(y,0,!0),t.readUInt32LE(0,!0)},s=function(y){return t.writeDoubleLE(y,0,!0),t.readUInt32LE(4,!0)};var t=new e(8);M.exports=function(d){return t.writeDoubleLE(d,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},M.exports.pack=h,M.exports.lo=i,M.exports.hi=s}M.exports.sign=function(h){return M.exports.hi(h)>>>31},M.exports.exponent=function(h){var i=M.exports.hi(h);return(i<<1>>>21)-1023},M.exports.fraction=function(h){var i=M.exports.lo(h),s=M.exports.hi(h),y=s&(1<<20)-1;return s&2146435072&&(y+=1<<20),[i,y]},M.exports.denormalized=function(h){var i=M.exports.hi(h);return!(i&2146435072)}}).call(this)}).call(this,f("buffer").Buffer)},{buffer:3}],65:[function(f,M,T){function e(r,t,h){var i=r[h]|0;if(i<=0)return[];var s=new Array(i),y;if(h===r.length-1)for(y=0;y<i;++y)s[y]=t;else for(y=0;y<i;++y)s[y]=e(r,t,h+1);return s}function a(r,t){var h,i;for(h=new Array(r),i=0;i<r;++i)h[i]=t;return h}function n(r,t){switch(typeof t>"u"&&(t=0),typeof r){case"number":if(r>0)return a(r|0,t);break;case"object":if(typeof r.length=="number")return e(r,t,0);break}return[]}M.exports=n},{}],66:[function(f,M,T){M.exports=a;var e=f("uniq");function a(n,r){var t=n.length;if(typeof r!="number"){r=0;for(var h=0;h<t;++h){var i=n[h];r=Math.max(r,i[0],i[1])}r=(r|0)+1}r=r|0;for(var s=new Array(r),h=0;h<r;++h)s[h]=[];for(var h=0;h<t;++h){var i=n[h];s[i[0]].push(i[1]),s[i[1]].push(i[0])}for(var y=0;y<r;++y)e(s[y],function(d,p){return d-p});return s}},{uniq:310}],67:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n||0,h=r||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[t*a[12]+a[8],t*a[13]+a[9],t*a[14]+a[10],t*a[15]+a[11]],[h*a[12]-a[8],h*a[13]-a[9],h*a[14]-a[10],h*a[15]-a[11]]]}},{}],68:[function(f,M,T){M.exports=i;var e=f("cubic-hermite"),a=f("binary-search-bounds");function n(s,y,d){return Math.min(y,Math.max(s,d))}function r(s,y,d){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=s.slice().reverse(),this._velocity=y.slice().reverse(),this._time=[d],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var t=r.prototype;t.flush=function(s){var y=a.gt(this._time,s)-1;y<=0||(this._time.splice(0,y),this._state.splice(0,y*this.dimension),this._velocity.splice(0,y*this.dimension))},t.curve=function(s){var y=this._time,d=y.length,p=a.le(y,s),c=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension,u=this.bounds;if(p<0)for(var A=x-1,_=0;_<x;++_,--A)c[_]=m[A];else if(p>=d-1)for(var A=m.length-1,g=s-y[d-1],_=0;_<x;++_,--A)c[_]=m[A]+g*l[A];else{for(var A=x*(p+1)-1,b=y[p],v=y[p+1],C=v-b||1,S=this._scratch[1],k=this._scratch[2],E=this._scratch[3],F=this._scratch[4],I=!0,_=0;_<x;++_,--A)S[_]=m[A],E[_]=l[A]*C,k[_]=m[A+x],F[_]=l[A+x]*C,I=I&&S[_]===k[_]&&E[_]===F[_]&&E[_]===0;if(I)for(var _=0;_<x;++_)c[_]=S[_];else e(S,E,k,F,(s-b)/C,c)}for(var D=u[0],R=u[1],_=0;_<x;++_)c[_]=n(D[_],R[_],c[_]);return c},t.dcurve=function(s){var y=this._time,d=y.length,p=a.le(y,s),c=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension;if(p>=d-1){var u=m.length-1;s-y[d-1];for(var A=0;A<x;++A,--u)c[A]=l[u]}else{for(var u=x*(p+1)-1,_=y[p],g=y[p+1],b=g-_||1,v=this._scratch[1],C=this._scratch[2],S=this._scratch[3],k=this._scratch[4],E=!0,A=0;A<x;++A,--u)v[A]=m[u],S[A]=l[u]*b,C[A]=m[u+x],k[A]=l[u+x]*b,E=E&&v[A]===C[A]&&S[A]===k[A]&&S[A]===0;if(E)for(var A=0;A<x;++A)c[A]=0;else{e.derivative(v,S,C,k,(s-_)/b,c);for(var A=0;A<x;++A)c[A]/=b}}return c},t.lastT=function(){var s=this._time;return s[s.length-1]},t.stable=function(){for(var s=this._velocity,y=s.length,d=this.dimension-1;d>=0;--d)if(s[--y])return!1;return!0},t.jump=function(s){var y=this.lastT(),d=this.dimension;if(!(s<y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=this.bounds,x=l[0],u=l[1];this._time.push(y,s);for(var A=0;A<2;++A)for(var _=0;_<d;++_)p.push(p[m++]),c.push(0);this._time.push(s);for(var _=d;_>0;--_)p.push(n(x[_-1],u[_-1],arguments[_])),c.push(0)}},t.push=function(s){var y=this.lastT(),d=this.dimension;if(!(s<y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=s-y,x=this.bounds,u=x[0],A=x[1],_=l>1e-6?1/l:0;this._time.push(s);for(var g=d;g>0;--g){var b=n(u[g-1],A[g-1],arguments[g]);p.push(b),c.push((b-p[m++])*_)}}},t.set=function(s){var y=this.dimension;if(!(s<this.lastT()||arguments.length!==y+1)){var d=this._state,p=this._velocity,c=this.bounds,m=c[0],l=c[1];this._time.push(s);for(var x=y;x>0;--x)d.push(n(m[x-1],l[x-1],arguments[x])),p.push(0)}},t.move=function(s){var y=this.lastT(),d=this.dimension;if(!(s<=y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=this.bounds,x=l[0],u=l[1],A=s-y,_=A>1e-6?1/A:0;this._time.push(s);for(var g=d;g>0;--g){var b=arguments[g];p.push(n(x[g-1],u[g-1],p[m++]+b)),c.push(b*_)}}},t.idle=function(s){var y=this.lastT();if(!(s<y)){var d=this.dimension,p=this._state,c=this._velocity,m=p.length-d,l=this.bounds,x=l[0],u=l[1],A=s-y;this._time.push(s);for(var _=d-1;_>=0;--_)p.push(n(x[_],u[_],p[m]+A*c[m])),c.push(0),m+=1}};function h(s){for(var y=new Array(s),d=0;d<s;++d)y[d]=0;return y}function i(s,y,d){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof s=="number"){var p=h(s);return new r(p,p,0)}else return new r(s,h(s.length),0);case 2:if(typeof y=="number"){var p=h(s.length);return new r(s,p,+y)}else d=0;case 3:if(s.length!==y.length)throw new Error("state and velocity lengths must match");return new r(s,y,d)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(f,M,T){M.exports=A;var e=0,a=1;function n(_,g,b,v,C,S){this._color=_,this.key=g,this.value=b,this.left=v,this.right=C,this._count=S}function r(_){return new n(_._color,_.key,_.value,_.left,_.right,_._count)}function t(_,g){return new n(_,g.key,g.value,g.left,g.right,g._count)}function h(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function i(_,g){this._compare=_,this.root=g}var s=i.prototype;Object.defineProperty(s,"keys",{get:function(){var _=[];return this.forEach(function(g,b){_.push(g)}),_}}),Object.defineProperty(s,"values",{get:function(){var _=[];return this.forEach(function(g,b){_.push(b)}),_}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(_,g){for(var b=this._compare,v=this.root,C=[],S=[];v;){var k=b(_,v.key);C.push(v),S.push(k),k<=0?v=v.left:v=v.right}C.push(new n(e,_,g,null,null,1));for(var E=C.length-2;E>=0;--E){var v=C[E];S[E]<=0?C[E]=new n(v._color,v.key,v.value,C[E+1],v.right,v._count+1):C[E]=new n(v._color,v.key,v.value,v.left,C[E+1],v._count+1)}for(var E=C.length-1;E>1;--E){var F=C[E-1],v=C[E];if(F._color===a||v._color===a)break;var I=C[E-2];if(I.left===F)if(F.left===v){var D=I.right;if(D&&D._color===e)F._color=a,I.right=t(a,D),I._color=e,E-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,C[E-2]=F,C[E-1]=v,h(I),h(F),E>=3){var R=C[E-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=t(a,D),I._color=e,E-=1;else{if(F.right=v.left,I._color=e,I.left=v.right,v._color=a,v.left=F,v.right=I,C[E-2]=v,C[E-1]=F,h(I),h(F),h(v),E>=3){var R=C[E-3];R.left===I?R.left=v:R.right=v}break}}else if(F.right===v){var D=I.left;if(D&&D._color===e)F._color=a,I.left=t(a,D),I._color=e,E-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,C[E-2]=F,C[E-1]=v,h(I),h(F),E>=3){var R=C[E-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=t(a,D),I._color=e,E-=1;else{if(F.left=v.right,I._color=e,I.right=v.left,v._color=a,v.right=F,v.left=I,C[E-2]=v,C[E-1]=F,h(I),h(F),h(v),E>=3){var R=C[E-3];R.right===I?R.right=v:R.left=v}break}}}return C[0]._color=a,new i(b,C[0])};function y(_,g){if(g.left){var b=y(_,g.left);if(b)return b}var b=_(g.key,g.value);if(b)return b;if(g.right)return y(_,g.right)}function d(_,g,b,v){var C=g(_,v.key);if(C<=0){if(v.left){var S=d(_,g,b,v.left);if(S)return S}var S=b(v.key,v.value);if(S)return S}if(v.right)return d(_,g,b,v.right)}function p(_,g,b,v,C){var S=b(_,C.key),k=b(g,C.key),E;if(S<=0&&(C.left&&(E=p(_,g,b,v,C.left),E)||k>0&&(E=v(C.key,C.value),E)))return E;if(k>0&&C.right)return p(_,g,b,v,C.right)}s.forEach=function(g,b,v){if(!!this.root)switch(arguments.length){case 1:return y(g,this.root);case 2:return d(b,this._compare,g,this.root);case 3:return this._compare(b,v)>=0?void 0:p(b,v,this._compare,g,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var _=[],g=this.root;g;)_.push(g),g=g.left;return new c(this,_)}}),Object.defineProperty(s,"end",{get:function(){for(var _=[],g=this.root;g;)_.push(g),g=g.right;return new c(this,_)}}),s.at=function(_){if(_<0)return new c(this,[]);for(var g=this.root,b=[];;){if(b.push(g),g.left){if(_<g.left._count){g=g.left;continue}_-=g.left._count}if(!_)return new c(this,b);if(_-=1,g.right){if(_>=g.right._count)break;g=g.right}else break}return new c(this,[])},s.ge=function(_){for(var g=this._compare,b=this.root,v=[],C=0;b;){var S=g(_,b.key);v.push(b),S<=0&&(C=v.length),S<=0?b=b.left:b=b.right}return v.length=C,new c(this,v)},s.gt=function(_){for(var g=this._compare,b=this.root,v=[],C=0;b;){var S=g(_,b.key);v.push(b),S<0&&(C=v.length),S<0?b=b.left:b=b.right}return v.length=C,new c(this,v)},s.lt=function(_){for(var g=this._compare,b=this.root,v=[],C=0;b;){var S=g(_,b.key);v.push(b),S>0&&(C=v.length),S<=0?b=b.left:b=b.right}return v.length=C,new c(this,v)},s.le=function(_){for(var g=this._compare,b=this.root,v=[],C=0;b;){var S=g(_,b.key);v.push(b),S>=0&&(C=v.length),S<0?b=b.left:b=b.right}return v.length=C,new c(this,v)},s.find=function(_){for(var g=this._compare,b=this.root,v=[];b;){var C=g(_,b.key);if(v.push(b),C===0)return new c(this,v);C<=0?b=b.left:b=b.right}return new c(this,[])},s.remove=function(_){var g=this.find(_);return g?g.remove():this},s.get=function(_){for(var g=this._compare,b=this.root;b;){var v=g(_,b.key);if(v===0)return b.value;v<=0?b=b.left:b=b.right}};function c(_,g){this.tree=_,this._stack=g}var m=c.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new c(this.tree,this._stack.slice())};function l(_,g){_.key=g.key,_.value=g.value,_.left=g.left,_.right=g.right,_._color=g._color,_._count=g._count}function x(_){for(var g,b,v,C,S=_.length-1;S>=0;--S){if(g=_[S],S===0){g._color=a;return}if(b=_[S-1],b.left===g){if(v=b.right,v.right&&v.right._color===e){if(v=b.right=r(v),C=v.right=r(v.right),b.right=v.left,v.left=b,v.right=C,v._color=b._color,g._color=a,b._color=a,C._color=a,h(b),h(v),S>1){var k=_[S-2];k.left===b?k.left=v:k.right=v}_[S-1]=v;return}else if(v.left&&v.left._color===e){if(v=b.right=r(v),C=v.left=r(v.left),b.right=C.left,v.left=C.right,C.left=b,C.right=v,C._color=b._color,b._color=a,v._color=a,g._color=a,h(b),h(v),h(C),S>1){var k=_[S-2];k.left===b?k.left=C:k.right=C}_[S-1]=C;return}if(v._color===a)if(b._color===e){b._color=a,b.right=t(e,v);return}else{b.right=t(e,v);continue}else{if(v=r(v),b.right=v.left,v.left=b,v._color=b._color,b._color=e,h(b),h(v),S>1){var k=_[S-2];k.left===b?k.left=v:k.right=v}_[S-1]=v,_[S]=b,S+1<_.length?_[S+1]=g:_.push(g),S=S+2}}else{if(v=b.left,v.left&&v.left._color===e){if(v=b.left=r(v),C=v.left=r(v.left),b.left=v.right,v.right=b,v.left=C,v._color=b._color,g._color=a,b._color=a,C._color=a,h(b),h(v),S>1){var k=_[S-2];k.right===b?k.right=v:k.left=v}_[S-1]=v;return}else if(v.right&&v.right._color===e){if(v=b.left=r(v),C=v.right=r(v.right),b.left=C.right,v.right=C.left,C.right=b,C.left=v,C._color=b._color,b._color=a,v._color=a,g._color=a,h(b),h(v),h(C),S>1){var k=_[S-2];k.right===b?k.right=C:k.left=C}_[S-1]=C;return}if(v._color===a)if(b._color===e){b._color=a,b.left=t(e,v);return}else{b.left=t(e,v);continue}else{if(v=r(v),b.left=v.right,v.right=b,v._color=b._color,b._color=e,h(b),h(v),S>1){var k=_[S-2];k.right===b?k.right=v:k.left=v}_[S-1]=v,_[S]=b,S+1<_.length?_[S+1]=g:_.push(g),S=S+2}}}}m.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var g=new Array(_.length),b=_[_.length-1];g[g.length-1]=new n(b._color,b.key,b.value,b.left,b.right,b._count);for(var v=_.length-2;v>=0;--v){var b=_[v];b.left===_[v+1]?g[v]=new n(b._color,b.key,b.value,g[v+1],b.right,b._count):g[v]=new n(b._color,b.key,b.value,b.left,g[v+1],b._count)}if(b=g[g.length-1],b.left&&b.right){var C=g.length;for(b=b.left;b.right;)g.push(b),b=b.right;var S=g[C-1];g.push(new n(b._color,S.key,S.value,b.left,b.right,b._count)),g[C-1].key=b.key,g[C-1].value=b.value;for(var v=g.length-2;v>=C;--v)b=g[v],g[v]=new n(b._color,b.key,b.value,b.left,g[v+1],b._count);g[C-1].left=g[C]}if(b=g[g.length-1],b._color===e){var k=g[g.length-2];k.left===b?k.left=null:k.right===b&&(k.right=null),g.pop();for(var v=0;v<g.length;++v)g[v]._count--;return new i(this.tree._compare,g[0])}else if(b.left||b.right){b.left?l(b,b.left):b.right&&l(b,b.right),b._color=a;for(var v=0;v<g.length-1;++v)g[v]._count--;return new i(this.tree._compare,g[0])}else{if(g.length===1)return new i(this.tree._compare,null);for(var v=0;v<g.length;++v)g[v]._count--;var E=g[g.length-2];x(g),E.left===b?E.left=null:E.right=null}return new i(this.tree._compare,g[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var _=0,g=this._stack;if(g.length===0){var b=this.tree.root;return b?b._count:0}else g[g.length-1].left&&(_=g[g.length-1].left._count);for(var v=g.length-2;v>=0;--v)g[v+1]===g[v].right&&(++_,g[v].left&&(_+=g[v].left._count));return _},enumerable:!0}),m.next=function(){var _=this._stack;if(_.length!==0){var g=_[_.length-1];if(g.right)for(g=g.right;g;)_.push(g),g=g.left;else for(_.pop();_.length>0&&_[_.length-1].right===g;)g=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var g=_.length-1;g>0;--g)if(_[g-1].left===_[g])return!0;return!1}}),m.update=function(_){var g=this._stack;if(g.length===0)throw new Error("Can't update empty node!");var b=new Array(g.length),v=g[g.length-1];b[b.length-1]=new n(v._color,v.key,_,v.left,v.right,v._count);for(var C=g.length-2;C>=0;--C)v=g[C],v.left===g[C+1]?b[C]=new n(v._color,v.key,v.value,b[C+1],v.right,v._count):b[C]=new n(v._color,v.key,v.value,v.left,b[C+1],v._count);return new i(this.tree._compare,b[0])},m.prev=function(){var _=this._stack;if(_.length!==0){var g=_[_.length-1];if(g.left)for(g=g.left;g;)_.push(g),g=g.right;else for(_.pop();_.length>0&&_[_.length-1].left===g;)g=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var g=_.length-1;g>0;--g)if(_[g-1].right===_[g])return!0;return!1}});function u(_,g){return _<g?-1:_>g?1:0}function A(_){return new i(_||u,null)}},{}],70:[function(f,M,T){M.exports=g;var e=f("./lib/text.js"),a=f("./lib/lines.js"),n=f("./lib/background.js"),r=f("./lib/cube.js"),t=f("./lib/ticks.js"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function i(b,v){return b[0]=v[0],b[1]=v[1],b[2]=v[2],b}function s(b){this.gl=b,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(b)}var y=s.prototype;y.update=function(b){b=b||{};function v(G,Q,X){if(X in b){var j=b[X],re=this[X],ue;(G?Array.isArray(j)&&Array.isArray(j[0]):Array.isArray(j))?this[X]=ue=[Q(j[0]),Q(j[1]),Q(j[2])]:this[X]=ue=[Q(j),Q(j),Q(j)];for(var K=0;K<3;++K)if(ue[K]!==re[K])return!0}return!1}var C=v.bind(this,!1,Number),S=v.bind(this,!1,Boolean),k=v.bind(this,!1,String),E=v.bind(this,!0,function(G){if(Array.isArray(G)){if(G.length===3)return[+G[0],+G[1],+G[2],1];if(G.length===4)return[+G[0],+G[1],+G[2],+G[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in b)for(var R=b.bounds,O=0;O<2;++O)for(var z=0;z<3;++z)R[O][z]!==this.bounds[O][z]&&(D=!0),this.bounds[O][z]=R[O][z];if("ticks"in b){F=b.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else C("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=t.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)F[O].sort(function(Q,X){return Q.x-X.x});t.equal(F,this.ticks)?I=!1:this.ticks=F}S("tickEnable"),k("tickFont")&&(I=!0),C("tickSize"),C("tickAngle"),C("tickPad"),E("tickColor");var B=k("labels");k("labelFont")&&(B=!0),S("labelEnable"),C("labelSize"),C("labelPad"),E("labelColor"),S("lineEnable"),S("lineMirror"),C("lineWidth"),E("lineColor"),S("lineTickEnable"),S("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),E("lineTickColor"),S("gridEnable"),C("gridWidth"),E("gridColor"),S("zeroEnable"),E("zeroLineColor"),C("zeroLineWidth"),S("backgroundEnable"),E("backgroundColor"),this._text?this._text&&(B||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var p=[new d,new d,new d];function c(b,v,C,S,k){for(var E=b.primalOffset,F=b.primalMinor,I=b.mirrorOffset,D=b.mirrorMinor,R=S[v],O=0;O<3;++O)if(v!==O){var z=E,B=I,G=F,Q=D;R&1<<O&&(z=I,B=E,G=D,Q=F),z[O]=C[0][O],B[O]=C[1][O],k[O]>0?(G[O]=-1,Q[O]=0):(G[O]=0,Q[O]=1)}}var m=[0,0,0],l={model:h,view:h,projection:h,_ortho:!1};y.isOpaque=function(){return!0},y.isTransparent=function(){return!1},y.drawTransparent=function(b){};var x=0,u=[0,0,0],A=[0,0,0],_=[0,0,0];y.draw=function(b){b=b||l;for(var re=this.gl,v=b.model||h,C=b.view||h,S=b.projection||h,k=this.bounds,E=b._ortho||!1,F=r(v,C,S,k,E),I=F.cubeEdges,D=F.axis,R=C[12],O=C[13],z=C[14],B=C[15],G=E?2:1,Q=G*this.pixelRatio*(S[3]*R+S[7]*O+S[11]*z+S[15]*B)/re.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=I[X],this.lastCubeProps.axis[X]=D[X];for(var j=p,X=0;X<3;++X)c(p[X],X,this.bounds,I,D);for(var re=this.gl,ue=m,X=0;X<3;++X)this.backgroundEnable[X]?ue[X]=D[X]:ue[X]=0;this._background.draw(v,C,S,k,ue,this.backgroundColor),this._lines.bind(v,C,S,this);for(var X=0;X<3;++X){var K=[0,0,0];D[X]>0?K[X]=k[1][X]:K[X]=k[0][X];for(var te=0;te<2;++te){var Y=(X+1+te)%3,V=(X+1+(te^1))%3;this.gridEnable[Y]&&this._lines.drawGrid(Y,V,this.bounds,K,this.gridColor[Y],this.gridWidth[Y]*this.pixelRatio)}for(var te=0;te<2;++te){var Y=(X+1+te)%3,V=(X+1+(te^1))%3;this.zeroEnable[V]&&Math.min(k[0][V],k[1][V])<=0&&Math.max(k[0][V],k[1][V])>=0&&this._lines.drawZero(Y,V,this.bounds,K,this.zeroLineColor[V],this.zeroLineWidth[V]*this.pixelRatio)}}for(var X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,j[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,j[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);for(var ee=i(u,j[X].primalMinor),ne=i(A,j[X].mirrorMinor),Z=this.lineTickLength,te=0;te<3;++te){var q=Q/v[5*te];ee[te]*=Z[te]*q,ne[te]*=Z[te]*q}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,j[X].primalOffset,ee,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,j[X].mirrorOffset,ne,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}this._lines.unbind(),this._text.bind(v,C,S,this.pixelRatio);var ie,se=.5,ae,oe;function be(Me){oe=[0,0,0],oe[Me]=1}function ce(Me,Le,Oe){var _e=(Me+1)%3,Ee=(Me+2)%3,Ze=Le[_e],Ge=Le[Ee],Fe=Oe[_e],Re=Oe[Ee];if(Ze>0&&Re>0){be(_e);return}else if(Ze>0&&Re<0){be(_e);return}else if(Ze<0&&Re>0){be(_e);return}else if(Ze<0&&Re<0){be(_e);return}else if(Ge>0&&Fe>0){be(Ee);return}else if(Ge>0&&Fe<0){be(Ee);return}else if(Ge<0&&Fe>0){be(Ee);return}else if(Ge<0&&Fe<0){be(Ee);return}}for(var X=0;X<3;++X){for(var de=j[X].primalMinor,ye=j[X].mirrorMinor,ge=i(_,j[X].primalOffset),te=0;te<3;++te)this.lineTickEnable[X]&&(ge[te]+=Q*de[te]*Math.max(this.lineTickLength[te],0)/v[5*te]);var me=[0,0,0];if(me[X]=1,this.tickEnable[X]){this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ae=1,ie=[this.tickAlign[X],se,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]),oe=[0,0,0],ce(X,de,ye);for(var te=0;te<3;++te)ge[te]+=Q*de[te]*this.tickPad[te]/v[5*te];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],ge,this.tickColor[X],me,oe,ie)}if(this.labelEnable[X]){ae=0,oe=[0,0,0],this.labels[X].length>4&&(be(X),ae=1),ie=[this.labelAlign[X],se,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]);for(var te=0;te<3;++te)ge[te]+=Q*de[te]*this.labelPad[te]/v[5*te];ge[X]+=.5*(k[0][X]+k[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],ge,this.labelColor[X],[0,0,0],oe,ie)}}this._text.unbind()},y.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function g(b,v){var C=new s(b);return C.update(v),C}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders").bg;function r(i,s,y,d){this.gl=i,this.buffer=s,this.vao=y,this.shader=d}var t=r.prototype;t.draw=function(i,s,y,d,p,c){for(var m=!1,l=0;l<3;++l)m=m||p[l];if(!!m){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:i,view:s,projection:y,bounds:d,enable:p,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(i){for(var s=[],y=[],d=0,p=0;p<3;++p)for(var c=(p+1)%3,m=(p+2)%3,l=[0,0,0],x=[0,0,0],u=-1;u<=1;u+=2){y.push(d,d+2,d+1,d+1,d+2,d+3),l[p]=u,x[p]=u;for(var A=-1;A<=1;A+=2){l[c]=A;for(var _=-1;_<=1;_+=2)l[m]=_,s.push(l[0],l[1],l[2],x[0],x[1],x[2]),d+=1}var g=c;c=m,m=g}var b=e(i,new Float32Array(s)),v=e(i,new Uint16Array(y),i.ELEMENT_ARRAY_BUFFER),C=a(i,[{buffer:b,type:i.FLOAT,size:3,offset:0,stride:24},{buffer:b,type:i.FLOAT,size:3,offset:12,stride:24}],v),S=n(i);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(i,b,C,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(f,M,T){M.exports=u;var e=f("bit-twiddle"),a=f("gl-mat4/multiply"),n=f("split-polygon"),r=f("robust-orientation"),t=new Array(16),h=new Array(8),i=new Array(8),s=new Array(3),y=[0,0,0];(function(){for(var A=0;A<8;++A)h[A]=[1,1,1,1],i[A]=[1,1,1]})();function d(A,_,g){for(var b=0;b<4;++b){A[b]=g[12+b];for(var v=0;v<3;++v)A[b]+=_[v]*g[4*v+b]}}var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function c(A){for(var _=0;_<p.length;++_)if(A=n.positive(A,p[_]),A.length<3)return 0;for(var g=A[0],b=g[0]/g[3],v=g[1]/g[3],C=0,_=1;_+1<A.length;++_){var S=A[_],k=A[_+1],E=S[0]/S[3],F=S[1]/S[3],I=k[0]/k[3],D=k[1]/k[3],R=E-b,O=F-v,z=I-b,B=D-v;C+=Math.abs(R*B-O*z)}return C}var m=[1,1,1],l=[0,0,0],x={cubeEdges:m,axis:l};function u(A,_,g,b,v){a(t,_,A),a(t,g,t);for(var C=0,S=0;S<2;++S){s[2]=b[S][2];for(var k=0;k<2;++k){s[1]=b[k][1];for(var E=0;E<2;++E)s[0]=b[E][0],d(h[C],s,t),C+=1}}for(var F=-1,S=0;S<8;++S){for(var I=h[S][3],D=0;D<3;++D)i[S][D]=h[S][D]/I;v&&(i[S][2]*=-1),I<0&&(F<0||i[S][2]<i[F][2])&&(F=S)}if(F<0){F=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,z=(R+1)%3,B=-1,G=-1,Q=0;Q<2;++Q){var X=Q<<R,j=X+(Q<<O)+(1-Q<<z),re=X+(1-Q<<O)+(Q<<z);r(i[X],i[j],i[re],y)<0||(Q?B=1:G=1)}if(B<0||G<0){G>B&&(F|=1<<R);continue}for(var Q=0;Q<2;++Q){var X=Q<<R,j=X+(Q<<O)+(1-Q<<z),re=X+(1-Q<<O)+(Q<<z),ue=c([h[X],h[j],h[re],h[X+(1<<O)+(1<<z)]]);Q?B=ue:G=ue}if(G>B){F|=1<<R;continue}}}for(var K=7^F,te=-1,S=0;S<8;++S)S===F||S===K||(te<0||i[te][1]>i[S][1])&&(te=S);for(var Y=-1,S=0;S<3;++S){var V=te^1<<S;if(!(V===F||V===K)){Y<0&&(Y=V);var z=i[V];z[0]<i[Y][0]&&(Y=V)}}for(var ee=-1,S=0;S<3;++S){var V=te^1<<S;if(!(V===F||V===K||V===Y)){ee<0&&(ee=V);var z=i[V];z[0]>i[ee][0]&&(ee=V)}}var ne=m;ne[0]=ne[1]=ne[2]=0,ne[e.log2(Y^te)]=te&Y,ne[e.log2(te^ee)]=te&ee;var Z=ee^7;Z===F||Z===K?(Z=Y^7,ne[e.log2(ee^Z)]=Z&ee):ne[e.log2(Y^Z)]=Z&Y;for(var q=l,ie=F,R=0;R<3;++R)ie&1<<R?q[R]=-1:q[R]=1;return x}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(f,M,T){M.exports=m;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders").line,r=[0,0,0],t=[0,0,0],h=[0,0,0],i=[0,0,0],s=[1,1];function y(l){return l[0]=l[1]=l[2]=0,l}function d(l,x){return l[0]=x[0],l[1]=x[1],l[2]=x[2],l}function p(l,x,u,A,_,g,b,v){this.gl=l,this.vertBuffer=x,this.vao=u,this.shader=A,this.tickCount=_,this.tickOffset=g,this.gridCount=b,this.gridOffset=v}var c=p.prototype;c.bind=function(l,x,u){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=x,this.shader.uniforms.projection=u,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},c.unbind=function(){this.vao.unbind()},c.drawAxisLine=function(l,x,u,A,_){var g=y(t);this.shader.uniforms.majorAxis=t,g[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=g;var b=d(i,u);b[l]+=x[0][l],this.shader.uniforms.offset=b,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=A;var v=y(h);v[(l+2)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6);var v=y(h);v[(l+1)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6)},c.drawAxisTicks=function(l,x,u,A,_){if(!!this.tickCount[l]){var g=y(r);g[l]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=u,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=_;var b=y(h);b[l]=1,this.shader.uniforms.screenAxis=b,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},c.drawGrid=function(l,x,u,A,_,g){if(!!this.gridCount[l]){var b=y(t);b[x]=u[1][x]-u[0][x],this.shader.uniforms.minorAxis=b;var v=d(i,A);v[x]+=u[0][x],this.shader.uniforms.offset=v;var C=y(r);C[l]=1,this.shader.uniforms.majorAxis=C;var S=y(h);S[l]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},c.drawZero=function(l,x,u,A,_,g){var b=y(t);this.shader.uniforms.majorAxis=b,b[l]=u[1][l]-u[0][l],this.shader.uniforms.minorAxis=b;var v=d(i,A);v[l]+=u[0][l],this.shader.uniforms.offset=v;var C=y(h);C[x]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},c.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(l,x,u){var A=[],_=[0,0,0],g=[0,0,0],b=[0,0,0],v=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var E=A.length/3|0,S=0;S<u[C].length;++S){var k=+u[C][S].x;A.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=A.length/3|0;_[C]=E,g[C]=I-E;for(var E=A.length/3|0,F=0;F<u[C].length;++F){var k=+u[C][F].x;A.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=A.length/3|0;b[C]=E,v[C]=I-E}var D=e(l,new Float32Array(A)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=n(l);return O.attributes.position.location=0,new p(l,D,R,O,g,_,v,b)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(y){return a(y,n,r,null,[{name:"position",type:"vec3"}])};var t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(y){return a(y,t,h,null,[{name:"position",type:"vec3"}])};var i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(y){return a(y,i,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(f,M,T){(function(e){(function(){M.exports=m;var a=f("gl-buffer"),n=f("gl-vao"),r=f("vectorize-text"),t=f("./shaders").text,h=window||e.global||{},i=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};var s=3;function y(l,x,u,A){this.gl=l,this.shader=x,this.buffer=u,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=y.prototype,p=[0,0];d.bind=function(l,x,u,A){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=l,_.view=x,_.projection=u,_.pixelScale=A,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},d.unbind=function(){this.vao.unbind()},d.update=function(l,x,u,A,_){var g=[];function b(R,O,z,B,G,Q){var X=i[z];X||(X=i[z]={});var j=X[O];j||(j=X[O]=c(O,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:G,styletags:Q}));for(var re=(B||12)/12,ue=j.positions,K=j.cells,te=0,Y=K.length;te<Y;++te)for(var V=K[te],ee=2;ee>=0;--ee){var ne=ue[V[ee]];g.push(re*ne[0],-re*ne[1],R)}}for(var v=[0,0,0],C=[0,0,0],S=[0,0,0],k=[0,0,0],E=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=g.length/s|0,b(.5*(l[0][I]+l[1][I]),x[I],u[I],12,E,F),k[I]=(g.length/s|0)-S[I],v[I]=g.length/s|0;for(var D=0;D<A[I].length;++D)!A[I][D].text||b(A[I][D].x,A[I][D].text,A[I][D].font||_,A[I][D].fontSize||12,E,F);C[I]=(g.length/s|0)-v[I]}this.buffer.update(g),this.tickOffset=v,this.tickCount=C,this.labelOffset=S,this.labelCount=k},d.drawTicks=function(l,x,u,A,_,g,b,v){!this.tickCount[l]||(this.shader.uniforms.axis=g,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=b,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},d.drawLabel=function(l,x,u,A,_,g,b,v){!this.labelCount[l]||(this.shader.uniforms.axis=g,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=b,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function c(l,x){try{return r(l,x)}catch(u){return console.warn('error vectorizing text:"'+l+'" error:',u),{cells:[],positions:[]}}}function m(l,x,u,A,_,g){var b=a(l),v=n(l,[{buffer:b,size:3}]),C=t(l);C.attributes.position.location=0;var S=new y(l,C,b,v);return S.update(x,u,A,_,g),S}}).call(this)}).call(this,f("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(f,M,T){T.create=a,T.equal=n;function e(r,t){var h=r+"",i=h.indexOf("."),s=0;i>=0&&(s=h.length-i-1);var y=Math.pow(10,s),d=Math.round(r*t*y),p=d+"";if(p.indexOf("e")>=0)return p;var c=d/y,m=d%y;d<0?(c=-Math.ceil(c)|0,m=-m|0):(c=Math.floor(c)|0,m=m|0);var l=""+c;if(d<0&&(l="-"+l),s){for(var x=""+m;x.length<s;)x="0"+x;return l+"."+x}else return l}function a(r,t){for(var h=[],i=0;i<3;++i){var s=[];.5*(r[0][i]+r[1][i]);for(var y=0;y*t[i]<=r[1][i];++y)s.push({x:y*t[i],text:e(t[i],y)});for(var y=-1;y*t[i]>=r[0][i];--y)s.push({x:y*t[i],text:e(t[i],y)});h.push(s)}return h}function n(r,t){for(var h=0;h<3;++h){if(r[h].length!==t[h].length)return!1;for(var i=0;i<r[h].length;++i){var s=r[h][i],y=t[h][i];if(s.x!==y.x||s.text!==y.text||s.font!==y.font||s.fontColor!==y.fontColor||s.fontSize!==y.fontSize||s.dx!==y.dx||s.dy!==y.dy)return!1}}return!0}},{}],77:[function(f,M,T){M.exports=x;var e=f("extract-frustum-planes"),a=f("split-polygon"),n=f("./lib/cube.js"),r=f("gl-mat4/multiply"),t=f("gl-mat4/transpose"),h=f("gl-vec4/transformMat4"),i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function y(u,A,_){this.lo=u,this.hi=A,this.pixelsPerDataUnit=_}var d=[0,0,0,1],p=[0,0,0,1];function c(u,A,_,g,b){for(var v=0;v<3;++v){for(var C=d,S=p,k=0;k<3;++k)S[k]=C[k]=_[k];S[3]=C[3]=1,S[v]+=1,h(S,S,A),S[3]<0&&(u[v]=1/0),C[v]-=1,h(C,C,A),C[3]<0&&(u[v]=1/0);var E=(C[0]/C[3]-S[0]/S[3])*g,F=(C[1]/C[3]-S[1]/S[3])*b;u[v]=.25*Math.sqrt(E*E+F*F)}return u}var m=[new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0)],l=[0,0,0];function x(u,A,_,g,F){var v=A.model||i,C=A.view||i,S=A.projection||i,k=A._ortho||!1,E=u.bounds,F=F||n(v,C,S,E,k),I=F.axis;r(s,C,v),r(s,S,s);for(var D=m,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(t(s,s));t(s,s);for(var z=0;z<3;++z){var B=(z+1)%3,G=(z+2)%3,Q=l;e:for(var R=0;R<2;++R){var X=[];if(I[z]<0!=!!R){Q[z]=E[R][z];for(var j=0;j<2;++j){Q[B]=E[j^R][B];for(var re=0;re<2;++re)Q[G]=E[re^j^R][G],X.push(Q.slice())}for(var ue=k?5:4,j=ue;j===ue;++j){if(X.length===0)continue e;X=a.positive(X,O[j])}for(var j=0;j<X.length;++j)for(var G=X[j],K=c(l,s,G,_,g),re=0;re<3;++re)D[re].lo=Math.min(D[re].lo,G[re]),D[re].hi=Math.max(D[re].hi,G[re]),re!==z&&(D[re].pixelsPerDataUnit=Math.min(D[re].pixelsPerDataUnit,Math.abs(K[re])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(f,M,T){var e=f("typedarray-pool"),a=f("ndarray-ops"),n=f("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(p,c,m,l,x){this.gl=p,this.type=c,this.handle=m,this.length=l,this.usage=x}var h=t.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function i(p,c,m,l,x,u){var A=x.length*x.BYTES_PER_ELEMENT;if(u<0)return p.bufferData(c,x,l),A;if(A+u>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(c,u,x),m}function s(p,c){for(var m=e.malloc(p.length,c),l=p.length,x=0;x<l;++x)m[x]=p[x];return m}function y(p,c){for(var m=1,l=c.length-1;l>=0;--l){if(c[l]!==m)return!1;m*=p[l]}return!0}h.update=function(p,c){if(typeof c!="number"&&(c=-1),this.bind(),typeof p=="object"&&typeof p.shape<"u"){var m=p.dtype;if(r.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&m!=="uint16"?m="uint32":m="uint16"}if(m===p.dtype&&y(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,p.data,c):this.length=i(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),c);else{var x=e.malloc(p.size,m),u=n(x,p.shape);a.assign(u,p),c<0?this.length=i(this.gl,this.type,this.length,this.usage,x,c):this.length=i(this.gl,this.type,this.length,this.usage,x.subarray(0,p.size),c),e.free(x)}}else if(Array.isArray(p)){var A;this.type===this.gl.ELEMENT_ARRAY_BUFFER?A=s(p,"uint16"):A=s(p,"float32"),c<0?this.length=i(this.gl,this.type,this.length,this.usage,A,c):this.length=i(this.gl,this.type,this.length,this.usage,A.subarray(0,p.length),c),e.free(A)}else if(typeof p=="object"&&typeof p.length=="number")this.length=i(this.gl,this.type,this.length,this.usage,p,c);else if(typeof p=="number"||p===void 0){if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function d(p,c,m,l){if(m=m||p.ARRAY_BUFFER,l=l||p.DYNAMIC_DRAW,m!==p.ARRAY_BUFFER&&m!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==p.DYNAMIC_DRAW&&l!==p.STATIC_DRAW&&l!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=p.createBuffer(),u=new t(p,m,x,0,l);return u.update(c),u}M.exports=d},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(f,M,T){var e=f("gl-vec3");M.exports=function(n,r){var t=n.positions,h=n.vectors,i={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),i;for(var s=0,y=1/0,d=-1/0,p=1/0,c=-1/0,m=1/0,l=-1/0,x=null,u=null,A=[],_=1/0,g=!1,b=0;b<t.length;b++){var v=t[b];y=Math.min(v[0],y),d=Math.max(v[0],d),p=Math.min(v[1],p),c=Math.max(v[1],c),m=Math.min(v[2],m),l=Math.max(v[2],l);var C=h[b];if(e.length(C)>s&&(s=e.length(C)),b){var S=2*e.distance(x,v)/(e.length(u)+e.length(C));S?(_=Math.min(_,S),g=!1):g=!0}g||(x=v,u=C),A.push(C)}var k=[y,p,m],E=[d,c,l];r&&(r[0]=k,r[1]=E),s===0&&(s=1);var F=1/s;isFinite(_)||(_=1),i.vectorScale=_;var I=n.coneSize||.5;n.absoluteConeSize&&(I=n.absoluteConeSize*F),i.coneScale=I;for(var b=0,D=0;b<t.length;b++)for(var v=t[b],R=v[0],O=v[1],z=v[2],B=A[b],G=e.length(B)*F,Q=0,X=8;Q<X;Q++){i.positions.push([R,O,z,D++]),i.positions.push([R,O,z,D++]),i.positions.push([R,O,z,D++]),i.positions.push([R,O,z,D++]),i.positions.push([R,O,z,D++]),i.positions.push([R,O,z,D++]),i.vectors.push(B),i.vectors.push(B),i.vectors.push(B),i.vectors.push(B),i.vectors.push(B),i.vectors.push(B),i.vertexIntensity.push(G,G,G),i.vertexIntensity.push(G,G,G);var j=i.positions.length;i.cells.push([j-6,j-5,j-4],[j-3,j-2,j-1])}return i};var a=f("./lib/shaders");M.exports.createMesh=f("./create_mesh"),M.exports.createConeMesh=function(n,r){return M.exports.createMesh(n,r,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("gl-vao"),r=f("gl-texture2d"),t=f("gl-mat4/multiply"),h=f("gl-mat4/invert"),i=f("ndarray"),s=f("colormap"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(A,_,g,b,v,C,S,k,E,F,I){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=g,this.pickShader=b,this.trianglePositions=v,this.triangleVectors=C,this.triangleColors=k,this.triangleUVs=E,this.triangleIds=S,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var p=d.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(A){this.pickId=A};function c(A){for(var _=s({colormap:A,nshades:256,format:"rgba"}),g=new Uint8Array(256*4),b=0;b<256;++b){for(var v=_[b],C=0;C<3;++C)g[4*b+C]=v[C];g[4*b+3]=v[3]*255}return i(g,[256,256,4],[4,0,1])}function m(A){for(var _=A.length,g=new Array(_),b=0;b<_;++b)g[b]=A[b][2];return g}p.update=function(A){A=A||{};var _=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),A.tubeScale!==void 0&&(this.tubeScale=A.tubeScale),A.vectorScale!==void 0&&(this.vectorScale=A.vectorScale),A.coneScale!==void 0&&(this.coneScale=A.coneScale),A.coneOffset!==void 0&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(c(A.colormap)),this.texture.generateMipmap());var g=A.cells,b=A.positions,v=A.vectors;if(!b||!g||!v)return;var C=[],S=[],k=[],E=[],F=[];this.cells=g,this.positions=b,this.vectors=v;var I=A.meshColor||[1,1,1,1],D=A.vertexIntensity,R=1/0,O=-1/0;if(D)if(A.vertexIntensityBounds)R=+A.vertexIntensityBounds[0],O=+A.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var B=D[z];R=Math.min(R,B),O=Math.max(O,B)}else for(var z=0;z<b.length;++z){var B=b[z][2];R=Math.min(R,B),O=Math.max(O,B)}D?this.intensity=D:this.intensity=m(b),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<b.length;++z)for(var G=b[z],Q=0;Q<3;++Q)isNaN(G[Q])||!isFinite(G[Q])||(this.bounds[0][Q]=Math.min(this.bounds[0][Q],G[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],G[Q]));var X=0;e:for(var z=0;z<g.length;++z){var j=g[z];switch(j.length){case 3:for(var Q=0;Q<3;++Q)for(var re=j[Q],G=b[re],ue=0;ue<3;++ue)if(isNaN(G[ue])||!isFinite(G[ue]))continue e;for(var Q=0;Q<3;++Q){var re=j[2-Q],G=b[re];C.push(G[0],G[1],G[2],G[3]);var K=v[re];S.push(K[0],K[1],K[2],K[3]||0);var te=I;te.length===3?k.push(te[0],te[1],te[2],1):k.push(te[0],te[1],te[2],te[3]);var Y;D?Y=[(D[re]-R)/(O-R),0]:Y=[(G[2]-R)/(O-R),0],E.push(Y[0],Y[1]),F.push(z)}X+=1;break}}this.triangleCount=X,this.trianglePositions.update(C),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(E),this.triangleIds.update(new Uint32Array(F))},p.drawTransparent=p.draw=function(A){A=A||{};for(var _=this.gl,g=A.model||y,b=A.view||y,v=A.projection||y,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)C[0][S]=Math.max(C[0][S],this.clipBounds[0][S]),C[1][S]=Math.min(C[1][S],this.clipBounds[1][S]);var k={model:g,view:b,projection:v,inverseModel:y.slice(),clipBounds:C,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=h(k.inverseModel,k.model),_.disable(_.CULL_FACE),this.texture.bind(0);var E=new Array(16);t(E,k.view,k.model),t(E,k.projection,E),h(E,E);for(var S=0;S<3;++S)k.eyePosition[S]=E[12+S]/E[15];for(var F=E[15],S=0;S<3;++S)F+=this.lightPosition[S]*E[4*S+3];for(var S=0;S<3;++S){for(var I=E[12+S],D=0;D<3;++D)I+=E[4*D+S]*this.lightPosition[D];k.lightPosition[S]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=k,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(A){A=A||{};for(var _=this.gl,g=A.model||y,b=A.view||y,v=A.projection||y,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)C[0][S]=Math.max(C[0][S],this.clipBounds[0][S]),C[1][S]=Math.min(C[1][S],this.clipBounds[1][S]);this._model=[].slice.call(g),this._view=[].slice.call(b),this._projection=[].slice.call(v),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var k={model:g,view:b,projection:v,clipBounds:C,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},E=this.pickShader;E.bind(),E.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(A){if(!A||A.id!==this.pickId)return null;var _=A.value[0]+256*A.value[1]+65536*A.value[2],g=this.cells[_],b=this.positions[g[1]].slice(0,3),v={position:b,dataCoordinate:b,index:Math.floor(g[1]/48)};return this.traceType==="cone"?v.index=Math.floor(g[1]/48):this.traceType==="streamtube"&&(v.intensity=this.intensity[g[1]],v.velocity=this.vectors[g[1]].slice(0,3),v.divergence=this.vectors[g[1]][3],v.index=_),v},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(A,_){var g=e(A,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function x(A,_){var g=e(A,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}function u(A,_,g){var b=g.shaders;arguments.length===1&&(_=A,A=_.gl);var v=l(A,b),C=x(A,b),S=r(A,i(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=A.LINEAR_MIPMAP_LINEAR,S.magFilter=A.LINEAR;var k=a(A),E=a(A),F=a(A),I=a(A),D=a(A),R=n(A,[{buffer:k,type:A.FLOAT,size:4},{buffer:D,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:A.FLOAT,size:4},{buffer:I,type:A.FLOAT,size:2},{buffer:E,type:A.FLOAT,size:4}]),O=new d(A,S,v,C,k,E,D,F,I,R,g.traceType||"cone");return O.update(_),O}M.exports=u},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(f,M,T){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(f,M,T){var e=f("./1.0/numbers");M.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(f,M,T){M.exports=d;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(p,c,m,l){this.gl=p,this.shader=l,this.buffer=c,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=t.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(p){var c=this.gl,m=this.shader.uniforms;this.shader.bind();var l=m.view=p.view||r,x=m.projection=p.projection||r;m.model=p.model||r,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var u=l[12],A=l[13],_=l[14],g=l[15],b=p._ortho||!1,v=b?2:1,C=v*this.pixelRatio*(x[3]*u+x[7]*A+x[11]*_+x[15]*g)/c.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)c.lineWidth(this.lineWidth[S]*this.pixelRatio),m.capSize=this.capSize[S]*C,this.lineCount[S]&&c.drawArrays(c.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function i(p,c){for(var m=0;m<3;++m)p[0][m]=Math.min(p[0][m],c[m]),p[1][m]=Math.max(p[1][m],c[m])}var s=function(){for(var p=new Array(3),c=0;c<3;++c){for(var m=[],l=1;l<=2;++l)for(var x=-1;x<=1;x+=2){var u=(l+c)%3,A=[0,0,0];A[u]=x,m.push(A)}p[c]=m}return p}();function y(p,c,m,l){for(var x=s[l],u=0;u<x.length;++u){var A=x[u];p.push(c[0],c[1],c[2],m[0],m[1],m[2],m[3],A[0],A[1],A[2])}return x.length}h.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=p.color||[[0,0,0],[0,0,0],[0,0,0]],m=p.position,l=p.error;if(Array.isArray(c[0])||(c=[c,c,c]),m&&l){var x=[],u=m.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=A;e:for(var g=0;g<u;++g){for(var b=m[g],v=0;v<3;++v)if(isNaN(b[v])||!isFinite(b[v]))continue e;var C=l[g],S=c[_];if(Array.isArray(S[0])&&(S=c[g]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(C[0][_])||isNaN(C[1][_]))){if(C[0][_]<0){var k=b.slice();k[_]+=C[0][_],x.push(b[0],b[1],b[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),i(this.bounds,k),A+=2+y(x,k,S,_)}if(C[1][_]>0){var k=b.slice();k[_]+=C[1][_],x.push(b[0],b[1],b[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),i(this.bounds,k),A+=2+y(x,k,S,_)}}}this.lineCount[_]=A-this.lineOffset[_]}this.buffer.update(x)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function d(p){var c=p.gl,m=e(c),l=a(c,[{buffer:m,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:c.FLOAT,size:3,offset:28,stride:40}]),x=n(c);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var u=new t(c,m,l,x);return u.update(p),u}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(f,M,T){var e=f("gl-texture2d");M.exports=A;var a=null,n,r,t,h;function i(_){var g=_.getParameter(_.FRAMEBUFFER_BINDING),b=_.getParameter(_.RENDERBUFFER_BINDING),v=_.getParameter(_.TEXTURE_BINDING_2D);return[g,b,v]}function s(_,g){_.bindFramebuffer(_.FRAMEBUFFER,g[0]),_.bindRenderbuffer(_.RENDERBUFFER,g[1]),_.bindTexture(_.TEXTURE_2D,g[2])}function y(_,g){var b=_.getParameter(g.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(b+1);for(var v=0;v<=b;++v){for(var C=new Array(b),S=0;S<v;++S)C[S]=_.COLOR_ATTACHMENT0+S;for(var S=v;S<b;++S)C[S]=_.NONE;a[v]=C}}function d(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(_,g,b,v,C,S){if(!v)return null;var k=e(_,g,b,C,v);return k.magFilter=_.NEAREST,k.minFilter=_.NEAREST,k.mipSamples=1,k.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,S,_.TEXTURE_2D,k.handle,0),k}function c(_,g,b,v,C){var S=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,S),_.renderbufferStorage(_.RENDERBUFFER,v,g,b),_.framebufferRenderbuffer(_.FRAMEBUFFER,C,_.RENDERBUFFER,S),S}function m(_){var g=i(_.gl),b=_.gl,v=_.handle=b.createFramebuffer(),C=_._shape[0],S=_._shape[1],k=_.color.length,E=_._ext,F=_._useStencil,I=_._useDepth,D=_._colorType;b.bindFramebuffer(b.FRAMEBUFFER,v);for(var R=0;R<k;++R)_.color[R]=p(b,C,S,D,b.RGBA,b.COLOR_ATTACHMENT0+R);k===0?(_._color_rb=c(b,C,S,b.RGBA4,b.COLOR_ATTACHMENT0),E&&E.drawBuffersWEBGL(a[0])):k>1&&E.drawBuffersWEBGL(a[k]);var O=b.getExtension("WEBGL_depth_texture");O?F?_.depth=p(b,C,S,O.UNSIGNED_INT_24_8_WEBGL,b.DEPTH_STENCIL,b.DEPTH_STENCIL_ATTACHMENT):I&&(_.depth=p(b,C,S,b.UNSIGNED_SHORT,b.DEPTH_COMPONENT,b.DEPTH_ATTACHMENT)):I&&F?_._depth_rb=c(b,C,S,b.DEPTH_STENCIL,b.DEPTH_STENCIL_ATTACHMENT):I?_._depth_rb=c(b,C,S,b.DEPTH_COMPONENT16,b.DEPTH_ATTACHMENT):F&&(_._depth_rb=c(b,C,S,b.STENCIL_INDEX,b.STENCIL_ATTACHMENT));var z=b.checkFramebufferStatus(b.FRAMEBUFFER);if(z!==b.FRAMEBUFFER_COMPLETE){_._destroyed=!0,b.bindFramebuffer(b.FRAMEBUFFER,null),b.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(b.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var R=0;R<_.color.length;++R)_.color[R].dispose(),_.color[R]=null;_._color_rb&&(b.deleteRenderbuffer(_._color_rb),_._color_rb=null),s(b,g),d(z)}s(b,g)}function l(_,g,b,v,C,S,k,E){this.gl=_,this._shape=[g|0,b|0],this._destroyed=!1,this._ext=E,this.color=new Array(C);for(var F=0;F<C;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=v,this._useDepth=S,this._useStencil=k;var I=this,D=[g|0,b|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,m(this)}var x=l.prototype;function u(_,g,b){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===g&&_._shape[1]===b)){var v=_.gl,C=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(g<0||g>C||b<0||b>C)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=g,_._shape[1]=b;for(var S=i(v),k=0;k<_.color.length;++k)_.color[k].shape=_._shape;_._color_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._color_rb),v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&v.renderbufferStorage(v.RENDERBUFFER,v.STENCIL_INDEX,_._shape[0],_._shape[1])),v.bindFramebuffer(v.FRAMEBUFFER,_.handle);var E=v.checkFramebufferStatus(v.FRAMEBUFFER);E!==v.FRAMEBUFFER_COMPLETE&&(_.dispose(),s(v,S),d(E)),s(v,S)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=_[0]|0,b=_[1]|0;return u(this,g,b),[g,b]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,u(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,u(this,this._shape[0],_),_},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function A(_,g,b,v){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var C=_.getExtension("WEBGL_draw_buffers");if(!a&&C&&y(_,C),Array.isArray(g)&&(v=b,b=g[1]|0,g=g[0]|0),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var S=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(g<0||g>S||b<0||b>S)throw new Error("gl-fbo: Parameters are too large for FBO");v=v||{};var k=1;if("color"in v){if(k=Math.max(v.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(C){if(k>_.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var E=_.UNSIGNED_BYTE,F=_.getExtension("OES_texture_float");if(v.float&&k>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");E=_.FLOAT}else v.preferFloat&&k>0&&F&&(E=_.FLOAT);var I=!0;"depth"in v&&(I=!!v.depth);var D=!1;return"stencil"in v&&(D=!!v.stencil),new l(_,g,b,E,k,I,D,C)}},{"gl-texture2d":146}],87:[function(f,M,T){var e=f("sprintf-js").sprintf,a=f("gl-constants/lookup"),n=f("glsl-shader-name"),r=f("add-line-numbers");M.exports=t;function t(h,i,s){var y=n(i)||"of unknown name (see npm glsl-shader-name)",d="unknown type";s!==void 0&&(d=s===a.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e(`Error compiling %s shader %s:
`,d,y),c=e("%s%s",p,h),m=h.split(`
`),l={},x=0;x<m.length;x++){var u=m[x];if(!(u===""||u==="\0")){var A=parseInt(u.split(":")[2]);if(isNaN(A))throw new Error(e("Could not parse error: %s",u));l[A]=u}}for(var _=r(i).split(`
`),x=0;x<_.length;x++)if(!(!l[x+3]&&!l[x+2]&&!l[x+1])){var g=_[x];if(p+=g+`
`,l[x+1]){var b=l[x+1];b=b.substr(b.split(":",3).join(":").length+1).trim(),p+=e(`^^^ %s

`,b)}}return{long:p.trim(),short:c.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(f,M,T){M.exports=d;var e=f("binary-search-bounds"),a=f("iota-array"),n=f("typedarray-pool"),r=f("gl-shader"),t=f("gl-buffer"),h=f("./lib/shaders");function i(p,c,m,l,x,u,A){this.plot=p,this.shader=c,this.pickShader=m,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=u,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s=i.prototype,y=[0,0,1,0,0,1,1,0,1,1,0,1];s.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,m=this.shader,l=this.bounds,x=this.numVertices;if(!(x<=0)){var u=c.gl,A=c.dataBox,_=l[2]-l[0],g=l[3]-l[1],b=A[2]-A[0],v=A[3]-A[1];p[0]=2*_/b,p[4]=2*g/v,p[6]=2*(l[0]-A[0])/b-1,p[7]=2*(l[1]-A[1])/v-1,m.bind();var C=m.uniforms;C.viewTransform=p,C.shape=this.shape;var S=m.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(u.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(u.UNSIGNED_BYTE,!0),u.drawArrays(u.TRIANGLES,0,x)}}}(),s.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(m){var l=this.plot,x=this.pickShader,u=this.bounds,A=this.numVertices;if(!(A<=0)){var _=l.gl,g=l.dataBox,b=u[2]-u[0],v=u[3]-u[1],C=g[2]-g[0],S=g[3]-g[1];p[0]=2*b/C,p[4]=2*v/S,p[6]=2*(u[0]-g[0])/C-1,p[7]=2*(u[1]-g[1])/S-1;for(var k=0;k<4;++k)c[k]=m>>k*8&255;this.pickOffset=m,x.bind();var E=x.uniforms;E.viewTransform=p,E.pickOffset=c,E.shape=this.shape;var F=x.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}}(),s.pick=function(p,c,m){var l=this.pickOffset,x=this.shape[0]*this.shape[1];if(m<l||m>=l+x)return null;var u=m-l,A=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[A[u%this.shape[0]],_[u/this.shape[0]|0]]}},s.update=function(p){p=p||{};var c=p.shape||[0,0],m=p.x||a(c[0]),l=p.y||a(c[1]),x=p.z||new Float32Array(c[0]*c[1]),u=p.zsmooth!==!1;this.xData=m,this.yData=l;var A=p.colorLevels||[0],_=p.colorValues||[0,0,0,1],g=A.length,b=this.bounds,v,C,S,k;u?(v=b[0]=m[0],C=b[1]=l[0],S=b[2]=m[m.length-1],k=b[3]=l[l.length-1]):(v=b[0]=m[0]+(m[1]-m[0])/2,C=b[1]=l[0]+(l[1]-l[0])/2,S=b[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,k=b[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var E=1/(S-v),F=1/(k-C),I=c[0],D=c[1];this.shape=[I,D];var R=(u?(I-1)*(D-1):I*D)*(y.length>>>1);this.numVertices=R;for(var O=n.mallocUint8(R*4),z=n.mallocFloat32(R*2),B=n.mallocUint8(R*2),G=n.mallocUint32(R),Q=0,X=u?I-1:I,j=u?D-1:D,re=0;re<j;++re){var ue,K;u?(ue=F*(l[re]-C),K=F*(l[re+1]-C)):(ue=re<D-1?F*(l[re]-(l[re+1]-l[re])/2-C):F*(l[re]-(l[re]-l[re-1])/2-C),K=re<D-1?F*(l[re]+(l[re+1]-l[re])/2-C):F*(l[re]+(l[re]-l[re-1])/2-C));for(var te=0;te<X;++te){var Y,V;u?(Y=E*(m[te]-v),V=E*(m[te+1]-v)):(Y=te<I-1?E*(m[te]-(m[te+1]-m[te])/2-v):E*(m[te]-(m[te]-m[te-1])/2-v),V=te<I-1?E*(m[te]+(m[te+1]-m[te])/2-v):E*(m[te]+(m[te]-m[te-1])/2-v));for(var ee=0;ee<y.length;ee+=2){var ne=y[ee],Z=y[ee+1],q=u?(re+Z)*I+(te+ne):re*I+te,ie=x[q],se=e.le(A,ie),ae,oe,be,ce;if(se<0)ae=_[0],oe=_[1],be=_[2],ce=_[3];else if(se===g-1)ae=_[4*g-4],oe=_[4*g-3],be=_[4*g-2],ce=_[4*g-1];else{var de=(ie-A[se])/(A[se+1]-A[se]),ye=1-de,ge=4*se,me=4*(se+1);ae=ye*_[ge]+de*_[me],oe=ye*_[ge+1]+de*_[me+1],be=ye*_[ge+2]+de*_[me+2],ce=ye*_[ge+3]+de*_[me+3]}O[4*Q]=255*ae,O[4*Q+1]=255*oe,O[4*Q+2]=255*be,O[4*Q+3]=255*ce,z[2*Q]=Y*.5+V*.5,z[2*Q+1]=ue*.5+K*.5,B[2*Q]=ne,B[2*Q+1]=Z,G[Q]=re*I+te,Q+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(B),this.colorBuffer.update(O),this.idBuffer.update(G),n.free(z),n.free(O),n.free(B),n.free(G)},s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function d(p,c){var m=p.gl,l=r(m,h.vertex,h.fragment),x=r(m,h.pickVertex,h.pickFragment),u=t(m),A=t(m),_=t(m),g=t(m),b=new i(p,l,x,u,A,_,g);return b.update(c),p.addObject(b),b}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(f,M,T){var e=f("glslify");M.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(i){return a(i,n,r,null,h)},T.createPickShader=function(i){return a(i,n,t,null,h)}},{"gl-shader":132,glslify:231}],91:[function(f,M,T){M.exports=_;var e=f("gl-buffer"),a=f("gl-vao"),n=f("gl-texture2d"),r=new Uint8Array(4),t=new Float32Array(r.buffer);function h(g,b,v,C){return r[0]=C,r[1]=v,r[2]=b,r[3]=g,t[0]}var i=f("binary-search-bounds"),s=f("ndarray"),y=f("./lib/shaders"),d=y.createShader,p=y.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(g,b){for(var v=0,C=0;C<3;++C){var S=g[C]-b[C];v+=S*S}return Math.sqrt(v)}function l(g){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],v=0;v<3;++v)b[0][v]=Math.max(g[0][v],b[0][v]),b[1][v]=Math.min(g[1][v],b[1][v]);return b}function x(g,b,v,C){this.arcLength=g,this.position=b,this.index=v,this.dataCoordinate=C}function u(g,b,v,C,S,k){this.gl=g,this.shader=b,this.pickShader=v,this.buffer=C,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=u.prototype;A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(g){this.pickId=g},A.drawTransparent=A.draw=function(g){if(!!this.vertexCount){var b=this.gl,v=this.shader,C=this.vao;v.bind(),v.uniforms={model:g.model||c,view:g.view||c,projection:g.projection||c,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(b.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},A.drawPick=function(g){if(!!this.vertexCount){var b=this.gl,v=this.pickShader,C=this.vao;v.bind(),v.uniforms={model:g.model||c,view:g.view||c,projection:g.projection||c,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(b.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},A.update=function(g){var b,v;this.dirty=!0;var C=!!g.connectGaps;"dashScale"in g&&(this.dashScale=g.dashScale),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],E=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=g.position||g.positions;if(R){var O=g.color||g.colors||[0,0,0,1],z=g.lineWidth||1,B=!1;e:for(b=1;b<R.length;++b){var G=R[b-1],Q=R[b];for(k.push(F),E.push(G.slice()),v=0;v<3;++v){if(isNaN(G[v])||isNaN(Q[v])||!isFinite(G[v])||!isFinite(Q[v])){if(!C&&S.length>0){for(var X=0;X<24;++X)S.push(S[S.length-12]);I+=2,B=!0}continue e}D[0][v]=Math.min(D[0][v],G[v],Q[v]),D[1][v]=Math.max(D[1][v],G[v],Q[v])}var j,re;Array.isArray(O[0])?(j=O.length>b-1?O[b-1]:O.length>0?O[O.length-1]:[0,0,0,1],re=O.length>b?O[b]:O.length>0?O[O.length-1]:[0,0,0,1]):j=re=O,j.length===3&&(j=[j[0],j[1],j[2],1]),re.length===3&&(re=[re[0],re[1],re[2],1]),!this.hasAlpha&&j[3]<1&&(this.hasAlpha=!0);var ue;Array.isArray(z)?ue=z.length>b-1?z[b-1]:z.length>0?z[z.length-1]:[0,0,0,1]:ue=z;var K=F;if(F+=m(G,Q),B){for(v=0;v<2;++v)S.push(G[0],G[1],G[2],Q[0],Q[1],Q[2],K,ue,j[0],j[1],j[2],j[3]);I+=2,B=!1}S.push(G[0],G[1],G[2],Q[0],Q[1],Q[2],K,ue,j[0],j[1],j[2],j[3],G[0],G[1],G[2],Q[0],Q[1],Q[2],K,-ue,j[0],j[1],j[2],j[3],Q[0],Q[1],Q[2],G[0],G[1],G[2],F,-ue,re[0],re[1],re[2],re[3],Q[0],Q[1],Q[2],G[0],G[1],G[2],F,ue,re[0],re[1],re[2],re[3]),I+=4}}if(this.buffer.update(S),k.push(F),E.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=E,this.arcLength=k,"dashes"in g){var te=g.dashes,Y=te.slice();for(Y.unshift(0),b=1;b<Y.length;++b)Y[b]=Y[b-1]+Y[b];var V=s(new Array(256*4),[256,1,4]);for(b=0;b<256;++b){for(v=0;v<4;++v)V.set(b,0,v,0);i.le(Y,Y[Y.length-1]*b/255)&1?V.set(b,0,0,0):V.set(b,0,0,255)}this.texture.setPixels(V)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(g){if(!g||g.id!==this.pickId)return null;var b=h(g.value[0],g.value[1],g.value[2],0),v=i.le(this.arcLength,b);if(v<0)return null;if(v===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),v);for(var C=this.points[v],S=this.points[Math.min(v+1,this.points.length-1)],k=(b-this.arcLength[v])/(this.arcLength[v+1]-this.arcLength[v]),E=1-k,F=[0,0,0],I=0;I<3;++I)F[I]=E*C[I]+k*S[I];var D=Math.min(k<.5?v:v+1,this.points.length-1);return new x(b,F,D,this.points[D])};function _(g){var b=g.gl||g.scene&&g.scene.gl,v=d(b);v.attributes.position.location=0,v.attributes.nextPosition.location=1,v.attributes.arcLength.location=2,v.attributes.lineWidth.location=3,v.attributes.color.location=4;var C=p(b);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var S=e(b),k=a(b,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),E=s(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)E.data[F]=255;var I=n(b,E);I.wrap=b.REPEAT;var D=new u(b,v,C,S,k,I);return D.update(g),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}},{}],93:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3],i=a[4],s=a[5],y=a[6],d=a[7],p=a[8],c=a[9],m=a[10],l=a[11],x=a[12],u=a[13],A=a[14],_=a[15],g=n*s-r*i,b=n*y-t*i,v=n*d-h*i,C=r*y-t*s,S=r*d-h*s,k=t*d-h*y,E=p*u-c*x,F=p*A-m*x,I=p*_-l*x,D=c*A-m*u,R=c*_-l*u,O=m*_-l*A;return g*O-b*R+v*D+C*I-S*F+k*E}},{}],95:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],i=n[3],s=r+r,y=t+t,d=h+h,p=r*s,c=t*s,m=t*y,l=h*s,x=h*y,u=h*d,A=i*s,_=i*y,g=i*d;return a[0]=1-m-u,a[1]=c+g,a[2]=l-_,a[3]=0,a[4]=c-g,a[5]=1-p-u,a[6]=x+A,a[7]=0,a[8]=l+_,a[9]=x-A,a[10]=1-p-m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=n[3],y=t+t,d=h+h,p=i+i,c=t*y,m=t*d,l=t*p,x=h*d,u=h*p,A=i*p,_=s*y,g=s*d,b=s*p;return a[0]=1-(x+A),a[1]=m+b,a[2]=l-g,a[3]=0,a[4]=m-b,a[5]=1-(c+A),a[6]=u+_,a[7]=0,a[8]=l+g,a[9]=u-_,a[10]=1-(c+x),a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}},{}],97:[function(f,M,T){M.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],i=n[3],s=n[4],y=n[5],d=n[6],p=n[7],c=n[8],m=n[9],l=n[10],x=n[11],u=n[12],A=n[13],_=n[14],g=n[15],b=r*y-t*s,v=r*d-h*s,C=r*p-i*s,S=t*d-h*y,k=t*p-i*y,E=h*p-i*d,F=c*A-m*u,I=c*_-l*u,D=c*g-x*u,R=m*_-l*A,O=m*g-x*A,z=l*g-x*_,B=b*z-v*O+C*R+S*D-k*I+E*F;return B?(B=1/B,a[0]=(y*z-d*O+p*R)*B,a[1]=(h*O-t*z-i*R)*B,a[2]=(A*E-_*k+g*S)*B,a[3]=(l*k-m*E-x*S)*B,a[4]=(d*D-s*z-p*I)*B,a[5]=(r*z-h*D+i*I)*B,a[6]=(_*C-u*E-g*v)*B,a[7]=(c*E-l*C+x*v)*B,a[8]=(s*O-y*D+p*F)*B,a[9]=(t*D-r*O-i*F)*B,a[10]=(u*k-A*C+g*b)*B,a[11]=(m*C-c*k-x*b)*B,a[12]=(y*I-s*R-d*F)*B,a[13]=(r*R-t*I+h*F)*B,a[14]=(A*v-u*S-_*b)*B,a[15]=(c*S-m*v+l*b)*B,a):null}},{}],99:[function(f,M,T){var e=f("./identity");M.exports=a;function a(n,r,t,h){var i,s,y,d,p,c,m,l,x,u,A=r[0],_=r[1],g=r[2],b=h[0],v=h[1],C=h[2],S=t[0],k=t[1],E=t[2];return Math.abs(A-S)<1e-6&&Math.abs(_-k)<1e-6&&Math.abs(g-E)<1e-6?e(n):(m=A-S,l=_-k,x=g-E,u=1/Math.sqrt(m*m+l*l+x*x),m*=u,l*=u,x*=u,i=v*x-C*l,s=C*m-b*x,y=b*l-v*m,u=Math.sqrt(i*i+s*s+y*y),u?(u=1/u,i*=u,s*=u,y*=u):(i=0,s=0,y=0),d=l*y-x*s,p=x*i-m*y,c=m*s-l*i,u=Math.sqrt(d*d+p*p+c*c),u?(u=1/u,d*=u,p*=u,c*=u):(d=0,p=0,c=0),n[0]=i,n[1]=d,n[2]=m,n[3]=0,n[4]=s,n[5]=p,n[6]=l,n[7]=0,n[8]=y,n[9]=c,n[10]=x,n[11]=0,n[12]=-(i*A+s*_+y*g),n[13]=-(d*A+p*_+c*g),n[14]=-(m*A+l*_+x*g),n[15]=1,n)}},{"./identity":97}],100:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=n[3],y=n[4],d=n[5],p=n[6],c=n[7],m=n[8],l=n[9],x=n[10],u=n[11],A=n[12],_=n[13],g=n[14],b=n[15],v=r[0],C=r[1],S=r[2],k=r[3];return a[0]=v*t+C*y+S*m+k*A,a[1]=v*h+C*d+S*l+k*_,a[2]=v*i+C*p+S*x+k*g,a[3]=v*s+C*c+S*u+k*b,v=r[4],C=r[5],S=r[6],k=r[7],a[4]=v*t+C*y+S*m+k*A,a[5]=v*h+C*d+S*l+k*_,a[6]=v*i+C*p+S*x+k*g,a[7]=v*s+C*c+S*u+k*b,v=r[8],C=r[9],S=r[10],k=r[11],a[8]=v*t+C*y+S*m+k*A,a[9]=v*h+C*d+S*l+k*_,a[10]=v*i+C*p+S*x+k*g,a[11]=v*s+C*c+S*u+k*b,v=r[12],C=r[13],S=r[14],k=r[15],a[12]=v*t+C*y+S*m+k*A,a[13]=v*h+C*d+S*l+k*_,a[14]=v*i+C*p+S*x+k*g,a[15]=v*s+C*c+S*u+k*b,a}},{}],101:[function(f,M,T){M.exports=e;function e(a,n,r,t,h,i,s){var y=1/(n-r),d=1/(t-h),p=1/(i-s);return a[0]=-2*y,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*p,a[11]=0,a[12]=(n+r)*y,a[13]=(h+t)*d,a[14]=(s+i)*p,a[15]=1,a}},{}],102:[function(f,M,T){M.exports=e;function e(a,n,r,t,h){var i=1/Math.tan(n/2),s=1/(t-h);return a[0]=i/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(h+t)*s,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*h*t*s,a[15]=0,a}},{}],103:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=t[0],i=t[1],s=t[2],y=Math.sqrt(h*h+i*i+s*s),d,p,c,m,l,x,u,A,_,g,b,v,C,S,k,E,F,I,D,R,O,z,B,G;return Math.abs(y)<1e-6?null:(y=1/y,h*=y,i*=y,s*=y,d=Math.sin(r),p=Math.cos(r),c=1-p,m=n[0],l=n[1],x=n[2],u=n[3],A=n[4],_=n[5],g=n[6],b=n[7],v=n[8],C=n[9],S=n[10],k=n[11],E=h*h*c+p,F=i*h*c+s*d,I=s*h*c-i*d,D=h*i*c-s*d,R=i*i*c+p,O=s*i*c+h*d,z=h*s*c+i*d,B=i*s*c-h*d,G=s*s*c+p,a[0]=m*E+A*F+v*I,a[1]=l*E+_*F+C*I,a[2]=x*E+g*F+S*I,a[3]=u*E+b*F+k*I,a[4]=m*D+A*R+v*O,a[5]=l*D+_*R+C*O,a[6]=x*D+g*R+S*O,a[7]=u*D+b*R+k*O,a[8]=m*z+A*B+v*G,a[9]=l*z+_*B+C*G,a[10]=x*z+g*B+S*G,a[11]=u*z+b*B+k*G,n!==a&&(a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a)}},{}],104:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),i=n[4],s=n[5],y=n[6],d=n[7],p=n[8],c=n[9],m=n[10],l=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=i*h+p*t,a[5]=s*h+c*t,a[6]=y*h+m*t,a[7]=d*h+l*t,a[8]=p*h-i*t,a[9]=c*h-s*t,a[10]=m*h-y*t,a[11]=l*h-d*t,a}},{}],105:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),i=n[0],s=n[1],y=n[2],d=n[3],p=n[8],c=n[9],m=n[10],l=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=i*h-p*t,a[1]=s*h-c*t,a[2]=y*h-m*t,a[3]=d*h-l*t,a[8]=i*t+p*h,a[9]=s*t+c*h,a[10]=y*t+m*h,a[11]=d*t+l*h,a}},{}],106:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),i=n[0],s=n[1],y=n[2],d=n[3],p=n[4],c=n[5],m=n[6],l=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=i*h+p*t,a[1]=s*h+c*t,a[2]=y*h+m*t,a[3]=d*h+l*t,a[4]=p*h-i*t,a[5]=c*h-s*t,a[6]=m*h-y*t,a[7]=l*h-d*t,a}},{}],107:[function(f,M,T){M.exports=e;function e(a,n,r){var t=r[0],h=r[1],i=r[2];return a[0]=n[0]*t,a[1]=n[1]*t,a[2]=n[2]*t,a[3]=n[3]*t,a[4]=n[4]*h,a[5]=n[5]*h,a[6]=n[6]*h,a[7]=n[7]*h,a[8]=n[8]*i,a[9]=n[9]*i,a[10]=n[10]*i,a[11]=n[11]*i,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}},{}],108:[function(f,M,T){M.exports=e;function e(a,n,r){var t=r[0],h=r[1],i=r[2],s,y,d,p,c,m,l,x,u,A,_,g;return n===a?(a[12]=n[0]*t+n[4]*h+n[8]*i+n[12],a[13]=n[1]*t+n[5]*h+n[9]*i+n[13],a[14]=n[2]*t+n[6]*h+n[10]*i+n[14],a[15]=n[3]*t+n[7]*h+n[11]*i+n[15]):(s=n[0],y=n[1],d=n[2],p=n[3],c=n[4],m=n[5],l=n[6],x=n[7],u=n[8],A=n[9],_=n[10],g=n[11],a[0]=s,a[1]=y,a[2]=d,a[3]=p,a[4]=c,a[5]=m,a[6]=l,a[7]=x,a[8]=u,a[9]=A,a[10]=_,a[11]=g,a[12]=s*t+c*h+u*i+n[12],a[13]=y*t+m*h+A*i+n[13],a[14]=d*t+l*h+_*i+n[14],a[15]=p*t+x*h+g*i+n[15]),a}},{}],109:[function(f,M,T){M.exports=e;function e(a,n){if(a===n){var r=n[1],t=n[2],h=n[3],i=n[6],s=n[7],y=n[11];a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=r,a[6]=n[9],a[7]=n[13],a[8]=t,a[9]=i,a[11]=n[14],a[12]=h,a[13]=s,a[14]=y}else a[0]=n[0],a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=n[1],a[5]=n[5],a[6]=n[9],a[7]=n[13],a[8]=n[2],a[9]=n[6],a[10]=n[10],a[11]=n[14],a[12]=n[3],a[13]=n[7],a[14]=n[11],a[15]=n[15];return a}},{}],110:[function(f,M,T){var e=f("barycentric"),a=f("polytope-closest-point/lib/closest_point_2d.js");M.exports=i;function n(s,y){for(var d=[0,0,0,0],p=0;p<4;++p)for(var c=0;c<4;++c)d[c]+=s[4*p+c]*y[p];return d}function r(s,y,d,p,c){for(var m=n(p,n(d,n(y,[s[0],s[1],s[2],1]))),l=0;l<3;++l)m[l]/=m[3];return[.5*c[0]*(1+m[0]),.5*c[1]*(1-m[1])]}function t(s,y){if(s.length===2){for(var d=0,p=0,c=0;c<2;++c)d+=Math.pow(y[c]-s[0][c],2),p+=Math.pow(y[c]-s[1][c],2);return d=Math.sqrt(d),p=Math.sqrt(p),d+p<1e-6?[1,0]:[p/(d+p),d/(p+d)]}else if(s.length===3){var m=[0,0];return a(s[0],s[1],s[2],y,m),e(s,m)}return[]}function h(s,y){for(var d=[0,0,0],p=0;p<s.length;++p)for(var c=s[p],m=y[p],l=0;l<3;++l)d[l]+=m*c[l];return d}function i(s,y,d,p,c,m){if(s.length===1)return[0,s[0].slice()];for(var l=new Array(s.length),x=0;x<s.length;++x)l[x]=r(s[x],d,p,c,m);for(var u=0,A=1/0,x=0;x<l.length;++x){for(var _=0,g=0;g<2;++g)_+=Math.pow(l[x][g]-y[g],2);_<A&&(A=_,u=x)}for(var b=t(l,y),v=0,x=0;x<3;++x){if(b[x]<-.001||b[x]>1.0001)return null;v+=b[x]}return Math.abs(v-1)>.001?null:[u,h(s,b),b]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),y=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:h,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:s,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:d,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:p,fragment:c,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(f,M,T){var e=1e-6,a=1e-6,n=f("gl-shader"),r=f("gl-buffer"),t=f("gl-vao"),h=f("gl-texture2d"),i=f("normals"),s=f("gl-mat4/multiply"),y=f("gl-mat4/invert"),d=f("ndarray"),p=f("colormap"),c=f("simplicial-complex-contour"),m=f("typedarray-pool"),l=f("./lib/shaders"),x=f("./lib/closest-point"),u=l.meshShader,A=l.wireShader,_=l.pointShader,g=l.pickShader,b=l.pointPickShader,v=l.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(X,j,re,ue,K,te,Y,V,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye,ge,me,Me,Le,Oe,_e,Ee){this.gl=X,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=j,this.dirty=!0,this.triShader=re,this.lineShader=ue,this.pointShader=K,this.pickShader=te,this.pointPickShader=Y,this.contourShader=V,this.trianglePositions=ee,this.triangleColors=Z,this.triangleNormals=ie,this.triangleUVs=q,this.triangleIds=ne,this.triangleVAO=se,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=be,this.edgeUVs=ce,this.edgeIds=oe,this.edgeVAO=de,this.edgeCount=0,this.pointPositions=ye,this.pointColors=me,this.pointUVs=Me,this.pointSizes=Le,this.pointIds=ge,this.pointVAO=Oe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=Ee,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(X){this.pickId=X};function E(X,j){if(!j||!j.length)return 1;for(var re=0;re<j.length;++re){if(j.length<2)return 1;if(j[re][0]===X)return j[re][1];if(j[re][0]>X&&re>0){var ue=(j[re][0]-X)/(j[re][0]-j[re-1][0]);return j[re][1]*(1-ue)+ue*j[re-1][1]}}return 1}function F(X,j){for(var re=p({colormap:X,nshades:256,format:"rgba"}),ue=new Uint8Array(256*4),K=0;K<256;++K){for(var te=re[K],Y=0;Y<3;++Y)ue[4*K+Y]=te[Y];j?ue[4*K+3]=255*E(K/255,j):ue[4*K+3]=255*te[3]}return d(ue,[256,256,4],[4,0,1])}function I(X){for(var j=X.length,re=new Array(j),ue=0;ue<j;++ue)re[ue]=X[ue][2];return re}k.highlight=function(X){if(!X||!this.contourEnable){this.contourCount=0;return}for(var j=c(this.cells,this.intensity,X.intensity),re=j.cells,ue=j.vertexIds,K=j.vertexWeights,te=re.length,Y=m.mallocFloat32(2*3*te),V=0,ee=0;ee<te;++ee)for(var ne=re[ee],Z=0;Z<2;++Z){var q=ne[0];ne.length===2&&(q=ne[Z]);for(var ie=ue[q][0],se=ue[q][1],ae=K[q],oe=1-ae,be=this.positions[ie],ce=this.positions[se],de=0;de<3;++de)Y[V++]=ae*be[de]+oe*ce[de]}this.contourCount=V/3|0,this.contourPositions.update(Y.subarray(0,V)),m.free(Y)},k.update=function(X){X=X||{};var j=this.gl;this.dirty=!0,"contourEnable"in X&&(this.contourEnable=X.contourEnable),"contourColor"in X&&(this.contourColor=X.contourColor),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"lightPosition"in X&&(this.lightPosition=X.lightPosition),this.hasAlpha=!1,"opacity"in X&&(this.opacity=X.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in X&&(this.opacityscale=X.opacityscale,this.hasAlpha=!0),"ambient"in X&&(this.ambientLight=X.ambient),"diffuse"in X&&(this.diffuseLight=X.diffuse),"specular"in X&&(this.specularLight=X.specular),"roughness"in X&&(this.roughness=X.roughness),"fresnel"in X&&(this.fresnel=X.fresnel),X.texture?(this.texture.dispose(),this.texture=h(j,X.texture)):X.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=j.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=j.LINEAR,this.texture.setPixels(F(X.colormap,this.opacityscale)),this.texture.generateMipmap());var re=X.cells,ue=X.positions;if(!ue||!re)return;var K=[],te=[],Y=[],V=[],ee=[],ne=[],Z=[],q=[],ie=[],se=[],ae=[],oe=[],be=[],ce=[];this.cells=re,this.positions=ue;var de=X.vertexNormals,ye=X.cellNormals,ge=X.vertexNormalsEpsilon===void 0?e:X.vertexNormalsEpsilon,me=X.faceNormalsEpsilon===void 0?a:X.faceNormalsEpsilon;X.useFacetNormals&&!ye&&(ye=i.faceNormals(re,ue,me)),!ye&&!de&&(de=i.vertexNormals(re,ue,ge));var Me=X.vertexColors,Le=X.cellColors,Oe=X.meshColor||[1,1,1,1],_e=X.vertexUVs,Ee=X.vertexIntensity,Ze=X.cellUVs,Ge=X.cellIntensity,Fe=1/0,Re=-1/0;if(!_e&&!Ze)if(Ee)if(X.vertexIntensityBounds)Fe=+X.vertexIntensityBounds[0],Re=+X.vertexIntensityBounds[1];else for(var We=0;We<Ee.length;++We){var xt=Ee[We];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}else if(Ge)if(X.cellIntensityBounds)Fe=+X.cellIntensityBounds[0],Re=+X.cellIntensityBounds[1];else for(var We=0;We<Ge.length;++We){var xt=Ge[We];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}else for(var We=0;We<ue.length;++We){var xt=ue[We][2];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}Ee?this.intensity=Ee:Ge?this.intensity=Ge:this.intensity=I(ue),this.pickVertex=!(Ge||Le);var Nt=X.pointSizes,tr=X.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var We=0;We<ue.length;++We)for(var Vt=ue[We],Pt=0;Pt<3;++Pt)isNaN(Vt[Pt])||!isFinite(Vt[Pt])||(this.bounds[0][Pt]=Math.min(this.bounds[0][Pt],Vt[Pt]),this.bounds[1][Pt]=Math.max(this.bounds[1][Pt],Vt[Pt]));var $t=0,Ut=0,Lt=0;e:for(var We=0;We<re.length;++We){var Ye=re[We];switch(Ye.length){case 1:for(var ot=Ye[0],Vt=ue[ot],Pt=0;Pt<3;++Pt)if(isNaN(Vt[Pt])||!isFinite(Vt[Pt]))continue e;se.push(Vt[0],Vt[1],Vt[2]);var Ve;Me?Ve=Me[ot]:Le?Ve=Le[We]:Ve=Oe,this.opacityscale&&Ee?te.push(Ve[0],Ve[1],Ve[2],this.opacity*E((Ee[ot]-Fe)/(Re-Fe),this.opacityscale)):Ve.length===3?ae.push(Ve[0],Ve[1],Ve[2],this.opacity):(ae.push(Ve[0],Ve[1],Ve[2],Ve[3]*this.opacity),Ve[3]<1&&(this.hasAlpha=!0));var Ae;_e?Ae=_e[ot]:Ee?Ae=[(Ee[ot]-Fe)/(Re-Fe),0]:Ze?Ae=Ze[We]:Ge?Ae=[(Ge[We]-Fe)/(Re-Fe),0]:Ae=[(Vt[2]-Fe)/(Re-Fe),0],oe.push(Ae[0],Ae[1]),Nt?be.push(Nt[ot]):be.push(tr),ce.push(We),Lt+=1;break;case 2:for(var Pt=0;Pt<2;++Pt)for(var ot=Ye[Pt],Vt=ue[ot],He=0;He<3;++He)if(isNaN(Vt[He])||!isFinite(Vt[He]))continue e;for(var Pt=0;Pt<2;++Pt){var ot=Ye[Pt],Vt=ue[ot];ne.push(Vt[0],Vt[1],Vt[2]);var Ve;Me?Ve=Me[ot]:Le?Ve=Le[We]:Ve=Oe,this.opacityscale&&Ee?te.push(Ve[0],Ve[1],Ve[2],this.opacity*E((Ee[ot]-Fe)/(Re-Fe),this.opacityscale)):Ve.length===3?Z.push(Ve[0],Ve[1],Ve[2],this.opacity):(Z.push(Ve[0],Ve[1],Ve[2],Ve[3]*this.opacity),Ve[3]<1&&(this.hasAlpha=!0));var Ae;_e?Ae=_e[ot]:Ee?Ae=[(Ee[ot]-Fe)/(Re-Fe),0]:Ze?Ae=Ze[We]:Ge?Ae=[(Ge[We]-Fe)/(Re-Fe),0]:Ae=[(Vt[2]-Fe)/(Re-Fe),0],q.push(Ae[0],Ae[1]),ie.push(We)}Ut+=1;break;case 3:for(var Pt=0;Pt<3;++Pt)for(var ot=Ye[Pt],Vt=ue[ot],He=0;He<3;++He)if(isNaN(Vt[He])||!isFinite(Vt[He]))continue e;for(var Pt=0;Pt<3;++Pt){var ot=Ye[2-Pt],Vt=ue[ot];K.push(Vt[0],Vt[1],Vt[2]);var Ve;Me?Ve=Me[ot]:Le?Ve=Le[We]:Ve=Oe,Ve?this.opacityscale&&Ee?te.push(Ve[0],Ve[1],Ve[2],this.opacity*E((Ee[ot]-Fe)/(Re-Fe),this.opacityscale)):Ve.length===3?te.push(Ve[0],Ve[1],Ve[2],this.opacity):(te.push(Ve[0],Ve[1],Ve[2],Ve[3]*this.opacity),Ve[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1);var Ae;_e?Ae=_e[ot]:Ee?Ae=[(Ee[ot]-Fe)/(Re-Fe),0]:Ze?Ae=Ze[We]:Ge?Ae=[(Ge[We]-Fe)/(Re-Fe),0]:Ae=[(Vt[2]-Fe)/(Re-Fe),0],V.push(Ae[0],Ae[1]);var Je;de?Je=de[ot]:Je=ye[We],Y.push(Je[0],Je[1],Je[2]),ee.push(We)}$t+=1;break}}this.pointCount=Lt,this.edgeCount=Ut,this.triangleCount=$t,this.pointPositions.update(se),this.pointColors.update(ae),this.pointUVs.update(oe),this.pointSizes.update(be),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update(ne),this.edgeColors.update(Z),this.edgeUVs.update(q),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(K),this.triangleColors.update(te),this.triangleUVs.update(V),this.triangleNormals.update(Y),this.triangleIds.update(new Uint32Array(ee))},k.drawTransparent=k.draw=function(X){X=X||{};for(var j=this.gl,re=X.model||C,ue=X.view||C,K=X.projection||C,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)te[0][Y]=Math.max(te[0][Y],this.clipBounds[0][Y]),te[1][Y]=Math.min(te[1][Y],this.clipBounds[1][Y]);var V={model:re,view:ue,projection:K,inverseModel:C.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};V.inverseModel=y(V.inverseModel,V.model),j.disable(j.CULL_FACE),this.texture.bind(0);var ee=new Array(16);s(ee,V.view,V.model),s(ee,V.projection,ee),y(ee,ee);for(var Y=0;Y<3;++Y)V.eyePosition[Y]=ee[12+Y]/ee[15];for(var ne=ee[15],Y=0;Y<3;++Y)ne+=this.lightPosition[Y]*ee[4*Y+3];for(var Y=0;Y<3;++Y){for(var Z=ee[12+Y],q=0;q<3;++q)Z+=ee[4*q+Y]*this.lightPosition[q];V.lightPosition[Y]=Z/ne}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=V,this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=V,this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=V,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=V,this.contourVAO.bind(),j.drawArrays(j.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(X){X=X||{};for(var j=this.gl,re=X.model||C,ue=X.view||C,K=X.projection||C,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)te[0][Y]=Math.max(te[0][Y],this.clipBounds[0][Y]),te[1][Y]=Math.min(te[1][Y],this.clipBounds[1][Y]);this._model=[].slice.call(re),this._view=[].slice.call(ue),this._projection=[].slice.call(K),this._resolution=[j.drawingBufferWidth,j.drawingBufferHeight];var V={model:re,view:ue,projection:K,clipBounds:te,pickId:this.pickId/255},ee=this.pickShader;if(ee.bind(),ee.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ee=this.pointPickShader;ee.bind(),ee.uniforms=V,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(X){if(!X||X.id!==this.pickId)return null;for(var j=X.value[0]+256*X.value[1]+65536*X.value[2],re=this.cells[j],ue=this.positions,K=new Array(re.length),te=0;te<re.length;++te)K[te]=ue[re[te]];var Y=X.coord[0],V=X.coord[1];if(!this.pickVertex){var ee=this.positions[re[0]],ne=this.positions[re[1]],Z=this.positions[re[2]],q=[(ee[0]+ne[0]+Z[0])/3,(ee[1]+ne[1]+Z[1])/3,(ee[2]+ne[2]+Z[2])/3];return{_cellCenter:!0,position:[Y,V],index:j,cell:re,cellId:j,intensity:this.intensity[j],dataCoordinate:q}}var ie=x(K,[Y*this.pixelRatio,this._resolution[1]-V*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var se=ie[2],ae=0,te=0;te<re.length;++te)ae+=se[te]*this.intensity[re[te]];return{position:ie[1],index:re[ie[0]],cell:re,cellId:j,intensity:ae,dataCoordinate:this.positions[re[ie[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(X){var j=n(X,u.vertex,u.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.normal.location=4,j}function R(X){var j=n(X,A.vertex,A.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j}function O(X){var j=n(X,_.vertex,_.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.pointSize.location=4,j}function z(X){var j=n(X,g.vertex,g.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j}function B(X){var j=n(X,b.vertex,b.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.pointSize.location=4,j}function G(X){var j=n(X,v.vertex,v.fragment);return j.attributes.position.location=0,j}function Q(X,j){arguments.length===1&&(j=X,X=j.gl);var re=X.getExtension("OES_standard_derivatives")||X.getExtension("MOZ_OES_standard_derivatives")||X.getExtension("WEBKIT_OES_standard_derivatives");if(!re)throw new Error("derivatives not supported");var ue=D(X),K=R(X),te=O(X),Y=z(X),V=B(X),ee=G(X),ne=h(X,d(new Uint8Array([255,255,255,255]),[1,1,4]));ne.generateMipmap(),ne.minFilter=X.LINEAR_MIPMAP_LINEAR,ne.magFilter=X.LINEAR;var Z=r(X),q=r(X),ie=r(X),se=r(X),ae=r(X),oe=t(X,[{buffer:Z,type:X.FLOAT,size:3},{buffer:ae,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:q,type:X.FLOAT,size:4},{buffer:ie,type:X.FLOAT,size:2},{buffer:se,type:X.FLOAT,size:3}]),be=r(X),ce=r(X),de=r(X),ye=r(X),ge=t(X,[{buffer:be,type:X.FLOAT,size:3},{buffer:ye,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:X.FLOAT,size:4},{buffer:de,type:X.FLOAT,size:2}]),me=r(X),Me=r(X),Le=r(X),Oe=r(X),_e=r(X),Ee=t(X,[{buffer:me,type:X.FLOAT,size:3},{buffer:_e,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Me,type:X.FLOAT,size:4},{buffer:Le,type:X.FLOAT,size:2},{buffer:Oe,type:X.FLOAT,size:1}]),Ze=r(X),Ge=t(X,[{buffer:Ze,type:X.FLOAT,size:3}]),Fe=new S(X,ne,ue,K,te,Y,V,ee,Z,ae,q,ie,se,oe,be,ye,ce,de,ge,me,_e,Me,Le,Oe,Ee,Ze,Ge);return Fe.update(j),Fe}M.exports=Q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-shader"),n=f("./shaders");function r(i,s,y){this.plot=i,this.vbo=s,this.shader=y}var t=r.prototype;t.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var i=[0,0],s=[0,0];return function(y,d,p,c,m){var l=this.plot,x=this.shader,u=l.gl;i[0]=y,i[1]=d,s[0]=p,s[1]=c,x.uniforms.lo=i,x.uniforms.hi=s,x.uniforms.color=m,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(i){var s=i.gl,y=e(s,[0,0,0,1,1,0,1,1]),d=a(s,n.boxVert,n.lineFrag);return new r(i,y,d)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(f,M,T){M.exports=s;var e=f("gl-buffer"),a=f("gl-shader"),n=f("binary-search-bounds"),r=f("./shaders");function t(y,d,p,c){this.plot=y,this.vbo=d,this.shader=p,this.tickShader=c,this.ticks=[[],[]]}function h(y,d){return y-d}var i=t.prototype;i.draw=function(){var y=[0,0],d=[0,0],p=[0,0];return function(){for(var c=this.plot,m=this.vbo,l=this.shader,x=this.ticks,u=c.gl,A=c._tickBounds,_=c.dataBox,g=c.viewBox,b=c.gridLineWidth,v=c.gridLineColor,C=c.gridLineEnable,S=c.pixelRatio,k=0;k<2;++k){var E=A[k],F=A[k+2],I=F-E,D=.5*(_[k+2]+_[k]),R=_[k+2]-_[k];d[k]=2*I/R,y[k]=2*(E-D)/R}l.bind(),m.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=y,l.uniforms.dataScale=d;for(var O=0,k=0;k<2;++k){p[0]=p[1]=0,p[k]=1,l.uniforms.dataAxis=p,l.uniforms.lineWidth=b[k]/(g[k+2]-g[k])*S,l.uniforms.color=v[k];var z=x[k].length*6;C[k]&&z&&u.drawArrays(u.TRIANGLES,O,z),O+=z}}}(),i.drawTickMarks=function(){var y=[0,0],d=[0,0],p=[1,0],c=[0,1],m=[0,0],l=[0,0];return function(){for(var x=this.plot,u=this.vbo,A=this.tickShader,_=this.ticks,g=x.gl,b=x._tickBounds,v=x.dataBox,C=x.viewBox,S=x.pixelRatio,k=x.screenBox,E=k[2]-k[0],F=k[3]-k[1],I=C[2]-C[0],D=C[3]-C[1],R=0;R<2;++R){var O=b[R],z=b[R+2],B=z-O,G=.5*(v[R+2]+v[R]),Q=v[R+2]-v[R];d[R]=2*B/Q,y[R]=2*(O-G)/Q}d[0]*=I/E,y[0]*=I/E,d[1]*=D/F,y[1]*=D/F,A.bind(),u.bind(),A.attributes.dataCoord.pointer();var X=A.uniforms;X.dataShift=y,X.dataScale=d;var j=x.tickMarkLength,re=x.tickMarkWidth,ue=x.tickMarkColor,K=0,te=_[0].length*6,Y=Math.min(n.ge(_[0],(v[0]-b[0])/(b[2]-b[0]),h),_[0].length),V=Math.min(n.gt(_[0],(v[2]-b[0])/(b[2]-b[0]),h),_[0].length),ee=K+6*Y,ne=6*Math.max(0,V-Y),Z=Math.min(n.ge(_[1],(v[1]-b[1])/(b[3]-b[1]),h),_[1].length),q=Math.min(n.gt(_[1],(v[3]-b[1])/(b[3]-b[1]),h),_[1].length),ie=te+6*Z,se=6*Math.max(0,q-Z);m[0]=2*(C[0]-j[1])/E-1,m[1]=(C[3]+C[1])/F-1,l[0]=j[1]*S/E,l[1]=re[1]*S/F,se&&(X.color=ue[1],X.tickScale=l,X.dataAxis=c,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ie,se)),m[0]=(C[2]+C[0])/E-1,m[1]=2*(C[1]-j[0])/F-1,l[0]=re[0]*S/E,l[1]=j[0]*S/F,ne&&(X.color=ue[0],X.tickScale=l,X.dataAxis=p,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ee,ne)),m[0]=2*(C[2]+j[3])/E-1,m[1]=(C[3]+C[1])/F-1,l[0]=j[3]*S/E,l[1]=re[3]*S/F,se&&(X.color=ue[3],X.tickScale=l,X.dataAxis=c,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ie,se)),m[0]=(C[2]+C[0])/E-1,m[1]=2*(C[3]+j[2])/F-1,l[0]=re[2]*S/E,l[1]=j[2]*S/F,ne&&(X.color=ue[2],X.tickScale=l,X.dataAxis=p,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ee,ne))}}(),i.update=function(){var y=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1];return function(p){var c=p.ticks,m=p.bounds,l=new Float32Array(6*3*(c[0].length+c[1].length));this.plot.zeroLineEnable;for(var x=0,u=[[],[]],A=0;A<2;++A)for(var _=u[A],g=c[A],b=m[A],v=m[A+2],C=0;C<g.length;++C){var S=(g[C].x-b)/(v-b);_.push(S);for(var k=0;k<6;++k)l[x++]=S,l[x++]=y[k],l[x++]=d[k]}this.ticks=u,this.vbo.update(l)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function s(y){var d=y.gl,p=e(d),c=a(d,r.gridVert,r.gridFrag),m=a(d,r.tickVert,r.gridFrag),l=new t(y,p,c,m);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-shader"),n=f("./shaders");function r(i,s,y){this.plot=i,this.vbo=s,this.shader=y}var t=r.prototype;t.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var i=[0,0],s=[0,0];return function(y,d,p,c,m,l){var x=this.plot,u=this.shader,A=x.gl;i[0]=y,i[1]=d,s[0]=p,s[1]=c,u.uniforms.start=i,u.uniforms.end=s,u.uniforms.width=m*x.pixelRatio,u.uniforms.color=l,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(i){var s=i.gl,y=e(s,[-1,-1,-1,1,1,-1,1,1]),d=a(s,n.lineVert,n.lineFrag),p=new r(i,y,d);return p}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(f,M,T){var e=f("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);M.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(f,M,T){M.exports=s;var e=f("gl-buffer"),a=f("gl-shader"),n=f("text-cache"),r=f("binary-search-bounds"),t=f("./shaders");function h(y,d,p){this.plot=y,this.vbo=d,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var i=h.prototype;i.drawTicks=function(){var y=[0,0],d=[0,0],p=[0,0];return function(c){var m=this.plot,l=this.shader,x=this.tickX[c],u=this.tickOffset[c],A=m.gl,_=m.viewBox,g=m.dataBox,b=m.screenBox,v=m.pixelRatio,C=m.tickEnable,S=m.tickPad,k=m.tickColor,E=m.tickAngle,F=m.labelEnable,I=m.labelPad,D=m.labelColor,R=m.labelAngle,O=this.labelOffset[c],z=this.labelCount[c],B=r.lt(x,g[c]),G=r.le(x,g[c+2]);y[0]=y[1]=0,y[c]=1,d[c]=(_[2+c]+_[c])/(b[2+c]-b[c])-1;var Q=2/b[2+(c^1)]-b[c^1];d[c^1]=Q*_[c^1]-1,C[c]&&(d[c^1]-=Q*v*S[c],B<G&&u[G]>u[B]&&(l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=k[c],l.uniforms.angle=E[c],A.drawArrays(A.TRIANGLES,u[B],u[G]-u[B]))),F[c]&&z&&(d[c^1]-=Q*v*I[c],l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=D[c],l.uniforms.angle=R[c],A.drawArrays(A.TRIANGLES,O,z)),d[c^1]=Q*_[2+(c^1)]-1,C[c+2]&&(d[c^1]+=Q*v*S[c+2],B<G&&u[G]>u[B]&&(l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=k[c+2],l.uniforms.angle=E[c+2],A.drawArrays(A.TRIANGLES,u[B],u[G]-u[B]))),F[c+2]&&z&&(d[c^1]+=Q*v*I[c+2],l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=D[c+2],l.uniforms.angle=R[c+2],A.drawArrays(A.TRIANGLES,O,z))}}(),i.drawTitle=function(){var y=[0,0],d=[0,0];return function(){var p=this.plot,c=this.shader,m=p.gl,l=p.screenBox,x=p.titleCenter,u=p.titleAngle,A=p.titleColor,_=p.pixelRatio;if(!!this.titleCount){for(var g=0;g<2;++g)d[g]=2*(x[g]*_-l[g])/(l[2+g]-l[g])-1;c.bind(),c.uniforms.dataAxis=y,c.uniforms.screenOffset=d,c.uniforms.angle=u,c.uniforms.color=A,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),i.bind=function(){var y=[0,0],d=[0,0],p=[0,0];return function(){var c=this.plot,m=this.shader,l=c._tickBounds,x=c.dataBox,u=c.screenBox,A=c.viewBox;m.bind();for(var _=0;_<2;++_){var g=l[_],b=l[_+2],v=b-g,C=.5*(x[_+2]+x[_]),S=x[_+2]-x[_],k=A[_],E=A[_+2],F=E-k,I=u[_],D=u[_+2],R=D-I;d[_]=2*v/S*F/R,y[_]=2*(g-C)/S*F/R}p[1]=2*c.pixelRatio/(u[3]-u[1]),p[0]=p[1]*(u[3]-u[1])/(u[2]-u[0]),m.uniforms.dataScale=d,m.uniforms.dataShift=y,m.uniforms.textScale=p,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),i.update=function(y){var d=[],p=y.ticks,c=y.bounds,m,l,x,u,A;for(A=0;A<2;++A){var _=[Math.floor(d.length/3)],g=[-1/0],b=p[A];for(m=0;m<b.length;++m){var v=b[m],C=v.x,S=v.text,k=v.font||"sans-serif";u=v.fontSize||12;for(var E=1/(c[A+2]-c[A]),F=c[A],I=S.split(`
`),D=0;D<I.length;D++)for(x=n(k,I[D]).data,l=0;l<x.length;l+=2)d.push(x[l]*u,-x[l+1]*u-D*u*1.2,(C-F)*E);_.push(Math.floor(d.length/3)),g.push(C)}this.tickOffset[A]=_,this.tickX[A]=g}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(d.length/3),x=n(y.labelFont[A],y.labels[A],{textAlign:"center"}).data,u=y.labelSize[A],m=0;m<x.length;m+=2)d.push(x[m]*u,-x[m+1]*u,0);this.labelCount[A]=Math.floor(d.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(d.length/3),x=n(y.titleFont,y.title).data,u=y.titleSize,m=0;m<x.length;m+=2)d.push(x[m]*u,-x[m+1]*u,0);this.titleCount=Math.floor(d.length/3)-this.titleOffset,this.vbo.update(d)},i.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function s(y){var d=y.gl,p=e(d),c=a(d,t.textVert,t.textFrag),m=new h(y,p,c);return m}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(f,M,T){M.exports=d;var e=f("gl-select-static"),a=f("./lib/grid"),n=f("./lib/text"),r=f("./lib/line"),t=f("./lib/box");function h(p,c){this.gl=p,this.pickBuffer=c,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var i=h.prototype;i.setDirty=function(){this.dirty=this.pickDirty=!0},i.setOverlayDirty=function(){this.dirty=!0},i.nextDepthValue=function(){return this._depthCounter++/65536},i.draw=function(){return function(){var p=this.gl,c=this.screenBox,m=this.viewBox,l=this.dataBox,x=this.pixelRatio,u=this.grid,A=this.line,_=this.text,g=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var b=this.borderColor;p.clearColor(b[0]*b[3],b[1]*b[3],b[2]*b[3],b[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),p.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var v=this.backgroundColor;p.clearColor(v[0]*v[3],v[1]*v[3],v[2]*v[3],v[3]),p.clear(p.COLOR_BUFFER_BIT),u.draw();var C=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(C[0]||C[1]){A.bind();for(var E=0;E<2;++E)if(!(!C[E]||!(l[E]<=0&&l[E+2]>=0))){var F=c[E]-l[E]*(c[E+2]-c[E])/(l[E+2]-l[E]);E===0?A.drawLine(F,c[1],F,c[3],k[E],S[E]):A.drawLine(c[0],F,c[2],F,k[E],S[E])}}for(var E=0;E<g.length;++E)g[E].draw();p.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),A.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&A.drawLine(m[0],m[1]-.5*D[1]*x,m[0],m[3]+.5*D[3]*x,D[1],R[1]),I[0]&&A.drawLine(m[0]-.5*D[0]*x,m[1],m[2]+.5*D[2]*x,m[1],D[0],R[0]),I[3]&&A.drawLine(m[2],m[1]-.5*D[1]*x,m[2],m[3]+.5*D[3]*x,D[3],R[3]),I[2]&&A.drawLine(m[0]-.5*D[0]*x,m[3],m[2]+.5*D[2]*x,m[3],D[2],R[2]),_.bind();for(var E=0;E<2;++E)_.drawTicks(E);this.titleEnable&&_.drawTitle();for(var O=this.overlays,E=0;E<O.length;++E)O[E].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}}}(),i.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var c=1,m=this.objects,l=0;l<m.length;++l)c=m[l].drawPick(c);p.end()}}}(),i.pick=function(){return function(p,c){if(!this.static){var m=this.pixelRatio,l=this.pickPixelRatio,x=this.viewBox,u=Math.round((p-x[0]/m)*l)|0,A=Math.round((c-x[1]/m)*l)|0,_=this.pickBuffer.query(u,A,this.pickRadius);if(!_)return null;for(var g=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),b=this.objects,v=0;v<b.length;++v){var C=b[v].pick(u,A,g);if(C)return C}return null}}}();function s(p){for(var c=p.slice(),m=0;m<c.length;++m)c[m]=c[m].slice();return c}function y(p,c){return p.x-c.x}i.setScreenBox=function(p){var c=this.screenBox,m=this.pixelRatio;c[0]=Math.round(p[0]*m)|0,c[1]=Math.round(p[1]*m)|0,c[2]=Math.round(p[2]*m)|0,c[3]=Math.round(p[3]*m)|0,this.setDirty()},i.setDataBox=function(p){var c=this.dataBox,m=c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3];m&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],this.setDirty())},i.setViewBox=function(p){var c=this.pixelRatio,m=this.viewBox;m[0]=Math.round(p[0]*c)|0,m[1]=Math.round(p[1]*c)|0,m[2]=Math.round(p[2]*c)|0,m[3]=Math.round(p[3]*c)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*l)|0,Math.round((p[3]-p[1])*l)|0],this.setDirty()},i.update=function(p){p=p||{};var c=this.gl;this.pixelRatio=p.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(p.screenBox||[0,0,c.drawingBufferWidth/m,c.drawingBufferHeight/m]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var l=this.viewBox,x=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(p.dataBox||[-10,-10/x,10,10/x]),this.borderColor=p.borderColor!==!1?(p.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(l[0]+l[2])/m,(l[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=p.ticks||[[],[]],A=this._tickBounds;A[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(var _=0;_<2;++_){var g=u[_].slice(0);g.length!==0&&(g.sort(y),A[_]=Math.min(A[_],g[0].x),A[_+2]=Math.max(A[_+2],g[g.length-1].x))}this.grid.update({bounds:A,ticks:u}),this.text.update({bounds:A,ticks:u,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},i.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();this.objects.length=0;for(var p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},i.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},i.removeObject=function(p){for(var c=this.objects,m=0;m<c.length;++m)if(c[m]===p){c.splice(m,1),this.setDirty();break}},i.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},i.removeOverlay=function(p){for(var c=this.overlays,m=0;m<c.length;++m)if(c[m]===p){c.splice(m,1),this.setOverlayDirty();break}};function d(p){var c=p.gl,m=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]),l=new h(c,m);return l.grid=a(l),l.text=n(l),l.line=r(l),l.box=t(l),l.update(p),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(f,M,T){M.exports=i;var e=f("right-now"),a=f("3d-view"),n=f("mouse-change"),r=f("mouse-wheel"),t=f("mouse-event-offset"),h=f("has-passive-events");function i(s,y){s=s||document.body,y=y||{};var d=[.01,1/0];"distanceLimits"in y&&(d[0]=y.distanceLimits[0],d[1]=y.distanceLimits[1]),"zoomMin"in y&&(d[0]=y.zoomMin),"zoomMax"in y&&(d[1]=y.zoomMax);var p=a({center:y.center||[0,0,0],up:y.up||[0,1,0],eye:y.eye||[0,0,10],mode:y.mode||"orbit",distanceLimits:d}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,l=s.clientWidth,x=s.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:p,element:s,delay:y.delay||16,rotateSpeed:y.rotateSpeed||1,zoomSpeed:y.zoomSpeed||1,translateSpeed:y.translateSpeed||1,flipX:!!y.flipX,flipY:!!y.flipY,modes:p.modes,_ortho:y._ortho||y.projection&&y.projection.type==="orthographic"||!1,tick:function(){var A=e(),_=this.delay,g=A-2*_;p.idle(A-_),p.recalcMatrix(g),p.flush(A-(100+_*2));for(var b=!0,v=p.computedMatrix,C=0;C<16;++C)b=b&&c[C]===v[C],c[C]=v[C];var S=s.clientWidth===l&&s.clientHeight===x;return l=s.clientWidth,x=s.clientHeight,b?!S:(m=Math.exp(p.computedRadius[0]),!0)},lookAt:function(A,_,g){p.lookAt(p.lastT(),A,_,g)},rotate:function(A,_,g){p.rotate(p.lastT(),A,_,g)},pan:function(A,_,g){p.pan(p.lastT(),A,_,g)},translate:function(A,_,g){p.translate(p.lastT(),A,_,g)}};return Object.defineProperties(u,{matrix:{get:function(){return p.computedMatrix},set:function(A){return p.setMatrix(p.lastT(),A),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(A){var _=p.computedUp.slice(),g=p.computedEye.slice(),b=p.computedCenter.slice();if(p.setMode(A),A==="turntable"){var v=e();p._active.lookAt(v,g,b,_),p._active.lookAt(v+500,g,b,[0,0,1]),p._active.flush(v)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(A){return p.lookAt(p.lastT(),null,A),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(A){return p.lookAt(p.lastT(),A),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(A){return p.lookAt(p.lastT(),null,null,A),p.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(A){return p.setDistance(p.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(A){return p.setDistanceLimits(A),A},enumerable:!0}}),s.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),u._lastX=-1,u._lastY=-1,u._lastMods={shift:!1,control:!1,alt:!1,meta:!1},u.enableMouseListeners=function(){u.mouseListener=n(s,A),s.addEventListener("touchstart",function(_){var g=t(_.changedTouches[0],s);A(0,g[0],g[1],u._lastMods),A(1,g[0],g[1],u._lastMods)},h?{passive:!0}:!1),s.addEventListener("touchmove",function(_){var g=t(_.changedTouches[0],s);A(1,g[0],g[1],u._lastMods),_.preventDefault()},h?{passive:!1}:!1),s.addEventListener("touchend",function(_){A(0,u._lastX,u._lastY,u._lastMods)},h?{passive:!0}:!1);function A(_,g,b,v){var C=u.keyBindingMode;if(C!==!1){var S=C==="rotate",k=C==="pan",E=C==="zoom",F=!!v.control,I=!!v.alt,D=!!v.shift,R=!!(_&1),O=!!(_&2),z=!!(_&4),B=1/s.clientHeight,G=B*(g-u._lastX),Q=B*(b-u._lastY),X=u.flipX?1:-1,j=u.flipY?1:-1,re=Math.PI*u.rotateSpeed,ue=e();if(u._lastX!==-1&&u._lastY!==-1&&((S&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&p.rotate(ue,X*re*G,-j*re*Q,0),(k&&R&&!F&&!I&&!D||O||R&&F&&!I&&!D)&&p.pan(ue,-u.translateSpeed*G*m,u.translateSpeed*Q*m,0),E&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var K=-u.zoomSpeed*Q/window.innerHeight*(ue-p.lastT())*100;p.pan(ue,0,0,m*(Math.exp(K)-1))}return u._lastX=g,u._lastY=b,u._lastMods=v,!0}}u.wheelListener=r(s,function(_,g){if(u.keyBindingMode!==!1&&!!u.enableWheel){var b=u.flipX?1:-1,v=u.flipY?1:-1,C=e();if(Math.abs(_)>Math.abs(g))p.rotate(C,0,0,-_*b*Math.PI*u.rotateSpeed/window.innerWidth);else if(!u._ortho){var S=-u.zoomSpeed*v*g/window.innerHeight*(C-p.lastT())/20;p.pan(C,0,0,m*(Math.exp(S)-1))}}},!0)},u.enableMouseListeners(),u}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(f,M,T){var e=f("./camera.js"),a=f("gl-axes3d"),n=f("gl-axes3d/properties"),r=f("gl-spikes3d"),t=f("gl-select-static"),h=f("gl-fbo"),i=f("a-big-triangle"),s=f("mouse-change"),y=f("gl-mat4/perspective"),d=f("gl-mat4/ortho"),p=f("./lib/shader"),c=f("is-mobile")({tablet:!0,featureDetect:!0});M.exports={createScene:A,createCamera:e};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(g,b){var v=null;try{v=g.getContext("webgl",b),v||(v=g.getContext("experimental-webgl",b))}catch{return null}return v}function x(g){var b=Math.round(Math.log(Math.abs(g))/Math.log(10));if(b<0){var v=Math.round(Math.pow(10,-b));return Math.ceil(g*v)/v}else if(b>0){var v=Math.round(Math.pow(10,b));return Math.ceil(g/v)*v}return Math.ceil(g)}function u(g){return typeof g=="boolean"?g:!0}function A(g){g=g||{},g.camera=g.camera||{};var b=g.canvas;if(!b)if(b=document.createElement("canvas"),g.container){var v=g.container;v.appendChild(b)}else document.body.appendChild(b);var C=g.gl;if(C||(g.glOptions&&(c=!!g.glOptions.preserveDrawingBuffer),C=l(b,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:c})),!C)throw new Error("webgl not supported");var S=g.bounds||[[-10,-10,-10],[10,10,10]],k=new m,E=h(C,C.drawingBufferWidth,C.drawingBufferHeight,{preferFloat:!c}),F=p(C),I=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,D={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:I},R=g.axes||{},O=a(C,R);O.enable=!R.disable;var z=g.spikes||{},B=r(C,z),G=[],Q=[],X=[],j=[],re=!0,Y=!0,ue=new Array(16),K=new Array(16),te={view:null,projection:ue,model:K,_ortho:!1},Y=!0,V=[C.drawingBufferWidth,C.drawingBufferHeight],ee=g.cameraObject||e(b,D),ne={gl:C,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:b,selection:k,camera:ee,axes:O,axesPixels:null,spikes:B,bounds:S,objects:G,shape:V,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:u(g.autoResize),autoBounds:u(g.autoBounds),autoScale:!!g.autoScale,autoCenter:u(g.autoCenter),clipToBounds:u(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:te,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ye){this.aspect[0]=ye.x,this.aspect[1]=ye.y,this.aspect[2]=ye.z,Y=!0},setBounds:function(ye,ge){this.bounds[0][ye]=ge.min,this.bounds[1][ye]=ge.max},setClearColor:function(ye){this.clearColor=ye},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Z=[C.drawingBufferWidth/ne.pixelRatio|0,C.drawingBufferHeight/ne.pixelRatio|0];function q(){if(!ne._stopped&&!!ne.autoResize){var ye=b.parentNode,ge=1,me=1;ye&&ye!==document.body?(ge=ye.clientWidth,me=ye.clientHeight):(ge=window.innerWidth,me=window.innerHeight);var Me=Math.ceil(ge*ne.pixelRatio)|0,Le=Math.ceil(me*ne.pixelRatio)|0;if(Me!==b.width||Le!==b.height){b.width=Me,b.height=Le;var Oe=b.style;Oe.position=Oe.position||"absolute",Oe.left="0px",Oe.top="0px",Oe.width=ge+"px",Oe.height=me+"px",re=!0}}}ne.autoResize&&q(),window.addEventListener("resize",q);function ie(){for(var ye=G.length,ge=j.length,me=0;me<ge;++me)X[me]=0;e:for(var me=0;me<ye;++me){var Me=G[me],Le=Me.pickSlots;if(!Le){Q[me]=-1;continue}for(var Oe=0;Oe<ge;++Oe)if(X[Oe]+Le<255){Q[me]=Oe,Me.setPickBase(X[Oe]+1),X[Oe]+=Le;continue e}var _e=t(C,V);Q[me]=ge,j.push(_e),X.push(Le),Me.setPickBase(1),ge+=1}for(;ge>0&&X[ge-1]===0;)X.pop(),j.pop().dispose()}ne.update=function(ye){ne._stopped||(re=!0,Y=!0)},ne.add=function(ye){ne._stopped||(ye.axes=O,G.push(ye),Q.push(-1),re=!0,Y=!0,ie())},ne.remove=function(ye){if(!ne._stopped){var ge=G.indexOf(ye);ge<0||(G.splice(ge,1),Q.pop(),re=!0,Y=!0,ie())}},ne.dispose=function(){if(!ne._stopped&&(ne._stopped=!0,window.removeEventListener("resize",q),b.removeEventListener("webglcontextlost",se),ne.mouseListener.enabled=!1,!ne.contextLost)){O.dispose(),B.dispose();for(var ye=0;ye<G.length;++ye)G[ye].dispose();E.dispose();for(var ye=0;ye<j.length;++ye)j[ye].dispose();F.dispose(),C=null,O=null,B=null,G=[]}},ne._mouseRotating=!1,ne._prevButtons=0,ne.enableMouseListeners=function(){ne.mouseListener=s(b,function(ye,ge,me){if(!ne._stopped){var Me=j.length,Le=G.length,Oe=k.object;k.distance=1/0,k.mouse[0]=ge,k.mouse[1]=me,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var _e=!1;if(ye&&ne._prevButtons)ne._mouseRotating=!0;else{ne._mouseRotating&&(Y=!0),ne._mouseRotating=!1;for(var Ee=0;Ee<Me;++Ee){var Ze=j[Ee].query(ge,Z[1]-me-1,ne.pickRadius);if(Ze){if(Ze.distance>k.distance)continue;for(var Ge=0;Ge<Le;++Ge){var Fe=G[Ge];if(Q[Ge]===Ee){var Re=Fe.pick(Ze);Re&&(k.buttons=ye,k.screen=Ze.coord,k.distance=Ze.distance,k.object=Fe,k.index=Re.distance,k.dataPosition=Re.position,k.dataCoordinate=Re.dataCoordinate,k.data=Re,_e=!0)}}}}}Oe&&Oe!==k.object&&(Oe.highlight&&Oe.highlight(null),re=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),re=!0),_e=_e||k.object!==Oe,_e&&ne.onselect&&ne.onselect(k),ye&1&&!(ne._prevButtons&1)&&ne.onclick&&ne.onclick(k),ne._prevButtons=ye}})};function se(){if(ne.contextLost)return!0;C.isContextLost()&&(ne.contextLost=!0,ne.mouseListener.enabled=!1,ne.selection.object=null,ne.oncontextloss&&ne.oncontextloss())}b.addEventListener("webglcontextlost",se);function ae(){if(!se()){C.colorMask(!0,!0,!0,!0),C.depthMask(!0),C.disable(C.BLEND),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL);for(var ye=G.length,ge=j.length,me=0;me<ge;++me){var Me=j[me];Me.shape=Z,Me.begin();for(var Le=0;Le<ye;++Le)if(Q[Le]===me){var Oe=G[Le];Oe.drawPick&&(Oe.pixelRatio=1,Oe.drawPick(te))}Me.end()}}}var oe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=[oe[0].slice(),oe[1].slice()];function ce(){if(!se()){q();var ye=ne.camera.tick();te.view=ne.camera.matrix,re=re||ye,Y=Y||ye,O.pixelRatio=ne.pixelRatio,B.pixelRatio=ne.pixelRatio;var ge=G.length,me=oe[0],Me=oe[1];me[0]=me[1]=me[2]=1/0,Me[0]=Me[1]=Me[2]=-1/0;for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.pixelRatio=ne.pixelRatio,Oe.axes=ne.axes,re=re||!!Oe.dirty,Y=Y||!!Oe.dirty;var _e=Oe.bounds;if(_e)for(var Ee=_e[0],Ze=_e[1],Ge=0;Ge<3;++Ge)me[Ge]=Math.min(me[Ge],Ee[Ge]),Me[Ge]=Math.max(Me[Ge],Ze[Ge])}var Fe=ne.bounds;if(ne.autoBounds)for(var Ge=0;Ge<3;++Ge){if(Me[Ge]<me[Ge])me[Ge]=-1,Me[Ge]=1;else{me[Ge]===Me[Ge]&&(me[Ge]-=1,Me[Ge]+=1);var Re=.05*(Me[Ge]-me[Ge]);me[Ge]=me[Ge]-Re,Me[Ge]=Me[Ge]+Re}Fe[0][Ge]=me[Ge],Fe[1][Ge]=Me[Ge]}for(var We=!1,Ge=0;Ge<3;++Ge)We=We||be[0][Ge]!==Fe[0][Ge]||be[1][Ge]!==Fe[1][Ge],be[0][Ge]=Fe[0][Ge],be[1][Ge]=Fe[1][Ge];if(Y=Y||We,re=re||We,!!re){if(We){for(var xt=[0,0,0],Le=0;Le<3;++Le)xt[Le]=x((Fe[1][Le]-Fe[0][Le])/10);O.autoTicks?O.update({bounds:Fe,tickSpacing:xt}):O.update({bounds:Fe})}var Nt=C.drawingBufferWidth,tr=C.drawingBufferHeight;V[0]=Nt,V[1]=tr,Z[0]=Math.max(Nt/ne.pixelRatio,1)|0,Z[1]=Math.max(tr/ne.pixelRatio,1)|0,_(ne,I);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.axesBounds=Fe,ne.clipToBounds&&(Oe.clipBounds=Fe)}k.object&&(ne.snapToData?B.position=k.dataCoordinate:B.position=k.dataPosition,B.bounds=Fe),Y&&(Y=!1,ae()),ne.axesPixels=n(ne.axes,te,Nt,tr),ne.onrender&&ne.onrender(),C.bindFramebuffer(C.FRAMEBUFFER,null),C.viewport(0,0,Nt,tr),ne.clearRGBA(),C.depthMask(!0),C.colorMask(!0,!0,!0,!0),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL),C.disable(C.BLEND),C.disable(C.CULL_FACE);var Vt=!1;O.enable&&(Vt=Vt||O.isTransparent(),O.draw(te)),B.axes=O,k.object&&B.draw(te),C.disable(C.CULL_FACE);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.axes=O,Oe.pixelRatio=ne.pixelRatio,Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(te),Oe.isTransparent&&Oe.isTransparent()&&(Vt=!0)}if(Vt){E.shape=V,E.bind(),C.clear(C.DEPTH_BUFFER_BIT),C.colorMask(!1,!1,!1,!1),C.depthMask(!0),C.depthFunc(C.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(te);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(te)}C.enable(C.BLEND),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.colorMask(!0,!0,!0,!0),C.depthMask(!1),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(te);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.isTransparent&&Oe.isTransparent()&&Oe.drawTransparent(te)}C.bindFramebuffer(C.FRAMEBUFFER,null),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.disable(C.DEPTH_TEST),F.bind(),E.color[0].bind(0),F.uniforms.accumBuffer=0,i(C),C.disable(C.BLEND)}re=!1;for(var Le=0;Le<ge;++Le)G[Le].dirty=!1}}}function de(){ne._stopped||ne.contextLost||(ce(),requestAnimationFrame(de))}return ne.enableMouseListeners(),de(),ne.redraw=function(){ne._stopped||(re=!0,ce())},ne}function _(g,b){var v=g.bounds,C=g.cameraParams,S=C.projection,k=C.model,E=g.gl.drawingBufferWidth,F=g.gl.drawingBufferHeight,I=g.zNear,D=g.zFar,R=g.fovy,O=E/F;b?(d(S,-O,O,-1,1,I,D),C._ortho=!0):(y(S,R,O,I,D),C._ortho=!1);for(var z=0;z<16;++z)k[z]=0;k[15]=1;for(var B=0,z=0;z<3;++z)B=Math.max(B,v[1][z]-v[0][z]);for(var z=0;z<3;++z)g.autoScale?k[5*z]=g.aspect[z]/(v[1][z]-v[0][z]):k[5*z]=1/B,g.autoCenter&&(k[12+z]=-k[5*z]*.5*(v[0][z]+v[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(f,M,T){var e=f("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("typedarray-pool"),r=f("./lib/shader");M.exports=s;function t(y,d,p,c,m){this.plot=y,this.offsetBuffer=d,this.pickBuffer=p,this.shader=c,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=t.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(y){var d;y=y||{};function p(_,g){return _ in y?y[_]:g}this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var c=y.positions.length>>>1,m=y.positions instanceof Float32Array,l=y.idToIndex instanceof Int32Array&&y.idToIndex.length>=c,x=y.positions,u=m?x:n.mallocFloat32(x.length),A=l?y.idToIndex:n.mallocInt32(c);if(m||u.set(x),!l)for(u.set(x),d=0;d<c;d++)A[d]=d;this.points=x,this.offsetBuffer.update(u),this.pickBuffer.update(A),m||n.free(u),l||n.free(A),this.pointCount=c,this.pickOffset=0};function i(y,d){var p=0,c=y.length>>>1,m;for(m=0;m<c;m++){var l=y[m*2],x=y[m*2+1];l>=d[0]&&l<=d[2]&&x>=d[1]&&x<=d[3]&&p++}return p}h.unifiedDraw=function(){var y=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(p){var c=p!==void 0,m=c?this.pickShader:this.shader,l=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return p;var u=x[2]-x[0],A=x[3]-x[1],_=i(this.points,x),g=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));y[0]=2/u,y[4]=2/A,y[6]=-2*x[0]/u-1,y[7]=-2*x[1]/A-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=y,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=g<5,m.uniforms.pointSize=g,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(d[0]=p&255,d[1]=p>>8&255,d[2]=p>>16&255,d[3]=p>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(l.UNSIGNED_BYTE),m.uniforms.pickOffset=d,this.pickOffset=p);var b=l.getParameter(l.BLEND),v=l.getParameter(l.DITHER);return b&&!this.blend&&l.disable(l.BLEND),v&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),b&&!this.blend&&l.enable(l.BLEND),v&&l.enable(l.DITHER),p+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(y,d,p){var c=this.pickOffset,m=this.pointCount;if(p<c||p>=c+m)return null;var l=p-c,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}};function s(y,d){var p=y.gl,c=a(p),m=a(p),l=e(p,r.pointVertex,r.pointFragment),x=e(p,r.pickVertex,r.pickFragment),u=new t(y,c,m,l,x);return u.update(d),y.addObject(u),u}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],i=n[1],s=n[2],y=n[3],d=r[0],p=r[1],c=r[2],m=r[3],l,x,u,A,_;return x=h*d+i*p+s*c+y*m,x<0&&(x=-x,d=-d,p=-p,c=-c,m=-m),1-x>1e-6?(l=Math.acos(x),u=Math.sin(l),A=Math.sin((1-t)*l)/u,_=Math.sin(t*l)/u):(A=1-t,_=t),a[0]=A*h+_*d,a[1]=A*i+_*p,a[2]=A*s+_*c,a[3]=A*y+_*m,a}},{}],125:[function(f,M,T){M.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(f,M,T){var e=f("vectorize-text");M.exports=n;var a={};function n(r,t,h){var i=a[t];if(i||(i=a[t]={}),r in i)return i[r];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};s.triangles=!0;var y=e(r,s);s.triangles=!1;var d=e(r,s),p,c;if(h&&h!==1){for(p=0;p<y.positions.length;++p)for(c=0;c<y.positions[p].length;++c)y.positions[p][c]/=h;for(p=0;p<d.positions.length;++p)for(c=0;c<d.positions[p].length;++c)d.positions[p][c]/=h}var m=[[1/0,1/0],[-1/0,-1/0]],l=d.positions.length;for(p=0;p<l;++p){var x=d.positions[p];for(c=0;c<2;++c)m[0][c]=Math.min(m[0][c],x[c]),m[1][c]=Math.max(m[1][c],x[c])}return i[r]=[y,d,m]}},{"vectorize-text":311}],127:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],y={vertex:n,fragment:h,attributes:s},d={vertex:r,fragment:h,attributes:s},p={vertex:t,fragment:h,attributes:s},c={vertex:n,fragment:i,attributes:s},m={vertex:r,fragment:i,attributes:s},l={vertex:t,fragment:i,attributes:s};function x(u,A){var _=e(u,A),g=_.attributes;return g.position.location=0,g.color.location=1,g.glyph.location=2,g.id.location=3,_}T.createPerspective=function(u){return x(u,y)},T.createOrtho=function(u){return x(u,d)},T.createProject=function(u){return x(u,p)},T.createPickPerspective=function(u){return x(u,c)},T.createPickOrtho=function(u){return x(u,m)},T.createPickProject=function(u){return x(u,l)}},{"gl-shader":132,glslify:231}],128:[function(f,M,T){var e=f("is-string-blank"),a=f("gl-buffer"),n=f("gl-vao"),r=f("typedarray-pool"),t=f("gl-mat4/multiply"),h=f("./lib/shaders"),i=f("./lib/glyphs"),s=f("./lib/get-simple-string"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M.exports=Q;function d(X,j){var re=X[0],ue=X[1],K=X[2],te=X[3];return X[0]=j[0]*re+j[4]*ue+j[8]*K+j[12]*te,X[1]=j[1]*re+j[5]*ue+j[9]*K+j[13]*te,X[2]=j[2]*re+j[6]*ue+j[10]*K+j[14]*te,X[3]=j[3]*re+j[7]*ue+j[11]*K+j[15]*te,X}function p(X,j,re,ue){return d(ue,ue),d(ue,ue),d(ue,ue)}function c(X,j){this.index=X,this.dataCoordinate=this.position=j}function m(X){return X===!0||X>1?1:X}function l(X,j,re,ue,K,te,Y,V,ee,ne,Z,q){this.gl=X,this.pixelRatio=1,this.shader=j,this.orthoShader=re,this.projectShader=ue,this.pointBuffer=K,this.colorBuffer=te,this.glyphBuffer=Y,this.idBuffer=V,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ne,this.pickOrthoShader=Z,this.pickProjectShader=q,this.points=[],this._selectResult=new c(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var x=l.prototype;x.pickSlots=1,x.setPickBase=function(X){this.pickId=X},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],A=[0,0,0],_=[0,0,0],g=[0,0,0,1],b=[0,0,0,1],v=y.slice(),C=[0,0,0],S=[[0,0,0],[0,0,0]];function k(X){return X[0]=X[1]=X[2]=0,X}function E(X,j){return X[0]=j[0],X[1]=j[1],X[2]=j[2],X[3]=1,X}function F(X,j,re,ue){return X[0]=j[0],X[1]=j[1],X[2]=j[2],X[re]=ue,X}function I(X){for(var j=S,re=0;re<2;++re)for(var ue=0;ue<3;++ue)j[re][ue]=Math.max(Math.min(X[re][ue],1e8),-1e8);return j}function D(X,j,re,ue){var K=j.axesProject,te=j.gl,Y=X.uniforms,V=re.model||y,ee=re.view||y,ne=re.projection||y,Z=j.axesBounds,q=I(j.clipBounds),ie;j.axes&&j.axes.lastCubeProps?ie=j.axes.lastCubeProps.axis:ie=[1,1,1],u[0]=2/te.drawingBufferWidth,u[1]=2/te.drawingBufferHeight,X.bind(),Y.view=ee,Y.projection=ne,Y.screenSize=u,Y.highlightId=j.highlightId,Y.highlightScale=j.highlightScale,Y.clipBounds=q,Y.pickGroup=j.pickId/255,Y.pixelRatio=ue;for(var se=0;se<3;++se)if(!!K[se]){Y.scale=j.projectScale[se],Y.opacity=j.projectOpacity[se];for(var ae=v,oe=0;oe<16;++oe)ae[oe]=0;for(var oe=0;oe<4;++oe)ae[5*oe]=1;ae[5*se]=0,ie[se]<0?ae[12+se]=Z[0][se]:ae[12+se]=Z[1][se],t(ae,V,ae),Y.model=ae;var be=(se+1)%3,ce=(se+2)%3,de=k(A),ye=k(_);de[be]=1,ye[ce]=1;var ge=p(ne,ee,V,E(g,de)),me=p(ne,ee,V,E(b,ye));if(Math.abs(ge[1])>Math.abs(me[1])){var Me=ge;ge=me,me=Me,Me=de,de=ye,ye=Me;var Le=be;be=ce,ce=Le}ge[0]<0&&(de[be]=-1),me[1]>0&&(ye[ce]=-1);for(var Oe=0,_e=0,oe=0;oe<4;++oe)Oe+=Math.pow(V[4*be+oe],2),_e+=Math.pow(V[4*ce+oe],2);de[be]/=Math.sqrt(Oe),ye[ce]/=Math.sqrt(_e),Y.axes[0]=de,Y.axes[1]=ye,Y.fragClipBounds[0]=F(C,q[0],se,-1e8),Y.fragClipBounds[1]=F(C,q[1],se,1e8),j.vao.bind(),j.vao.draw(te.TRIANGLES,j.vertexCount),j.lineWidth>0&&(te.lineWidth(j.lineWidth*ue),j.vao.draw(te.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],z=[R,O];function B(X,j,re,ue,K,te,Y){var V=re.gl;if((te===re.projectHasAlpha||Y)&&D(j,re,ue,K),te===re.hasAlpha||Y){X.bind();var ee=X.uniforms;ee.model=ue.model||y,ee.view=ue.view||y,ee.projection=ue.projection||y,u[0]=2/V.drawingBufferWidth,u[1]=2/V.drawingBufferHeight,ee.screenSize=u,ee.highlightId=re.highlightId,ee.highlightScale=re.highlightScale,ee.fragClipBounds=z,ee.clipBounds=re.axes.bounds,ee.opacity=re.opacity,ee.pickGroup=re.pickId/255,ee.pixelRatio=K,re.vao.bind(),re.vao.draw(V.TRIANGLES,re.vertexCount),re.lineWidth>0&&(V.lineWidth(re.lineWidth*K),re.vao.draw(V.LINES,re.lineVertexCount,re.vertexCount)),re.vao.unbind()}}x.draw=function(X){var j=this.useOrtho?this.orthoShader:this.shader;B(j,this.projectShader,this,X,this.pixelRatio,!1,!1)},x.drawTransparent=function(X){var j=this.useOrtho?this.orthoShader:this.shader;B(j,this.projectShader,this,X,this.pixelRatio,!0,!1)},x.drawPick=function(X){var j=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;B(j,this.pickProjectShader,this,X,1,!0,!0)},x.pick=function(X){if(!X||X.id!==this.pickId)return null;var j=X.value[2]+(X.value[1]<<8)+(X.value[0]<<16);if(j>=this.pointCount||j<0)return null;var re=this.points[j],ue=this._selectResult;ue.index=j;for(var K=0;K<3;++K)ue.position[K]=ue.dataCoordinate[K]=re[K];return ue},x.highlight=function(X){if(!X)this.highlightId=[1,1,1,1];else{var j=X.index,re=j&255,ue=j>>8&255,K=j>>16&255;this.highlightId=[re/255,ue/255,K/255,0]}};function G(X,j,re,ue){var K;Array.isArray(X)?j<X.length?K=X[j]:K=void 0:K=X,K=s(K);var te=!0;e(K)&&(K="\u25BC",te=!1);var Y=i(K,re,ue);return{mesh:Y[0],lines:Y[1],bounds:Y[2],visible:te}}x.update=function(X){if(X=X||{},"perspective"in X&&(this.useOrtho=!X.perspective),"orthographic"in X&&(this.useOrtho=!!X.orthographic),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"project"in X)if(Array.isArray(X.project))this.axesProject=X.project;else{var j=!!X.project;this.axesProject=[j,j,j]}if("projectScale"in X)if(Array.isArray(X.projectScale))this.projectScale=X.projectScale.slice();else{var re=+X.projectScale;this.projectScale=[re,re,re]}if(this.projectHasAlpha=!1,"projectOpacity"in X){if(Array.isArray(X.projectOpacity))this.projectOpacity=X.projectOpacity.slice();else{var re=+X.projectOpacity;this.projectOpacity=[re,re,re]}for(var ue=0;ue<3;++ue)this.projectOpacity[ue]=m(this.projectOpacity[ue]),this.projectOpacity[ue]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in X&&(this.opacity=m(X.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=X.position,te=X.font||"normal",Y=X.alignment||[0,0],V,ee;if(Y.length===2)V=Y[0],ee=Y[1];else{V=[],ee=[];for(var ue=0;ue<Y.length;++ue)V[ue]=Y[ue][0],ee[ue]=Y[ue][1]}var ne=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],q=X.glyph,ie=X.color,se=X.size,ae=X.angle,oe=X.lineColor,be=-1,ce=0,de=0,ye=0;if(K.length){ye=K.length;e:for(var ue=0;ue<ye;++ue){for(var ge=K[ue],me=0;me<3;++me)if(isNaN(ge[me])||!isFinite(ge[me]))continue e;var Me=G(q,ue,te,this.pixelRatio),Le=Me.mesh,Oe=Me.lines,_e=Me.bounds;ce+=Le.cells.length*3,de+=Oe.edges.length*2}}var Ee=ce+de,Ze=r.mallocFloat(3*Ee),Ge=r.mallocFloat(4*Ee),Fe=r.mallocFloat(2*Ee),Re=r.mallocUint32(Ee);if(Ee>0){var We=0,xt=ce,Nt=[0,0,0,1],tr=[0,0,0,1],Vt=Array.isArray(ie)&&Array.isArray(ie[0]),Pt=Array.isArray(oe)&&Array.isArray(oe[0]);e:for(var ue=0;ue<ye;++ue){be+=1;for(var ge=K[ue],me=0;me<3;++me){if(isNaN(ge[me])||!isFinite(ge[me]))continue e;Z[me]=Math.max(Z[me],ge[me]),ne[me]=Math.min(ne[me],ge[me])}var Me=G(q,ue,te,this.pixelRatio),Le=Me.mesh,Oe=Me.lines,_e=Me.bounds,$t=Me.visible;if(!$t)Nt=[1,1,1,0];else if(Array.isArray(ie)){var Ut;if(Vt?ue<ie.length?Ut=ie[ue]:Ut=[0,0,0,0]:Ut=ie,Ut.length===3){for(var me=0;me<3;++me)Nt[me]=Ut[me];Nt[3]=1}else if(Ut.length===4){for(var me=0;me<4;++me)Nt[me]=Ut[me];!this.hasAlpha&&Ut[3]<1&&(this.hasAlpha=!0)}}else Nt[0]=Nt[1]=Nt[2]=0,Nt[3]=1;if(!$t)tr=[1,1,1,0];else if(Array.isArray(oe)){var Ut;if(Pt?ue<oe.length?Ut=oe[ue]:Ut=[0,0,0,0]:Ut=oe,Ut.length===3){for(var me=0;me<3;++me)tr[me]=Ut[me];tr[me]=1}else if(Ut.length===4){for(var me=0;me<4;++me)tr[me]=Ut[me];!this.hasAlpha&&Ut[3]<1&&(this.hasAlpha=!0)}}else tr[0]=tr[1]=tr[2]=0,tr[3]=1;var Lt=.5;$t?Array.isArray(se)?ue<se.length?Lt=+se[ue]:Lt=12:se?Lt=+se:this.useOrtho&&(Lt=12):Lt=0;var Ye=0;Array.isArray(ae)?ue<ae.length?Ye=+ae[ue]:Ye=0:ae&&(Ye=+ae);for(var ot=Math.cos(Ye),Ve=Math.sin(Ye),ge=K[ue],me=0;me<3;++me)Z[me]=Math.max(Z[me],ge[me]),ne[me]=Math.min(ne[me],ge[me]);var Ae=V,He=ee,Ae=0;Array.isArray(V)?ue<V.length?Ae=V[ue]:Ae=0:V&&(Ae=V);var He=0;Array.isArray(ee)?ue<ee.length?He=ee[ue]:He=0:ee&&(He=ee),Ae*=Ae>0?1-_e[0][0]:Ae<0?1+_e[1][0]:1,He*=He>0?1-_e[0][1]:He<0?1+_e[1][1]:1;for(var Je=[Ae,He],jt=Le.cells||[],Bt=Le.positions||[],me=0;me<jt.length;++me)for(var tt=jt[me],St=0;St<3;++St){for(var _t=0;_t<3;++_t)Ze[3*We+_t]=ge[_t];for(var _t=0;_t<4;++_t)Ge[4*We+_t]=Nt[_t];Re[We]=be;var kt=Bt[tt[St]];Fe[2*We]=Lt*(ot*kt[0]-Ve*kt[1]+Je[0]),Fe[2*We+1]=Lt*(Ve*kt[0]+ot*kt[1]+Je[1]),We+=1}for(var jt=Oe.edges,Bt=Oe.positions,me=0;me<jt.length;++me)for(var tt=jt[me],St=0;St<2;++St){for(var _t=0;_t<3;++_t)Ze[3*xt+_t]=ge[_t];for(var _t=0;_t<4;++_t)Ge[4*xt+_t]=tr[_t];Re[xt]=be;var kt=Bt[tt[St]];Fe[2*xt]=Lt*(ot*kt[0]-Ve*kt[1]+Je[0]),Fe[2*xt+1]=Lt*(Ve*kt[0]+ot*kt[1]+Je[1]),xt+=1}}}this.bounds=[ne,Z],this.points=K,this.pointCount=K.length,this.vertexCount=ce,this.lineVertexCount=de,this.pointBuffer.update(Ze),this.colorBuffer.update(Ge),this.glyphBuffer.update(Fe),this.idBuffer.update(Re),r.free(Ze),r.free(Ge),r.free(Fe),r.free(Re)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function Q(X){var j=X.gl,re=h.createPerspective(j),ue=h.createOrtho(j),K=h.createProject(j),te=h.createPickPerspective(j),Y=h.createPickOrtho(j),V=h.createPickProject(j),ee=a(j),ne=a(j),Z=a(j),q=a(j),ie=n(j,[{buffer:ee,size:3,type:j.FLOAT},{buffer:ne,size:4,type:j.FLOAT},{buffer:Z,size:2,type:j.FLOAT},{buffer:q,size:4,type:j.UNSIGNED_BYTE,normalized:!0}]),se=new l(j,re,ue,K,ee,ne,Z,q,ie,te,Y,V);return se.update(X),se}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(f,M,T){var e=f("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("./lib/shaders");M.exports=h;function r(i,s,y){this.plot=i,this.boxBuffer=s,this.boxShader=y,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=r.prototype;t.draw=function(){if(!!this.enabled){var i=this.plot,s=this.selectBox,y=this.borderWidth;this.innerFill;var d=this.innerColor;this.outerFill;var p=this.outerColor,c=this.borderColor,m=i.box,l=i.screenBox,x=i.dataBox,u=i.viewBox,A=i.pixelRatio,_=(s[0]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],g=(s[1]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1],b=(s[2]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],v=(s[3]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1];if(_=Math.max(_,u[0]),g=Math.max(g,u[1]),b=Math.min(b,u[2]),v=Math.min(v,u[3]),!(b<_||v<g)){m.bind();var C=l[2]-l[0],S=l[3]-l[1];if(this.outerFill&&(m.drawBox(0,0,C,g,p),m.drawBox(0,g,_,v,p),m.drawBox(0,v,C,S,p),m.drawBox(b,g,C,v,p)),this.innerFill&&m.drawBox(_,g,b,v,d),y>0){var k=y*A;m.drawBox(_-k,g-k,b+k,g+k,c),m.drawBox(_-k,v-k,b+k,v+k,c),m.drawBox(_-k,g-k,_+k,v+k,c),m.drawBox(b-k,g-k,b+k,v+k,c)}}}},t.update=function(i){i=i||{},this.innerFill=!!i.innerFill,this.outerFill=!!i.outerFill,this.innerColor=(i.innerColor||[0,0,0,.5]).slice(),this.outerColor=(i.outerColor||[0,0,0,.5]).slice(),this.borderColor=(i.borderColor||[0,0,0,1]).slice(),this.borderWidth=i.borderWidth||0,this.selectBox=(i.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(i,s){var y=i.gl,d=a(y,[0,0,0,1,1,0,1,1]),p=e(y,n.boxVertex,n.boxFragment),c=new r(i,d,p);return c.update(s),i.addOverlay(c),c}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(f,M,T){M.exports=y;var e=f("gl-fbo"),a=f("typedarray-pool"),n=f("ndarray"),r=f("bit-twiddle").nextPow2,t=function(d,p,c){for(var m=1e8,l=-1,x=-1,u=d.shape[0],A=d.shape[1],_=0;_<u;_++)for(var g=0;g<A;g++){var b=d.get(_,g,0),v=d.get(_,g,1),C=d.get(_,g,2),S=d.get(_,g,3);if(b<255||v<255||C<255||S<255){var k=p-_,E=c-g,F=k*k+E*E;F<m&&(m=F,l=_,x=g)}}return[l,x,m]};function h(d,p,c,m,l){this.coord=[d,p],this.id=c,this.value=m,this.distance=l}function i(d,p,c){this.gl=d,this.fbo=p,this.buffer=c,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(p.bind(),d.readPixels(0,0,p.shape[0],p.shape[1],d.RGBA,d.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var s=i.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(!!this.gl){this.fbo.shape=d;var p=this.fbo.shape[0],c=this.fbo.shape[1];if(c*p*4>this.buffer.length){a.free(this.buffer);for(var m=this.buffer=a.mallocUint8(r(c*p*4)),l=0;l<c*p*4;++l)m[l]=255}return d}}}),s.begin=function(){var d=this.gl;this.shape,d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},s.end=function(){var d=this.gl;!d||(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(d,p,c){if(!this.gl)return null;var m=this.fbo.shape.slice();d=d|0,p=p|0,typeof c!="number"&&(c=1);var l=Math.min(Math.max(d-c,0),m[0])|0,x=Math.min(Math.max(d+c,0),m[0])|0,u=Math.min(Math.max(p-c,0),m[1])|0,A=Math.min(Math.max(p+c,0),m[1])|0;if(x<=l||A<=u)return null;var _=[x-l,A-u],g=n(this.buffer,[_[0],_[1],4],[4,m[0]*4,1],4*(l+m[0]*u)),b=t(g.hi(_[0],_[1],1),c,c),v=b[0],C=b[1];if(v<0||Math.pow(this.radius,2)<b[2])return null;var S=g.get(v,C,0),k=g.get(v,C,1),E=g.get(v,C,2),F=g.get(v,C,3);return new h(v+l|0,C+u|0,S,[k,E,F],Math.sqrt(b[2]))},s.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function y(d,p){var c=p[0],m=p[1],l={},x=e(d,c,m,l),u=a.mallocUint8(c*m*4);return new i(d,x,u)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(f,M,T){var e=f("./lib/create-uniforms"),a=f("./lib/create-attributes"),n=f("./lib/reflect"),r=f("./lib/shader-cache"),t=f("./lib/runtime-reflect"),h=f("./lib/GLError");function i(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=i.prototype;s.bind=function(){this.program||this._relink();var p,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(c>m)for(p=m;p<c;p++)this.gl.enableVertexAttribArray(p);else if(m>c)for(p=c;p<m;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},s.dispose=function(){for(var p=this.gl.lastAttribCount,c=0;c<p;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function y(p,c){return p.name<c.name?-1:1}s.update=function(p,c,m,l){if(!c||arguments.length===1){var x=p;p=x.vertex,c=x.fragment,m=x.uniforms,l=x.attributes}var u=this,A=u.gl,_=u._vref;u._vref=r.shader(A,A.VERTEX_SHADER,p),_&&_.dispose(),u.vertShader=u._vref.shader;var g=this._fref;if(u._fref=r.shader(A,A.FRAGMENT_SHADER,c),g&&g.dispose(),u.fragShader=u._fref.shader,!m||!l){var b=A.createProgram();if(A.attachShader(b,u.fragShader),A.attachShader(b,u.vertShader),A.linkProgram(b),!A.getProgramParameter(b,A.LINK_STATUS)){var v=A.getProgramInfoLog(b);throw new h(v,"Error linking program:"+v)}m=m||t.uniforms(A,b),l=l||t.attributes(A,b),A.deleteProgram(b)}l=l.slice(),l.sort(y);var C=[],S=[],k=[],E;for(E=0;E<l.length;++E){var F=l[E];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=k.length,S.push(F.name+"["+R+"]"),typeof F.location=="number"?k.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?k.push(F.location[R]|0):k.push(-1);C.push({name:F.name,type:F.type,locations:D})}else C.push({name:F.name,type:F.type,locations:[k.length]}),S.push(F.name),typeof F.location=="number"?k.push(F.location|0):k.push(-1)}var O=0;for(E=0;E<k.length;++E)if(k[E]<0){for(;k.indexOf(O)>=0;)O+=1;k[E]=O}var z=new Array(m.length);function B(){u.program=r.program(A,u._vref,u._fref,S,k);for(var G=0;G<m.length;++G)z[G]=A.getUniformLocation(u.program,m[G].name)}B(),u._relink=B,u.types={uniforms:n(m),attributes:n(l)},u.attributes=a(A,u,C,k),Object.defineProperty(u,"uniforms",e(A,u,m,z))};function d(p,c,m,l,x){var u=new i(p);return u.update(c,m,l,x),u}M.exports=d},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(f,M,T){function e(a,n,r){this.shortMessage=n||"",this.longMessage=r||"",this.rawError=a||"",this.message="gl-shader: "+(n||a||"")+(r?`
`+r:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(f,M,T){M.exports=i;var e=f("./GLError");function a(s,y,d,p,c,m){this._gl=s,this._wrapper=y,this._index=d,this._locations=p,this._dimension=c,this._constFunc=m}var n=a.prototype;n.pointer=function(y,d,p,c){var m=this,l=m._gl,x=m._locations[m._index];l.vertexAttribPointer(x,m._dimension,y||l.FLOAT,!!d,p||0,c||0),l.enableVertexAttribArray(x)},n.set=function(s,y,d,p){return this._constFunc(this._locations[this._index],s,y,d,p)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=s|0,this._wrapper.program=null),s|0}});var r=[function(s,y,d){return d.length===void 0?s.vertexAttrib1f(y,d):s.vertexAttrib1fv(y,d)},function(s,y,d,p){return d.length===void 0?s.vertexAttrib2f(y,d,p):s.vertexAttrib2fv(y,d)},function(s,y,d,p,c){return d.length===void 0?s.vertexAttrib3f(y,d,p,c):s.vertexAttrib3fv(y,d)},function(s,y,d,p,c,m){return d.length===void 0?s.vertexAttrib4f(y,d,p,c,m):s.vertexAttrib4fv(y,d)}];function t(s,y,d,p,c,m,l){var x=r[c],u=new a(s,y,d,p,c,x);Object.defineProperty(m,l,{set:function(A){return s.disableVertexAttribArray(p[d]),x(s,p[d],A),A},get:function(){return u},enumerable:!0})}function h(s,y,d,p,c,m,l){for(var x=new Array(c),u=new Array(c),A=0;A<c;++A)t(s,y,d[A],p,c,x,A),u[A]=x[A];Object.defineProperty(x,"location",{set:function(b){if(Array.isArray(b))for(var v=0;v<c;++v)u[v].location=b[v];else for(var v=0;v<c;++v)u[v].location=b+v;return b},get:function(){for(var b=new Array(c),v=0;v<c;++v)b[v]=p[d[v]];return b},enumerable:!0}),x.pointer=function(b,v,C,S){b=b||s.FLOAT,v=!!v,C=C||c*c,S=S||0;for(var k=0;k<c;++k){var E=p[d[k]];s.vertexAttribPointer(E,c,b,v,C,S+k*c),s.enableVertexAttribArray(E)}};var _=new Array(c),g=s["vertexAttrib"+c+"fv"];Object.defineProperty(m,l,{set:function(b){for(var v=0;v<c;++v){var C=p[d[v]];if(s.disableVertexAttribArray(C),Array.isArray(b[0]))g.call(s,C,b[v]);else{for(var S=0;S<c;++S)_[S]=b[c*v+S];g.call(s,C,_)}}return b},get:function(){return x},enumerable:!0})}function i(s,y,d,p){for(var c={},m=0,l=d.length;m<l;++m){var x=d[m],u=x.name,A=x.type,_=x.locations;switch(A){case"bool":case"int":case"float":t(s,y,_[0],p,1,c,u);break;default:if(A.indexOf("vec")>=0){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new e("","Invalid data type for attribute "+u+": "+A);t(s,y,_[0],p,g,c,u)}else if(A.indexOf("mat")>=0){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new e("","Invalid data type for attribute "+u+": "+A);h(s,y,_,p,g,c,u)}else throw new e("","Unknown data type for attribute "+u+": "+A);break}}return c}},{"./GLError":133}],135:[function(f,M,T){var e=f("./reflect"),a=f("./GLError");M.exports=t;function n(h){return function(){return h}}function r(h,i){for(var s=new Array(h),y=0;y<h;++y)s[y]=i;return s}function t(h,i,s,y){function d(A){return function(_,g,b){return _.getUniform(g.program,b[A])}}function p(A){return function(g){for(var b=c("",A),v=0;v<b.length;++v){var C=b[v],S=C[0],k=C[1];if(y[k]){var E=g;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var F=S;if(S.indexOf(".")===0&&(F=S.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);E=D?g[D][R]:g[R]}else E=g[F]}var O=s[k].type,z;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(y[k],E);break;case"float":h.uniform1f(y[k],E);break;default:var B=O.indexOf("vec");if(0<=B&&B<=1&&O.length===4+B){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":h["uniform"+z+"iv"](y[k],E);break;case"v":h["uniform"+z+"fv"](y[k],E);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);h["uniformMatrix"+z+"fv"](y[k],!1,E);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function c(A,_){if(typeof _!="object")return[[A,_]];var g=[];for(var b in _){var v=_[b],C=A;parseInt(b)+""===b?C+="["+b+"]":C+="."+b,typeof v=="object"?g.push.apply(g,c(C,v)):g.push([C,v])}return g}function m(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=A.indexOf("vec");if(0<=_&&_<=1&&A.length===4+_){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new a("","Invalid data type");return A.charAt(0)==="b"?r(g,!1):r(g,0)}else if(A.indexOf("mat")===0&&A.length===4){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+A);return r(g*g,0)}else throw new a("","Unknown uniform data type for "+name+": "+A)}}function l(A,_,g){if(typeof g=="object"){var b=x(g);Object.defineProperty(A,_,{get:n(b),set:p(g),enumerable:!0,configurable:!1})}else y[g]?Object.defineProperty(A,_,{get:d(g),set:p(g),enumerable:!0,configurable:!1}):A[_]=m(s[g].type)}function x(A){var _;if(Array.isArray(A)){_=new Array(A.length);for(var g=0;g<A.length;++g)l(_,g,A[g])}else{_={};for(var b in A)l(_,b,A[b])}return _}var u=e(s,!0);return{get:n(x(u)),set:p(u),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(f,M,T){M.exports=e;function e(a,n){for(var r={},t=0;t<a.length;++t)for(var h=a[t].name,i=h.split("."),s=r,y=0;y<i.length;++y){var d=i[y].split("[");if(d.length>1){d[0]in s||(s[d[0]]=[]),s=s[d[0]];for(var p=1;p<d.length;++p){var c=parseInt(d[p]);p<d.length-1||y<i.length-1?(c in s||(p<d.length-1?s[c]=[]:s[c]={}),s=s[c]):n?s[c]=t:s[c]=a[t].type}}else y<i.length-1?(d[0]in s||(s[d[0]]={}),s=s[d[0]]):n?s[d[0]]=t:s[d[0]]=a[t].type}return r}},{}],137:[function(f,M,T){T.uniforms=r,T.attributes=t;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(h,i){if(!a){var s=Object.keys(e);a={};for(var y=0;y<s.length;++y){var d=s[y];a[h[d]]=e[d]}}return a[i]}function r(h,i){for(var s=h.getProgramParameter(i,h.ACTIVE_UNIFORMS),y=[],d=0;d<s;++d){var p=h.getActiveUniform(i,d);if(p){var c=n(h,p.type);if(p.size>1)for(var m=0;m<p.size;++m)y.push({name:p.name.replace("[0]","["+m+"]"),type:c});else y.push({name:p.name,type:c})}}return y}function t(h,i){for(var s=h.getProgramParameter(i,h.ACTIVE_ATTRIBUTES),y=[],d=0;d<s;++d){var p=h.getActiveAttrib(i,d);p&&y.push({name:p.name,type:n(h,p.type)})}return y}},{}],138:[function(f,M,T){T.shader=c,T.program=m;var e=f("./GLError"),a=f("gl-format-compiler-error"),n=typeof WeakMap>"u"?f("weakmap-shim"):WeakMap,r=new n,t=0;function h(l,x,u,A,_,g,b){this.id=l,this.src=x,this.type=u,this.shader=A,this.count=g,this.programs=[],this.cache=b}h.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,x=l.gl,u=this.programs,A=0,_=u.length;A<_;++A){var g=l.programs[u[A]];g&&(delete l.programs[A],x.deleteProgram(g))}x.deleteShader(this.shader),delete l.shaders[this.type===x.FRAGMENT_SHADER|0][this.src]}};function i(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var s=i.prototype;function y(l,x,u){var A=l.createShader(x);if(l.shaderSource(A,u),l.compileShader(A),!l.getShaderParameter(A,l.COMPILE_STATUS)){var _=l.getShaderInfoLog(A);try{var g=a(_,u,x)}catch(b){throw console.warn("Failed to format compiler error: "+b),new e(_,`Error compiling shader:
`+_)}throw new e(_,g.short,g.long)}return A}s.getShaderReference=function(l,x){var u=this.gl,A=this.shaders[l===u.FRAGMENT_SHADER|0],_=A[x];if(!_||!u.isShader(_.shader)){var g=y(u,l,x);_=A[x]=new h(t++,x,l,g,[],1,this)}else _.count+=1;return _};function d(l,x,u,A,_){var g=l.createProgram();l.attachShader(g,x),l.attachShader(g,u);for(var b=0;b<A.length;++b)l.bindAttribLocation(g,_[b],A[b]);if(l.linkProgram(g),!l.getProgramParameter(g,l.LINK_STATUS)){var v=l.getProgramInfoLog(g);throw new e(v,"Error linking program: "+v)}return g}s.getProgram=function(l,x,u,A){var _=[l.id,x.id,u.join(":"),A.join(":")].join("@"),g=this.programs[_];return(!g||!this.gl.isProgram(g))&&(this.programs[_]=g=d(this.gl,l.shader,x.shader,u,A),l.programs.push(_),x.programs.push(_)),g};function p(l){var x=r.get(l);return x||(x=new i(l),r.set(l,x)),x}function c(l,x,u){return p(l).getShaderReference(x,u)}function m(l,x,u,A,_){return p(l).getProgram(x,u,A,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(f,M,T){M.exports=n;function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var r=this.enable,t=this.width,h=this.color,i=this.center,s=this.plot,y=s.line,d=s.dataBox,p=s.viewBox;if(y.bind(),d[0]<=i[0]&&i[0]<=d[2]&&d[1]<=i[1]&&i[1]<=d[3]){var c=p[0]+(i[0]-d[0])/(d[2]-d[0])*(p[2]-p[0]),m=p[1]+(i[1]-d[1])/(d[3]-d[1])*(p[3]-p[1]);r[0]&&y.drawLine(c,m,p[0],m,t[0],h[0]),r[1]&&y.drawLine(c,m,c,p[1],t[1],h[1]),r[2]&&y.drawLine(c,m,p[2],m,t[2],h[2]),r[3]&&y.drawLine(c,m,c,p[3],t[3],h[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function n(r,t){var h=new e(r);return h.update(t),r.addOverlay(h),h}},{}],140:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(f,M,T){var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders/index");M.exports=d;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(p,c,m,l){this.gl=p,this.buffer=c,this.vao=m,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=t.prototype,i=[0,0,0],s=[0,0,0],y=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(p){},h.draw=function(p){var c=this.gl,m=this.vao,l=this.shader;m.bind(),l.bind();var x=p.model||r,u=p.view||r,A=p.projection||r,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var g=i,b=s,v=0;v<3;++v)_&&_[v]<0?(g[v]=this.bounds[0][v],b[v]=this.bounds[1][v]):(g[v]=this.bounds[1][v],b[v]=this.bounds[0][v]);y[0]=c.drawingBufferWidth,y[1]=c.drawingBufferHeight,l.uniforms.model=x,l.uniforms.view=u,l.uniforms.projection=A,l.uniforms.coordinates=[this.position,g,b],l.uniforms.colors=this.colors,l.uniforms.screenShape=y;for(var v=0;v<3;++v)l.uniforms.lineWidth=this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(m.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&m.draw(c.TRIANGLES,12,18+12*v));m.unbind()},h.update=function(p){!p||("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(p,c){var m=[];function l(g,b,v,C,S,k){var E=[g,b,v,0,0,0,1];E[C+3]=1,E[C]=S,m.push.apply(m,E),E[6]=-1,m.push.apply(m,E),E[C]=k,m.push.apply(m,E),m.push.apply(m,E),E[6]=1,m.push.apply(m,E),E[C]=S,m.push.apply(m,E)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var x=e(p,m),u=a(p,[{type:p.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:x,size:1,offset:24,stride:28}]),A=n(p);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var _=new t(p,x,u,A);return _.update(c),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(f,M,T){var e=f("gl-vec3"),a=f("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(m,l,x,u){for(var A=m.points,_=m.velocities,g=m.divergences,b=[],v=[],C=[],S=[],k=[],E=[],F=0,I=0,D=a.create(),R=a.create(),O=8,z=0;z<A.length;z++){var B=A[z],G=_[z],Q=g[z];l===0&&(Q=x*.05),I=e.length(G)/u,D=a.create(),e.copy(D,G),D[3]=Q;for(var X=0;X<O;X++)k[X]=[B[0],B[1],B[2],X];if(S.length>0)for(var X=0;X<O;X++){var j=(X+1)%O;b.push(S[X],k[X],k[j],k[j],S[j],S[X]),C.push(R,D,D,D,R,R),E.push(F,I,I,I,F,F);var re=b.length;v.push([re-6,re-5,re-4],[re-3,re-2,re-1])}var ue=S;S=k,k=ue;var K=R;R=D,D=K;var te=F;F=I,I=te}return{positions:b,cells:v,vectors:C,vertexIntensity:E}},t=function(m,l,x,u){for(var A=0,_=0;_<m.length;_++)for(var g=m[_].velocities,b=0;b<g.length;b++)A=Math.max(A,e.length(g[b]));for(var v=m.map(function(z){return r(z,x,u,A)}),C=[],S=[],k=[],E=[],_=0;_<v.length;_++){var F=v[_],I=C.length;C=C.concat(F.positions),k=k.concat(F.vectors),E=E.concat(F.vertexIntensity);for(var b=0;b<F.cells.length;b++){var D=F.cells[b],R=[];S.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:C,cells:S,vectors:k,vertexIntensity:E,colormap:l}},h=function(m,l){var x=m.length,u;for(u=0;u<x;u++){var A=m[u];if(A===l)return u;if(A>l)return u-1}return u},i=function(m,l,x){return m<l?l:m>x?x:m},s=function(m,l,x){var u=l.vectors,A=l.meshgrid,_=m[0],g=m[1],b=m[2],v=A[0].length,C=A[1].length,S=A[2].length,k=h(A[0],_),E=h(A[1],g),F=h(A[2],b),I=k+1,D=E+1,R=F+1;if(k=i(k,0,v-1),I=i(I,0,v-1),E=i(E,0,C-1),D=i(D,0,C-1),F=i(F,0,S-1),R=i(R,0,S-1),k<0||E<0||F<0||I>v-1||D>C-1||R>S-1)return e.create();var O=A[0][k],z=A[0][I],B=A[1][E],G=A[1][D],Q=A[2][F],X=A[2][R],j=(_-O)/(z-O),re=(g-B)/(G-B),ue=(b-Q)/(X-Q);isFinite(j)||(j=.5),isFinite(re)||(re=.5),isFinite(ue)||(ue=.5);var K,te,Y,V,ee,ne;switch(x.reversedX&&(k=v-1-k,I=v-1-I),x.reversedY&&(E=C-1-E,D=C-1-D),x.reversedZ&&(F=S-1-F,R=S-1-R),x.filled){case 5:ee=F,ne=R,Y=E*S,V=D*S,K=k*S*C,te=I*S*C;break;case 4:ee=F,ne=R,K=k*S,te=I*S,Y=E*S*v,V=D*S*v;break;case 3:Y=E,V=D,ee=F*C,ne=R*C,K=k*C*S,te=I*C*S;break;case 2:Y=E,V=D,K=k*C,te=I*C,ee=F*C*v,ne=R*C*v;break;case 1:K=k,te=I,ee=F*v,ne=R*v,Y=E*v*S,V=D*v*S;break;default:K=k,te=I,Y=E*v,V=D*v,ee=F*v*C,ne=R*v*C;break}var Z=u[K+Y+ee],q=u[K+Y+ne],ie=u[K+V+ee],se=u[K+V+ne],ae=u[te+Y+ee],oe=u[te+Y+ne],be=u[te+V+ee],ce=u[te+V+ne],de=e.create(),ye=e.create(),ge=e.create(),me=e.create();e.lerp(de,Z,ae,j),e.lerp(ye,q,oe,j),e.lerp(ge,ie,be,j),e.lerp(me,se,ce,j);var Me=e.create(),Le=e.create();e.lerp(Me,de,ge,re),e.lerp(Le,ye,me,re);var Oe=e.create();return e.lerp(Oe,Me,Le,ue),Oe},y=function(m){var l=1/0;m.sort(function(_,g){return _-g});for(var x=m.length,u=1;u<x;u++){var A=Math.abs(m[u]-m[u-1]);A<l&&(l=A)}return l},d=function(m){for(var l=[],x=[],u=[],A={},_={},g={},b=m.length,v=0;v<b;v++){var C=m[v],S=C[0],k=C[1],E=C[2];A[S]||(l.push(S),A[S]=!0),_[k]||(x.push(k),_[k]=!0),g[E]||(u.push(E),g[E]=!0)}var F=y(l),I=y(x),D=y(u),R=Math.min(F,I,D);return isFinite(R)?R:1};M.exports=function(m,l){var x=m.startingPositions,u=m.maxLength||1e3,A=m.tubeSize||1,_=m.absoluteTubeSize,g=m.gridFill||"+x+y+z",b={};g.indexOf("-x")!==-1&&(b.reversedX=!0),g.indexOf("-y")!==-1&&(b.reversedY=!0),g.indexOf("-z")!==-1&&(b.reversedZ=!0),b.filled=n.indexOf(g.replace(/-/g,"").replace(/\+/g,""));var v=m.getVelocity||function(oe){return s(oe,m,b)},C=m.getDivergence||function(oe,be){var ce=e.create(),de=1e-4;e.add(ce,oe,[de,0,0]);var ye=v(ce);e.subtract(ye,ye,be),e.scale(ye,ye,1/de),e.add(ce,oe,[0,de,0]);var ge=v(ce);e.subtract(ge,ge,be),e.scale(ge,ge,1/de),e.add(ce,oe,[0,0,de]);var me=v(ce);return e.subtract(me,me,be),e.scale(me,me,1/de),e.add(ce,ye,ge),e.add(ce,ce,me),ce},S=[],k=l[0][0],E=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(oe){var be=oe[0],ce=oe[1],de=oe[2];return!(be<k||be>I||ce<E||ce>D||de<F||de>R)},z=e.distance(l[0],l[1]),B=10*z/u,G=B*B,Q=1,X=0,j=x.length;j>1&&(Q=d(x));for(var re=0;re<j;re++){var ue=e.create();e.copy(ue,x[re]);var K=[ue],te=[],Y=v(ue),V=ue;te.push(Y);var ee=[],ne=C(ue,Y),Z=e.length(ne);isFinite(Z)&&Z>X&&(X=Z),ee.push(Z),S.push({points:K,velocities:te,divergences:ee});for(var q=0;q<u*100&&K.length<u&&O(ue);){q++;var ie=e.clone(Y),se=e.squaredLength(ie);if(se===0)break;if(se>G&&e.scale(ie,ie,B/Math.sqrt(se)),e.add(ie,ie,ue),Y=v(ie),e.squaredDistance(V,ie)-G>-1e-4*G){K.push(ie),V=ie,te.push(Y);var ne=C(ie,Y),Z=e.length(ne);isFinite(Z)&&Z>X&&(X=Z),ee.push(Z)}ue=ie}}var ae=t(S,m.colormap,X,Q);return _?ae.tubeScale=_:(X===0&&(X=1),ae.tubeScale=A*.5*Q/X),ae};var p=f("./lib/shaders"),c=f("gl-cone3d").createMesh;M.exports.createTubeMesh=function(m,l){return c(m,l,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(i){var s=e(i,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},T.createPickShader=function(i){var s=e(i,n,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},T.createContourShader=function(i){var s=e(i,t,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},T.createPickContourShader=function(i){var s=e(i,t,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(f,M,T){M.exports=te;var e=f("bit-twiddle"),a=f("gl-buffer"),n=f("gl-vao"),r=f("gl-texture2d"),t=f("typedarray-pool"),h=f("colormap"),i=f("ndarray-ops"),s=f("ndarray-pack"),y=f("ndarray"),d=f("surface-nets"),p=f("gl-mat4/multiply"),c=f("gl-mat4/invert"),m=f("binary-search-bounds"),l=f("ndarray-gradient"),x=f("./lib/shaders"),u=x.createShader,A=x.createContourShader,_=x.createPickShader,g=x.createPickContourShader,b=4*(4+3+3),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var Y=0;Y<3;++Y){var V=S[Y],ee=(Y+1)%3,ne=(Y+2)%3;V[ee+0]=1,V[ne+3]=1,V[Y+6]=1}})();function k(Y,V,ee,ne,Z){this.position=Y,this.index=V,this.uv=ee,this.level=ne,this.dataCoordinate=Z}var E=256;function F(Y,V,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye,ge){this.gl=Y,this.shape=V,this.bounds=ee,this.objectOffset=ge,this.intensityBounds=[],this._shader=ne,this._pickShader=Z,this._coordinateBuffer=q,this._vao=ie,this._colorMap=se,this._contourShader=ae,this._contourPickShader=oe,this._contourBuffer=be,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=ye,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[y(t.mallocFloat(1024),[0,0]),y(t.mallocFloat(1024),[0,0]),y(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(Y,V){var ee=!1,ne=s([h({colormap:Y,nshades:E,format:"rgba"}).map(function(Z,q){var ie=V?D(q/255,V):Z[3];return ie<1&&(ee=!0),[Z[0],Z[1],Z[2],255*ie]})]);return i.divseq(ne,255),this.hasAlphaScale=ee,ne},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(Y){this.pickId=Y};function D(Y,V){if(!V||!V.length)return 1;for(var ee=0;ee<V.length;++ee){if(V.length<2)return 1;if(V[ee][0]===Y)return V[ee][1];if(V[ee][0]>Y&&ee>0){var ne=(V[ee][0]-Y)/(V[ee][0]-V[ee-1][0]);return V[ee][1]*(1-ne)+ne*V[ee-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[v.slice(),v.slice(),v.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(Y,V){var ee,ne,Z,q=V.axes&&V.axes.lastCubeProps.axis||R,ie=V.showSurface,se=V.showContour;for(ee=0;ee<3;++ee)for(ie=ie||V.surfaceProject[ee],ne=0;ne<3;++ne)se=se||V.contourProject[ee][ne];for(ee=0;ee<3;++ee){var ae=O.projections[ee];for(ne=0;ne<16;++ne)ae[ne]=0;for(ne=0;ne<4;++ne)ae[5*ne]=1;ae[5*ee]=0,ae[12+ee]=V.axesBounds[+(q[ee]>0)][ee],p(ae,Y.model,ae);var oe=O.clipBounds[ee];for(Z=0;Z<2;++Z)for(ne=0;ne<3;++ne)oe[Z][ne]=Y.clipBounds[Z][ne];oe[0][ee]=-1e8,oe[1][ee]=1e8}return O.showSurface=ie,O.showContour=se,O}var B={model:v,view:v,projection:v,inverseModel:v.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=v.slice(),Q=[1,0,0,0,1,0,0,0,1];function X(Y,V){Y=Y||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var ne=B;ne.model=Y.model||v,ne.view=Y.view||v,ne.projection=Y.projection||v,ne.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ne.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ne.objectOffset=this.objectOffset,ne.contourColor=this.contourColor[0],ne.inverseModel=c(ne.inverseModel,ne.model);for(var Z=0;Z<2;++Z)for(var q=ne.clipBounds[Z],ie=0;ie<3;++ie)q[ie]=Math.min(Math.max(this.clipBounds[Z][ie],-1e8),1e8);ne.kambient=this.ambientLight,ne.kdiffuse=this.diffuseLight,ne.kspecular=this.specularLight,ne.roughness=this.roughness,ne.fresnel=this.fresnel,ne.opacity=this.opacity,ne.height=0,ne.permutation=Q,ne.vertexColor=this.vertexColor;var se=G;for(p(se,ne.view,ne.model),p(se,ne.projection,se),c(se,se),Z=0;Z<3;++Z)ne.eyePosition[Z]=se[12+Z]/se[15];var ae=se[15];for(Z=0;Z<3;++Z)ae+=this.lightPosition[Z]*se[4*Z+3];for(Z=0;Z<3;++Z){var oe=se[12+Z];for(ie=0;ie<3;++ie)oe+=se[4*ie+Z]*this.lightPosition[ie];ne.lightPosition[Z]=oe/ae}var be=z(ne,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=ne,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),Z=0;Z<3;++Z)!this.surfaceProject[Z]||!this.vertexCount||(this._shader.uniforms.model=be.projections[Z],this._shader.uniforms.clipBounds=be.clipBounds[Z],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var ce=this._contourShader;ne.kambient=1,ne.kdiffuse=0,ne.kspecular=0,ne.opacity=1,ce.bind(),ce.uniforms=ne;var de=this._contourVAO;for(de.bind(),Z=0;Z<3;++Z)for(ce.uniforms.permutation=S[Z],ee.lineWidth(this.contourWidth[Z]*this.pixelRatio),ie=0;ie<this.contourLevels[Z].length;++ie)ie===this.highlightLevel[Z]?(ce.uniforms.contourColor=this.highlightColor[Z],ce.uniforms.contourTint=this.highlightTint[Z]):(ie===0||ie-1===this.highlightLevel[Z])&&(ce.uniforms.contourColor=this.contourColor[Z],ce.uniforms.contourTint=this.contourTint[Z]),this._contourCounts[Z][ie]&&(ce.uniforms.height=this.contourLevels[Z][ie],de.draw(ee.LINES,this._contourCounts[Z][ie],this._contourOffsets[Z][ie]));for(Z=0;Z<3;++Z)for(ce.uniforms.model=be.projections[Z],ce.uniforms.clipBounds=be.clipBounds[Z],ie=0;ie<3;++ie)if(!!this.contourProject[Z][ie]){ce.uniforms.permutation=S[ie],ee.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var ye=0;ye<this.contourLevels[ie].length;++ye)ye===this.highlightLevel[ie]?(ce.uniforms.contourColor=this.highlightColor[ie],ce.uniforms.contourTint=this.highlightTint[ie]):(ye===0||ye-1===this.highlightLevel[ie])&&(ce.uniforms.contourColor=this.contourColor[ie],ce.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][ye]&&(ce.uniforms.height=this.contourLevels[ie][ye],de.draw(ee.LINES,this._contourCounts[ie][ye],this._contourOffsets[ie][ye]))}for(de.unbind(),de=this._dynamicVAO,de.bind(),Z=0;Z<3;++Z)if(this._dynamicCounts[Z]!==0)for(ce.uniforms.model=ne.model,ce.uniforms.clipBounds=ne.clipBounds,ce.uniforms.permutation=S[Z],ee.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[Z],ce.uniforms.contourTint=this.dynamicTint[Z],ce.uniforms.height=this.dynamicLevel[Z],de.draw(ee.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),ie=0;ie<3;++ie)!this.contourProject[ie][Z]||(ce.uniforms.model=be.projections[ie],ce.uniforms.clipBounds=be.clipBounds[ie],de.draw(ee.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));de.unbind()}}I.draw=function(Y){return X.call(this,Y,!1)},I.drawTransparent=function(Y){return X.call(this,Y,!0)};var j={model:v,view:v,projection:v,inverseModel:v,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(Y){Y=Y||{};var V=this.gl;V.disable(V.CULL_FACE);var ee=j;ee.model=Y.model||v,ee.view=Y.view||v,ee.projection=Y.projection||v,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=Q;for(var ne=0;ne<2;++ne)for(var Z=ee.clipBounds[ne],q=0;q<3;++q)Z[q]=Math.min(Math.max(this.clipBounds[ne][q],-1e8),1e8);var ie=z(ee,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),ne=0;ne<3;++ne)!this.surfaceProject[ne]||(this._pickShader.uniforms.model=ie.projections[ne],this._pickShader.uniforms.clipBounds=ie.clipBounds[ne],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var se=this._contourPickShader;se.bind(),se.uniforms=ee;var ae=this._contourVAO;for(ae.bind(),q=0;q<3;++q)for(V.lineWidth(this.contourWidth[q]*this.pixelRatio),se.uniforms.permutation=S[q],ne=0;ne<this.contourLevels[q].length;++ne)this._contourCounts[q][ne]&&(se.uniforms.height=this.contourLevels[q][ne],ae.draw(V.LINES,this._contourCounts[q][ne],this._contourOffsets[q][ne]));for(ne=0;ne<3;++ne)for(se.uniforms.model=ie.projections[ne],se.uniforms.clipBounds=ie.clipBounds[ne],q=0;q<3;++q)if(!!this.contourProject[ne][q]){se.uniforms.permutation=S[q],V.lineWidth(this.contourWidth[q]*this.pixelRatio);for(var oe=0;oe<this.contourLevels[q].length;++oe)this._contourCounts[q][oe]&&(se.uniforms.height=this.contourLevels[q][oe],ae.draw(V.LINES,this._contourCounts[q][oe],this._contourOffsets[q][oe]))}ae.unbind()}},I.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var V=this._field[2].shape,ee=this._pickResult,ne=V[0]*(Y.value[0]+(Y.value[2]>>4)/16)/255,Z=Math.floor(ne),q=ne-Z,ie=V[1]*(Y.value[1]+(Y.value[2]&15)/16)/255,se=Math.floor(ie),ae=ie-se;Z+=1,se+=1;var oe=ee.position;oe[0]=oe[1]=oe[2]=0;for(var be=0;be<2;++be)for(var ce=be?q:1-q,de=0;de<2;++de)for(var ye=de?ae:1-ae,ge=Z+be,me=se+de,Me=ce*ye,Le=0;Le<3;++Le)oe[Le]+=this._field[Le].get(ge,me)*Me;for(var Oe=this._pickResult.level,_e=0;_e<3;++_e)if(Oe[_e]=m.le(this.contourLevels[_e],oe[_e]),Oe[_e]<0)this.contourLevels[_e].length>0&&(Oe[_e]=0);else if(Oe[_e]<this.contourLevels[_e].length-1){var Ee=this.contourLevels[_e][Oe[_e]],Ze=this.contourLevels[_e][Oe[_e]+1];Math.abs(Ee-oe[_e])>Math.abs(Ze-oe[_e])&&(Oe[_e]+=1)}for(ee.index[0]=q<.5?Z:Z+1,ee.index[1]=ae<.5?se:se+1,ee.uv[0]=ne/V[0],ee.uv[1]=ie/V[1],Le=0;Le<3;++Le)ee.dataCoordinate[Le]=this._field[Le].get(ee.index[0],ee.index[1]);return ee},I.padField=function(Y,V){var ee=V.shape.slice(),ne=Y.shape.slice();i.assign(Y.lo(1,1).hi(ee[0],ee[1]),V),i.assign(Y.lo(1).hi(ee[0],1),V.hi(ee[0],1)),i.assign(Y.lo(1,ne[1]-1).hi(ee[0],1),V.lo(0,ee[1]-1).hi(ee[0],1)),i.assign(Y.lo(0,1).hi(1,ee[1]),V.hi(1)),i.assign(Y.lo(ne[0]-1,1).hi(1,ee[1]),V.lo(ee[0]-1)),Y.set(0,0,V.get(0,0)),Y.set(0,ne[1]-1,V.get(0,ee[1]-1)),Y.set(ne[0]-1,0,V.get(ee[0]-1,0)),Y.set(ne[0]-1,ne[1]-1,V.get(ee[0]-1,ee[1]-1))};function re(Y,V){return Array.isArray(Y)?[V(Y[0]),V(Y[1]),V(Y[2])]:[V(Y),V(Y),V(Y)]}function ue(Y){return Array.isArray(Y)?Y.length===3?[Y[0],Y[1],Y[2],1]:[Y[0],Y[1],Y[2],Y[3]]:[0,0,0,1]}function K(Y){if(Array.isArray(Y)){if(Array.isArray(Y))return[ue(Y[0]),ue(Y[1]),ue(Y[2])];var V=ue(Y);return[V.slice(),V.slice(),V.slice()]}}I.update=function(Y){Y=Y||{},this.objectOffset=Y.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in Y&&(this.contourWidth=re(Y.contourWidth,Number)),"showContour"in Y&&(this.showContour=re(Y.showContour,Boolean)),"showSurface"in Y&&(this.showSurface=!!Y.showSurface),"contourTint"in Y&&(this.contourTint=re(Y.contourTint,Boolean)),"contourColor"in Y&&(this.contourColor=K(Y.contourColor)),"contourProject"in Y&&(this.contourProject=re(Y.contourProject,function(ct){return re(ct,Boolean)})),"surfaceProject"in Y&&(this.surfaceProject=Y.surfaceProject),"dynamicColor"in Y&&(this.dynamicColor=K(Y.dynamicColor)),"dynamicTint"in Y&&(this.dynamicTint=re(Y.dynamicTint,Number)),"dynamicWidth"in Y&&(this.dynamicWidth=re(Y.dynamicWidth,Number)),"opacity"in Y&&(this.opacity=Y.opacity),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale),"colorBounds"in Y&&(this.colorBounds=Y.colorBounds),"vertexColor"in Y&&(this.vertexColor=Y.vertexColor?1:0),"colormap"in Y&&this._colorMap.setPixels(this.genColormap(Y.colormap,this.opacityscale));var V=Y.field||Y.coords&&Y.coords[2]||null,ee=!1;if(V||(this._field[2].shape[0]||this._field[2].shape[2]?V=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):V=this._field[2].hi(0,0)),"field"in Y||"coords"in Y){var ne=(V.shape[0]+2)*(V.shape[1]+2);ne>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(ne))),this._field[2]=y(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var Z=this.shape,q=0;q<2;++q)this._field[2].size>this._field[q].data.length&&(t.freeFloat(this._field[q].data),this._field[q].data=t.mallocFloat(this._field[2].size)),this._field[q]=y(this._field[q].data,[Z[0]+2,Z[1]+2]);if(Y.coords){var ie=Y.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(q=0;q<2;++q){var se=ie[q];for(de=0;de<2;++de)if(se.shape[de]!==Z[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[q],se)}}else if(Y.ticks){var ae=Y.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for(q=0;q<2;++q){var oe=ae[q];if((Array.isArray(oe)||oe.length)&&(oe=y(oe)),oe.shape[0]!==Z[q])throw new Error("gl-surface: invalid tick length");var be=y(oe.data,Z);be.stride[q]=oe.stride[0],be.stride[q^1]=0,this.padField(this._field[q],be)}}else{for(q=0;q<2;++q){var ce=[0,0];ce[q]=1,this._field[q]=y(this._field[q].data,[Z[0]+2,Z[1]+2],ce,0)}this._field[0].set(0,0,0);for(var de=0;de<Z[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(Z[0]+1,0,Z[0]-1),this._field[1].set(0,0,0),de=0;de<Z[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,Z[1]+1,Z[1]-1)}var ye=this._field,ge=y(t.mallocFloat(ye[2].size*3*2),[3,Z[0]+2,Z[1]+2,2]);for(q=0;q<3;++q)l(ge.pick(q),ye[q],"mirror");var me=y(t.mallocFloat(ye[2].size*3),[Z[0]+2,Z[1]+2,3]);for(q=0;q<Z[0]+2;++q)for(de=0;de<Z[1]+2;++de){var Me=ge.get(0,q,de,0),Le=ge.get(0,q,de,1),Oe=ge.get(1,q,de,0),_e=ge.get(1,q,de,1),Ee=ge.get(2,q,de,0),Ze=ge.get(2,q,de,1),Ge=Oe*Ze-_e*Ee,Fe=Ee*Le-Ze*Me,Re=Me*_e-Le*Oe,We=Math.sqrt(Ge*Ge+Fe*Fe+Re*Re);We<1e-8?(We=Math.max(Math.abs(Ge),Math.abs(Fe),Math.abs(Re)),We<1e-8?(Re=1,Fe=Ge=0,We=1):We=1/We):We=1/Math.sqrt(We),me.set(q,de,0,Ge*We),me.set(q,de,1,Fe*We),me.set(q,de,2,Re*We)}t.free(ge.data);var xt=[1/0,1/0,1/0],Nt=[-1/0,-1/0,-1/0],tr=1/0,Vt=-1/0,Pt=(Z[0]-1)*(Z[1]-1)*6,$t=t.mallocFloat(e.nextPow2(10*Pt)),Ut=0,Lt=0;for(q=0;q<Z[0]-1;++q){e:for(de=0;de<Z[1]-1;++de){for(var Ye=0;Ye<2;++Ye)for(var ot=0;ot<2;++ot)for(var Ve=0;Ve<3;++Ve){var Ae=this._field[Ve].get(1+q+Ye,1+de+ot);if(isNaN(Ae)||!isFinite(Ae))continue e}for(Ve=0;Ve<6;++Ve){var He=q+C[Ve][0],Je=de+C[Ve][1],tt=this._field[0].get(He+1,Je+1),St=this._field[1].get(He+1,Je+1);Ae=this._field[2].get(He+1,Je+1),Ge=me.get(He+1,Je+1,0),Fe=me.get(He+1,Je+1,1),Re=me.get(He+1,Je+1,2),Y.intensity&&(_t=Y.intensity.get(He,Je));var _t=Y.intensity?Y.intensity.get(He,Je):Ae+this.objectOffset[2];$t[Ut++]=He,$t[Ut++]=Je,$t[Ut++]=tt,$t[Ut++]=St,$t[Ut++]=Ae,$t[Ut++]=0,$t[Ut++]=_t,$t[Ut++]=Ge,$t[Ut++]=Fe,$t[Ut++]=Re,xt[0]=Math.min(xt[0],tt+this.objectOffset[0]),xt[1]=Math.min(xt[1],St+this.objectOffset[1]),xt[2]=Math.min(xt[2],Ae+this.objectOffset[2]),tr=Math.min(tr,_t),Nt[0]=Math.max(Nt[0],tt+this.objectOffset[0]),Nt[1]=Math.max(Nt[1],St+this.objectOffset[1]),Nt[2]=Math.max(Nt[2],Ae+this.objectOffset[2]),Vt=Math.max(Vt,_t),Lt+=1}}}for(Y.intensityBounds&&(tr=+Y.intensityBounds[0],Vt=+Y.intensityBounds[1]),q=6;q<Ut;q+=10)$t[q]=($t[q]-tr)/(Vt-tr);this._vertexCount=Lt,this._coordinateBuffer.update($t.subarray(0,Ut)),t.freeFloat($t),t.free(me.data),this.bounds=[xt,Nt],this.intensity=Y.intensity||this._field[2],(this.intensityBounds[0]!==tr||this.intensityBounds[1]!==Vt)&&(ee=!0),this.intensityBounds=[tr,Vt]}if("levels"in Y){var kt=Y.levels;for(Array.isArray(kt[0])?kt=kt.slice():kt=[[],[],kt],q=0;q<3;++q)kt[q]=kt[q].slice(),kt[q].sort(function(ct,yt){return ct-yt});for(q=0;q<3;++q)for(de=0;de<kt[q].length;++de)kt[q][de]-=this.objectOffset[q];e:for(q=0;q<3;++q){if(kt[q].length!==this.contourLevels[q].length){ee=!0;break}for(de=0;de<kt[q].length;++de)if(kt[q][de]!==this.contourLevels[q][de]){ee=!0;break e}}this.contourLevels=kt}if(ee){ye=this._field,Z=this.shape;for(var jt=[],Bt=0;Bt<3;++Bt){var Wt=this.contourLevels[Bt],Qt=[],Zt=[],cr=[0,0,0];for(q=0;q<Wt.length;++q){var Xr=d(this._field[Bt],Wt[q]);Qt.push(jt.length/5|0),Lt=0;e:for(de=0;de<Xr.cells.length;++de){var vn=Xr.cells[de];for(Ve=0;Ve<2;++Ve){var en=Xr.positions[vn[Ve]],ft=en[0],ar=Math.floor(ft)|0,rr=ft-ar,Kt=en[1],Er=Math.floor(Kt)|0,st=Kt-Er,et=!1;t:for(var vt=0;vt<3;++vt){cr[vt]=0;var pt=(Bt+vt+1)%3;for(Ye=0;Ye<2;++Ye){var Ct=Ye?rr:1-rr;for(He=Math.min(Math.max(ar+Ye,0),Z[0])|0,ot=0;ot<2;++ot){var Ht=ot?st:1-st;if(Je=Math.min(Math.max(Er+ot,0),Z[1])|0,vt<2?Ae=this._field[pt].get(He,Je):Ae=(this.intensity.get(He,Je)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ae)||isNaN(Ae)){et=!0;break t}var Pe=Ct*Ht;cr[vt]+=Pe*Ae}}}if(!et)jt.push(cr[0],cr[1],en[0],en[1],cr[2]),Lt+=1;else{if(Ve>0){for(var ke=0;ke<5;++ke)jt.pop();Lt-=1}continue e}}}Zt.push(Lt)}this._contourOffsets[Bt]=Qt,this._contourCounts[Bt]=Zt}var lt=t.mallocFloat(jt.length);for(q=0;q<jt.length;++q)lt[q]=jt[q];this._contourBuffer.update(lt),t.freeFloat(lt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var Y=0;Y<3;++Y)t.freeFloat(this._field[Y].data)},I.highlight=function(Y){var V;if(!Y){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(V=0;V<3;++V)this.enableHighlight[V]?this.highlightLevel[V]=Y.level[V]:this.highlightLevel[V]=-1;var ee;for(this.snapToData?ee=Y.dataCoordinate:ee=Y.position,V=0;V<3;++V)ee[V]-=this.objectOffset[V];if(!((!this.enableDynamic[0]||ee[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ee[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ee[2]===this.dynamicLevel[2]))){for(var ne=0,Z=this.shape,q=t.mallocFloat(12*Z[0]*Z[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=ee[ie];var se=(ie+1)%3,ae=(ie+2)%3,oe=this._field[ie],be=this._field[se],ce=this._field[ae],de=d(oe,ee[ie]),ye=de.cells,ge=de.positions;for(this._dynamicOffsets[ie]=ne,V=0;V<ye.length;++V)for(var me=ye[V],Me=0;Me<2;++Me){var Le=ge[me[Me]],Oe=+Le[0],_e=Oe|0,Ee=Math.min(_e+1,Z[0])|0,Ze=Oe-_e,Ge=1-Ze,Fe=+Le[1],Re=Fe|0,We=Math.min(Re+1,Z[1])|0,xt=Fe-Re,Nt=1-xt,tr=Ge*Nt,Vt=Ge*xt,Pt=Ze*Nt,$t=Ze*xt,Ut=tr*be.get(_e,Re)+Vt*be.get(_e,We)+Pt*be.get(Ee,Re)+$t*be.get(Ee,We),Lt=tr*ce.get(_e,Re)+Vt*ce.get(_e,We)+Pt*ce.get(Ee,Re)+$t*ce.get(Ee,We);if(isNaN(Ut)||isNaN(Lt)){Me&&(ne-=1);break}q[2*ne+0]=Ut,q[2*ne+1]=Lt,ne+=1}this._dynamicCounts[ie]=ne-this._dynamicOffsets[ie]}this._dynamicBuffer.update(q.subarray(0,2*ne)),t.freeFloat(q)}};function te(Y){var V=Y.gl,ee=u(V),ne=_(V),Z=A(V),q=g(V),ie=a(V),se=n(V,[{buffer:ie,size:4,stride:b,offset:0},{buffer:ie,size:3,stride:b,offset:16},{buffer:ie,size:3,stride:b,offset:28}]),ae=a(V),oe=n(V,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),be=a(V),ce=n(V,[{buffer:be,size:2,type:V.FLOAT}]),de=r(V,1,E,V.RGBA,V.UNSIGNED_BYTE);de.minFilter=V.LINEAR,de.magFilter=V.LINEAR;var ye=new F(V,[0,0],[[0,0,0],[0,0,0]],ee,ne,ie,se,de,Z,q,ae,oe,be,ce,[0,0,0]),ge={levels:[[],[],[]]};for(var me in Y)ge[me]=Y[me];return ge.colormap=ge.colormap||"jet",ye.update(ge),ye}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(f,M,T){var e=f("ndarray"),a=f("ndarray-ops"),n=f("typedarray-pool");M.exports=g;var r=null,t=null,h=null;function i(b){r=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],t=[b.NEAREST,b.LINEAR,b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],h=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]}function s(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var y=function(b,v){a.muls(b,v,255)};function d(b,v,C){var S=b.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(v<0||v>k||C<0||C>k)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[v,C],b.bind(),S.texImage2D(S.TEXTURE_2D,0,b.format,v,C,0,b.format,b.type,null),b._mipLevels=[0],b}function p(b,v,C,S,k,E){this.gl=b,this.handle=v,this.format=k,this.type=E,this._shape=[C,S],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var c=p.prototype;Object.defineProperties(c,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(b)>=0&&(v.getExtension("OES_texture_float_linear")||(b=v.NEAREST)),t.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(b)>=0&&(v.getExtension("OES_texture_float_linear")||(b=v.NEAREST)),t.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var v=this._anisoSamples;if(this._anisoSamples=Math.max(b,1)|0,v!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),h.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),h.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),b.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var v=0;v<2;++v)if(h.indexOf(b[v])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(!Array.isArray(b))b=[b|0,b|0];else if(b.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return d(this,b[0]|0,b[1]|0),[b[0]|0,b[1]|0]}},width:{get:function(){return this._shape[0]},set:function(b){return b=b|0,d(this,b,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return b=b|0,d(this,this._shape[0],b),b}}}),c.bind=function(b){var v=this.gl;return b!==void 0&&v.activeTexture(v.TEXTURE0+(b|0)),v.bindTexture(v.TEXTURE_2D,this.handle),b!==void 0?b|0:v.getParameter(v.ACTIVE_TEXTURE)-v.TEXTURE0},c.dispose=function(){this.gl.deleteTexture(this.handle)},c.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),v=0;b>0;++v,b>>>=1)this._mipLevels.indexOf(v)<0&&this._mipLevels.push(v)},c.setPixels=function(b,v,C,S){var k=this.gl;this.bind(),Array.isArray(v)?(S=C,C=v[1]|0,v=v[0]|0):(v=v||0,C=C||0),S=S||0;var E=s(b)?b:b.raw;if(E){var F=this._mipLevels.indexOf(S)<0;F?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,E),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,v,C,this.format,this.type,E)}else if(b.shape&&b.stride&&b.data){if(b.shape.length<2||v+b.shape[1]>this._shape[1]>>>S||C+b.shape[0]>this._shape[0]>>>S||v<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(k,v,C,S,this.format,this.type,this._mipLevels,b)}else throw new Error("gl-texture2d: Unsupported data type")};function m(b,v){return b.length===3?v[2]===1&&v[1]===b[0]*b[2]&&v[0]===b[2]:v[0]===1&&v[1]===b[0]}function l(b,v,C,S,k,E,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,z=0,B=m(R,I.stride.slice());if(D==="float32"?O=b.FLOAT:D==="float64"?(O=b.FLOAT,B=!1,D="float32"):D==="uint8"?O=b.UNSIGNED_BYTE:(O=b.UNSIGNED_BYTE,B=!1,D="uint8"),R.length===2)z=b.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=b.ALPHA;else if(R[2]===2)z=b.LUMINANCE_ALPHA;else if(R[2]===3)z=b.RGB;else if(R[2]===4)z=b.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===b.LUMINANCE||z===b.ALPHA)&&(k===b.LUMINANCE||k===b.ALPHA)&&(z=k),z!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var G=I.size,Q=F.indexOf(S)<0;if(Q&&F.push(S),O===E&&B)I.offset===0&&I.data.length===G?Q?b.texImage2D(b.TEXTURE_2D,S,k,R[0],R[1],0,k,E,I.data):b.texSubImage2D(b.TEXTURE_2D,S,v,C,R[0],R[1],k,E,I.data):Q?b.texImage2D(b.TEXTURE_2D,S,k,R[0],R[1],0,k,E,I.data.subarray(I.offset,I.offset+G)):b.texSubImage2D(b.TEXTURE_2D,S,v,C,R[0],R[1],k,E,I.data.subarray(I.offset,I.offset+G));else{var X;E===b.FLOAT?X=n.mallocFloat32(G):X=n.mallocUint8(G);var j=e(X,R,[R[2],R[2]*R[0],1]);O===b.FLOAT&&E===b.UNSIGNED_BYTE?y(j,I):a.assign(j,I),Q?b.texImage2D(b.TEXTURE_2D,S,k,R[0],R[1],0,k,E,X.subarray(0,G)):b.texSubImage2D(b.TEXTURE_2D,S,v,C,R[0],R[1],k,E,X.subarray(0,G)),E===b.FLOAT?n.freeFloat32(X):n.freeUint8(X)}}function x(b){var v=b.createTexture();return b.bindTexture(b.TEXTURE_2D,v),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),v}function u(b,v,C,S,k){var E=b.getParameter(b.MAX_TEXTURE_SIZE);if(v<0||v>E||C<0||C>E)throw new Error("gl-texture2d: Invalid texture shape");if(k===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=x(b);return b.texImage2D(b.TEXTURE_2D,0,S,v,C,0,S,k,null),new p(b,F,v,C,S,k)}function A(b,v,C,S,k,E){var F=x(b);return b.texImage2D(b.TEXTURE_2D,0,k,k,E,v),new p(b,F,C,S,k,E)}function _(b,v){var C=v.dtype,S=v.shape.slice(),k=b.getParameter(b.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var E=m(S,v.stride.slice()),F=0;C==="float32"?F=b.FLOAT:C==="float64"?(F=b.FLOAT,E=!1,C="float32"):C==="uint8"?F=b.UNSIGNED_BYTE:(F=b.UNSIGNED_BYTE,E=!1,C="uint8");var I=0;if(S.length===2)I=b.LUMINANCE,S=[S[0],S[1],1],v=e(v.data,S,[v.stride[0],v.stride[1],1],v.offset);else if(S.length===3)if(S[2]===1)I=b.ALPHA;else if(S[2]===2)I=b.LUMINANCE_ALPHA;else if(S[2]===3)I=b.RGB;else if(S[2]===4)I=b.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===b.FLOAT&&!b.getExtension("OES_texture_float")&&(F=b.UNSIGNED_BYTE,E=!1);var D,R,O=v.size;if(E)v.offset===0&&v.data.length===O?D=v.data:D=v.data.subarray(v.offset,v.offset+O);else{var z=[S[2],S[2]*S[0],1];R=n.malloc(O,C);var B=e(R,S,z,0);(C==="float32"||C==="float64")&&F===b.UNSIGNED_BYTE?y(B,v):a.assign(B,v),D=R.subarray(0,O)}var G=x(b);return b.texImage2D(b.TEXTURE_2D,0,I,S[0],S[1],0,I,F,D),E||n.free(R),new p(b,G,S[0],S[1],I,F)}function g(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||i(b),typeof arguments[1]=="number")return u(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(b,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var v=arguments[1],C=s(v)?v:v.raw;if(C)return A(b,C,v.width|0,v.height|0,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(v.shape&&v.data&&v.stride)return _(b,v)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(f,M,T){function e(a,n,r){n?n.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var t=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var h=0;h<r.length;++h){var i=r[h];if(i.buffer){var s=i.buffer,y=i.size||4,d=i.type||a.FLOAT,p=!!i.normalized,c=i.stride||0,m=i.offset||0;s.bind(),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,y,d,p,c,m)}else{if(typeof i=="number")a.vertexAttrib1f(h,i);else if(i.length===1)a.vertexAttrib1f(h,i[0]);else if(i.length===2)a.vertexAttrib2f(h,i[0],i[1]);else if(i.length===3)a.vertexAttrib3f(h,i[0],i[1],i[2]);else if(i.length===4)a.vertexAttrib4f(h,i[0],i[1],i[2],i[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(h)}}for(;h<t;++h)a.disableVertexAttribArray(h)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var h=0;h<t;++h)a.disableVertexAttribArray(h)}}M.exports=e},{}],148:[function(f,M,T){var e=f("./do-bind.js");function a(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(r,t,h){this._elements=t,this._attributes=r,this._elementsType=h||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(r,t,h){h=h||0;var i=this.gl;this._elements?i.drawElements(r,t,this._elementsType,h):i.drawArrays(r,h,t)};function n(r){return new a(r)}M.exports=n},{"./do-bind.js":147}],149:[function(f,M,T){var e=f("./do-bind.js");function a(t,h,i,s,y,d){this.location=t,this.dimension=h,this.a=i,this.b=s,this.c=y,this.d=d}a.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(t,h,i){this.gl=t,this._ext=h,this.handle=i,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(t,h,i){if(this.bind(),e(this.gl,h,t),this.unbind(),this._attribs.length=0,t)for(var s=0;s<t.length;++s){var y=t[s];typeof y=="number"?this._attribs.push(new a(s,1,y)):Array.isArray(y)&&this._attribs.push(new a(s,y.length,y[0],y[1],y[2],y[3]))}this._useElements=!!h,this._elementsType=i||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(t,h,i){i=i||0;var s=this.gl;this._useElements?s.drawElements(t,h,this._elementsType,i):s.drawArrays(t,i,h)};function r(t,h){return new n(t,h,h.createVertexArrayOES())}M.exports=r},{"./do-bind.js":147}],150:[function(f,M,T){var e=f("./lib/vao-native.js"),a=f("./lib/vao-emulated.js");function n(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function r(t,h,i,s){var y=t.createVertexArray?new n(t):t.getExtension("OES_vertex_array_object"),d;return y?d=e(t,y):d=a(t),d.update(h,i,s),d}M.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a}},{}],152:[function(f,M,T){M.exports=r;var e=f("./fromValues"),a=f("./normalize"),n=f("./dot");function r(t,h){var i=e(t[0],t[1],t[2]),s=e(h[0],h[1],h[2]);a(i,i),a(s,s);var y=n(i,s);return y>1?0:Math.acos(y)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a}},{}],154:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}},{}],155:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}},{}],156:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=r[0],y=r[1],d=r[2];return a[0]=h*d-i*y,a[1]=i*s-t*d,a[2]=t*y-h*s,a}},{}],158:[function(f,M,T){M.exports=f("./distance")},{"./distance":159}],159:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2];return Math.sqrt(r*r+t*t+h*h)}},{}],160:[function(f,M,T){M.exports=f("./divide")},{"./divide":161}],161:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a}},{}],162:[function(f,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}},{}],163:[function(f,M,T){M.exports=1e-6},{}],164:[function(f,M,T){M.exports=a;var e=f("./epsilon");function a(n,r){var t=n[0],h=n[1],i=n[2],s=r[0],y=r[1],d=r[2];return Math.abs(t-s)<=e*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(h-y)<=e*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(i-d)<=e*Math.max(1,Math.abs(i),Math.abs(d))}},{"./epsilon":163}],165:[function(f,M,T){M.exports=e;function e(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]}},{}],166:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a}},{}],167:[function(f,M,T){M.exports=a;var e=f("./create")();function a(n,r,t,h,i,s){var y,d;for(r||(r=3),t||(t=0),h?d=Math.min(h*r+t,n.length):d=n.length,y=t;y<d;y+=r)e[0]=n[y],e[1]=n[y+1],e[2]=n[y+2],i(e,e,s),n[y]=e[0],n[y+1]=e[1],n[y+2]=e[2];return n}},{"./create":156}],168:[function(f,M,T){M.exports=e;function e(a,n,r){var t=new Float32Array(3);return t[0]=a,t[1]=n,t[2]=r,t}},{}],169:[function(f,M,T){M.exports={EPSILON:f("./epsilon"),create:f("./create"),clone:f("./clone"),angle:f("./angle"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),equals:f("./equals"),exactEquals:f("./exactEquals"),add:f("./add"),subtract:f("./subtract"),sub:f("./sub"),multiply:f("./multiply"),mul:f("./mul"),divide:f("./divide"),div:f("./div"),min:f("./min"),max:f("./max"),floor:f("./floor"),ceil:f("./ceil"),round:f("./round"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),dist:f("./dist"),squaredDistance:f("./squaredDistance"),sqrDist:f("./sqrDist"),length:f("./length"),len:f("./len"),squaredLength:f("./squaredLength"),sqrLen:f("./sqrLen"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),cross:f("./cross"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformMat3:f("./transformMat3"),transformQuat:f("./transformQuat"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),forEach:f("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a}},{}],171:[function(f,M,T){M.exports=f("./length")},{"./length":172}],172:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return Math.sqrt(n*n+r*r+t*t)}},{}],173:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],i=n[1],s=n[2];return a[0]=h+t*(r[0]-h),a[1]=i+t*(r[1]-i),a[2]=s+t*(r[2]-s),a}},{}],174:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a}},{}],175:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a}},{}],176:[function(f,M,T){M.exports=f("./multiply")},{"./multiply":177}],177:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a}},{}],178:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a}},{}],179:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],i=r*r+t*t+h*h;return i>0&&(i=1/Math.sqrt(i),a[0]=n[0]*i,a[1]=n[1]*i,a[2]=n[2]*i),a}},{}],180:[function(f,M,T){M.exports=e;function e(a,n){n=n||1;var r=Math.random()*2*Math.PI,t=Math.random()*2-1,h=Math.sqrt(1-t*t)*n;return a[0]=Math.cos(r)*h,a[1]=Math.sin(r)*h,a[2]=t*n,a}},{}],181:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[1],i=r[2],s=n[1]-h,y=n[2]-i,d=Math.sin(t),p=Math.cos(t);return a[0]=n[0],a[1]=h+s*p-y*d,a[2]=i+s*d+y*p,a}},{}],182:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[0],i=r[2],s=n[0]-h,y=n[2]-i,d=Math.sin(t),p=Math.cos(t);return a[0]=h+y*d+s*p,a[1]=n[1],a[2]=i+y*p-s*d,a}},{}],183:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[0],i=r[1],s=n[0]-h,y=n[1]-i,d=Math.sin(t),p=Math.cos(t);return a[0]=h+s*p-y*d,a[1]=i+s*d+y*p,a[2]=n[2],a}},{}],184:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a}},{}],185:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a}},{}],186:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a}},{}],187:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n,a[1]=r,a[2]=t,a}},{}],188:[function(f,M,T){M.exports=f("./squaredDistance")},{"./squaredDistance":190}],189:[function(f,M,T){M.exports=f("./squaredLength")},{"./squaredLength":191}],190:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2];return r*r+t*t+h*h}},{}],191:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return n*n+r*r+t*t}},{}],192:[function(f,M,T){M.exports=f("./subtract")},{"./subtract":193}],193:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a}},{}],194:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2];return a[0]=t*r[0]+h*r[3]+i*r[6],a[1]=t*r[1]+h*r[4]+i*r[7],a[2]=t*r[2]+h*r[5]+i*r[8],a}},{}],195:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=r[3]*t+r[7]*h+r[11]*i+r[15];return s=s||1,a[0]=(r[0]*t+r[4]*h+r[8]*i+r[12])/s,a[1]=(r[1]*t+r[5]*h+r[9]*i+r[13])/s,a[2]=(r[2]*t+r[6]*h+r[10]*i+r[14])/s,a}},{}],196:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=r[0],y=r[1],d=r[2],p=r[3],c=p*t+y*i-d*h,m=p*h+d*t-s*i,l=p*i+s*h-y*t,x=-s*t-y*h-d*i;return a[0]=c*p+x*-s+m*-d-l*-y,a[1]=m*p+x*-y+l*-s-c*-d,a[2]=l*p+x*-d+c*-y-m*-s,a}},{}],197:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a}},{}],198:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(4);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}},{}],199:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}},{}],200:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2],i=n[3]-a[3];return Math.sqrt(r*r+t*t+h*h+i*i)}},{}],202:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a[3]=n[3]/r[3],a}},{}],203:[function(f,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]}},{}],204:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=new Float32Array(4);return h[0]=a,h[1]=n,h[2]=r,h[3]=t,h}},{}],205:[function(f,M,T){M.exports={create:f("./create"),clone:f("./clone"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),add:f("./add"),subtract:f("./subtract"),multiply:f("./multiply"),divide:f("./divide"),min:f("./min"),max:f("./max"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),squaredDistance:f("./squaredDistance"),length:f("./length"),squaredLength:f("./squaredLength"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformQuat:f("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a[3]=1/n[3],a}},{}],207:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3];return Math.sqrt(n*n+r*r+t*t+h*h)}},{}],208:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],i=n[1],s=n[2],y=n[3];return a[0]=h+t*(r[0]-h),a[1]=i+t*(r[1]-i),a[2]=s+t*(r[2]-s),a[3]=y+t*(r[3]-y),a}},{}],209:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a[3]=Math.max(n[3],r[3]),a}},{}],210:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a[3]=Math.min(n[3],r[3]),a}},{}],211:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a[3]=n[3]*r[3],a}},{}],212:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=-n[3],a}},{}],213:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],i=n[3],s=r*r+t*t+h*h+i*i;return s>0&&(s=1/Math.sqrt(s),a[0]=r*s,a[1]=t*s,a[2]=h*s,a[3]=i*s),a}},{}],214:[function(f,M,T){var e=f("./normalize"),a=f("./scale");M.exports=n;function n(r,t){return t=t||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),a(r,r,t),r}},{"./normalize":213,"./scale":215}],215:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a}},{}],216:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a[3]=n[3]+r[3]*t,a}},{}],217:[function(f,M,T){M.exports=e;function e(a,n,r,t,h){return a[0]=n,a[1]=r,a[2]=t,a[3]=h,a}},{}],218:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2],i=n[3]-a[3];return r*r+t*t+h*h+i*i}},{}],219:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3];return n*n+r*r+t*t+h*h}},{}],220:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a}},{}],221:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=n[3];return a[0]=r[0]*t+r[4]*h+r[8]*i+r[12]*s,a[1]=r[1]*t+r[5]*h+r[9]*i+r[13]*s,a[2]=r[2]*t+r[6]*h+r[10]*i+r[14]*s,a[3]=r[3]*t+r[7]*h+r[11]*i+r[15]*s,a}},{}],222:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],i=n[2],s=r[0],y=r[1],d=r[2],p=r[3],c=p*t+y*i-d*h,m=p*h+d*t-s*i,l=p*i+s*h-y*t,x=-s*t-y*h-d*i;return a[0]=c*p+x*-s+m*-d-l*-y,a[1]=m*p+x*-y+l*-s-c*-d,a[2]=l*p+x*-d+c*-y-m*-s,a[3]=n[3],a}},{}],223:[function(f,M,T){var e=f("glsl-tokenizer"),a=f("atob-lite");M.exports=n;function n(r){for(var t=Array.isArray(r)?r:e(r),h=0;h<t.length;h++){var i=t[h];if(i.type==="preprocessor"){var s=i.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!s&&!!s[2]){var y=s[1],d=s[2];return(y?a(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(f,M,T){M.exports=v;var e=f("./lib/literals"),a=f("./lib/operators"),n=f("./lib/builtins"),r=f("./lib/literals-300es"),t=f("./lib/builtins-300es"),h=999,i=9999,s=0,y=1,d=2,p=3,c=4,m=5,l=6,x=7,u=8,A=9,_=10,g=11,b=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(C){var S=0,k=0,E=h,F,I,D=[],R=[],O=1,z=0,B=0,G=!1,Q=!1,X="",j;C=C||{};var re=n,ue=e;C.version==="300 es"&&(re=t,ue=r);for(var K={},te={},S=0;S<re.length;S++)K[re[S]]=!0;for(var S=0;S<ue.length;S++)te[ue[S]]=!0;return function(ge){return R=[],ge!==null?V(ge):ee()};function Y(ge){ge.length&&R.push({type:b[E],data:ge,position:B,line:O,column:z})}function V(ge){S=0,ge.toString&&(ge=ge.toString()),X+=ge.replace(/\r\n/g,`
`),j=X.length;for(var me;F=X[S],S<j;){switch(me=S,E){case s:S=se();break;case y:S=ie();break;case d:S=q();break;case p:S=ae();break;case c:S=ce();break;case g:S=be();break;case m:S=de();break;case i:S=ye();break;case A:S=Z();break;case h:S=ne();break}if(me!==S)switch(X[me]){case`
`:z=0,++O;break;default:++z;break}}return k+=S,X=X.slice(S),R}function ee(ge){return D.length&&Y(D.join("")),E=_,Y("(eof)"),R}function ne(){return D=D.length?[]:D,I==="/"&&F==="*"?(B=k+S-1,E=s,I=F,S+1):I==="/"&&F==="/"?(B=k+S-1,E=y,I=F,S+1):F==="#"?(E=d,B=k+S,S):/\s/.test(F)?(E=A,B=k+S,S):(G=/\d/.test(F),Q=/[^\w_]/.test(F),B=k+S,E=G?c:Q?p:i,S)}function Z(){return/[^\s]/g.test(F)?(Y(D.join("")),E=h,S):(D.push(F),I=F,S+1)}function q(){return(F==="\r"||F===`
`)&&I!=="\\"?(Y(D.join("")),E=h,S):(D.push(F),I=F,S+1)}function ie(){return q()}function se(){return F==="/"&&I==="*"?(D.push(F),Y(D.join("")),E=h,S+1):(D.push(F),I=F,S+1)}function ae(){if(I==="."&&/\d/.test(F))return E=m,S;if(I==="/"&&F==="*")return E=s,S;if(I==="/"&&F==="/")return E=y,S;if(F==="."&&D.length){for(;oe(D););return E=m,S}if(F===";"||F===")"||F==="("){if(D.length)for(;oe(D););return Y(F),E=h,S+1}var ge=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||ge){for(;oe(D););return E=h,S}return D.push(F),I=F,S+1}function oe(ge){var me=0,Me,Le;do{if(Me=a.indexOf(ge.slice(0,ge.length+me).join("")),Le=a[Me],Me===-1){if(me--+ge.length>0)continue;Le=ge.slice(0,1).join("")}return Y(Le),B+=Le.length,D=D.slice(Le.length),D.length}while(1)}function be(){return/[^a-fA-F0-9]/.test(F)?(Y(D.join("")),E=h,S):(D.push(F),I=F,S+1)}function ce(){return F==="."||/[eE]/.test(F)?(D.push(F),E=m,I=F,S+1):F==="x"&&D.length===1&&D[0]==="0"?(E=g,D.push(F),I=F,S+1):/[^\d]/.test(F)?(Y(D.join("")),E=h,S):(D.push(F),I=F,S+1)}function de(){return F==="f"&&(D.push(F),I=F,S+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,S+1):/[^\d]/.test(F)?(Y(D.join("")),E=h,S):(D.push(F),I=F,S+1)}function ye(){if(/[^\d\w_]/.test(F)){var ge=D.join("");return te[ge]?E=u:K[ge]?E=x:E=l,Y(D.join("")),E=h,S}return D.push(F),I=F,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(f,M,T){var e=f("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(f,M,T){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(f,M,T){var e=f("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(f,M,T){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(f,M,T){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(f,M,T){var e=f("./index");M.exports=a;function a(n,r){var t=e(r),h=[];return h=h.concat(t(n)),h=h.concat(t(null)),h}},{"./index":224}],231:[function(f,M,T){M.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],a[r]||"");return n.push(e[r]),n.join("")}},{}],232:[function(f,M,T){var e=f("is-browser");function a(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}M.exports=e&&a()},{"is-browser":236}],233:[function(f,M,T){M.exports=p;var e=f("robust-orientation"),a=f("simplicial-complex").compareCells;function n(c,m,l){this.vertices=c,this.adjacent=m,this.boundary=l,this.lastVisited=-1}n.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function r(c,m,l){this.vertices=c,this.cell=m,this.index=l}function t(c,m){return a(c.vertices,m.vertices)}function h(c){return function(){var m=this.tuple;return c.apply(this,m)}}function i(c){var m=e[c+1];return m||(m=e),h(m)}var s=[];function y(c,m,l){this.dimension=c,this.vertices=m,this.simplices=l,this.interior=l.filter(function(A){return!A.boundary}),this.tuple=new Array(c+1);for(var x=0;x<=c;++x)this.tuple[x]=this.vertices[x];var u=s[c];u||(u=s[c]=i(c)),this.orient=u}var d=y.prototype;d.handleBoundaryDegeneracy=function(c,m){var l=this.dimension,x=this.vertices.length-1,u=this.tuple,A=this.vertices,_=[c];for(c.lastVisited=-x;_.length>0;){c=_.pop();for(var g=c.adjacent,b=0;b<=l;++b){var v=g[b];if(!(!v.boundary||v.lastVisited<=-x)){for(var C=v.vertices,S=0;S<=l;++S){var k=C[S];k<0?u[S]=m:u[S]=A[k]}var E=this.orient();if(E>0)return v;v.lastVisited=-x,E===0&&_.push(v)}}}return null},d.walk=function(c,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,A=this.tuple,_=m?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[_];e:for(;!g.boundary;){for(var b=g.vertices,v=g.adjacent,C=0;C<=x;++C)A[C]=u[b[C]];g.lastVisited=l;for(var C=0;C<=x;++C){var S=v[C];if(!(S.lastVisited>=l)){var k=A[C];A[C]=c;var E=this.orient();if(A[C]=k,E<0){g=S;continue e}else S.boundary?S.lastVisited=-l:S.lastVisited=l}}return}return g},d.addPeaks=function(c,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,A=this.tuple,_=this.interior,g=this.simplices,b=[m];m.lastVisited=l,m.vertices[m.vertices.indexOf(-1)]=l,m.boundary=!1,_.push(m);for(var v=[];b.length>0;){var m=b.pop(),C=m.vertices,S=m.adjacent,k=C.indexOf(l);if(!(k<0)){for(var E=0;E<=x;++E)if(E!==k){var F=S[E];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=x;++R)I[R]<0?(D=R,A[R]=c):A[R]=u[I[R]];var O=this.orient();if(O>0){I[D]=l,F.boundary=!1,_.push(F),b.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,B=C.slice(),G=S.slice(),Q=new n(B,G,!0);g.push(Q);var X=z.indexOf(m);if(!(X<0)){z[X]=Q,G[k]=F,B[E]=-1,G[E]=m,S[E]=Q,Q.flip();for(var R=0;R<=x;++R){var j=B[R];if(!(j<0||j===l)){for(var re=new Array(x-1),ue=0,K=0;K<=x;++K){var te=B[K];te<0||K===R||(re[ue++]=te)}v.push(new r(re,Q,R))}}}}}}}v.sort(t);for(var E=0;E+1<v.length;E+=2){var Y=v[E],V=v[E+1],ee=Y.index,ne=V.index;ee<0||ne<0||(Y.cell.adjacent[Y.index]=V.cell,V.cell.adjacent[V.index]=Y.cell)}},d.insert=function(c,m){var l=this.vertices;l.push(c);var x=this.walk(c,m);if(!!x){for(var u=this.dimension,A=this.tuple,_=0;_<=u;++_){var g=x.vertices[_];g<0?A[_]=c:A[_]=l[g]}var b=this.orient(A);b<0||b===0&&(x=this.handleBoundaryDegeneracy(x,c),!x)||this.addPeaks(c,x)}},d.boundary=function(){for(var c=this.dimension,m=[],l=this.simplices,x=l.length,u=0;u<x;++u){var A=l[u];if(A.boundary){for(var _=new Array(c),g=A.vertices,b=0,v=0,C=0;C<=c;++C)g[C]>=0?_[b++]=g[C]:v=C&1;if(v===(c&1)){var S=_[0];_[0]=_[1],_[1]=S}m.push(_)}}return m};function p(c,m){var l=c.length;if(l===0)throw new Error("Must have at least d+1 points");var x=c[0].length;if(l<=x)throw new Error("Must input at least d+1 points");var u=c.slice(0,x+1),A=e.apply(void 0,u);if(A===0)throw new Error("Input not in general position");for(var _=new Array(x+1),g=0;g<=x;++g)_[g]=g;A<0&&(_[0]=1,_[1]=0);for(var b=new n(_,new Array(x+1),!1),v=b.adjacent,C=new Array(x+2),g=0;g<=x;++g){for(var S=_.slice(),k=0;k<=x;++k)k===g&&(S[k]=-1);var E=S[0];S[0]=S[1],S[1]=E;var F=new n(S,new Array(x+1),!0);v[g]=F,C[g]=F}C[x+1]=b;for(var g=0;g<=x;++g)for(var S=v[g].vertices,I=v[g].adjacent,k=0;k<=x;++k){var D=S[k];if(D<0){I[k]=b;continue}for(var R=0;R<=x;++R)v[R].vertices.indexOf(D)<0&&(I[k]=v[R])}for(var O=new y(x,u,C),z=!!m,g=x+1;g<l;++g)O.insert(c[g],z);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(f,M,T){var e=f("binary-search-bounds"),a=0,n=1,r=2;M.exports=b;function t(v,C,S,k,E){this.mid=v,this.left=C,this.right=S,this.leftPoints=k,this.rightPoints=E,this.count=(C?C.count:0)+(S?S.count:0)+k.length}var h=t.prototype;function i(v,C){v.mid=C.mid,v.left=C.left,v.right=C.right,v.leftPoints=C.leftPoints,v.rightPoints=C.rightPoints,v.count=C.count}function s(v,C){var S=A(C);v.mid=S.mid,v.left=S.left,v.right=S.right,v.leftPoints=S.leftPoints,v.rightPoints=S.rightPoints,v.count=S.count}function y(v,C){var S=v.intervals([]);S.push(C),s(v,S)}function d(v,C){var S=v.intervals([]),k=S.indexOf(C);return k<0?a:(S.splice(k,1),s(v,S),n)}h.intervals=function(v){return v.push.apply(v,this.leftPoints),this.left&&this.left.intervals(v),this.right&&this.right.intervals(v),v},h.insert=function(v){var C=this.count-this.leftPoints.length;if(this.count+=1,v[1]<this.mid)this.left?4*(this.left.count+1)>3*(C+1)?y(this,v):this.left.insert(v):this.left=A([v]);else if(v[0]>this.mid)this.right?4*(this.right.count+1)>3*(C+1)?y(this,v):this.right.insert(v):this.right=A([v]);else{var S=e.ge(this.leftPoints,v,x),k=e.ge(this.rightPoints,v,u);this.leftPoints.splice(S,0,v),this.rightPoints.splice(k,0,v)}},h.remove=function(v){var C=this.count-this.leftPoints;if(v[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(C-1))return d(this,v);var k=this.left.remove(v);return k===r?(this.left=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else if(v[0]>this.mid){if(!this.right)return a;var E=this.left?this.left.count:0;if(4*E>3*(C-1))return d(this,v);var k=this.right.remove(v);return k===r?(this.right=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===v?r:a;if(this.leftPoints.length===1&&this.leftPoints[0]===v){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,k=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=k}i(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return n}for(var D=e.ge(this.leftPoints,v,x);D<this.leftPoints.length&&this.leftPoints[D][0]===v[0];++D)if(this.leftPoints[D]===v){this.count-=1,this.leftPoints.splice(D,1);for(var k=e.ge(this.rightPoints,v,u);k<this.rightPoints.length&&this.rightPoints[k][1]===v[1];++k)if(this.rightPoints[k]===v)return this.rightPoints.splice(k,1),n}return a}};function p(v,C,S){for(var k=0;k<v.length&&v[k][0]<=C;++k){var E=S(v[k]);if(E)return E}}function c(v,C,S){for(var k=v.length-1;k>=0&&v[k][1]>=C;--k){var E=S(v[k]);if(E)return E}}function m(v,C){for(var S=0;S<v.length;++S){var k=C(v[S]);if(k)return k}}h.queryPoint=function(v,C){if(v<this.mid){if(this.left){var S=this.left.queryPoint(v,C);if(S)return S}return p(this.leftPoints,v,C)}else if(v>this.mid){if(this.right){var S=this.right.queryPoint(v,C);if(S)return S}return c(this.rightPoints,v,C)}else return m(this.leftPoints,C)},h.queryInterval=function(v,C,S){if(v<this.mid&&this.left){var k=this.left.queryInterval(v,C,S);if(k)return k}if(C>this.mid&&this.right){var k=this.right.queryInterval(v,C,S);if(k)return k}return C<this.mid?p(this.leftPoints,C,S):v>this.mid?c(this.rightPoints,v,S):m(this.leftPoints,S)};function l(v,C){return v-C}function x(v,C){var S=v[0]-C[0];return S||v[1]-C[1]}function u(v,C){var S=v[1]-C[1];return S||v[0]-C[0]}function A(v){if(v.length===0)return null;for(var C=[],S=0;S<v.length;++S)C.push(v[S][0],v[S][1]);C.sort(l);for(var k=C[C.length>>1],E=[],F=[],I=[],S=0;S<v.length;++S){var D=v[S];D[1]<k?E.push(D):k<D[0]?F.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(x),O.sort(u),new t(k,A(E),A(F),R,O)}function _(v){this.root=v}var g=_.prototype;g.insert=function(v){this.root?this.root.insert(v):this.root=new t(v[0],null,null,[v],[v])},g.remove=function(v){if(this.root){var C=this.root.remove(v);return C===r&&(this.root=null),C!==a}return!1},g.queryPoint=function(v,C){if(this.root)return this.root.queryPoint(v,C)},g.queryInterval=function(v,C,S){if(v<=C&&this.root)return this.root.queryInterval(v,C,S)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function b(v){return!v||v.length===0?new _(null):new _(A(v))}},{"binary-search-bounds":31}],235:[function(f,M,T){function e(a){for(var n=new Array(a),r=0;r<a;++r)n[r]=r;return n}M.exports=e},{}],236:[function(f,M,T){M.exports=!0},{}],237:[function(f,M,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */M.exports=function(n){return n!=null&&(e(n)||a(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function a(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}},{}],238:[function(f,M,T){M.exports=n,M.exports.isMobile=n,M.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(r){r||(r={});var t=r.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var h=r.tablet?a.test(t):e.test(t);return!h&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(h=!0),h}},{}],239:[function(f,M,T){M.exports=function(e){for(var a=e.length,n,r=0;r<a;r++)if(n=e.charCodeAt(r),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},{}],240:[function(f,M,T){function e(a,n,r){return a*(1-r)+n*r}M.exports=e},{}],241:[function(f,M,T){var e=f("./normalize"),a=f("gl-mat4/create"),n=f("gl-mat4/clone"),r=f("gl-mat4/determinant"),t=f("gl-mat4/invert"),h=f("gl-mat4/transpose"),i={length:f("gl-vec3/length"),normalize:f("gl-vec3/normalize"),dot:f("gl-vec3/dot"),cross:f("gl-vec3/cross")},s=a(),y=a(),d=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];M.exports=function(A,_,g,b,v,C){if(_||(_=[0,0,0]),g||(g=[0,0,0]),b||(b=[0,0,0]),v||(v=[0,0,0,1]),C||(C=[0,0,0,1]),!e(s,A)||(n(y,s),y[3]=0,y[7]=0,y[11]=0,y[15]=1,Math.abs(r(y)<1e-8)))return!1;var S=s[3],k=s[7],E=s[11],F=s[12],I=s[13],D=s[14],R=s[15];if(S!==0||k!==0||E!==0){d[0]=S,d[1]=k,d[2]=E,d[3]=R;var O=t(y,y);if(!O)return!1;h(y,y),m(v,d,y)}else v[0]=v[1]=v[2]=0,v[3]=1;if(_[0]=F,_[1]=I,_[2]=D,l(p,s),g[0]=i.length(p[0]),i.normalize(p[0],p[0]),b[0]=i.dot(p[0],p[1]),x(p[1],p[1],p[0],1,-b[0]),g[1]=i.length(p[1]),i.normalize(p[1],p[1]),b[0]/=g[1],b[1]=i.dot(p[0],p[2]),x(p[2],p[2],p[0],1,-b[1]),b[2]=i.dot(p[1],p[2]),x(p[2],p[2],p[1],1,-b[2]),g[2]=i.length(p[2]),i.normalize(p[2],p[2]),b[1]/=g[2],b[2]/=g[2],i.cross(c,p[1],p[2]),i.dot(p[0],c)<0)for(var z=0;z<3;z++)g[z]*=-1,p[z][0]*=-1,p[z][1]*=-1,p[z][2]*=-1;return C[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),C[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),C[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),C[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(C[0]=-C[0]),p[0][2]>p[2][0]&&(C[1]=-C[1]),p[1][0]>p[0][1]&&(C[2]=-C[2]),!0};function m(u,A,_){var g=A[0],b=A[1],v=A[2],C=A[3];return u[0]=_[0]*g+_[4]*b+_[8]*v+_[12]*C,u[1]=_[1]*g+_[5]*b+_[9]*v+_[13]*C,u[2]=_[2]*g+_[6]*b+_[10]*v+_[14]*C,u[3]=_[3]*g+_[7]*b+_[11]*v+_[15]*C,u}function l(u,A){u[0][0]=A[0],u[0][1]=A[1],u[0][2]=A[2],u[1][0]=A[4],u[1][1]=A[5],u[1][2]=A[6],u[2][0]=A[8],u[2][1]=A[9],u[2][2]=A[10]}function x(u,A,_,g,b){u[0]=A[0]*g+_[0]*b,u[1]=A[1]*g+_[1]*b,u[2]=A[2]*g+_[2]*b}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(f,M,T){M.exports=function(a,n){var r=n[15];if(r===0)return!1;for(var t=1/r,h=0;h<16;h++)a[h]=n[h]*t;return!0}},{}],243:[function(f,M,T){var e=f("gl-vec3/lerp"),a=f("mat4-recompose"),n=f("mat4-decompose"),r=f("gl-mat4/determinant"),t=f("quat-slerp"),h=d(),i=d(),s=d();M.exports=y;function y(m,l,x,u){if(r(l)===0||r(x)===0)return!1;var A=n(l,h.translate,h.scale,h.skew,h.perspective,h.quaternion),_=n(x,i.translate,i.scale,i.skew,i.perspective,i.quaternion);return!A||!_?!1:(e(s.translate,h.translate,i.translate,u),e(s.skew,h.skew,i.skew,u),e(s.scale,h.scale,i.scale,u),e(s.perspective,h.perspective,i.perspective,u),t(s.quaternion,h.quaternion,i.quaternion,u),a(m,s.translate,s.scale,s.skew,s.perspective,s.quaternion),!0)}function d(){return{translate:p(),scale:p(1),skew:p(),perspective:c(),quaternion:c()}}function p(m){return[m||0,m||0,m||0]}function c(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(f,M,T){var e={identity:f("gl-mat4/identity"),translate:f("gl-mat4/translate"),multiply:f("gl-mat4/multiply"),create:f("gl-mat4/create"),scale:f("gl-mat4/scale"),fromRotationTranslation:f("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();M.exports=function(r,t,h,i,s,y){return e.identity(r),e.fromRotationTranslation(r,y,t),r[3]=s[0],r[7]=s[1],r[11]=s[2],r[15]=s[3],e.identity(a),i[2]!==0&&(a[9]=i[2],e.multiply(r,r,a)),i[1]!==0&&(a[9]=0,a[8]=i[1],e.multiply(r,r,a)),i[0]!==0&&(a[8]=0,a[4]=i[0],e.multiply(r,r,a)),e.scale(r,r,h),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(f,M,T){var e=f("binary-search-bounds"),a=f("mat4-interpolate"),n=f("gl-mat4/invert"),r=f("gl-mat4/rotateX"),t=f("gl-mat4/rotateY"),h=f("gl-mat4/rotateZ"),i=f("gl-mat4/lookAt"),s=f("gl-mat4/translate");f("gl-mat4/scale");var y=f("gl-vec3/normalize"),d=[0,0,0];M.exports=l;function p(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var c=p.prototype;c.recalcMatrix=function(x){var u=this._time,A=e.le(u,x),_=this.computedMatrix;if(!(A<0)){var g=this._components;if(A===u.length-1)for(var b=16*A,v=0;v<16;++v)_[v]=g[b++];else{for(var C=u[A+1]-u[A],b=16*A,S=this.prevMatrix,k=!0,v=0;v<16;++v)S[v]=g[b++];for(var E=this.nextMatrix,v=0;v<16;++v)E[v]=g[b++],k=k&&S[v]===E[v];if(C<1e-6||k)for(var v=0;v<16;++v)_[v]=S[v];else a(_,S,E,(x-u[A])/C)}var F=this.computedUp;F[0]=_[1],F[1]=_[5],F[2]=_[9],y(F,F);var I=this.computedInverse;n(I,_);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,z=Math.exp(this.computedRadius[0]),v=0;v<3;++v)O[v]=D[v]-_[2+4*v]*z}},c.idle=function(x){if(!(x<this.lastT())){for(var u=this._components,A=u.length-16,_=0;_<16;++_)u.push(u[A++]);this._time.push(x)}},c.flush=function(x){var u=e.gt(this._time,x)-2;u<0||(this._time.splice(0,u),this._components.splice(0,16*u))},c.lastT=function(){return this._time[this._time.length-1]},c.lookAt=function(x,u,A,_){this.recalcMatrix(x),u=u||this.computedEye,A=A||d,_=_||this.computedUp,this.setMatrix(x,i(this.computedMatrix,u,A,_));for(var g=0,b=0;b<3;++b)g+=Math.pow(A[b]-u[b],2);g=Math.log(Math.sqrt(g)),this.computedRadius[0]=g},c.rotate=function(x,u,A,_){this.recalcMatrix(x);var g=this.computedInverse;u&&t(g,g,u),A&&r(g,g,A),_&&h(g,g,_),this.setMatrix(x,n(this.computedMatrix,g))};var m=[0,0,0];c.pan=function(x,u,A,_){m[0]=-(u||0),m[1]=-(A||0),m[2]=-(_||0),this.recalcMatrix(x);var g=this.computedInverse;s(g,g,m),this.setMatrix(x,n(g,g))},c.translate=function(x,u,A,_){m[0]=u||0,m[1]=A||0,m[2]=_||0,this.recalcMatrix(x);var g=this.computedMatrix;s(g,g,m),this.setMatrix(x,g)},c.setMatrix=function(x,u){if(!(x<this.lastT())){this._time.push(x);for(var A=0;A<16;++A)this._components.push(u[A])}},c.setDistance=function(x,u){this.computedRadius[0]=u},c.setDistanceLimits=function(x,u){var A=this._limits;A[0]=x,A[1]=u},c.getDistanceLimits=function(x){var u=this._limits;return x?(x[0]=u[0],x[1]=u[1],x):u};function l(x){x=x||{};var u=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new p(u)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(f,M,T){M.exports=a;var e=f("robust-orientation")[3];function a(n){var r=n.length;if(r<3){for(var c=new Array(r),t=0;t<r;++t)c[t]=t;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:c}for(var h=new Array(r),t=0;t<r;++t)h[t]=t;h.sort(function(u,A){var _=n[u][0]-n[A][0];return _||n[u][1]-n[A][1]});for(var i=[h[0],h[1]],s=[h[0],h[1]],t=2;t<r;++t){for(var y=h[t],d=n[y],p=i.length;p>1&&e(n[i[p-2]],n[i[p-1]],d)<=0;)p-=1,i.pop();for(i.push(y),p=s.length;p>1&&e(n[s[p-2]],n[s[p-1]],d)>=0;)p-=1,s.pop();s.push(y)}for(var c=new Array(s.length+i.length-2),m=0,t=0,l=i.length;t<l;++t)c[m++]=i[t];for(var x=s.length-2;x>0;--x)c[m++]=s[x];return c}},{"robust-orientation":284}],247:[function(f,M,T){M.exports=a;var e=f("mouse-event");function a(n,r){r||(r=n,n=window);var t=0,h=0,i=0,s={shift:!1,alt:!1,control:!1,meta:!1},y=!1;function d(v){var C=!1;return"altKey"in v&&(C=C||v.altKey!==s.alt,s.alt=!!v.altKey),"shiftKey"in v&&(C=C||v.shiftKey!==s.shift,s.shift=!!v.shiftKey),"ctrlKey"in v&&(C=C||v.ctrlKey!==s.control,s.control=!!v.ctrlKey),"metaKey"in v&&(C=C||v.metaKey!==s.meta,s.meta=!!v.metaKey),C}function p(v,C){var S=e.x(C),k=e.y(C);"buttons"in C&&(v=C.buttons|0),(v!==t||S!==h||k!==i||d(C))&&(t=v|0,h=S||0,i=k||0,r&&r(t,h,i,s))}function c(v){p(0,v)}function m(){(t||h||i||s.shift||s.alt||s.meta||s.control)&&(h=i=0,t=0,s.shift=s.alt=s.control=s.meta=!1,r&&r(0,0,0,s))}function l(v){d(v)&&r&&r(t,h,i,s)}function x(v){e.buttons(v)===0?p(0,v):p(t,v)}function u(v){p(t|e.buttons(v),v)}function A(v){p(t&~e.buttons(v),v)}function _(){y||(y=!0,n.addEventListener("mousemove",x),n.addEventListener("mousedown",u),n.addEventListener("mouseup",A),n.addEventListener("mouseleave",c),n.addEventListener("mouseenter",c),n.addEventListener("mouseout",c),n.addEventListener("mouseover",c),n.addEventListener("blur",m),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function g(){!y||(y=!1,n.removeEventListener("mousemove",x),n.removeEventListener("mousedown",u),n.removeEventListener("mouseup",A),n.removeEventListener("mouseleave",c),n.removeEventListener("mouseenter",c),n.removeEventListener("mouseout",c),n.removeEventListener("mouseover",c),n.removeEventListener("blur",m),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}_();var b={element:n};return Object.defineProperties(b,{enabled:{get:function(){return y},set:function(v){v?_():g()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),b}},{"mouse-event":249}],248:[function(f,M,T){var e={left:0,top:0};M.exports=a;function a(r,t,h){t=t||r.currentTarget||r.srcElement,Array.isArray(h)||(h=[0,0]);var i=r.clientX||0,s=r.clientY||0,y=n(t);return h[0]=i-y.left,h[1]=s-y.top,h}function n(r){return r===window||r===document||r===document.body?e:r.getBoundingClientRect()}},{}],249:[function(f,M,T){function e(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var h=t.which;if(h===2)return 4;if(h===3)return 2;if(h>0)return 1<<h-1}else if("button"in t){var h=t.button;if(h===1)return 4;if(h===2)return 2;if(h>=0)return 1<<h}}return 0}T.buttons=e;function a(t){return t.target||t.srcElement||window}T.element=a;function n(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var h=a(t),i=h.getBoundingClientRect();return t.clientX-i.left}return 0}T.x=n;function r(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var h=a(t),i=h.getBoundingClientRect();return t.clientY-i.top}return 0}T.y=r},{}],250:[function(f,M,T){var e=f("to-px");M.exports=a;function a(n,r,t){typeof n=="function"&&(t=!!r,r=n,n=window);var h=e("ex",n),i=function(s){t&&s.preventDefault();var y=s.deltaX||0,d=s.deltaY||0,p=s.deltaZ||0,c=s.deltaMode,m=1;switch(c){case 1:m=h;break;case 2:m=window.innerHeight;break}if(y*=m,d*=m,p*=m,y||d||p)return r(y,d,p,s)};return n.addEventListener("wheel",i),i}},{"to-px":304}],251:[function(f,M,T){var e=f("typedarray-pool");M.exports=r;var a={"false,0,1":function(h,i,s,y,d){return function(c,m,l,x){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,g=c.offset|0,b=c.stride[0]|0,v=c.stride[1]|0,C=g,S,k=-b|0,E=0,F=-v|0,I=0,D=-b-v|0,R=0,O=b|0,z=v-b*u|0,B=0,G=0,Q=0,X=2*u|0,j=y(X),re=y(X),ue=0,K=0,te=-1,Y=-1,V=0,ee=-u|0,ne=u|0,Z=0,q=-u-1|0,ie=u-1|0,se=0,ae=0,oe=0;for(B=0;B<u;++B)j[ue++]=s(_[C],m,l,x),C+=O;if(C+=z,A>0){if(G=1,j[ue++]=s(_[C],m,l,x),C+=O,u>0)for(B=1,S=_[C],K=j[ue]=s(S,m,l,x),V=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==V||K!==Z||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,V,Z,se,m,l,x),ae=re[ue]=Q++),ue+=1,C+=O,B=2;B<u;++B)S=_[C],K=j[ue]=s(S,m,l,x),V=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==V||K!==Z||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,V,Z,se,m,l,x),ae=re[ue]=Q++,se!==V&&i(re[ue+te],ae,R,E,se,V,m,l,x)),ue+=1,C+=O;for(C+=z,ue=0,oe=te,te=Y,Y=oe,oe=ee,ee=ne,ne=oe,oe=q,q=ie,ie=oe,G=2;G<A;++G){if(j[ue++]=s(_[C],m,l,x),C+=O,u>0)for(B=1,S=_[C],K=j[ue]=s(S,m,l,x),V=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==V||K!==Z||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,V,Z,se,m,l,x),ae=re[ue]=Q++,se!==Z&&i(re[ue+ee],ae,I,R,Z,se,m,l,x)),ue+=1,C+=O,B=2;B<u;++B)S=_[C],K=j[ue]=s(S,m,l,x),V=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==V||K!==Z||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,V,Z,se,m,l,x),ae=re[ue]=Q++,se!==Z&&i(re[ue+ee],ae,I,R,Z,se,m,l,x),se!==V&&i(re[ue+te],ae,R,E,se,V,m,l,x)),ue+=1,C+=O;G&1&&(ue=0),oe=te,te=Y,Y=oe,oe=ee,ee=ne,ne=oe,oe=q,q=ie,ie=oe,C+=z}}d(re),d(j)}},"false,1,0":function(h,i,s,y,d){return function(c,m,l,x){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,g=c.offset|0,b=c.stride[0]|0,v=c.stride[1]|0,C=g,S,k=-b|0,E=0,F=-v|0,I=0,D=-b-v|0,R=0,O=v|0,z=b-v*A|0,B=0,G=0,Q=0,X=2*A|0,j=y(X),re=y(X),ue=0,K=0,te=-1,Y=-1,V=0,ee=-A|0,ne=A|0,Z=0,q=-A-1|0,ie=A-1|0,se=0,ae=0,oe=0;for(G=0;G<A;++G)j[ue++]=s(_[C],m,l,x),C+=O;if(C+=z,u>0){if(B=1,j[ue++]=s(_[C],m,l,x),C+=O,A>0)for(G=1,S=_[C],K=j[ue]=s(S,m,l,x),Z=j[ue+ee],V=j[ue+te],se=j[ue+q],(K!==Z||K!==V||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,Z,V,se,m,l,x),ae=re[ue]=Q++),ue+=1,C+=O,G=2;G<A;++G)S=_[C],K=j[ue]=s(S,m,l,x),Z=j[ue+ee],V=j[ue+te],se=j[ue+q],(K!==Z||K!==V||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,Z,V,se,m,l,x),ae=re[ue]=Q++,se!==V&&i(re[ue+te],ae,I,R,V,se,m,l,x)),ue+=1,C+=O;for(C+=z,ue=0,oe=ee,ee=ne,ne=oe,oe=te,te=Y,Y=oe,oe=q,q=ie,ie=oe,B=2;B<u;++B){if(j[ue++]=s(_[C],m,l,x),C+=O,A>0)for(G=1,S=_[C],K=j[ue]=s(S,m,l,x),Z=j[ue+ee],V=j[ue+te],se=j[ue+q],(K!==Z||K!==V||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,Z,V,se,m,l,x),ae=re[ue]=Q++,se!==Z&&i(re[ue+ee],ae,R,E,se,Z,m,l,x)),ue+=1,C+=O,G=2;G<A;++G)S=_[C],K=j[ue]=s(S,m,l,x),Z=j[ue+ee],V=j[ue+te],se=j[ue+q],(K!==Z||K!==V||K!==se)&&(E=_[C+k],I=_[C+F],R=_[C+D],h(B,G,S,E,I,R,K,Z,V,se,m,l,x),ae=re[ue]=Q++,se!==V&&i(re[ue+te],ae,I,R,V,se,m,l,x),se!==Z&&i(re[ue+ee],ae,R,E,se,Z,m,l,x)),ue+=1,C+=O;B&1&&(ue=0),oe=ee,ee=ne,ne=oe,oe=te,te=Y,Y=oe,oe=q,q=ie,ie=oe,C+=z}}d(re),d(j)}}};function n(t,h,i,s,y,d){var p=[d,y].join(","),c=a[p];return c(t,h,i,e.mallocUint32,e.freeUint32)}function r(t){function h(m){throw new Error("ndarray-extract-contour: "+m)}typeof t!="object"&&h("Must specify arguments");var i=t.order;Array.isArray(i)||h("Must specify order");var s=t.arrayArguments||1;s<1&&h("Must have at least one array argument");var y=t.scalarArguments||0;y<0&&h("Scalar arg count must be > 0"),typeof t.vertex!="function"&&h("Must specify vertex creation function"),typeof t.cell!="function"&&h("Must specify cell creation function"),typeof t.phase!="function"&&h("Must specify phase function");for(var d=t.getters||[],p=new Array(s),c=0;c<s;++c)d.indexOf(c)>=0?p[c]=!0:p[c]=!1;return n(t.vertex,t.cell,t.phase,y,i,p)}},{"typedarray-pool":308}],252:[function(f,M,T){var e=f("dup"),a={zero:function(l,x,u,A){var _=l[0],g=u[0];A|=0;var b=0,v=g;for(b=0;b<_;++b)x[A]=0,A+=v},fdTemplate1:function(l,x,u,A,_,g,b){var v=l[0],C=u[0],S=g[0],k=-1*C,E=C;A|=0,b|=0;var F=0,I=C,D=S;for(F=0;F<v;++F)_[b]=.5*(x[A+k]-x[A+E]),A+=I,b+=D},fdTemplate2:function(l,x,u,A,_,g,b,v,C,S){var k=l[0],E=l[1],F=u[0],I=u[1],D=g[0],R=g[1],O=C[0],z=C[1],B=-1*F,G=F,Q=-1*I,X=I;A|=0,b|=0,S|=0;var j=0,re=0,ue=I,K=F-E*I,te=R,Y=D-E*R,V=z,ee=O-E*z;for(re=0;re<k;++re){for(j=0;j<E;++j)_[b]=.5*(x[A+B]-x[A+G]),v[S]=.5*(x[A+Q]-x[A+X]),A+=ue,b+=te,S+=V;A+=K,b+=Y,S+=ee}}},n={cdiff:function(l){var x={};return function(A,_,g){var b=A.dtype,v=A.order,C=_.dtype,S=_.order,k=g.dtype,E=g.order,F=[b,v.join(),C,S.join(),k,E.join()].join(),I=x[F];return I||(x[F]=I=l([b,v,C,S,k,E])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,g.data,g.stride,g.offset|0)}},zero:function(l){var x={};return function(A){var _=A.dtype,g=A.order,b=[_,g.join()].join(),v=x[b];return v||(x[b]=v=l([_,g])),v(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(l){var x={};return function(A,_){var g=A.dtype,b=A.order,v=_.dtype,C=_.order,S=[g,b.join(),v,C.join()].join(),k=x[S];return k||(x[S]=k=l([g,b,v,C])),k(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(l){var x={};return function(A,_,g){var b=A.dtype,v=A.order,C=_.dtype,S=_.order,k=g.dtype,E=g.order,F=[b,v.join(),C,S.join(),k,E.join()].join(),I=x[F];return I||(x[F]=I=l([b,v,C,S,k,E])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,g.data,g.stride,g.offset|0)}}};function r(l){var x=n[l.funcName];return x(t.bind(void 0,l))}function t(l){return a[l.funcName]}function h(l){return r({funcName:l.funcName})}var i={},s={},y=h({funcName:"cdiff"}),d=h({funcName:"zero"});function p(l){return l in i?i[l]:i[l]=h({funcName:"fdTemplate"+l})}function c(l,x,u,A){return function(_,g){var b=g.shape.slice();return b[0]>2&&b[1]>2&&A(g.pick(-1,-1).lo(1,1).hi(b[0]-2,b[1]-2),_.pick(-1,-1,0).lo(1,1).hi(b[0]-2,b[1]-2),_.pick(-1,-1,1).lo(1,1).hi(b[0]-2,b[1]-2)),b[1]>2&&(u(g.pick(0,-1).lo(1).hi(b[1]-2),_.pick(0,-1,1).lo(1).hi(b[1]-2)),x(_.pick(0,-1,0).lo(1).hi(b[1]-2))),b[1]>2&&(u(g.pick(b[0]-1,-1).lo(1).hi(b[1]-2),_.pick(b[0]-1,-1,1).lo(1).hi(b[1]-2)),x(_.pick(b[0]-1,-1,0).lo(1).hi(b[1]-2))),b[0]>2&&(u(g.pick(-1,0).lo(1).hi(b[0]-2),_.pick(-1,0,0).lo(1).hi(b[0]-2)),x(_.pick(-1,0,1).lo(1).hi(b[0]-2))),b[0]>2&&(u(g.pick(-1,b[1]-1).lo(1).hi(b[0]-2),_.pick(-1,b[1]-1,0).lo(1).hi(b[0]-2)),x(_.pick(-1,b[1]-1,1).lo(1).hi(b[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(b[0]-1,0,0,0),_.set(b[0]-1,0,1,0),_.set(0,b[1]-1,0,0),_.set(0,b[1]-1,1,0),_.set(b[0]-1,b[1]-1,0,0),_.set(b[0]-1,b[1]-1,1,0),_}}function m(l){var x=l.join(),b=s[x];if(b)return b;for(var u=l.length,A=[y,d],_=1;_<=u;++_)A.push(p(_));var g=c,b=g.apply(void 0,A);return s[x]=b,b}M.exports=function(x,u,A){if(Array.isArray(A)||(typeof A=="string"?A=e(u.dimension,A):A=e(u.dimension,"clamp")),u.size===0)return x;if(u.dimension===0)return x.set(0),x;var _=m(A);return _(x,u)}},{dup:65}],253:[function(f,M,T){function e(h,i){var s=Math.floor(i),y=i-s,d=0<=s&&s<h.shape[0],p=0<=s+1&&s+1<h.shape[0],c=d?+h.get(s):0,m=p?+h.get(s+1):0;return(1-y)*c+y*m}function a(h,i,s){var y=Math.floor(i),d=i-y,p=0<=y&&y<h.shape[0],c=0<=y+1&&y+1<h.shape[0],m=Math.floor(s),l=s-m,x=0<=m&&m<h.shape[1],u=0<=m+1&&m+1<h.shape[1],A=p&&x?h.get(y,m):0,_=p&&u?h.get(y,m+1):0,g=c&&x?h.get(y+1,m):0,b=c&&u?h.get(y+1,m+1):0;return(1-l)*((1-d)*A+d*g)+l*((1-d)*_+d*b)}function n(h,i,s,y){var d=Math.floor(i),p=i-d,c=0<=d&&d<h.shape[0],m=0<=d+1&&d+1<h.shape[0],l=Math.floor(s),x=s-l,u=0<=l&&l<h.shape[1],A=0<=l+1&&l+1<h.shape[1],_=Math.floor(y),g=y-_,b=0<=_&&_<h.shape[2],v=0<=_+1&&_+1<h.shape[2],C=c&&u&&b?h.get(d,l,_):0,S=c&&A&&b?h.get(d,l+1,_):0,k=m&&u&&b?h.get(d+1,l,_):0,E=m&&A&&b?h.get(d+1,l+1,_):0,F=c&&u&&v?h.get(d,l,_+1):0,I=c&&A&&v?h.get(d,l+1,_+1):0,D=m&&u&&v?h.get(d+1,l,_+1):0,R=m&&A&&v?h.get(d+1,l+1,_+1):0;return(1-g)*((1-x)*((1-p)*C+p*k)+x*((1-p)*S+p*E))+g*((1-x)*((1-p)*F+p*D)+x*((1-p)*I+p*R))}function r(h){var i=h.shape.length|0,s=new Array(i),y=new Array(i),d=new Array(i),p=new Array(i),c,m;for(c=0;c<i;++c)m=+arguments[c+1],s[c]=Math.floor(m),y[c]=m-s[c],d[c]=0<=s[c]&&s[c]<h.shape[c],p[c]=0<=s[c]+1&&s[c]+1<h.shape[c];var l=0,x,u,A;e:for(c=0;c<1<<i;++c){for(u=1,A=h.offset,x=0;x<i;++x)if(c&1<<x){if(!p[x])continue e;u*=y[x],A+=h.stride[x]*(s[x]+1)}else{if(!d[x])continue e;u*=1-y[x],A+=h.stride[x]*s[x]}l+=u*h.data[A]}return l}function t(h,i,s,y){switch(h.shape.length){case 0:return 0;case 1:return e(h,i);case 2:return a(h,i,s);case 3:return n(h,i,s,y);default:return r.apply(void 0,arguments)}}M.exports=t,M.exports.d1=e,M.exports.d2=a,M.exports.d3=n},{}],254:[function(f,M,T){var e={"float64,2,1,0":function(){return function(y,d,p,c,m){var l=y[0],x=y[1],u=y[2],A=p[0],_=p[1],g=p[2];c|=0;var b=0,v=0,C=0,S=g,k=_-u*g,E=A-x*_;for(C=0;C<l;++C){for(v=0;v<x;++v){for(b=0;b<u;++b)d[c]/=m,c+=S;c+=k}c+=E}}},"uint8,2,0,1,float64,2,1,0":function(){return function(y,d,p,c,m,l,x,u){var A=y[0],_=y[1],g=y[2],b=p[0],v=p[1],C=p[2],S=l[0],k=l[1],E=l[2];c|=0,x|=0;for(var F=c,I=x,D=y[0]|0;D>0;){D<64?(A=D,D=0):(A=64,D-=64);for(var R=y[1]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64),c=F+D*b+R*v,x=I+D*S+R*k;var O=0,z=0,B=0,G=C,Q=b-g*C,X=v-A*b,j=E,re=S-g*E,ue=k-A*S;for(B=0;B<_;++B){for(z=0;z<A;++z){for(O=0;O<g;++O)d[c]=m[x]*u,c+=G,x+=j;c+=Q,x+=re}c+=X,x+=ue}}}}},"float32,1,0,float32,1,0":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=p[0],g=p[1],b=l[0],v=l[1];c|=0,x|=0;var C=0,S=0,k=g,E=_-A*g,F=v,I=b-A*v;for(S=0;S<u;++S){for(C=0;C<A;++C)d[c]=m[x],c+=k,x+=F;c+=E,x+=I}}},"float32,1,0,float32,0,1":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=p[0],g=p[1],b=l[0],v=l[1];c|=0,x|=0;for(var C=c,S=x,k=y[1]|0;k>0;){k<64?(A=k,k=0):(A=64,k-=64);for(var E=y[0]|0;E>0;){E<64?(u=E,E=0):(u=64,E-=64),c=C+k*g+E*_,x=S+k*v+E*b;var F=0,I=0,D=g,R=_-A*g,O=v,z=b-A*v;for(I=0;I<u;++I){for(F=0;F<A;++F)d[c]=m[x],c+=D,x+=O;c+=R,x+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=y[2],g=p[0],b=p[1],v=p[2],C=l[0],S=l[1],k=l[2];c|=0,x|=0;for(var E=c,F=x,I=y[2]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var D=y[0]|0;D>0;){D<64?(u=D,D=0):(u=64,D-=64);for(var R=y[1]|0;R>0;){R<64?(A=R,R=0):(A=64,R-=64),c=E+I*v+D*g+R*b,x=F+I*k+D*C+R*S;var O=0,z=0,B=0,G=v,Q=g-_*v,X=b-u*g,j=k,re=C-_*k,ue=S-u*C;for(B=0;B<A;++B){for(z=0;z<u;++z){for(O=0;O<_;++O)d[c]=m[x],c+=G,x+=j;c+=Q,x+=re}c+=X,x+=ue}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=y[2],g=p[0],b=p[1],v=p[2],C=l[0],S=l[1],k=l[2];c|=0,x|=0;var E=0,F=0,I=0,D=v,R=g-_*v,O=b-u*g,z=k,B=C-_*k,G=S-u*C;for(I=0;I<A;++I){for(F=0;F<u;++F){for(E=0;E<_;++E)d[c]=m[x],c+=D,x+=z;c+=R,x+=B}c+=O,x+=G}}}};function a(s,y){var d=y.join(","),p=e[d];return p()}var n=a,r={mul:function(s){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=m.dtype,g=m.order,b=[l,x.join(),u,A.join(),_,g.join()].join(),v=y[b];return v||(y[b]=v=s([l,x,u,A,_,g])),v(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},muls:function(s){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=[l,x.join(),u,A.join()].join(),g=y[_];return g||(y[_]=g=s([l,x,u,A])),g(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m)}},mulseq:function(s){var y={};return function(p,c){var m=p.dtype,l=p.order,x=[m,l.join()].join(),u=y[x];return u||(y[x]=u=s([m,l])),u(p.shape.slice(0),p.data,p.stride,p.offset|0,c)}},div:function(s){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=m.dtype,g=m.order,b=[l,x.join(),u,A.join(),_,g.join()].join(),v=y[b];return v||(y[b]=v=s([l,x,u,A,_,g])),v(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},divs:function(s){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=[l,x.join(),u,A.join()].join(),g=y[_];return g||(y[_]=g=s([l,x,u,A])),g(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m)}},divseq:function(s){var y={};return function(p,c){var m=p.dtype,l=p.order,x=[m,l.join()].join(),u=y[x];return u||(y[x]=u=s([m,l])),u(p.shape.slice(0),p.data,p.stride,p.offset|0,c)}},assign:function(s){var y={};return function(p,c){var m=p.dtype,l=p.order,x=c.dtype,u=c.order,A=[m,l.join(),x,u.join()].join(),_=y[A];return _||(y[A]=_=s([m,l,x,u])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0)}}};function t(s){var y=r[s.funcName];return y(n.bind(void 0,s))}function h(s){return t({funcName:s.funcName})}var i={mul:"*",div:"/"};(function(){for(var s in i)T[s]=h({funcName:s}),T[s+"s"]=h({funcName:s+"s"}),T[s+"seq"]=h({funcName:s+"seq"})})(),T.assign=h({funcName:"assign"})},{}],255:[function(f,M,T){var e=f("ndarray"),a=f("./doConvert.js");M.exports=function(r,t){for(var h=[],i=r,s=1;Array.isArray(i);)h.push(i.length),s*=i.length,i=i[0];return h.length===0?e():(t||(t=e(new Float64Array(s),h)),a(t,r),t)}},{"./doConvert.js":256,ndarray:259}],256:[function(f,M,T){function e(){return function(i,s,y,d,p){var c=i[0],m=i[1],l=i[2],x=y[0],u=y[1],A=y[2],_=[0,0,0];d|=0;var g=0,b=0,v=0,C=A,S=u-l*A,k=x-m*u;for(v=0;v<c;++v){for(b=0;b<m;++b){for(g=0;g<l;++g){{var E=p,F;for(F=0;F<_.length-1;++F)E=E[_[F]];s[d]=E[_[_.length-1]]}d+=C,++_[2]}d+=S,_[2]-=l,++_[1]}d+=k,_[1]-=m,++_[0]}}}function a(){return e()}var n=a;function r(i){var s={};return function(d,p){var c=d.dtype,m=d.order,l=[c,m.join()].join(),x=s[l];return x||(s[l]=x=i([c,m])),x(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}}function t(i){return r(n.bind(void 0,i))}function h(i){return t({funcName:i.funcName})}M.exports=h({funcName:"convert"})},{}],257:[function(f,M,T){var e=f("typedarray-pool");function a(y){switch(y){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(y,d){return function(c,m,l,x,u,A,_,g,b,v,C){var S,k,E,F=c*u+x,I,D=y(g),R,O,z,B;for(S=c+1;S<=m;++S){for(k=S,F+=u,E=F,R=0,O=F,I=0;I<g;++I)D[R++]=l[O],O+=b;e:for(;k-- >c;){R=0,O=E-u;t:for(I=0;I<g;++I){if(z=l[O],B=D[R],z<B)break e;if(z>B)break t;O+=v,R+=C}for(R=E,O=E-u,I=0;I<g;++I)l[R]=l[O],R+=b,O+=b;E-=u}for(R=E,O=0,I=0;I<g;++I)l[R]=D[O++],R+=b}d(D)}}};function r(y,d){var p=a(d),c=[d,y].join(","),m=n[c];return p?m(p[0],p[1]):m()}var t={"uint32,1,0":function(y,d,p){return function c(m,l,x,u,A,_,g,b,v,C,S){var k=(l-m+1)/6|0,E=m+k,F=l-k,I=m+l>>1,D=I-k,R=I+k,O=E,z=D,B=I,G=R,Q=F,X=m+1,j=l-1,re=!0,ue,K,te,Y,V,ee,ne,Z,q,ie=0,se=0,ae=0,oe,be,ce,de,ye,ge,me,Me,Le,Oe,_e,Ee,Ze,Ge,Fe,Re,We=b,xt=d(We),Nt=d(We);be=A*O,ce=A*z,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=z,z=K;break e}if(ae<0)break e;Re+=C}be=A*G,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=G,G=Q,Q=K;break e}if(ae<0)break e;Re+=C}be=A*O,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=B,B=K;break e}if(ae<0)break e;Re+=C}be=A*z,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=B,B=K;break e}if(ae<0)break e;Re+=C}be=A*O,ce=A*G,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=G,G=K;break e}if(ae<0)break e;Re+=C}be=A*B,ce=A*G,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=B,B=G,G=K;break e}if(ae<0)break e;Re+=C}be=A*z,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=Q,Q=K;break e}if(ae<0)break e;Re+=C}be=A*z,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=B,B=K;break e}if(ae<0)break e;Re+=C}be=A*G,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=G,G=Q,Q=K;break e}if(ae<0)break e;Re+=C}for(be=A*O,ce=A*z,de=A*B,ye=A*G,ge=A*Q,me=A*E,Me=A*I,Le=A*F,Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,Oe=ye+Re,_e=ge+Re,Ee=me+Re,Ze=Me+Re,Ge=Le+Re,xt[Fe]=x[Z],Nt[Fe]=x[Oe],re=re&&xt[Fe]===Nt[Fe],te=x[ne],Y=x[q],V=x[_e],x[Ee]=te,x[Ze]=Y,x[Ge]=V,++Fe,Re+=v;for(be=A*D,ce=A*m,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],Re+=v;for(be=A*R,ce=A*l,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],Re+=v;if(re)for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae!==0)if(ae<0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae>0)j--;else if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j;break}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j;break}}}else for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ie=x[ne]-xt[Fe],ie!==0)break e;Fe+=S,ne+=C}if(ie<0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else{ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(se=x[ne]-Nt[Fe],se!==0)break e;Fe+=S,ne+=C}if(se>0)for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-Nt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae>0){if(--j<ee)break;continue}else{ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j}break}}}}for(be=A*m,ce=A*(X-1),Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],x[Z]=xt[Fe],++Fe,Re+=v;for(be=A*l,ce=A*(j+1),Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],x[Z]=Nt[Fe],++Fe,Re+=v;if(X-2-m<=32?y(m,X-2,x,u,A,_,g,b,v,C,S):c(m,X-2,x,u,A,_,g,b,v,C,S),l-(j+2)<=32?y(j+2,l,x,u,A,_,g,b,v,C,S):c(j+2,l,x,u,A,_,g,b,v,C,S),re){p(xt),p(Nt);return}if(X<E&&j>F){e:for(;;){for(ne=u+X*A,Fe=0,Re=u,oe=0;oe<b;++oe){if(x[ne]!==xt[Fe])break e;++Fe,ne+=v}++X}e:for(;;){for(ne=u+j*A,Fe=0,Re=u,oe=0;oe<b;++oe){if(x[ne]!==Nt[Fe])break e;++Fe,ne+=v}--j}for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ie=x[ne]-xt[Fe],ie!==0)break e;Fe+=S,ne+=C}if(ie===0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else{ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(se=x[ne]-Nt[Fe],se!==0)break e;Fe+=S,ne+=C}if(se===0)for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-Nt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae===0){if(--j<ee)break;continue}else{ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=C}if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j}break}}}}}p(xt),p(Nt),j-X<=32?y(X,j,x,u,A,_,g,b,v,C,S):c(X,j,x,u,A,_,g,b,v,C,S)}}};function h(y,d,p){var c=a(d),m=[d,y].join(","),l=t[m];return y.length>1&&c?l(p,c[0],c[1]):l(p)}var i={"uint32,1,0":function(y,d){return function(p){var c=p.data,m=p.offset|0,l=p.shape,x=p.stride,u=x[0]|0,A=l[0]|0,_=x[1]|0,g=l[1]|0,b=_,v=_,C=1;A<=32?y(0,A-1,c,m,u,_,A,g,b,v,C):d(0,A-1,c,m,u,_,A,g,b,v,C)}}};function s(y,d){var p=[d,y].join(","),c=i[p],m=r(y,d),l=h(y,d,m);return c(m,l)}M.exports=s},{"typedarray-pool":308}],258:[function(f,M,T){var e=f("./lib/compile_sort.js"),a={};function n(r){var t=r.order,h=r.dtype,i=[t,h],s=i.join(":"),y=a[s];return y||(a[s]=y=e(t,h)),y(r),r}M.exports=n},{"./lib/compile_sort.js":257}],259:[function(f,M,T){var e=f("is-buffer"),a=typeof Float64Array<"u";function n(d,p){return d[0]-p[0]}function r(){var d=this.stride,p=new Array(d.length),c;for(c=0;c<p.length;++c)p[c]=[Math.abs(d[c]),c];p.sort(n);var m=new Array(p.length);for(c=0;c<m.length;++c)m[c]=p[c][1];return m}var t={T:function(d){function p(m){this.data=m}var c=p.prototype;return c.dtype=d,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new p(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new p(l)}},0:function(d,p){function c(l,x){this.data=l,this.offset=x}var m=c.prototype;return m.dtype=d,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new c(this.data,this.offset)},m.pick=function(){return p(this.data)},m.valueOf=m.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(x){return d==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,u,A,_){return new c(x,_)}},1:function(d,p,c){function m(x,u,A,_){this.data=x,this.shape=[u],this.stride=[A],this.offset=_|0}var l=m.prototype;return l.dtype=d,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(u,A){return d==="generic"?this.data.set(this.offset+this.stride[0]*u,A):this.data[this.offset+this.stride[0]*u]=A},l.get=function(u){return d==="generic"?this.data.get(this.offset+this.stride[0]*u):this.data[this.offset+this.stride[0]*u]},l.index=function(u){return this.offset+this.stride[0]*u},l.hi=function(u){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,this.stride[0],this.offset)},l.lo=function(u){var A=this.offset,_=0,g=this.shape[0],b=this.stride[0];return typeof u=="number"&&u>=0&&(_=u|0,A+=b*_,g-=_),new m(this.data,g,b,A)},l.step=function(u){var A=this.shape[0],_=this.stride[0],g=this.offset,b=0,v=Math.ceil;return typeof u=="number"&&(b=u|0,b<0?(g+=_*(A-1),A=v(-A/b)):A=v(A/b),_*=b),new m(this.data,A,_,g)},l.transpose=function(u){u=u===void 0?0:u|0;var A=this.shape,_=this.stride;return new m(this.data,A[u],_[u],this.offset)},l.pick=function(u){var A=[],_=[],g=this.offset;typeof u=="number"&&u>=0?g=g+this.stride[0]*u|0:(A.push(this.shape[0]),_.push(this.stride[0]));var b=p[A.length+1];return b(this.data,A,_,g)},function(u,A,_,g){return new m(u,A[0],_[0],g)}},2:function(d,p,c){function m(x,u,A,_,g,b){this.data=x,this.shape=[u,A],this.stride=[_,g],this.offset=b|0}var l=m.prototype;return l.dtype=d,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(u,A,_){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A,_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]=_},l.get=function(u,A){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]},l.index=function(u,A){return this.offset+this.stride[0]*u+this.stride[1]*A},l.hi=function(u,A){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(u,A){var _=this.offset,g=0,b=this.shape[0],v=this.shape[1],C=this.stride[0],S=this.stride[1];return typeof u=="number"&&u>=0&&(g=u|0,_+=C*g,b-=g),typeof A=="number"&&A>=0&&(g=A|0,_+=S*g,v-=g),new m(this.data,b,v,C,S,_)},l.step=function(u,A){var _=this.shape[0],g=this.shape[1],b=this.stride[0],v=this.stride[1],C=this.offset,S=0,k=Math.ceil;return typeof u=="number"&&(S=u|0,S<0?(C+=b*(_-1),_=k(-_/S)):_=k(_/S),b*=S),typeof A=="number"&&(S=A|0,S<0?(C+=v*(g-1),g=k(-g/S)):g=k(g/S),v*=S),new m(this.data,_,g,b,v,C)},l.transpose=function(u,A){u=u===void 0?0:u|0,A=A===void 0?1:A|0;var _=this.shape,g=this.stride;return new m(this.data,_[u],_[A],g[u],g[A],this.offset)},l.pick=function(u,A){var _=[],g=[],b=this.offset;typeof u=="number"&&u>=0?b=b+this.stride[0]*u|0:(_.push(this.shape[0]),g.push(this.stride[0])),typeof A=="number"&&A>=0?b=b+this.stride[1]*A|0:(_.push(this.shape[1]),g.push(this.stride[1]));var v=p[_.length+1];return v(this.data,_,g,b)},function(u,A,_,g){return new m(u,A[0],A[1],_[0],_[1],g)}},3:function(d,p,c){function m(x,u,A,_,g,b,v,C){this.data=x,this.shape=[u,A,_],this.stride=[g,b,v],this.offset=C|0}var l=m.prototype;return l.dtype=d,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var u=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return u>A?A>_?[2,1,0]:u>_?[1,2,0]:[1,0,2]:u>_?[2,0,1]:_>A?[0,1,2]:[0,2,1]}}),l.set=function(u,A,_,g){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_,g):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]=g},l.get=function(u,A,_){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]},l.index=function(u,A,_){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_},l.hi=function(u,A,_){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(u,A,_){var g=this.offset,b=0,v=this.shape[0],C=this.shape[1],S=this.shape[2],k=this.stride[0],E=this.stride[1],F=this.stride[2];return typeof u=="number"&&u>=0&&(b=u|0,g+=k*b,v-=b),typeof A=="number"&&A>=0&&(b=A|0,g+=E*b,C-=b),typeof _=="number"&&_>=0&&(b=_|0,g+=F*b,S-=b),new m(this.data,v,C,S,k,E,F,g)},l.step=function(u,A,_){var g=this.shape[0],b=this.shape[1],v=this.shape[2],C=this.stride[0],S=this.stride[1],k=this.stride[2],E=this.offset,F=0,I=Math.ceil;return typeof u=="number"&&(F=u|0,F<0?(E+=C*(g-1),g=I(-g/F)):g=I(g/F),C*=F),typeof A=="number"&&(F=A|0,F<0?(E+=S*(b-1),b=I(-b/F)):b=I(b/F),S*=F),typeof _=="number"&&(F=_|0,F<0?(E+=k*(v-1),v=I(-v/F)):v=I(v/F),k*=F),new m(this.data,g,b,v,C,S,k,E)},l.transpose=function(u,A,_){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0;var g=this.shape,b=this.stride;return new m(this.data,g[u],g[A],g[_],b[u],b[A],b[_],this.offset)},l.pick=function(u,A,_){var g=[],b=[],v=this.offset;typeof u=="number"&&u>=0?v=v+this.stride[0]*u|0:(g.push(this.shape[0]),b.push(this.stride[0])),typeof A=="number"&&A>=0?v=v+this.stride[1]*A|0:(g.push(this.shape[1]),b.push(this.stride[1])),typeof _=="number"&&_>=0?v=v+this.stride[2]*_|0:(g.push(this.shape[2]),b.push(this.stride[2]));var C=p[g.length+1];return C(this.data,g,b,v)},function(u,A,_,g){return new m(u,A[0],A[1],A[2],_[0],_[1],_[2],g)}},4:function(d,p,c){function m(x,u,A,_,g,b,v,C,S,k){this.data=x,this.shape=[u,A,_,g],this.stride=[b,v,C,S],this.offset=k|0}var l=m.prototype;return l.dtype=d,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:c}),l.set=function(u,A,_,g,b){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g,b):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g]=b},l.get=function(u,A,_,g){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g]},l.index=function(u,A,_,g){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g},l.hi=function(u,A,_,g){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof g!="number"||g<0?this.shape[3]:g|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(u,A,_,g){var b=this.offset,v=0,C=this.shape[0],S=this.shape[1],k=this.shape[2],E=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof u=="number"&&u>=0&&(v=u|0,b+=F*v,C-=v),typeof A=="number"&&A>=0&&(v=A|0,b+=I*v,S-=v),typeof _=="number"&&_>=0&&(v=_|0,b+=D*v,k-=v),typeof g=="number"&&g>=0&&(v=g|0,b+=R*v,E-=v),new m(this.data,C,S,k,E,F,I,D,R,b)},l.step=function(u,A,_,g){var b=this.shape[0],v=this.shape[1],C=this.shape[2],S=this.shape[3],k=this.stride[0],E=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof u=="number"&&(R=u|0,R<0?(D+=k*(b-1),b=O(-b/R)):b=O(b/R),k*=R),typeof A=="number"&&(R=A|0,R<0?(D+=E*(v-1),v=O(-v/R)):v=O(v/R),E*=R),typeof _=="number"&&(R=_|0,R<0?(D+=F*(C-1),C=O(-C/R)):C=O(C/R),F*=R),typeof g=="number"&&(R=g|0,R<0?(D+=I*(S-1),S=O(-S/R)):S=O(S/R),I*=R),new m(this.data,b,v,C,S,k,E,F,I,D)},l.transpose=function(u,A,_,g){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0,g=g===void 0?3:g|0;var b=this.shape,v=this.stride;return new m(this.data,b[u],b[A],b[_],b[g],v[u],v[A],v[_],v[g],this.offset)},l.pick=function(u,A,_,g){var b=[],v=[],C=this.offset;typeof u=="number"&&u>=0?C=C+this.stride[0]*u|0:(b.push(this.shape[0]),v.push(this.stride[0])),typeof A=="number"&&A>=0?C=C+this.stride[1]*A|0:(b.push(this.shape[1]),v.push(this.stride[1])),typeof _=="number"&&_>=0?C=C+this.stride[2]*_|0:(b.push(this.shape[2]),v.push(this.stride[2])),typeof g=="number"&&g>=0?C=C+this.stride[3]*g|0:(b.push(this.shape[3]),v.push(this.stride[3]));var S=p[b.length+1];return S(this.data,b,v,C)},function(u,A,_,g){return new m(u,A[0],A[1],A[2],A[3],_[0],_[1],_[2],_[3],g)}},5:function(p,c,m){function l(u,A,_,g,b,v,C,S,k,E,F,I){this.data=u,this.shape=[A,_,g,b,v],this.stride=[C,S,k,E,F],this.offset=I|0}var x=l.prototype;return x.dtype=p,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(A,_,g,b,v,C){return p==="generic"?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v,C):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v]=C},x.get=function(A,_,g,b,v){return p==="generic"?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v]},x.index=function(A,_,g,b,v){return this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v},x.hi=function(A,_,g,b,v){return new l(this.data,typeof A!="number"||A<0?this.shape[0]:A|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof g!="number"||g<0?this.shape[2]:g|0,typeof b!="number"||b<0?this.shape[3]:b|0,typeof v!="number"||v<0?this.shape[4]:v|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(A,_,g,b,v){var C=this.offset,S=0,k=this.shape[0],E=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],z=this.stride[2],B=this.stride[3],G=this.stride[4];return typeof A=="number"&&A>=0&&(S=A|0,C+=R*S,k-=S),typeof _=="number"&&_>=0&&(S=_|0,C+=O*S,E-=S),typeof g=="number"&&g>=0&&(S=g|0,C+=z*S,F-=S),typeof b=="number"&&b>=0&&(S=b|0,C+=B*S,I-=S),typeof v=="number"&&v>=0&&(S=v|0,C+=G*S,D-=S),new l(this.data,k,E,F,I,D,R,O,z,B,G,C)},x.step=function(A,_,g,b,v){var C=this.shape[0],S=this.shape[1],k=this.shape[2],E=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],z=this.stride[4],B=this.offset,G=0,Q=Math.ceil;return typeof A=="number"&&(G=A|0,G<0?(B+=I*(C-1),C=Q(-C/G)):C=Q(C/G),I*=G),typeof _=="number"&&(G=_|0,G<0?(B+=D*(S-1),S=Q(-S/G)):S=Q(S/G),D*=G),typeof g=="number"&&(G=g|0,G<0?(B+=R*(k-1),k=Q(-k/G)):k=Q(k/G),R*=G),typeof b=="number"&&(G=b|0,G<0?(B+=O*(E-1),E=Q(-E/G)):E=Q(E/G),O*=G),typeof v=="number"&&(G=v|0,G<0?(B+=z*(F-1),F=Q(-F/G)):F=Q(F/G),z*=G),new l(this.data,C,S,k,E,F,I,D,R,O,z,B)},x.transpose=function(A,_,g,b,v){A=A===void 0?0:A|0,_=_===void 0?1:_|0,g=g===void 0?2:g|0,b=b===void 0?3:b|0,v=v===void 0?4:v|0;var C=this.shape,S=this.stride;return new l(this.data,C[A],C[_],C[g],C[b],C[v],S[A],S[_],S[g],S[b],S[v],this.offset)},x.pick=function(A,_,g,b,v){var C=[],S=[],k=this.offset;typeof A=="number"&&A>=0?k=k+this.stride[0]*A|0:(C.push(this.shape[0]),S.push(this.stride[0])),typeof _=="number"&&_>=0?k=k+this.stride[1]*_|0:(C.push(this.shape[1]),S.push(this.stride[1])),typeof g=="number"&&g>=0?k=k+this.stride[2]*g|0:(C.push(this.shape[2]),S.push(this.stride[2])),typeof b=="number"&&b>=0?k=k+this.stride[3]*b|0:(C.push(this.shape[3]),S.push(this.stride[3])),typeof v=="number"&&v>=0?k=k+this.stride[4]*v|0:(C.push(this.shape[4]),S.push(this.stride[4]));var E=c[C.length+1];return E(this.data,C,S,k)},function(A,_,g,b){return new l(A,_[0],_[1],_[2],_[3],_[4],g[0],g[1],g[2],g[3],g[4],b)}}};function h(d,p){var c=p===-1?"T":String(p),m=t[c];return p===-1?m(d):p===0?m(d,s[d][0]):m(d,s[d],r)}function i(d){if(e(d))return"buffer";if(a)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function y(d,p,c,m){if(d===void 0){var g=s.array[0];return g([])}else typeof d=="number"&&(d=[d]);p===void 0&&(p=[d.length]);var l=p.length;if(c===void 0){c=new Array(l);for(var x=l-1,u=1;x>=0;--x)c[x]=u,u*=p[x]}if(m===void 0){m=0;for(var x=0;x<l;++x)c[x]<0&&(m-=(p[x]-1)*c[x])}for(var A=i(d),_=s[A];_.length<=l+1;)_.push(h(A,_.length-1));var g=_[l+1];return g(d,p,c,m)}M.exports=y},{"is-buffer":237}],260:[function(f,M,T){var e=f("double-bits"),a=Math.pow(2,-1074),n=-1>>>0;M.exports=r;function r(t,h){if(isNaN(t)||isNaN(h))return NaN;if(t===h)return t;if(t===0)return h<0?-a:a;var i=e.hi(t),s=e.lo(t);return h>t==t>0?s===n?(i+=1,s=0):s+=1:s===0?(s=n,i-=1):s-=1,e.pack(s,i)}},{"double-bits":64}],261:[function(f,M,T){var e=1e-6,a=1e-6;T.vertexNormals=function(n,r,t){for(var h=r.length,i=new Array(h),s=t===void 0?e:t,y=0;y<h;++y)i[y]=[0,0,0];for(var y=0;y<n.length;++y)for(var d=n[y],p=0,c=d[d.length-1],m=d[0],l=0;l<d.length;++l){p=c,c=m,m=d[(l+1)%d.length];for(var x=r[p],u=r[c],A=r[m],_=new Array(3),g=0,b=new Array(3),v=0,C=0;C<3;++C)_[C]=x[C]-u[C],g+=_[C]*_[C],b[C]=A[C]-u[C],v+=b[C]*b[C];if(g*v>s)for(var S=i[c],k=1/Math.sqrt(g*v),C=0;C<3;++C){var E=(C+1)%3,F=(C+2)%3;S[C]+=k*(b[E]*_[F]-b[F]*_[E])}}for(var y=0;y<h;++y){for(var S=i[y],I=0,C=0;C<3;++C)I+=S[C]*S[C];if(I>s)for(var k=1/Math.sqrt(I),C=0;C<3;++C)S[C]*=k;else for(var C=0;C<3;++C)S[C]=0}return i},T.faceNormals=function(n,r,t){for(var h=n.length,i=new Array(h),s=t===void 0?a:t,y=0;y<h;++y){for(var d=n[y],p=new Array(3),c=0;c<3;++c)p[c]=r[d[c]];for(var m=new Array(3),l=new Array(3),c=0;c<3;++c)m[c]=p[1][c]-p[0][c],l[c]=p[2][c]-p[0][c];for(var x=new Array(3),u=0,c=0;c<3;++c){var A=(c+1)%3,_=(c+2)%3;x[c]=m[A]*l[_]-m[_]*l[A],u+=x[c]*x[c]}u>s?u=1/Math.sqrt(u):u=0;for(var c=0;c<3;++c)x[c]*=u;i[y]=x}return i}},{}],262:[function(f,M,T){M.exports=e;function e(a,n,r,t,h,i,s,y,d,p){var c=n+i+p;if(m>0){var m=Math.sqrt(c+1);a[0]=.5*(s-d)/m,a[1]=.5*(y-t)/m,a[2]=.5*(r-i)/m,a[3]=.5*m}else{var l=Math.max(n,i,p),m=Math.sqrt(2*l-c+1);n>=l?(a[0]=.5*m,a[1]=.5*(h+r)/m,a[2]=.5*(y+t)/m,a[3]=.5*(s-d)/m):i>=l?(a[0]=.5*(r+h)/m,a[1]=.5*m,a[2]=.5*(d+s)/m,a[3]=.5*(y-t)/m):(a[0]=.5*(t+y)/m,a[1]=.5*(s+d)/m,a[2]=.5*m,a[3]=.5*(r-h)/m)}return a}},{}],263:[function(f,M,T){M.exports=p;var e=f("filtered-vector"),a=f("gl-mat4/lookAt"),n=f("gl-mat4/fromQuat"),r=f("gl-mat4/invert"),t=f("./lib/quatFromFrame");function h(c,m,l){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2))}function i(c,m,l,x){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2)+Math.pow(x,2))}function s(c,m){var l=m[0],x=m[1],u=m[2],A=m[3],_=i(l,x,u,A);_>1e-6?(c[0]=l/_,c[1]=x/_,c[2]=u/_,c[3]=A/_):(c[0]=c[1]=c[2]=0,c[3]=1)}function y(c,m,l){this.radius=e([l]),this.center=e(m),this.rotation=e(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=y.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var m=this.computedRotation;s(m,m);var l=this.computedMatrix;n(l,m);var x=this.computedCenter,u=this.computedEye,A=this.computedUp,_=Math.exp(this.computedRadius[0]);u[0]=x[0]+_*l[2],u[1]=x[1]+_*l[6],u[2]=x[2]+_*l[10],A[0]=l[1],A[1]=l[5],A[2]=l[9];for(var g=0;g<3;++g){for(var b=0,v=0;v<3;++v)b+=l[g+4*v]*u[v];l[12+g]=-b}},d.getMatrix=function(c,m){this.recalcMatrix(c);var l=this.computedMatrix;if(m){for(var x=0;x<16;++x)m[x]=l[x];return m}return l},d.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},d.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},d.pan=function(c,m,l,x){m=m||0,l=l||0,x=x||0,this.recalcMatrix(c);var u=this.computedMatrix,A=u[1],_=u[5],g=u[9],b=h(A,_,g);A/=b,_/=b,g/=b;var v=u[0],C=u[4],S=u[8],k=v*A+C*_+S*g;v-=A*k,C-=_*k,S-=g*k;var E=h(v,C,S);v/=E,C/=E,S/=E,u[2],u[6],u[10];var F=v*m+A*l,I=C*m+_*l,D=S*m+g*l;this.center.move(c,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+x),this.radius.set(c,Math.log(R))},d.rotate=function(c,m,l,x){this.recalcMatrix(c),m=m||0,l=l||0;var u=this.computedMatrix,A=u[0],_=u[4],g=u[8],b=u[1],v=u[5],C=u[9],S=u[2],k=u[6],E=u[10],F=m*A+l*b,I=m*_+l*v,D=m*g+l*C,R=-(k*D-E*I),O=-(E*F-S*D),z=-(S*I-k*F),B=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(z,2))),G=i(R,O,z,B);G>1e-6?(R/=G,O/=G,z/=G,B/=G):(R=O=z=0,B=1);var Q=this.computedRotation,X=Q[0],j=Q[1],re=Q[2],ue=Q[3],K=X*B+ue*R+j*z-re*O,te=j*B+ue*O+re*R-X*z,Y=re*B+ue*z+X*O-j*R,V=ue*B-X*R-j*O-re*z;if(x){R=S,O=k,z=E;var ee=Math.sin(x)/h(R,O,z);R*=ee,O*=ee,z*=ee,B=Math.cos(m),K=K*B+V*R+te*z-Y*O,te=te*B+V*O+Y*R-K*z,Y=Y*B+V*z+K*O-te*R,V=V*B-K*R-te*O-Y*z}var ne=i(K,te,Y,V);ne>1e-6?(K/=ne,te/=ne,Y/=ne,V/=ne):(K=te=Y=0,V=1),this.rotation.set(c,K,te,Y,V)},d.lookAt=function(c,m,l,x){this.recalcMatrix(c),l=l||this.computedCenter,m=m||this.computedEye,x=x||this.computedUp;var u=this.computedMatrix;a(u,m,l,x);var A=this.computedRotation;t(A,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),s(A,A),this.rotation.set(c,A[0],A[1],A[2],A[3]);for(var _=0,g=0;g<3;++g)_+=Math.pow(l[g]-m[g],2);this.radius.set(c,.5*Math.log(Math.max(_,1e-6))),this.center.set(c,l[0],l[1],l[2])},d.translate=function(c,m,l,x){this.center.move(c,m||0,l||0,x||0)},d.setMatrix=function(c,m){var l=this.computedRotation;t(l,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),s(l,l),this.rotation.set(c,l[0],l[1],l[2],l[3]);var x=this.computedMatrix;r(x,m);var u=x[15];if(Math.abs(u)>1e-6){var A=x[12]/u,_=x[13]/u,g=x[14]/u;this.recalcMatrix(c);var b=Math.exp(this.computedRadius[0]);this.center.set(c,A-x[2]*b,_-x[6]*b,g-x[10]*b),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},d.setDistance=function(c,m){m>0&&this.radius.set(c,Math.log(m))},d.setDistanceLimits=function(c,m){c>0?c=Math.log(c):c=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=m},d.getDistanceLimits=function(c){var m=this.radius.bounds;return c?(c[0]=Math.exp(m[0][0]),c[1]=Math.exp(m[1][0]),c):[Math.exp(m[0][0]),Math.exp(m[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(c){var m=this.lastT(),l=c.center;l&&this.center.set(m,l[0],l[1],l[2]);var x=c.rotation;x&&this.rotation.set(m,x[0],x[1],x[2],x[3]);var u=c.distance;u&&u>0&&this.radius.set(m,Math.log(u)),this.setDistanceLimits(c.zoomMin,c.zoomMax)};function p(c){c=c||{};var m=c.center||[0,0,0],l=c.rotation||[0,0,0,1],x=c.radius||1;m=[].slice.call(m,0,3),l=[].slice.call(l,0,4),s(l,l);var u=new y(l,m,Math.log(x));return u.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&u.lookAt(0,c.eye,c.center,c.up),u}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(f,M,T){var e=f("repeat-string");M.exports=function(n,r,t){return t=typeof t<"u"?t+"":" ",e(t,r)+n}},{"repeat-string":277}],265:[function(f,M,T){M.exports=function(a,n){n||(n=[0,""]),a=String(a);var r=parseFloat(a,10);return n[0]=r,n[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(f,M,T){M.exports=a;var e=f("compare-angle");function a(n,r){for(var t=r.length|0,h=n.length,i=[new Array(t),new Array(t)],s=0;s<t;++s)i[0][s]=[],i[1][s]=[];for(var s=0;s<h;++s){var y=n[s];i[0][y[0]].push(y),i[1][y[1]].push(y)}for(var d=[],s=0;s<t;++s)i[0][s].length+i[1][s].length===0&&d.push([s]);function p(_,g){var b=i[g][_[g]];b.splice(b.indexOf(_),1)}function c(_,g,b){for(var v,C,S,k=0;k<2;++k)if(i[k][g].length>0){v=i[k][g][0],S=k;break}C=v[S^1];for(var E=0;E<2;++E)for(var F=i[E][g],I=0;I<F.length;++I){var D=F[I],R=D[E^1],O=e(r[_],r[g],r[C],r[R]);O>0&&(v=D,C=R,S=E)}return b||v&&p(v,S),C}function m(_,g){var b=i[g][_][0],v=[_];p(b,g);for(var C=b[g^1];;){for(;C!==_;)v.push(C),C=c(v[v.length-2],C,!1);if(i[0][_].length+i[1][_].length===0)break;var S=v[v.length-1],k=_,E=v[1],F=c(S,k,!0);if(e(r[S],r[k],r[E],r[F])<0)break;v.push(_),C=c(S,k)}return v}function l(_,g){return g[1]===g[g.length-1]}for(var s=0;s<t;++s)for(var x=0;x<2;++x){for(var u=[];i[x][s].length>0;){i[0][s].length;var A=m(s,x);l(u,A)?u.push.apply(u,A):(u.length>0&&d.push(u),u=A)}u.length>0&&d.push(u)}return d}},{"compare-angle":54}],267:[function(f,M,T){M.exports=a;var e=f("edges-to-adjacency-list");function a(n,r){for(var t=e(n,r.length),h=new Array(r.length),i=new Array(r.length),s=[],y=0;y<r.length;++y){var d=t[y].length;i[y]=d,h[y]=!0,d<=1&&s.push(y)}for(;s.length>0;){var p=s.pop();h[p]=!1;for(var c=t[p],y=0;y<c.length;++y){var m=c[y];--i[m]===0&&s.push(m)}}for(var l=new Array(r.length),x=[],y=0;y<r.length;++y)if(h[y]){var p=x.length;l[y]=p,x.push(r[y])}else l[y]=-1;for(var u=[],y=0;y<n.length;++y){var A=n[y];h[A[0]]&&h[A[1]]&&u.push([l[A[0]],l[A[1]]])}return[u,x]}},{"edges-to-adjacency-list":66}],268:[function(f,M,T){M.exports=d;var e=f("edges-to-adjacency-list"),a=f("planar-dual"),n=f("point-in-big-polygon"),r=f("two-product"),t=f("robust-sum"),h=f("uniq"),i=f("./lib/trim-leaves");function s(p,c){for(var m=new Array(p),l=0;l<p;++l)m[l]=c;return m}function y(p){for(var c=new Array(p),m=0;m<p;++m)c[m]=[];return c}function d(p,c){var V=i(p,c);p=V[0],c=V[1];var m=c.length;p.length;for(var l=e(p,c.length),x=0;x<m;++x)if(l[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=a(p,c);function A(ae){for(var oe=ae.length,be=[0],ce=0;ce<oe;++ce){var de=c[ae[ce]],ye=c[ae[(ce+1)%oe]],ge=r(-de[0],de[1]),me=r(-de[0],ye[1]),Me=r(ye[0],de[1]),Le=r(ye[0],ye[1]);be=t(be,t(t(ge,me),t(Me,Le)))}return be[be.length-1]>0}u=u.filter(A);for(var _=u.length,g=new Array(_),b=new Array(_),x=0;x<_;++x){g[x]=x;var v=new Array(_),C=u[x].map(function(oe){return c[oe]}),S=n([C]),k=0;e:for(var E=0;E<_;++E)if(v[E]=0,x!==E){for(var F=u[E],I=F.length,D=0;D<I;++D){var R=S(c[F[D]]);if(R!==0){R<0&&(v[E]=1,k+=1);continue e}}v[E]=1,k+=1}b[x]=[k,x,v]}b.sort(function(ae,oe){return oe[0]-ae[0]});for(var x=0;x<_;++x)for(var v=b[x],O=v[1],z=v[2],E=0;E<_;++E)z[E]&&(g[E]=O);for(var B=y(_),x=0;x<_;++x)B[x].push(g[x]),B[g[x]].push(x);for(var G={},Q=s(m,!1),x=0;x<_;++x)for(var F=u[x],I=F.length,E=0;E<I;++E){var X=F[E],j=F[(E+1)%I],re=Math.min(X,j)+":"+Math.max(X,j);if(re in G){var ue=G[re];B[ue].push(x),B[x].push(ue),Q[X]=Q[j]=!0}else G[re]=x}function K(ae){for(var oe=ae.length,be=0;be<oe;++be)if(!Q[ae[be]])return!1;return!0}for(var te=[],Y=s(_,-1),x=0;x<_;++x)g[x]===x&&!K(u[x])?(te.push(x),Y[x]=0):Y[x]=-1;for(var V=[];te.length>0;){var ee=te.pop(),ne=B[ee];h(ne,function(ae,oe){return ae-oe});var Z=ne.length,q=Y[ee],ie;if(q===0){var F=u[ee];ie=[F]}for(var x=0;x<Z;++x){var se=ne[x];if(!(Y[se]>=0)&&(Y[se]=q^1,te.push(se),q===0)){var F=u[se];K(F)||(F.reverse(),ie.push(F))}}q===0&&V.push(ie)}return V}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(f,M,T){M.exports=c;var e=f("robust-orientation")[3],a=f("slab-decomposition"),n=f("interval-tree-1d"),r=f("binary-search-bounds");function t(){return!0}function h(m){return function(l,x){var u=m[l];return u?!!u.queryPoint(x,t):!1}}function i(m){for(var l={},x=0;x<m.length;++x){var u=m[x],A=u[0][0],_=u[0][1],g=u[1][1],b=[Math.min(_,g),Math.max(_,g)];A in l?l[A].push(b):l[A]=[b]}for(var v={},C=Object.keys(l),x=0;x<C.length;++x){var S=l[C[x]];v[C[x]]=n(S)}return h(v)}function s(m,l){return function(x){var u=r.le(l,x[0]);if(u<0)return 1;var A=m[u];if(!A)if(u>0&&l[u]===x[0])A=m[u-1];else return 1;for(var _=1;A;){var g=A.key,b=e(x,g[0],g[1]);if(g[0][0]<g[1][0])if(b<0)A=A.left;else if(b>0)_=-1,A=A.right;else return 0;else if(b>0)A=A.left;else if(b<0)_=1,A=A.right;else return 0}return _}}function y(m){return 1}function d(m){return function(x){return m(x[0],x[1])?0:1}}function p(m,l){return function(u){return m(u[0],u[1])?0:l(u)}}function c(m){for(var l=m.length,x=[],u=[],A=0;A<l;++A)for(var _=m[A],g=_.length,b=g-1,v=0;v<g;b=v++){var C=_[b],S=_[v];C[0]===S[0]?u.push([C,S]):x.push([C,S])}if(x.length===0)return u.length===0?y:d(i(u));var k=a(x),E=s(k.slabs,k.coordinates);return u.length===0?E:p(i(u),E)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(f,M,T){var e=new Float64Array(4),a=new Float64Array(4),n=new Float64Array(4);function r(t,h,i,s,y){e.length<s.length&&(e=new Float64Array(s.length),a=new Float64Array(s.length),n=new Float64Array(s.length));for(var d=0;d<s.length;++d)e[d]=t[d]-s[d],a[d]=h[d]-t[d],n[d]=i[d]-t[d];for(var p=0,c=0,m=0,l=0,x=0,u=0,d=0;d<s.length;++d){var A=a[d],_=n[d],g=e[d];p+=A*A,c+=A*_,m+=_*_,l+=g*A,x+=g*_,u+=g*g}var b=Math.abs(p*m-c*c),v=c*x-m*l,C=c*l-p*x,S;if(v+C<=b)if(v<0)C<0&&l<0?(C=0,-l>=p?(v=1,S=p+2*l+u):(v=-l/p,S=l*v+u)):(v=0,x>=0?(C=0,S=u):-x>=m?(C=1,S=m+2*x+u):(C=-x/m,S=x*C+u));else if(C<0)C=0,l>=0?(v=0,S=u):-l>=p?(v=1,S=p+2*l+u):(v=-l/p,S=l*v+u);else{var k=1/b;v*=k,C*=k,S=v*(p*v+c*C+2*l)+C*(c*v+m*C+2*x)+u}else{var E,F,I,D;v<0?(E=c+l,F=m+x,F>E?(I=F-E,D=p-2*c+m,I>=D?(v=1,C=0,S=p+2*l+u):(v=I/D,C=1-v,S=v*(p*v+c*C+2*l)+C*(c*v+m*C+2*x)+u)):(v=0,F<=0?(C=1,S=m+2*x+u):x>=0?(C=0,S=u):(C=-x/m,S=x*C+u))):C<0?(E=c+x,F=p+l,F>E?(I=F-E,D=p-2*c+m,I>=D?(C=1,v=0,S=m+2*x+u):(C=I/D,v=1-C,S=v*(p*v+c*C+2*l)+C*(c*v+m*C+2*x)+u)):(C=0,F<=0?(v=1,S=p+2*l+u):l>=0?(v=0,S=u):(v=-l/p,S=l*v+u))):(I=m+x-c-l,I<=0?(v=0,C=1,S=m+2*x+u):(D=p-2*c+m,I>=D?(v=1,C=0,S=p+2*l+u):(v=I/D,C=1-v,S=v*(p*v+c*C+2*l)+C*(c*v+m*C+2*x)+u)))}for(var R=1-v-C,d=0;d<s.length;++d)y[d]=R*t[d]+v*h[d]+C*i[d];return S<0?0:S}M.exports=r},{}],271:[function(f,M,T){M.exports=f("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(f,M,T){var e=f("big-rat/add");M.exports=a;function a(n,r){for(var t=n.length,h=new Array(t),i=0;i<t;++i)h[i]=e(n[i],r[i]);return h}},{"big-rat/add":15}],273:[function(f,M,T){M.exports=a;var e=f("big-rat");function a(n){for(var r=new Array(n.length),t=0;t<n.length;++t)r[t]=e(n[t]);return r}},{"big-rat":18}],274:[function(f,M,T){var e=f("big-rat"),a=f("big-rat/mul");M.exports=n;function n(r,t){for(var h=e(t),i=r.length,s=new Array(i),y=0;y<i;++y)s[y]=a(r[y],h);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(f,M,T){var e=f("big-rat/sub");M.exports=a;function a(n,r){for(var t=n.length,h=new Array(t),i=0;i<t;++i)h[i]=e(n[i],r[i]);return h}},{"big-rat/sub":29}],276:[function(f,M,T){var e=f("compare-cell"),a=f("compare-oriented-cell"),n=f("cell-orientation");M.exports=r;function r(t){t.sort(a);for(var h=t.length,i=0,s=0;s<h;++s){var y=t[s],d=n(y);if(d!==0){if(i>0){var p=t[i-1];if(e(y,p)===0&&n(p)!==d){i-=1;continue}}t[i++]=y}}return t.length=i,t}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(f,M,T){var e="",a;M.exports=n;function n(r,t){if(typeof r!="string")throw new TypeError("expected a string");if(t===1)return r;if(t===2)return r+r;var h=r.length*t;if(a!==r||typeof a>"u")a=r,e="";else if(e.length>=h)return e.substr(0,h);for(;h>e.length&&t>1;)t&1&&(e+=r),t>>=1,r+=r;return e+=r,e=e.substr(0,h),e}},{}],278:[function(f,M,T){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(f,M,T){M.exports=e;function e(a){for(var n=a.length,r=a[a.length-1],t=n,h=n-2;h>=0;--h){var i=r,s=a[h];r=i+s;var y=r-i,d=s-y;d&&(a[--t]=r,r=d)}for(var p=0,h=t;h<n;++h){var i=a[h],s=r;r=i+s;var y=r-i,d=s-y;d&&(a[p++]=d)}return a[p++]=r,a.length=p,a}},{}],280:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-scale"),r=f("robust-compress"),t=6;function h(l,x,u,A){return function(g){return A(l(u(g[0][0],g[1][1]),u(-g[0][1],g[1][0])))}}function i(l,x,u,A){return function(g){return A(l(x(l(u(g[1][1],g[2][2]),u(-g[1][2],g[2][1])),g[0][0]),l(x(l(u(g[1][0],g[2][2]),u(-g[1][2],g[2][0])),-g[0][1]),x(l(u(g[1][0],g[2][1]),u(-g[1][1],g[2][0])),g[0][2]))))}}function s(l,x,u,A){return function(g){return A(l(l(x(l(x(l(u(g[2][2],g[3][3]),u(-g[2][3],g[3][2])),g[1][1]),l(x(l(u(g[2][1],g[3][3]),u(-g[2][3],g[3][1])),-g[1][2]),x(l(u(g[2][1],g[3][2]),u(-g[2][2],g[3][1])),g[1][3]))),g[0][0]),x(l(x(l(u(g[2][2],g[3][3]),u(-g[2][3],g[3][2])),g[1][0]),l(x(l(u(g[2][0],g[3][3]),u(-g[2][3],g[3][0])),-g[1][2]),x(l(u(g[2][0],g[3][2]),u(-g[2][2],g[3][0])),g[1][3]))),-g[0][1])),l(x(l(x(l(u(g[2][1],g[3][3]),u(-g[2][3],g[3][1])),g[1][0]),l(x(l(u(g[2][0],g[3][3]),u(-g[2][3],g[3][0])),-g[1][1]),x(l(u(g[2][0],g[3][1]),u(-g[2][1],g[3][0])),g[1][3]))),g[0][2]),x(l(x(l(u(g[2][1],g[3][2]),u(-g[2][2],g[3][1])),g[1][0]),l(x(l(u(g[2][0],g[3][2]),u(-g[2][2],g[3][0])),-g[1][1]),x(l(u(g[2][0],g[3][1]),u(-g[2][1],g[3][0])),g[1][2]))),-g[0][3]))))}}function y(l,x,u,A){return function(g){return A(l(l(x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][2]),l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),-g[2][3]),x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][4]))),g[1][1]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][3]),x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][4]))),-g[1][2])),l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][3]))),-g[1][4]))),g[0][0]),x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][2]),l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),-g[2][3]),x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][3]),x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),g[2][4]))),-g[1][2])),l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][3]))),-g[1][4]))),-g[0][1])),l(x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][3]),x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][3]),x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),g[2][4]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][3]))),-g[1][4]))),g[0][2]),l(x(l(l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][4]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][4]))),g[1][2]),x(l(x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][2]))),-g[1][4]))),-g[0][3]),x(l(l(x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][3]))),g[1][0]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][3]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][3]))),g[1][2]),x(l(x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][2]))),-g[1][3]))),g[0][4])))))}}function d(l){var x=l===2?h:l===3?i:l===4?s:l===5?y:void 0;return x(a,n,e,r)}var p=[function(){return[0]},function(x){return[x[0][0]]}];function c(l,x,u,A,_,g,b,v){return function(S){switch(S.length){case 0:return l(S);case 1:return x(S);case 2:return u(S);case 3:return A(S);case 4:return _(S);case 5:return g(S)}var k=b[S.length];return k||(k=b[S.length]=v(S.length)),k(S)}}function m(){for(;p.length<t;)p.push(d(p.length));M.exports=c.apply(void 0,p.concat([p,d]));for(var l=0;l<p.length;++l)M.exports[l]=p[l]}m()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(f,M,T){var e=f("two-product"),a=f("robust-sum");M.exports=n;function n(r,t){for(var h=e(r[0],t[0]),i=1;i<r.length;++i)h=a(h,e(r[i],t[i]));return h}},{"robust-sum":289,"two-product":306}],282:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-subtract"),r=f("robust-scale"),t=6;function h(_){var g=_===3?d:_===4?p:_===5?c:m;return g(a,n,e,r)}function i(){return 0}function s(){return 0}function y(){return 0}function d(_,g,b,v){function C(S,k,E){var F=b(S[0],S[0]),I=v(F,k[0]),D=v(F,E[0]),R=b(k[0],k[0]),O=v(R,S[0]),z=v(R,E[0]),B=b(E[0],E[0]),G=v(B,S[0]),Q=v(B,k[0]),X=_(g(Q,z),g(O,I)),j=g(G,D),re=g(X,j);return re[re.length-1]}return C}function p(_,g,b,v){function C(S,k,E,F){var I=_(b(S[0],S[0]),b(S[1],S[1])),D=v(I,k[0]),R=v(I,E[0]),O=v(I,F[0]),z=_(b(k[0],k[0]),b(k[1],k[1])),B=v(z,S[0]),G=v(z,E[0]),Q=v(z,F[0]),X=_(b(E[0],E[0]),b(E[1],E[1])),j=v(X,S[0]),re=v(X,k[0]),ue=v(X,F[0]),K=_(b(F[0],F[0]),b(F[1],F[1])),te=v(K,S[0]),Y=v(K,k[0]),V=v(K,E[0]),ee=_(_(v(g(V,ue),k[1]),_(v(g(Y,Q),-E[1]),v(g(re,G),F[1]))),_(v(g(Y,Q),S[1]),_(v(g(te,O),-k[1]),v(g(B,D),F[1])))),ne=_(_(v(g(V,ue),S[1]),_(v(g(te,O),-E[1]),v(g(j,R),F[1]))),_(v(g(re,G),S[1]),_(v(g(j,R),-k[1]),v(g(B,D),E[1])))),Z=g(ee,ne);return Z[Z.length-1]}return C}function c(_,g,b,v){function C(S,k,E,F,I){var D=_(b(S[0],S[0]),_(b(S[1],S[1]),b(S[2],S[2]))),R=v(D,k[0]),O=v(D,E[0]),z=v(D,F[0]),B=v(D,I[0]),G=_(b(k[0],k[0]),_(b(k[1],k[1]),b(k[2],k[2]))),Q=v(G,S[0]),X=v(G,E[0]),j=v(G,F[0]),re=v(G,I[0]),ue=_(b(E[0],E[0]),_(b(E[1],E[1]),b(E[2],E[2]))),K=v(ue,S[0]),te=v(ue,k[0]),Y=v(ue,F[0]),V=v(ue,I[0]),ee=_(b(F[0],F[0]),_(b(F[1],F[1]),b(F[2],F[2]))),ne=v(ee,S[0]),Z=v(ee,k[0]),q=v(ee,E[0]),ie=v(ee,I[0]),se=_(b(I[0],I[0]),_(b(I[1],I[1]),b(I[2],I[2]))),ae=v(se,S[0]),oe=v(se,k[0]),be=v(se,E[0]),ce=v(se,F[0]),de=_(_(_(v(_(v(g(ce,ie),E[1]),_(v(g(be,V),-F[1]),v(g(q,Y),I[1]))),k[2]),_(v(_(v(g(ce,ie),k[1]),_(v(g(oe,re),-F[1]),v(g(Z,j),I[1]))),-E[2]),v(_(v(g(be,V),k[1]),_(v(g(oe,re),-E[1]),v(g(te,X),I[1]))),F[2]))),_(v(_(v(g(q,Y),k[1]),_(v(g(Z,j),-E[1]),v(g(te,X),F[1]))),-I[2]),_(v(_(v(g(ce,ie),k[1]),_(v(g(oe,re),-F[1]),v(g(Z,j),I[1]))),S[2]),v(_(v(g(ce,ie),S[1]),_(v(g(ae,B),-F[1]),v(g(ne,z),I[1]))),-k[2])))),_(_(v(_(v(g(oe,re),S[1]),_(v(g(ae,B),-k[1]),v(g(Q,R),I[1]))),F[2]),_(v(_(v(g(Z,j),S[1]),_(v(g(ne,z),-k[1]),v(g(Q,R),F[1]))),-I[2]),v(_(v(g(q,Y),k[1]),_(v(g(Z,j),-E[1]),v(g(te,X),F[1]))),S[2]))),_(v(_(v(g(q,Y),S[1]),_(v(g(ne,z),-E[1]),v(g(K,O),F[1]))),-k[2]),_(v(_(v(g(Z,j),S[1]),_(v(g(ne,z),-k[1]),v(g(Q,R),F[1]))),E[2]),v(_(v(g(te,X),S[1]),_(v(g(K,O),-k[1]),v(g(Q,R),E[1]))),-F[2]))))),ye=_(_(_(v(_(v(g(ce,ie),E[1]),_(v(g(be,V),-F[1]),v(g(q,Y),I[1]))),S[2]),v(_(v(g(ce,ie),S[1]),_(v(g(ae,B),-F[1]),v(g(ne,z),I[1]))),-E[2])),_(v(_(v(g(be,V),S[1]),_(v(g(ae,B),-E[1]),v(g(K,O),I[1]))),F[2]),v(_(v(g(q,Y),S[1]),_(v(g(ne,z),-E[1]),v(g(K,O),F[1]))),-I[2]))),_(_(v(_(v(g(be,V),k[1]),_(v(g(oe,re),-E[1]),v(g(te,X),I[1]))),S[2]),v(_(v(g(be,V),S[1]),_(v(g(ae,B),-E[1]),v(g(K,O),I[1]))),-k[2])),_(v(_(v(g(oe,re),S[1]),_(v(g(ae,B),-k[1]),v(g(Q,R),I[1]))),E[2]),v(_(v(g(te,X),S[1]),_(v(g(K,O),-k[1]),v(g(Q,R),E[1]))),-I[2])))),ge=g(de,ye);return ge[ge.length-1]}return C}function m(_,g,b,v){function C(S,k,E,F,I,D){var R=_(_(b(S[0],S[0]),b(S[1],S[1])),_(b(S[2],S[2]),b(S[3],S[3]))),O=v(R,k[0]),z=v(R,E[0]),B=v(R,F[0]),G=v(R,I[0]),Q=v(R,D[0]),X=_(_(b(k[0],k[0]),b(k[1],k[1])),_(b(k[2],k[2]),b(k[3],k[3]))),j=v(X,S[0]),re=v(X,E[0]),ue=v(X,F[0]),K=v(X,I[0]),te=v(X,D[0]),Y=_(_(b(E[0],E[0]),b(E[1],E[1])),_(b(E[2],E[2]),b(E[3],E[3]))),V=v(Y,S[0]),ee=v(Y,k[0]),ne=v(Y,F[0]),Z=v(Y,I[0]),q=v(Y,D[0]),ie=_(_(b(F[0],F[0]),b(F[1],F[1])),_(b(F[2],F[2]),b(F[3],F[3]))),se=v(ie,S[0]),ae=v(ie,k[0]),oe=v(ie,E[0]),be=v(ie,I[0]),ce=v(ie,D[0]),de=_(_(b(I[0],I[0]),b(I[1],I[1])),_(b(I[2],I[2]),b(I[3],I[3]))),ye=v(de,S[0]),ge=v(de,k[0]),me=v(de,E[0]),Me=v(de,F[0]),Le=v(de,D[0]),Oe=_(_(b(D[0],D[0]),b(D[1],D[1])),_(b(D[2],D[2]),b(D[3],D[3]))),_e=v(Oe,S[0]),Ee=v(Oe,k[0]),Ze=v(Oe,E[0]),Ge=v(Oe,F[0]),Fe=v(Oe,I[0]),Re=_(_(_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),I[2]),v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),-D[2]))),k[3]),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),k[2]),v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),I[2]),v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-D[2]))),-E[3]),v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),k[2]),v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),-E[2])),_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),I[2]),v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),-D[2]))),F[3]))),_(_(v(_(_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),k[2]),v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),-E[2])),_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),F[2]),v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),-D[2]))),-I[3]),v(_(_(v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),k[2]),v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-E[2])),_(v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),F[2]),v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),-I[2]))),D[3])),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),k[2]),v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),I[2]),v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-D[2]))),S[3]),v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),I[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-D[2]))),-k[3])))),_(_(_(v(_(_(v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),I[2]),v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),-D[2]))),F[3]),v(_(_(v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),S[2]),v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),-D[2]))),-I[3])),_(v(_(_(v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),S[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-k[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),-I[2]))),D[3]),v(_(_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),k[2]),v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),-E[2])),_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),F[2]),v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),-D[2]))),S[3]))),_(_(v(_(_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),S[2]),v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),-E[2])),_(v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-D[2]))),-k[3]),v(_(_(v(_(v(g(Ge,ce),k[1]),_(v(g(Ee,te),-F[1]),v(g(ae,ue),D[1]))),S[2]),v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),-D[2]))),E[3])),_(v(_(_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),S[2]),v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-D[2]))),-F[3]),v(_(_(v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),S[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-k[2])),_(v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-F[2]))),D[3]))))),We=_(_(_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),I[2]),v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),-D[2]))),S[3]),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ge,ce),-I[1]),v(g(Me,be),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-F[2])),_(v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),I[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-D[2]))),-E[3]),v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-E[2])),_(v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),I[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),-D[2]))),F[3]))),_(_(v(_(_(v(_(v(g(Ge,ce),E[1]),_(v(g(Ze,q),-F[1]),v(g(oe,ne),D[1]))),S[2]),v(_(v(g(Ge,ce),S[1]),_(v(g(_e,Q),-F[1]),v(g(se,B),D[1]))),-E[2])),_(v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-D[2]))),-I[3]),v(_(_(v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),S[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-E[2])),_(v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-I[2]))),D[3])),_(v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),k[2]),v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),-E[2])),_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),I[2]),v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),-D[2]))),S[3]),v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ze,q),-I[1]),v(g(me,Z),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-E[2])),_(v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),I[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),-D[2]))),-k[3])))),_(_(_(v(_(_(v(_(v(g(Fe,Le),k[1]),_(v(g(Ee,te),-I[1]),v(g(ge,K),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(_e,Q),-I[1]),v(g(ye,G),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),I[2]),v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),-D[2]))),E[3]),v(_(_(v(_(v(g(Ze,q),k[1]),_(v(g(Ee,te),-E[1]),v(g(ee,re),D[1]))),S[2]),v(_(v(g(Ze,q),S[1]),_(v(g(_e,Q),-E[1]),v(g(V,z),D[1]))),-k[2])),_(v(_(v(g(Ee,te),S[1]),_(v(g(_e,Q),-k[1]),v(g(j,O),D[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-D[2]))),-I[3])),_(v(_(_(v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),S[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),-k[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-I[2]))),D[3]),v(_(_(v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),k[2]),v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-E[2])),_(v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),F[2]),v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),-I[2]))),S[3]))),_(_(v(_(_(v(_(v(g(Me,be),E[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),S[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-E[2])),_(v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-I[2]))),-k[3]),v(_(_(v(_(v(g(Me,be),k[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),S[2]),v(_(v(g(Me,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-k[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),-I[2]))),E[3])),_(v(_(_(v(_(v(g(me,Z),k[1]),_(v(g(ge,K),-E[1]),v(g(ee,re),I[1]))),S[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-E[1]),v(g(V,z),I[1]))),-k[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-k[1]),v(g(j,O),I[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-I[2]))),-F[3]),v(_(_(v(_(v(g(oe,ne),k[1]),_(v(g(ae,ue),-E[1]),v(g(ee,re),F[1]))),S[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-E[1]),v(g(V,z),F[1]))),-k[2])),_(v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-k[1]),v(g(j,O),F[1]))),E[2]),v(_(v(g(ee,re),S[1]),_(v(g(V,z),-k[1]),v(g(j,O),E[1]))),-F[2]))),I[3]))))),xt=g(Re,We);return xt[xt.length-1]}return C}var l=[i,s,y];function x(_){var g=l[_.length];return g||(g=l[_.length]=h(_.length)),g.apply(void 0,_)}function u(_,g,b,v,C,S,k,E){function F(I,D,R,O,z,B){switch(arguments.length){case 0:case 1:return 0;case 2:return v(I,D);case 3:return C(I,D,R);case 4:return S(I,D,R,O);case 5:return k(I,D,R,O,z);case 6:return E(I,D,R,O,z,B)}for(var G=new Array(arguments.length),Q=0;Q<arguments.length;++Q)G[Q]=arguments[Q];return _(G)}return F}function A(){for(;l.length<=t;)l.push(h(l.length));M.exports=u.apply(void 0,[x].concat(l));for(var _=0;_<=t;++_)M.exports[_]=l[_]}A()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(f,M,T){var e=f("robust-determinant"),a=6;function n(l){var x=l===2?h:l===3?i:l===4?s:l===5?y:d;return l<6?x(e[l]):x(e)}function r(){return[[0]]}function t(l,x){return[[x[0]],[l[0][0]]]}function h(l){return function(u,A){return[l([[+A[0],+u[0][1]],[+A[1],+u[1][1]]]),l([[+u[0][0],+A[0]],[+u[1][0],+A[1]]]),l(u)]}}function i(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2]],[+A[1],+u[1][1],+u[1][2]],[+A[2],+u[2][1],+u[2][2]]]),l([[+u[0][0],+A[0],+u[0][2]],[+u[1][0],+A[1],+u[1][2]],[+u[2][0],+A[2],+u[2][2]]]),l([[+u[0][0],+u[0][1],+A[0]],[+u[1][0],+u[1][1],+A[1]],[+u[2][0],+u[2][1],+A[2]]]),l(u)]}}function s(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3]],[+A[1],+u[1][1],+u[1][2],+u[1][3]],[+A[2],+u[2][1],+u[2][2],+u[2][3]],[+A[3],+u[3][1],+u[3][2],+u[3][3]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3]],[+u[1][0],+A[1],+u[1][2],+u[1][3]],[+u[2][0],+A[2],+u[2][2],+u[2][3]],[+u[3][0],+A[3],+u[3][2],+u[3][3]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3]],[+u[1][0],+u[1][1],+A[1],+u[1][3]],[+u[2][0],+u[2][1],+A[2],+u[2][3]],[+u[3][0],+u[3][1],+A[3],+u[3][3]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+A[3]]]),l(u)]}}function y(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4]]]),l(u)]}}function d(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+A[5],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+A[5],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+A[5],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+A[5],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+A[5],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+A[4]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+A[5]]]),l(u)]}}var p=[r,t];function c(l,x,u,A,_,g,b,v){return function(S,k){switch(S.length){case 0:return l(S,k);case 1:return x(S,k);case 2:return u(S,k);case 3:return A(S,k);case 4:return _(S,k);case 5:return g(S,k)}var E=b[S.length];return E||(E=b[S.length]=v(S.length)),E(S,k)}}function m(){for(;p.length<a;)p.push(n(p.length));M.exports=c.apply(void 0,p.concat([p,n]));for(var l=0;l<a;++l)M.exports[l]=p[l]}m()},{"robust-determinant":280}],284:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-scale"),r=f("robust-subtract"),t=5,h=11102230246251565e-32,i=(3+16*h)*h,s=(7+56*h)*h;function y(g,b,v,C){return function(k,E,F){var I=g(g(b(E[1],F[0]),b(-F[1],E[0])),g(b(k[1],E[0]),b(-E[1],k[0]))),D=g(b(k[1],F[0]),b(-F[1],k[0])),R=C(I,D);return R[R.length-1]}}function d(g,b,v,C){return function(k,E,F,I){var D=g(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),I[2])))),R=g(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-F[2]),v(g(b(k[1],F[0]),b(-F[1],k[0])),I[2]))),g(v(g(b(E[1],F[0]),b(-F[1],E[0])),k[2]),g(v(g(b(k[1],F[0]),b(-F[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),F[2])))),O=C(D,R);return O[O.length-1]}}function p(g,b,v,C){return function(k,E,F,I,D){var R=g(g(g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),F[2]),g(v(g(b(F[1],D[0]),b(-D[1],F[0])),-I[2]),v(g(b(F[1],I[0]),b(-I[1],F[0])),D[2]))),E[3]),g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-I[2]),v(g(b(E[1],I[0]),b(-I[1],E[0])),D[2]))),-F[3]),v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),D[2]))),I[3]))),g(v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),-D[3]),g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-I[2]),v(g(b(E[1],I[0]),b(-I[1],E[0])),D[2]))),k[3]),v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-I[2]),v(g(b(k[1],I[0]),b(-I[1],k[0])),D[2]))),-E[3])))),g(g(v(g(v(g(b(E[1],D[0]),b(-D[1],E[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),D[2]))),I[3]),g(v(g(v(g(b(E[1],I[0]),b(-I[1],E[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),I[2]))),-D[3]),v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),k[3]))),g(v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-F[2]),v(g(b(k[1],F[0]),b(-F[1],k[0])),I[2]))),-E[3]),g(v(g(v(g(b(E[1],I[0]),b(-I[1],E[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),I[2]))),F[3]),v(g(v(g(b(E[1],F[0]),b(-F[1],E[0])),k[2]),g(v(g(b(k[1],F[0]),b(-F[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),F[2]))),-I[3]))))),O=g(g(g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),F[2]),g(v(g(b(F[1],D[0]),b(-D[1],F[0])),-I[2]),v(g(b(F[1],I[0]),b(-I[1],F[0])),D[2]))),k[3]),v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-I[2]),v(g(b(k[1],I[0]),b(-I[1],k[0])),D[2]))),-F[3])),g(v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-F[2]),v(g(b(k[1],F[0]),b(-F[1],k[0])),D[2]))),I[3]),v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),k[2]),g(v(g(b(k[1],I[0]),b(-I[1],k[0])),-F[2]),v(g(b(k[1],F[0]),b(-F[1],k[0])),I[2]))),-D[3]))),g(g(v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),D[2]))),k[3]),v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-F[2]),v(g(b(k[1],F[0]),b(-F[1],k[0])),D[2]))),-E[3])),g(v(g(v(g(b(E[1],D[0]),b(-D[1],E[0])),k[2]),g(v(g(b(k[1],D[0]),b(-D[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),D[2]))),F[3]),v(g(v(g(b(E[1],F[0]),b(-F[1],E[0])),k[2]),g(v(g(b(k[1],F[0]),b(-F[1],k[0])),-E[2]),v(g(b(k[1],E[0]),b(-E[1],k[0])),F[2]))),-D[3])))),z=C(R,O);return z[z.length-1]}}function c(g){var b=g===3?y:g===4?d:p;return b(a,e,n,r)}var m=c(3),l=c(4),x=[function(){return 0},function(){return 0},function(b,v){return v[0]-b[0]},function(b,v,C){var S=(b[1]-C[1])*(v[0]-C[0]),k=(b[0]-C[0])*(v[1]-C[1]),E=S-k,F;if(S>0){if(k<=0)return E;F=S+k}else if(S<0){if(k>=0)return E;F=-(S+k)}else return E;var I=i*F;return E>=I||E<=-I?E:m(b,v,C)},function(b,v,C,S){var k=b[0]-S[0],E=v[0]-S[0],F=C[0]-S[0],I=b[1]-S[1],D=v[1]-S[1],R=C[1]-S[1],O=b[2]-S[2],z=v[2]-S[2],B=C[2]-S[2],G=E*R,Q=F*D,X=F*I,j=k*R,re=k*D,ue=E*I,K=O*(G-Q)+z*(X-j)+B*(re-ue),te=(Math.abs(G)+Math.abs(Q))*Math.abs(O)+(Math.abs(X)+Math.abs(j))*Math.abs(z)+(Math.abs(re)+Math.abs(ue))*Math.abs(B),Y=s*te;return K>Y||-K>Y?K:l(b,v,C,S)}];function u(g){var b=x[g.length];return b||(b=x[g.length]=c(g.length)),b.apply(void 0,g)}function A(g,b,v,C,S,k,E){return function(I,D,R,O,z){switch(arguments.length){case 0:case 1:return 0;case 2:return C(I,D);case 3:return S(I,D,R);case 4:return k(I,D,R,O);case 5:return E(I,D,R,O,z)}for(var B=new Array(arguments.length),G=0;G<arguments.length;++G)B[G]=arguments[G];return g(B)}}function _(){for(;x.length<=t;)x.push(c(x.length));M.exports=A.apply(void 0,[u].concat(x));for(var g=0;g<=t;++g)M.exports[g]=x[g]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(f,M,T){var e=f("robust-sum"),a=f("robust-scale");M.exports=n;function n(r,t){if(r.length===1)return a(t,r[0]);if(t.length===1)return a(r,t[0]);if(r.length===0||t.length===0)return[0];var h=[0];if(r.length<t.length)for(var i=0;i<r.length;++i)h=e(h,a(t,r[i]));else for(var i=0;i<t.length;++i)h=e(h,a(r,t[i]));return h}},{"robust-scale":286,"robust-sum":289}],286:[function(f,M,T){var e=f("two-product"),a=f("two-sum");M.exports=n;function n(r,t){var h=r.length;if(h===1){var i=e(r[0],t);return i[0]?i:[i[1]]}var s=new Array(2*h),y=[.1,.1],d=[.1,.1],p=0;e(r[0],t,y),y[0]&&(s[p++]=y[0]);for(var c=1;c<h;++c){e(r[c],t,d);var m=y[1];a(m,d[0],y),y[0]&&(s[p++]=y[0]);var l=d[1],x=y[1],u=l+x,A=u-l,_=x-A;y[1]=u,_&&(s[p++]=_)}return y[1]&&(s[p++]=y[1]),p===0&&(s[p++]=0),s.length=p,s}},{"two-product":306,"two-sum":307}],287:[function(f,M,T){M.exports=n;var e=f("robust-orientation")[3];function a(r,t,h,i){for(var s=0;s<2;++s){var y=r[s],d=t[s],p=Math.min(y,d),c=Math.max(y,d),m=h[s],l=i[s],x=Math.min(m,l),u=Math.max(m,l);if(u<p||c<x)return!1}return!0}function n(r,t,h,i){var s=e(r,h,i),y=e(t,h,i);if(s>0&&y>0||s<0&&y<0)return!1;var d=e(h,r,t),p=e(i,r,t);return d>0&&p>0||d<0&&p<0?!1:s===0&&y===0&&d===0&&p===0?a(r,t,h,i):!0}},{"robust-orientation":284}],288:[function(f,M,T){M.exports=a;function e(n,r){var t=n+r,h=t-n,i=t-h,s=r-h,y=n-i,d=y+s;return d?[d,t]:[t]}function a(n,r){var t=n.length|0,h=r.length|0;if(t===1&&h===1)return e(n[0],-r[0]);var i=t+h,s=new Array(i),y=0,d=0,p=0,c=Math.abs,m=n[d],l=c(m),x=-r[p],u=c(x),A,_;l<u?(_=m,d+=1,d<t&&(m=n[d],l=c(m))):(_=x,p+=1,p<h&&(x=-r[p],u=c(x))),d<t&&l<u||p>=h?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=-r[p],u=c(x)));for(var g=A+_,b=g-A,v=_-b,C=v,S=g,k,E,F,I,D;d<t&&p<h;)l<u?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=-r[p],u=c(x))),_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k;for(;d<t;)A=m,_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k,d+=1,d<t&&(m=n[d]);for(;p<h;)A=x,_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k,p+=1,p<h&&(x=-r[p]);return C&&(s[y++]=C),S&&(s[y++]=S),y||(s[y++]=0),s.length=y,s}},{}],289:[function(f,M,T){M.exports=a;function e(n,r){var t=n+r,h=t-n,i=t-h,s=r-h,y=n-i,d=y+s;return d?[d,t]:[t]}function a(n,r){var t=n.length|0,h=r.length|0;if(t===1&&h===1)return e(n[0],r[0]);var i=t+h,s=new Array(i),y=0,d=0,p=0,c=Math.abs,m=n[d],l=c(m),x=r[p],u=c(x),A,_;l<u?(_=m,d+=1,d<t&&(m=n[d],l=c(m))):(_=x,p+=1,p<h&&(x=r[p],u=c(x))),d<t&&l<u||p>=h?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=r[p],u=c(x)));for(var g=A+_,b=g-A,v=_-b,C=v,S=g,k,E,F,I,D;d<t&&p<h;)l<u?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=r[p],u=c(x))),_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k;for(;d<t;)A=m,_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k,d+=1,d<t&&(m=n[d]);for(;p<h;)A=x,_=C,g=A+_,b=g-A,v=_-b,v&&(s[y++]=v),k=S+g,E=k-S,F=k-E,I=g-E,D=S-F,C=D+I,S=k,p+=1,p<h&&(x=r[p]);return C&&(s[y++]=C),S&&(s[y++]=S),y||(s[y++]=0),s.length=y,s}},{}],290:[function(f,M,T){M.exports=n;var e=f("boundary-cells"),a=f("reduce-simplicial-complex");function n(r){return a(e(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(f,M,T){M.exports=p;var e=f("ndarray"),a=f("typedarray-pool"),n=f("ndarray-sort"),r=f("./lib/codegen");function t(c){for(var m=c.length,l=0,x=0;x<m;++x)l=Math.max(l,c[x].length)|0;return l-1}function h(c,m){for(var l=c.length,x=a.mallocUint8(l),u=0;u<l;++u)x[u]=c[u]<m|0;return x}function i(c,m){for(var l=c.length,x=m*(m+1)/2*l|0,u=a.mallocUint32(x*2),A=0,_=0;_<l;++_)for(var g=c[_],m=g.length,b=0;b<m;++b)for(var v=0;v<b;++v){var C=g[v],S=g[b];u[A++]=Math.min(C,S)|0,u[A++]=Math.max(C,S)|0}var k=A/2|0;n(e(u,[k,2]));for(var E=2,_=2;_<A;_+=2)u[_-2]===u[_]&&u[_-1]===u[_+1]||(u[E++]=u[_],u[E++]=u[_+1]);return e(u,[E/2|0,2])}function s(c,m,l,x){for(var u=c.data,A=c.shape[0],_=a.mallocDouble(A),g=0,b=0;b<A;++b){var v=u[2*b],C=u[2*b+1];if(l[v]!==l[C]){var S=m[v],k=m[C];u[2*g]=v,u[2*g+1]=C,_[g++]=(k-x)/(k-S)}}return c.shape[0]=g,e(_,[g])}function y(c,m){var l=a.mallocInt32(m*2),x=c.shape[0],u=c.data;l[0]=0;for(var A=0,_=0;_<x;++_){var g=u[2*_];if(g!==A){for(l[2*A+1]=_;++A<g;)l[2*A]=_,l[2*A+1]=_;l[2*A]=_}}for(l[2*A+1]=x;++A<m;)l[2*A]=l[2*A+1]=x;return l}function d(c){for(var m=c.shape[0]|0,l=c.data,x=new Array(m),u=0;u<m;++u)x[u]=[l[2*u],l[2*u+1]];return x}function p(c,m,l,x){l=l||0,typeof x>"u"&&(x=t(c));var u=c.length;if(u===0||x<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=h(m,+l),_=i(c,x),g=s(_,m,A,+l),b=y(_,m.length|0),v=r(x)(c,_.data,b,A),C=d(_),S=[].slice.call(g.data,0,g.shape[0]);return a.free(A),a.free(_.data),a.free(g.data),a.free(b),{cells:v,vertexIds:C,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(f,M,T){M.exports=a;var e=[function(){function r(t,h,i,s){for(var y=t.length,d=[],p=0;p<y;++p){var c=t[p];c.length}return d}return r},function(){function r(h,i,s,y){for(var d=Math.min(s,y)|0,p=Math.max(s,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=i[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,i,s,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[1])]);break;case 2:p.push([r(s,i,m[1],m[0])]);break}}}return p}return t},function(){function r(h,i,s,y){for(var d=Math.min(s,y)|0,p=Math.max(s,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=i[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,i,s,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===3){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[2]),r(s,i,m[0],m[1])]);break;case 2:p.push([r(s,i,m[1],m[0]),r(s,i,m[1],m[2])]);break;case 3:p.push([r(s,i,m[0],m[2]),r(s,i,m[1],m[2])]);break;case 4:p.push([r(s,i,m[2],m[1]),r(s,i,m[2],m[0])]);break;case 5:p.push([r(s,i,m[2],m[1]),r(s,i,m[0],m[1])]);break;case 6:p.push([r(s,i,m[1],m[0]),r(s,i,m[2],m[0])]);break}}else if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[1])]);break;case 2:p.push([r(s,i,m[1],m[0])]);break}}}return p}return t},function(){function r(h,i,s,y){for(var d=Math.min(s,y)|0,p=Math.max(s,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=i[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,i,s,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===4){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2)+(y[m[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[1]),r(s,i,m[0],m[2]),r(s,i,m[0],m[3])]);break;case 2:p.push([r(s,i,m[1],m[2]),r(s,i,m[1],m[0]),r(s,i,m[1],m[3])]);break;case 3:p.push([r(s,i,m[1],m[2]),r(s,i,m[0],m[2]),r(s,i,m[0],m[3])],[r(s,i,m[1],m[3]),r(s,i,m[1],m[2]),r(s,i,m[0],m[3])]);break;case 4:p.push([r(s,i,m[2],m[0]),r(s,i,m[2],m[1]),r(s,i,m[2],m[3])]);break;case 5:p.push([r(s,i,m[0],m[1]),r(s,i,m[2],m[1]),r(s,i,m[0],m[3])],[r(s,i,m[2],m[1]),r(s,i,m[2],m[3]),r(s,i,m[0],m[3])]);break;case 6:p.push([r(s,i,m[2],m[0]),r(s,i,m[1],m[0]),r(s,i,m[1],m[3])],[r(s,i,m[2],m[3]),r(s,i,m[2],m[0]),r(s,i,m[1],m[3])]);break;case 7:p.push([r(s,i,m[0],m[3]),r(s,i,m[1],m[3]),r(s,i,m[2],m[3])]);break;case 8:p.push([r(s,i,m[3],m[1]),r(s,i,m[3],m[0]),r(s,i,m[3],m[2])]);break;case 9:p.push([r(s,i,m[3],m[1]),r(s,i,m[0],m[1]),r(s,i,m[0],m[2])],[r(s,i,m[3],m[2]),r(s,i,m[3],m[1]),r(s,i,m[0],m[2])]);break;case 10:p.push([r(s,i,m[1],m[0]),r(s,i,m[3],m[0]),r(s,i,m[1],m[2])],[r(s,i,m[3],m[0]),r(s,i,m[3],m[2]),r(s,i,m[1],m[2])]);break;case 11:p.push([r(s,i,m[1],m[2]),r(s,i,m[0],m[2]),r(s,i,m[3],m[2])]);break;case 12:p.push([r(s,i,m[3],m[0]),r(s,i,m[2],m[0]),r(s,i,m[2],m[1])],[r(s,i,m[3],m[1]),r(s,i,m[3],m[0]),r(s,i,m[2],m[1])]);break;case 13:p.push([r(s,i,m[0],m[1]),r(s,i,m[2],m[1]),r(s,i,m[3],m[1])]);break;case 14:p.push([r(s,i,m[2],m[0]),r(s,i,m[1],m[0]),r(s,i,m[3],m[0])]);break}}else if(l===3){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[2]),r(s,i,m[0],m[1])]);break;case 2:p.push([r(s,i,m[1],m[0]),r(s,i,m[1],m[2])]);break;case 3:p.push([r(s,i,m[0],m[2]),r(s,i,m[1],m[2])]);break;case 4:p.push([r(s,i,m[2],m[1]),r(s,i,m[2],m[0])]);break;case 5:p.push([r(s,i,m[2],m[1]),r(s,i,m[0],m[1])]);break;case 6:p.push([r(s,i,m[1],m[0]),r(s,i,m[2],m[0])]);break}}else if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(s,i,m[0],m[1])]);break;case 2:p.push([r(s,i,m[1],m[0])]);break}}}return p}return t}];function a(n){return e[n]()}},{}],293:[function(f,M,T){var e=f("bit-twiddle"),a=f("union-find");function n(g){for(var b=0,v=Math.max,C=0,S=g.length;C<S;++C)b=v(b,g[C].length);return b-1}T.dimension=n;function r(g){for(var b=-1,v=Math.max,C=0,S=g.length;C<S;++C)for(var k=g[C],E=0,F=k.length;E<F;++E)b=v(b,k[E]);return b+1}T.countVertices=r;function t(g){for(var b=new Array(g.length),v=0,C=g.length;v<C;++v)b[v]=g[v].slice(0);return b}T.cloneCells=t;function h(g,b){var v=g.length,C=g.length-b.length,S=Math.min;if(C)return C;switch(v){case 0:return 0;case 1:return g[0]-b[0];case 2:var D=g[0]+g[1]-b[0]-b[1];return D||S(g[0],g[1])-S(b[0],b[1]);case 3:var k=g[0]+g[1],E=b[0]+b[1];if(D=k+g[2]-(E+b[2]),D)return D;var F=S(g[0],g[1]),I=S(b[0],b[1]),D=S(F,g[2])-S(I,b[2]);return D||S(F+g[2],k)-S(I+b[2],E);default:var R=g.slice(0);R.sort();var O=b.slice(0);O.sort();for(var z=0;z<v;++z)if(C=R[z]-O[z],C)return C;return 0}}T.compareCells=h;function i(g,b){return h(g[0],b[0])}function s(g,b){if(b){for(var v=g.length,C=new Array(v),S=0;S<v;++S)C[S]=[g[S],b[S]];C.sort(i);for(var S=0;S<v;++S)g[S]=C[S][0],b[S]=C[S][1];return g}else return g.sort(h),g}T.normalize=s;function y(g){if(g.length===0)return[];for(var b=1,v=g.length,C=1;C<v;++C){var S=g[C];if(h(S,g[C-1])){if(C===b){b++;continue}g[b++]=S}}return g.length=b,g}T.unique=y;function d(g,b){for(var v=0,C=g.length-1,S=-1;v<=C;){var k=v+C>>1,E=h(g[k],b);E<=0?(E===0&&(S=k),v=k+1):E>0&&(C=k-1)}return S}T.findCell=d;function p(g,b){for(var v=new Array(g.length),C=0,S=v.length;C<S;++C)v[C]=[];for(var k=[],C=0,E=b.length;C<E;++C)for(var F=b[C],I=F.length,D=1,R=1<<I;D<R;++D){k.length=e.popCount(D);for(var O=0,z=0;z<I;++z)D&1<<z&&(k[O++]=F[z]);var B=d(g,k);if(!(B<0))for(;v[B++].push(C),!(B>=g.length||h(g[B],k)!==0););}return v}T.incidence=p;function c(g,b){if(!b)return p(y(l(g,0)),g);for(var v=new Array(b),C=0;C<b;++C)v[C]=[];for(var C=0,S=g.length;C<S;++C)for(var k=g[C],E=0,F=k.length;E<F;++E)v[k[E]].push(C);return v}T.dual=c;function m(g){for(var b=[],v=0,C=g.length;v<C;++v)for(var S=g[v],k=S.length|0,E=1,F=1<<k;E<F;++E){for(var I=[],D=0;D<k;++D)E>>>D&1&&I.push(S[D]);b.push(I)}return s(b)}T.explode=m;function l(g,b){if(b<0)return[];for(var v=[],C=(1<<b+1)-1,S=0;S<g.length;++S)for(var k=g[S],E=C;E<1<<k.length;E=e.nextCombination(E)){for(var F=new Array(b+1),I=0,D=0;D<k.length;++D)E&1<<D&&(F[I++]=k[D]);v.push(F)}return s(v)}T.skeleton=l;function x(g){for(var b=[],v=0,C=g.length;v<C;++v)for(var S=g[v],k=0,E=S.length;k<E;++k){for(var F=new Array(S.length-1),I=0,D=0;I<E;++I)I!==k&&(F[D++]=S[I]);b.push(F)}return s(b)}T.boundary=x;function u(g,b){for(var v=new a(b),C=0;C<g.length;++C)for(var S=g[C],k=0;k<S.length;++k)for(var E=k+1;E<S.length;++E)v.link(S[k],S[E]);for(var F=[],I=v.ranks,C=0;C<I.length;++C)I[C]=-1;for(var C=0;C<g.length;++C){var D=v.find(g[C][0]);I[D]<0?(I[D]=F.length,F.push([g[C].slice(0)])):F[I[D]].push(g[C].slice(0))}return F}function A(g){for(var b=y(s(l(g,0))),v=new a(b.length),C=0;C<g.length;++C)for(var S=g[C],k=0;k<S.length;++k)for(var E=d(b,[S[k]]),F=k+1;F<S.length;++F)v.link(E,d(b,[S[F]]));for(var I=[],D=v.ranks,C=0;C<D.length;++C)D[C]=-1;for(var C=0;C<g.length;++C){var R=v.find(d(b,[g[C][0]]));D[R]<0?(D[R]=I.length,I.push([g[C].slice(0)])):I[D[R]].push(g[C].slice(0))}return I}function _(g,b){return b?u(g,b):A(g)}T.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(f,M,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(f,M,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(f,M,T){M.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var n=this.roots;n[a]!==a;){var r=n[a];n[a]=n[r],a=r}return a},e.prototype.link=function(a,n){var r=this.find(a),t=this.find(n);if(r!==t){var h=this.ranks,i=this.roots,s=h[r],y=h[t];s<y?i[r]=t:y<s?i[t]=r:(i[t]=r,++h[r])}}},{}],297:[function(f,M,T){M.exports=r;var e=f("robust-orientation"),a=f("simplicial-complex");function n(t,h,i){var s=Math.abs(e(t,h,i)),y=Math.sqrt(Math.pow(h[0]-i[0],2)+Math.pow(h[1]-i[1],2));return s/y}function r(t,h,i){for(var s=h.length,y=t.length,d=new Array(s),p=new Array(s),c=new Array(s),m=new Array(s),l=0;l<s;++l)d[l]=p[l]=-1,c[l]=1/0,m[l]=!1;for(var l=0;l<y;++l){var x=t[l];if(x.length!==2)throw new Error("Input must be a graph");var u=x[1],A=x[0];p[A]!==-1?p[A]=-2:p[A]=u,d[u]!==-1?d[u]=-2:d[u]=A}function _(X){if(m[X])return 1/0;var j=d[X],re=p[X];return j<0||re<0?1/0:n(h[X],h[j],h[re])}function g(X,j){var re=I[X],ue=I[j];I[X]=ue,I[j]=re,D[re]=j,D[ue]=X}function b(X){return c[I[X]]}function v(X){return X&1?X-1>>1:(X>>1)-1}function C(X){for(var j=b(X);;){var re=j,ue=2*X+1,K=2*(X+1),te=X;if(ue<O){var Y=b(ue);Y<re&&(te=ue,re=Y)}if(K<O){var V=b(K);V<re&&(te=K)}if(te===X)return X;g(X,te),X=te}}function S(X){for(var j=b(X);X>0;){var re=v(X);if(re>=0){var ue=b(re);if(j<ue){g(X,re),X=re;continue}}return X}}function k(){if(O>0){var X=I[0];return g(0,O-1),O-=1,C(0),X}return-1}function E(X,j){var re=I[X];return c[re]===j?X:(c[re]=-1/0,S(X),k(),c[re]=j,O+=1,S(O-1))}function F(X){if(!m[X]){m[X]=!0;var j=d[X],re=p[X];d[re]>=0&&(d[re]=j),p[j]>=0&&(p[j]=re),D[j]>=0&&E(D[j],_(j)),D[re]>=0&&E(D[re],_(re))}}for(var I=[],D=new Array(s),l=0;l<s;++l){var R=c[l]=_(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)C(l);for(;;){var z=k();if(z<0||c[z]>i)break;F(z)}for(var B=[],l=0;l<s;++l)m[l]||(D[l]=B.length,B.push(h[l].slice()));B.length;function G(X,j){if(X[j]<0)return j;var re=j,ue=j;do{var K=X[ue];if(!m[ue]||K<0||K===ue||(ue=K,K=X[ue],!m[ue]||K<0||K===ue))break;ue=K,re=X[re]}while(re!==ue);for(var te=j;te!==ue;te=X[te])X[te]=ue;return ue}var Q=[];return t.forEach(function(X){var j=G(d,X[0]),re=G(p,X[1]);if(j>=0&&re>=0&&j!==re){var ue=D[j],K=D[re];ue!==K&&Q.push([ue,K])}}),a.unique(a.normalize(Q)),{positions:B,edges:Q}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(f,M,T){M.exports=n;var e=f("robust-orientation");function a(r,t){var h,i;if(t[0][0]<t[1][0])h=t[0],i=t[1];else if(t[0][0]>t[1][0])h=t[1],i=t[0];else{var s=Math.min(r[0][1],r[1][1]),y=Math.max(r[0][1],r[1][1]),d=Math.min(t[0][1],t[1][1]),p=Math.max(t[0][1],t[1][1]);return y<d?y-d:s>p?s-p:y-p}var c,m;r[0][1]<r[1][1]?(c=r[0],m=r[1]):(c=r[1],m=r[0]);var l=e(i,h,c);return l||(l=e(i,h,m),l)?l:m-i}function n(r,t){var h,i;if(t[0][0]<t[1][0])h=t[0],i=t[1];else if(t[0][0]>t[1][0])h=t[1],i=t[0];else return a(t,r);var s,y;if(r[0][0]<r[1][0])s=r[0],y=r[1];else if(r[0][0]>r[1][0])s=r[1],y=r[0];else return-a(r,t);var d=e(h,i,y),p=e(h,i,s);if(d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;if(d=e(y,s,i),p=e(y,s,h),d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;return i[0]-y[0]}},{"robust-orientation":284}],299:[function(f,M,T){M.exports=p;var e=f("binary-search-bounds"),a=f("functional-red-black-tree"),n=f("robust-orientation"),r=f("./lib/order-segments");function t(c,m,l){this.slabs=c,this.coordinates=m,this.horizontal=l}var h=t.prototype;function i(c,m){return c.y-m}function s(c,m){for(var l=null;c;){var x=c.key,u,A;x[0][0]<x[1][0]?(u=x[0],A=x[1]):(u=x[1],A=x[0]);var _=n(u,A,m);if(_<0)c=c.left;else if(_>0)if(m[0]!==x[1][0])l=c,c=c.right;else{var g=s(c.right,m);if(g)return g;c=c.left}else{if(m[0]!==x[1][0])return c;var g=s(c.right,m);if(g)return g;c=c.left}}return l}h.castUp=function(c){var m=e.le(this.coordinates,c[0]);if(m<0)return-1;this.slabs[m];var l=s(this.slabs[m],c),x=-1;if(l&&(x=l.value),this.coordinates[m]===c[0]){var u=null;if(l&&(u=l.key),m>0){var A=s(this.slabs[m-1],c);A&&(u?r(A.key,u)>0&&(u=A.key,x=A.value):(x=A.value,u=A.key))}var _=this.horizontal[m];if(_.length>0){var g=e.ge(_,c[1],i);if(g<_.length){var b=_[g];if(c[1]===b.y){if(b.closed)return b.index;for(;g<_.length-1&&_[g+1].y===c[1];)if(g=g+1,b=_[g],b.closed)return b.index;if(b.y===c[1]&&!b.start){if(g=g+1,g>=_.length)return x;b=_[g]}}if(b.start)if(u){var v=n(u[0],u[1],[c[0],b.y]);u[0][0]>u[1][0]&&(v=-v),v>0&&(x=b.index)}else x=b.index;else b.y!==c[1]&&(x=b.index)}}}return x};function y(c,m,l,x){this.y=c,this.index=m,this.start=l,this.closed=x}function d(c,m,l,x){this.x=c,this.segment=m,this.create=l,this.index=x}function p(c){for(var m=c.length,l=2*m,x=new Array(l),u=0;u<m;++u){var A=c[u],_=A[0][0]<A[1][0];x[2*u]=new d(A[0][0],A,_,u),x[2*u+1]=new d(A[1][0],A,!_,u)}x.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var g=a(r),b=[],v=[],C=[],u=0;u<l;){for(var S=x[u].x,k=[];u<l;){var E=x[u];if(E.x!==S)break;u+=1,E.segment[0][0]===E.x&&E.segment[1][0]===E.x?E.create&&(E.segment[0][1]<E.segment[1][1]?(k.push(new y(E.segment[0][1],E.index,!0,!0)),k.push(new y(E.segment[1][1],E.index,!1,!1))):(k.push(new y(E.segment[1][1],E.index,!0,!1)),k.push(new y(E.segment[0][1],E.index,!1,!0)))):E.create?g=g.insert(E.segment,E.index):g=g.remove(E.segment)}b.push(g.root),v.push(S),C.push(k)}return new t(b,v,C)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(f,M,T){var e=f("robust-dot-product"),a=f("robust-sum");M.exports=t,M.exports.positive=h,M.exports.negative=i;function n(s,y){var d=a(e(s,y),[y[y.length-1]]);return d[d.length-1]}function r(s,y,d,p){var c=p-y,m=-y/c;m<0?m=0:m>1&&(m=1);for(var l=1-m,x=s.length,u=new Array(x),A=0;A<x;++A)u[A]=m*s[A]+l*d[A];return u}function t(s,y){for(var d=[],p=[],c=n(s[s.length-1],y),m=s[s.length-1],l=s[0],x=0;x<s.length;++x,m=l){l=s[x];var u=n(l,y);if(c<0&&u>0||c>0&&u<0){var A=r(m,u,l,c);d.push(A),p.push(A.slice())}u<0?p.push(l.slice()):u>0?d.push(l.slice()):(d.push(l.slice()),p.push(l.slice())),c=u}return{positive:d,negative:p}}function h(s,y){for(var d=[],p=n(s[s.length-1],y),c=s[s.length-1],m=s[0],l=0;l<s.length;++l,c=m){m=s[l];var x=n(m,y);(p<0&&x>0||p>0&&x<0)&&d.push(r(c,x,m,p)),x>=0&&d.push(m.slice()),p=x}return d}function i(s,y){for(var d=[],p=n(s[s.length-1],y),c=s[s.length-1],m=s[0],l=0;l<s.length;++l,c=m){m=s[l];var x=n(m,y);(p<0&&x>0||p>0&&x<0)&&d.push(r(c,x,m,p)),x<=0&&d.push(m.slice()),p=x}return d}},{"robust-dot-product":281,"robust-sum":289}],301:[function(f,M,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(i){return r(h(i),arguments)}function n(i,s){return a.apply(null,[i].concat(s||[]))}function r(i,s){var y=1,d=i.length,p,c="",m,l,x,u,A,_,g,b;for(m=0;m<d;m++)if(typeof i[m]=="string")c+=i[m];else if(typeof i[m]=="object"){if(x=i[m],x.keys)for(p=s[y],l=0;l<x.keys.length;l++){if(p==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[l],x.keys[l-1]));p=p[x.keys[l]]}else x.param_no?p=s[x.param_no]:p=s[y++];if(e.not_type.test(x.type)&&e.not_primitive.test(x.type)&&p instanceof Function&&(p=p()),e.numeric_arg.test(x.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(a("[sprintf] expecting number but found %T",p));switch(e.number.test(x.type)&&(g=p>=0),x.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,x.width?parseInt(x.width):0);break;case"e":p=x.precision?parseFloat(p).toExponential(x.precision):parseFloat(p).toExponential();break;case"f":p=x.precision?parseFloat(p).toFixed(x.precision):parseFloat(p);break;case"g":p=x.precision?String(Number(p.toPrecision(x.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=x.precision?p.substring(0,x.precision):p;break;case"t":p=String(!!p),p=x.precision?p.substring(0,x.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=x.precision?p.substring(0,x.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=x.precision?p.substring(0,x.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}e.json.test(x.type)?c+=p:(e.number.test(x.type)&&(!g||x.sign)?(b=g?"+":"-",p=p.toString().replace(e.sign,"")):b="",A=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",_=x.width-(b+p).length,u=x.width&&_>0?A.repeat(_):"",c+=x.align?b+p+u:A==="0"?b+u+p:u+b+p)}return c}var t=Object.create(null);function h(i){if(t[i])return t[i];for(var s=i,y,d=[],p=0;s;){if((y=e.text.exec(s))!==null)d.push(y[0]);else if((y=e.modulo.exec(s))!==null)d.push("%");else if((y=e.placeholder.exec(s))!==null){if(y[2]){p|=1;var c=[],m=y[2],l=[];if((l=e.key.exec(m))!==null)for(c.push(l[1]);(m=m.substring(l[0].length))!=="";)if((l=e.key_access.exec(m))!==null)c.push(l[1]);else if((l=e.index_access.exec(m))!==null)c.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");y[2]=c}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");s=s.substring(y[0].length)}return t[i]=d}typeof T<"u"&&(T.sprintf=a,T.vsprintf=n),typeof window<"u"&&(window.sprintf=a,window.vsprintf=n)})()},{}],302:[function(f,M,T){M.exports=i;var e=f("ndarray-extract-contour"),a=f("zero-crossings"),n={"2d":function(s,y,d){var p=s({order:y,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(m,l,x,u){return m>u|0},vertex:function(m,l,x,u,A,_,g,b,v,C,S,k,E){var F=(g<<0)+(b<<1)+(v<<2)+(C<<3)|0;if(!(F===0||F===15))switch(F){case 0:S.push([m-.5,l-.5]);break;case 1:S.push([m-.25-.25*(u+x-2*E)/(x-u),l-.25-.25*(A+x-2*E)/(x-A)]);break;case 2:S.push([m-.75-.25*(-u-x+2*E)/(u-x),l-.25-.25*(_+u-2*E)/(u-_)]);break;case 3:S.push([m-.5,l-.5-.5*(A+x+_+u-4*E)/(x-A+u-_)]);break;case 4:S.push([m-.25-.25*(_+A-2*E)/(A-_),l-.75-.25*(-A-x+2*E)/(A-x)]);break;case 5:S.push([m-.5-.5*(u+x+_+A-4*E)/(x-u+A-_),l-.5]);break;case 6:S.push([m-.5-.25*(-u-x+_+A)/(u-x+A-_),l-.5-.25*(-A-x+_+u)/(A-x+u-_)]);break;case 7:S.push([m-.75-.25*(_+A-2*E)/(A-_),l-.75-.25*(_+u-2*E)/(u-_)]);break;case 8:S.push([m-.75-.25*(-_-A+2*E)/(_-A),l-.75-.25*(-_-u+2*E)/(_-u)]);break;case 9:S.push([m-.5-.25*(u+x+-_-A)/(x-u+_-A),l-.5-.25*(A+x+-_-u)/(x-A+_-u)]);break;case 10:S.push([m-.5-.5*(-u-x+-_-A+4*E)/(u-x+_-A),l-.5]);break;case 11:S.push([m-.25-.25*(-_-A+2*E)/(_-A),l-.75-.25*(A+x-2*E)/(x-A)]);break;case 12:S.push([m-.5,l-.5-.5*(-A-x+-_-u+4*E)/(A-x+_-u)]);break;case 13:S.push([m-.75-.25*(u+x-2*E)/(x-u),l-.25-.25*(-_-u+2*E)/(_-u)]);break;case 14:S.push([m-.25-.25*(-u-x+2*E)/(u-x),l-.25-.25*(-A-x+2*E)/(A-x)]);break;case 15:S.push([m-.5,l-.5]);break}},cell:function(m,l,x,u,A,_,g,b,v){A?b.push([m,l]):b.push([l,m])}});return function(c,m){var l=[],x=[];return p(c,l,x,m),{positions:l,cells:x}}}};function r(s,y){var d=s.length+"d",p=n[d];if(p)return p(e,s,y)}function t(s,y){for(var d=a(s,y),p=d.length,c=new Array(p),m=new Array(p),l=0;l<p;++l)c[l]=[d[l]],m[l]=[l];return{positions:c,cells:m}}var h={};function i(s,c){if(s.dimension<=0)return{positions:[],cells:[]};if(s.dimension===1)return t(s,c);var d=s.order.join()+"-"+s.dtype,p=h[d],c=+c||0;return p||(p=h[d]=r(s.order,s.dtype)),p(s,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(f,M,T){(function(e){(function(){M.exports=h;var a=f("vectorize-text"),n=window||e.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};function t(i){for(var s=i.cells,y=i.positions,d=new Float32Array(s.length*6),p=0,c=0,m=0;m<s.length;++m)for(var l=s[m],x=0;x<3;++x){var u=y[l[x]];d[p++]=u[0],d[p++]=u[1]+1.4,c=Math.max(u[0],c)}return{data:d,shape:c}}function h(i,s,d){var d=d||{},p=r[i];p||(p=r[i]={" ":{data:new Float32Array(0),shape:.2}});var c=p[s];if(!c)if(s.length<=1||!/\d/.test(s))c=p[s]=t(a(s,{triangles:!0,font:i,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=s.split(/(\d|\s)/),l=new Array(m.length),x=0,u=0,A=0;A<m.length;++A)l[A]=h(i,m[A]),x+=l[A].data.length,u+=l[A].shape,A>0&&(u+=.02);for(var _=new Float32Array(x),g=0,b=-.5*u,A=0;A<l.length;++A){for(var v=l[A].data,C=0;C<v.length;C+=2)_[g++]=v[C]+b,_[g++]=v[C+1];b+=l[A].shape+.02}c=p[s]={data:_,shape:u}}return c}}).call(this)}).call(this,f("_process"))},{_process:5,"vectorize-text":311}],304:[function(f,M,T){var e=f("parse-unit");M.exports=t;var a=96;function n(h,i){var s=e(getComputedStyle(h).getPropertyValue(i));return s[0]*t(s[1],h)}function r(h,i){var s=document.createElement("div");s.style["font-size"]="128"+h,i.appendChild(s);var y=n(s,"font-size")/128;return i.removeChild(s),y}function t(h,i){switch(i=i||document.body,h=(h||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),h){case"%":return i.clientHeight/100;case"ch":case"ex":return r(h,i);case"em":return n(i,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(f,M,T){M.exports=m;var e=f("filtered-vector"),a=f("gl-mat4/invert"),n=f("gl-mat4/rotate"),r=f("gl-vec3/cross"),t=f("gl-vec3/normalize"),h=f("gl-vec3/dot");function i(l,x,u){return Math.sqrt(Math.pow(l,2)+Math.pow(x,2)+Math.pow(u,2))}function s(l){return Math.min(1,Math.max(-1,l))}function y(l){var x=Math.abs(l[0]),u=Math.abs(l[1]),A=Math.abs(l[2]),_=[0,0,0];x>Math.max(u,A)?_[2]=1:u>Math.max(x,A)?_[0]=1:_[1]=1;for(var g=0,b=0,v=0;v<3;++v)g+=l[v]*l[v],b+=_[v]*l[v];for(var v=0;v<3;++v)_[v]-=b/g*l[v];return t(_,_),_}function d(l,x,u,A,_,g,b,v){this.center=e(u),this.up=e(A),this.right=e(_),this.radius=e([g]),this.angle=e([b,v]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var p=d.prototype;p.setDistanceLimits=function(l,x){l>0?l=Math.log(l):l=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=x},p.getDistanceLimits=function(l){var x=this.radius.bounds[0];return l?(l[0]=Math.exp(x[0][0]),l[1]=Math.exp(x[1][0]),l):[Math.exp(x[0][0]),Math.exp(x[1][0])]},p.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var x=this.computedUp,u=this.computedRight,A=0,_=0,g=0;g<3;++g)_+=x[g]*u[g],A+=x[g]*x[g];for(var b=Math.sqrt(A),v=0,g=0;g<3;++g)u[g]-=x[g]*_/A,v+=u[g]*u[g],x[g]/=b;for(var C=Math.sqrt(v),g=0;g<3;++g)u[g]/=C;var S=this.computedToward;r(S,x,u),t(S,S);for(var k=Math.exp(this.computedRadius[0]),E=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(E),D=Math.sin(E),R=Math.cos(F),O=Math.sin(F),z=this.computedCenter,B=I*R,G=D*R,Q=O,X=-I*O,j=-D*O,re=R,ue=this.computedEye,K=this.computedMatrix,g=0;g<3;++g){var te=B*u[g]+G*S[g]+Q*x[g];K[4*g+1]=X*u[g]+j*S[g]+re*x[g],K[4*g+2]=te,K[4*g+3]=0}var Y=K[1],V=K[5],ee=K[9],ne=K[2],Z=K[6],q=K[10],ie=V*q-ee*Z,se=ee*ne-Y*q,ae=Y*Z-V*ne,oe=i(ie,se,ae);ie/=oe,se/=oe,ae/=oe,K[0]=ie,K[4]=se,K[8]=ae;for(var g=0;g<3;++g)ue[g]=z[g]+K[2+4*g]*k;for(var g=0;g<3;++g){for(var v=0,be=0;be<3;++be)v+=K[g+4*be]*ue[be];K[12+g]=-v}K[15]=1},p.getMatrix=function(l,x){this.recalcMatrix(l);var u=this.computedMatrix;if(x){for(var A=0;A<16;++A)x[A]=u[A];return x}return u};var c=[0,0,0];p.rotate=function(l,x,u,A){if(this.angle.move(l,x,u),A){this.recalcMatrix(l);var _=this.computedMatrix;c[0]=_[2],c[1]=_[6],c[2]=_[10];for(var g=this.computedUp,b=this.computedRight,v=this.computedToward,C=0;C<3;++C)_[4*C]=g[C],_[4*C+1]=b[C],_[4*C+2]=v[C];n(_,_,A,c);for(var C=0;C<3;++C)g[C]=_[4*C],b[C]=_[4*C+1];this.up.set(l,g[0],g[1],g[2]),this.right.set(l,b[0],b[1],b[2])}},p.pan=function(l,x,u,A){x=x||0,u=u||0,A=A||0,this.recalcMatrix(l);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var g=_[1],b=_[5],v=_[9],C=i(g,b,v);g/=C,b/=C,v/=C;var S=_[0],k=_[4],E=_[8],F=S*g+k*b+E*v;S-=g*F,k-=b*F,E-=v*F;var I=i(S,k,E);S/=I,k/=I,E/=I;var D=S*x+g*u,R=k*x+b*u,O=E*x+v*u;this.center.move(l,D,R,O);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+A),this.radius.set(l,Math.log(z))},p.translate=function(l,x,u,A){this.center.move(l,x||0,u||0,A||0)},p.setMatrix=function(l,x,u,A){var _=1;typeof u=="number"&&(_=u|0),(_<0||_>3)&&(_=1);var g=(_+2)%3;x||(this.recalcMatrix(l),x=this.computedMatrix);var b=x[_],v=x[_+4],C=x[_+8];if(A){var k=Math.abs(b),E=Math.abs(v),F=Math.abs(C),I=Math.max(k,E,F);k===I?(b=b<0?-1:1,v=C=0):F===I?(C=C<0?-1:1,b=v=0):(v=v<0?-1:1,b=C=0)}else{var S=i(b,v,C);b/=S,v/=S,C/=S}var D=x[g],R=x[g+4],O=x[g+8],z=D*b+R*v+O*C;D-=b*z,R-=v*z,O-=C*z;var B=i(D,R,O);D/=B,R/=B,O/=B;var G=v*O-C*R,Q=C*D-b*O,X=b*R-v*D,j=i(G,Q,X);G/=j,Q/=j,X/=j,this.center.jump(l,ge,me,Me),this.radius.idle(l),this.up.jump(l,b,v,C),this.right.jump(l,D,R,O);var re,ue;if(_===2){var K=x[1],te=x[5],Y=x[9],V=K*D+te*R+Y*O,ee=K*G+te*Q+Y*X;ie<0?re=-Math.PI/2:re=Math.PI/2,ue=Math.atan2(ee,V)}else{var ne=x[2],Z=x[6],q=x[10],ie=ne*b+Z*v+q*C,se=ne*D+Z*R+q*O,ae=ne*G+Z*Q+q*X;re=Math.asin(s(ie)),ue=Math.atan2(ae,se)}this.angle.jump(l,ue,re),this.recalcMatrix(l);var oe=x[2],be=x[6],ce=x[10],de=this.computedMatrix;a(de,x);var ye=de[15],ge=de[12]/ye,me=de[13]/ye,Me=de[14]/ye,Le=Math.exp(this.computedRadius[0]);this.center.jump(l,ge-oe*Le,me-be*Le,Me-ce*Le)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},p.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},p.setDistance=function(l,x){x>0&&this.radius.set(l,Math.log(x))},p.lookAt=function(l,x,u,A){this.recalcMatrix(l),x=x||this.computedEye,u=u||this.computedCenter,A=A||this.computedUp;var _=A[0],g=A[1],b=A[2],v=i(_,g,b);if(!(v<1e-6)){_/=v,g/=v,b/=v;var C=x[0]-u[0],S=x[1]-u[1],k=x[2]-u[2],E=i(C,S,k);if(!(E<1e-6)){C/=E,S/=E,k/=E;var F=this.computedRight,I=F[0],D=F[1],R=F[2],O=_*I+g*D+b*R;I-=O*_,D-=O*g,R-=O*b;var z=i(I,D,R);if(!(z<.01&&(I=g*k-b*S,D=b*C-_*k,R=_*S-g*C,z=i(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,_,g,b),this.right.set(l,I,D,R),this.center.set(l,u[0],u[1],u[2]),this.radius.set(l,Math.log(E));var B=g*R-b*D,G=b*I-_*R,Q=_*D-g*I,X=i(B,G,Q);B/=X,G/=X,Q/=X;var j=_*C+g*S+b*k,re=I*C+D*S+R*k,ue=B*C+G*S+Q*k,K=Math.asin(s(j)),te=Math.atan2(ue,re),Y=this.angle._state,V=Y[Y.length-1],ee=Y[Y.length-2];V=V%(2*Math.PI);var ne=Math.abs(V+2*Math.PI-te),Z=Math.abs(V-te),q=Math.abs(V-2*Math.PI-te);ne<Z&&(V+=2*Math.PI),q<Z&&(V-=2*Math.PI),this.angle.jump(this.angle.lastT(),V,ee),this.angle.set(l,te,K)}}}};function m(l){l=l||{};var x=l.center||[0,0,0],u=l.up||[0,1,0],A=l.right||y(u),_=l.radius||1,g=l.theta||0,b=l.phi||0;if(x=[].slice.call(x,0,3),u=[].slice.call(u,0,3),t(u,u),A=[].slice.call(A,0,3),t(A,A),"eye"in l){var v=l.eye,C=[v[0]-x[0],v[1]-x[1],v[2]-x[2]];r(A,C,u),i(A[0],A[1],A[2])<1e-6?A=y(u):t(A,A),_=i(C[0],C[1],C[2]);var S=h(u,C)/_,k=h(A,C)/_;b=Math.acos(S),g=Math.acos(k)}return _=Math.log(_),new d(l.zoomMin,l.zoomMax,x,u,A,_,g,b)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(f,M,T){M.exports=a;var e=+(Math.pow(2,27)+1);function a(n,r,t){var h=n*r,i=e*n,s=i-n,y=i-s,d=n-y,p=e*r,c=p-r,m=p-c,l=r-m,x=h-y*m,u=x-d*m,A=u-y*l,_=d*l-A;return t?(t[0]=_,t[1]=h,t):[_,h]}},{}],307:[function(f,M,T){M.exports=e;function e(a,n,r){var t=a+n,h=t-a,i=t-h,s=n-h,y=a-i;return r?(r[0]=y+s,r[1]=t,r):[y+s,t]}},{}],308:[function(f,M,T){(function(e){(function(){var a=f("bit-twiddle"),n=f("dup"),r=f("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var t=typeof Uint8ClampedArray<"u",h=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=n([32,0])),s.BIGUINT64||(s.BIGUINT64=n([32,0])),s.BIGINT64||(s.BIGINT64=n([32,0])),s.BUFFER||(s.BUFFER=n([32,0]));var y=s.DATA,d=s.BUFFER;T.free=function(D){if(r.isBuffer(D))d[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;y[O].push(D)}};function p(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);y[R].push(I)}}function c(I){p(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=c,T.freeArrayBuffer=p,T.freeBuffer=function(D){d[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return m(D);switch(R){case"uint8":return l(D);case"uint16":return x(D);case"uint32":return u(D);case"int8":return A(D);case"int16":return _(D);case"int32":return g(D);case"float":case"float32":return b(D);case"double":case"float64":return v(D);case"uint8_clamped":return C(D);case"bigint64":return k(D);case"biguint64":return S(D);case"buffer":return F(D);case"data":case"dataview":return E(D);default:return null}return null};function m(D){var D=a.nextPow2(D),R=a.log2(D),O=y[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=m;function l(I){return new Uint8Array(m(I),0,I)}T.mallocUint8=l;function x(I){return new Uint16Array(m(2*I),0,I)}T.mallocUint16=x;function u(I){return new Uint32Array(m(4*I),0,I)}T.mallocUint32=u;function A(I){return new Int8Array(m(I),0,I)}T.mallocInt8=A;function _(I){return new Int16Array(m(2*I),0,I)}T.mallocInt16=_;function g(I){return new Int32Array(m(4*I),0,I)}T.mallocInt32=g;function b(I){return new Float32Array(m(4*I),0,I)}T.mallocFloat32=T.mallocFloat=b;function v(I){return new Float64Array(m(8*I),0,I)}T.mallocFloat64=T.mallocDouble=v;function C(I){return t?new Uint8ClampedArray(m(I),0,I):l(I)}T.mallocUint8Clamped=C;function S(I){return h?new BigUint64Array(m(8*I),0,I):null}T.mallocBigUint64=S;function k(I){return i?new BigInt64Array(m(8*I),0,I):null}T.mallocBigInt64=k;function E(I){return new DataView(m(I),0,I)}T.mallocDataView=E;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=d[D];return R.length>0?R.pop():new r(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)s.UINT8[D].length=0,s.UINT16[D].length=0,s.UINT32[D].length=0,s.INT8[D].length=0,s.INT16[D].length=0,s.INT32[D].length=0,s.FLOAT[D].length=0,s.DOUBLE[D].length=0,s.BIGUINT64[D].length=0,s.BIGINT64[D].length=0,s.UINT8C[D].length=0,y[D].length=0,d[D].length=0}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(f,M,T){M.exports=e;function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var r=0;r<n;++r)this.roots[r]=r,this.ranks[r]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},a.find=function(n){for(var r=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[r]!==n;){var h=t[r];t[r]=n,r=h}return n},a.link=function(n,r){var t=this.find(n),h=this.find(r);if(t!==h){var i=this.ranks,s=this.roots,y=i[t],d=i[h];y<d?s[t]=h:d<y?s[h]=t:(s[h]=t,++i[t])}}},{}],310:[function(f,M,T){function e(r,t){for(var h=1,i=r.length,s=r[0],y=r[0],d=1;d<i;++d)if(y=s,s=r[d],t(s,y)){if(d===h){h++;continue}r[h++]=s}return r.length=h,r}function a(r){for(var t=1,h=r.length,i=r[0],s=r[0],y=1;y<h;++y,s=i)if(s=i,i=r[y],i!==s){if(y===t){t++;continue}r[t++]=i}return r.length=t,r}function n(r,t,h){return r.length===0?r:t?(h||r.sort(t),e(r,t)):(h||r.sort(),a(r))}M.exports=n},{}],311:[function(f,M,T){M.exports=r;var e=f("./lib/vtext"),a=null,n=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,n=a.getContext("2d"));function r(t,h){return(typeof h!="object"||h===null)&&(h={}),e(t,h.canvas||a,h.context||n,h)}},{"./lib/vtext":312}],312:[function(f,M,T){M.exports=S,M.exports.processPixels=C;var e=f("surface-nets"),a=f("ndarray"),n=f("simplify-planar-graph"),r=f("clean-pslg"),t=f("cdt2d"),h=f("planar-graph-to-polyline"),i="b",s="b|",y="i",d="i|",p="sup",c="+",m="+1",l="sub",x="-",u="-1";function A(k,E,F,I){for(var D="<"+k+">",R="</"+k+">",O=D.length,z=R.length,B=E[0]===c||E[0]===x,G=0,Q=-z;G>-1&&(G=F.indexOf(D,G),!(G===-1||(Q=F.indexOf(R,G+O),Q===-1)||Q<=G));){for(var X=G;X<Q+z;++X)if(X<G+O||X>=Q)I[X]=null,F=F.substr(0,X)+" "+F.substr(X+1);else if(I[X]!==null){var j=I[X].indexOf(E[0]);j===-1?I[X]+=E:B&&(I[X]=I[X].substr(0,j+1)+(1+parseInt(I[X][j+1]))+I[X].substr(j+2))}var re=G+O,ue=F.substr(re,Q-re),K=ue.indexOf(D);K!==-1?G=K:G=Q+z}return I}function _(k,E,F){for(var I=E.textAlign||"start",D=E.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],z=k.length,B=0;B<z;++B)for(var G=k[B],Q=0;Q<2;++Q)R[Q]=Math.min(R[Q],G[Q])|0,O[Q]=Math.max(O[Q],G[Q])|0;var X=0;switch(I){case"center":X=-.5*(R[0]+O[0]);break;case"right":case"end":X=-O[0];break;case"left":case"start":X=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var j=0;switch(D){case"hanging":case"top":j=-R[1];break;case"middle":j=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":j=-3*F;break;case"bottom":j=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var re=1/F;return"lineHeight"in E?re*=+E.lineHeight:"width"in E?re=E.width/(O[0]-R[0]):"height"in E&&(re=E.height/(O[1]-R[1])),k.map(function(ue){return[re*(ue[0]+X),re*(ue[1]+j)]})}function g(k,E,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var O="",z=[];for(V=0;V<F.length;++V)z[V]=O;R.bolds===!0&&(z=A(i,s,F,z)),R.italics===!0&&(z=A(y,d,F,z)),R.superscripts===!0&&(z=A(p,m,F,z)),R.subscripts===!0&&(z=A(l,u,F,z));var B=[],G="";for(V=0;V<F.length;++V)z[V]!==null&&(G+=F[V],B.push(z[V]));var Q=G.split(`
`),X=Q.length,j=Math.round(D*I),re=I,ue=I*2,K=0,te=X*j+ue;k.height<te&&(k.height=te),E.fillStyle="#000",E.fillRect(0,0,k.width,k.height),E.fillStyle="#fff";var Y,V,ee,ne,Z,q=0,ie="";function se(){if(ie!==""){var Me=E.measureText(ie).width;E.fillText(ie,re+ee,ue+ne),ee+=Me}}function ae(){return""+Math.round(Z)+"px "}function oe(Me,Le){var Oe=""+E.font;if(R.subscripts===!0){var _e=Me.indexOf(x),Ee=Le.indexOf(x),Ze=_e>-1?parseInt(Me[1+_e]):0,Ge=Ee>-1?parseInt(Le[1+Ee]):0;Ze!==Ge&&(Oe=Oe.replace(ae(),"?px "),Z*=Math.pow(.75,Ge-Ze),Oe=Oe.replace("?px ",ae())),ne+=.25*j*(Ge-Ze)}if(R.superscripts===!0){var Fe=Me.indexOf(c),Re=Le.indexOf(c),We=Fe>-1?parseInt(Me[1+Fe]):0,xt=Re>-1?parseInt(Le[1+Re]):0;We!==xt&&(Oe=Oe.replace(ae(),"?px "),Z*=Math.pow(.75,xt-We),Oe=Oe.replace("?px ",ae())),ne-=.25*j*(xt-We)}if(R.bolds===!0){var Nt=Me.indexOf(s)>-1,tr=Le.indexOf(s)>-1;!Nt&&tr&&(Vt?Oe=Oe.replace("italic ","italic bold "):Oe="bold "+Oe),Nt&&!tr&&(Oe=Oe.replace("bold ",""))}if(R.italics===!0){var Vt=Me.indexOf(d)>-1,Pt=Le.indexOf(d)>-1;!Vt&&Pt&&(Oe="italic "+Oe),Vt&&!Pt&&(Oe=Oe.replace("italic ",""))}E.font=Oe}for(Y=0;Y<X;++Y){var be=Q[Y]+`
`;for(ee=0,ne=Y*j,Z=I,ie="",V=0;V<be.length;++V){var ce=V+q<B.length?B[V+q]:B[B.length-1];O===ce?ie+=be[V]:(se(),ie=be[V],ce!==void 0&&(oe(O,ce),O=ce))}se(),q+=be.length;var de=Math.round(ee+2*re)|0;K<de&&(K=de)}var ye=K,ge=ue+j*X,me=a(E.getImageData(0,0,ye,ge).data,[ge,ye,4]);return me.pick(-1,-1,0).transpose(1,0)}function b(k,E){var F=e(k,128);return E?n(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function v(k,E,F,I){var D=b(k,I),R=_(D.positions,E,F),O=D.edges,z=E.orientation==="ccw";if(r(R,O),E.polygons||E.polygon||E.polyline){for(var B=h(O,R),G=new Array(B.length),Q=0;Q<B.length;++Q){for(var X=B[Q],j=new Array(X.length),re=0;re<X.length;++re){for(var ue=X[re],K=new Array(ue.length),te=0;te<ue.length;++te)K[te]=R[ue[te]].slice();z&&K.reverse(),j[re]=K}G[Q]=j}return G}else return E.triangles||E.triangulate||E.triangle?{cells:t(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function C(k,E,F){try{return v(k,E,F,!0)}catch{}try{return v(k,E,F,!1)}catch{}return E.polygons||E.polyline||E.polygon?[]:E.triangles||E.triangulate||E.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,E,F,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(B){return B}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=g(E,F,k,D,R,O);return C(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(f,M,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(C){C.permitHostObjects___&&C.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var n=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new r,h=Object.freeze({});if(t.set(h,1),t.get(h)!==1)n=!0;else{M.exports=WeakMap;return}}}var i=Object.getOwnPropertyNames,s=Object.defineProperty,y=Object.isExtensible,d="weakmap:",p=d+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),m=new Uint8Array(c);crypto.getRandomValues(m),p=d+"rand:"+Array.prototype.map.call(m,function(C){return(C%36).toString(36)}).join("")+"___"}function l(C){return!(C.substr(0,d.length)==d&&C.substr(C.length-3)==="___")}if(s(Object,"getOwnPropertyNames",{value:function(S){return i(S).filter(l)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(S){return x(S).filter(l)}})}function u(C){if(C!==Object(C))throw new TypeError("Not an object: "+C);var S=C[p];if(S&&S.key===C)return S;if(!!y(C)){S={key:C};try{return s(C,p,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var C=Object.freeze;s(Object,"freeze",{value:function(F){return u(F),C(F)}});var S=Object.seal;s(Object,"seal",{value:function(F){return u(F),S(F)}});var k=Object.preventExtensions;s(Object,"preventExtensions",{value:function(F){return u(F),k(F)}})})();function A(C){return C.prototype=null,Object.freeze(C)}var _=!1;function g(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var b=0,v=function(){this instanceof v||g();var C=[],S=[],k=b++;function E(R,O){var z,B=u(R);return B?k in B?B[k]:O:(z=C.indexOf(R),z>=0?S[z]:O)}function F(R){var O=u(R);return O?k in O:C.indexOf(R)>=0}function I(R,O){var z,B=u(R);return B?B[k]=O:(z=C.indexOf(R),z>=0?S[z]=O:(z=C.length,S[z]=O,C[z]=R)),this}function D(R){var O=u(R),z,B;return O?k in O&&delete O[k]:(z=C.indexOf(R),z<0?!1:(B=C.length-1,C[z]=void 0,S[z]=S[B],C[z]=C[B],C.length=B,S.length=B,!0))}return Object.create(v.prototype,{get___:{value:A(E)},has___:{value:A(F)},set___:{value:A(I)},delete___:{value:A(D)}})};v.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){n&&typeof Proxy<"u"&&(Proxy=void 0);function C(){this instanceof v||g();var S=new r,k=void 0,E=!1;function F(O,z){return k?S.has(O)?S.get(O):k.get___(O,z):S.get(O,z)}function I(O){return S.has(O)||(k?k.has___(O):!1)}var D;n?D=function(O,z){return S.set(O,z),S.has(O)||(k||(k=new v),k.set(O,z)),this}:D=function(O,z){if(E)try{S.set(O,z)}catch{k||(k=new v),k.set___(O,z)}else S.set(O,z);return this};function R(O){var z=!!S.delete(O);return k&&k.delete___(O)||z}return Object.create(v.prototype,{get___:{value:A(F)},has___:{value:A(I)},set___:{value:A(D)},delete___:{value:A(R)},permitHostObjects___:{value:A(function(O){if(O===a)E=!0;else throw new Error("bogus call to permitHostObjects___")})}})}C.prototype=v.prototype,M.exports=C,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),M.exports=v)})()},{}],314:[function(f,M,T){var e=f("./hidden-store.js");M.exports=a;function a(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var t=r.valueOf(n);return t&&t.identity===n?t:e(r,n)}}},{"./hidden-store.js":315}],315:[function(f,M,T){M.exports=e;function e(a,n){var r={identity:n},t=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(h){return h!==n?t.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(f,M,T){var e=f("./create-store.js");M.exports=a;function a(){var n=e();return{get:function(r,t){var h=n(r);return h.hasOwnProperty("value")?h.value:t},set:function(r,t){return n(r).value=t,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},{"./create-store.js":314}],317:[function(f,M,T){function e(){return function(i,s,y,d,p,c){var m=i[0],l=y[0],x=[0],u=l;d|=0;var A=0,_=l;for(A=0;A<m;++A){{var g=s[d]-c,b=s[d+u]-c;g>=0!=b>=0&&p.push(x[0]+.5+.5*(g+b)/(g-b))}d+=_,++x[0]}}}function a(){return e()}var n=a;function r(i){var s={};return function(d,p,c){var m=d.dtype,l=d.order,x=[m,l.join()].join(),u=s[x];return u||(s[x]=u=i([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,p,c)}}function t(i){return r(n.bind(void 0,i))}function h(i){return t({funcName:i.funcName})}M.exports=h({funcName:"zeroCrossings"})},{}],318:[function(f,M,T){M.exports=a;var e=f("./lib/zc-core");function a(n,r){var t=[];return r=+r||0,e(n.hi(n.shape[0]-1),t,r),t}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof qe<"u"?qe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})}).call(this,Ce("c8ba"))},6374:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Object.defineProperty;Ke.exports=function(o,U){try{Xe(qe,o,{value:U,configurable:!0,writable:!0})}catch{qe[o]=U}return U}},6547:function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("5926"),o=Ce("577e"),U=Ce("1d80"),H=qe("".charAt),w=qe("".charCodeAt),f=qe("".slice),M=function(T){return function(e,a){var n=o(U(e)),r=Xe(a),t=n.length,h,i;return r<0||r>=t?T?"":void 0:(h=w(n,r),h<55296||h>56319||r+1===t||(i=w(n,r+1))<56320||i>57343?T?H(n,r):h:T?f(n,r,r+2):(h-55296<<10)+(i-56320)+65536)}};Ke.exports={codeAt:M(!1),charAt:M(!0)}},"65f0":function(Ke,ut,Ce){var qe=Ce("0b42");Ke.exports=function(Xe,o){return new(qe(Xe))(o===0?0:o)}},"68ee":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("d039"),o=Ce("1626"),U=Ce("f5df"),H=Ce("d066"),w=Ce("8925"),f=function(){},M=[],T=H("Reflect","construct"),e=/^\s*(?:class|function)\b/,a=qe(e.exec),n=!e.exec(f),r=function(i){if(!o(i))return!1;try{return T(f,M,i),!0}catch{return!1}},t=function(i){if(!o(i))return!1;switch(U(i)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return n||!!a(e,w(i))}catch{return!0}};t.sham=!0,Ke.exports=!T||Xe(function(){var h;return r(r.call)||!r(Object)||!r(function(){h=!0})||h})?t:r},"69f3":function(Ke,ut,Ce){var qe=Ce("cdce"),Xe=Ce("da84"),o=Ce("861d"),U=Ce("9112"),H=Ce("1a2d"),w=Ce("c6cd"),f=Ce("f772"),M=Ce("d012"),T="Object already initialized",e=Xe.TypeError,a=Xe.WeakMap,n,r,t,h=function(d){return t(d)?r(d):n(d,{})},i=function(d){return function(p){var c;if(!o(p)||(c=r(p)).type!==d)throw e("Incompatible receiver, "+d+" required");return c}};if(qe||w.state){var s=w.state||(w.state=new a);s.get=s.get,s.has=s.has,s.set=s.set,n=function(d,p){if(s.has(d))throw e(T);return p.facade=d,s.set(d,p),p},r=function(d){return s.get(d)||{}},t=function(d){return s.has(d)}}else{var y=f("state");M[y]=!0,n=function(d,p){if(H(d,y))throw e(T);return p.facade=d,U(d,y,p),p},r=function(d){return H(d,y)?d[y]:{}},t=function(d){return H(d,y)}}Ke.exports={set:n,get:r,has:t,enforce:h,getterFor:i}},7234:function(Ke,ut){Ke.exports=function(Ce){return Ce==null}},7418:function(Ke,ut){ut.f=Object.getOwnPropertySymbols},7839:function(Ke,ut){Ke.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(Ke,ut,Ce){var qe=Ce("cc12"),Xe=qe("span").classList,o=Xe&&Xe.constructor&&Xe.constructor.prototype;Ke.exports=o===Object.prototype?void 0:o},"7b0b":function(Ke,ut,Ce){var qe=Ce("1d80"),Xe=Object;Ke.exports=function(o){return Xe(qe(o))}},"7c73":function(Ke,ut,Ce){var qe=Ce("825a"),Xe=Ce("37e8"),o=Ce("7839"),U=Ce("d012"),H=Ce("1be4"),w=Ce("cc12"),f=Ce("f772"),M=">",T="<",e="prototype",a="script",n=f("IE_PROTO"),r=function(){},t=function(d){return T+a+M+d+T+"/"+a+M},h=function(d){d.write(t("")),d.close();var p=d.parentWindow.Object;return d=null,p},i=function(){var d=w("iframe"),p="java"+a+":",c;return d.style.display="none",H.appendChild(d),d.src=String(p),c=d.contentWindow.document,c.open(),c.write(t("document.F=Object")),c.close(),c.F},s,y=function(){try{s=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&s?h(s):i():h(s);for(var d=o.length;d--;)delete y[e][o[d]];return y()};U[n]=!0,Ke.exports=Object.create||function(p,c){var m;return p!==null?(r[e]=qe(p),m=new r,r[e]=null,m[n]=p):m=y(),c===void 0?m:Xe.f(m,c)}},"7d7e":function(Ke,ut,Ce){var qe=Ce("40d5"),Xe=Function.prototype,o=Xe.call,U=qe&&Xe.bind.bind(o,o);Ke.exports=qe?U:function(H){return function(){return o.apply(H,arguments)}}},"825a":function(Ke,ut,Ce){var qe=Ce("861d"),Xe=String,o=TypeError;Ke.exports=function(U){if(qe(U))return U;throw o(Xe(U)+" is not an object")}},"83ab":function(Ke,ut,Ce){var qe=Ce("d039");Ke.exports=!qe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(Ke,ut,Ce){var qe=Ce("a04b"),Xe=Ce("9bf2"),o=Ce("5c6c");Ke.exports=function(U,H,w){var f=qe(H);f in U?Xe.f(U,f,o(0,w)):U[f]=w}},"861d":function(Ke,ut,Ce){var qe=Ce("1626"),Xe=Ce("8ea1"),o=Xe.all;Ke.exports=Xe.IS_HTMLDDA?function(U){return typeof U=="object"?U!==null:qe(U)||U===o}:function(U){return typeof U=="object"?U!==null:qe(U)}},8875:function(Ke,ut,Ce){var qe,Xe,o;(function(U,H){Xe=[],qe=H,o=typeof qe=="function"?qe.apply(ut,Xe):qe,o!==void 0&&(Ke.exports=o)})(typeof self<"u"?self:this,function(){function U(){var H=Object.getOwnPropertyDescriptor(document,"currentScript");if(!H&&"currentScript"in document&&document.currentScript||H&&H.get!==U&&document.currentScript)return document.currentScript;try{throw new Error}catch(s){var w=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,M=w.exec(s.stack)||f.exec(s.stack),T=M&&M[1]||!1,e=M&&M[2]||!1,a=document.location.href.replace(document.location.hash,""),n,r,t,h=document.getElementsByTagName("script");T===a&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(e-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),t=n.replace(r,"$1").trim());for(var i=0;i<h.length;i++)if(h[i].readyState==="interactive"||h[i].src===T||T===a&&h[i].innerHTML&&h[i].innerHTML.trim()===t)return h[i];return null}}return U})},8925:function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("1626"),o=Ce("c6cd"),U=qe(Function.toString);Xe(o.inspectSource)||(o.inspectSource=function(H){return U(H)}),Ke.exports=o.inspectSource},"8aa5":function(Ke,ut,Ce){var qe=Ce("6547").charAt;Ke.exports=function(Xe,o,U){return o+(U?qe(Xe,o).length:1)}},"8ea1":function(Ke,ut){var Ce=typeof document=="object"&&document.all,qe=typeof Ce>"u"&&Ce!==void 0;Ke.exports={all:Ce,IS_HTMLDDA:qe}},"90e3":function(Ke,ut,Ce){var qe=Ce("e330"),Xe=0,o=Math.random(),U=qe(1 .toString);Ke.exports=function(H){return"Symbol("+(H===void 0?"":H)+")_"+U(++Xe+o,36)}},9112:function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("9bf2"),o=Ce("5c6c");Ke.exports=qe?function(U,H,w){return Xe.f(U,H,o(1,w))}:function(U,H,w){return U[H]=w,U}},9263:function(Ke,ut,Ce){var qe=Ce("c65b"),Xe=Ce("e330"),o=Ce("577e"),U=Ce("ad6d"),H=Ce("9f7f"),w=Ce("5692"),f=Ce("7c73"),M=Ce("69f3").get,T=Ce("fce3"),e=Ce("107c"),a=w("native-string-replace",String.prototype.replace),n=RegExp.prototype.exec,r=n,t=Xe("".charAt),h=Xe("".indexOf),i=Xe("".replace),s=Xe("".slice),y=function(){var m=/a/,l=/b*/g;return qe(n,m,"a"),qe(n,l,"a"),m.lastIndex!==0||l.lastIndex!==0}(),d=H.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,c=y||p||d||T||e;c&&(r=function(l){var x=this,u=M(x),A=o(l),_=u.raw,g,b,v,C,S,k,E;if(_)return _.lastIndex=x.lastIndex,g=qe(r,_,A),x.lastIndex=_.lastIndex,g;var F=u.groups,I=d&&x.sticky,D=qe(U,x),R=x.source,O=0,z=A;if(I&&(D=i(D,"y",""),h(D,"g")===-1&&(D+="g"),z=s(A,x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&t(A,x.lastIndex-1)!==`
`)&&(R="(?: "+R+")",z=" "+z,O++),b=new RegExp("^(?:"+R+")",D)),p&&(b=new RegExp("^"+R+"$(?!\\s)",D)),y&&(v=x.lastIndex),C=qe(n,I?b:x,z),I?C?(C.input=s(C.input,O),C[0]=s(C[0],O),C.index=x.lastIndex,x.lastIndex+=C[0].length):x.lastIndex=0:y&&C&&(x.lastIndex=x.global?C.index+C[0].length:v),p&&C&&C.length>1&&qe(a,C[0],b,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(C[S]=void 0)}),C&&F)for(C.groups=k=f(null),S=0;S<F.length;S++)E=F[S],k[E[0]]=C[E[1]];return C}),Ke.exports=r},"94ca":function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("1626"),o=/#|\.prototype\./,U=function(T,e){var a=w[H(T)];return a==M?!0:a==f?!1:Xe(e)?qe(e):!!e},H=U.normalize=function(T){return String(T).replace(o,".").toLowerCase()},w=U.data={},f=U.NATIVE="N",M=U.POLYFILL="P";Ke.exports=U},"99af":function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("d039"),o=Ce("e8b5"),U=Ce("861d"),H=Ce("7b0b"),w=Ce("07fa"),f=Ce("3511"),M=Ce("8418"),T=Ce("65f0"),e=Ce("1dde"),a=Ce("b622"),n=Ce("2d00"),r=a("isConcatSpreadable"),t=n>=51||!Xe(function(){var y=[];return y[r]=!1,y.concat()[0]!==y}),h=e("concat"),i=function(y){if(!U(y))return!1;var d=y[r];return d!==void 0?!!d:o(y)},s=!t||!h;qe({target:"Array",proto:!0,arity:1,forced:s},{concat:function(d){var p=H(this),c=T(p,0),m=0,l,x,u,A,_;for(l=-1,u=arguments.length;l<u;l++)if(_=l===-1?p:arguments[l],i(_))for(A=w(_),f(m+A),x=0;x<A;x++,m++)x in _&&M(c,m,_[x]);else f(m+1),M(c,m++,_);return c.length=m,c}})},"9bf2":function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("0cfb"),o=Ce("aed9"),U=Ce("825a"),H=Ce("a04b"),w=TypeError,f=Object.defineProperty,M=Object.getOwnPropertyDescriptor,T="enumerable",e="configurable",a="writable";ut.f=qe?o?function(r,t,h){if(U(r),t=H(t),U(h),typeof r=="function"&&t==="prototype"&&"value"in h&&a in h&&!h[a]){var i=M(r,t);i&&i[a]&&(r[t]=h.value,h={configurable:e in h?h[e]:i[e],enumerable:T in h?h[T]:i[T],writable:!1})}return f(r,t,h)}:f:function(r,t,h){if(U(r),t=H(t),U(h),Xe)try{return f(r,t,h)}catch{}if("get"in h||"set"in h)throw w("Accessors not supported");return"value"in h&&(r[t]=h.value),r}},"9f7f":function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("da84"),o=Xe.RegExp,U=qe(function(){var f=o("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),H=U||qe(function(){return!o("a","y").sticky}),w=U||qe(function(){var f=o("^r","gy");return f.lastIndex=2,f.exec("str")!=null});Ke.exports={BROKEN_CARET:w,MISSED_STICKY:H,UNSUPPORTED_Y:U}},a04b:function(Ke,ut,Ce){var qe=Ce("c04e"),Xe=Ce("d9b5");Ke.exports=function(o){var U=qe(o,"string");return Xe(U)?U:U+""}},a4d3:function(Ke,ut,Ce){Ce("d9f5"),Ce("b4f8"),Ce("c513"),Ce("e9c4"),Ce("5a47")},a640:function(Ke,ut,Ce){var qe=Ce("d039");Ke.exports=function(Xe,o){var U=[][Xe];return!!U&&qe(function(){U.call(null,o||function(){return 1},1)})}},ac1f:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("9263");qe({target:"RegExp",proto:!0,forced:/./.exec!==Xe},{exec:Xe})},ad6d:function(Ke,ut,Ce){var qe=Ce("825a");Ke.exports=function(){var Xe=qe(this),o="";return Xe.hasIndices&&(o+="d"),Xe.global&&(o+="g"),Xe.ignoreCase&&(o+="i"),Xe.multiline&&(o+="m"),Xe.dotAll&&(o+="s"),Xe.unicode&&(o+="u"),Xe.unicodeSets&&(o+="v"),Xe.sticky&&(o+="y"),o}},aed9:function(Ke,ut,Ce){var qe=Ce("83ab"),Xe=Ce("d039");Ke.exports=qe&&Xe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},b041:function(Ke,ut,Ce){var qe=Ce("00ee"),Xe=Ce("f5df");Ke.exports=qe?{}.toString:function(){return"[object "+Xe(this)+"]"}},b42e:function(Ke,ut){var Ce=Math.ceil,qe=Math.floor;Ke.exports=Math.trunc||function(o){var U=+o;return(U>0?qe:Ce)(U)}},b4f8:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("d066"),o=Ce("1a2d"),U=Ce("577e"),H=Ce("5692"),w=Ce("0b43"),f=H("string-to-symbol-registry"),M=H("symbol-to-string-registry");qe({target:"Symbol",stat:!0,forced:!w},{for:function(T){var e=U(T);if(o(f,e))return f[e];var a=Xe("Symbol")(e);return f[e]=a,M[a]=e,a}})},b622:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("5692"),o=Ce("1a2d"),U=Ce("90e3"),H=Ce("04f8"),w=Ce("fdbf"),f=Xe("wks"),M=qe.Symbol,T=M&&M.for,e=w?M:M&&M.withoutSetter||U;Ke.exports=function(a){if(!o(f,a)||!(H||typeof f[a]=="string")){var n="Symbol."+a;H&&o(M,a)?f[a]=M[a]:w&&T?f[a]=T(n):f[a]=e(n)}return f[a]}},b64b:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("7b0b"),o=Ce("df75"),U=Ce("d039"),H=U(function(){o(1)});qe({target:"Object",stat:!0,forced:H},{keys:function(f){return o(Xe(f))}})},b727:function(Ke,ut,Ce){var qe=Ce("0366"),Xe=Ce("e330"),o=Ce("44ad"),U=Ce("7b0b"),H=Ce("07fa"),w=Ce("65f0"),f=Xe([].push),M=function(T){var e=T==1,a=T==2,n=T==3,r=T==4,t=T==6,h=T==7,i=T==5||t;return function(s,y,d,p){for(var c=U(s),m=o(c),l=qe(y,d),x=H(m),u=0,A=p||w,_=e?A(s,x):a||h?A(s,0):void 0,g,b;x>u;u++)if((i||u in m)&&(g=m[u],b=l(g,u,c),T))if(e)_[u]=b;else if(b)switch(T){case 3:return!0;case 5:return g;case 6:return u;case 2:f(_,g)}else switch(T){case 4:return!1;case 7:f(_,g)}return t?-1:n||r?r:_}};Ke.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6),filterReject:M(7)}},c04e:function(Ke,ut,Ce){var qe=Ce("c65b"),Xe=Ce("861d"),o=Ce("d9b5"),U=Ce("dc4a"),H=Ce("485a"),w=Ce("b622"),f=TypeError,M=w("toPrimitive");Ke.exports=function(T,e){if(!Xe(T)||o(T))return T;var a=U(T,M),n;if(a){if(e===void 0&&(e="default"),n=qe(a,T,e),!Xe(n)||o(n))return n;throw f("Can't convert object to primitive value")}return e===void 0&&(e="number"),H(T,e)}},c430:function(Ke,ut){Ke.exports=!1},c513:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("1a2d"),o=Ce("d9b5"),U=Ce("0d51"),H=Ce("5692"),w=Ce("0b43"),f=H("symbol-to-string-registry");qe({target:"Symbol",stat:!0,forced:!w},{keyFor:function(T){if(!o(T))throw TypeError(U(T)+" is not a symbol");if(Xe(f,T))return f[T]}})},c65b:function(Ke,ut,Ce){var qe=Ce("40d5"),Xe=Function.prototype.call;Ke.exports=qe?Xe.bind(Xe):function(){return Xe.apply(Xe,arguments)}},c6b6:function(Ke,ut,Ce){var qe=Ce("7d7e"),Xe=qe({}.toString),o=qe("".slice);Ke.exports=function(U){return o(Xe(U),8,-1)}},c6cd:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("6374"),o="__core-js_shared__",U=qe[o]||Xe(o,{});Ke.exports=U},c8ba:function(Ke,ut){var Ce;Ce=function(){return this}();try{Ce=Ce||new Function("return this")()}catch{typeof window=="object"&&(Ce=window)}Ke.exports=Ce},ca84:function(Ke,ut,Ce){var qe=Ce("e330"),Xe=Ce("1a2d"),o=Ce("fc6a"),U=Ce("4d64").indexOf,H=Ce("d012"),w=qe([].push);Ke.exports=function(f,M){var T=o(f),e=0,a=[],n;for(n in T)!Xe(H,n)&&Xe(T,n)&&w(a,n);for(;M.length>e;)Xe(T,n=M[e++])&&(~U(a,n)||w(a,n));return a}},cb2d:function(Ke,ut,Ce){var qe=Ce("1626"),Xe=Ce("9bf2"),o=Ce("13d2"),U=Ce("6374");Ke.exports=function(H,w,f,M){M||(M={});var T=M.enumerable,e=M.name!==void 0?M.name:w;if(qe(f)&&o(f,e,M),M.global)T?H[w]=f:U(w,f);else{try{M.unsafe?H[w]&&(T=!0):delete H[w]}catch{}T?H[w]=f:Xe.f(H,w,{value:f,enumerable:!1,configurable:!M.nonConfigurable,writable:!M.nonWritable})}return H}},cc12:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("861d"),o=qe.document,U=Xe(o)&&Xe(o.createElement);Ke.exports=function(H){return U?o.createElement(H):{}}},cca6:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("60da");qe({target:"Object",stat:!0,arity:2,forced:Object.assign!==Xe},{assign:Xe})},cdce:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("1626"),o=qe.WeakMap;Ke.exports=Xe(o)&&/native code/.test(String(o))},d012:function(Ke,ut){Ke.exports={}},d039:function(Ke,ut){Ke.exports=function(Ce){try{return!!Ce()}catch{return!0}}},d066:function(Ke,ut,Ce){var qe=Ce("da84"),Xe=Ce("1626"),o=function(U){return Xe(U)?U:void 0};Ke.exports=function(U,H){return arguments.length<2?o(qe[U]):qe[U]&&qe[U][H]}},d1e7:function(Ke,ut,Ce){var qe={}.propertyIsEnumerable,Xe=Object.getOwnPropertyDescriptor,o=Xe&&!qe.call({1:2},1);ut.f=o?function(H){var w=Xe(this,H);return!!w&&w.enumerable}:qe},d3b7:function(Ke,ut,Ce){var qe=Ce("00ee"),Xe=Ce("cb2d"),o=Ce("b041");qe||Xe(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(Ke,ut,Ce){var qe=Ce("9bf2").f,Xe=Ce("1a2d"),o=Ce("b622"),U=o("toStringTag");Ke.exports=function(H,w,f){H&&!f&&(H=H.prototype),H&&!Xe(H,U)&&qe(H,U,{configurable:!0,value:w})}},d58f:function(Ke,ut,Ce){var qe=Ce("59ed"),Xe=Ce("7b0b"),o=Ce("44ad"),U=Ce("07fa"),H=TypeError,w=function(f){return function(M,T,e,a){qe(T);var n=Xe(M),r=o(n),t=U(n),h=f?t-1:0,i=f?-1:1;if(e<2)for(;;){if(h in r){a=r[h],h+=i;break}if(h+=i,f?h<0:t<=h)throw H("Reduce of empty array with no initial value")}for(;f?h>=0:t>h;h+=i)h in r&&(a=T(a,r[h],h,n));return a}};Ke.exports={left:w(!1),right:w(!0)}},d784:function(Ke,ut,Ce){Ce("ac1f");var qe=Ce("e330"),Xe=Ce("cb2d"),o=Ce("9263"),U=Ce("d039"),H=Ce("b622"),w=Ce("9112"),f=H("species"),M=RegExp.prototype;Ke.exports=function(T,e,a,n){var r=H(T),t=!U(function(){var y={};return y[r]=function(){return 7},""[T](y)!=7}),h=t&&!U(function(){var y=!1,d=/a/;return T==="split"&&(d={},d.constructor={},d.constructor[f]=function(){return d},d.flags="",d[r]=/./[r]),d.exec=function(){return y=!0,null},d[r](""),!y});if(!t||!h||a){var i=qe(/./[r]),s=e(r,""[T],function(y,d,p,c,m){var l=qe(y),x=d.exec;return x===o||x===M.exec?t&&!m?{done:!0,value:i(d,p,c)}:{done:!0,value:l(p,d,c)}:{done:!1}});Xe(String.prototype,T,s[0]),Xe(M,r,s[1])}n&&w(M[r],"sham",!0)}},d81d:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("b727").map,o=Ce("1dde"),U=o("map");qe({target:"Array",proto:!0,forced:!U},{map:function(w){return Xe(this,w,arguments.length>1?arguments[1]:void 0)}})},d9b5:function(Ke,ut,Ce){var qe=Ce("d066"),Xe=Ce("1626"),o=Ce("3a9b"),U=Ce("fdbf"),H=Object;Ke.exports=U?function(w){return typeof w=="symbol"}:function(w){var f=qe("Symbol");return Xe(f)&&o(f.prototype,H(w))}},d9f5:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("da84"),o=Ce("c65b"),U=Ce("e330"),H=Ce("c430"),w=Ce("83ab"),f=Ce("04f8"),M=Ce("d039"),T=Ce("1a2d"),e=Ce("3a9b"),a=Ce("825a"),n=Ce("fc6a"),r=Ce("a04b"),t=Ce("577e"),h=Ce("5c6c"),i=Ce("7c73"),s=Ce("df75"),y=Ce("241c"),d=Ce("057f"),p=Ce("7418"),c=Ce("06cf"),m=Ce("9bf2"),l=Ce("37e8"),x=Ce("d1e7"),u=Ce("cb2d"),A=Ce("5692"),_=Ce("f772"),g=Ce("d012"),b=Ce("90e3"),v=Ce("b622"),C=Ce("e538"),S=Ce("e065"),k=Ce("57b9"),E=Ce("d44e"),F=Ce("69f3"),I=Ce("b727").forEach,D=_("hidden"),R="Symbol",O="prototype",z=F.set,B=F.getterFor(R),G=Object[O],Q=Xe.Symbol,X=Q&&Q[O],j=Xe.TypeError,re=Xe.QObject,ue=c.f,K=m.f,te=d.f,Y=x.f,V=U([].push),ee=A("symbols"),ne=A("op-symbols"),Z=A("wks"),q=!re||!re[O]||!re[O].findChild,ie=w&&M(function(){return i(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a!=7})?function(me,Me,Le){var Oe=ue(G,Me);Oe&&delete G[Me],K(me,Me,Le),Oe&&me!==G&&K(G,Me,Oe)}:K,se=function(me,Me){var Le=ee[me]=i(X);return z(Le,{type:R,tag:me,description:Me}),w||(Le.description=Me),Le},ae=function(Me,Le,Oe){Me===G&&ae(ne,Le,Oe),a(Me);var _e=r(Le);return a(Oe),T(ee,_e)?(Oe.enumerable?(T(Me,D)&&Me[D][_e]&&(Me[D][_e]=!1),Oe=i(Oe,{enumerable:h(0,!1)})):(T(Me,D)||K(Me,D,h(1,{})),Me[D][_e]=!0),ie(Me,_e,Oe)):K(Me,_e,Oe)},oe=function(Me,Le){a(Me);var Oe=n(Le),_e=s(Oe).concat(ge(Oe));return I(_e,function(Ee){(!w||o(ce,Oe,Ee))&&ae(Me,Ee,Oe[Ee])}),Me},be=function(Me,Le){return Le===void 0?i(Me):oe(i(Me),Le)},ce=function(Me){var Le=r(Me),Oe=o(Y,this,Le);return this===G&&T(ee,Le)&&!T(ne,Le)?!1:Oe||!T(this,Le)||!T(ee,Le)||T(this,D)&&this[D][Le]?Oe:!0},de=function(Me,Le){var Oe=n(Me),_e=r(Le);if(!(Oe===G&&T(ee,_e)&&!T(ne,_e))){var Ee=ue(Oe,_e);return Ee&&T(ee,_e)&&!(T(Oe,D)&&Oe[D][_e])&&(Ee.enumerable=!0),Ee}},ye=function(Me){var Le=te(n(Me)),Oe=[];return I(Le,function(_e){!T(ee,_e)&&!T(g,_e)&&V(Oe,_e)}),Oe},ge=function(me){var Me=me===G,Le=te(Me?ne:n(me)),Oe=[];return I(Le,function(_e){T(ee,_e)&&(!Me||T(G,_e))&&V(Oe,ee[_e])}),Oe};f||(Q=function(){if(e(X,this))throw j("Symbol is not a constructor");var Me=!arguments.length||arguments[0]===void 0?void 0:t(arguments[0]),Le=b(Me),Oe=function(_e){this===G&&o(Oe,ne,_e),T(this,D)&&T(this[D],Le)&&(this[D][Le]=!1),ie(this,Le,h(1,_e))};return w&&q&&ie(G,Le,{configurable:!0,set:Oe}),se(Le,Me)},X=Q[O],u(X,"toString",function(){return B(this).tag}),u(Q,"withoutSetter",function(me){return se(b(me),me)}),x.f=ce,m.f=ae,l.f=oe,c.f=de,y.f=d.f=ye,p.f=ge,C.f=function(me){return se(v(me),me)},w&&(K(X,"description",{configurable:!0,get:function(){return B(this).description}}),H||u(G,"propertyIsEnumerable",ce,{unsafe:!0}))),qe({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Q}),I(s(Z),function(me){S(me)}),qe({target:R,stat:!0,forced:!f},{useSetter:function(){q=!0},useSimple:function(){q=!1}}),qe({target:"Object",stat:!0,forced:!f,sham:!w},{create:be,defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:de}),qe({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ye}),k(),E(Q,R),g[D]=!0},da84:function(Ke,ut,Ce){(function(qe){var Xe=function(o){return o&&o.Math==Math&&o};Ke.exports=Xe(typeof globalThis=="object"&&globalThis)||Xe(typeof window=="object"&&window)||Xe(typeof self=="object"&&self)||Xe(typeof qe=="object"&&qe)||function(){return this}()||Function("return this")()}).call(this,Ce("c8ba"))},dbb4:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("83ab"),o=Ce("56ef"),U=Ce("fc6a"),H=Ce("06cf"),w=Ce("8418");qe({target:"Object",stat:!0,sham:!Xe},{getOwnPropertyDescriptors:function(M){for(var T=U(M),e=H.f,a=o(T),n={},r=0,t,h;a.length>r;)h=e(T,t=a[r++]),h!==void 0&&w(n,t,h);return n}})},dc4a:function(Ke,ut,Ce){var qe=Ce("59ed"),Xe=Ce("7234");Ke.exports=function(o,U){var H=o[U];return Xe(H)?void 0:qe(H)}},df75:function(Ke,ut,Ce){var qe=Ce("ca84"),Xe=Ce("7839");Ke.exports=Object.keys||function(U){return qe(U,Xe)}},e065:function(Ke,ut,Ce){var qe=Ce("428f"),Xe=Ce("1a2d"),o=Ce("e538"),U=Ce("9bf2").f;Ke.exports=function(H){var w=qe.Symbol||(qe.Symbol={});Xe(w,H)||U(w,H,{value:o.f(H)})}},e330:function(Ke,ut,Ce){var qe=Ce("c6b6"),Xe=Ce("7d7e");Ke.exports=function(o){if(qe(o)==="Function")return Xe(o)}},e439:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("d039"),o=Ce("fc6a"),U=Ce("06cf").f,H=Ce("83ab"),w=Xe(function(){U(1)}),f=!H||w;qe({target:"Object",stat:!0,forced:f,sham:!H},{getOwnPropertyDescriptor:function(T,e){return U(o(T),e)}})},e538:function(Ke,ut,Ce){var qe=Ce("b622");ut.f=qe},e893:function(Ke,ut,Ce){var qe=Ce("1a2d"),Xe=Ce("56ef"),o=Ce("06cf"),U=Ce("9bf2");Ke.exports=function(H,w,f){for(var M=Xe(w),T=U.f,e=o.f,a=0;a<M.length;a++){var n=M[a];!qe(H,n)&&!(f&&qe(f,n))&&T(H,n,e(w,n))}}},e8b5:function(Ke,ut,Ce){var qe=Ce("c6b6");Ke.exports=Array.isArray||function(o){return qe(o)=="Array"}},e9c4:function(Ke,ut,Ce){var qe=Ce("23e7"),Xe=Ce("d066"),o=Ce("2ba4"),U=Ce("c65b"),H=Ce("e330"),w=Ce("d039"),f=Ce("e8b5"),M=Ce("1626"),T=Ce("861d"),e=Ce("d9b5"),a=Ce("f36a"),n=Ce("04f8"),r=Xe("JSON","stringify"),t=H(/./.exec),h=H("".charAt),i=H("".charCodeAt),s=H("".replace),y=H(1 .toString),d=/[\uD800-\uDFFF]/g,p=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,m=!n||w(function(){var A=Xe("Symbol")();return r([A])!="[null]"||r({a:A})!="{}"||r(Object(A))!="{}"}),l=w(function(){return r("\uDF06\uD834")!=='"\\udf06\\ud834"'||r("\uDEAD")!=='"\\udead"'}),x=function(A,_){var g=a(arguments),b=_;if(!(!T(_)&&A===void 0||e(A)))return f(_)||(_=function(v,C){if(M(b)&&(C=U(b,this,v,C)),!e(C))return C}),g[1]=_,o(r,null,g)},u=function(A,_,g){var b=h(g,_-1),v=h(g,_+1);return t(p,A)&&!t(c,v)||t(c,A)&&!t(p,b)?"\\u"+y(i(A,0),16):A};r&&qe({target:"JSON",stat:!0,arity:3,forced:m||l},{stringify:function(_,g,b){var v=a(arguments),C=o(m?x:r,null,v);return l&&typeof C=="string"?s(C,d,u):C}})},f36a:function(Ke,ut,Ce){var qe=Ce("e330");Ke.exports=qe([].slice)},f5df:function(Ke,ut,Ce){var qe=Ce("00ee"),Xe=Ce("1626"),o=Ce("c6b6"),U=Ce("b622"),H=U("toStringTag"),w=Object,f=o(function(){return arguments}())=="Arguments",M=function(T,e){try{return T[e]}catch{}};Ke.exports=qe?o:function(T){var e,a,n;return T===void 0?"Undefined":T===null?"Null":typeof(a=M(e=w(T),H))=="string"?a:f?o(e):(n=o(e))=="Object"&&Xe(e.callee)?"Arguments":n}},f772:function(Ke,ut,Ce){var qe=Ce("5692"),Xe=Ce("90e3"),o=qe("keys");Ke.exports=function(U){return o[U]||(o[U]=Xe(U))}},f7fe:function(Ke,ut,Ce){(function(qe){var Xe="Expected a function",o=NaN,U="[object Symbol]",H=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,M=/^0o[0-7]+$/i,T=parseInt,e=typeof qe=="object"&&qe&&qe.Object===Object&&qe,a=typeof self=="object"&&self&&self.Object===Object&&self,n=e||a||Function("return this")(),r=Object.prototype,t=r.toString,h=Math.max,i=Math.min,s=function(){return n.Date.now()};function y(l,x,u){var A,_,g,b,v,C,S=0,k=!1,E=!1,F=!0;if(typeof l!="function")throw new TypeError(Xe);x=m(x)||0,d(u)&&(k=!!u.leading,E="maxWait"in u,g=E?h(m(u.maxWait)||0,x):g,F="trailing"in u?!!u.trailing:F);function I(j){var re=A,ue=_;return A=_=void 0,S=j,b=l.apply(ue,re),b}function D(j){return S=j,v=setTimeout(z,x),k?I(j):b}function R(j){var re=j-C,ue=j-S,K=x-re;return E?i(K,g-ue):K}function O(j){var re=j-C,ue=j-S;return C===void 0||re>=x||re<0||E&&ue>=g}function z(){var j=s();if(O(j))return B(j);v=setTimeout(z,R(j))}function B(j){return v=void 0,F&&A?I(j):(A=_=void 0,b)}function G(){v!==void 0&&clearTimeout(v),S=0,A=C=_=v=void 0}function Q(){return v===void 0?b:B(s())}function X(){var j=s(),re=O(j);if(A=arguments,_=this,C=j,re){if(v===void 0)return D(C);if(E)return v=setTimeout(z,x),I(C)}return v===void 0&&(v=setTimeout(z,x)),b}return X.cancel=G,X.flush=Q,X}function d(l){var x=typeof l;return!!l&&(x=="object"||x=="function")}function p(l){return!!l&&typeof l=="object"}function c(l){return typeof l=="symbol"||p(l)&&t.call(l)==U}function m(l){if(typeof l=="number")return l;if(c(l))return o;if(d(l)){var x=typeof l.valueOf=="function"?l.valueOf():l;l=d(x)?x+"":x}if(typeof l!="string")return l===0?l:+l;l=l.replace(H,"");var u=f.test(l);return u||M.test(l)?T(l.slice(2),u?2:8):w.test(l)?o:+l}Ke.exports=y}).call(this,Ce("c8ba"))},fae3:function(Ke,ut,Ce){if(Ce.r(ut),Ce.d(ut,"Plotly",function(){return u}),typeof window<"u"){var qe=window.document.currentScript;{var Xe=Ce("8875");qe=Xe(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:Xe})}var o=qe&&qe.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(Ce.p=o[1])}var U=function(){var _=this,g=_._self._c;return g("div",{directives:[{name:"resize",rawName:"v-resize:debounce.100",value:_.onResize,expression:"onResize",arg:"debounce",modifiers:{100:!0}}],attrs:{id:_.id}})},H=[];Ce("b64b"),Ce("a4d3"),Ce("4de4"),Ce("d3b7"),Ce("e439"),Ce("14d9"),Ce("159b"),Ce("dbb4");function w(A,_,g){return _ in A?Object.defineProperty(A,_,{value:g,enumerable:!0,configurable:!0,writable:!0}):A[_]=g,A}function f(A,_){var g=Object.keys(A);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(A);_&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(A,v).enumerable})),g.push.apply(g,b)}return g}function M(A){for(var _=1;_<arguments.length;_++){var g=arguments[_]!=null?arguments[_]:{};_%2?f(Object(g),!0).forEach(function(b){w(A,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(g)):f(Object(g)).forEach(function(b){Object.defineProperty(A,b,Object.getOwnPropertyDescriptor(g,b))})}return A}Ce("e9c4"),Ce("13d5"),Ce("cca6");var T=Ce("61cc"),e=Ce.n(T);Ce("d81d"),Ce("99af");var a=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],n=a.map(function(A){return A.toLocaleLowerCase()}).map(function(A){return{completeName:"plotly_"+A,handler:function(g){return function(){for(var b=arguments.length,v=new Array(b),C=0;C<b;C++)v[C]=arguments[C];g.$emit.apply(g,[A].concat(v))}}}}),r=n,t=["restyle","relayout","update","addTraces","deleteTraces","moveTraces","extendTraces","prependTraces","purge"],h=t.reduce(function(A,_){return A[_]=function(){for(var g=arguments.length,b=new Array(g),v=0;v<g;v++)b[v]=arguments[v];return e.a[_].apply(e.a,[this.$el].concat(b))},A},{}),i=h;Ce("ac1f"),Ce("5319");function s(A){var _=Object.create(null);return function(b){var v=_[b];return v||(_[b]=A(b))}}var y=/-(\w)/g,d=s(function(A){return A.replace(y,function(_,g){return g?g.toUpperCase():""})}),p={};typeof window<"u"&&(p.resize=Ce("428d"));var c={name:"plotly",inheritAttrs:!1,directives:p,props:{data:{type:Array},layout:{type:Object},id:{type:String,required:!1,default:null}},data:function(){return{scheduled:null,innerLayout:M({},this.layout)}},mounted:function(){var _=this;e.a.newPlot(this.$el,this.data,this.innerLayout,this.options),r.forEach(function(g){_.$el.on(g.completeName,g.handler(_))})},watch:{data:{handler:function(){this.schedule({replot:!0})},deep:!0},options:{handler:function(_,g){JSON.stringify(_)!==JSON.stringify(g)&&this.schedule({replot:!0})},deep:!0},layout:function(_){this.innerLayout=M({},_),this.schedule({replot:!1})}},computed:{options:function(){var _=this,g=Object.keys(this.$attrs).reduce(function(b,v){return b[d(v)]=_.$attrs[v],b},{});return M({responsive:!1},g)}},beforeDestroy:function(){var _=this;r.forEach(function(g){return _.$el.removeAllListeners(g.completeName)}),e.a.purge(this.$el)},methods:M(M({},i),{},{onResize:function(){e.a.Plots.resize(this.$el)},schedule:function(_){var g=this,b=this.scheduled;if(b){b.replot=b.replot||_.replot;return}this.scheduled=_,this.$nextTick(function(){var v=g.scheduled.replot;if(g.scheduled=null,v){g.react();return}g.relayout(g.innerLayout)})},toImage:function(_){var g=Object.assign(this.getPrintOptions(),_);return e.a.toImage(this.$el,g)},downloadImage:function(_){var g="plot--".concat(new Date().toISOString()),b=Object.assign(this.getPrintOptions(),{filename:g},_);return e.a.downloadImage(this.$el,b)},getPrintOptions:function(){var _=this.$el;return{format:"png",width:_.clientWidth,height:_.clientHeight}},react:function(){e.a.react(this.$el,this.data,this.innerLayout,this.options)}})},m=c;function l(A,_,g,b,v,C,S,k){var E=typeof A=="function"?A.options:A;_&&(E.render=_,E.staticRenderFns=g,E._compiled=!0),b&&(E.functional=!0),C&&(E._scopeId="data-v-"+C);var F;if(S?(F=function(R){R=R||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!R&&typeof __VUE_SSR_CONTEXT__<"u"&&(R=__VUE_SSR_CONTEXT__),v&&v.call(this,R),R&&R._registeredComponents&&R._registeredComponents.add(S)},E._ssrRegister=F):v&&(F=k?function(){v.call(this,(E.functional?this.parent:this).$root.$options.shadowRoot)}:v),F)if(E.functional){E._injectStyles=F;var I=E.render;E.render=function(O,z){return F.call(z),I(O,z)}}else{var D=E.beforeCreate;E.beforeCreate=D?[].concat(D,F):[F]}return{exports:A,options:E}}var x=l(m,U,H,!1,null,null,null),u=x.exports},fc6a:function(Ke,ut,Ce){var qe=Ce("44ad"),Xe=Ce("1d80");Ke.exports=function(o){return qe(Xe(o))}},fce3:function(Ke,ut,Ce){var qe=Ce("d039"),Xe=Ce("da84"),o=Xe.RegExp;Ke.exports=qe(function(){var U=o(".","s");return!(U.dotAll&&U.exec(`
`)&&U.flags==="s")})},fdbc:function(Ke,ut){Ke.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(Ke,ut,Ce){var qe=Ce("04f8");Ke.exports=qe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}})})(qv);function Gf(it={},Ke={},ut={},Ce=!1){return{name:it.name,mixins:[rd],props:{plotlyOptions:{type:Object,default:function(){return{}}}},render(Xe){const o=new rv.PivotData(this.$props),U=o.getRowKeys(),H=o.getColKeys(),w=Ce?H:U;w.length===0&&w.push([]);const f=Ce?U:H;f.length===0&&f.push([]);let M=this.$props.aggregatorName;const T=this.$props.aggregators[M]([])().numInputs||0;T!==0&&(M+=` of ${this.$props.vals.slice(0,T).join(", ")}`);const e=w.map(h=>{const i=[],s=[];for(const d of f){const p=parseFloat(o.getAggregator(Ce?d:h,Ce?h:d).value());i.push(isFinite(p)?p:null),s.push(d.join("-")||" ")}const y={name:h.join("-")||M};return Ke.type==="pie"?(y.values=i,y.labels=s.length>1?s:[M]):(y.x=Ce?i:s,y.y=Ce?s:i),Object.assign(y,Ke)});let a=M;const n=Ce?this.$props.rows.join("-"):this.$props.cols.join("-"),r=Ce?this.$props.cols.join("-"):this.$props.rows.join("-");n!==""&&(a+=` vs ${n}`),r!==""&&(a+=` by ${r}`);const t={title:a,hovermode:"closest",width:window.innerWidth/1.5,height:window.innerHeight/1.4-50};if(Ke.type==="pie"){const h=Math.ceil(Math.sqrt(e.length)),i=Math.ceil(e.length/h);t.grid={columns:h,rows:i},e.forEach((s,y)=>{s.domain={row:Math.floor(y/h),column:y-h*Math.floor(y/h)},e.length>1&&(s.title=s.name)}),e[0].labels.length===1&&(t.showlegend=!1)}else t.xaxis={title:Ce?M:null,automargin:!0},t.yaxis={title:Ce?null:M,automargin:!0};return Xe(qv.exports.Plotly,{props:{data:e,layout:Object.assign({},t,ut,this.$props.plotlyOptions)}})}}}function og(it={}){return{name:it.name,mixins:[rd],props:{plotlyOptions:{type:Object,default:function(){return{}}}},render(ut){const Ce=new rv.PivotData(this.$props),qe=Ce.getRowKeys(),Xe=Ce.getColKeys();qe.length===0&&qe.push([]),Xe.length===0&&Xe.push([]);const o={x:[],y:[],text:[],type:"scatter",mode:"markers"};qe.map(H=>{Xe.map(w=>{const f=Ce.getAggregator(H,w).value();f!==null&&(o.x.push(w.join("-")),o.y.push(H.join("-")),o.text.push(f))})});const U={title:this.$props.rows.join("-")+" vs "+this.$props.cols.join("-"),hovermode:"closest",xaxis:{title:this.$props.cols.join("-"),automargin:!0},yaxis:{title:this.$props.rows.join("-"),automargin:!0},width:window.innerWidth/1.5,height:window.innerHeight/1.4-50};return ut(qv.exports.Plotly,{props:{data:[o],layout:Object.assign({},U,this.$props.plotlyOptions)}})}}}return{"Grouped Column Chart":Gf({name:"vue-grouped-column-chart"},{type:"bar"},{barmode:"group"}),"Stacked Column Chart":Gf({name:"vue-stacked-column-chart"},{type:"bar"},{barmode:"relative"}),"Grouped Bar Chart":Gf({name:"groupd-bar-chart"},{type:"bar",orientation:"h"},{barmode:"group"},!0),"Stacked Bar Chart":Gf({name:"vue-stacked-bar-chart"},{type:"bar",orientation:"h"},{barmode:"relative"},!0),"Line Chart":Gf({name:"vue-line-chart"}),"Dot Chart":Gf({name:"vue-dot-chart"},{mode:"markers"},{},!0),"Area Chart":Gf({name:"vue-area-chart"},{stackgroup:1}),"Scatter Chart":og({name:"vue-scatter-chart"}),"Multiple Pie Chart":Gf({name:"vue-multiple-pie-chart"},{type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)}});
